var no=Object.defineProperty;var io=(t,e,s)=>e in t?no(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ao=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var yr=(t,e,s)=>(io(t,typeof e!="symbol"?e+"":e,s),s);var Lm=ao((Nm,Ws)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function R(){}const Ci=t=>t;function gs(t,e){for(const s in e)t[s]=e[s];return t}function oo(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ri(t){return t()}function En(){return Object.create(null)}function xe(t){t.forEach(Ri)}function er(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Cs;function Be(t,e){return t===e?!0:(Cs||(Cs=document.createElement("a")),Cs.href=e,t===Cs.href)}function lo(t){return Object.keys(t).length===0}function ji(t,...e){if(t==null){for(const r of e)r(void 0);return R}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function Ai(t,e,s){t.$$.on_destroy.push(ji(e,s))}function tr(t,e,s,r){if(t){const n=Ii(t,e,s,r);return t[0](n)}}function Ii(t,e,s,r){return t[1]&&r?gs(s.ctx.slice(),t[1](r(e))):s.ctx}function sr(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],a=Math.max(e.dirty.length,n.length);for(let l=0;l<a;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function rr(t,e,s,r,n,i){if(n){const a=Ii(e,s,r,i);t.p(a,n)}}function nr(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}const Li=typeof window<"u";let co=Li?()=>window.performance.now():()=>Date.now(),Jr=Li?t=>requestAnimationFrame(t):R;const Jt=new Set;function xi(t){Jt.forEach(e=>{e.c(t)||(Jt.delete(e),e.f())}),Jt.size!==0&&Jr(xi)}function uo(t){let e;return Jt.size===0&&Jr(xi),{promise:new Promise(s=>{Jt.add(e={c:t,f:s})}),abort(){Jt.delete(e)}}}function d(t,e){t.appendChild(e)}function Yi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ho(t){const e=m("style");return e.textContent="/* empty */",fo(Yi(t),e),e.sheet}function fo(t,e){return d(t.head||t,e),e.sheet}function P(t,e,s){t.insertBefore(e,s||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function m(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function $(){return z(" ")}function qe(){return z("")}function le(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function _o(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function Ni(t){return t===""?null:+t}function mo(t){return Array.from(t.childNodes)}function te(t,e){e=""+e,t.data!==e&&(t.data=e)}function $e(t,e){t.value=e??""}function At(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function Ui(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function Hs(t,e){return new t(e)}const Bs=new Map;let qs=0;function po(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function go(t,e){const s={stylesheet:ho(e),rules:{}};return Bs.set(t,s),s}function bo(t,e,s,r,n,i,a,l=0){const o=16.666/r;let c=`{
`;for(let b=0;b<=1;b+=o){const w=e+(s-e)*i(b);c+=b*100+`%{${a(w,1-w)}}
`}const u=c+`100% {${a(s,1-s)}}
}`,f=`__svelte_${po(u)}_${l}`,_=Yi(t),{stylesheet:g,rules:p}=Bs.get(_)||go(_,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${f} ${r}ms linear ${n}ms 1 both`,qs+=1,f}function Pn(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),qs-=n,qs||vo())}function vo(){Jr(()=>{qs||(Bs.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),Bs.clear())})}let bs;function ut(t){bs=t}function Os(){if(!bs)throw new Error("Function called outside component initialization");return bs}function vs(t){Os().$$.on_mount.push(t)}function yo(t){Os().$$.after_update.push(t)}function wo(t){Os().$$.on_destroy.push(t)}function ko(){const t=Os();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=Ui(e,s,{cancelable:r});return n.slice().forEach(a=>{a.call(t,i)}),!i.defaultPrevented}return!0}}function jr(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const qt=[],zs=[];let Kt=[];const Cn=[],Fi=Promise.resolve();let Ar=!1;function Wi(){Ar||(Ar=!0,Fi.then(Kr))}function Hi(){return Wi(),Fi}function Ae(t){Kt.push(t)}const wr=new Set;let Yt=0;function Kr(){if(Yt!==0)return;const t=bs;do{try{for(;Yt<qt.length;){const e=qt[Yt];Yt++,ut(e),$o(e.$$)}}catch(e){throw qt.length=0,Yt=0,e}for(ut(null),qt.length=0,Yt=0;zs.length;)zs.pop()();for(let e=0;e<Kt.length;e+=1){const s=Kt[e];wr.has(s)||(wr.add(s),s())}Kt.length=0}while(qt.length);for(;Cn.length;)Cn.pop()();Ar=!1,wr.clear(),ut(t)}function $o(t){if(t.fragment!==null){t.update(),xe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ae)}}function So(t){const e=[],s=[];Kt.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),Kt=e}let cs;function Oo(){return cs||(cs=Promise.resolve(),cs.then(()=>{cs=null})),cs}function Rn(t,e,s){t.dispatchEvent(Ui(`intro${s}`))}const Ys=new Set;let Ct;function ce(){Ct={r:0,c:[],p:Ct}}function ue(){Ct.r||xe(Ct.c),Ct=Ct.p}function k(t,e){t&&t.i&&(Ys.delete(t),t.i(e))}function S(t,e,s,r){if(t&&t.o){if(Ys.has(t))return;Ys.add(t),Ct.c.push(()=>{Ys.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const To={duration:0};function Xe(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,a,l,o=0;function c(){a&&Pn(t,a)}function u(){const{delay:_=0,duration:g=300,easing:p=Ci,tick:v=R,css:b}=n||To;b&&(a=bo(t,0,1,g,_,p,b,o++)),v(0,1);const w=co()+_,y=w+g;l&&l.abort(),i=!0,Ae(()=>Rn(t,!0,"start")),l=uo(T=>{if(i){if(T>=y)return v(1,0),Rn(t,!0,"end"),c(),i=!1;if(T>=w){const D=p((T-w)/g);v(D,1-D)}}return i})}let f=!1;return{start(){f||(f=!0,Pn(t),er(n)?(n=n(r),Oo().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Bi(t,e){const s=e.token={};function r(n,i,a,l){if(e.token!==s)return;e.resolved=l;let o=e.ctx;a!==void 0&&(o=o.slice(),o[a]=l);const c=n&&(e.current=n)(o);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==i&&f&&(ce(),S(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),ue())}):e.block.d(1),c.c(),k(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&Kr()}if(oo(t)){const n=Os();if(t.then(i=>{ut(n),r(e.then,1,e.value,i),ut(null)},i=>{if(ut(n),r(e.catch,2,e.error,i),ut(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function qi(t,e,s){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,s)}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Gs(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const a=t[i],l=e[i];if(l){for(const o in a)o in l||(r[o]=1);for(const o in l)n[o]||(s[o]=l[o],n[o]=1);t[i]=l}else for(const o in a)n[o]=1}for(const a in r)a in s||(s[a]=void 0);return s}function Vs(t){return typeof t=="object"&&t!==null?t:{}}function L(t){t&&t.c()}function A(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),Ae(()=>{const i=t.$$.on_mount.map(Ri).filter(er);t.$$.on_destroy?t.$$.on_destroy.push(...i):xe(i),t.$$.on_mount=[]}),n.forEach(Ae)}function I(t,e){const s=t.$$;s.fragment!==null&&(So(s.after_update),xe(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Do(t,e){t.$$.dirty[0]===-1&&(qt.push(t),Wi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,s,r,n,i,a=null,l=[-1]){const o=bs;ut(t);const c=t.$$={fragment:null,ctx:[],props:i,update:R,not_equal:n,bound:En(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:En(),dirty:l,skip_bound:!1,root:e.target||o.$$.root};a&&a(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(f,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&Do(t,f)),_}):[],c.update(),u=!0,xe(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=mo(e.target);c.fragment&&c.fragment.l(f),f.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&k(t.$$.fragment),A(t,e.target,e.anchor),Kr()}ut(o)}class ae{constructor(){yr(this,"$$");yr(this,"$$set")}$destroy(){I(this,1),this.$destroy=R}$on(e,s){if(!er(s))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!lo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mo);const Nt=[];function zi(t,e){return{subscribe:ir(t,e).subscribe}}function ir(t,e=R){let s;const r=new Set;function n(l){if(re(t,l)&&(t=l,s)){const o=!Nt.length;for(const c of r)c[1](),Nt.push(c,t);if(o){for(let c=0;c<Nt.length;c+=2)Nt[c][0](Nt[c+1]);Nt.length=0}}}function i(l){n(l(t))}function a(l,o=R){const c=[l,o];return r.add(c),r.size===1&&(s=e(n,i)||R),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:a}}function Gi(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return zi(s,(a,l)=>{let o=!1;const c=[];let u=0,f=R;const _=()=>{if(u)return;f();const p=e(r?c[0]:c,a,l);i?a(p):f=er(p)?p:R},g=n.map((p,v)=>ji(p,b=>{c[v]=b,u&=~(1<<v),o&&_()},()=>{u|=1<<v}));return o=!0,_(),function(){xe(g),f(),o=!1}})}const ss=ir(localStorage.getItem("accType")),Eo=ir(localStorage.getItem("user_id"));function Po(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,a=[],l="",o=t.split("/");for(o[0]||o.shift();n=o.shift();)s=n[0],s==="*"?(a.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+"/?$","i")}}function Co(t){let e,s,r;const n=[t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=gs(c,n[u]);return o!==void 0&&o&4&&(c=gs(c,Gs(n,[Vs(l[2])]))),{props:c}}return i&&(e=Hs(i,a(t)),e.$on("routeEvent",t[7])),{c(){e&&L(e.$$.fragment),s=qe()},m(l,o){e&&A(e,l,o),P(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){ce();const c=e;S(c.$$.fragment,1,0,()=>{I(c,1)}),ue()}i?(e=Hs(i,a(l,o)),e.$on("routeEvent",l[7]),L(e.$$.fragment),k(e.$$.fragment,1),A(e,s.parentNode,s)):e=null}else if(i){const c=o&4?Gs(n,[Vs(l[2])]):{};e.$set(c)}},i(l){r||(e&&k(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&E(s),e&&I(e,l)}}}function Ro(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=gs(c,n[u]);return o!==void 0&&o&6&&(c=gs(c,Gs(n,[o&2&&{params:l[1]},o&4&&Vs(l[2])]))),{props:c}}return i&&(e=Hs(i,a(t)),e.$on("routeEvent",t[6])),{c(){e&&L(e.$$.fragment),s=qe()},m(l,o){e&&A(e,l,o),P(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){ce();const c=e;S(c.$$.fragment,1,0,()=>{I(c,1)}),ue()}i?(e=Hs(i,a(l,o)),e.$on("routeEvent",l[6]),L(e.$$.fragment),k(e.$$.fragment,1),A(e,s.parentNode,s)):e=null}else if(i){const c=o&6?Gs(n,[o&2&&{params:l[1]},o&4&&Vs(l[2])]):{};e.$set(c)}},i(l){r||(e&&k(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&E(s),e&&I(e,l)}}}function jo(t){let e,s,r,n;const i=[Ro,Co],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e===u?a[e].p(o,c):(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function jn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const Zr=zi(null,function(e){e(jn());const s=()=>{e(jn())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),Ao=Gi(Zr,t=>t.location),Io=Gi(Zr,t=>t.querystring),An=ir(void 0);async function Lo(){await Hi(),window.history.back()}function xo(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Yo(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class a{constructor(O,j){if(!j||typeof j!="function"&&(typeof j!="object"||j._sveltesparouter!==!0))throw Error("Invalid component object");if(!O||typeof O=="string"&&(O.length<1||O.charAt(0)!="/"&&O.charAt(0)!="*")||typeof O=="object"&&!(O instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:Y,keys:F}=Po(O);this.path=O,typeof j=="object"&&j._sveltesparouter===!0?(this.component=j.component,this.conditions=j.conditions||[],this.userData=j.userData,this.props=j.props||{}):(this.component=()=>Promise.resolve(j),this.conditions=[],this.props={}),this._pattern=Y,this._keys=F}match(O){if(n){if(typeof n=="string")if(O.startsWith(n))O=O.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const V=O.match(n);if(V&&V[0])O=O.substr(V[0].length)||"/";else return null}}const j=this._pattern.exec(O);if(j===null)return null;if(this._keys===!1)return j;const Y={};let F=0;for(;F<this._keys.length;){try{Y[this._keys[F]]=decodeURIComponent(j[F+1]||"")||null}catch{Y[this._keys[F]]=null}F++}return Y}async checkConditions(O){for(let j=0;j<this.conditions.length;j++)if(!await this.conditions[j](O))return!1;return!0}}const l=[];r instanceof Map?r.forEach((D,O)=>{l.push(new a(O,D))}):Object.keys(r).forEach(D=>{l.push(new a(D,r[D]))});let o=null,c=null,u={};const f=ko();async function _(D,O){await Hi(),f(D,O)}let g=null,p=null;i&&(p=D=>{D.state&&(D.state.__svelte_spa_router_scrollY||D.state.__svelte_spa_router_scrollX)?g=D.state:g=null},window.addEventListener("popstate",p),yo(()=>{xo(g)}));let v=null,b=null;const w=Zr.subscribe(async D=>{v=D;let O=0;for(;O<l.length;){const j=l[O].match(D.location);if(!j){O++;continue}const Y={route:l[O].path,location:D.location,querystring:D.querystring,userData:l[O].userData,params:j&&typeof j=="object"&&Object.keys(j).length?j:null};if(!await l[O].checkConditions(Y)){s(0,o=null),b=null,_("conditionsFailed",Y);return}_("routeLoading",Object.assign({},Y));const F=l[O].component;if(b!=F){F.loading?(s(0,o=F.loading),b=F,s(1,c=F.loadingParams),s(2,u={}),_("routeLoaded",Object.assign({},Y,{component:o,name:o.name,params:c}))):(s(0,o=null),b=null);const V=await F();if(D!=v)return;s(0,o=V&&V.default||V),b=F}j&&typeof j=="object"&&Object.keys(j).length?s(1,c=j):s(1,c=null),s(2,u=l[O].props),_("routeLoaded",Object.assign({},Y,{component:o,name:o.name,params:c})).then(()=>{An.set(c)});return}s(0,o=null),b=null,An.set(void 0)});wo(()=>{w(),p&&window.removeEventListener("popstate",p)});function y(D){jr.call(this,t,D)}function T(D){jr.call(this,t,D)}return t.$$set=D=>{"routes"in D&&s(3,r=D.routes),"prefix"in D&&s(4,n=D.prefix),"restoreScrollState"in D&&s(5,i=D.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[o,c,u,r,n,i,y,T]}class Qr extends ae{constructor(e){super(),ie(this,e,Yo,jo,re,{routes:3,prefix:4,restoreScrollState:5})}}function In(t){let e;return{c(){e=m("a"),e.textContent="Add book",h(e,"class","nav-link svelte-oup04o"),h(e,"href","./#/add-book")},m(s,r){P(s,e,r)},d(s){s&&E(e)}}}function No(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y,T,D=localStorage.getItem("user_id")+"",O,j,Y,F,V,N,H,ve,pe,ge,ye,Me,fe,Se,Ee,Re,we,W=t[0]=="staff"&&In();return{c(){e=m("nav"),s=m("div"),r=m("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=$(),i=m("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',a=$(),l=m("div"),o=m("div"),c=m("a"),c.textContent="Books",u=$(),f=m("a"),f.textContent="Authors",_=$(),g=m("a"),g.textContent="Publishers",p=$(),W&&W.c(),v=$(),b=m("li"),w=m("a"),y=m("i"),T=$(),O=z(D),j=$(),Y=m("ul"),F=m("li"),F.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Profile</a>',V=$(),N=m("li"),N.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Settings</a>',H=$(),ve=m("li"),ve.innerHTML='<hr class="dropdown-divider"/>',pe=$(),ge=m("li"),ye=m("a"),ye.textContent="Log Out",Me=$(),fe=m("button"),Se=m("span"),h(r,"class","navbar-brand m-0 svelte-oup04o"),h(r,"href","./#/"),h(i,"class","navbar-toggler"),h(i,"type","button"),h(i,"data-bs-toggle","collapse"),h(i,"data-bs-target","#navbarContent"),h(c,"class","nav-link svelte-oup04o"),h(c,"href","./#/search"),h(f,"class","nav-link svelte-oup04o"),h(f,"href","./#/search/author"),h(g,"class","nav-link svelte-oup04o"),h(g,"href","./#/search/publisher"),h(y,"class","bi bi-person-fill"),h(w,"class","nav-link dropdown-toggle svelte-oup04o"),h(w,"href","#"),h(w,"role","button"),h(w,"data-bs-toggle","dropdown"),h(w,"aria-expanded","false"),h(ye,"class","dropdown-item text-danger"),h(ye,"href","./#/"),h(Y,"class","dropdown-menu"),h(b,"class","nav-item dropdown"),h(Se,"class",Ee="bi bi-"+t[1]+" svelte-oup04o"),h(fe,"title","Switch theme"),h(fe,"class","px-1 border-0 bg-transparent nav-link svelte-oup04o"),h(o,"class","navbar-nav ms-auto svelte-oup04o"),h(l,"class","collapse navbar-collapse"),h(l,"id","navbarContent"),h(s,"class","container px-4 fw-semibold"),h(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(J,je){P(J,e,je),d(e,s),d(s,r),d(s,n),d(s,i),d(s,a),d(s,l),d(l,o),d(o,c),d(o,u),d(o,f),d(o,_),d(o,g),d(o,p),W&&W.m(o,null),d(o,v),d(o,b),d(b,w),d(w,y),d(w,T),d(w,O),d(b,j),d(b,Y),d(Y,F),d(Y,V),d(Y,N),d(Y,H),d(Y,ve),d(Y,pe),d(Y,ge),d(ge,ye),d(o,Me),d(o,fe),d(fe,Se),Re||(we=[le(ye,"click",t[3]),le(fe,"click",t[2])],Re=!0)},p(J,[je]){J[0]=="staff"?W||(W=In(),W.c(),W.m(o,v)):W&&(W.d(1),W=null),je&2&&Ee!==(Ee="bi bi-"+J[1]+" svelte-oup04o")&&h(Se,"class",Ee)},i:R,o:R,d(J){J&&E(e),W&&W.d(),Re=!1,xe(we)}}}function Uo(t,e,s){let r,n;ss.subscribe(o=>s(0,n=o));let i=localStorage.getItem("theme")||"light";function a(){s(4,i=i=="light"?"dark":"light"),localStorage.setItem("theme",i)}function l(){ss.set(""),localStorage.removeItem("accType")}return t.$$.update=()=>{t.$$.dirty&16&&document.querySelector("body").setAttribute("data-bs-theme",i),t.$$.dirty&16&&s(1,r=i=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,r,a,l,i]}class Vi extends ae{constructor(e){super(),ie(this,e,Uo,No,re,{})}}function Fo(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y;return{c(){e=m("section"),s=m("div"),r=m("div"),n=m("div"),i=m("img"),l=$(),o=m("div"),c=m("img"),f=$(),_=m("div"),g=m("img"),v=$(),b=m("button"),b.innerHTML='<span class="carousel-control-prev-icon"></span>',w=$(),y=m("button"),y.innerHTML='<span class="carousel-control-next-icon"></span>',Be(i.src,a=kr)||h(i,"src",a),h(i,"class","d-block w-100"),h(i,"alt","..."),h(n,"class","carousel-item active"),Be(c.src,u=kr)||h(c,"src",u),h(c,"class","d-block w-100"),h(c,"alt","..."),h(o,"class","carousel-item"),Be(g.src,p=kr)||h(g,"src",p),h(g,"class","d-block w-100"),h(g,"alt","..."),h(_,"class","carousel-item"),h(r,"class","carousel-inner"),h(b,"class","carousel-control-prev"),h(b,"type","button"),h(b,"data-bs-target","#homeAdCarousel"),h(b,"data-bs-slide","prev"),h(y,"class","carousel-control-next"),h(y,"type","button"),h(y,"data-bs-target","#homeAdCarousel"),h(y,"data-bs-slide","next"),h(s,"id","homeAdCarousel"),h(s,"class","carousel slide"),h(s,"data-bs-ride","carousel"),h(s,"data-bs-interval","8000")},m(T,D){P(T,e,D),d(e,s),d(s,r),d(r,n),d(n,i),d(r,l),d(r,o),d(o,c),d(r,f),d(r,_),d(_,g),d(s,v),d(s,b),d(s,w),d(s,y)},p:R,i:R,o:R,d(T){T&&E(e)}}}let kr="./cover.jpg";class Wo extends ae{constructor(e){super(),ie(this,e,null,Fo,re,{})}}function Ho(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p;return{c(){e=m("div"),s=m("img"),n=$(),i=m("div"),a=m("h5"),l=m("a"),o=z(t[1]),u=$(),f=m("small"),_=m("i"),g=$(),p=z(t[2]),Be(s.src,r="./"+t[0]+".jpg")||h(s,"src",r),h(s,"alt","book cover"),h(s,"class","svelte-1a99e4f"),h(l,"class","stretched-link svelte-1a99e4f"),h(l,"href",c="./#/book/"+t[0]),h(a,"class","card-title"),h(_,"class","bi bi-person"),h(f,"class","card-text"),h(i,"class","card-body"),h(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(v,b){P(v,e,b),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o),d(i,u),d(i,f),d(f,_),d(f,g),d(f,p)},p(v,[b]){b&1&&!Be(s.src,r="./"+v[0]+".jpg")&&h(s,"src",r),b&2&&te(o,v[1]),b&1&&c!==(c="./#/book/"+v[0])&&h(l,"href",c),b&4&&te(p,v[2])},i:R,o:R,d(v){v&&E(e)}}}function Bo(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e;return t.$$set=a=>{"id"in a&&s(0,r=a.id),"title"in a&&s(1,n=a.title),"author"in a&&s(2,i=a.author)},[r,n,i]}class ar extends ae{constructor(e){super(),ie(this,e,Bo,Ho,re,{id:0,title:1,author:2})}}function Ln(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("a"),r=m("button"),n=z(t[3]),i=$(),a=m("i"),h(a,"class","bi bi-arrow-right"),h(r,"class","btn btn-outline-primary btn-sm"),h(s,"href",l="./#/"+t[2]),h(e,"class","align-middle align-self-center")},m(o,c){P(o,e,c),d(e,s),d(s,r),d(r,n),d(r,i),d(r,a)},p(o,c){c&8&&te(n,o[3]),c&4&&l!==(l="./#/"+o[2])&&h(s,"href",l)},d(o){o&&E(e)}}}function qo(t){let e,s,r,n,i,a,l,o,c,u,f=t[2]!==""&&Ln(t);const _=t[5].default,g=tr(_,t,t[4],null);return{c(){e=m("section"),s=m("div"),r=m("h4"),n=m("i"),a=$(),l=z(t[0]),o=$(),f&&f.c(),c=$(),g&&g.c(),h(n,"class",i="bi bi-"+t[1]),h(r,"class","my-3"),h(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,v){P(p,e,v),d(e,s),d(s,r),d(r,n),d(r,a),d(r,l),d(s,o),f&&f.m(s,null),d(e,c),g&&g.m(e,null),u=!0},p(p,[v]){(!u||v&2&&i!==(i="bi bi-"+p[1]))&&h(n,"class",i),(!u||v&1)&&te(l,p[0]),p[2]!==""?f?f.p(p,v):(f=Ln(p),f.c(),f.m(s,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||v&16)&&rr(g,_,p,p[4],u?sr(_,p[4],v,null):nr(p[4]),null)},i(p){u||(k(g,p),u=!0)},o(p){S(g,p),u=!1},d(p){p&&E(e),f&&f.d(),g&&g.d(p)}}}function zo(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:a}=e,{link:l=""}=e,{linkText:o="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,a=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,o=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class $t extends ae{constructor(e){super(),ie(this,e,zo,qo,re,{title:0,icon:1,link:2,linkText:3})}}const Go="modulepreload",Vo=function(t){return"/library/"+t},xn={},rs=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=Vo(l),l in xn)return;xn[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Go,o||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),o)return new Promise((f,_)=>{u.addEventListener("load",f),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Jo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>rs(()=>Promise.resolve().then(()=>Ts),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Xr extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Ko extends Xr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zo extends Xr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qo extends Xr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ir;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ir||(Ir={}));var Xo=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class el{constructor(e,{headers:s={},customFetch:r,region:n=Ir.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Jo(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Xo(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=s;let l={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(l["x-region"]=o);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(l["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(l["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new Ko(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new Zo(u);if(!u.ok)throw new Qo(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var tl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ns=tl();const sl=ns.fetch,en=ns.fetch.bind(ns),Ji=ns.Headers,rl=ns.Request,nl=ns.Response,Ts=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ji,Request:rl,Response:nl,default:en,fetch:sl},Symbol.toStringTag,{value:"Module"}));class il extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class al{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=en:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,o;let c=null,u=null,f=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&v===""?(_=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((o=c==null?void 0:c.details)===null||o===void 0)&&o.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new il(c)}return{error:c,data:u,count:f,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,o;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class ol extends al{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const o=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class zt extends ol{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class ll{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new zt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(a.length>0){const l=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new zt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zt({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new zt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new zt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const cl="1.15.2",ul={"X-Client-Info":`postgrest-js/${cl}`};class tn{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},ul),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new ll(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new tn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let o;r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(a="POST",o=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new zt({method:a,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const hl="2.9.5",dl={"X-Client-Info":`realtime-js/${hl}`},fl="1.0.0",Ki=1e4,_l=1e3;var Zt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Zt||(Zt={}));var Ye;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ye||(Ye={}));var Je;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Je||(Je={}));var Lr;(function(t){t.websocket="websocket"})(Lr||(Lr={}));var Pt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pt||(Pt={}));class Zi{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ml{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+n));a=a+n;const o=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class $r{constructor(e,s,r={},n=Ki){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Yn||(Yn={}));class _s{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_s.syncState(this.state,n,i,a),this.pendingDiffs.forEach(o=>{this.state=_s.syncDiff(this.state,o,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=_s.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),a=this.transformState(s),l={},o={};return this.map(i,(c,u)=>{a[c]||(o[c]=u)}),this.map(a,(c,u)=>{const f=i[c];if(f){const _=u.map(b=>b.presence_ref),g=f.map(b=>b.presence_ref),p=u.filter(b=>g.indexOf(b.presence_ref)<0),v=f.filter(b=>_.indexOf(b.presence_ref)<0);p.length>0&&(l[c]=p),v.length>0&&(o[c]=v)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:o},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,o)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(o),u.length>0){const f=e[l].map(g=>g.presence_ref),_=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,o)}),this.map(a,(l,o)=>{let c=e[l];if(!c)return;const u=o.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,o),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const Nn=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=pl(a,t,e,n),i),{})},pl=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,a=s[t];return i&&!r.includes(i)?Qi(i,a):xr(a)},Qi=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return yl(e,s)}switch(t){case oe.bool:return gl(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return bl(e);case oe.json:case oe.jsonb:return vl(e);case oe.timestamp:return wl(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return xr(e);default:return xr(e)}},xr=t=>t,gl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},bl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},yl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Qi(e,l))}return t},wl=t=>typeof t=="string"?t.replace(" ","T"):t;var Un;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Un||(Un={}));var Fn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Fn||(Fn={}));var Wn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class sn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new $r(this,Je.join,this.params,this.timeout),this.rejoinTimer=new Zi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new _s(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},o={broadcast:i,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,_=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const v=f[p],{filter:{event:b,schema:w,table:y,filter:T}}=v,D=c&&c[p];if(D&&D.event===b&&D.schema===w&&D.table===y&&D.filter===T)g.push(Object.assign(Object.assign({},v),{id:D.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(o){return o.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,o;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ye.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new $r(this,Je.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new $r(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:o,leave:c,join:u}=Je;if(r&&[l,o,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,v,b;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(v=g.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(g=>g.callback(_,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,v,b,w,y,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const D=g.id,O=(p=g.filter)===null||p===void 0?void 0:p.event;return D&&((v=s.ids)===null||v===void 0?void 0:v.includes(D))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const D=(y=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return D==="*"||D===((T=s==null?void 0:s.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:v,table:b,commit_timestamp:w,type:y,errors:T}=p;_=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:w,eventType:y,new:{},old:{},errors:T}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&sn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Je.close,{},e)}_onError(e){this._on(Je.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Nn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Nn(e.columns,e.old_record)),s}}const kl=()=>{},$l=typeof WebSocket<"u";class Sl{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=dl,this.params={},this.timeout=Ki,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=kl,this.conn=null,this.sendBuffer=[],this.serializer=new ml,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>rs(()=>Promise.resolve().then(()=>Ts),void 0).then(({default:o})=>o(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${Lr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Zi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if($l){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ol(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),rs(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Zt.connecting:return Pt.Connecting;case Zt.open:return Pt.Open;case Zt.closing:return Pt.Closing;default:return Pt.Closed}}isConnected(){return this.connectionState()===Pt.Open}channel(e,s={config:{}}){const r=new sn(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(Je.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fl}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:a}=s;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Je.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(_l,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Ol{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class rn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Tl extends rn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hn extends rn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Dl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Xi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>rs(()=>Promise.resolve().then(()=>Ts),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Ml=()=>Dl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rs(()=>Promise.resolve().then(()=>Ts),void 0)).Response:Response});var is=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Sr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),El=(t,e)=>is(void 0,void 0,void 0,function*(){const s=yield Ml();t instanceof s?t.json().then(r=>{e(new Tl(Sr(r),t.status||500))}).catch(r=>{e(new Hn(Sr(r),r))}):e(new Hn(Sr(t),t))}),Pl=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function or(t,e,s,r,n,i){return is(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,Pl(e,r,n,i)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>a(o)).catch(o=>El(o,l))})})}function Yr(t,e,s,r){return is(this,void 0,void 0,function*(){return or(t,"GET",e,s,r)})}function vt(t,e,s,r,n){return is(this,void 0,void 0,function*(){return or(t,"POST",e,r,n,s)})}function Cl(t,e,s,r,n){return is(this,void 0,void 0,function*(){return or(t,"PUT",e,r,n,s)})}function ea(t,e,s,r,n){return is(this,void 0,void 0,function*(){return or(t,"DELETE",e,r,n,s)})}var Fe=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Rl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jl{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Xi(n)}uploadOrUpdate(e,s,r,n){return Fe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Bn),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl)):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType);const o=this._removeEmptyFolders(s),c=this._getFinalPath(o),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:o,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Pe(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let o;const c=Object.assign({upsert:Bn.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:o,headers:u}),_=yield f.json();return f.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Pe(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e){return Fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield vt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new rn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}update(e,s,r){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Fe(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}copy(e,s){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield vt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Fe(this,void 0,void 0,function*(){try{const n=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}download(e,s){return Fe(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Yr(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Pe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}list(e,s,r){return Fe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Rl),s),{prefix:e||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Al="2.5.5",Il={"X-Client-Info":`storage-js/${Al}`};var Ut=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Ll{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Il),s),this.fetch=Xi(r)}listBuckets(){return Ut(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Pe(e))return{data:null,error:e};throw e}})}getBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ut(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Cl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ut(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}}class xl extends Ll{constructor(e,s={},r){super(e,s,r)}from(e){return new jl(this.url,this.headers,e,this.fetch)}}const Yl="2.43.2";let fs="";typeof Deno<"u"?fs="deno":typeof document<"u"?fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fs="react-native":fs="node";const Nl={"X-Client-Info":`supabase-js-${fs}/${Yl}`},Ul={headers:Nl},Fl={schema:"public"},Wl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hl={};var Bl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const ql=t=>{let e;return t?e=t:typeof fetch>"u"?e=en:e=fetch,(...s)=>e(...s)},zl=()=>typeof Headers>"u"?Ji:Headers,Gl=(t,e,s)=>{const r=ql(s),n=zl();return(i,a)=>Bl(void 0,void 0,void 0,function*(){var l;const o=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};function Vl(t){return t.replace(/\/$/,"")}function Jl(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:a,auth:l,realtime:o,global:c}=e;return{db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},o),n),global:Object.assign(Object.assign({},c),i)}}const ta="2.64.2",Kl="http://localhost:9999",Zl="supabase.auth.token",Ql={"X-Client-Info":`gotrue-js/${ta}`},qn=10,Nr="X-Supabase-Api-Version",sa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Xl(t){return Math.round(Date.now()/1e3)+t}function ec(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ve=()=>typeof document<"u",Tt={tested:!1,writable:!1},ms=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tt.tested)return Tt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Tt.tested=!0,Tt.writable=!0}catch{Tt.tested=!0,Tt.writable=!1}return Tt.writable};function Or(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const ra=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>rs(()=>Promise.resolve().then(()=>Ts),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},tc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",na=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Rs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Tr=async(t,e)=>{await t.removeItem(e)};function sc(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,a,l,o,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=a<<2|l>>4,n=(l&15)<<4|o>>2,i=(o&3)<<6|c,s=s+String.fromCharCode(r),o!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class lr{constructor(){this.promise=new lr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}lr.promiseConstructor=Promise;function zn(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(sc(r))}async function rc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nc(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function ic(t){return("0"+t.toString(16)).substr(-2)}function ac(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,ic).join("")}async function oc(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function lc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await oc(t);return lc(s)}async function Ft(t,e,s=!1){const r=ac();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await na(t,`${e}-code-verifier`,n);const i=await cc(r);return[i,r===i?"plain":"s256"]}const uc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hc(t){const e=t.headers.get(Nr);if(!e||!e.match(uc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class nn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dc extends nn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function fc(t){return q(t)&&t.name==="AuthApiError"}class ia extends nn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class It extends nn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Dt extends It{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Dr extends It{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class js extends It{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class As extends It{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gn extends It{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ur extends It{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Mr(t){return q(t)&&t.name==="AuthRetryableFetchError"}class Vn extends It{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var _c=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Et=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mc=[502,503,504];async function Jn(t){var e;if(!tc(t))throw new Ur(Et(t),0);if(mc.includes(t.status))throw new Ur(Et(t),t.status);let s;try{s=await t.json()}catch(i){throw new ia(Et(i),i)}let r;const n=hc(t);if(n&&n.getTime()>=sa["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Vn(Et(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Vn(Et(s),t.status,s.weak_password.reasons);throw new dc(Et(s),t.status||500,r)}const pc=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function K(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Nr]||(i[Nr]=sa["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await gc(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function gc(t,e,s,r,n,i){const a=pc(e,r,n,i);let l;try{l=await t(s,Object.assign({},a))}catch(o){throw console.error(o),new Ur(Et(o),0)}if(l.ok||await Jn(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await Jn(o)}}function bt(t){var e;let s=null;wc(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Xl(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Kn(t){const e=bt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bc(t){return{data:t,error:null}}function vc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,a=_c(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},o=Object.assign({},a);return{data:{properties:l,user:o},error:null}}function yc(t){return t}function wc(t){return t.access_token&&t.refresh_token&&t.expires_in}var kc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class $c{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=ra(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:yt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=kc(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:vc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(q(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yt})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,a,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:yc});if(u.error)throw u.error;const f=await u.json(),_=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yt})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:yt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:yt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(q(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}}const Sc={getItem:t=>ms()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ms()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ms()&&globalThis.localStorage.removeItem(t)}};function Zn(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Oc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wt={debug:!!(globalThis&&ms()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class aa extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tc extends aa{}async function Dc(t,e,s){Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Wt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Tc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Oc();const Mc={url:Kl,storageKey:Zl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ql,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},us=30*1e3,Qn=3;async function Xn(t,e,s){return await s()}class ys{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ys.nextInstanceID,ys.nextInstanceID+=1,this.instanceID>0&&Ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Mc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new $c({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ra(n.fetch),this.lock=n.lock||Xn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ve()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Dc:this.lock=Xn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ms()?this.storage=Sc:(this.memoryStorage={},this.storage=Zn(this.memoryStorage)):(this.memoryStorage={},this.storage=Zn(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ta}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Ve()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return q(e)?{error:e}:{error:new ia("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:bt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Ft(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:f,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:bt})}else if("phone"in e){const{phone:u,password:f,options:_}=e;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:bt})}else throw new js("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kn})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kn})}else throw new js("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Dr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Rs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:a}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:bt});return await Tr(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Dr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=e,l=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:bt}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Dr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:o}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ft(this.storage,this.storageKey));const{error:f}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:o}=e,{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(a=o==null?void 0:o.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new js("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:bt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,c=a.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ft(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:bc})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Dt;const{error:n}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await K(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:l}=await K(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new js("You must provide either an email or phone number and a type")}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(o,c,u){return!a&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(o,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yt}):await this._useSession(async s=>{var r,n,i;const{data:a,error:l}=s;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:yt})})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Dt;const a=n.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await Ft(this.storage,this.storageKey));const{data:c,error:u}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:a.access_token,xform:yt});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return zn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const a=zn(e.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(q(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Dt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!Ve())throw new As("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new As("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Gn("Not a valid PKCE flow url.");const s=Or(window.location.href);if(e){if(!s.code)throw new Gn("No code detected.");const{data:y,error:T}=await this._exchangeCodeForSession(s.code);if(T)throw T;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:y.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new As(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:o,token_type:c}=s;if(!i||!l||!a||!c)throw new As("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let _=u+f;o&&(_=parseInt(o));const g=_-u;g*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=_-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:_,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:s.type},error:null}}catch(s){if(q(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Or(window.location.href);return!!(Ve()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Or(window.location.href),s=await Rs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(fc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=ec(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Ft(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,l,o,c,u;const{data:f,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Ve()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await nc(async n=>(n>0&&await rc(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bt})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Mr(i)&&Date.now()+a-r<us})}catch(r){if(this._debug(s,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Ve()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Rs(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+qn;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${qn}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Mr(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new lr;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Dt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),q(i)){const a={session:null,error:i};return Mr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(o){i.push(o)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await na(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${us}ms, refresh threshold is ${Qn} ticks`),n<=Qn&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof aa)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ft(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await K(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(q(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(q(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}}ys.nextInstanceID=0;const Ec=ys;class Pc extends Ec{constructor(e){super(e)}}var Cc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Rc{constructor(e,s,r){var n,i,a,l,o,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const _=Vl(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Fl,realtime:Hl,auth:Object.assign(Object.assign({},Wl),{storageKey:g}),global:Ul},v=Jl(r??{},p);this.storageKey=(i=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=v.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((o=v.auth)!==null&&o!==void 0?o:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=Gl(s,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new tn(`${_}/rest/v1`,{headers:this.headers,schema:(f=v.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new el(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Cc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,debug:l},o,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pc({url:this.authUrl,headers:Object.assign(Object.assign({},f),o),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Sl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jc=(t,e,s)=>new Rc(t,e,s),Ne=jc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function et(t,{delay:e=0,duration:s=400,easing:r=Ci}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function Ac(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',h(e,"class","d-flex justify-content-center")},m(s,r){P(s,e,r)},p:R,i:R,o:R,d(s){s&&E(e)}}}class Ot extends ae{constructor(e){super(),ie(this,e,null,Ac,re,{})}}function Ic(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=$(),i=m("div"),a=m("h6"),l=m("a"),o=z(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Be(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","author"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/author/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){P(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&te(o,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&h(l,"href",c)},i:R,o:R,d(u){u&&E(e)}}}function Lc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class oa extends ae{constructor(e){super(),ie(this,e,Lc,Ic,re,{name:0,id:1})}}function xc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=$(),i=m("div"),a=m("h6"),l=m("a"),o=z(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Be(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","publisher"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/publisher/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){P(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&te(o,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&h(l,"href",c)},i:R,o:R,d(u){u&&E(e)}}}function Yc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class la extends ae{constructor(e){super(),ie(this,e,Yc,xc,re,{name:0,id:1})}}function Nc(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("h2"),r.textContent="Error",n=$(),i=m("p"),a=z(t[0]),l=z(": "),o=z(t[1]),c=$(),u=m("a"),u.textContent="Reload",h(u,"href","./#/"),h(u,"class","fw-bold"),h(s,"class","text-center"),h(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,_){P(f,e,_),d(e,s),d(s,r),d(s,n),d(s,i),d(i,a),d(i,l),d(i,o),d(s,c),d(s,u)},p(f,[_]){_&1&&te(a,f[0]),_&2&&te(o,f[1])},i:R,o:R,d(f){f&&E(e)}}}function Uc(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let an=class extends ae{constructor(e){super(),ie(this,e,Uc,Nc,re,{code:0,message:1})}};function ei(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function ti(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function si(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function Fc(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Wc(t){let e,s;return e=new an({props:{message:t[3]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Hc(t){let e,s,r=Te(Object.entries(t[0])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ri(si(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){P(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&1){r=Te(Object.entries(a[0]));let o;for(o=0;o<r.length;o+=1){const c=si(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=ri(c),n[o].c(),k(n[o],1),n[o].m(e,null))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function ri(t){let e,s;return e=new ar({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Bc(t){let e,s,r,n;const i=[Hc,Wc,Fc],a=[];function l(o,c){return o[0]?0:o[3]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function qc(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function zc(t){let e,s;return e=new an({props:{message:t[4]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Gc(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ni(ti(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){P(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=ti(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=ni(c),n[o].c(),k(n[o],1),n[o].m(e,null))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function ni(t){let e,s;return e=new oa({props:{id:t[13].author_id,name:t[13].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Vc(t){let e,s,r,n;const i=[Gc,zc,qc],a=[];function l(o,c){return o[1]?0:o[4]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function Jc(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Kc(t){let e,s;return e=new an({props:{message:t[5]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Zc(t){let e,s,r=Te(Object.entries(t[2])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ii(ei(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){P(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2]));let o;for(o=0;o<r.length;o+=1){const c=ei(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=ii(c),n[o].c(),k(n[o],1),n[o].m(e,null))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function ii(t){let e,s;return e=new la({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Qc(t){let e,s,r,n;const i=[Zc,Kc,Jc],a=[];function l(o,c){return o[2]?0:o[5]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function Xc(t){let e,s,r,n,i,a,l,o,c,u;return s=new Wo({}),n=new $t({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Bc]},$$scope:{ctx:t}}}),a=new $t({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Vc]},$$scope:{ctx:t}}}),o=new $t({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Qc]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=$(),L(n.$$.fragment),i=$(),L(a.$$.fragment),l=$(),L(o.$$.fragment),h(e,"class","container mb-5")},m(f,_){P(f,e,_),A(s,e,null),d(e,r),A(n,e,null),d(e,i),A(a,e,null),d(e,l),A(o,e,null),u=!0},p(f,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:f}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:f}),a.$set(p);const v={};_&524324&&(v.$$scope={dirty:_,ctx:f}),o.$set(v)},i(f){u||(k(s.$$.fragment,f),k(n.$$.fragment,f),k(a.$$.fragment,f),k(o.$$.fragment,f),f&&(c||Ae(()=>{c=Xe(e,et,{duration:500}),c.start()})),u=!0)},o(f){S(s.$$.fragment,f),S(n.$$.fragment,f),S(a.$$.fragment,f),S(o.$$.fragment,f),u=!1},d(f){f&&E(e),I(s),I(n),I(a),I(o)}}}function eu(t,e,s){let r,n,i,a,l,o;async function c(){const{data:_,error:g}=await Ne.rpc("get_books");s(0,r=_),s(3,a=g?g.message:"")}async function u(){const{data:_,error:g}=await Ne.rpc("get_authors");s(1,n=_),s(4,l=g?g.message:"")}async function f(){const{data:_,error:g}=await Ne.rpc("get_publishers");s(2,i=_),s(5,o=g||"")}return c(),u(),f(),[r,n,i,a,l,o]}class tu extends ae{constructor(e){super(),ie(this,e,eu,Xc,re,{})}}function su(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=$(),n=m("div"),i=m("h4"),a=z(t[0]),h(s,"class","btn"),At(s,"font-size","1.5em"),h(i,"class","my-auto"),h(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){P(c,e,u),d(e,s),d(e,r),d(e,n),d(n,i),d(i,a),l||(o=le(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&te(a,c[0])},i:R,o:R,d(c){c&&E(e),l=!1,o()}}}function ru(t,e,s){let{text:r}=e;const n=()=>Lo();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class Lt extends ae{constructor(e){super(),ie(this,e,ru,su,re,{text:0})}}function nu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y;const T=t[5].default,D=tr(T,t,t[4],null);return{c(){e=m("div"),s=m("div"),r=m("div"),n=m("div"),i=m("h1"),a=z(t[0]),l=$(),o=m("button"),c=$(),u=m("div"),D&&D.c(),f=$(),_=m("div"),g=m("button"),p=z(t[3]),v=$(),b=m("button"),w=z(t[2]),h(i,"class","modal-title fs-5"),h(i,"id","exampleModalLabel"),h(o,"type","button"),h(o,"class","btn-close"),h(o,"data-bs-dismiss","modal"),h(o,"aria-label","Close"),h(n,"class","modal-header"),h(u,"class","modal-body"),h(g,"type","button"),h(g,"class","btn btn-secondary"),h(g,"data-bs-dismiss","modal"),h(b,"type","button"),h(b,"class","btn btn-primary"),h(_,"class","modal-footer"),h(r,"class","modal-content"),h(s,"class","modal-dialog"),h(e,"class","modal fade"),h(e,"id",t[1]),h(e,"tabindex","-1"),h(e,"aria-hidden","true")},m(O,j){P(O,e,j),d(e,s),d(s,r),d(r,n),d(n,i),d(i,a),d(n,l),d(n,o),d(r,c),d(r,u),D&&D.m(u,null),d(r,f),d(r,_),d(_,g),d(g,p),d(_,v),d(_,b),d(b,w),y=!0},p(O,[j]){(!y||j&1)&&te(a,O[0]),D&&D.p&&(!y||j&16)&&rr(D,T,O,O[4],y?sr(T,O[4],j,null):nr(O[4]),null),(!y||j&8)&&te(p,O[3]),(!y||j&4)&&te(w,O[2]),(!y||j&2)&&h(e,"id",O[1])},i(O){y||(k(D,O),y=!0)},o(O){S(D,O),y=!1},d(O){O&&E(e),D&&D.d(O)}}}function iu(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i="Modal"}=e,{id:a="modal"}=e,{pButton:l="Confirm"}=e,{sButton:o="Cancel"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"id"in c&&s(1,a=c.id),"pButton"in c&&s(2,l=c.pButton),"sButton"in c&&s(3,o=c.sButton),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class au extends ae{constructor(e){super(),ie(this,e,iu,nu,re,{title:0,id:1,pButton:2,sButton:3})}}function ai(t,e,s){const r=t.slice();return r[8]=e[s][0],r[9]=e[s][1],r}function ou(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function lu(t){let e,s,r,n,i,a,l,o=t[1].isbn+"",c,u,f,_,g,p=t[1].title+"",v,b,w,y=t[1].description+"",T,D,O,j,Y,F,V=t[1].author.name+"",N,H,ve,pe,ge,ye,Me,fe=t[1].publisher.name+"",Se,Ee,Re,we,W,J,je=t[1].shelf_number+"",ot,_e,ee,se,be=t[0]=="client"&&oi(t);return{c(){e=m("div"),s=m("div"),r=m("img"),i=$(),a=m("small"),l=z("ISBN: "),c=z(o),u=$(),be&&be.c(),f=$(),_=m("div"),g=m("h1"),v=z(p),b=$(),w=m("p"),T=z(y),D=$(),O=m("p"),j=m("b"),j.textContent="Author:",Y=$(),F=m("a"),N=z(V),ve=$(),pe=m("p"),ge=m("b"),ge.textContent="Publisher:",ye=$(),Me=m("a"),Se=z(fe),Re=$(),we=m("p"),W=m("b"),W.textContent="Shelf Number:",J=$(),ot=z(je),_e=$(),ee=m("p"),ee.innerHTML='<b>Category:</b> <a href="/"></a>',h(r,"id","img-cover"),h(r,"class","border p-3"),Be(r.src,n="./"+t[2]+".jpg")||h(r,"src",n),h(r,"alt","book cover"),h(r,"height","300"),h(r,"width","300"),At(r,"object-fit","contain"),h(a,"class","text-secondary"),h(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),h(g,"id","book-title"),h(g,"class","mb-2 pb-2"),h(w,"id","book-description"),h(F,"href",H="./#/author/"+t[1].author.author_id),h(Me,"href",Ee="./#/publisher/"+t[1].publisher.publisher_id),h(_,"id","details-container"),h(_,"class","container"),h(e,"class","d-md-flex d-block")},m(ke,Ie){P(ke,e,Ie),d(e,s),d(s,r),d(s,i),d(s,a),d(a,l),d(a,c),d(s,u),be&&be.m(s,null),d(e,f),d(e,_),d(_,g),d(g,v),d(_,b),d(_,w),d(w,T),d(_,D),d(_,O),d(O,j),d(O,Y),d(O,F),d(F,N),d(_,ve),d(_,pe),d(pe,ge),d(pe,ye),d(pe,Me),d(Me,Se),d(_,Re),d(_,we),d(we,W),d(we,J),d(we,ot),d(_,_e),d(_,ee),se=!0},p(ke,Ie){(!se||Ie&2)&&o!==(o=ke[1].isbn+"")&&te(c,o),ke[0]=="client"?be?Ie&1&&k(be,1):(be=oi(ke),be.c(),k(be,1),be.m(s,null)):be&&(ce(),S(be,1,1,()=>{be=null}),ue()),(!se||Ie&2)&&p!==(p=ke[1].title+"")&&te(v,p),(!se||Ie&2)&&y!==(y=ke[1].description+"")&&te(T,y),(!se||Ie&2)&&V!==(V=ke[1].author.name+"")&&te(N,V),(!se||Ie&2&&H!==(H="./#/author/"+ke[1].author.author_id))&&h(F,"href",H),(!se||Ie&2)&&fe!==(fe=ke[1].publisher.name+"")&&te(Se,fe),(!se||Ie&2&&Ee!==(Ee="./#/publisher/"+ke[1].publisher.publisher_id))&&h(Me,"href",Ee),(!se||Ie&2)&&je!==(je=ke[1].shelf_number+"")&&te(ot,je)},i(ke){se||(k(be),se=!0)},o(ke){S(be),se=!1},d(ke){ke&&E(e),be&&be.d()}}}function oi(t){let e,s,r,n;return r=new au({props:{id:"reserve",$$slots:{default:[cu]},$$scope:{ctx:t}}}),{c(){e=m("button"),e.textContent="Reserve",s=$(),L(r.$$.fragment),h(e,"class","btn btn-primary w-50"),h(e,"data-bs-toggle","modal"),h(e,"data-bs-target","#reserve")},m(i,a){P(i,e,a),P(i,s,a),A(r,i,a),n=!0},i(i){n||(k(r.$$.fragment,i),n=!0)},o(i){S(r.$$.fragment,i),n=!1},d(i){i&&(E(e),E(s)),I(r,i)}}}function cu(t){let e;return{c(){e=m("div"),e.textContent="Reserving Form"},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function li(t){let e,s;return e=new $t({props:{title:"To Do",icon:"check2-square",$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function uu(t){let e;return{c(){e=m("div"),e.textContent="a",h(e,"class","my-5")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function ci(t){let e,s;return e=new $t({props:{title:"Status",icon:"journal",$$slots:{default:[pu]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4096&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function hu(t){return{c:R,m:R,p:R,d:R}}function du(t){let e;function s(i,a){return i[7].length<=0?_u:fu}let n=s(t)(t);return{c(){n.c(),e=qe()},m(i,a){n.m(i,a),P(i,e,a)},p(i,a){n.p(i,a)},d(i){i&&E(e),n.d(i)}}}function fu(t){let e,s,r,n,i=Te(Object.entries(t[7])),a=[];for(let l=0;l<i.length;l+=1)a[l]=ui(ai(t,i,l));return{c(){e=m("table"),s=m("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=$(),n=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();h(e,"class","table table-bordered table-striped text-center align-middle")},m(l,o){P(l,e,o),d(e,s),d(e,r),d(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,null)},p(l,o){if(o&8){i=Te(Object.entries(l[7]));let c;for(c=0;c<i.length;c+=1){const u=ai(l,i,c);a[c]?a[c].p(u,o):(a[c]=ui(u),a[c].c(),a[c].m(n,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}},d(l){l&&E(e),nt(a,l)}}}function _u(t){let e;return{c(){e=m("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",h(e,"class","text-center my-5")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function ui(t){let e,s,r,n,i,a,l=t[9].status+"",o,c,u,f,_,g;return{c(){e=m("tr"),s=m("td"),s.textContent=`${t[9].barcode}`,r=$(),n=m("td"),n.textContent=`${t[9].status!="Available"?"Francis James E. Salles":"--"}`,i=$(),a=m("td"),o=z(l),c=$(),u=m("td"),f=m("a"),_=m("small"),_.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',g=$(),h(a,"class",t[9].status=="Available"?"text-bg-success":t[9].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),h(f,"href","./#/borrow?barcode="+t[9].barcode),h(f,"class","btn btn-outline-primary btn-sm")},m(p,v){P(p,e,v),d(e,s),d(e,r),d(e,n),d(e,i),d(e,a),d(a,o),d(e,c),d(e,u),d(u,f),d(f,_),d(e,g)},p:R,d(p){p&&E(e)}}}function mu(t){return{c:R,m:R,p:R,d:R}}function pu(t){let e,s,r={ctx:t,current:null,token:null,hasCatch:!1,pending:mu,then:du,catch:hu,value:7};return Bi(t[3](),r),{c(){r.block.c(),e=$(),s=m("div"),s.innerHTML='<label for="copy" class="form=control col-auto">Add Copy:</label> <div class="col-4"><input type="text" class="form-control" placeholder="Barcode Number"/></div> <button class="btn btn-primary col-2">Add</button>',h(s,"class","row justify-content-center align-items-center")},m(n,i){r.block.m(n,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,P(n,e,i),P(n,s,i)},p(n,i){t=n,qi(r,t,i)},d(n){n&&(E(e),E(s)),r.block.d(n),r.token=null,r=null}}}function gu(t){let e,s,r,n,i,a,l,o,c,u,f,_;r=new Lt({props:{text:"Book Details"}});const g=[lu,ou],p=[];function v(y,T){return y[1]?0:1}i=v(t),a=p[i]=g[i](t);let b=t[0]=="client"&&li(t),w=t[0]=="staff"&&ci(t);return{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=$(),a.c(),l=$(),b&&b.c(),o=$(),w&&w.c(),c=$(),u=m("div"),h(u,"class","my-5"),h(e,"class","container")},m(y,T){P(y,e,T),d(e,s),A(r,s,null),d(s,n),p[i].m(s,null),d(e,l),b&&b.m(e,null),d(e,o),w&&w.m(e,null),d(e,c),d(e,u),_=!0},p(y,[T]){let D=i;i=v(y),i===D?p[i].p(y,T):(ce(),S(p[D],1,1,()=>{p[D]=null}),ue(),a=p[i],a?a.p(y,T):(a=p[i]=g[i](y),a.c()),k(a,1),a.m(s,null)),y[0]=="client"?b?T&1&&k(b,1):(b=li(y),b.c(),k(b,1),b.m(e,o)):b&&(ce(),S(b,1,1,()=>{b=null}),ue()),y[0]=="staff"?w?(w.p(y,T),T&1&&k(w,1)):(w=ci(y),w.c(),k(w,1),w.m(e,c)):w&&(ce(),S(w,1,1,()=>{w=null}),ue())},i(y){_||(k(r.$$.fragment,y),k(a),k(b),k(w),y&&(f||Ae(()=>{f=Xe(e,et,{duration:500}),f.start()})),_=!0)},o(y){S(r.$$.fragment,y),S(a),S(b),S(w),_=!1},d(y){y&&E(e),I(r),p[i].d(),b&&b.d(),w&&w.d()}}}function bu(t,e,s){let r;ss.subscribe(c=>s(0,r=c));let{params:n}=e,i=n.bookID,a;async function l(){const{data:c,error:u}=await Ne.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i);console.log(c),s(1,a=c[0])}vs(l);async function o(){const{data:c,error:u}=await Ne.from("library_holdings").select().eq("book_id",i);return c}return t.$$set=c=>{"params"in c&&s(4,n=c.params)},[r,a,i,o,n]}class ca extends ae{constructor(e){super(),ie(this,e,bu,gu,re,{params:4})}}function vu(t){let e,s,r,n,i,a;const l=t[3].default,o=tr(l,t,t[2],null);return{c(){e=m("div"),s=m("label"),r=z(t[0]),n=$(),i=m("div"),o&&o.c(),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-8 col-md-9"),h(e,"class","mb-4 row")},m(c,u){P(c,e,u),d(e,s),d(s,r),d(e,n),d(e,i),o&&o.m(i,null),a=!0},p(c,[u]){(!a||u&1)&&te(r,c[0]),(!a||u&2)&&h(s,"for",c[1]),o&&o.p&&(!a||u&4)&&rr(o,l,c,c[2],a?sr(l,c[2],u,null):nr(c[2]),null)},i(c){a||(k(o,c),a=!0)},o(c){S(o,c),a=!1},d(c){c&&E(e),o&&o.d(c)}}}function yu(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,a=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,a,n,r]}class We extends ae{constructor(e){super(),ie(this,e,yu,vu,re,{label:0,id:1})}}function hi(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function wu(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function ku(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"id","book-description"),h(e,"rows","4")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function $u(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","book-cover"),h(e,"accept","image/*")},m(n,i){P(n,e,i),t[6](e),s||(r=le(e,"change",t[5]),s=!0)},p:R,d(n){n&&E(e),t[6](null),s=!1,r()}}}function Su(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-category")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Ou(t){let e;return{c(){e=m("input"),h(e,"list","authors"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-author")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Tu(t){let e;return{c(){e=m("input"),h(e,"list","publishers"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-publisher")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Du(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-isbn")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Mu(t){return{c:R,m:R,p:R,d:R}}function Eu(t){let e,s=Te(Object.entries(t[8])),r=[];for(let n=0;n<s.length;n+=1)r[n]=di(hi(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","authors")},m(n,i){P(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i&16){s=Te(Object.entries(n[8]));let a;for(a=0;a<s.length;a+=1){const l=hi(n,s,a);r[a]?r[a].p(l,i):(r[a]=di(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&E(e),nt(r,n)}}}function di(t){let e;return{c(){e=m("option"),e.__value=t[10].name,$e(e,e.__value)},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Pu(t){return{c:R,m:R,p:R,d:R}}function Cu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y,T,D,O,j,Y,F,V,N,H,ve,pe,ge,ye,Me,fe,Se,Ee,Re;s=new Lt({props:{text:"Add Book"}}),a=new We({props:{label:"Book Title:",id:"book-name",$$slots:{default:[wu]},$$scope:{ctx:t}}}),o=new We({props:{label:"Book Description:",id:"book-description",$$slots:{default:[ku]},$$scope:{ctx:t}}}),u=new We({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[$u]},$$scope:{ctx:t}}}),Y=new We({props:{label:"Category:",id:"book-category",$$slots:{default:[Su]},$$scope:{ctx:t}}}),V=new We({props:{label:"Author: ",id:"book-author",$$slots:{default:[Ou]},$$scope:{ctx:t}}}),H=new We({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Tu]},$$scope:{ctx:t}}}),pe=new We({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Du]},$$scope:{ctx:t}}});let we={ctx:t,current:null,token:null,hasCatch:!1,pending:Pu,then:Eu,catch:Mu,value:8};return Bi(t[4](),we),{c(){e=m("section"),L(s.$$.fragment),r=$(),n=m("div"),i=m("div"),L(a.$$.fragment),l=$(),L(o.$$.fragment),c=$(),L(u.$$.fragment),f=$(),_=m("div"),g=m("label"),g.textContent="Preview:",p=$(),v=m("div"),b=m("img"),y=$(),T=m("button"),T.textContent="Remove",O=$(),j=m("div"),L(Y.$$.fragment),F=$(),L(V.$$.fragment),N=$(),L(H.$$.fragment),ve=$(),L(pe.$$.fragment),ge=$(),ye=m("div"),ye.innerHTML='<button class="btn btn-success" disabled="" id="add"><i class="bi bi-plus-circle"></i> Add Book</button> <a href="./#/"><button class="btn btn-danger" id="cancel"><i class="bi bi-x-circle"></i> Cancel</button></a>',Me=$(),we.block.c(),h(g,"for","cover-preview"),h(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Be(b.src,w=t[3])||h(b,"src",w),h(b,"alt","Preview"),h(b,"id","cover-preview"),h(b,"height","150"),h(T,"class","btn btn-sm btn-danger"),h(v,"class","col-sm-8 col-md-9"),h(v,"id","preview-div"),h(_,"class",D="my-3 row "+t[2]),h(i,"class","col-sm-12 col-lg-6"),h(j,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(ye,"class","my-3"),h(e,"class","my-1 container")},m(W,J){P(W,e,J),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,v),d(v,b),d(v,y),d(v,T),d(n,O),d(n,j),A(Y,j,null),d(j,F),A(V,j,null),d(j,N),A(H,j,null),d(j,ve),A(pe,j,null),d(e,ge),d(e,ye),d(e,Me),we.block.m(e,we.anchor=null),we.mount=()=>e,we.anchor=null,Se=!0,Ee||(Re=le(T,"click",t[7]),Ee=!0)},p(W,[J]){t=W;const je={};J&8192&&(je.$$scope={dirty:J,ctx:t}),a.$set(je);const ot={};J&8192&&(ot.$$scope={dirty:J,ctx:t}),o.$set(ot);const _e={};J&8195&&(_e.$$scope={dirty:J,ctx:t}),u.$set(_e),(!Se||J&8&&!Be(b.src,w=t[3]))&&h(b,"src",w),(!Se||J&4&&D!==(D="my-3 row "+t[2]))&&h(_,"class",D);const ee={};J&8192&&(ee.$$scope={dirty:J,ctx:t}),Y.$set(ee);const se={};J&8192&&(se.$$scope={dirty:J,ctx:t}),V.$set(se);const be={};J&8192&&(be.$$scope={dirty:J,ctx:t}),H.$set(be);const ke={};J&8192&&(ke.$$scope={dirty:J,ctx:t}),pe.$set(ke),qi(we,t,J)},i(W){Se||(k(s.$$.fragment,W),k(a.$$.fragment,W),k(o.$$.fragment,W),k(u.$$.fragment,W),k(Y.$$.fragment,W),k(V.$$.fragment,W),k(H.$$.fragment,W),k(pe.$$.fragment,W),W&&(fe||Ae(()=>{fe=Xe(e,et,{duration:500}),fe.start()})),Se=!0)},o(W){S(s.$$.fragment,W),S(a.$$.fragment,W),S(o.$$.fragment,W),S(u.$$.fragment,W),S(Y.$$.fragment,W),S(V.$$.fragment,W),S(H.$$.fragment,W),S(pe.$$.fragment,W),Se=!1},d(W){W&&E(e),I(s),I(a),I(o),I(u),I(Y),I(V),I(H),I(pe),we.block.d(),we.token=null,we=null,Ee=!1,Re()}}}function Ru(t,e,s){let r,n,i="d-none",a;async function l(){const{data:f,error:_}=await Ne.from("author").select("name");return f}function o(){r=this.files,s(0,r)}function c(f){zs[f?"unshift":"push"](()=>{n=f,s(1,n)})}const u=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const f=URL.createObjectURL(r[0]);s(3,a=f)}else console.log(r),s(2,i="d-none")},[r,n,i,a,l,o,c,u]}class ju extends ae{constructor(e){super(),ie(this,e,Ru,Cu,re,{})}}function fi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function Au(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Iu(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function v(y,T){return y[0].bio==null?xu:Lu}let b=v(t),w=b(t);return{c(){e=m("div"),s=m("h1"),n=z(r),i=$(),a=m("p"),w.c(),l=$(),o=m("p"),c=m("b"),c.textContent="Website:",u=$(),f=m("a"),g=z(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="mailto:"+t[0].email),h(e,"class","container")},m(y,T){P(y,e,T),d(e,s),d(s,n),d(e,i),d(e,a),w.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(y,T){T&1&&r!==(r=y[0].name+"")&&te(n,r),b===(b=v(y))&&w?w.p(y,T):(w.d(1),w=b(y),w&&(w.c(),w.m(a,null))),T&1&&_!==(_=y[0].email+"")&&te(g,_),T&1&&p!==(p="mailto:"+y[0].email)&&h(f,"href",p)},i:R,o:R,d(y){y&&E(e),w.d()}}}function Lu(t){let e=t[0].bio+"",s;return{c(){s=z(e)},m(r,n){P(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&te(s,e)},d(r){r&&E(s)}}}function xu(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Yu(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Nu(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=_i(fi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){P(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=fi(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=_i(c),n[o].c(),k(n[o],1),n[o].m(e,null))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function _i(t){let e,s;return e=new ar({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Uu(t){let e,s,r,n;const i=[Nu,Yu],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function Fu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v;r=new Lt({props:{text:"Author Details"}});const b=[Iu,Au],w=[];function y(T,D){return T[0]?0:1}return u=y(t),f=w[u]=b[u](t),g=new $t({props:{title:"Books",icon:"journal",$$slots:{default:[Uu]},$$scope:{ctx:t}}}),{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=$(),i=m("div"),a=m("div"),l=m("img"),c=$(),f.c(),_=$(),L(g.$$.fragment),h(l,"class","border p-3"),Be(l.src,o=Wu)||h(l,"src",o),h(l,"alt","author"),h(l,"height","300"),h(l,"width","300"),At(l,"object-fit","contain"),h(a,"class","d-flex justify-content-center my-1"),h(i,"class","d-md-flex d-block"),h(e,"class","container")},m(T,D){P(T,e,D),d(e,s),A(r,s,null),d(s,n),d(s,i),d(i,a),d(a,l),d(i,c),w[u].m(i,null),d(e,_),A(g,e,null),v=!0},p(T,[D]){let O=u;u=y(T),u===O?w[u].p(T,D):(ce(),S(w[O],1,1,()=>{w[O]=null}),ue(),f=w[u],f?f.p(T,D):(f=w[u]=b[u](T),f.c()),k(f,1),f.m(i,null));const j={};D&514&&(j.$$scope={dirty:D,ctx:T}),g.$set(j)},i(T){v||(k(r.$$.fragment,T),k(f),k(g.$$.fragment,T),T&&(p||Ae(()=>{p=Xe(e,et,{duration:500}),p.start()})),v=!0)},o(T){S(r.$$.fragment,T),S(f),S(g.$$.fragment,T),v=!1},d(T){T&&E(e),I(r),w[u].d(),I(g)}}}let Wu="./default-profile.jpg";function Hu(t,e,s){let{params:r}=e,n=r.authorID,i,a;async function l(){const{data:o,error:c}=await Ne.from("author").select().eq("author_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await Ne.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,a=u)}return vs(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class ua extends ae{constructor(e){super(),ie(this,e,Hu,Fu,re,{params:2})}}function mi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function pi(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function v(y,T){return y[0].bio==null?qu:Bu}let b=v(t),w=b(t);return{c(){e=m("div"),s=m("h1"),n=z(r),i=$(),a=m("p"),w.c(),l=$(),o=m("p"),c=m("b"),c.textContent="Website:",u=$(),f=m("a"),g=z(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="https://"+t[0].email),h(f,"id","publisher-website"),h(e,"class","container")},m(y,T){P(y,e,T),d(e,s),d(s,n),d(e,i),d(e,a),w.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(y,T){T&1&&r!==(r=y[0].name+"")&&te(n,r),b===(b=v(y))&&w?w.p(y,T):(w.d(1),w=b(y),w&&(w.c(),w.m(a,null))),T&1&&_!==(_=y[0].email+"")&&te(g,_),T&1&&p!==(p="https://"+y[0].email)&&h(f,"href",p)},d(y){y&&E(e),w.d()}}}function Bu(t){let e=t[0].bio+"",s;return{c(){s=z(e)},m(r,n){P(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&te(s,e)},d(r){r&&E(s)}}}function qu(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function zu(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Gu(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=gi(mi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){P(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=mi(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=gi(c),n[o].c(),k(n[o],1),n[o].m(e,null))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function gi(t){let e,s;return e=new ar({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Vu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b;s=new Lt({props:{text:"Publisher Details"}});let w=t[0]&&pi(t);_=new $t({props:{title:"Books",icon:"journal"}});const y=[Gu,zu],T=[];function D(O,j){return O[1]?0:1}return p=D(t),v=T[p]=y[p](t),{c(){e=m("section"),L(s.$$.fragment),r=$(),n=m("div"),i=m("div"),a=m("img"),o=$(),w&&w.c(),u=$(),f=m("section"),L(_.$$.fragment),g=$(),v.c(),h(a,"id","img-cover"),h(a,"class","border p-3"),Be(a.src,l=Ju)||h(a,"src",l),h(a,"alt","publisher"),h(a,"height","300"),h(a,"width","300"),At(a,"object-fit","contain"),h(i,"id","publisher-cover"),h(i,"class","d-flex justify-content-center my-1"),h(n,"class","d-md-flex d-block"),h(e,"class","container"),h(f,"class","container")},m(O,j){P(O,e,j),A(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(n,o),w&&w.m(n,null),P(O,u,j),P(O,f,j),A(_,f,null),d(f,g),T[p].m(f,null),b=!0},p(O,[j]){O[0]?w?w.p(O,j):(w=pi(O),w.c(),w.m(n,null)):w&&(w.d(1),w=null);let Y=p;p=D(O),p===Y?T[p].p(O,j):(ce(),S(T[Y],1,1,()=>{T[Y]=null}),ue(),v=T[p],v?v.p(O,j):(v=T[p]=y[p](O),v.c()),k(v,1),v.m(f,null))},i(O){b||(k(s.$$.fragment,O),O&&(c||Ae(()=>{c=Xe(e,et,{duration:500}),c.start()})),k(_.$$.fragment,O),k(v),b=!0)},o(O){S(s.$$.fragment,O),S(_.$$.fragment,O),S(v),b=!1},d(O){O&&(E(e),E(u),E(f)),I(s),w&&w.d(),I(_),T[p].d()}}}let Ju="./default-profile.jpg";function Ku(t,e,s){let{params:r}=e,n=r.publisherID,i,a;async function l(){const{data:o,error:c}=await Ne.from("publisher").select().eq("publisher_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await Ne.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,a=u)}return vs(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class ha extends ae{constructor(e){super(),ie(this,e,Ku,Vu,re,{params:2})}}function Zu(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("i"),i=$(),a=m("div"),l=m("h5"),o=m("a"),c=z(t[0]),h(r,"class",n="bi bi-"+t[2]),h(s,"class","d-flex justify-content-center"),At(s,"font-size","4em"),h(o,"class","stretched-link svelte-1vxezln"),h(o,"href",u="./#/"+t[1]),h(l,"class","card-title text-center my-3"),h(a,"class","card-body p-1"),h(e,"class","card col-md-3 col-6 border-1 py-4 svelte-1vxezln")},m(f,_){P(f,e,_),d(e,s),d(s,r),d(e,i),d(e,a),d(a,l),d(l,o),d(o,c)},p(f,[_]){_&4&&n!==(n="bi bi-"+f[2])&&h(r,"class",n),_&1&&te(c,f[0]),_&2&&u!==(u="./#/"+f[1])&&h(o,"href",u)},i:R,o:R,d(f){f&&E(e)}}}function Qu(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=a=>{"name"in a&&s(0,r=a.name),"link"in a&&s(1,n=a.link),"icon"in a&&s(2,i=a.icon)},[r,n,i]}class Is extends ae{constructor(e){super(),ie(this,e,Qu,Zu,re,{name:0,link:1,icon:2})}}function Xu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g;return s=new $t({props:{title:"Welcome!",icon:"wrench-adjustable"}}),i=new Is({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),l=new Is({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),c=new Is({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),f=new Is({props:{name:"Manage",link:"manage",icon:"journal-album"}}),{c(){e=m("main"),L(s.$$.fragment),r=$(),n=m("div"),L(i.$$.fragment),a=$(),L(l.$$.fragment),o=$(),L(c.$$.fragment),u=$(),L(f.$$.fragment),h(n,"class","row"),h(e,"class","container")},m(p,v){P(p,e,v),A(s,e,null),d(e,r),d(e,n),A(i,n,null),d(n,a),A(l,n,null),d(n,o),A(c,n,null),d(n,u),A(f,n,null),g=!0},p:R,i(p){g||(k(s.$$.fragment,p),k(i.$$.fragment,p),k(l.$$.fragment,p),k(c.$$.fragment,p),k(f.$$.fragment,p),p&&(_||Ae(()=>{_=Xe(e,et,{duration:500}),_.start()})),g=!0)},o(p){S(s.$$.fragment,p),S(i.$$.fragment,p),S(l.$$.fragment,p),S(c.$$.fragment,p),S(f.$$.fragment,p),g=!1},d(p){p&&E(e),I(s),I(i),I(l),I(c),I(f)}}}class eh extends ae{constructor(e){super(),ie(this,e,null,Xu,re,{})}}function bi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function vi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function yi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function th(t){let e,s;return e=new Ot({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:R,i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function sh(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',h(e,"class","d-flex justify-content-center")},m(s,r){P(s,e,r)},p:R,i:R,o:R,d(s){s&&E(e)}}}function rh(t){let e,s,r=Te(Object.entries(t[2].publisher)),n=[];for(let a=0;a<r.length;a+=1)n[a]=wi(bi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);P(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].publisher));let o;for(o=0;o<r.length;o+=1){const c=bi(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=wi(c),n[o].c(),k(n[o],1),n[o].m(e.parentNode,e))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function nh(t){let e,s,r=Te(Object.entries(t[2].author)),n=[];for(let a=0;a<r.length;a+=1)n[a]=ki(vi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);P(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].author));let o;for(o=0;o<r.length;o+=1){const c=vi(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=ki(c),n[o].c(),k(n[o],1),n[o].m(e.parentNode,e))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function ih(t){let e,s,r=Te(Object.entries(t[2].books)),n=[];for(let a=0;a<r.length;a+=1)n[a]=$i(yi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);P(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].books));let o;for(o=0;o<r.length;o+=1){const c=yi(a,r,o);n[o]?(n[o].p(c,l),k(n[o],1)):(n[o]=$i(c),n[o].c(),k(n[o],1),n[o].m(e.parentNode,e))}for(ce(),o=r.length;o<n.length;o+=1)i(o);ue()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)k(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&E(e),nt(n,a)}}}function wi(t){let e,s;return e=new la({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ki(t){let e,s;return e=new oa({props:{id:t[14].author_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function $i(t){let e,s;return e=new ar({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ah(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y,T,D,O,j;s=new Lt({props:{text:"Library Holdings"}});const Y=[ih,nh,rh,sh,th],F=[];function V(N,H){return N[2].books.length>0?0:N[2].author.length>0?1:N[2].publisher.length>0?2:N[0]?4:3}return w=V(t),y=F[w]=Y[w](t),{c(){e=m("main"),L(s.$$.fragment),r=$(),n=m("div"),i=m("div"),a=m("select"),l=m("option"),l.textContent="Books",o=m("option"),o.textContent="Author",c=m("option"),c.textContent="Publisher",u=$(),f=m("div"),_=m("input"),g=$(),p=m("button"),p.innerHTML='<i class="bi bi-search"></i>',v=$(),b=m("div"),y.c(),l.selected=!0,l.__value="books",$e(l,l.__value),o.__value="author",$e(o,o.__value),c.__value="publisher",$e(c,c.__value),h(a,"name","searchtype"),h(a,"class","form-select"),h(i,"class","col-auto col-md-2 p-0 pe-md-4"),h(_,"class","form-control form-control-lg"),h(_,"type","search"),h(_,"placeholder","Search"),h(_,"name","Search"),h(f,"class","col-6 col-md-6 p-0"),h(p,"class","btn btn-lg btn-success col-auto col-md-1"),h(p,"type","submit"),h(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),h(b,"class","row"),h(e,"class","container")},m(N,H){P(N,e,H),A(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(a,l),d(a,o),d(a,c),t[5](a),d(n,u),d(n,f),d(f,_),$e(_,t[1]),d(n,g),d(n,p),d(e,v),d(e,b),F[w].m(b,null),D=!0,O||(j=[le(a,"change",t[4]),le(_,"input",t[6]),le(_,"keyup",t[7]),le(p,"click",t[4])],O=!0)},p(N,[H]){H&2&&_.value!==N[1]&&$e(_,N[1]);let ve=w;w=V(N),w===ve?F[w].p(N,H):(ce(),S(F[ve],1,1,()=>{F[ve]=null}),ue(),y=F[w],y?y.p(N,H):(y=F[w]=Y[w](N),y.c()),k(y,1),y.m(b,null))},i(N){D||(k(s.$$.fragment,N),k(y),N&&(T||Ae(()=>{T=Xe(e,et,{duration:500}),T.start()})),D=!0)},o(N){S(s.$$.fragment,N),S(y),D=!1},d(N){N&&E(e),I(s),t[5](null),F[w].d(),O=!1,xe(j)}}}function oh(t,e,s){let r;Ai(t,Ao,b=>s(9,r=b));let n=!0;function i(){switch(r){case"/search/author":s(3,f.value="author",f);break;case"/search/publisher":s(3,f.value="publisher",f);break;default:s(3,f.value="books",f)}}const a={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let o="books",c="",u={books:[],author:[],publisher:[]},f;async function _(){s(0,n=!0),o=f.value,console.log(o);const{data:b,error:w}=await Ne.from(o).select(a[o]).ilike(l[o],`%${c}%`);w&&console.log(w),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[o]=b,u),s(2,u),s(0,n=!1),console.log(n,u)}vs(i),vs(_);function g(b){zs[b?"unshift":"push"](()=>{f=b,s(3,f)})}function p(){c=this.value,s(1,c)}return[n,c,u,f,_,g,p,b=>b.key==="Enter"&&_()]}class Qt extends ae{constructor(e){super(),ie(this,e,oh,ah,re,{})}}function lh(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("button"),s.textContent="Client",r=$(),n=m("button"),n.textContent="Staff",h(s,"class","m-2 btn btn-primary btn-lg"),h(n,"class","m-2 btn btn-danger btn-lg"),h(e,"class","d-flex justify-content-center align-items-center"),At(e,"height","90vh")},m(o,c){P(o,e,c),d(e,s),d(e,r),d(e,n),a||(l=[le(s,"click",t[0]),le(n,"click",t[1])],a=!0)},p:R,i(o){o&&(i||Ae(()=>{i=Xe(e,et,{duration:500}),i.start()}))},o:R,d(o){o&&E(e),a=!1,xe(l)}}}function ch(t){return document.querySelector("body").setAttribute("data-bs-theme","dark"),[()=>{ss.set("client"),localStorage.setItem("accType","client")},()=>{ss.set("staff"),localStorage.setItem("accType","staff")}]}class uh extends ae{constructor(e){super(),ie(this,e,ch,lh,re,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var da;function C(){return da.apply(null,arguments)}function hh(t){da=t}function Ze(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function jt(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function on(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Q(t,e))return!1;return!0}function Le(t){return t===void 0}function mt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Ds(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function fa(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function wt(t,e){for(var s in e)Q(e,s)&&(t[s]=e[s]);return Q(e,"toString")&&(t.toString=e.toString),Q(e,"valueOf")&&(t.valueOf=e.valueOf),t}function it(t,e,s,r){return La(t,e,s,r,!0).utc()}function dh(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function B(t){return t._pf==null&&(t._pf=dh()),t._pf}var Fr;Array.prototype.some?Fr=Array.prototype.some:Fr=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function ln(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=B(t),s=Fr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function cr(t){var e=it(NaN);return t!=null?wt(B(e),t):B(e).userInvalidated=!0,e}var Si=C.momentProperties=[],Er=!1;function cn(t,e){var s,r,n,i=Si.length;if(Le(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Le(e._i)||(t._i=e._i),Le(e._f)||(t._f=e._f),Le(e._l)||(t._l=e._l),Le(e._strict)||(t._strict=e._strict),Le(e._tzm)||(t._tzm=e._tzm),Le(e._isUTC)||(t._isUTC=e._isUTC),Le(e._offset)||(t._offset=e._offset),Le(e._pf)||(t._pf=B(e)),Le(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=Si[s],n=e[r],Le(n)||(t[r]=n);return t}function Ms(t){cn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Er===!1&&(Er=!0,C.updateOffset(this),Er=!1)}function Qe(t){return t instanceof Ms||t!=null&&t._isAMomentObject!=null}function _a(t){C.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function ze(t,e){var s=!0;return wt(function(){if(C.deprecationHandler!=null&&C.deprecationHandler(null,t),s){var r=[],n,i,a,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(a in arguments[0])Q(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}_a(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Oi={};function ma(t,e){C.deprecationHandler!=null&&C.deprecationHandler(t,e),Oi[t]||(_a(e),Oi[t]=!0)}C.suppressDeprecationWarnings=!1;C.deprecationHandler=null;function at(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function fh(t){var e,s;for(s in t)Q(t,s)&&(e=t[s],at(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Wr(t,e){var s=wt({},t),r;for(r in e)Q(e,r)&&(jt(t[r])&&jt(e[r])?(s[r]={},wt(s[r],t[r]),wt(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)Q(t,r)&&!Q(e,r)&&jt(t[r])&&(s[r]=wt({},s[r]));return s}function un(t){t!=null&&this.set(t)}var Hr;Object.keys?Hr=Object.keys:Hr=function(t){var e,s=[];for(e in t)Q(t,e)&&s.push(e);return s};var _h={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function mh(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return at(r)?r.call(e,s):r}function rt(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var hn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ls=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pr={},Xt={};function U(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(Xt[t]=n),e&&(Xt[e[0]]=function(){return rt(n.apply(this,arguments),e[1],e[2])}),s&&(Xt[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function ph(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function gh(t){var e=t.match(hn),s,r;for(s=0,r=e.length;s<r;s++)Xt[e[s]]?e[s]=Xt[e[s]]:e[s]=ph(e[s]);return function(n){var i="",a;for(a=0;a<r;a++)i+=at(e[a])?e[a].call(n,t):e[a];return i}}function Ns(t,e){return t.isValid()?(e=pa(e,t.localeData()),Pr[e]=Pr[e]||gh(e),Pr[e](t)):t.localeData().invalidDate()}function pa(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(Ls.lastIndex=0;s>=0&&Ls.test(t);)t=t.replace(Ls,r),Ls.lastIndex=0,s-=1;return t}var bh={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function vh(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(hn).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var yh="Invalid date";function wh(){return this._invalidDate}var kh="%d",$h=/\d{1,2}/;function Sh(t){return this._ordinal.replace("%d",t)}var Oh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Th(t,e,s,r){var n=this._relativeTime[s];return at(n)?n(t,e,s,r):n.replace(/%d/i,t)}function Dh(t,e){var s=this._relativeTime[t>0?"future":"past"];return at(s)?s(e):s.replace(/%s/i,e)}var Ti={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ge(t){return typeof t=="string"?Ti[t]||Ti[t.toLowerCase()]:void 0}function dn(t){var e={},s,r;for(r in t)Q(t,r)&&(s=Ge(r),s&&(e[s]=t[r]));return e}var Mh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Eh(t){var e=[],s;for(s in t)Q(t,s)&&e.push({unit:s,priority:Mh[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var ga=/\d/,Ue=/\d\d/,ba=/\d{3}/,fn=/\d{4}/,ur=/[+-]?\d{6}/,de=/\d\d?/,va=/\d\d\d\d?/,ya=/\d\d\d\d\d\d?/,hr=/\d{1,3}/,_n=/\d{1,4}/,dr=/[+-]?\d{1,6}/,as=/\d+/,fr=/[+-]?\d+/,Ph=/Z|[+-]\d\d:?\d\d/gi,_r=/Z|[+-]\d\d(?::?\d\d)?/gi,Ch=/[+-]?\d+(\.\d{1,3})?/,Es=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,os=/^[1-9]\d?/,mn=/^([1-9]\d|\d)/,Js;Js={};function x(t,e,s){Js[t]=at(e)?e:function(r,n){return r&&s?s:e}}function Rh(t,e){return Q(Js,t)?Js[t](e._strict,e._locale):new RegExp(jh(t))}function jh(t){return ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function He(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function G(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=He(e)),s}var Br={};function ne(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),mt(e)&&(r=function(i,a){a[e]=G(i)}),n=t.length,s=0;s<n;s++)Br[t[s]]=r}function Ps(t,e){ne(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function Ah(t,e,s){e!=null&&Q(Br,t)&&Br[t](e,s._a,s,t)}function mr(t){return t%4===0&&t%100!==0||t%400===0}var Ce=0,ht=1,st=2,De=3,Ke=4,dt=5,Rt=6,Ih=7,Lh=8;U("Y",0,0,function(){var t=this.year();return t<=9999?rt(t,4):"+"+t});U(0,["YY",2],0,function(){return this.year()%100});U(0,["YYYY",4],0,"year");U(0,["YYYYY",5],0,"year");U(0,["YYYYYY",6,!0],0,"year");x("Y",fr);x("YY",de,Ue);x("YYYY",_n,fn);x("YYYYY",dr,ur);x("YYYYYY",dr,ur);ne(["YYYYY","YYYYYY"],Ce);ne("YYYY",function(t,e){e[Ce]=t.length===2?C.parseTwoDigitYear(t):G(t)});ne("YY",function(t,e){e[Ce]=C.parseTwoDigitYear(t)});ne("Y",function(t,e){e[Ce]=parseInt(t,10)});function ps(t){return mr(t)?366:365}C.parseTwoDigitYear=function(t){return G(t)+(G(t)>68?1900:2e3)};var wa=ls("FullYear",!0);function xh(){return mr(this.year())}function ls(t,e){return function(s){return s!=null?(ka(this,t,s),C.updateOffset(this,e),this):ws(this,t)}}function ws(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function ka(t,e,s){var r,n,i,a,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,a=t.month(),l=t.date(),l=l===29&&a===1&&!mr(i)?28:l,n?r.setUTCFullYear(i,a,l):r.setFullYear(i,a,l)}}function Yh(t){return t=Ge(t),at(this[t])?this[t]():this}function Nh(t,e){if(typeof t=="object"){t=dn(t);var s=Eh(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=Ge(t),at(this[t]))return this[t](e);return this}function Uh(t,e){return(t%e+e)%e}var Oe;Array.prototype.indexOf?Oe=Array.prototype.indexOf:Oe=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function pn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=Uh(e,12);return t+=(e-s)/12,s===1?mr(t)?29:28:31-s%7%2}U("M",["MM",2],"Mo",function(){return this.month()+1});U("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});U("MMMM",0,0,function(t){return this.localeData().months(this,t)});x("M",de,os);x("MM",de,Ue);x("MMM",function(t,e){return e.monthsShortRegex(t)});x("MMMM",function(t,e){return e.monthsRegex(t)});ne(["M","MM"],function(t,e){e[ht]=G(t)-1});ne(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[ht]=n:B(s).invalidMonth=t});var Fh="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$a="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Sa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Wh=Es,Hh=Es;function Bh(t,e){return t?Ze(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Sa).test(e)?"format":"standalone"][t.month()]:Ze(this._months)?this._months:this._months.standalone}function qh(t,e){return t?Ze(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Sa.test(e)?"format":"standalone"][t.month()]:Ze(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function zh(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=it([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=Oe.call(this._shortMonthsParse,a),n!==-1?n:null):(n=Oe.call(this._longMonthsParse,a),n!==-1?n:null):e==="MMM"?(n=Oe.call(this._shortMonthsParse,a),n!==-1?n:(n=Oe.call(this._longMonthsParse,a),n!==-1?n:null)):(n=Oe.call(this._longMonthsParse,a),n!==-1?n:(n=Oe.call(this._shortMonthsParse,a),n!==-1?n:null))}function Gh(t,e,s){var r,n,i;if(this._monthsParseExact)return zh.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=it([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function Oa(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=G(e);else if(e=t.localeData().monthsParse(e),!mt(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,pn(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function Ta(t){return t!=null?(Oa(this,t),C.updateOffset(this,!0),this):ws(this,"Month")}function Vh(){return pn(this.year(),this.month())}function Jh(t){return this._monthsParseExact?(Q(this,"_monthsRegex")||Da.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Q(this,"_monthsShortRegex")||(this._monthsShortRegex=Wh),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Kh(t){return this._monthsParseExact?(Q(this,"_monthsRegex")||Da.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Q(this,"_monthsRegex")||(this._monthsRegex=Hh),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Da(){function t(o,c){return c.length-o.length}var e=[],s=[],r=[],n,i,a,l;for(n=0;n<12;n++)i=it([2e3,n]),a=ft(this.monthsShort(i,"")),l=ft(this.months(i,"")),e.push(a),s.push(l),r.push(l),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Zh(t,e,s,r,n,i,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,a),l}function ks(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ks(t,e,s){var r=7+e-s,n=(7+ks(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Ma(t,e,s,r,n){var i=(7+s-r)%7,a=Ks(t,r,n),l=1+7*(e-1)+i+a,o,c;return l<=0?(o=t-1,c=ps(o)+l):l>ps(t)?(o=t+1,c=l-ps(t)):(o=t,c=l),{year:o,dayOfYear:c}}function $s(t,e,s){var r=Ks(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,a;return n<1?(a=t.year()-1,i=n+_t(a,e,s)):n>_t(t.year(),e,s)?(i=n-_t(t.year(),e,s),a=t.year()+1):(a=t.year(),i=n),{week:i,year:a}}function _t(t,e,s){var r=Ks(t,e,s),n=Ks(t+1,e,s);return(ps(t)-r+n)/7}U("w",["ww",2],"wo","week");U("W",["WW",2],"Wo","isoWeek");x("w",de,os);x("ww",de,Ue);x("W",de,os);x("WW",de,Ue);Ps(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=G(t)});function Qh(t){return $s(t,this._week.dow,this._week.doy).week}var Xh={dow:0,doy:6};function ed(){return this._week.dow}function td(){return this._week.doy}function sd(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function rd(t){var e=$s(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}U("d",0,"do","day");U("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});U("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});U("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});U("e",0,0,"weekday");U("E",0,0,"isoWeekday");x("d",de);x("e",de);x("E",de);x("dd",function(t,e){return e.weekdaysMinRegex(t)});x("ddd",function(t,e){return e.weekdaysShortRegex(t)});x("dddd",function(t,e){return e.weekdaysRegex(t)});Ps(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:B(s).invalidWeekday=t});Ps(["d","e","E"],function(t,e,s,r){e[r]=G(t)});function nd(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function id(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function gn(t,e){return t.slice(e,7).concat(t.slice(0,e))}var ad="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ea="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),od="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ld=Es,cd=Es,ud=Es;function hd(t,e){var s=Ze(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?gn(s,this._week.dow):t?s[t.day()]:s}function dd(t){return t===!0?gn(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function fd(t){return t===!0?gn(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function _d(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=it([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=Oe.call(this._weekdaysParse,a),n!==-1?n:null):e==="ddd"?(n=Oe.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=Oe.call(this._minWeekdaysParse,a),n!==-1?n:null):e==="dddd"?(n=Oe.call(this._weekdaysParse,a),n!==-1||(n=Oe.call(this._shortWeekdaysParse,a),n!==-1)?n:(n=Oe.call(this._minWeekdaysParse,a),n!==-1?n:null)):e==="ddd"?(n=Oe.call(this._shortWeekdaysParse,a),n!==-1||(n=Oe.call(this._weekdaysParse,a),n!==-1)?n:(n=Oe.call(this._minWeekdaysParse,a),n!==-1?n:null)):(n=Oe.call(this._minWeekdaysParse,a),n!==-1||(n=Oe.call(this._weekdaysParse,a),n!==-1)?n:(n=Oe.call(this._shortWeekdaysParse,a),n!==-1?n:null))}function md(t,e,s){var r,n,i;if(this._weekdaysParseExact)return _d.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=it([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function pd(t){if(!this.isValid())return t!=null?this:NaN;var e=ws(this,"Day");return t!=null?(t=nd(t,this.localeData()),this.add(t-e,"d")):e}function gd(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function bd(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=id(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function vd(t){return this._weekdaysParseExact?(Q(this,"_weekdaysRegex")||bn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Q(this,"_weekdaysRegex")||(this._weekdaysRegex=ld),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function yd(t){return this._weekdaysParseExact?(Q(this,"_weekdaysRegex")||bn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Q(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=cd),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function wd(t){return this._weekdaysParseExact?(Q(this,"_weekdaysRegex")||bn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Q(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ud),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function bn(){function t(u,f){return f.length-u.length}var e=[],s=[],r=[],n=[],i,a,l,o,c;for(i=0;i<7;i++)a=it([2e3,1]).day(i),l=ft(this.weekdaysMin(a,"")),o=ft(this.weekdaysShort(a,"")),c=ft(this.weekdays(a,"")),e.push(l),s.push(o),r.push(c),n.push(l),n.push(o),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function vn(){return this.hours()%12||12}function kd(){return this.hours()||24}U("H",["HH",2],0,"hour");U("h",["hh",2],0,vn);U("k",["kk",2],0,kd);U("hmm",0,0,function(){return""+vn.apply(this)+rt(this.minutes(),2)});U("hmmss",0,0,function(){return""+vn.apply(this)+rt(this.minutes(),2)+rt(this.seconds(),2)});U("Hmm",0,0,function(){return""+this.hours()+rt(this.minutes(),2)});U("Hmmss",0,0,function(){return""+this.hours()+rt(this.minutes(),2)+rt(this.seconds(),2)});function Pa(t,e){U(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Pa("a",!0);Pa("A",!1);function Ca(t,e){return e._meridiemParse}x("a",Ca);x("A",Ca);x("H",de,mn);x("h",de,os);x("k",de,os);x("HH",de,Ue);x("hh",de,Ue);x("kk",de,Ue);x("hmm",va);x("hmmss",ya);x("Hmm",va);x("Hmmss",ya);ne(["H","HH"],De);ne(["k","kk"],function(t,e,s){var r=G(t);e[De]=r===24?0:r});ne(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});ne(["h","hh"],function(t,e,s){e[De]=G(t),B(s).bigHour=!0});ne("hmm",function(t,e,s){var r=t.length-2;e[De]=G(t.substr(0,r)),e[Ke]=G(t.substr(r)),B(s).bigHour=!0});ne("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[De]=G(t.substr(0,r)),e[Ke]=G(t.substr(r,2)),e[dt]=G(t.substr(n)),B(s).bigHour=!0});ne("Hmm",function(t,e,s){var r=t.length-2;e[De]=G(t.substr(0,r)),e[Ke]=G(t.substr(r))});ne("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[De]=G(t.substr(0,r)),e[Ke]=G(t.substr(r,2)),e[dt]=G(t.substr(n))});function $d(t){return(t+"").toLowerCase().charAt(0)==="p"}var Sd=/[ap]\.?m?\.?/i,Od=ls("Hours",!0);function Td(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var Ra={calendar:_h,longDateFormat:bh,invalidDate:yh,ordinal:kh,dayOfMonthOrdinalParse:$h,relativeTime:Oh,months:Fh,monthsShort:$a,week:Xh,weekdays:ad,weekdaysMin:od,weekdaysShort:Ea,meridiemParse:Sd},me={},hs={},Ss;function Dd(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function Di(t){return t&&t.toLowerCase().replace("_","-")}function Md(t){for(var e=0,s,r,n,i;e<t.length;){for(i=Di(t[e]).split("-"),s=i.length,r=Di(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=pr(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&Dd(i,r)>=s-1)break;s--}e++}return Ss}function Ed(t){return!!(t&&t.match("^[^/\\\\]*$"))}function pr(t){var e=null,s;if(me[t]===void 0&&typeof Ws<"u"&&Ws&&Ws.exports&&Ed(t))try{e=Ss._abbr,s=require,s("./locale/"+t),St(e)}catch{me[t]=null}return me[t]}function St(t,e){var s;return t&&(Le(e)?s=pt(t):s=yn(t,e),s?Ss=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ss._abbr}function yn(t,e){if(e!==null){var s,r=Ra;if(e.abbr=t,me[t]!=null)ma("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=me[t]._config;else if(e.parentLocale!=null)if(me[e.parentLocale]!=null)r=me[e.parentLocale]._config;else if(s=pr(e.parentLocale),s!=null)r=s._config;else return hs[e.parentLocale]||(hs[e.parentLocale]=[]),hs[e.parentLocale].push({name:t,config:e}),null;return me[t]=new un(Wr(r,e)),hs[t]&&hs[t].forEach(function(n){yn(n.name,n.config)}),St(t),me[t]}else return delete me[t],null}function Pd(t,e){if(e!=null){var s,r,n=Ra;me[t]!=null&&me[t].parentLocale!=null?me[t].set(Wr(me[t]._config,e)):(r=pr(t),r!=null&&(n=r._config),e=Wr(n,e),r==null&&(e.abbr=t),s=new un(e),s.parentLocale=me[t],me[t]=s),St(t)}else me[t]!=null&&(me[t].parentLocale!=null?(me[t]=me[t].parentLocale,t===St()&&St(t)):me[t]!=null&&delete me[t]);return me[t]}function pt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ss;if(!Ze(t)){if(e=pr(t),e)return e;t=[t]}return Md(t)}function Cd(){return Hr(me)}function wn(t){var e,s=t._a;return s&&B(t).overflow===-2&&(e=s[ht]<0||s[ht]>11?ht:s[st]<1||s[st]>pn(s[Ce],s[ht])?st:s[De]<0||s[De]>24||s[De]===24&&(s[Ke]!==0||s[dt]!==0||s[Rt]!==0)?De:s[Ke]<0||s[Ke]>59?Ke:s[dt]<0||s[dt]>59?dt:s[Rt]<0||s[Rt]>999?Rt:-1,B(t)._overflowDayOfYear&&(e<Ce||e>st)&&(e=st),B(t)._overflowWeeks&&e===-1&&(e=Ih),B(t)._overflowWeekday&&e===-1&&(e=Lh),B(t).overflow=e),t}var Rd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ad=/Z|[+-]\d\d(?::?\d\d)?/,xs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Id=/^\/?Date\((-?\d+)/i,Ld=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,xd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ja(t){var e,s,r=t._i,n=Rd.exec(r)||jd.exec(r),i,a,l,o,c=xs.length,u=Cr.length;if(n){for(B(t).iso=!0,e=0,s=c;e<s;e++)if(xs[e][1].exec(n[1])){a=xs[e][0],i=xs[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(Cr[e][1].exec(n[3])){l=(n[2]||" ")+Cr[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(Ad.exec(n[4]))o="Z";else{t._isValid=!1;return}t._f=a+(l||"")+(o||""),$n(t)}else t._isValid=!1}function Yd(t,e,s,r,n,i){var a=[Nd(t),$a.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&a.push(parseInt(i,10)),a}function Nd(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Ud(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Fd(t,e,s){if(t){var r=Ea.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return B(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Wd(t,e,s){if(t)return xd[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function Aa(t){var e=Ld.exec(Ud(t._i)),s;if(e){if(s=Yd(e[4],e[3],e[2],e[5],e[6],e[7]),!Fd(e[1],s,t))return;t._a=s,t._tzm=Wd(e[8],e[9],e[10]),t._d=ks.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),B(t).rfc2822=!0}else t._isValid=!1}function Hd(t){var e=Id.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ja(t),t._isValid===!1)delete t._isValid;else return;if(Aa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:C.createFromInputFallback(t)}C.createFromInputFallback=ze("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Gt(t,e,s){return t??e??s}function Bd(t){var e=new Date(C.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function kn(t){var e,s,r=[],n,i,a;if(!t._d){for(n=Bd(t),t._w&&t._a[st]==null&&t._a[ht]==null&&qd(t),t._dayOfYear!=null&&(a=Gt(t._a[Ce],n[Ce]),(t._dayOfYear>ps(a)||t._dayOfYear===0)&&(B(t)._overflowDayOfYear=!0),s=ks(a,0,t._dayOfYear),t._a[ht]=s.getUTCMonth(),t._a[st]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[De]===24&&t._a[Ke]===0&&t._a[dt]===0&&t._a[Rt]===0&&(t._nextDay=!0,t._a[De]=0),t._d=(t._useUTC?ks:Zh).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[De]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(B(t).weekdayMismatch=!0)}}function qd(t){var e,s,r,n,i,a,l,o,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,a=4,s=Gt(e.GG,t._a[Ce],$s(he(),1,4).year),r=Gt(e.W,1),n=Gt(e.E,1),(n<1||n>7)&&(o=!0)):(i=t._locale._week.dow,a=t._locale._week.doy,c=$s(he(),i,a),s=Gt(e.gg,t._a[Ce],c.year),r=Gt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(o=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(o=!0)):n=i),r<1||r>_t(s,i,a)?B(t)._overflowWeeks=!0:o!=null?B(t)._overflowWeekday=!0:(l=Ma(s,r,n,i,a),t._a[Ce]=l.year,t._dayOfYear=l.dayOfYear)}C.ISO_8601=function(){};C.RFC_2822=function(){};function $n(t){if(t._f===C.ISO_8601){ja(t);return}if(t._f===C.RFC_2822){Aa(t);return}t._a=[],B(t).empty=!0;var e=""+t._i,s,r,n,i,a,l=e.length,o=0,c,u;for(n=pa(t._f,t._locale).match(hn)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(Rh(i,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&B(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),o+=r.length),Xt[i]?(r?B(t).empty=!1:B(t).unusedTokens.push(i),Ah(i,r,t)):t._strict&&!r&&B(t).unusedTokens.push(i);B(t).charsLeftOver=l-o,e.length>0&&B(t).unusedInput.push(e),t._a[De]<=12&&B(t).bigHour===!0&&t._a[De]>0&&(B(t).bigHour=void 0),B(t).parsedDateParts=t._a.slice(0),B(t).meridiem=t._meridiem,t._a[De]=zd(t._locale,t._a[De],t._meridiem),c=B(t).era,c!==null&&(t._a[Ce]=t._locale.erasConvertYear(c,t._a[Ce])),kn(t),wn(t)}function zd(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function Gd(t){var e,s,r,n,i,a,l=!1,o=t._f.length;if(o===0){B(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<o;n++)i=0,a=!1,e=cn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],$n(e),ln(e)&&(a=!0),i+=B(e).charsLeftOver,i+=B(e).unusedTokens.length*10,B(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||a)&&(r=i,s=e,a&&(l=!0));wt(t,s||e)}function Vd(t){if(!t._d){var e=dn(t._i),s=e.day===void 0?e.date:e.day;t._a=fa([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),kn(t)}}function Jd(t){var e=new Ms(wn(Ia(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ia(t){var e=t._i,s=t._f;return t._locale=t._locale||pt(t._l),e===null||s===void 0&&e===""?cr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Qe(e)?new Ms(wn(e)):(Ds(e)?t._d=e:Ze(s)?Gd(t):s?$n(t):Kd(t),ln(t)||(t._d=null),t))}function Kd(t){var e=t._i;Le(e)?t._d=new Date(C.now()):Ds(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Hd(t):Ze(e)?(t._a=fa(e.slice(0),function(s){return parseInt(s,10)}),kn(t)):jt(e)?Vd(t):mt(e)?t._d=new Date(e):C.createFromInputFallback(t)}function La(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(jt(t)&&on(t)||Ze(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,Jd(i)}function he(t,e,s,r){return La(t,e,s,r,!1)}var Zd=ze("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=he.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:cr()}),Qd=ze("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=he.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:cr()});function xa(t,e){var s,r;if(e.length===1&&Ze(e[0])&&(e=e[0]),!e.length)return he();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function Xd(){var t=[].slice.call(arguments,0);return xa("isBefore",t)}function ef(){var t=[].slice.call(arguments,0);return xa("isAfter",t)}var tf=function(){return Date.now?Date.now():+new Date},ds=["year","quarter","month","week","day","hour","minute","second","millisecond"];function sf(t){var e,s=!1,r,n=ds.length;for(e in t)if(Q(t,e)&&!(Oe.call(ds,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[ds[r]]){if(s)return!1;parseFloat(t[ds[r]])!==G(t[ds[r]])&&(s=!0)}return!0}function rf(){return this._isValid}function nf(){return tt(NaN)}function gr(t){var e=dn(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,o=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=sf(e),this._milliseconds=+u+c*1e3+o*6e4+l*1e3*60*60,this._days=+a+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=pt(),this._bubble()}function Us(t){return t instanceof gr}function qr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function af(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,a;for(a=0;a<r;a++)G(t[a])!==G(e[a])&&i++;return i+n}function Ya(t,e){U(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+rt(~~(s/60),2)+e+rt(~~s%60,2)})}Ya("Z",":");Ya("ZZ","");x("Z",_r);x("ZZ",_r);ne(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Sn(_r,t)});var of=/([\+\-]|\d\d)/gi;function Sn(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(of)||["-",0,0],i=+(n[1]*60)+G(n[2]),i===0?0:n[0]==="+"?i:-i)}function On(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(Qe(t)||Ds(t)?t.valueOf():he(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),C.updateOffset(s,!1),s):he(t).local()}function zr(t){return-Math.round(t._d.getTimezoneOffset())}C.updateOffset=function(){};function lf(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Sn(_r,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=zr(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?Fa(this,tt(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,C.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:zr(this)}function cf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function uf(t){return this.utcOffset(0,t)}function hf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(zr(this),"m")),this}function df(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Sn(Ph,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function ff(t){return this.isValid()?(t=t?he(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function _f(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function mf(){if(!Le(this._isDSTShifted))return this._isDSTShifted;var t={},e;return cn(t,this),t=Ia(t),t._a?(e=t._isUTC?it(t._a):he(t._a),this._isDSTShifted=this.isValid()&&af(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function pf(){return this.isValid()?!this._isUTC:!1}function gf(){return this.isValid()?this._isUTC:!1}function Na(){return this.isValid()?this._isUTC&&this._offset===0:!1}var bf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,vf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function tt(t,e){var s=t,r=null,n,i,a;return Us(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:mt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=bf.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:G(r[st])*n,h:G(r[De])*n,m:G(r[Ke])*n,s:G(r[dt])*n,ms:G(qr(r[Rt]*1e3))*n}):(r=vf.exec(t))?(n=r[1]==="-"?-1:1,s={y:Mt(r[2],n),M:Mt(r[3],n),w:Mt(r[4],n),d:Mt(r[5],n),h:Mt(r[6],n),m:Mt(r[7],n),s:Mt(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=yf(he(s.from),he(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),i=new gr(s),Us(t)&&Q(t,"_locale")&&(i._locale=t._locale),Us(t)&&Q(t,"_isValid")&&(i._isValid=t._isValid),i}tt.fn=gr.prototype;tt.invalid=nf;function Mt(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Mi(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function yf(t,e){var s;return t.isValid()&&e.isValid()?(e=On(e,t),t.isBefore(e)?s=Mi(t,e):(s=Mi(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Ua(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(ma(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=tt(s,r),Fa(this,n,t),this}}function Fa(t,e,s,r){var n=e._milliseconds,i=qr(e._days),a=qr(e._months);t.isValid()&&(r=r??!0,a&&Oa(t,ws(t,"Month")+a*s),i&&ka(t,"Date",ws(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&C.updateOffset(t,i||a))}var wf=Ua(1,"add"),kf=Ua(-1,"subtract");function Wa(t){return typeof t=="string"||t instanceof String}function $f(t){return Qe(t)||Ds(t)||Wa(t)||mt(t)||Of(t)||Sf(t)||t===null||t===void 0}function Sf(t){var e=jt(t)&&!on(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,a=r.length;for(n=0;n<a;n+=1)i=r[n],s=s||Q(t,i);return e&&s}function Of(t){var e=Ze(t),s=!1;return e&&(s=t.filter(function(r){return!mt(r)&&Wa(t)}).length===0),e&&s}function Tf(t){var e=jt(t)&&!on(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||Q(t,i);return e&&s}function Df(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Mf(t,e){arguments.length===1&&(arguments[0]?$f(arguments[0])?(t=arguments[0],e=void 0):Tf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||he(),r=On(s,this).startOf("day"),n=C.calendarFormat(this,r)||"sameElse",i=e&&(at(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,he(s)))}function Ef(){return new Ms(this)}function Pf(t,e){var s=Qe(t)?t:he(t);return this.isValid()&&s.isValid()?(e=Ge(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function Cf(t,e){var s=Qe(t)?t:he(t);return this.isValid()&&s.isValid()?(e=Ge(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function Rf(t,e,s,r){var n=Qe(t)?t:he(t),i=Qe(e)?e:he(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function jf(t,e){var s=Qe(t)?t:he(t),r;return this.isValid()&&s.isValid()?(e=Ge(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Af(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function If(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Lf(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=On(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=Ge(e),e){case"year":i=Fs(this,r)/12;break;case"month":i=Fs(this,r);break;case"quarter":i=Fs(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:He(i)}function Fs(t,e){if(t.date()<e.date())return-Fs(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}C.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";C.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function xf(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Yf(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Ns(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):at(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ns(s,"Z")):Ns(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Nf(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function Uf(t){t||(t=this.isUtc()?C.defaultFormatUtc:C.defaultFormat);var e=Ns(this,t);return this.localeData().postformat(e)}function Ff(t,e){return this.isValid()&&(Qe(t)&&t.isValid()||he(t).isValid())?tt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Wf(t){return this.from(he(),t)}function Hf(t,e){return this.isValid()&&(Qe(t)&&t.isValid()||he(t).isValid())?tt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Bf(t){return this.to(he(),t)}function Ha(t){var e;return t===void 0?this._locale._abbr:(e=pt(t),e!=null&&(this._locale=e),this)}var Ba=ze("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function qa(){return this._locale}var Zs=1e3,es=60*Zs,Qs=60*es,za=(365*400+97)*24*Qs;function ts(t,e){return(t%e+e)%e}function Ga(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-za:new Date(t,e,s).valueOf()}function Va(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-za:Date.UTC(t,e,s)}function qf(t){var e,s;if(t=Ge(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Va:Ga,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ts(e+(this._isUTC?0:this.utcOffset()*es),Qs);break;case"minute":e=this._d.valueOf(),e-=ts(e,es);break;case"second":e=this._d.valueOf(),e-=ts(e,Zs);break}return this._d.setTime(e),C.updateOffset(this,!0),this}function zf(t){var e,s;if(t=Ge(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Va:Ga,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Qs-ts(e+(this._isUTC?0:this.utcOffset()*es),Qs)-1;break;case"minute":e=this._d.valueOf(),e+=es-ts(e,es)-1;break;case"second":e=this._d.valueOf(),e+=Zs-ts(e,Zs)-1;break}return this._d.setTime(e),C.updateOffset(this,!0),this}function Gf(){return this._d.valueOf()-(this._offset||0)*6e4}function Vf(){return Math.floor(this.valueOf()/1e3)}function Jf(){return new Date(this.valueOf())}function Kf(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Zf(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Qf(){return this.isValid()?this.toISOString():null}function Xf(){return ln(this)}function e_(){return wt({},B(this))}function t_(){return B(this).overflow}function s_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}U("N",0,0,"eraAbbr");U("NN",0,0,"eraAbbr");U("NNN",0,0,"eraAbbr");U("NNNN",0,0,"eraName");U("NNNNN",0,0,"eraNarrow");U("y",["y",1],"yo","eraYear");U("y",["yy",2],0,"eraYear");U("y",["yyy",3],0,"eraYear");U("y",["yyyy",4],0,"eraYear");x("N",Tn);x("NN",Tn);x("NNN",Tn);x("NNNN",f_);x("NNNNN",__);ne(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?B(s).era=n:B(s).invalidEra=t});x("y",as);x("yy",as);x("yyy",as);x("yyyy",as);x("yo",m_);ne(["y","yy","yyy","yyyy"],Ce);ne(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[Ce]=s._locale.eraYearOrdinalParse(t,n):e[Ce]=parseInt(t,10)});function r_(t,e){var s,r,n,i=this._eras||pt("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=C(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=C(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function n_(t,e,s){var r,n,i=this.eras(),a,l,o;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(a=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),o=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(a===t)return i[r];break;case"NNNNN":if(o===t)return i[r];break}else if([a,l,o].indexOf(t)>=0)return i[r]}function i_(t,e){var s=t.since<=t.until?1:-1;return e===void 0?C(t.since).year():C(t.since).year()+(e-t.offset)*s}function a_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function o_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function l_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function c_(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-C(n[t].since).year())*s+n[t].offset;return this.year()}function u_(t){return Q(this,"_erasNameRegex")||Dn.call(this),t?this._erasNameRegex:this._erasRegex}function h_(t){return Q(this,"_erasAbbrRegex")||Dn.call(this),t?this._erasAbbrRegex:this._erasRegex}function d_(t){return Q(this,"_erasNarrowRegex")||Dn.call(this),t?this._erasNarrowRegex:this._erasRegex}function Tn(t,e){return e.erasAbbrRegex(t)}function f_(t,e){return e.erasNameRegex(t)}function __(t,e){return e.erasNarrowRegex(t)}function m_(t,e){return e._eraYearOrdinalRegex||as}function Dn(){var t=[],e=[],s=[],r=[],n,i,a,l,o,c=this.eras();for(n=0,i=c.length;n<i;++n)a=ft(c[n].name),l=ft(c[n].abbr),o=ft(c[n].narrow),e.push(a),t.push(l),s.push(o),r.push(a),r.push(l),r.push(o);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}U(0,["gg",2],0,function(){return this.weekYear()%100});U(0,["GG",2],0,function(){return this.isoWeekYear()%100});function br(t,e){U(0,[t,t.length],0,e)}br("gggg","weekYear");br("ggggg","weekYear");br("GGGG","isoWeekYear");br("GGGGG","isoWeekYear");x("G",fr);x("g",fr);x("GG",de,Ue);x("gg",de,Ue);x("GGGG",_n,fn);x("gggg",_n,fn);x("GGGGG",dr,ur);x("ggggg",dr,ur);Ps(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=G(t)});Ps(["gg","GG"],function(t,e,s,r){e[r]=C.parseTwoDigitYear(t)});function p_(t){return Ja.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function g_(t){return Ja.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function b_(){return _t(this.year(),1,4)}function v_(){return _t(this.isoWeekYear(),1,4)}function y_(){var t=this.localeData()._week;return _t(this.year(),t.dow,t.doy)}function w_(){var t=this.localeData()._week;return _t(this.weekYear(),t.dow,t.doy)}function Ja(t,e,s,r,n){var i;return t==null?$s(this,r,n).year:(i=_t(t,r,n),e>i&&(e=i),k_.call(this,t,e,s,r,n))}function k_(t,e,s,r,n){var i=Ma(t,e,s,r,n),a=ks(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}U("Q",0,"Qo","quarter");x("Q",ga);ne("Q",function(t,e){e[ht]=(G(t)-1)*3});function $_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}U("D",["DD",2],"Do","date");x("D",de,os);x("DD",de,Ue);x("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ne(["D","DD"],st);ne("Do",function(t,e){e[st]=G(t.match(de)[0])});var Ka=ls("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear");x("DDD",hr);x("DDDD",ba);ne(["DDD","DDDD"],function(t,e,s){s._dayOfYear=G(t)});function S_(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}U("m",["mm",2],0,"minute");x("m",de,mn);x("mm",de,Ue);ne(["m","mm"],Ke);var O_=ls("Minutes",!1);U("s",["ss",2],0,"second");x("s",de,mn);x("ss",de,Ue);ne(["s","ss"],dt);var T_=ls("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)});U(0,["SS",2],0,function(){return~~(this.millisecond()/10)});U(0,["SSS",3],0,"millisecond");U(0,["SSSS",4],0,function(){return this.millisecond()*10});U(0,["SSSSS",5],0,function(){return this.millisecond()*100});U(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});U(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});U(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});U(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});x("S",hr,ga);x("SS",hr,Ue);x("SSS",hr,ba);var kt,Za;for(kt="SSSS";kt.length<=9;kt+="S")x(kt,as);function D_(t,e){e[Rt]=G(("0."+t)*1e3)}for(kt="S";kt.length<=9;kt+="S")ne(kt,D_);Za=ls("Milliseconds",!1);U("z",0,0,"zoneAbbr");U("zz",0,0,"zoneName");function M_(){return this._isUTC?"UTC":""}function E_(){return this._isUTC?"Coordinated Universal Time":""}var M=Ms.prototype;M.add=wf;M.calendar=Mf;M.clone=Ef;M.diff=Lf;M.endOf=zf;M.format=Uf;M.from=Ff;M.fromNow=Wf;M.to=Hf;M.toNow=Bf;M.get=Yh;M.invalidAt=t_;M.isAfter=Pf;M.isBefore=Cf;M.isBetween=Rf;M.isSame=jf;M.isSameOrAfter=Af;M.isSameOrBefore=If;M.isValid=Xf;M.lang=Ba;M.locale=Ha;M.localeData=qa;M.max=Qd;M.min=Zd;M.parsingFlags=e_;M.set=Nh;M.startOf=qf;M.subtract=kf;M.toArray=Kf;M.toObject=Zf;M.toDate=Jf;M.toISOString=Yf;M.inspect=Nf;typeof Symbol<"u"&&Symbol.for!=null&&(M[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});M.toJSON=Qf;M.toString=xf;M.unix=Vf;M.valueOf=Gf;M.creationData=s_;M.eraName=a_;M.eraNarrow=o_;M.eraAbbr=l_;M.eraYear=c_;M.year=wa;M.isLeapYear=xh;M.weekYear=p_;M.isoWeekYear=g_;M.quarter=M.quarters=$_;M.month=Ta;M.daysInMonth=Vh;M.week=M.weeks=sd;M.isoWeek=M.isoWeeks=rd;M.weeksInYear=y_;M.weeksInWeekYear=w_;M.isoWeeksInYear=b_;M.isoWeeksInISOWeekYear=v_;M.date=Ka;M.day=M.days=pd;M.weekday=gd;M.isoWeekday=bd;M.dayOfYear=S_;M.hour=M.hours=Od;M.minute=M.minutes=O_;M.second=M.seconds=T_;M.millisecond=M.milliseconds=Za;M.utcOffset=lf;M.utc=uf;M.local=hf;M.parseZone=df;M.hasAlignedHourOffset=ff;M.isDST=_f;M.isLocal=pf;M.isUtcOffset=gf;M.isUtc=Na;M.isUTC=Na;M.zoneAbbr=M_;M.zoneName=E_;M.dates=ze("dates accessor is deprecated. Use date instead.",Ka);M.months=ze("months accessor is deprecated. Use month instead",Ta);M.years=ze("years accessor is deprecated. Use year instead",wa);M.zone=ze("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",cf);M.isDSTShifted=ze("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mf);function P_(t){return he(t*1e3)}function C_(){return he.apply(null,arguments).parseZone()}function Qa(t){return t}var X=un.prototype;X.calendar=mh;X.longDateFormat=vh;X.invalidDate=wh;X.ordinal=Sh;X.preparse=Qa;X.postformat=Qa;X.relativeTime=Th;X.pastFuture=Dh;X.set=fh;X.eras=r_;X.erasParse=n_;X.erasConvertYear=i_;X.erasAbbrRegex=h_;X.erasNameRegex=u_;X.erasNarrowRegex=d_;X.months=Bh;X.monthsShort=qh;X.monthsParse=Gh;X.monthsRegex=Kh;X.monthsShortRegex=Jh;X.week=Qh;X.firstDayOfYear=td;X.firstDayOfWeek=ed;X.weekdays=hd;X.weekdaysMin=fd;X.weekdaysShort=dd;X.weekdaysParse=md;X.weekdaysRegex=vd;X.weekdaysShortRegex=yd;X.weekdaysMinRegex=wd;X.isPM=$d;X.meridiem=Td;function Xs(t,e,s,r){var n=pt(),i=it().set(r,e);return n[s](i,t)}function Xa(t,e,s){if(mt(t)&&(e=t,t=void 0),t=t||"",e!=null)return Xs(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=Xs(t,r,s,"month");return n}function Mn(t,e,s,r){typeof t=="boolean"?(mt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,mt(e)&&(s=e,e=void 0),e=e||"");var n=pt(),i=t?n._week.dow:0,a,l=[];if(s!=null)return Xs(e,(s+i)%7,r,"day");for(a=0;a<7;a++)l[a]=Xs(e,(a+i)%7,r,"day");return l}function R_(t,e){return Xa(t,e,"months")}function j_(t,e){return Xa(t,e,"monthsShort")}function A_(t,e,s){return Mn(t,e,s,"weekdays")}function I_(t,e,s){return Mn(t,e,s,"weekdaysShort")}function L_(t,e,s){return Mn(t,e,s,"weekdaysMin")}St("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=G(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});C.lang=ze("moment.lang is deprecated. Use moment.locale instead.",St);C.langData=ze("moment.langData is deprecated. Use moment.localeData instead.",pt);var lt=Math.abs;function x_(){var t=this._data;return this._milliseconds=lt(this._milliseconds),this._days=lt(this._days),this._months=lt(this._months),t.milliseconds=lt(t.milliseconds),t.seconds=lt(t.seconds),t.minutes=lt(t.minutes),t.hours=lt(t.hours),t.months=lt(t.months),t.years=lt(t.years),this}function eo(t,e,s,r){var n=tt(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function Y_(t,e){return eo(this,t,e,1)}function N_(t,e){return eo(this,t,e,-1)}function Ei(t){return t<0?Math.floor(t):Math.ceil(t)}function U_(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,a,l,o;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=Ei(Gr(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=He(t/1e3),r.seconds=n%60,i=He(n/60),r.minutes=i%60,a=He(i/60),r.hours=a%24,e+=He(a/24),o=He(to(e)),s+=o,e-=Ei(Gr(o)),l=He(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function to(t){return t*4800/146097}function Gr(t){return t*146097/4800}function F_(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=Ge(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+to(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(Gr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function gt(t){return function(){return this.as(t)}}var so=gt("ms"),W_=gt("s"),H_=gt("m"),B_=gt("h"),q_=gt("d"),z_=gt("w"),G_=gt("M"),V_=gt("Q"),J_=gt("y"),K_=so;function Z_(){return tt(this)}function Q_(t){return t=Ge(t),this.isValid()?this[t+"s"]():NaN}function xt(t){return function(){return this.isValid()?this._data[t]:NaN}}var X_=xt("milliseconds"),em=xt("seconds"),tm=xt("minutes"),sm=xt("hours"),rm=xt("days"),nm=xt("months"),im=xt("years");function am(){return He(this.days()/7)}var ct=Math.round,Vt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function om(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function lm(t,e,s,r){var n=tt(t).abs(),i=ct(n.as("s")),a=ct(n.as("m")),l=ct(n.as("h")),o=ct(n.as("d")),c=ct(n.as("M")),u=ct(n.as("w")),f=ct(n.as("y")),_=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||a<=1&&["m"]||a<s.m&&["mm",a]||l<=1&&["h"]||l<s.h&&["hh",l]||o<=1&&["d"]||o<s.d&&["dd",o];return s.w!=null&&(_=_||u<=1&&["w"]||u<s.w&&["ww",u]),_=_||c<=1&&["M"]||c<s.M&&["MM",c]||f<=1&&["y"]||["yy",f],_[2]=e,_[3]=+t>0,_[4]=r,om.apply(null,_)}function cm(t){return t===void 0?ct:typeof t=="function"?(ct=t,!0):!1}function um(t,e){return Vt[t]===void 0?!1:e===void 0?Vt[t]:(Vt[t]=e,t==="s"&&(Vt.ss=e-1),!0)}function hm(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Vt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Vt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=lm(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Rr=Math.abs;function Ht(t){return(t>0)-(t<0)||+t}function vr(){if(!this.isValid())return this.localeData().invalidDate();var t=Rr(this._milliseconds)/1e3,e=Rr(this._days),s=Rr(this._months),r,n,i,a,l=this.asSeconds(),o,c,u,f;return l?(r=He(t/60),n=He(r/60),t%=60,r%=60,i=He(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",o=l<0?"-":"",c=Ht(this._months)!==Ht(l)?"-":"",u=Ht(this._days)!==Ht(l)?"-":"",f=Ht(this._milliseconds)!==Ht(l)?"-":"",o+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?f+n+"H":"")+(r?f+r+"M":"")+(t?f+a+"S":"")):"P0D"}var Z=gr.prototype;Z.isValid=rf;Z.abs=x_;Z.add=Y_;Z.subtract=N_;Z.as=F_;Z.asMilliseconds=so;Z.asSeconds=W_;Z.asMinutes=H_;Z.asHours=B_;Z.asDays=q_;Z.asWeeks=z_;Z.asMonths=G_;Z.asQuarters=V_;Z.asYears=J_;Z.valueOf=K_;Z._bubble=U_;Z.clone=Z_;Z.get=Q_;Z.milliseconds=X_;Z.seconds=em;Z.minutes=tm;Z.hours=sm;Z.days=rm;Z.weeks=am;Z.months=nm;Z.years=im;Z.humanize=hm;Z.toISOString=vr;Z.toString=vr;Z.toJSON=vr;Z.locale=Ha;Z.localeData=qa;Z.toIsoString=ze("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vr);Z.lang=Ba;U("X",0,0,"unix");U("x",0,0,"valueOf");x("x",fr);x("X",Ch);ne("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});ne("x",function(t,e,s){s._d=new Date(G(t))});//! moment.js
C.version="2.30.1";hh(he);C.fn=M;C.min=Xd;C.max=ef;C.now=tf;C.utc=it;C.unix=P_;C.months=R_;C.isDate=Ds;C.locale=St;C.invalid=cr;C.duration=tt;C.isMoment=Qe;C.weekdays=A_;C.parseZone=C_;C.localeData=pt;C.isDuration=Us;C.monthsShort=j_;C.weekdaysMin=L_;C.defineLocale=yn;C.updateLocale=Pd;C.locales=Cd;C.weekdaysShort=I_;C.normalizeUnits=Ge;C.relativeTimeRounding=cm;C.relativeTimeThreshold=um;C.calendarFormat=Df;C.prototype=M;C.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function dm(t){let e,s,r,n,i,a,l,o,c,u,f,_;const g=t[4].default,p=tr(g,t,t[3],null);return{c(){e=m("div"),s=m("label"),r=z(t[0]),n=$(),i=m("div"),p&&p.c(),a=$(),l=m("div"),o=m("button"),c=z(t[2]),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-5 col-md-6 col-9"),h(o,"class","w-100 btn btn-outline-primary"),h(l,"class","col-sm-3 col-md-3 col-auto"),h(e,"class","mb-4 row justify-content-center")},m(v,b){P(v,e,b),d(e,s),d(s,r),d(e,n),d(e,i),p&&p.m(i,null),d(e,a),d(e,l),d(l,o),d(o,c),u=!0,f||(_=le(o,"click",t[5]),f=!0)},p(v,[b]){(!u||b&1)&&te(r,v[0]),(!u||b&2)&&h(s,"for",v[1]),p&&p.p&&(!u||b&8)&&rr(p,g,v,v[3],u?sr(g,v[3],b,null):nr(v[3]),null),(!u||b&4)&&te(c,v[2])},i(v){u||(k(p,v),u=!0)},o(v){S(p,v),u=!1},d(v){v&&E(e),p&&p.d(v),f=!1,_()}}}function fm(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e,{button:l}=e;function o(c){jr.call(this,t,c)}return t.$$set=c=>{"label"in c&&s(0,i=c.label),"id"in c&&s(1,a=c.id),"button"in c&&s(2,l=c.button),"$$scope"in c&&s(3,n=c.$$scope)},[i,a,l,n,r,o]}class _m extends ae{constructor(e){super(),ie(this,e,fm,dm,re,{label:0,id:1,button:2})}}function mm(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("div"),r=m("b"),n=z(t[0]),i=z(":"),a=$(),l=m("div"),o=z(t[1]),h(s,"class","col-sm-4 col-md-4"),h(l,"class","col-sm-8 col-md-8"),h(e,"class","mb-2 row")},m(c,u){P(c,e,u),d(e,s),d(s,r),d(r,n),d(r,i),d(e,a),d(e,l),d(l,o)},p(c,[u]){u&1&&te(n,c[0]),u&2&&te(o,c[1])},i:R,o:R,d(c){c&&E(e)}}}function pm(t,e,s){let{key:r}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&s(0,r=i.key),"value"in i&&s(1,n=i.value)},[r,n]}class Bt extends ae{constructor(e){super(),ie(this,e,pm,mm,re,{key:0,value:1})}}function gm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=$(),n=m("div"),n.textContent="Cannot Find Reservation",h(e,"class",s="form-control "+t[8]),h(e,"type","number"),h(e,"id","reserve"),h(n,"class","invalid-feedback")},m(l,o){P(l,e,o),$e(e,t[3]),P(l,r,o),P(l,n,o),i||(a=[le(e,"input",t[13]),le(e,"keyup",t[14])],i=!0)},p(l,o){o&256&&s!==(s="form-control "+l[8])&&h(e,"class",s),o&8&&Ni(e.value)!==l[3]&&$e(e,l[3])},d(l){l&&(E(e),E(r),E(n)),i=!1,xe(a)}}}function bm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=$(),n=m("div"),n.textContent="Cannot Find Student",h(e,"class",s="form-control "+t[9]),h(e,"type","text"),h(e,"id","book-name"),h(n,"class","invalid-feedback")},m(l,o){P(l,e,o),$e(e,t[4]),P(l,r,o),P(l,n,o),i||(a=[le(e,"input",t[16]),le(e,"keyup",t[17])],i=!0)},p(l,o){o&512&&s!==(s="form-control "+l[9])&&h(e,"class",s),o&16&&e.value!==l[4]&&$e(e,l[4])},d(l){l&&(E(e),E(r),E(n)),i=!1,xe(a)}}}function vm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=$(),n=m("div"),n.textContent="Cannot Find Book",h(e,"class",s="form-control "+t[10]),h(e,"type","text"),h(e,"id","book-barcode"),h(n,"class","invalid-feedback")},m(l,o){P(l,e,o),$e(e,t[5]),P(l,r,o),P(l,n,o),i||(a=[le(e,"input",t[18]),le(e,"keyup",t[19])],i=!0)},p(l,o){o&1024&&s!==(s="form-control "+l[10])&&h(e,"class",s),o&32&&e.value!==l[5]&&$e(e,l[5])},d(l){l&&(E(e),E(r),E(n)),i=!1,xe(a)}}}function Pi(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w;return n=new Bt({props:{key:"Borrow ID",value:"-- Preview --"}}),a=new Bt({props:{key:"Name",value:t[6]}}),o=new Bt({props:{key:"Book Title",value:t[7]+" ("+t[5]+")"}}),u=new Bt({props:{key:"Staff Name",value:"Francis James E. Salles (153827)"}}),_=new Bt({props:{key:"Borrow Date",value:C(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new Bt({props:{key:"Return Due",value:C(t[1]).format("MMMM DD, YYYY")+" ("+C(t[1]).subtract(t[0],"days").format("DD")+" days)"}}),{c(){e=m("div"),s=m("h3"),s.textContent="Borrow Preview",r=$(),L(n.$$.fragment),i=$(),L(a.$$.fragment),l=$(),L(o.$$.fragment),c=$(),L(u.$$.fragment),f=$(),L(_.$$.fragment),g=$(),L(p.$$.fragment),v=$(),b=m("div"),b.innerHTML='<button class="btn btn-secondary"><i class="bi bi-arrow-up-circle"></i> Borrow</button>',h(s,"class","py-4 text-center"),h(b,"class","float-end my-2"),h(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(y,T){P(y,e,T),d(e,s),d(e,r),A(n,e,null),d(e,i),A(a,e,null),d(e,l),A(o,e,null),d(e,c),A(u,e,null),d(e,f),A(_,e,null),d(e,g),A(p,e,null),d(e,v),d(e,b),w=!0},p(y,T){const D={};T&64&&(D.value=y[6]),a.$set(D);const O={};T&160&&(O.value=y[7]+" ("+y[5]+")"),o.$set(O);const j={};T&1&&(j.value=C(y[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(j);const Y={};T&3&&(Y.value=C(y[1]).format("MMMM DD, YYYY")+" ("+C(y[1]).subtract(y[0],"days").format("DD")+" days)"),p.$set(Y)},i(y){w||(k(n.$$.fragment,y),k(a.$$.fragment,y),k(o.$$.fragment,y),k(u.$$.fragment,y),k(_.$$.fragment,y),k(p.$$.fragment,y),w=!0)},o(y){S(n.$$.fragment,y),S(a.$$.fragment,y),S(o.$$.fragment,y),S(u.$$.fragment,y),S(_.$$.fragment,y),S(p.$$.fragment,y),w=!1},d(y){y&&E(e),I(n),I(a),I(o),I(u),I(_),I(p)}}}function ym(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y,T,D,O,j,Y,F,V,N,H,ve,pe,ge,ye,Me,fe,Se,Ee,Re,we,W,J,je,ot;s=new Lt({props:{text:"Borrow Book"}}),a=new _m({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[gm]},$$scope:{ctx:t}}}),a.$on("click",t[15]),u=new We({props:{label:"Student ID:",id:"book-name",$$slots:{default:[bm]},$$scope:{ctx:t}}}),_=new We({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[vm]},$$scope:{ctx:t}}});let _e=t[2]&&Pi(t);return{c(){e=m("main"),L(s.$$.fragment),r=$(),n=m("div"),i=m("div"),L(a.$$.fragment),l=$(),o=m("hr"),c=$(),L(u.$$.fragment),f=$(),L(_.$$.fragment),g=$(),p=m("div"),v=m("label"),v.textContent="Borrow Date:",b=$(),w=m("div"),y=m("input"),T=$(),D=m("div"),O=m("button"),O.textContent="Today",j=$(),Y=m("div"),F=m("label"),F.textContent="Return Due:",V=$(),N=m("div"),H=m("input"),pe=$(),ge=m("div"),ye=m("button"),ye.textContent=`~${Vr} Days`,Me=$(),fe=m("div"),Se=m("button"),Se.innerHTML='<i class="bi bi-receipt"></i> Preview',Ee=$(),Re=m("a"),Re.innerHTML='<i class="bi bi-x-circle"></i> Cancel',we=$(),_e&&_e.c(),h(o,"class","mb-4"),h(v,"class","col-sm-4 col-md-3 col-form-label"),h(v,"for","borrow-date"),h(y,"class","form-control"),h(y,"type","datetime-local"),h(y,"id","borrow-date"),h(w,"class","col-sm-5 col-md-6 col-7"),h(O,"class","w-100 btn btn-outline-primary"),h(D,"class","col-sm-3 col-md-3 col-auto"),h(p,"class","mb-4 row justify-content-center"),h(F,"class","col-sm-4 col-md-3 col-form-label"),h(F,"for","return-date"),h(H,"class","form-control"),h(H,"type","date"),h(H,"id","return-date"),h(H,"min",ve=C(t[0]).format("YYYY-MM-DD")),h(N,"class","col-sm-5 col-md-6 col-7"),h(ye,"class","w-100 btn btn-outline-primary"),h(ge,"class","col-sm-3 col-md-3 col-auto"),h(Y,"class","mb-4 row justify-content-center"),h(Se,"class","btn btn-success"),h(Re,"href","./#/"),h(Re,"class","btn btn-danger"),h(fe,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-around"),h(e,"class","container")},m(ee,se){P(ee,e,se),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),d(i,o),d(i,c),A(u,i,null),d(i,f),A(_,i,null),d(i,g),d(i,p),d(p,v),d(p,b),d(p,w),d(w,y),$e(y,t[0]),d(p,T),d(p,D),d(D,O),d(i,j),d(i,Y),d(Y,F),d(Y,V),d(Y,N),d(N,H),$e(H,t[1]),d(Y,pe),d(Y,ge),d(ge,ye),d(i,Me),d(i,fe),d(fe,Se),d(fe,Ee),d(fe,Re),d(n,we),_e&&_e.m(n,null),J=!0,je||(ot=[le(y,"input",t[20]),le(O,"click",t[21]),le(H,"input",t[22]),le(ye,"click",t[23]),le(Se,"click",t[24])],je=!0)},p(ee,[se]){const be={};se&134217992&&(be.$$scope={dirty:se,ctx:ee}),a.$set(be);const ke={};se&134218256&&(ke.$$scope={dirty:se,ctx:ee}),u.$set(ke);const Ie={};se&134218784&&(Ie.$$scope={dirty:se,ctx:ee}),_.$set(Ie),se&1&&$e(y,ee[0]),(!J||se&1&&ve!==(ve=C(ee[0]).format("YYYY-MM-DD")))&&h(H,"min",ve),se&2&&$e(H,ee[1]),ee[2]?_e?(_e.p(ee,se),se&4&&k(_e,1)):(_e=Pi(ee),_e.c(),k(_e,1),_e.m(n,null)):_e&&(ce(),S(_e,1,1,()=>{_e=null}),ue())},i(ee){J||(k(s.$$.fragment,ee),k(a.$$.fragment,ee),k(u.$$.fragment,ee),k(_.$$.fragment,ee),k(_e),ee&&(W||Ae(()=>{W=Xe(e,et,{duration:500}),W.start()})),J=!0)},o(ee){S(s.$$.fragment,ee),S(a.$$.fragment,ee),S(u.$$.fragment,ee),S(_.$$.fragment,ee),S(_e),J=!1},d(ee){ee&&E(e),I(s),I(a),I(u),I(_),_e&&_e.d(),je=!1,xe(ot)}}}const Vr=14;function wm(t,e,s){let r;Ai(t,Io,ge=>s(25,r=ge));const n=C().format("YYYY-MM-DD HH:mm");let i=n,a=C(n).add(Vr,"days").format("YYYY-MM-DD"),l=!1,o,c,u;const f=new URLSearchParams(r);o=f.get("reserve_id")||"",u=f.get("barcode")||"";let _,g,p,v,b;async function w(){const{data:ge,error:ye}=await Ne.from("account_details").select("fname, lname").eq("user_id",c).single();ye?s(9,v="is-invalid"):s(6,_=`${ge.fname} ${ge.lname}`);const{data:Me,error:fe}=await Ne.from("library_holdings").select("books(title)").eq("barcode",u).single();fe||!Me?s(10,b="is-invalid"):s(7,g=Me.books.title),s(2,l=!l)}function y(){o=Ni(this.value),s(3,o)}const T=()=>s(8,p=""),D=()=>alert("Something");function O(){c=this.value,s(4,c)}const j=()=>s(9,v="");function Y(){u=this.value,s(5,u)}const F=()=>s(10,b="");function V(){i=this.value,s(0,i)}const N=()=>s(0,i=n);function H(){a=this.value,s(1,a)}return[i,a,l,o,c,u,_,g,p,v,b,n,w,y,T,D,O,j,Y,F,V,N,H,()=>s(1,a=C(i).add(Vr,"days").format("YYYY-MM-DD")),()=>{w()}]}class km extends ae{constructor(e){super(),ie(this,e,wm,ym,re,{})}}function $m(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-id")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Sm(t){let e,s,r,n,i;return{c(){e=m("select"),s=m("option"),s.textContent="New",r=m("option"),r.textContent="Good",n=m("option"),n.textContent="Fair",i=m("option"),i.textContent="Poor",s.__value="New",$e(s,s.__value),r.__value="Good",$e(r,r.__value),n.__value="Fair",$e(n,n.__value),i.__value="Poor",$e(i,i.__value),h(e,"class","form-select"),h(e,"id","book-condition")},m(a,l){P(a,e,l),d(e,s),d(e,r),d(e,n),d(e,i)},p:R,d(a){a&&E(e)}}}function Om(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"rows","3"),h(e,"id","book-note")},m(s,r){P(s,e,r)},p:R,d(s){s&&E(e)}}}function Tm(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,v,b,w,y,T,D,O,j,Y,F,V;return s=new Lt({props:{text:"Return Book"}}),a=new We({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[$m]},$$scope:{ctx:t}}}),o=new We({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Sm]},$$scope:{ctx:t}}}),u=new We({props:{label:"Note:",id:"book-note",$$slots:{default:[Om]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=$(),n=m("div"),i=m("div"),L(a.$$.fragment),l=$(),L(o.$$.fragment),c=$(),L(u.$$.fragment),f=$(),_=m("div"),g=m("label"),g.textContent="Return Time:",p=$(),v=m("div"),b=m("input"),w=$(),y=m("div"),T=m("button"),T.textContent="Today",D=$(),O=m("div"),O.innerHTML='<button class="btn btn-success"><i class="bi bi-arrow-down-circle"></i> Return</button> <a href="./#/" class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</a>',h(g,"class","col-sm-4 col-md-3 col-form-label"),h(g,"for","return-time"),h(b,"class","form-control"),h(b,"type","datetime-local"),h(b,"id","return-time"),h(v,"class","col-sm-5 col-md-6 col-7"),h(T,"class","w-100 btn btn-outline-primary"),h(y,"class","col-sm-3 col-md-3 col-auto"),h(_,"class","mb-4 row justify-content-center"),h(O,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(e,"class","container")},m(N,H){P(N,e,H),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,v),d(v,b),$e(b,t[0]),d(_,w),d(_,y),d(y,T),d(i,D),d(i,O),Y=!0,F||(V=[le(b,"input",t[2]),le(T,"click",_o(t[3]))],F=!0)},p(N,[H]){const ve={};H&32&&(ve.$$scope={dirty:H,ctx:N}),a.$set(ve);const pe={};H&32&&(pe.$$scope={dirty:H,ctx:N}),o.$set(pe);const ge={};H&32&&(ge.$$scope={dirty:H,ctx:N}),u.$set(ge),H&1&&$e(b,N[0])},i(N){Y||(k(s.$$.fragment,N),k(a.$$.fragment,N),k(o.$$.fragment,N),k(u.$$.fragment,N),N&&(j||Ae(()=>{j=Xe(e,et,{duration:500}),j.start()})),Y=!0)},o(N){S(s.$$.fragment,N),S(a.$$.fragment,N),S(o.$$.fragment,N),S(u.$$.fragment,N),Y=!1},d(N){N&&E(e),I(s),I(a),I(o),I(u),F=!1,xe(V)}}}function Dm(t,e,s){let r=C().format("YYYY-MM-DD HH:mm"),n=r;C(r).add(5,"days").format("YYYY-MM-DD");function i(){n=this.value,s(0,n)}return[n,r,i,()=>s(0,n=r)]}class Mm extends ae{constructor(e){super(),ie(this,e,Dm,Tm,re,{})}}function Em(t){let e,s;return{c(){e=m("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',h(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),At(e,"height","70vh")},m(r,n){P(r,e,n)},p:R,i(r){r&&(s||Ae(()=>{s=Xe(e,et,{duration:500}),s.start()}))},o:R,d(r){r&&E(e)}}}class ro extends ae{constructor(e){super(),ie(this,e,null,Em,re,{})}}function Pm(t){let e,s;return e=new Qr({props:{routes:{"*":uh}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},i(r){s||(k(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Cm(t){let e,s,r,n;return e=new Vi({}),r=new Qr({props:{routes:{"/":eh,"/book/:bookID":ca,"/author/:authorID":ua,"/publisher/:publisherID":ha,"/search":Qt,"/search/author":Qt,"/search/publisher":Qt,"/add-book":ju,"/borrow":km,"/return":Mm,"*":ro}}}),{c(){L(e.$$.fragment),s=$(),L(r.$$.fragment)},m(i,a){A(e,i,a),P(i,s,a),A(r,i,a),n=!0},i(i){n||(k(e.$$.fragment,i),k(r.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),S(r.$$.fragment,i),n=!1},d(i){i&&E(s),I(e,i),I(r,i)}}}function Rm(t){let e,s,r,n;return e=new Vi({}),r=new Qr({props:{routes:{"/":tu,"/book/:bookID":ca,"/author/:authorID":ua,"/publisher/:publisherID":ha,"/search":Qt,"/search/author":Qt,"/search/publisher":Qt,"*":ro}}}),{c(){L(e.$$.fragment),s=$(),L(r.$$.fragment)},m(i,a){A(e,i,a),P(i,s,a),A(r,i,a),n=!0},i(i){n||(k(e.$$.fragment,i),k(r.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),S(r.$$.fragment,i),n=!1},d(i){i&&E(s),I(e,i),I(r,i)}}}function jm(t){let e,s,r,n;const i=[Rm,Cm,Pm],a=[];function l(o,c){return o[0]=="client"?0:o[0]=="staff"?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=qe()},m(o,c){a[e].m(o,c),P(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e!==u&&(ce(),S(a[u],1,1,()=>{a[u]=null}),ue(),s=a[e],s||(s=a[e]=i[e](o),s.c()),k(s,1),s.m(r.parentNode,r))},i(o){n||(k(s),n=!0)},o(o){S(s),n=!1},d(o){o&&E(r),a[e].d(o)}}}function Am(t,e,s){let r;return ss.subscribe(n=>{s(0,r=n);const i=r=="staff"?"153827":r=="client"?"263690":"";Eo.set(i),localStorage.setItem("user_id",i)}),[r]}class Im extends ae{constructor(e){super(),ie(this,e,Am,jm,re,{})}}new Im({target:document.getElementById("app")})});export default Lm();
