var go=Object.defineProperty;var bo=(t,e,s)=>e in t?go(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var vo=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var kr=(t,e,s)=>(bo(t,typeof e!="symbol"?e+"":e,s),s);var fp=vo((pp,Gs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function P(){}const Vi=t=>t;function ws(t,e){for(const s in e)t[s]=e[s];return t}function yo(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function zi(t){return t()}function Fn(){return Object.create(null)}function $e(t){t.forEach(zi)}function ir(t){return typeof t=="function"}function ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Is;function Fe(t,e){return t===e?!0:(Is||(Is=document.createElement("a")),Is.href=e,t===Is.href)}function wo(t){return Object.keys(t).length===0}function Gi(t,...e){if(t==null){for(const r of e)r(void 0);return P}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function Ji(t,e,s){t.$$.on_destroy.push(Gi(e,s))}function Zr(t,e,s,r){if(t){const n=Ki(t,e,s,r);return t[0](n)}}function Ki(t,e,s,r){return t[1]&&r?ws(s.ctx.slice(),t[1](r(e))):s.ctx}function Qr(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],a=Math.max(e.dirty.length,n.length);for(let l=0;l<a;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function Xr(t,e,s,r,n,i){if(n){const a=Ki(e,s,r,i);t.p(a,n)}}function en(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}const Zi=typeof window<"u";let ko=Zi?()=>window.performance.now():()=>Date.now(),tn=Zi?t=>requestAnimationFrame(t):P;const Qt=new Set;function Qi(t){Qt.forEach(e=>{e.c(t)||(Qt.delete(e),e.f())}),Qt.size!==0&&tn(Qi)}function $o(t){let e;return Qt.size===0&&tn(Qi),{promise:new Promise(s=>{Qt.add(e={c:t,f:s})}),abort(){Qt.delete(e)}}}function d(t,e){t.appendChild(e)}function Xi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function So(t){const e=m("style");return e.textContent="/* empty */",Oo(Xi(t),e),e.sheet}function Oo(t,e){return d(t.head||t,e),e.sheet}function M(t,e,s){t.insertBefore(e,s||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function Ze(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function m(t){return document.createElement(t)}function te(t){return document.createTextNode(t)}function k(){return te(" ")}function Be(){return te("")}function H(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function To(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function ar(t){return t===""?null:+t}function Do(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function z(t,e){t.value=e??""}function Nt(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function ea(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function Js(t,e){return new t(e)}const Ks=new Map;let Zs=0;function Mo(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function Eo(t,e){const s={stylesheet:So(e),rules:{}};return Ks.set(t,s),s}function Po(t,e,s,r,n,i,a,l=0){const o=16.666/r;let c=`{
`;for(let v=0;v<=1;v+=o){const y=e+(s-e)*i(v);c+=v*100+`%{${a(y,1-y)}}
`}const u=c+`100% {${a(s,1-s)}}
}`,f=`__svelte_${Mo(u)}_${l}`,_=Xi(t),{stylesheet:g,rules:p}=Ks.get(_)||Eo(_,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${r}ms linear ${n}ms 1 both`,Zs+=1,f}function Wn(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),Zs-=n,Zs||Co())}function Co(){tn(()=>{Zs||(Ks.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&D(e)}),Ks.clear())})}let ks;function ft(t){ks=t}function Es(){if(!ks)throw new Error("Function called outside component initialization");return ks}function $s(t){Es().$$.on_mount.push(t)}function Ro(t){Es().$$.after_update.push(t)}function jo(t){Es().$$.on_destroy.push(t)}function Ao(){const t=Es();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=ea(e,s,{cancelable:r});return n.slice().forEach(a=>{a.call(t,i)}),!i.defaultPrevented}return!0}}function Ir(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const Gt=[],is=[];let Xt=[];const Hn=[],ta=Promise.resolve();let Lr=!1;function sa(){Lr||(Lr=!0,ta.then(sn))}function ra(){return sa(),ta}function Ye(t){Xt.push(t)}const $r=new Set;let Ft=0;function sn(){if(Ft!==0)return;const t=ks;do{try{for(;Ft<Gt.length;){const e=Gt[Ft];Ft++,ft(e),Io(e.$$)}}catch(e){throw Gt.length=0,Ft=0,e}for(ft(null),Gt.length=0,Ft=0;is.length;)is.pop()();for(let e=0;e<Xt.length;e+=1){const s=Xt[e];$r.has(s)||($r.add(s),s())}Xt.length=0}while(Gt.length);for(;Hn.length;)Hn.pop()();Lr=!1,$r.clear(),ft(t)}function Io(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ye)}}function Lo(t){const e=[],s=[];Xt.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),Xt=e}let fs;function Yo(){return fs||(fs=Promise.resolve(),fs.then(()=>{fs=null})),fs}function qn(t,e,s){t.dispatchEvent(ea(`intro${s}`))}const Ws=new Set;let At;function De(){At={r:0,c:[],p:At}}function Me(){At.r||$e(At.c),At=At.p}function $(t,e){t&&t.i&&(Ws.delete(t),t.i(e))}function S(t,e,s,r){if(t&&t.o){if(Ws.has(t))return;Ws.add(t),At.c.push(()=>{Ws.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const No={duration:0};function Ve(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,a,l,o=0;function c(){a&&Wn(t,a)}function u(){const{delay:_=0,duration:g=300,easing:p=Vi,tick:b=P,css:v}=n||No;v&&(a=Po(t,0,1,g,_,p,v,o++)),b(0,1);const y=ko()+_,w=y+g;l&&l.abort(),i=!0,Ye(()=>qn(t,!0,"start")),l=$o(O=>{if(i){if(O>=w)return b(1,0),qn(t,!0,"end"),c(),i=!1;if(O>=y){const E=p((O-y)/g);b(E,1-E)}}return i})}let f=!1;return{start(){f||(f=!0,Wn(t),ir(n)?(n=n(r),Yo().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Hs(t,e){const s=e.token={};function r(n,i,a,l){if(e.token!==s)return;e.resolved=l;let o=e.ctx;a!==void 0&&(o=o.slice(),o[a]=l);const c=n&&(e.current=n)(o);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==i&&f&&(De(),S(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),Me())}):e.block.d(1),c.c(),$(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&sn()}if(yo(t)){const n=Es();if(t.then(i=>{ft(n),r(e.then,1,e.value,i),ft(null)},i=>{if(ft(n),r(e.catch,2,e.error,i),ft(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function qs(t,e,s){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,s)}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Qs(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const a=t[i],l=e[i];if(l){for(const o in a)o in l||(r[o]=1);for(const o in l)n[o]||(s[o]=l[o],n[o]=1);t[i]=l}else for(const o in a)n[o]=1}for(const a in r)a in s||(s[a]=void 0);return s}function Xs(t){return typeof t=="object"&&t!==null?t:{}}function Y(t){t&&t.c()}function I(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),Ye(()=>{const i=t.$$.on_mount.map(zi).filter(ir);t.$$.on_destroy?t.$$.on_destroy.push(...i):$e(i),t.$$.on_mount=[]}),n.forEach(Ye)}function L(t,e){const s=t.$$;s.fragment!==null&&(Lo(s.after_update),$e(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function xo(t,e){t.$$.dirty[0]===-1&&(Gt.push(t),sa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,s,r,n,i,a=null,l=[-1]){const o=ks;ft(t);const c=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:n,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Fn(),dirty:l,skip_bound:!1,root:e.target||o.$$.root};a&&a(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(f,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&xo(t,f)),_}):[],c.update(),u=!0,$e(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=Do(e.target);c.fragment&&c.fragment.l(f),f.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&$(t.$$.fragment),I(t,e.target,e.anchor),sn()}ft(o)}class pe{constructor(){kr(this,"$$");kr(this,"$$set")}$destroy(){L(this,1),this.$destroy=P}$on(e,s){if(!ir(s))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!wo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Uo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Uo);const Wt=[];function na(t,e){return{subscribe:or(t,e).subscribe}}function or(t,e=P){let s;const r=new Set;function n(l){if(ue(t,l)&&(t=l,s)){const o=!Wt.length;for(const c of r)c[1](),Wt.push(c,t);if(o){for(let c=0;c<Wt.length;c+=2)Wt[c][0](Wt[c+1]);Wt.length=0}}}function i(l){n(l(t))}function a(l,o=P){const c=[l,o];return r.add(c),r.size===1&&(s=e(n,i)||P),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:a}}function ia(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return na(s,(a,l)=>{let o=!1;const c=[];let u=0,f=P;const _=()=>{if(u)return;f();const p=e(r?c[0]:c,a,l);i?a(p):f=ir(p)?p:P},g=n.map((p,b)=>Gi(p,v=>{c[b]=v,u&=~(1<<b),o&&_()},()=>{u|=1<<b}));return o=!0,_(),function(){$e(g),f(),o=!1}})}const as=or(localStorage.getItem("accType")),Fo=or(localStorage.getItem("user_id"));function Wo(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,a=[],l="",o=t.split("/");for(o[0]||o.shift();n=o.shift();)s=n[0],s==="*"?(a.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+"/?$","i")}}function Ho(t){let e,s,r;const n=[t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ws(c,n[u]);return o!==void 0&&o&4&&(c=ws(c,Qs(n,[Xs(l[2])]))),{props:c}}return i&&(e=Js(i,a(t)),e.$on("routeEvent",t[7])),{c(){e&&Y(e.$$.fragment),s=Be()},m(l,o){e&&I(e,l,o),M(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){De();const c=e;S(c.$$.fragment,1,0,()=>{L(c,1)}),Me()}i?(e=Js(i,a(l,o)),e.$on("routeEvent",l[7]),Y(e.$$.fragment),$(e.$$.fragment,1),I(e,s.parentNode,s)):e=null}else if(i){const c=o&4?Qs(n,[Xs(l[2])]):{};e.$set(c)}},i(l){r||(e&&$(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&D(s),e&&L(e,l)}}}function qo(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ws(c,n[u]);return o!==void 0&&o&6&&(c=ws(c,Qs(n,[o&2&&{params:l[1]},o&4&&Xs(l[2])]))),{props:c}}return i&&(e=Js(i,a(t)),e.$on("routeEvent",t[6])),{c(){e&&Y(e.$$.fragment),s=Be()},m(l,o){e&&I(e,l,o),M(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){De();const c=e;S(c.$$.fragment,1,0,()=>{L(c,1)}),Me()}i?(e=Js(i,a(l,o)),e.$on("routeEvent",l[6]),Y(e.$$.fragment),$(e.$$.fragment,1),I(e,s.parentNode,s)):e=null}else if(i){const c=o&6?Qs(n,[o&2&&{params:l[1]},o&4&&Xs(l[2])]):{};e.$set(c)}},i(l){r||(e&&$(e.$$.fragment,l),r=!0)},o(l){e&&S(e.$$.fragment,l),r=!1},d(l){l&&D(s),e&&L(e,l)}}}function Bo(t){let e,s,r,n;const i=[qo,Ho],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e===u?a[e].p(o,c):(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function Bn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const rn=na(null,function(e){e(Bn());const s=()=>{e(Bn())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),Vo=ia(rn,t=>t.location),zo=ia(rn,t=>t.querystring),Vn=or(void 0);async function Go(){await ra(),window.history.back()}function Jo(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Ko(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class a{constructor(T,C){if(!C||typeof C!="function"&&(typeof C!="object"||C._sveltesparouter!==!0))throw Error("Invalid component object");if(!T||typeof T=="string"&&(T.length<1||T.charAt(0)!="/"&&T.charAt(0)!="*")||typeof T=="object"&&!(T instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:x,keys:j}=Wo(T);this.path=T,typeof C=="object"&&C._sveltesparouter===!0?(this.component=C.component,this.conditions=C.conditions||[],this.userData=C.userData,this.props=C.props||{}):(this.component=()=>Promise.resolve(C),this.conditions=[],this.props={}),this._pattern=x,this._keys=j}match(T){if(n){if(typeof n=="string")if(T.startsWith(n))T=T.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const W=T.match(n);if(W&&W[0])T=T.substr(W[0].length)||"/";else return null}}const C=this._pattern.exec(T);if(C===null)return null;if(this._keys===!1)return C;const x={};let j=0;for(;j<this._keys.length;){try{x[this._keys[j]]=decodeURIComponent(C[j+1]||"")||null}catch{x[this._keys[j]]=null}j++}return x}async checkConditions(T){for(let C=0;C<this.conditions.length;C++)if(!await this.conditions[C](T))return!1;return!0}}const l=[];r instanceof Map?r.forEach((E,T)=>{l.push(new a(T,E))}):Object.keys(r).forEach(E=>{l.push(new a(E,r[E]))});let o=null,c=null,u={};const f=Ao();async function _(E,T){await ra(),f(E,T)}let g=null,p=null;i&&(p=E=>{E.state&&(E.state.__svelte_spa_router_scrollY||E.state.__svelte_spa_router_scrollX)?g=E.state:g=null},window.addEventListener("popstate",p),Ro(()=>{Jo(g)}));let b=null,v=null;const y=rn.subscribe(async E=>{b=E;let T=0;for(;T<l.length;){const C=l[T].match(E.location);if(!C){T++;continue}const x={route:l[T].path,location:E.location,querystring:E.querystring,userData:l[T].userData,params:C&&typeof C=="object"&&Object.keys(C).length?C:null};if(!await l[T].checkConditions(x)){s(0,o=null),v=null,_("conditionsFailed",x);return}_("routeLoading",Object.assign({},x));const j=l[T].component;if(v!=j){j.loading?(s(0,o=j.loading),v=j,s(1,c=j.loadingParams),s(2,u={}),_("routeLoaded",Object.assign({},x,{component:o,name:o.name,params:c}))):(s(0,o=null),v=null);const W=await j();if(E!=b)return;s(0,o=W&&W.default||W),v=j}C&&typeof C=="object"&&Object.keys(C).length?s(1,c=C):s(1,c=null),s(2,u=l[T].props),_("routeLoaded",Object.assign({},x,{component:o,name:o.name,params:c})).then(()=>{Vn.set(c)});return}s(0,o=null),v=null,Vn.set(void 0)});jo(()=>{y(),p&&window.removeEventListener("popstate",p)});function w(E){Ir.call(this,t,E)}function O(E){Ir.call(this,t,E)}return t.$$set=E=>{"routes"in E&&s(3,r=E.routes),"prefix"in E&&s(4,n=E.prefix),"restoreScrollState"in E&&s(5,i=E.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[o,c,u,r,n,i,w,O]}class nn extends pe{constructor(e){super(),me(this,e,Ko,Bo,ue,{routes:3,prefix:4,restoreScrollState:5})}}function zn(t){let e;return{c(){e=m("a"),e.textContent="Add book",h(e,"class","nav-link svelte-oup04o"),h(e,"href","./#/add-book")},m(s,r){M(s,e,r)},d(s){s&&D(e)}}}function Zo(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E=localStorage.getItem("user_id")+"",T,C,x,j,W,U,V,K,Z,he,G,N,B,le,be,Ee,de,ve=t[0]=="staff"&&zn();return{c(){e=m("nav"),s=m("div"),r=m("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=k(),i=m("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',a=k(),l=m("div"),o=m("div"),c=m("a"),c.textContent="Books",u=k(),f=m("a"),f.textContent="Authors",_=k(),g=m("a"),g.textContent="Publishers",p=k(),ve&&ve.c(),b=k(),v=m("li"),y=m("a"),w=m("i"),O=k(),T=te(E),C=k(),x=m("ul"),j=m("li"),j.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Profile</a>',W=k(),U=m("li"),U.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Settings</a>',V=k(),K=m("li"),K.innerHTML='<hr class="dropdown-divider"/>',Z=k(),he=m("li"),G=m("a"),G.textContent="Log Out",N=k(),B=m("button"),le=m("span"),h(r,"class","navbar-brand m-0 svelte-oup04o"),h(r,"href","./#/"),h(i,"class","navbar-toggler"),h(i,"type","button"),h(i,"data-bs-toggle","collapse"),h(i,"data-bs-target","#navbarContent"),h(c,"class","nav-link svelte-oup04o"),h(c,"href","./#/search"),h(f,"class","nav-link svelte-oup04o"),h(f,"href","./#/search/author"),h(g,"class","nav-link svelte-oup04o"),h(g,"href","./#/search/publisher"),h(w,"class","bi bi-person-fill"),h(y,"class","nav-link dropdown-toggle svelte-oup04o"),h(y,"href","#"),h(y,"role","button"),h(y,"data-bs-toggle","dropdown"),h(y,"aria-expanded","false"),h(G,"class","dropdown-item text-danger"),h(G,"href","./#/"),h(x,"class","dropdown-menu"),h(v,"class","nav-item dropdown"),h(le,"class",be="bi bi-"+t[1]+" svelte-oup04o"),h(B,"title","Switch theme"),h(B,"class","px-1 border-0 bg-transparent nav-link svelte-oup04o"),h(o,"class","navbar-nav ms-auto svelte-oup04o"),h(l,"class","collapse navbar-collapse"),h(l,"id","navbarContent"),h(s,"class","container px-4 fw-semibold"),h(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(Le,Re){M(Le,e,Re),d(e,s),d(s,r),d(s,n),d(s,i),d(s,a),d(s,l),d(l,o),d(o,c),d(o,u),d(o,f),d(o,_),d(o,g),d(o,p),ve&&ve.m(o,null),d(o,b),d(o,v),d(v,y),d(y,w),d(y,O),d(y,T),d(v,C),d(v,x),d(x,j),d(x,W),d(x,U),d(x,V),d(x,K),d(x,Z),d(x,he),d(he,G),d(o,N),d(o,B),d(B,le),Ee||(de=[H(G,"click",t[3]),H(B,"click",t[2])],Ee=!0)},p(Le,[Re]){Le[0]=="staff"?ve||(ve=zn(),ve.c(),ve.m(o,b)):ve&&(ve.d(1),ve=null),Re&2&&be!==(be="bi bi-"+Le[1]+" svelte-oup04o")&&h(le,"class",be)},i:P,o:P,d(Le){Le&&D(e),ve&&ve.d(),Ee=!1,$e(de)}}}function Qo(t,e,s){let r,n;as.subscribe(o=>s(0,n=o));let i=localStorage.getItem("theme")||"light";function a(){s(4,i=i=="light"?"dark":"light"),localStorage.setItem("theme",i)}function l(){as.set(""),localStorage.removeItem("accType")}return t.$$.update=()=>{t.$$.dirty&16&&document.querySelector("body").setAttribute("data-bs-theme",i),t.$$.dirty&16&&s(1,r=i=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,r,a,l,i]}class aa extends pe{constructor(e){super(),me(this,e,Qo,Zo,ue,{})}}function Xo(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w;return{c(){e=m("section"),s=m("div"),r=m("div"),n=m("div"),i=m("img"),l=k(),o=m("div"),c=m("img"),f=k(),_=m("div"),g=m("img"),b=k(),v=m("button"),v.innerHTML='<span class="carousel-control-prev-icon"></span>',y=k(),w=m("button"),w.innerHTML='<span class="carousel-control-next-icon"></span>',Fe(i.src,a=Sr)||h(i,"src",a),h(i,"class","d-block w-100"),h(i,"alt","..."),h(n,"class","carousel-item active"),Fe(c.src,u=Sr)||h(c,"src",u),h(c,"class","d-block w-100"),h(c,"alt","..."),h(o,"class","carousel-item"),Fe(g.src,p=Sr)||h(g,"src",p),h(g,"class","d-block w-100"),h(g,"alt","..."),h(_,"class","carousel-item"),h(r,"class","carousel-inner"),h(v,"class","carousel-control-prev"),h(v,"type","button"),h(v,"data-bs-target","#homeAdCarousel"),h(v,"data-bs-slide","prev"),h(w,"class","carousel-control-next"),h(w,"type","button"),h(w,"data-bs-target","#homeAdCarousel"),h(w,"data-bs-slide","next"),h(s,"id","homeAdCarousel"),h(s,"class","carousel slide"),h(s,"data-bs-ride","carousel"),h(s,"data-bs-interval","8000")},m(O,E){M(O,e,E),d(e,s),d(s,r),d(r,n),d(n,i),d(r,l),d(r,o),d(o,c),d(r,f),d(r,_),d(_,g),d(s,b),d(s,v),d(s,y),d(s,w)},p:P,i:P,o:P,d(O){O&&D(e)}}}let Sr="./cover.jpg";class el extends pe{constructor(e){super(),me(this,e,null,Xo,ue,{})}}function tl(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h5"),l=m("a"),o=te(t[1]),u=k(),f=m("small"),_=m("i"),g=k(),p=te(t[2]),Fe(s.src,r=t[3])||h(s,"src",r),h(s,"alt","book cover"),h(s,"class","svelte-1a99e4f"),h(l,"class","stretched-link svelte-1a99e4f"),h(l,"href",c="./#/book/"+t[0]),h(a,"class","card-title"),h(_,"class","bi bi-person"),h(f,"class","card-text"),h(i,"class","card-body"),h(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(b,v){M(b,e,v),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o),d(i,u),d(i,f),d(f,_),d(f,g),d(f,p)},p(b,[v]){v&2&&ce(o,b[1]),v&1&&c!==(c="./#/book/"+b[0])&&h(l,"href",c),v&4&&ce(p,b[2])},i:P,o:P,d(b){b&&D(e)}}}function sl(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e,a=r>4?"./book-cover.png":`./${r}.jpg`;return t.$$set=l=>{"id"in l&&s(0,r=l.id),"title"in l&&s(1,n=l.title),"author"in l&&s(2,i=l.author)},[r,n,i,a]}class lr extends pe{constructor(e){super(),me(this,e,sl,tl,ue,{id:0,title:1,author:2})}}function Gn(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("a"),r=m("button"),n=te(t[3]),i=k(),a=m("i"),h(a,"class","bi bi-arrow-right"),h(r,"class","btn btn-outline-primary btn-sm"),h(s,"href",l="./#/"+t[2]),h(e,"class","align-middle align-self-center")},m(o,c){M(o,e,c),d(e,s),d(s,r),d(r,n),d(r,i),d(r,a)},p(o,c){c&8&&ce(n,o[3]),c&4&&l!==(l="./#/"+o[2])&&h(s,"href",l)},d(o){o&&D(e)}}}function rl(t){let e,s,r,n,i,a,l,o,c,u,f=t[2]!==""&&Gn(t);const _=t[5].default,g=Zr(_,t,t[4],null);return{c(){e=m("section"),s=m("div"),r=m("h4"),n=m("i"),a=k(),l=te(t[0]),o=k(),f&&f.c(),c=k(),g&&g.c(),h(n,"class",i="bi bi-"+t[1]),h(r,"class","my-3"),h(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){M(p,e,b),d(e,s),d(s,r),d(r,n),d(r,a),d(r,l),d(s,o),f&&f.m(s,null),d(e,c),g&&g.m(e,null),u=!0},p(p,[b]){(!u||b&2&&i!==(i="bi bi-"+p[1]))&&h(n,"class",i),(!u||b&1)&&ce(l,p[0]),p[2]!==""?f?f.p(p,b):(f=Gn(p),f.c(),f.m(s,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||b&16)&&Xr(g,_,p,p[4],u?Qr(_,p[4],b,null):en(p[4]),null)},i(p){u||($(g,p),u=!0)},o(p){S(g,p),u=!1},d(p){p&&D(e),f&&f.d(),g&&g.d(p)}}}function nl(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:a}=e,{link:l=""}=e,{linkText:o="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,a=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,o=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class Lt extends pe{constructor(e){super(),me(this,e,nl,rl,ue,{title:0,icon:1,link:2,linkText:3})}}const il="modulepreload",al=function(t){return"/library/"+t},Jn={},os=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=al(l),l in Jn)return;Jn[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":il,o||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),o)return new Promise((f,_)=>{u.addEventListener("load",f),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},ol=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>os(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class an extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class ll extends an{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class cl extends an{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ul extends an{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Yr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Yr||(Yr={}));var hl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class dl{constructor(e,{headers:s={},customFetch:r,region:n=Yr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=ol(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return hl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=s;let l={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(l["x-region"]=o);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(l["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(l["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new ll(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new cl(u);if(!u.ok)throw new ul(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var fl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ls=fl();const _l=ls.fetch,on=ls.fetch.bind(ls),oa=ls.Headers,ml=ls.Request,pl=ls.Response,Ps=Object.freeze(Object.defineProperty({__proto__:null,Headers:oa,Request:ml,Response:pl,default:on,fetch:_l},Symbol.toStringTag,{value:"Module"}));class gl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class bl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=on:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,o;let c=null,u=null,f=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const b=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&b===""?(_=204,g="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((o=c==null?void 0:c.details)===null||o===void 0)&&o.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new gl(c)}return{error:c,data:u,count:f,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,o;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class vl extends bl{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const o=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Jt extends vl{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class yl{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(a.length>0){const l=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jt({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Jt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Jt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const wl="1.15.2",kl={"X-Client-Info":`postgrest-js/${wl}`};class ln{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},kl),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new yl(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ln(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let o;r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(a="POST",o=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Jt({method:a,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const $l="2.9.5",Sl={"X-Client-Info":`realtime-js/${$l}`},Ol="1.0.0",la=1e4,Tl=1e3;var es;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(es||(es={}));var qe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(qe||(qe={}));var tt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tt||(tt={}));var Nr;(function(t){t.websocket="websocket"})(Nr||(Nr={}));var jt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jt||(jt={}));class ca{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Dl{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+n));a=a+n;const o=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class Or{constructor(e,s,r={},n=la){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Kn||(Kn={}));class bs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bs.syncState(this.state,n,i,a),this.pendingDiffs.forEach(o=>{this.state=bs.syncDiff(this.state,o,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=bs.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),a=this.transformState(s),l={},o={};return this.map(i,(c,u)=>{a[c]||(o[c]=u)}),this.map(a,(c,u)=>{const f=i[c];if(f){const _=u.map(v=>v.presence_ref),g=f.map(v=>v.presence_ref),p=u.filter(v=>g.indexOf(v.presence_ref)<0),b=f.filter(v=>_.indexOf(v.presence_ref)<0);p.length>0&&(l[c]=p),b.length>0&&(o[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:o},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,o)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(o),u.length>0){const f=e[l].map(g=>g.presence_ref),_=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,o)}),this.map(a,(l,o)=>{let c=e[l];if(!c)return;const u=o.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,o),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var we;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(we||(we={}));const Zn=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=Ml(a,t,e,n),i),{})},Ml=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,a=s[t];return i&&!r.includes(i)?ua(i,a):xr(a)},ua=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Rl(e,s)}switch(t){case we.bool:return El(e);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return Pl(e);case we.json:case we.jsonb:return Cl(e);case we.timestamp:return jl(e);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return xr(e);default:return xr(e)}},xr=t=>t,El=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Pl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Cl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>ua(e,l))}return t},jl=t=>typeof t=="string"?t.replace(" ","T"):t;var Qn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Qn||(Qn={}));var Xn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Xn||(Xn={}));var ei;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ei||(ei={}));class cn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new Or(this,tt.join,this.params,this.timeout),this.rejoinTimer=new ca(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new bs(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},o={broadcast:i,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,_=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const b=f[p],{filter:{event:v,schema:y,table:w,filter:O}}=b,E=c&&c[p];if(E&&E.event===v&&E.schema===y&&E.table===w&&E.filter===O)g.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(o){return o.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,o;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Or(this,tt.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Or(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:o,leave:c,join:u}=tt;if(r&&[l,o,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,v;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(b=g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(g=>g.callback(_,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,b,v,y,w,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,T=(p=g.filter)===null||p===void 0?void 0:p.event;return E&&((b=s.ids)===null||b===void 0?void 0:b.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const E=(w=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return E==="*"||E===((O=s==null?void 0:s.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:b,table:v,commit_timestamp:y,type:w,errors:O}=p;_=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:y,eventType:w,new:{},old:{},errors:O}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&cn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tt.close,{},e)}_onError(e){this._on(tt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Zn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Zn(e.columns,e.old_record)),s}}const Al=()=>{},Il=typeof WebSocket<"u";class Ll{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Sl,this.params={},this.timeout=la,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Al,this.conn=null,this.sendBuffer=[],this.serializer=new Dl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>os(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:o})=>o(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${Nr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ca(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Il){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Yl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),os(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return jt.Connecting;case es.open:return jt.Open;case es.closing:return jt.Closing;default:return jt.Closed}}isConnected(){return this.connectionState()===jt.Open}channel(e,s={config:{}}){const r=new cn(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(tt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ol}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:a}=s;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(tt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Tl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Yl{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=es.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class un extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Nl extends un{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ti extends un{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var xl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const ha=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>os(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Ul=()=>xl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield os(()=>Promise.resolve().then(()=>Ps),void 0)).Response:Response});var cs=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Tr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Fl=(t,e)=>cs(void 0,void 0,void 0,function*(){const s=yield Ul();t instanceof s?t.json().then(r=>{e(new Nl(Tr(r),t.status||500))}).catch(r=>{e(new ti(Tr(r),r))}):e(new ti(Tr(t),t))}),Wl=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function cr(t,e,s,r,n,i){return cs(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,Wl(e,r,n,i)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>a(o)).catch(o=>Fl(o,l))})})}function Ur(t,e,s,r){return cs(this,void 0,void 0,function*(){return cr(t,"GET",e,s,r)})}function $t(t,e,s,r,n){return cs(this,void 0,void 0,function*(){return cr(t,"POST",e,r,n,s)})}function Hl(t,e,s,r,n){return cs(this,void 0,void 0,function*(){return cr(t,"PUT",e,r,n,s)})}function da(t,e,s,r,n){return cs(this,void 0,void 0,function*(){return cr(t,"DELETE",e,r,n,s)})}var Je=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const ql={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},si={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bl{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=ha(n)}uploadOrUpdate(e,s,r,n){return Je(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},si),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl)):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType);const o=this._removeEmptyFolders(s),c=this._getFinalPath(o),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:o,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let o;const c=Object.assign({upsert:si.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:o,headers:u}),_=yield f.json();return f.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Ne(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e){return Je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield $t(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new un("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}update(e,s,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Je(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}copy(e,s){return Je(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield $t(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Je(this,void 0,void 0,function*(){try{const n=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}download(e,s){return Je(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ur(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ne(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Je(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}list(e,s,r){return Je(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ql),s),{prefix:e||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Vl="2.5.5",zl={"X-Client-Info":`storage-js/${Vl}`};var Ht=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Gl{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},zl),s),this.fetch=ha(r)}listBuckets(){return Ht(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ht(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Ht(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield da(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}}class Jl extends Gl{constructor(e,s={},r){super(e,s,r)}from(e){return new Bl(this.url,this.headers,e,this.fetch)}}const Kl="2.43.2";let gs="";typeof Deno<"u"?gs="deno":typeof document<"u"?gs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gs="react-native":gs="node";const Zl={"X-Client-Info":`supabase-js-${gs}/${Kl}`},Ql={headers:Zl},Xl={schema:"public"},ec={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tc={};var sc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const rc=t=>{let e;return t?e=t:typeof fetch>"u"?e=on:e=fetch,(...s)=>e(...s)},nc=()=>typeof Headers>"u"?oa:Headers,ic=(t,e,s)=>{const r=rc(s),n=nc();return(i,a)=>sc(void 0,void 0,void 0,function*(){var l;const o=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};function ac(t){return t.replace(/\/$/,"")}function oc(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:a,auth:l,realtime:o,global:c}=e;return{db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},o),n),global:Object.assign(Object.assign({},c),i)}}const fa="2.64.2",lc="http://localhost:9999",cc="supabase.auth.token",uc={"X-Client-Info":`gotrue-js/${fa}`},ri=10,Fr="X-Supabase-Api-Version",_a={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function hc(t){return Math.round(Date.now()/1e3)+t}function dc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const et=()=>typeof document<"u",Et={tested:!1,writable:!1},vs=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Et.tested)return Et.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Et.tested=!0,Et.writable=!0}catch{Et.tested=!0,Et.writable=!1}return Et.writable};function Dr(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const ma=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>os(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},fc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pa=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Ls=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Mr=async(t,e)=>{await t.removeItem(e)};function _c(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,a,l,o,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=a<<2|l>>4,n=(l&15)<<4|o>>2,i=(o&3)<<6|c,s=s+String.fromCharCode(r),o!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class ur{constructor(){this.promise=new ur.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ur.promiseConstructor=Promise;function ni(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(_c(r))}async function mc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function pc(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function gc(t){return("0"+t.toString(16)).substr(-2)}function bc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,gc).join("")}async function vc(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function yc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await vc(t);return yc(s)}async function qt(t,e,s=!1){const r=bc();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await pa(t,`${e}-code-verifier`,n);const i=await wc(r);return[i,r===i?"plain":"s256"]}const kc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $c(t){const e=t.headers.get(Fr);if(!e||!e.match(kc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class hn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Sc extends hn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Oc(t){return ee(t)&&t.name==="AuthApiError"}class ga extends hn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xt extends hn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Pt extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Er extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ns extends xt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ii extends xt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wr extends xt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Pr(t){return ee(t)&&t.name==="AuthRetryableFetchError"}class ai extends xt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var Tc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Rt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dc=[502,503,504];async function oi(t){var e;if(!fc(t))throw new Wr(Rt(t),0);if(Dc.includes(t.status))throw new Wr(Rt(t),t.status);let s;try{s=await t.json()}catch(i){throw new ga(Rt(i),i)}let r;const n=$c(t);if(n&&n.getTime()>=_a["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new ai(Rt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ai(Rt(s),t.status,s.weak_password.reasons);throw new Sc(Rt(s),t.status||500,r)}const Mc=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function re(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Fr]||(i[Fr]=_a["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await Ec(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function Ec(t,e,s,r,n,i){const a=Mc(e,r,n,i);let l;try{l=await t(s,Object.assign({},a))}catch(o){throw console.error(o),new Wr(Rt(o),0)}if(l.ok||await oi(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await oi(o)}}function kt(t){var e;let s=null;jc(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=hc(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function li(t){const e=kt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function St(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Pc(t){return{data:t,error:null}}function Cc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,a=Tc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},o=Object.assign({},a);return{data:{properties:l,user:o},error:null}}function Rc(t){return t}function jc(t){return t.access_token&&t.refresh_token&&t.expires_in}var Ac=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class Ic{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=ma(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Ac(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Cc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ee(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:St})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,a,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Rc});if(u.error)throw u.error;const f=await u.json(),_=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=b}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ee(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:St})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}}const Lc={getItem:t=>vs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{vs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{vs()&&globalThis.localStorage.removeItem(t)}};function ci(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Yc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Bt={debug:!!(globalThis&&vs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ba extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nc extends ba{}async function xc(t,e,s){Bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Bt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Nc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Bt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Yc();const Uc={url:lc,storageKey:cc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},_s=30*1e3,ui=3;async function hi(t,e,s){return await s()}class Ss{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ss.nextInstanceID,Ss.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Uc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Ic({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ma(n.fetch),this.lock=n.lock||hi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:et()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=xc:this.lock=hi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:vs()?this.storage=Lc:(this.memoryStorage={},this.storage=ci(this.memoryStorage)):(this.memoryStorage={},this.storage=ci(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fa}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=et()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ee(e)?{error:e}:{error:new ga("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:kt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await qt(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:f,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:kt})}else if("phone"in e){const{phone:u,password:f,options:_}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:kt})}else throw new Ys("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:li})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:li})}else throw new Ys("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Er}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Ls(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:a}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:kt});return await Mr(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Er}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=e,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:kt}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Er}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:o}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await qt(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:o}=e,{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(a=o==null?void 0:o.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ys("You must provide either an email or phone number.")}catch(l){if(ee(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:kt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,c=a.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await qt(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Pc})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Pt;const{error:n}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:l}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ys("You must provide either an email or phone number and a type")}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(o,c,u){return!a&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(o,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:St}):await this._useSession(async s=>{var r,n,i;const{data:a,error:l}=s;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:St})})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Pt;const a=n.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await qt(this.storage,this.storageKey));const{data:c,error:u}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:a.access_token,xform:St});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return ni(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const a=ni(e.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ee(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Pt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!et())throw new Ns("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ns("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ii("Not a valid PKCE flow url.");const s=Dr(window.location.href);if(e){if(!s.code)throw new ii("No code detected.");const{data:w,error:O}=await this._exchangeCodeForSession(s.code);if(O)throw O;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:w.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new Ns(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:o,token_type:c}=s;if(!i||!l||!a||!c)throw new Ns("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let _=u+f;o&&(_=parseInt(o));const g=_-u;g*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=_-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:_,refresh_token:a,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:s.type},error:null}}catch(s){if(ee(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Dr(window.location.href);return!!(et()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Dr(window.location.href),s=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Oc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Mr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=dc(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await qt(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,l,o,c,u;const{data:f,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return et()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await pc(async n=>(n>0&&await mc(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Pr(i)&&Date.now()+a-r<_s})}catch(r){if(this._debug(s,"error",r),ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),et()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Ls(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+ri;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${ri}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Pr(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ur;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Pt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),ee(i)){const a={session:null,error:i};return Pr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(o){i.push(o)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pa(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Mr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${_s}ms, refresh threshold is ${ui} ticks`),n<=ui&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ba)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await re(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}}Ss.nextInstanceID=0;const Fc=Ss;class Wc extends Fc{constructor(e){super(e)}}var Hc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class qc{constructor(e,s,r){var n,i,a,l,o,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const _=ac(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Xl,realtime:tc,auth:Object.assign(Object.assign({},ec),{storageKey:g}),global:Ql},b=oc(r??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=b.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((o=b.auth)!==null&&o!==void 0?o:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=ic(s,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new ln(`${_}/rest/v1`,{headers:this.headers,schema:(f=b.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new dl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Jl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Hc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,debug:l},o,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wc({url:this.authUrl,headers:Object.assign(Object.assign({},f),o),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Ll(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Bc=(t,e,s)=>new qc(t,e,s),_e=Bc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function ze(t,{delay:e=0,duration:s=400,easing:r=Vi}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function Vc(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',h(e,"class","d-flex justify-content-center")},m(s,r){M(s,e,r)},p:P,i:P,o:P,d(s){s&&D(e)}}}class Mt extends pe{constructor(e){super(),me(this,e,null,Vc,ue,{})}}function zc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h6"),l=m("a"),o=te(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Fe(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","author"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/author/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){M(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&ce(o,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&h(l,"href",c)},i:P,o:P,d(u){u&&D(e)}}}function Gc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class va extends pe{constructor(e){super(),me(this,e,Gc,zc,ue,{name:0,id:1})}}function Jc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h6"),l=m("a"),o=te(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Fe(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","publisher"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/publisher/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){M(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&ce(o,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&h(l,"href",c)},i:P,o:P,d(u){u&&D(e)}}}function Kc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class ya extends pe{constructor(e){super(),me(this,e,Kc,Jc,ue,{name:0,id:1})}}function Zc(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("h2"),r.textContent="Error",n=k(),i=m("p"),a=te(t[0]),l=te(": "),o=te(t[1]),c=k(),u=m("a"),u.textContent="Reload",h(u,"href","./#/"),h(u,"class","fw-bold"),h(s,"class","text-center"),h(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,_){M(f,e,_),d(e,s),d(s,r),d(s,n),d(s,i),d(i,a),d(i,l),d(i,o),d(s,c),d(s,u)},p(f,[_]){_&1&&ce(a,f[0]),_&2&&ce(o,f[1])},i:P,o:P,d(f){f&&D(e)}}}function Qc(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let dn=class extends pe{constructor(e){super(),me(this,e,Qc,Zc,ue,{code:0,message:1})}};function di(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function fi(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function _i(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function Xc(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function eu(t){let e,s;return e=new dn({props:{message:t[3]}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function tu(t){let e,s,r=Te(Object.entries(t[0])),n=[];for(let a=0;a<r.length;a+=1)n[a]=mi(_i(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){M(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&1){r=Te(Object.entries(a[0]));let o;for(o=0;o<r.length;o+=1){const c=_i(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=mi(c),n[o].c(),$(n[o],1),n[o].m(e,null))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function mi(t){let e,s;return e=new lr({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function su(t){let e,s,r,n;const i=[tu,eu,Xc],a=[];function l(o,c){return o[0]?0:o[3]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function ru(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function nu(t){let e,s;return e=new dn({props:{message:t[4]}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function iu(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=pi(fi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){M(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=fi(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=pi(c),n[o].c(),$(n[o],1),n[o].m(e,null))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function pi(t){let e,s;return e=new va({props:{id:t[13].author_id,name:t[13].name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function au(t){let e,s,r,n;const i=[iu,nu,ru],a=[];function l(o,c){return o[1]?0:o[4]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function ou(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function lu(t){let e,s;return e=new dn({props:{message:t[5]}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function cu(t){let e,s,r=Te(Object.entries(t[2])),n=[];for(let a=0;a<r.length;a+=1)n[a]=gi(di(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){M(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2]));let o;for(o=0;o<r.length;o+=1){const c=di(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=gi(c),n[o].c(),$(n[o],1),n[o].m(e,null))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function gi(t){let e,s;return e=new ya({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function uu(t){let e,s,r,n;const i=[cu,lu,ou],a=[];function l(o,c){return o[2]?0:o[5]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function hu(t){let e,s,r,n,i,a,l,o,c,u;return s=new el({}),n=new Lt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[su]},$$scope:{ctx:t}}}),a=new Lt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[au]},$$scope:{ctx:t}}}),o=new Lt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){e=m("main"),Y(s.$$.fragment),r=k(),Y(n.$$.fragment),i=k(),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),h(e,"class","container mb-5")},m(f,_){M(f,e,_),I(s,e,null),d(e,r),I(n,e,null),d(e,i),I(a,e,null),d(e,l),I(o,e,null),u=!0},p(f,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:f}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:f}),a.$set(p);const b={};_&524324&&(b.$$scope={dirty:_,ctx:f}),o.$set(b)},i(f){u||($(s.$$.fragment,f),$(n.$$.fragment,f),$(a.$$.fragment,f),$(o.$$.fragment,f),f&&(c||Ye(()=>{c=Ve(e,ze,{duration:500}),c.start()})),u=!0)},o(f){S(s.$$.fragment,f),S(n.$$.fragment,f),S(a.$$.fragment,f),S(o.$$.fragment,f),u=!1},d(f){f&&D(e),L(s),L(n),L(a),L(o)}}}function du(t,e,s){let r,n,i,a,l,o;async function c(){const{data:_,error:g}=await _e.rpc("get_books");s(0,r=_),s(3,a=g?g.message:"")}async function u(){const{data:_,error:g}=await _e.rpc("get_authors");s(1,n=_),s(4,l=g?g.message:"")}async function f(){const{data:_,error:g}=await _e.rpc("get_publishers");s(2,i=_),s(5,o=g||"")}return c(),u(),f(),[r,n,i,a,l,o]}class fu extends pe{constructor(e){super(),me(this,e,du,hu,ue,{})}}function _u(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=k(),n=m("div"),i=m("h4"),a=te(t[0]),h(s,"class","btn"),Nt(s,"font-size","1.5em"),h(i,"class","my-auto"),h(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){M(c,e,u),d(e,s),d(e,r),d(e,n),d(n,i),d(i,a),l||(o=H(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&ce(a,c[0])},i:P,o:P,d(c){c&&D(e),l=!1,o()}}}function mu(t,e,s){let{text:r}=e;const n=()=>Go();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class vt extends pe{constructor(e){super(),me(this,e,mu,_u,ue,{text:0})}}function bi(t,e,s){const r=t.slice();return r[22]=e[s][0],r[23]=e[s][1],r}function pu(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function gu(t){let e,s,r,n,i,a,l,o=t[2].isbn+"",c,u,f,_,g,p=t[2].title+"",b,v,y,w=t[2].description+"",O,E,T,C,x,j,W=t[2].author.name+"",U,V,K,Z,he,G,N,B=t[2].publisher.name+"",le,be,Ee,de,ve,Le,Re=t[2].category.name+"",We,ut,ye,X,fe,Ie=t[2].shelf_number+"",ie,J=t[1]=="client"&&vi(t);return{c(){e=m("div"),s=m("div"),r=m("img"),i=k(),a=m("small"),l=te("ISBN: "),c=te(o),u=k(),J&&J.c(),f=k(),_=m("div"),g=m("h1"),b=te(p),v=k(),y=m("p"),O=te(w),E=k(),T=m("p"),C=m("b"),C.textContent="Author:",x=k(),j=m("a"),U=te(W),K=k(),Z=m("p"),he=m("b"),he.textContent="Publisher:",G=k(),N=m("a"),le=te(B),Ee=k(),de=m("p"),ve=m("b"),ve.textContent="Category:",Le=k(),We=te(Re),ut=k(),ye=m("p"),X=m("b"),X.textContent="Shelf No.:",fe=k(),ie=te(Ie),h(r,"id","img-cover"),h(r,"class","border p-3"),Fe(r.src,n=t[11])||h(r,"src",n),h(r,"alt","book cover"),h(r,"height","300"),h(r,"width","300"),Nt(r,"object-fit","contain"),h(a,"class","text-secondary"),h(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),h(g,"id","book-title"),h(g,"class","mb-2 pb-2"),h(y,"id","book-description"),h(j,"href",V="./#/author/"+t[2].author.author_id),h(N,"href",be="./#/publisher/"+t[2].publisher.publisher_id),h(_,"id","details-container"),h(_,"class","container mt-md-0 mt-3"),h(e,"class","d-md-flex d-block")},m(je,Ue){M(je,e,Ue),d(e,s),d(s,r),d(s,i),d(s,a),d(a,l),d(a,c),d(s,u),J&&J.m(s,null),d(e,f),d(e,_),d(_,g),d(g,b),d(_,v),d(_,y),d(y,O),d(_,E),d(_,T),d(T,C),d(T,x),d(T,j),d(j,U),d(_,K),d(_,Z),d(Z,he),d(Z,G),d(Z,N),d(N,le),d(_,Ee),d(_,de),d(de,ve),d(de,Le),d(de,We),d(_,ut),d(_,ye),d(ye,X),d(ye,fe),d(ye,ie)},p(je,Ue){Ue&4&&o!==(o=je[2].isbn+"")&&ce(c,o),je[1]=="client"?J?J.p(je,Ue):(J=vi(je),J.c(),J.m(s,null)):J&&(J.d(1),J=null),Ue&4&&p!==(p=je[2].title+"")&&ce(b,p),Ue&4&&w!==(w=je[2].description+"")&&ce(O,w),Ue&4&&W!==(W=je[2].author.name+"")&&ce(U,W),Ue&4&&V!==(V="./#/author/"+je[2].author.author_id)&&h(j,"href",V),Ue&4&&B!==(B=je[2].publisher.name+"")&&ce(le,B),Ue&4&&be!==(be="./#/publisher/"+je[2].publisher.publisher_id)&&h(N,"href",be),Ue&4&&Re!==(Re=je[2].category.name+"")&&ce(We,Re),Ue&4&&Ie!==(Ie=je[2].shelf_number+"")&&ce(ie,Ie)},i:P,o:P,d(je){je&&D(e),J&&J.d()}}}function vi(t){let e;function s(i,a){return i[0]?yu:i[4]==0?vu:bu}let r=s(t),n=r(t);return{c(){n.c(),e=Be()},m(i,a){n.m(i,a),M(i,e,a)},p(i,a){r===(r=s(i))&&n?n.p(i,a):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&D(e),n.d(i)}}}function bu(t){let e,s,r;return{c(){e=m("button"),e.textContent="Reserve",e.disabled=!1,h(e,"class","btn btn-primary w-50"),h(e,"data-bs-toggle","modal"),h(e,"data-bs-target","#reserve")},m(n,i){M(n,e,i),s||(r=H(e,"click",t[9]),s=!0)},p:P,d(n){n&&D(e),s=!1,r()}}}function vu(t){let e;return{c(){e=m("button"),e.textContent="Unavailable",e.disabled=!0,h(e,"class","btn btn-secondary w-50")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function yu(t){let e,s,r,n,i,a,l;return{c(){e=m("button"),s=m("i"),r=k(),n=te(t[6]),h(s,"class","bi bi-x-circle"),h(e,"class",i="btn "+t[5]+" w-75")},m(o,c){M(o,e,c),d(e,s),d(e,r),d(e,n),a||(l=[H(e,"mouseenter",t[13]),H(e,"mouseleave",t[14]),H(e,"click",t[10])],a=!0)},p(o,c){c&64&&ce(n,o[6]),c&32&&i!==(i="btn "+o[5]+" w-75")&&h(e,"class",i)},d(o){o&&D(e),a=!1,$e(l)}}}function yi(t){let e,s;return e=new Lt({props:{title:"Status",icon:"journal",$$slots:{default:[Tu]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function wu(t){return{c:P,m:P,p:P,d:P}}function ku(t){let e;function s(i,a){return i[21].length<=0?Su:$u}let n=s(t)(t);return{c(){n.c(),e=Be()},m(i,a){n.m(i,a),M(i,e,a)},p(i,a){n.p(i,a)},d(i){i&&D(e),n.d(i)}}}function $u(t){let e,s,r,n,i=Te(Object.entries(t[21])),a=[];for(let l=0;l<i.length;l+=1)a[l]=wi(bi(t,i,l));return{c(){e=m("table"),s=m("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=k(),n=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();h(e,"class","table table-bordered table-striped text-center align-middle")},m(l,o){M(l,e,o),d(e,s),d(e,r),d(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,null)},p(l,o){if(o&128){i=Te(Object.entries(l[21]));let c;for(c=0;c<i.length;c+=1){const u=bi(l,i,c);a[c]?a[c].p(u,o):(a[c]=wi(u),a[c].c(),a[c].m(n,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}},d(l){l&&D(e),Ze(a,l)}}}function Su(t){let e;return{c(){e=m("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",h(e,"class","text-center my-5")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function wi(t){let e,s,r,n,i,a,l=t[23].status+"",o,c,u=t[23].reservation_id?`(${t[23].reservation_id})`:"",f,_,g,p,b,v;return{c(){e=m("tr"),s=m("td"),s.textContent=`${t[23].barcode}`,r=k(),n=m("td"),n.textContent=`${t[23].status!="Available"?`${t[23].fname} ${t[23].lname}`:"--"}`,i=k(),a=m("td"),o=te(l),c=k(),f=te(u),_=k(),g=m("td"),p=m("a"),b=m("small"),b.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',v=k(),h(a,"class",t[23].status=="Available"?"text-bg-success":t[23].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),h(p,"href","./#/borrow?barcode="+t[23].barcode),h(p,"class","btn btn-outline-primary btn-sm")},m(y,w){M(y,e,w),d(e,s),d(e,r),d(e,n),d(e,i),d(e,a),d(a,o),d(a,c),d(a,f),d(e,_),d(e,g),d(g,p),d(p,b),d(e,v)},p:P,d(y){y&&D(e)}}}function Ou(t){return{c:P,m:P,p:P,d:P}}function Tu(t){let e,s,r,n,i,a,l,o,c,u,f={ctx:t,current:null,token:null,hasCatch:!1,pending:Ou,then:ku,catch:wu,value:21};return Hs(t[7](),f),{c(){f.block.c(),e=k(),s=m("div"),r=m("label"),r.textContent="Add Copy:",n=k(),i=m("div"),a=m("input"),l=k(),o=m("button"),o.textContent="Add",h(r,"for","copy"),h(r,"class","form=control col-auto"),h(a,"type","text"),h(a,"class","form-control"),h(a,"placeholder","Barcode Number"),h(i,"class","col-4"),h(o,"class","btn btn-primary col-2"),h(s,"class","row justify-content-center align-items-center")},m(_,g){f.block.m(_,f.anchor=g),f.mount=()=>e.parentNode,f.anchor=e,M(_,e,g),M(_,s,g),d(s,r),d(s,n),d(s,i),d(i,a),z(a,t[3]),d(s,l),d(s,o),c||(u=[H(a,"input",t[15]),H(o,"click",t[8])],c=!0)},p(_,g){t=_,qs(f,t,g),g&8&&a.value!==t[3]&&z(a,t[3])},d(_){_&&(D(e),D(s)),f.block.d(_),f.token=null,f=null,c=!1,$e(u)}}}function Du(t){let e,s,r,n,i,a,l,o,c,u,f;r=new vt({props:{text:"Book Details"}});const _=[gu,pu],g=[];function p(v,y){return v[2]?0:1}i=p(t),a=g[i]=_[i](t);let b=t[1]=="staff"&&yi(t);return{c(){e=m("main"),s=m("section"),Y(r.$$.fragment),n=k(),a.c(),l=k(),b&&b.c(),o=k(),c=m("div"),h(c,"class","my-5"),h(e,"class","container")},m(v,y){M(v,e,y),d(e,s),I(r,s,null),d(s,n),g[i].m(s,null),d(e,l),b&&b.m(e,null),d(e,o),d(e,c),f=!0},p(v,[y]){let w=i;i=p(v),i===w?g[i].p(v,y):(De(),S(g[w],1,1,()=>{g[w]=null}),Me(),a=g[i],a?a.p(v,y):(a=g[i]=_[i](v),a.c()),$(a,1),a.m(s,null)),v[1]=="staff"?b?(b.p(v,y),y&2&&$(b,1)):(b=yi(v),b.c(),$(b,1),b.m(e,o)):b&&(De(),S(b,1,1,()=>{b=null}),Me())},i(v){f||($(r.$$.fragment,v),$(a),$(b),v&&(u||Ye(()=>{u=Ve(e,ze,{duration:500}),u.start()})),f=!0)},o(v){S(r.$$.fragment,v),S(a),S(b),f=!1},d(v){v&&D(e),L(r),g[i].d(),b&&b.d()}}}function Mu(t,e,s){let r,n;as.subscribe(j=>s(1,n=j));const i=localStorage.getItem("user_id");let{params:a}=e;const l=a.bookID;let o;async function c(){const{data:j,error:W}=await _e.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",l);console.log(j),s(2,o=j[0])}$s(c);let u;async function f(){const{data:j,error:W}=await _e.rpc("get_holdings",{bookid:l});return W&&console.error(W),console.log(j),j}async function _(){await _e.from("library_holdings").insert({book_id:l,barcode:u}),f()}let g,p=0,b="btn-secondary";async function v(){const{data:j,error:W}=await _e.rpc("isreserved",{bookid:l,studid:i});s(0,g=j)}async function y(){const{data:j,error:W}=await _e.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");s(4,p=j.length)}n=="client"&&(v(),y());async function w(){const{data:j,error:W}=await _e.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(W){console.error(W);return}const{error:U}=await _e.from("book_reservation").insert({stud_id:i,holding_id:j.holding_id});if(U){console.error(U);return}const{data:V,error:K}=await _e.from("library_holdings").update({status:"Reserved"}).eq("barcode",j.barcode).select("holding_id").single();if(K){console.error(K);return}v()}async function O(){const{data:j,error:W}=await _e.from("book_reservation").update({active:!1}).eq("reservation_id",g).select().single(),{error:U}=await _e.from("library_holdings").update({status:"Available"}).eq("holding_id",j.holding_id);!W||!U?(v(),y()):(console.error(W),console.error(U))}let E=l>4?"./book-cover.png":`./${l}.jpg`;const T=()=>{s(6,r="Cancel Reservation"),s(5,b="btn-danger")},C=()=>{s(6,r=`Reserved (${g})`),s(5,b="btn-secondary")};function x(){u=this.value,s(3,u)}return t.$$set=j=>{"params"in j&&s(12,a=j.params)},t.$$.update=()=>{t.$$.dirty&1&&s(6,r=`Reserved (${g})`)},[g,n,o,u,p,b,r,f,_,w,O,E,a,T,C,x]}class wa extends pe{constructor(e){super(),me(this,e,Mu,Du,ue,{params:12})}}function Eu(t){let e,s,r,n,i,a;const l=t[3].default,o=Zr(l,t,t[2],null);return{c(){e=m("div"),s=m("label"),r=te(t[0]),n=k(),i=m("div"),o&&o.c(),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-8 col-md-9"),h(e,"class","mb-4 row")},m(c,u){M(c,e,u),d(e,s),d(s,r),d(e,n),d(e,i),o&&o.m(i,null),a=!0},p(c,[u]){(!a||u&1)&&ce(r,c[0]),(!a||u&2)&&h(s,"for",c[1]),o&&o.p&&(!a||u&4)&&Xr(o,l,c,c[2],a?Qr(l,c[2],u,null):en(c[2]),null)},i(c){a||($(o,c),a=!0)},o(c){S(o,c),a=!1},d(c){c&&D(e),o&&o.d(c)}}}function Pu(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,a=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,a,n,r]}class Ce extends pe{constructor(e){super(),me(this,e,Pu,Eu,ue,{label:0,id:1})}}function ki(t,e,s){const r=t.slice();return r[29]=e[s][0],r[30]=e[s][1],r}function $i(t,e,s){const r=t.slice();return r[29]=e[s][0],r[34]=e[s][1],r}function Si(t,e,s){const r=t.slice();return r[29]=e[s][0],r[38]=e[s][1],r}function Cu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(n,i){M(n,e,i),z(e,t[4]),s||(r=H(e,"input",t[18]),s=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&z(e,n[4])},d(n){n&&D(e),s=!1,r()}}}function Ru(t){let e,s,r;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"id","book-description"),h(e,"rows","6")},m(n,i){M(n,e,i),z(e,t[5]),s||(r=H(e,"input",t[19]),s=!0)},p(n,i){i[0]&32&&z(e,n[5])},d(n){n&&D(e),s=!1,r()}}}function ju(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","book-cover"),h(e,"accept","image/*")},m(n,i){M(n,e,i),t[21](e),s||(r=H(e,"change",t[20]),s=!0)},p:P,d(n){n&&D(e),t[21](null),s=!1,r()}}}function Au(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","categories"),h(e,"class",s="form-control "+t[11]),h(e,"type","text"),h(e,"id","book-category"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[6]),M(l,r,o),M(l,n,o),i||(a=H(e,"input",t[23]),i=!0)},p(l,o){o[0]&2048&&s!==(s="form-control "+l[11])&&h(e,"class",s),o[0]&64&&e.value!==l[6]&&z(e,l[6])},d(l){l&&(D(e),D(r),D(n)),i=!1,a()}}}function Iu(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","authors"),h(e,"class",s="form-control "+t[12]),h(e,"type","text"),h(e,"id","book-author"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[7]),M(l,r,o),M(l,n,o),i||(a=H(e,"input",t[24]),i=!0)},p(l,o){o[0]&4096&&s!==(s="form-control "+l[12])&&h(e,"class",s),o[0]&128&&e.value!==l[7]&&z(e,l[7])},d(l){l&&(D(e),D(r),D(n)),i=!1,a()}}}function Lu(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","publishers"),h(e,"class",s="form-control "+t[13]),h(e,"type","text"),h(e,"id","book-publisher"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[8]),M(l,r,o),M(l,n,o),i||(a=H(e,"input",t[25]),i=!0)},p(l,o){o[0]&8192&&s!==(s="form-control "+l[13])&&h(e,"class",s),o[0]&256&&e.value!==l[8]&&z(e,l[8])},d(l){l&&(D(e),D(r),D(n)),i=!1,a()}}}function Yu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","number"),h(e,"id","book-shelf")},m(n,i){M(n,e,i),z(e,t[9]),s||(r=H(e,"input",t[26]),s=!0)},p(n,i){i[0]&512&&ar(e.value)!==n[9]&&z(e,n[9])},d(n){n&&D(e),s=!1,r()}}}function Nu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-isbn")},m(n,i){M(n,e,i),z(e,t[10]),s||(r=H(e,"input",t[27]),s=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&z(e,n[10])},d(n){n&&D(e),s=!1,r()}}}function xu(t){return{c:P,m:P,p:P,d:P}}function Uu(t){let e,s=Te(Object.entries(t[37])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Oi(Si(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","authors")},m(n,i){M(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&32768){s=Te(Object.entries(n[37]));let a;for(a=0;a<s.length;a+=1){const l=Si(n,s,a);r[a]?r[a].p(l,i):(r[a]=Oi(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&D(e),Ze(r,n)}}}function Oi(t){let e;return{c(){e=m("option"),e.__value=t[38].name,z(e,e.__value)},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function Fu(t){return{c:P,m:P,p:P,d:P}}function Wu(t){return{c:P,m:P,p:P,d:P}}function Hu(t){let e,s=Te(Object.entries(t[33])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ti($i(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","publishers")},m(n,i){M(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&65536){s=Te(Object.entries(n[33]));let a;for(a=0;a<s.length;a+=1){const l=$i(n,s,a);r[a]?r[a].p(l,i):(r[a]=Ti(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&D(e),Ze(r,n)}}}function Ti(t){let e;return{c(){e=m("option"),e.__value=t[34].name,z(e,e.__value)},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function qu(t){return{c:P,m:P,p:P,d:P}}function Bu(t){return{c:P,m:P,p:P,d:P}}function Vu(t){let e,s=Te(Object.entries(t[28])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Di(ki(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","categories")},m(n,i){M(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&131072){s=Te(Object.entries(n[28]));let a;for(a=0;a<s.length;a+=1){const l=ki(n,s,a);r[a]?r[a].p(l,i):(r[a]=Di(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&D(e),Ze(r,n)}}}function Di(t){let e;return{c(){e=m("option"),e.__value=t[30].name,z(e,e.__value)},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function zu(t){return{c:P,m:P,p:P,d:P}}function Gu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W,U,V,K,Z,he,G,N,B,le,be,Ee,de,ve,Le,Re,We,ut,ye;s=new vt({props:{text:"Add Book"}}),a=new Ce({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Cu]},$$scope:{ctx:t}}}),o=new Ce({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Ru]},$$scope:{ctx:t}}}),u=new Ce({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[ju]},$$scope:{ctx:t}}}),x=new Ce({props:{label:"Category:",id:"book-category",$$slots:{default:[Au]},$$scope:{ctx:t}}}),W=new Ce({props:{label:"Author: ",id:"book-author",$$slots:{default:[Iu]},$$scope:{ctx:t}}}),V=new Ce({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Lu]},$$scope:{ctx:t}}}),Z=new Ce({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Yu]},$$scope:{ctx:t}}}),G=new Ce({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Nu]},$$scope:{ctx:t}}});let X={ctx:t,current:null,token:null,hasCatch:!1,pending:Fu,then:Uu,catch:xu,value:37};Hs(t[15](),X);let fe={ctx:t,current:null,token:null,hasCatch:!1,pending:qu,then:Hu,catch:Wu,value:33};Hs(t[16](),fe);let Ie={ctx:t,current:null,token:null,hasCatch:!1,pending:zu,then:Vu,catch:Bu,value:28};return Hs(t[17](),Ie),{c(){e=m("section"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),c=k(),Y(u.$$.fragment),f=k(),_=m("div"),g=m("label"),g.textContent="Preview:",p=k(),b=m("div"),v=m("img"),w=k(),O=m("button"),O.textContent="Remove",T=k(),C=m("div"),Y(x.$$.fragment),j=k(),Y(W.$$.fragment),U=k(),Y(V.$$.fragment),K=k(),Y(Z.$$.fragment),he=k(),Y(G.$$.fragment),N=k(),B=m("div"),le=m("button"),le.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',be=k(),Ee=m("a"),Ee.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',de=k(),X.block.c(),ve=k(),fe.block.c(),Le=k(),Ie.block.c(),h(g,"for","cover-preview"),h(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Fe(v.src,y=t[3])||h(v,"src",y),h(v,"alt","Preview"),h(v,"id","cover-preview"),h(v,"height","150"),h(O,"class","btn btn-sm btn-danger"),h(b,"class","col-sm-8 col-md-9"),h(b,"id","preview-div"),h(_,"class",E="my-3 row "+t[2]),h(i,"class","col-sm-12 col-lg-6"),h(C,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(le,"class","btn btn-success"),h(Ee,"href","./#/"),h(B,"class","my-3"),h(e,"class","my-1 container")},m(ie,J){M(ie,e,J),I(s,e,null),d(e,r),d(e,n),d(n,i),I(a,i,null),d(i,l),I(o,i,null),d(i,c),I(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,b),d(b,v),d(b,w),d(b,O),d(n,T),d(n,C),I(x,C,null),d(C,j),I(W,C,null),d(C,U),I(V,C,null),d(C,K),I(Z,C,null),d(C,he),I(G,C,null),d(e,N),d(e,B),d(B,le),d(B,be),d(B,Ee),d(e,de),X.block.m(e,X.anchor=null),X.mount=()=>e,X.anchor=ve,d(e,ve),fe.block.m(e,fe.anchor=null),fe.mount=()=>e,fe.anchor=Le,d(e,Le),Ie.block.m(e,Ie.anchor=null),Ie.mount=()=>e,Ie.anchor=null,We=!0,ut||(ye=[H(O,"click",t[22]),H(le,"click",t[14])],ut=!0)},p(ie,J){t=ie;const je={};J[0]&16|J[1]&1024&&(je.$$scope={dirty:J,ctx:t}),a.$set(je);const Ue={};J[0]&32|J[1]&1024&&(Ue.$$scope={dirty:J,ctx:t}),o.$set(Ue);const In={};J[0]&3|J[1]&1024&&(In.$$scope={dirty:J,ctx:t}),u.$set(In),(!We||J[0]&8&&!Fe(v.src,y=t[3]))&&h(v,"src",y),(!We||J[0]&4&&E!==(E="my-3 row "+t[2]))&&h(_,"class",E);const Ln={};J[0]&2112|J[1]&1024&&(Ln.$$scope={dirty:J,ctx:t}),x.$set(Ln);const Yn={};J[0]&4224|J[1]&1024&&(Yn.$$scope={dirty:J,ctx:t}),W.$set(Yn);const Nn={};J[0]&8448|J[1]&1024&&(Nn.$$scope={dirty:J,ctx:t}),V.$set(Nn);const xn={};J[0]&512|J[1]&1024&&(xn.$$scope={dirty:J,ctx:t}),Z.$set(xn);const Un={};J[0]&1024|J[1]&1024&&(Un.$$scope={dirty:J,ctx:t}),G.$set(Un),qs(X,t,J),qs(fe,t,J),qs(Ie,t,J)},i(ie){We||($(s.$$.fragment,ie),$(a.$$.fragment,ie),$(o.$$.fragment,ie),$(u.$$.fragment,ie),$(x.$$.fragment,ie),$(W.$$.fragment,ie),$(V.$$.fragment,ie),$(Z.$$.fragment,ie),$(G.$$.fragment,ie),ie&&(Re||Ye(()=>{Re=Ve(e,ze,{duration:500}),Re.start()})),We=!0)},o(ie){S(s.$$.fragment,ie),S(a.$$.fragment,ie),S(o.$$.fragment,ie),S(u.$$.fragment,ie),S(x.$$.fragment,ie),S(W.$$.fragment,ie),S(V.$$.fragment,ie),S(Z.$$.fragment,ie),S(G.$$.fragment,ie),We=!1},d(ie){ie&&D(e),L(s),L(a),L(o),L(u),L(x),L(W),L(V),L(Z),L(G),X.block.d(),X.token=null,X=null,fe.block.d(),fe.token=null,fe=null,Ie.block.d(),Ie.token=null,Ie=null,ut=!1,$e(ye)}}}function Ju(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_,g,p,b,v;async function y(){const{data:G,error:N}=await _e.from("author").select("author_id").eq("name",u).single(),{data:B,error:le}=await _e.from("publisher").select("publisher_id").eq("name",f).single(),{data:be,error:Ee}=await _e.from("category").select("category_id").eq("name",c).single();let de=!0;if((N||!G)&&(s(12,b="is-invalid"),de=!1),(le||!B)&&(s(13,v="is-invalid"),de=!1),(Ee||!be)&&(s(11,p="is-invalid"),de=!1),!de)return;const{error:ve}=await _e.from("books").insert({title:l,description:o,category_id:be.category_id,author_id:G.author_id,publisher_id:B.publisher_id,shelf_number:_,isbn:g});ve?console.error(ve):alert(`Successfully Added ${l}!`)}async function w(){const{data:G,error:N}=await _e.from("author").select("name").order("name",{ascending:!0});return G}async function O(){const{data:G,error:N}=await _e.from("publisher").select("name").order("name",{ascending:!0});return G}async function E(){const{data:G,error:N}=await _e.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return G}function T(){l=this.value,s(4,l)}function C(){o=this.value,s(5,o)}function x(){r=this.files,s(0,r)}function j(G){is[G?"unshift":"push"](()=>{n=G,s(1,n)})}const W=()=>{s(1,n.value="",n),s(0,r="")};function U(){c=this.value,s(6,c)}function V(){u=this.value,s(7,u)}function K(){f=this.value,s(8,f)}function Z(){_=ar(this.value),s(9,_)}function he(){g=this.value,s(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(r&&r[0]){console.log(r),s(2,i="");const G=URL.createObjectURL(r[0]);s(3,a=G)}else console.log(r),s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W,U,V,K,Z,he]}class Ku extends pe{constructor(e){super(),me(this,e,Ju,Gu,ue,{},null,[-1,-1])}}function Mi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function Zu(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function Qu(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function b(w,O){return w[0].bio==null?eh:Xu}let v=b(t),y=v(t);return{c(){e=m("div"),s=m("h1"),n=te(r),i=k(),a=m("p"),y.c(),l=k(),o=m("p"),c=m("b"),c.textContent="Website:",u=k(),f=m("a"),g=te(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="mailto:"+t[0].email),h(e,"class","container")},m(w,O){M(w,e,O),d(e,s),d(s,n),d(e,i),d(e,a),y.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(w,O){O&1&&r!==(r=w[0].name+"")&&ce(n,r),v===(v=b(w))&&y?y.p(w,O):(y.d(1),y=v(w),y&&(y.c(),y.m(a,null))),O&1&&_!==(_=w[0].email+"")&&ce(g,_),O&1&&p!==(p="mailto:"+w[0].email)&&h(f,"href",p)},i:P,o:P,d(w){w&&D(e),y.d()}}}function Xu(t){let e=t[0].bio+"",s;return{c(){s=te(e)},m(r,n){M(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ce(s,e)},d(r){r&&D(s)}}}function eh(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function th(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function sh(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ei(Mi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){M(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=Mi(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=Ei(c),n[o].c(),$(n[o],1),n[o].m(e,null))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function Ei(t){let e,s;return e=new lr({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function rh(t){let e,s,r,n;const i=[sh,th],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function nh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b;r=new vt({props:{text:"Author Details"}});const v=[Qu,Zu],y=[];function w(O,E){return O[0]?0:1}return u=w(t),f=y[u]=v[u](t),g=new Lt({props:{title:"Books",icon:"journal",$$slots:{default:[rh]},$$scope:{ctx:t}}}),{c(){e=m("main"),s=m("section"),Y(r.$$.fragment),n=k(),i=m("div"),a=m("div"),l=m("img"),c=k(),f.c(),_=k(),Y(g.$$.fragment),h(l,"class","border p-3"),Fe(l.src,o=ih)||h(l,"src",o),h(l,"alt","author"),h(l,"height","300"),h(l,"width","300"),Nt(l,"object-fit","contain"),h(a,"class","d-flex justify-content-center my-1"),h(i,"class","d-md-flex d-block"),h(e,"class","container")},m(O,E){M(O,e,E),d(e,s),I(r,s,null),d(s,n),d(s,i),d(i,a),d(a,l),d(i,c),y[u].m(i,null),d(e,_),I(g,e,null),b=!0},p(O,[E]){let T=u;u=w(O),u===T?y[u].p(O,E):(De(),S(y[T],1,1,()=>{y[T]=null}),Me(),f=y[u],f?f.p(O,E):(f=y[u]=v[u](O),f.c()),$(f,1),f.m(i,null));const C={};E&514&&(C.$$scope={dirty:E,ctx:O}),g.$set(C)},i(O){b||($(r.$$.fragment,O),$(f),$(g.$$.fragment,O),O&&(p||Ye(()=>{p=Ve(e,ze,{duration:500}),p.start()})),b=!0)},o(O){S(r.$$.fragment,O),S(f),S(g.$$.fragment,O),b=!1},d(O){O&&D(e),L(r),y[u].d(),L(g)}}}let ih="./default-profile.jpg";function ah(t,e,s){let{params:r}=e,n=r.authorID,i,a;async function l(){const{data:o,error:c}=await _e.from("author").select().eq("author_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await _e.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,a=u)}return $s(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class ka extends pe{constructor(e){super(),me(this,e,ah,nh,ue,{params:2})}}function Pi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function Ci(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function b(w,O){return w[0].bio==null?lh:oh}let v=b(t),y=v(t);return{c(){e=m("div"),s=m("h1"),n=te(r),i=k(),a=m("p"),y.c(),l=k(),o=m("p"),c=m("b"),c.textContent="Website:",u=k(),f=m("a"),g=te(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="https://"+t[0].email),h(f,"id","publisher-website"),h(e,"class","container")},m(w,O){M(w,e,O),d(e,s),d(s,n),d(e,i),d(e,a),y.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(w,O){O&1&&r!==(r=w[0].name+"")&&ce(n,r),v===(v=b(w))&&y?y.p(w,O):(y.d(1),y=v(w),y&&(y.c(),y.m(a,null))),O&1&&_!==(_=w[0].email+"")&&ce(g,_),O&1&&p!==(p="https://"+w[0].email)&&h(f,"href",p)},d(w){w&&D(e),y.d()}}}function oh(t){let e=t[0].bio+"",s;return{c(){s=te(e)},m(r,n){M(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ce(s,e)},d(r){r&&D(s)}}}function lh(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function ch(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function uh(t){let e,s,r=Te(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ri(Pi(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){M(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=Te(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=Pi(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=Ri(c),n[o].c(),$(n[o],1),n[o].m(e,null))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function Ri(t){let e,s;return e=new lr({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function hh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v;s=new vt({props:{text:"Publisher Details"}});let y=t[0]&&Ci(t);_=new Lt({props:{title:"Books",icon:"journal"}});const w=[uh,ch],O=[];function E(T,C){return T[1]?0:1}return p=E(t),b=O[p]=w[p](t),{c(){e=m("section"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),a=m("img"),o=k(),y&&y.c(),u=k(),f=m("section"),Y(_.$$.fragment),g=k(),b.c(),h(a,"id","img-cover"),h(a,"class","border p-3"),Fe(a.src,l=dh)||h(a,"src",l),h(a,"alt","publisher"),h(a,"height","300"),h(a,"width","300"),Nt(a,"object-fit","contain"),h(i,"id","publisher-cover"),h(i,"class","d-flex justify-content-center my-1"),h(n,"class","d-md-flex d-block"),h(e,"class","container"),h(f,"class","container")},m(T,C){M(T,e,C),I(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(n,o),y&&y.m(n,null),M(T,u,C),M(T,f,C),I(_,f,null),d(f,g),O[p].m(f,null),v=!0},p(T,[C]){T[0]?y?y.p(T,C):(y=Ci(T),y.c(),y.m(n,null)):y&&(y.d(1),y=null);let x=p;p=E(T),p===x?O[p].p(T,C):(De(),S(O[x],1,1,()=>{O[x]=null}),Me(),b=O[p],b?b.p(T,C):(b=O[p]=w[p](T),b.c()),$(b,1),b.m(f,null))},i(T){v||($(s.$$.fragment,T),T&&(c||Ye(()=>{c=Ve(e,ze,{duration:500}),c.start()})),$(_.$$.fragment,T),$(b),v=!0)},o(T){S(s.$$.fragment,T),S(_.$$.fragment,T),S(b),v=!1},d(T){T&&(D(e),D(u),D(f)),L(s),y&&y.d(),L(_),O[p].d()}}}let dh="./default-profile.jpg";function fh(t,e,s){let{params:r}=e,n=r.publisherID,i,a;async function l(){const{data:o,error:c}=await _e.from("publisher").select().eq("publisher_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await _e.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,a=u)}return $s(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class $a extends pe{constructor(e){super(),me(this,e,fh,hh,ue,{params:2})}}function _h(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("i"),i=k(),a=m("div"),l=m("h5"),o=m("a"),c=te(t[0]),h(r,"class",n="bi bi-"+t[2]),h(s,"class","d-flex justify-content-center"),Nt(s,"font-size","4em"),h(o,"class","stretched-link svelte-1vxezln"),h(o,"href",u="./#/"+t[1]),h(l,"class","card-title text-center my-3"),h(a,"class","card-body p-1"),h(e,"class","card col-md-3 col-6 border-1 py-4 svelte-1vxezln")},m(f,_){M(f,e,_),d(e,s),d(s,r),d(e,i),d(e,a),d(a,l),d(l,o),d(o,c)},p(f,[_]){_&4&&n!==(n="bi bi-"+f[2])&&h(r,"class",n),_&1&&ce(c,f[0]),_&2&&u!==(u="./#/"+f[1])&&h(o,"href",u)},i:P,o:P,d(f){f&&D(e)}}}function mh(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=a=>{"name"in a&&s(0,r=a.name),"link"in a&&s(1,n=a.link),"icon"in a&&s(2,i=a.icon)},[r,n,i]}class xs extends pe{constructor(e){super(),me(this,e,mh,_h,ue,{name:0,link:1,icon:2})}}function ph(t){let e,s,r,n,i,a,l,o,c,u,f,_,g;return s=new Lt({props:{title:"Welcome!",icon:"wrench-adjustable"}}),i=new xs({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),l=new xs({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),c=new xs({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),f=new xs({props:{name:"Manage",link:"manage",icon:"journal-album"}}),{c(){e=m("main"),Y(s.$$.fragment),r=k(),n=m("div"),Y(i.$$.fragment),a=k(),Y(l.$$.fragment),o=k(),Y(c.$$.fragment),u=k(),Y(f.$$.fragment),h(n,"class","row"),h(e,"class","container")},m(p,b){M(p,e,b),I(s,e,null),d(e,r),d(e,n),I(i,n,null),d(n,a),I(l,n,null),d(n,o),I(c,n,null),d(n,u),I(f,n,null),g=!0},p:P,i(p){g||($(s.$$.fragment,p),$(i.$$.fragment,p),$(l.$$.fragment,p),$(c.$$.fragment,p),$(f.$$.fragment,p),p&&(_||Ye(()=>{_=Ve(e,ze,{duration:500}),_.start()})),g=!0)},o(p){S(s.$$.fragment,p),S(i.$$.fragment,p),S(l.$$.fragment,p),S(c.$$.fragment,p),S(f.$$.fragment,p),g=!1},d(p){p&&D(e),L(s),L(i),L(l),L(c),L(f)}}}class gh extends pe{constructor(e){super(),me(this,e,null,ph,ue,{})}}function ji(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Ai(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Ii(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function bh(t){let e,s;return e=new Mt({}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p:P,i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function vh(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',h(e,"class","d-flex justify-content-center")},m(s,r){M(s,e,r)},p:P,i:P,o:P,d(s){s&&D(e)}}}function yh(t){let e,s,r=Te(Object.entries(t[2].publisher)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Li(ji(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Be()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);M(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].publisher));let o;for(o=0;o<r.length;o+=1){const c=ji(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=Li(c),n[o].c(),$(n[o],1),n[o].m(e.parentNode,e))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function wh(t){let e,s,r=Te(Object.entries(t[2].author)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Yi(Ai(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Be()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);M(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].author));let o;for(o=0;o<r.length;o+=1){const c=Ai(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=Yi(c),n[o].c(),$(n[o],1),n[o].m(e.parentNode,e))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function kh(t){let e,s,r=Te(Object.entries(t[2].books)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ni(Ii(t,r,a));const i=a=>S(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Be()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);M(a,e,l),s=!0},p(a,l){if(l&4){r=Te(Object.entries(a[2].books));let o;for(o=0;o<r.length;o+=1){const c=Ii(a,r,o);n[o]?(n[o].p(c,l),$(n[o],1)):(n[o]=Ni(c),n[o].c(),$(n[o],1),n[o].m(e.parentNode,e))}for(De(),o=r.length;o<n.length;o+=1)i(o);Me()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)$(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)S(n[l]);s=!1},d(a){a&&D(e),Ze(n,a)}}}function Li(t){let e,s;return e=new ya({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function Yi(t){let e,s;return e=new va({props:{id:t[14].author_id,name:t[14].name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function Ni(t){let e,s;return e=new lr({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function $h(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C;s=new vt({props:{text:"Library Holdings"}});const x=[kh,wh,yh,vh,bh],j=[];function W(U,V){return U[2].books.length>0?0:U[2].author.length>0?1:U[2].publisher.length>0?2:U[0]?4:3}return y=W(t),w=j[y]=x[y](t),{c(){e=m("main"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),a=m("select"),l=m("option"),l.textContent="Books",o=m("option"),o.textContent="Author",c=m("option"),c.textContent="Publisher",u=k(),f=m("div"),_=m("input"),g=k(),p=m("button"),p.innerHTML='<i class="bi bi-search"></i>',b=k(),v=m("div"),w.c(),l.selected=!0,l.__value="books",z(l,l.__value),o.__value="author",z(o,o.__value),c.__value="publisher",z(c,c.__value),h(a,"name","searchtype"),h(a,"class","form-select"),h(i,"class","col-auto col-md-2 p-0 pe-md-4"),h(_,"class","form-control form-control-lg"),h(_,"type","search"),h(_,"placeholder","Search"),h(_,"name","Search"),h(f,"class","col-6 col-md-6 p-0"),h(p,"class","btn btn-lg btn-success col-auto col-md-1"),h(p,"type","submit"),h(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),h(v,"class","row"),h(e,"class","container")},m(U,V){M(U,e,V),I(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(a,l),d(a,o),d(a,c),t[5](a),d(n,u),d(n,f),d(f,_),z(_,t[1]),d(n,g),d(n,p),d(e,b),d(e,v),j[y].m(v,null),E=!0,T||(C=[H(a,"change",t[4]),H(_,"input",t[6]),H(_,"keyup",t[7]),H(p,"click",t[4])],T=!0)},p(U,[V]){V&2&&_.value!==U[1]&&z(_,U[1]);let K=y;y=W(U),y===K?j[y].p(U,V):(De(),S(j[K],1,1,()=>{j[K]=null}),Me(),w=j[y],w?w.p(U,V):(w=j[y]=x[y](U),w.c()),$(w,1),w.m(v,null))},i(U){E||($(s.$$.fragment,U),$(w),U&&(O||Ye(()=>{O=Ve(e,ze,{duration:500}),O.start()})),E=!0)},o(U){S(s.$$.fragment,U),S(w),E=!1},d(U){U&&D(e),L(s),t[5](null),j[y].d(),T=!1,$e(C)}}}function Sh(t,e,s){let r;Ji(t,Vo,v=>s(9,r=v));let n=!0;function i(){switch(r){case"/search/author":s(3,f.value="author",f);break;case"/search/publisher":s(3,f.value="publisher",f);break;default:s(3,f.value="books",f)}}const a={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let o="books",c="",u={books:[],author:[],publisher:[]},f;async function _(){s(0,n=!0),o=f.value,console.log(o);const{data:v,error:y}=await _e.from(o).select(a[o]).ilike(l[o],`%${c}%`);y&&console.log(y),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[o]=v,u),s(2,u),s(0,n=!1),console.log(n,u)}$s(i),$s(_);function g(v){is[v?"unshift":"push"](()=>{f=v,s(3,f)})}function p(){c=this.value,s(1,c)}return[n,c,u,f,_,g,p,v=>v.key==="Enter"&&_()]}class ts extends pe{constructor(e){super(),me(this,e,Sh,$h,ue,{})}}function Oh(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("button"),s.textContent="Client",r=k(),n=m("button"),n.textContent="Staff",h(s,"class","m-2 btn btn-primary btn-lg"),h(n,"class","m-2 btn btn-danger btn-lg"),h(e,"class","d-flex justify-content-center align-items-center"),Nt(e,"height","90vh")},m(o,c){M(o,e,c),d(e,s),d(e,r),d(e,n),a||(l=[H(s,"click",t[0]),H(n,"click",t[1])],a=!0)},p:P,i(o){o&&(i||Ye(()=>{i=Ve(e,ze,{duration:500}),i.start()}))},o:P,d(o){o&&D(e),a=!1,$e(l)}}}function Th(t){return document.querySelector("body").setAttribute("data-bs-theme","dark"),[()=>{as.set("client"),localStorage.setItem("accType","client")},()=>{as.set("staff"),localStorage.setItem("accType","staff")}]}class Dh extends pe{constructor(e){super(),me(this,e,Th,Oh,ue,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Sa;function A(){return Sa.apply(null,arguments)}function Mh(t){Sa=t}function rt(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Yt(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fn(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(ae(t,e))return!1;return!0}function He(t){return t===void 0}function bt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Cs(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Oa(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function Ot(t,e){for(var s in e)ae(e,s)&&(t[s]=e[s]);return ae(e,"toString")&&(t.toString=e.toString),ae(e,"valueOf")&&(t.valueOf=e.valueOf),t}function lt(t,e,s,r){return Ga(t,e,s,r,!0).utc()}function Eh(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Q(t){return t._pf==null&&(t._pf=Eh()),t._pf}var Hr;Array.prototype.some?Hr=Array.prototype.some:Hr=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function _n(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=Q(t),s=Hr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function hr(t){var e=lt(NaN);return t!=null?Ot(Q(e),t):Q(e).userInvalidated=!0,e}var xi=A.momentProperties=[],Cr=!1;function mn(t,e){var s,r,n,i=xi.length;if(He(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),He(e._i)||(t._i=e._i),He(e._f)||(t._f=e._f),He(e._l)||(t._l=e._l),He(e._strict)||(t._strict=e._strict),He(e._tzm)||(t._tzm=e._tzm),He(e._isUTC)||(t._isUTC=e._isUTC),He(e._offset)||(t._offset=e._offset),He(e._pf)||(t._pf=Q(e)),He(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=xi[s],n=e[r],He(n)||(t[r]=n);return t}function Rs(t){mn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Cr===!1&&(Cr=!0,A.updateOffset(this),Cr=!1)}function nt(t){return t instanceof Rs||t!=null&&t._isAMomentObject!=null}function Ta(t){A.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Qe(t,e){var s=!0;return Ot(function(){if(A.deprecationHandler!=null&&A.deprecationHandler(null,t),s){var r=[],n,i,a,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(a in arguments[0])ae(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}Ta(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Ui={};function Da(t,e){A.deprecationHandler!=null&&A.deprecationHandler(t,e),Ui[t]||(Ta(e),Ui[t]=!0)}A.suppressDeprecationWarnings=!1;A.deprecationHandler=null;function ct(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Ph(t){var e,s;for(s in t)ae(t,s)&&(e=t[s],ct(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function qr(t,e){var s=Ot({},t),r;for(r in e)ae(e,r)&&(Yt(t[r])&&Yt(e[r])?(s[r]={},Ot(s[r],t[r]),Ot(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)ae(t,r)&&!ae(e,r)&&Yt(t[r])&&(s[r]=Ot({},s[r]));return s}function pn(t){t!=null&&this.set(t)}var Br;Object.keys?Br=Object.keys:Br=function(t){var e,s=[];for(e in t)ae(t,e)&&s.push(e);return s};var Ch={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Rh(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return ct(r)?r.call(e,s):r}function ot(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var gn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Us=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rr={},ss={};function q(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(ss[t]=n),e&&(ss[e[0]]=function(){return ot(n.apply(this,arguments),e[1],e[2])}),s&&(ss[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function jh(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Ah(t){var e=t.match(gn),s,r;for(s=0,r=e.length;s<r;s++)ss[e[s]]?e[s]=ss[e[s]]:e[s]=jh(e[s]);return function(n){var i="",a;for(a=0;a<r;a++)i+=ct(e[a])?e[a].call(n,t):e[a];return i}}function Bs(t,e){return t.isValid()?(e=Ma(e,t.localeData()),Rr[e]=Rr[e]||Ah(e),Rr[e](t)):t.localeData().invalidDate()}function Ma(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(Us.lastIndex=0;s>=0&&Us.test(t);)t=t.replace(Us,r),Us.lastIndex=0,s-=1;return t}var Ih={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Lh(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(gn).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Yh="Invalid date";function Nh(){return this._invalidDate}var xh="%d",Uh=/\d{1,2}/;function Fh(t){return this._ordinal.replace("%d",t)}var Wh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Hh(t,e,s,r){var n=this._relativeTime[s];return ct(n)?n(t,e,s,r):n.replace(/%d/i,t)}function qh(t,e){var s=this._relativeTime[t>0?"future":"past"];return ct(s)?s(e):s.replace(/%s/i,e)}var Fi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xe(t){return typeof t=="string"?Fi[t]||Fi[t.toLowerCase()]:void 0}function bn(t){var e={},s,r;for(r in t)ae(t,r)&&(s=Xe(r),s&&(e[s]=t[r]));return e}var Bh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Vh(t){var e=[],s;for(s in t)ae(t,s)&&e.push({unit:s,priority:Bh[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var Ea=/\d/,Ge=/\d\d/,Pa=/\d{3}/,vn=/\d{4}/,dr=/[+-]?\d{6}/,Se=/\d\d?/,Ca=/\d\d\d\d?/,Ra=/\d\d\d\d\d\d?/,fr=/\d{1,3}/,yn=/\d{1,4}/,_r=/[+-]?\d{1,6}/,us=/\d+/,mr=/[+-]?\d+/,zh=/Z|[+-]\d\d:?\d\d/gi,pr=/Z|[+-]\d\d(?::?\d\d)?/gi,Gh=/[+-]?\d+(\.\d{1,3})?/,js=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,hs=/^[1-9]\d?/,wn=/^([1-9]\d|\d)/,er;er={};function F(t,e,s){er[t]=ct(e)?e:function(r,n){return r&&s?s:e}}function Jh(t,e){return ae(er,t)?er[t](e._strict,e._locale):new RegExp(Kh(t))}function Kh(t){return pt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function pt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ke(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function se(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=Ke(e)),s}var Vr={};function ge(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),bt(e)&&(r=function(i,a){a[e]=se(i)}),n=t.length,s=0;s<n;s++)Vr[t[s]]=r}function As(t,e){ge(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function Zh(t,e,s){e!=null&&ae(Vr,t)&&Vr[t](e,s._a,s,t)}function gr(t){return t%4===0&&t%100!==0||t%400===0}var xe=0,_t=1,at=2,Ae=3,st=4,mt=5,It=6,Qh=7,Xh=8;q("Y",0,0,function(){var t=this.year();return t<=9999?ot(t,4):"+"+t});q(0,["YY",2],0,function(){return this.year()%100});q(0,["YYYY",4],0,"year");q(0,["YYYYY",5],0,"year");q(0,["YYYYYY",6,!0],0,"year");F("Y",mr);F("YY",Se,Ge);F("YYYY",yn,vn);F("YYYYY",_r,dr);F("YYYYYY",_r,dr);ge(["YYYYY","YYYYYY"],xe);ge("YYYY",function(t,e){e[xe]=t.length===2?A.parseTwoDigitYear(t):se(t)});ge("YY",function(t,e){e[xe]=A.parseTwoDigitYear(t)});ge("Y",function(t,e){e[xe]=parseInt(t,10)});function ys(t){return gr(t)?366:365}A.parseTwoDigitYear=function(t){return se(t)+(se(t)>68?1900:2e3)};var ja=ds("FullYear",!0);function ed(){return gr(this.year())}function ds(t,e){return function(s){return s!=null?(Aa(this,t,s),A.updateOffset(this,e),this):Os(this,t)}}function Os(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Aa(t,e,s){var r,n,i,a,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,a=t.month(),l=t.date(),l=l===29&&a===1&&!gr(i)?28:l,n?r.setUTCFullYear(i,a,l):r.setFullYear(i,a,l)}}function td(t){return t=Xe(t),ct(this[t])?this[t]():this}function sd(t,e){if(typeof t=="object"){t=bn(t);var s=Vh(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=Xe(t),ct(this[t]))return this[t](e);return this}function rd(t,e){return(t%e+e)%e}var Pe;Array.prototype.indexOf?Pe=Array.prototype.indexOf:Pe=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function kn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=rd(e,12);return t+=(e-s)/12,s===1?gr(t)?29:28:31-s%7%2}q("M",["MM",2],"Mo",function(){return this.month()+1});q("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});q("MMMM",0,0,function(t){return this.localeData().months(this,t)});F("M",Se,hs);F("MM",Se,Ge);F("MMM",function(t,e){return e.monthsShortRegex(t)});F("MMMM",function(t,e){return e.monthsRegex(t)});ge(["M","MM"],function(t,e){e[_t]=se(t)-1});ge(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[_t]=n:Q(s).invalidMonth=t});var nd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ia="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),La=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,id=js,ad=js;function od(t,e){return t?rt(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||La).test(e)?"format":"standalone"][t.month()]:rt(this._months)?this._months:this._months.standalone}function ld(t,e){return t?rt(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[La.test(e)?"format":"standalone"][t.month()]:rt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function cd(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=lt([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=Pe.call(this._shortMonthsParse,a),n!==-1?n:null):(n=Pe.call(this._longMonthsParse,a),n!==-1?n:null):e==="MMM"?(n=Pe.call(this._shortMonthsParse,a),n!==-1?n:(n=Pe.call(this._longMonthsParse,a),n!==-1?n:null)):(n=Pe.call(this._longMonthsParse,a),n!==-1?n:(n=Pe.call(this._shortMonthsParse,a),n!==-1?n:null))}function ud(t,e,s){var r,n,i;if(this._monthsParseExact)return cd.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=lt([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function Ya(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=se(e);else if(e=t.localeData().monthsParse(e),!bt(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,kn(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function Na(t){return t!=null?(Ya(this,t),A.updateOffset(this,!0),this):Os(this,"Month")}function hd(){return kn(this.year(),this.month())}function dd(t){return this._monthsParseExact?(ae(this,"_monthsRegex")||xa.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(ae(this,"_monthsShortRegex")||(this._monthsShortRegex=id),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function fd(t){return this._monthsParseExact?(ae(this,"_monthsRegex")||xa.call(this),t?this._monthsStrictRegex:this._monthsRegex):(ae(this,"_monthsRegex")||(this._monthsRegex=ad),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function xa(){function t(o,c){return c.length-o.length}var e=[],s=[],r=[],n,i,a,l;for(n=0;n<12;n++)i=lt([2e3,n]),a=pt(this.monthsShort(i,"")),l=pt(this.months(i,"")),e.push(a),s.push(l),r.push(l),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function _d(t,e,s,r,n,i,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,a),l}function Ts(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function tr(t,e,s){var r=7+e-s,n=(7+Ts(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Ua(t,e,s,r,n){var i=(7+s-r)%7,a=tr(t,r,n),l=1+7*(e-1)+i+a,o,c;return l<=0?(o=t-1,c=ys(o)+l):l>ys(t)?(o=t+1,c=l-ys(t)):(o=t,c=l),{year:o,dayOfYear:c}}function Ds(t,e,s){var r=tr(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,a;return n<1?(a=t.year()-1,i=n+gt(a,e,s)):n>gt(t.year(),e,s)?(i=n-gt(t.year(),e,s),a=t.year()+1):(a=t.year(),i=n),{week:i,year:a}}function gt(t,e,s){var r=tr(t,e,s),n=tr(t+1,e,s);return(ys(t)-r+n)/7}q("w",["ww",2],"wo","week");q("W",["WW",2],"Wo","isoWeek");F("w",Se,hs);F("ww",Se,Ge);F("W",Se,hs);F("WW",Se,Ge);As(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=se(t)});function md(t){return Ds(t,this._week.dow,this._week.doy).week}var pd={dow:0,doy:6};function gd(){return this._week.dow}function bd(){return this._week.doy}function vd(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function yd(t){var e=Ds(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}q("d",0,"do","day");q("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});q("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});q("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});q("e",0,0,"weekday");q("E",0,0,"isoWeekday");F("d",Se);F("e",Se);F("E",Se);F("dd",function(t,e){return e.weekdaysMinRegex(t)});F("ddd",function(t,e){return e.weekdaysShortRegex(t)});F("dddd",function(t,e){return e.weekdaysRegex(t)});As(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:Q(s).invalidWeekday=t});As(["d","e","E"],function(t,e,s,r){e[r]=se(t)});function wd(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function kd(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function $n(t,e){return t.slice(e,7).concat(t.slice(0,e))}var $d="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Od=js,Td=js,Dd=js;function Md(t,e){var s=rt(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?$n(s,this._week.dow):t?s[t.day()]:s}function Ed(t){return t===!0?$n(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Pd(t){return t===!0?$n(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Cd(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=lt([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=Pe.call(this._weekdaysParse,a),n!==-1?n:null):e==="ddd"?(n=Pe.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=Pe.call(this._minWeekdaysParse,a),n!==-1?n:null):e==="dddd"?(n=Pe.call(this._weekdaysParse,a),n!==-1||(n=Pe.call(this._shortWeekdaysParse,a),n!==-1)?n:(n=Pe.call(this._minWeekdaysParse,a),n!==-1?n:null)):e==="ddd"?(n=Pe.call(this._shortWeekdaysParse,a),n!==-1||(n=Pe.call(this._weekdaysParse,a),n!==-1)?n:(n=Pe.call(this._minWeekdaysParse,a),n!==-1?n:null)):(n=Pe.call(this._minWeekdaysParse,a),n!==-1||(n=Pe.call(this._weekdaysParse,a),n!==-1)?n:(n=Pe.call(this._shortWeekdaysParse,a),n!==-1?n:null))}function Rd(t,e,s){var r,n,i;if(this._weekdaysParseExact)return Cd.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=lt([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function jd(t){if(!this.isValid())return t!=null?this:NaN;var e=Os(this,"Day");return t!=null?(t=wd(t,this.localeData()),this.add(t-e,"d")):e}function Ad(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Id(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=kd(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Ld(t){return this._weekdaysParseExact?(ae(this,"_weekdaysRegex")||Sn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(ae(this,"_weekdaysRegex")||(this._weekdaysRegex=Od),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yd(t){return this._weekdaysParseExact?(ae(this,"_weekdaysRegex")||Sn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ae(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Td),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Nd(t){return this._weekdaysParseExact?(ae(this,"_weekdaysRegex")||Sn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ae(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Dd),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Sn(){function t(u,f){return f.length-u.length}var e=[],s=[],r=[],n=[],i,a,l,o,c;for(i=0;i<7;i++)a=lt([2e3,1]).day(i),l=pt(this.weekdaysMin(a,"")),o=pt(this.weekdaysShort(a,"")),c=pt(this.weekdays(a,"")),e.push(l),s.push(o),r.push(c),n.push(l),n.push(o),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function On(){return this.hours()%12||12}function xd(){return this.hours()||24}q("H",["HH",2],0,"hour");q("h",["hh",2],0,On);q("k",["kk",2],0,xd);q("hmm",0,0,function(){return""+On.apply(this)+ot(this.minutes(),2)});q("hmmss",0,0,function(){return""+On.apply(this)+ot(this.minutes(),2)+ot(this.seconds(),2)});q("Hmm",0,0,function(){return""+this.hours()+ot(this.minutes(),2)});q("Hmmss",0,0,function(){return""+this.hours()+ot(this.minutes(),2)+ot(this.seconds(),2)});function Wa(t,e){q(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Wa("a",!0);Wa("A",!1);function Ha(t,e){return e._meridiemParse}F("a",Ha);F("A",Ha);F("H",Se,wn);F("h",Se,hs);F("k",Se,hs);F("HH",Se,Ge);F("hh",Se,Ge);F("kk",Se,Ge);F("hmm",Ca);F("hmmss",Ra);F("Hmm",Ca);F("Hmmss",Ra);ge(["H","HH"],Ae);ge(["k","kk"],function(t,e,s){var r=se(t);e[Ae]=r===24?0:r});ge(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});ge(["h","hh"],function(t,e,s){e[Ae]=se(t),Q(s).bigHour=!0});ge("hmm",function(t,e,s){var r=t.length-2;e[Ae]=se(t.substr(0,r)),e[st]=se(t.substr(r)),Q(s).bigHour=!0});ge("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ae]=se(t.substr(0,r)),e[st]=se(t.substr(r,2)),e[mt]=se(t.substr(n)),Q(s).bigHour=!0});ge("Hmm",function(t,e,s){var r=t.length-2;e[Ae]=se(t.substr(0,r)),e[st]=se(t.substr(r))});ge("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ae]=se(t.substr(0,r)),e[st]=se(t.substr(r,2)),e[mt]=se(t.substr(n))});function Ud(t){return(t+"").toLowerCase().charAt(0)==="p"}var Fd=/[ap]\.?m?\.?/i,Wd=ds("Hours",!0);function Hd(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var qa={calendar:Ch,longDateFormat:Ih,invalidDate:Yh,ordinal:xh,dayOfMonthOrdinalParse:Uh,relativeTime:Wh,months:nd,monthsShort:Ia,week:pd,weekdays:$d,weekdaysMin:Sd,weekdaysShort:Fa,meridiemParse:Fd},Oe={},ms={},Ms;function qd(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function Wi(t){return t&&t.toLowerCase().replace("_","-")}function Bd(t){for(var e=0,s,r,n,i;e<t.length;){for(i=Wi(t[e]).split("-"),s=i.length,r=Wi(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=br(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&qd(i,r)>=s-1)break;s--}e++}return Ms}function Vd(t){return!!(t&&t.match("^[^/\\\\]*$"))}function br(t){var e=null,s;if(Oe[t]===void 0&&typeof Gs<"u"&&Gs&&Gs.exports&&Vd(t))try{e=Ms._abbr,s=require,s("./locale/"+t),Dt(e)}catch{Oe[t]=null}return Oe[t]}function Dt(t,e){var s;return t&&(He(e)?s=yt(t):s=Tn(t,e),s?Ms=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ms._abbr}function Tn(t,e){if(e!==null){var s,r=qa;if(e.abbr=t,Oe[t]!=null)Da("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Oe[t]._config;else if(e.parentLocale!=null)if(Oe[e.parentLocale]!=null)r=Oe[e.parentLocale]._config;else if(s=br(e.parentLocale),s!=null)r=s._config;else return ms[e.parentLocale]||(ms[e.parentLocale]=[]),ms[e.parentLocale].push({name:t,config:e}),null;return Oe[t]=new pn(qr(r,e)),ms[t]&&ms[t].forEach(function(n){Tn(n.name,n.config)}),Dt(t),Oe[t]}else return delete Oe[t],null}function zd(t,e){if(e!=null){var s,r,n=qa;Oe[t]!=null&&Oe[t].parentLocale!=null?Oe[t].set(qr(Oe[t]._config,e)):(r=br(t),r!=null&&(n=r._config),e=qr(n,e),r==null&&(e.abbr=t),s=new pn(e),s.parentLocale=Oe[t],Oe[t]=s),Dt(t)}else Oe[t]!=null&&(Oe[t].parentLocale!=null?(Oe[t]=Oe[t].parentLocale,t===Dt()&&Dt(t)):Oe[t]!=null&&delete Oe[t]);return Oe[t]}function yt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ms;if(!rt(t)){if(e=br(t),e)return e;t=[t]}return Bd(t)}function Gd(){return Br(Oe)}function Dn(t){var e,s=t._a;return s&&Q(t).overflow===-2&&(e=s[_t]<0||s[_t]>11?_t:s[at]<1||s[at]>kn(s[xe],s[_t])?at:s[Ae]<0||s[Ae]>24||s[Ae]===24&&(s[st]!==0||s[mt]!==0||s[It]!==0)?Ae:s[st]<0||s[st]>59?st:s[mt]<0||s[mt]>59?mt:s[It]<0||s[It]>999?It:-1,Q(t)._overflowDayOfYear&&(e<xe||e>at)&&(e=at),Q(t)._overflowWeeks&&e===-1&&(e=Qh),Q(t)._overflowWeekday&&e===-1&&(e=Xh),Q(t).overflow=e),t}var Jd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zd=/Z|[+-]\d\d(?::?\d\d)?/,Fs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],jr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qd=/^\/?Date\((-?\d+)/i,Xd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ef={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ba(t){var e,s,r=t._i,n=Jd.exec(r)||Kd.exec(r),i,a,l,o,c=Fs.length,u=jr.length;if(n){for(Q(t).iso=!0,e=0,s=c;e<s;e++)if(Fs[e][1].exec(n[1])){a=Fs[e][0],i=Fs[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(jr[e][1].exec(n[3])){l=(n[2]||" ")+jr[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(Zd.exec(n[4]))o="Z";else{t._isValid=!1;return}t._f=a+(l||"")+(o||""),En(t)}else t._isValid=!1}function tf(t,e,s,r,n,i){var a=[sf(t),Ia.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&a.push(parseInt(i,10)),a}function sf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function rf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nf(t,e,s){if(t){var r=Fa.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return Q(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function af(t,e,s){if(t)return ef[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function Va(t){var e=Xd.exec(rf(t._i)),s;if(e){if(s=tf(e[4],e[3],e[2],e[5],e[6],e[7]),!nf(e[1],s,t))return;t._a=s,t._tzm=af(e[8],e[9],e[10]),t._d=Ts.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Q(t).rfc2822=!0}else t._isValid=!1}function of(t){var e=Qd.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Ba(t),t._isValid===!1)delete t._isValid;else return;if(Va(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:A.createFromInputFallback(t)}A.createFromInputFallback=Qe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Kt(t,e,s){return t??e??s}function lf(t){var e=new Date(A.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Mn(t){var e,s,r=[],n,i,a;if(!t._d){for(n=lf(t),t._w&&t._a[at]==null&&t._a[_t]==null&&cf(t),t._dayOfYear!=null&&(a=Kt(t._a[xe],n[xe]),(t._dayOfYear>ys(a)||t._dayOfYear===0)&&(Q(t)._overflowDayOfYear=!0),s=Ts(a,0,t._dayOfYear),t._a[_t]=s.getUTCMonth(),t._a[at]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ae]===24&&t._a[st]===0&&t._a[mt]===0&&t._a[It]===0&&(t._nextDay=!0,t._a[Ae]=0),t._d=(t._useUTC?Ts:_d).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ae]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(Q(t).weekdayMismatch=!0)}}function cf(t){var e,s,r,n,i,a,l,o,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,a=4,s=Kt(e.GG,t._a[xe],Ds(ke(),1,4).year),r=Kt(e.W,1),n=Kt(e.E,1),(n<1||n>7)&&(o=!0)):(i=t._locale._week.dow,a=t._locale._week.doy,c=Ds(ke(),i,a),s=Kt(e.gg,t._a[xe],c.year),r=Kt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(o=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(o=!0)):n=i),r<1||r>gt(s,i,a)?Q(t)._overflowWeeks=!0:o!=null?Q(t)._overflowWeekday=!0:(l=Ua(s,r,n,i,a),t._a[xe]=l.year,t._dayOfYear=l.dayOfYear)}A.ISO_8601=function(){};A.RFC_2822=function(){};function En(t){if(t._f===A.ISO_8601){Ba(t);return}if(t._f===A.RFC_2822){Va(t);return}t._a=[],Q(t).empty=!0;var e=""+t._i,s,r,n,i,a,l=e.length,o=0,c,u;for(n=Ma(t._f,t._locale).match(gn)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(Jh(i,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&Q(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),o+=r.length),ss[i]?(r?Q(t).empty=!1:Q(t).unusedTokens.push(i),Zh(i,r,t)):t._strict&&!r&&Q(t).unusedTokens.push(i);Q(t).charsLeftOver=l-o,e.length>0&&Q(t).unusedInput.push(e),t._a[Ae]<=12&&Q(t).bigHour===!0&&t._a[Ae]>0&&(Q(t).bigHour=void 0),Q(t).parsedDateParts=t._a.slice(0),Q(t).meridiem=t._meridiem,t._a[Ae]=uf(t._locale,t._a[Ae],t._meridiem),c=Q(t).era,c!==null&&(t._a[xe]=t._locale.erasConvertYear(c,t._a[xe])),Mn(t),Dn(t)}function uf(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function hf(t){var e,s,r,n,i,a,l=!1,o=t._f.length;if(o===0){Q(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<o;n++)i=0,a=!1,e=mn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],En(e),_n(e)&&(a=!0),i+=Q(e).charsLeftOver,i+=Q(e).unusedTokens.length*10,Q(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||a)&&(r=i,s=e,a&&(l=!0));Ot(t,s||e)}function df(t){if(!t._d){var e=bn(t._i),s=e.day===void 0?e.date:e.day;t._a=Oa([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),Mn(t)}}function ff(t){var e=new Rs(Dn(za(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function za(t){var e=t._i,s=t._f;return t._locale=t._locale||yt(t._l),e===null||s===void 0&&e===""?hr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),nt(e)?new Rs(Dn(e)):(Cs(e)?t._d=e:rt(s)?hf(t):s?En(t):_f(t),_n(t)||(t._d=null),t))}function _f(t){var e=t._i;He(e)?t._d=new Date(A.now()):Cs(e)?t._d=new Date(e.valueOf()):typeof e=="string"?of(t):rt(e)?(t._a=Oa(e.slice(0),function(s){return parseInt(s,10)}),Mn(t)):Yt(e)?df(t):bt(e)?t._d=new Date(e):A.createFromInputFallback(t)}function Ga(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Yt(t)&&fn(t)||rt(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,ff(i)}function ke(t,e,s,r){return Ga(t,e,s,r,!1)}var mf=Qe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:hr()}),pf=Qe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:hr()});function Ja(t,e){var s,r;if(e.length===1&&rt(e[0])&&(e=e[0]),!e.length)return ke();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function gf(){var t=[].slice.call(arguments,0);return Ja("isBefore",t)}function bf(){var t=[].slice.call(arguments,0);return Ja("isAfter",t)}var vf=function(){return Date.now?Date.now():+new Date},ps=["year","quarter","month","week","day","hour","minute","second","millisecond"];function yf(t){var e,s=!1,r,n=ps.length;for(e in t)if(ae(t,e)&&!(Pe.call(ps,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[ps[r]]){if(s)return!1;parseFloat(t[ps[r]])!==se(t[ps[r]])&&(s=!0)}return!0}function wf(){return this._isValid}function kf(){return it(NaN)}function vr(t){var e=bn(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,o=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=yf(e),this._milliseconds=+u+c*1e3+o*6e4+l*1e3*60*60,this._days=+a+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=yt(),this._bubble()}function Vs(t){return t instanceof vr}function zr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function $f(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,a;for(a=0;a<r;a++)se(t[a])!==se(e[a])&&i++;return i+n}function Ka(t,e){q(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+ot(~~(s/60),2)+e+ot(~~s%60,2)})}Ka("Z",":");Ka("ZZ","");F("Z",pr);F("ZZ",pr);ge(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Pn(pr,t)});var Sf=/([\+\-]|\d\d)/gi;function Pn(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(Sf)||["-",0,0],i=+(n[1]*60)+se(n[2]),i===0?0:n[0]==="+"?i:-i)}function Cn(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(nt(t)||Cs(t)?t.valueOf():ke(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),A.updateOffset(s,!1),s):ke(t).local()}function Gr(t){return-Math.round(t._d.getTimezoneOffset())}A.updateOffset=function(){};function Of(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Pn(pr,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=Gr(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?Xa(this,it(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,A.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Gr(this)}function Tf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Df(t){return this.utcOffset(0,t)}function Mf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Gr(this),"m")),this}function Ef(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Pn(zh,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Pf(t){return this.isValid()?(t=t?ke(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Cf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rf(){if(!He(this._isDSTShifted))return this._isDSTShifted;var t={},e;return mn(t,this),t=za(t),t._a?(e=t._isUTC?lt(t._a):ke(t._a),this._isDSTShifted=this.isValid()&&$f(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function jf(){return this.isValid()?!this._isUTC:!1}function Af(){return this.isValid()?this._isUTC:!1}function Za(){return this.isValid()?this._isUTC&&this._offset===0:!1}var If=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function it(t,e){var s=t,r=null,n,i,a;return Vs(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:bt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=If.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:se(r[at])*n,h:se(r[Ae])*n,m:se(r[st])*n,s:se(r[mt])*n,ms:se(zr(r[It]*1e3))*n}):(r=Lf.exec(t))?(n=r[1]==="-"?-1:1,s={y:Ct(r[2],n),M:Ct(r[3],n),w:Ct(r[4],n),d:Ct(r[5],n),h:Ct(r[6],n),m:Ct(r[7],n),s:Ct(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=Yf(ke(s.from),ke(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),i=new vr(s),Vs(t)&&ae(t,"_locale")&&(i._locale=t._locale),Vs(t)&&ae(t,"_isValid")&&(i._isValid=t._isValid),i}it.fn=vr.prototype;it.invalid=kf;function Ct(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Hi(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Yf(t,e){var s;return t.isValid()&&e.isValid()?(e=Cn(e,t),t.isBefore(e)?s=Hi(t,e):(s=Hi(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Qa(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(Da(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=it(s,r),Xa(this,n,t),this}}function Xa(t,e,s,r){var n=e._milliseconds,i=zr(e._days),a=zr(e._months);t.isValid()&&(r=r??!0,a&&Ya(t,Os(t,"Month")+a*s),i&&Aa(t,"Date",Os(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&A.updateOffset(t,i||a))}var Nf=Qa(1,"add"),xf=Qa(-1,"subtract");function eo(t){return typeof t=="string"||t instanceof String}function Uf(t){return nt(t)||Cs(t)||eo(t)||bt(t)||Wf(t)||Ff(t)||t===null||t===void 0}function Ff(t){var e=Yt(t)&&!fn(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,a=r.length;for(n=0;n<a;n+=1)i=r[n],s=s||ae(t,i);return e&&s}function Wf(t){var e=rt(t),s=!1;return e&&(s=t.filter(function(r){return!bt(r)&&eo(t)}).length===0),e&&s}function Hf(t){var e=Yt(t)&&!fn(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||ae(t,i);return e&&s}function qf(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Bf(t,e){arguments.length===1&&(arguments[0]?Uf(arguments[0])?(t=arguments[0],e=void 0):Hf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||ke(),r=Cn(s,this).startOf("day"),n=A.calendarFormat(this,r)||"sameElse",i=e&&(ct(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,ke(s)))}function Vf(){return new Rs(this)}function zf(t,e){var s=nt(t)?t:ke(t);return this.isValid()&&s.isValid()?(e=Xe(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function Gf(t,e){var s=nt(t)?t:ke(t);return this.isValid()&&s.isValid()?(e=Xe(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function Jf(t,e,s,r){var n=nt(t)?t:ke(t),i=nt(e)?e:ke(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function Kf(t,e){var s=nt(t)?t:ke(t),r;return this.isValid()&&s.isValid()?(e=Xe(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Zf(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Qf(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Xf(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=Cn(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=Xe(e),e){case"year":i=zs(this,r)/12;break;case"month":i=zs(this,r);break;case"quarter":i=zs(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:Ke(i)}function zs(t,e){if(t.date()<e.date())return-zs(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";A.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function e_(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function t_(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Bs(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ct(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Bs(s,"Z")):Bs(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function s_(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function r_(t){t||(t=this.isUtc()?A.defaultFormatUtc:A.defaultFormat);var e=Bs(this,t);return this.localeData().postformat(e)}function n_(t,e){return this.isValid()&&(nt(t)&&t.isValid()||ke(t).isValid())?it({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function i_(t){return this.from(ke(),t)}function a_(t,e){return this.isValid()&&(nt(t)&&t.isValid()||ke(t).isValid())?it({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function o_(t){return this.to(ke(),t)}function to(t){var e;return t===void 0?this._locale._abbr:(e=yt(t),e!=null&&(this._locale=e),this)}var so=Qe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function ro(){return this._locale}var sr=1e3,rs=60*sr,rr=60*rs,no=(365*400+97)*24*rr;function ns(t,e){return(t%e+e)%e}function io(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-no:new Date(t,e,s).valueOf()}function ao(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-no:Date.UTC(t,e,s)}function l_(t){var e,s;if(t=Xe(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?ao:io,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ns(e+(this._isUTC?0:this.utcOffset()*rs),rr);break;case"minute":e=this._d.valueOf(),e-=ns(e,rs);break;case"second":e=this._d.valueOf(),e-=ns(e,sr);break}return this._d.setTime(e),A.updateOffset(this,!0),this}function c_(t){var e,s;if(t=Xe(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?ao:io,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=rr-ns(e+(this._isUTC?0:this.utcOffset()*rs),rr)-1;break;case"minute":e=this._d.valueOf(),e+=rs-ns(e,rs)-1;break;case"second":e=this._d.valueOf(),e+=sr-ns(e,sr)-1;break}return this._d.setTime(e),A.updateOffset(this,!0),this}function u_(){return this._d.valueOf()-(this._offset||0)*6e4}function h_(){return Math.floor(this.valueOf()/1e3)}function d_(){return new Date(this.valueOf())}function f_(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function __(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function m_(){return this.isValid()?this.toISOString():null}function p_(){return _n(this)}function g_(){return Ot({},Q(this))}function b_(){return Q(this).overflow}function v_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}q("N",0,0,"eraAbbr");q("NN",0,0,"eraAbbr");q("NNN",0,0,"eraAbbr");q("NNNN",0,0,"eraName");q("NNNNN",0,0,"eraNarrow");q("y",["y",1],"yo","eraYear");q("y",["yy",2],0,"eraYear");q("y",["yyy",3],0,"eraYear");q("y",["yyyy",4],0,"eraYear");F("N",Rn);F("NN",Rn);F("NNN",Rn);F("NNNN",P_);F("NNNNN",C_);ge(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?Q(s).era=n:Q(s).invalidEra=t});F("y",us);F("yy",us);F("yyy",us);F("yyyy",us);F("yo",R_);ge(["y","yy","yyy","yyyy"],xe);ge(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[xe]=s._locale.eraYearOrdinalParse(t,n):e[xe]=parseInt(t,10)});function y_(t,e){var s,r,n,i=this._eras||yt("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=A(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=A(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function w_(t,e,s){var r,n,i=this.eras(),a,l,o;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(a=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),o=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(a===t)return i[r];break;case"NNNNN":if(o===t)return i[r];break}else if([a,l,o].indexOf(t)>=0)return i[r]}function k_(t,e){var s=t.since<=t.until?1:-1;return e===void 0?A(t.since).year():A(t.since).year()+(e-t.offset)*s}function $_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function S_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function O_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function T_(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-A(n[t].since).year())*s+n[t].offset;return this.year()}function D_(t){return ae(this,"_erasNameRegex")||jn.call(this),t?this._erasNameRegex:this._erasRegex}function M_(t){return ae(this,"_erasAbbrRegex")||jn.call(this),t?this._erasAbbrRegex:this._erasRegex}function E_(t){return ae(this,"_erasNarrowRegex")||jn.call(this),t?this._erasNarrowRegex:this._erasRegex}function Rn(t,e){return e.erasAbbrRegex(t)}function P_(t,e){return e.erasNameRegex(t)}function C_(t,e){return e.erasNarrowRegex(t)}function R_(t,e){return e._eraYearOrdinalRegex||us}function jn(){var t=[],e=[],s=[],r=[],n,i,a,l,o,c=this.eras();for(n=0,i=c.length;n<i;++n)a=pt(c[n].name),l=pt(c[n].abbr),o=pt(c[n].narrow),e.push(a),t.push(l),s.push(o),r.push(a),r.push(l),r.push(o);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}q(0,["gg",2],0,function(){return this.weekYear()%100});q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function yr(t,e){q(0,[t,t.length],0,e)}yr("gggg","weekYear");yr("ggggg","weekYear");yr("GGGG","isoWeekYear");yr("GGGGG","isoWeekYear");F("G",mr);F("g",mr);F("GG",Se,Ge);F("gg",Se,Ge);F("GGGG",yn,vn);F("gggg",yn,vn);F("GGGGG",_r,dr);F("ggggg",_r,dr);As(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=se(t)});As(["gg","GG"],function(t,e,s,r){e[r]=A.parseTwoDigitYear(t)});function j_(t){return oo.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function A_(t){return oo.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function I_(){return gt(this.year(),1,4)}function L_(){return gt(this.isoWeekYear(),1,4)}function Y_(){var t=this.localeData()._week;return gt(this.year(),t.dow,t.doy)}function N_(){var t=this.localeData()._week;return gt(this.weekYear(),t.dow,t.doy)}function oo(t,e,s,r,n){var i;return t==null?Ds(this,r,n).year:(i=gt(t,r,n),e>i&&(e=i),x_.call(this,t,e,s,r,n))}function x_(t,e,s,r,n){var i=Ua(t,e,s,r,n),a=Ts(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}q("Q",0,"Qo","quarter");F("Q",Ea);ge("Q",function(t,e){e[_t]=(se(t)-1)*3});function U_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}q("D",["DD",2],"Do","date");F("D",Se,hs);F("DD",Se,Ge);F("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ge(["D","DD"],at);ge("Do",function(t,e){e[at]=se(t.match(Se)[0])});var lo=ds("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear");F("DDD",fr);F("DDDD",Pa);ge(["DDD","DDDD"],function(t,e,s){s._dayOfYear=se(t)});function F_(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}q("m",["mm",2],0,"minute");F("m",Se,wn);F("mm",Se,Ge);ge(["m","mm"],st);var W_=ds("Minutes",!1);q("s",["ss",2],0,"second");F("s",Se,wn);F("ss",Se,Ge);ge(["s","ss"],mt);var H_=ds("Seconds",!1);q("S",0,0,function(){return~~(this.millisecond()/100)});q(0,["SS",2],0,function(){return~~(this.millisecond()/10)});q(0,["SSS",3],0,"millisecond");q(0,["SSSS",4],0,function(){return this.millisecond()*10});q(0,["SSSSS",5],0,function(){return this.millisecond()*100});q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});F("S",fr,Ea);F("SS",fr,Ge);F("SSS",fr,Pa);var Tt,co;for(Tt="SSSS";Tt.length<=9;Tt+="S")F(Tt,us);function q_(t,e){e[It]=se(("0."+t)*1e3)}for(Tt="S";Tt.length<=9;Tt+="S")ge(Tt,q_);co=ds("Milliseconds",!1);q("z",0,0,"zoneAbbr");q("zz",0,0,"zoneName");function B_(){return this._isUTC?"UTC":""}function V_(){return this._isUTC?"Coordinated Universal Time":""}var R=Rs.prototype;R.add=Nf;R.calendar=Bf;R.clone=Vf;R.diff=Xf;R.endOf=c_;R.format=r_;R.from=n_;R.fromNow=i_;R.to=a_;R.toNow=o_;R.get=td;R.invalidAt=b_;R.isAfter=zf;R.isBefore=Gf;R.isBetween=Jf;R.isSame=Kf;R.isSameOrAfter=Zf;R.isSameOrBefore=Qf;R.isValid=p_;R.lang=so;R.locale=to;R.localeData=ro;R.max=pf;R.min=mf;R.parsingFlags=g_;R.set=sd;R.startOf=l_;R.subtract=xf;R.toArray=f_;R.toObject=__;R.toDate=d_;R.toISOString=t_;R.inspect=s_;typeof Symbol<"u"&&Symbol.for!=null&&(R[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});R.toJSON=m_;R.toString=e_;R.unix=h_;R.valueOf=u_;R.creationData=v_;R.eraName=$_;R.eraNarrow=S_;R.eraAbbr=O_;R.eraYear=T_;R.year=ja;R.isLeapYear=ed;R.weekYear=j_;R.isoWeekYear=A_;R.quarter=R.quarters=U_;R.month=Na;R.daysInMonth=hd;R.week=R.weeks=vd;R.isoWeek=R.isoWeeks=yd;R.weeksInYear=Y_;R.weeksInWeekYear=N_;R.isoWeeksInYear=I_;R.isoWeeksInISOWeekYear=L_;R.date=lo;R.day=R.days=jd;R.weekday=Ad;R.isoWeekday=Id;R.dayOfYear=F_;R.hour=R.hours=Wd;R.minute=R.minutes=W_;R.second=R.seconds=H_;R.millisecond=R.milliseconds=co;R.utcOffset=Of;R.utc=Df;R.local=Mf;R.parseZone=Ef;R.hasAlignedHourOffset=Pf;R.isDST=Cf;R.isLocal=jf;R.isUtcOffset=Af;R.isUtc=Za;R.isUTC=Za;R.zoneAbbr=B_;R.zoneName=V_;R.dates=Qe("dates accessor is deprecated. Use date instead.",lo);R.months=Qe("months accessor is deprecated. Use month instead",Na);R.years=Qe("years accessor is deprecated. Use year instead",ja);R.zone=Qe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Tf);R.isDSTShifted=Qe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rf);function z_(t){return ke(t*1e3)}function G_(){return ke.apply(null,arguments).parseZone()}function uo(t){return t}var oe=pn.prototype;oe.calendar=Rh;oe.longDateFormat=Lh;oe.invalidDate=Nh;oe.ordinal=Fh;oe.preparse=uo;oe.postformat=uo;oe.relativeTime=Hh;oe.pastFuture=qh;oe.set=Ph;oe.eras=y_;oe.erasParse=w_;oe.erasConvertYear=k_;oe.erasAbbrRegex=M_;oe.erasNameRegex=D_;oe.erasNarrowRegex=E_;oe.months=od;oe.monthsShort=ld;oe.monthsParse=ud;oe.monthsRegex=fd;oe.monthsShortRegex=dd;oe.week=md;oe.firstDayOfYear=bd;oe.firstDayOfWeek=gd;oe.weekdays=Md;oe.weekdaysMin=Pd;oe.weekdaysShort=Ed;oe.weekdaysParse=Rd;oe.weekdaysRegex=Ld;oe.weekdaysShortRegex=Yd;oe.weekdaysMinRegex=Nd;oe.isPM=Ud;oe.meridiem=Hd;function nr(t,e,s,r){var n=yt(),i=lt().set(r,e);return n[s](i,t)}function ho(t,e,s){if(bt(t)&&(e=t,t=void 0),t=t||"",e!=null)return nr(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=nr(t,r,s,"month");return n}function An(t,e,s,r){typeof t=="boolean"?(bt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,bt(e)&&(s=e,e=void 0),e=e||"");var n=yt(),i=t?n._week.dow:0,a,l=[];if(s!=null)return nr(e,(s+i)%7,r,"day");for(a=0;a<7;a++)l[a]=nr(e,(a+i)%7,r,"day");return l}function J_(t,e){return ho(t,e,"months")}function K_(t,e){return ho(t,e,"monthsShort")}function Z_(t,e,s){return An(t,e,s,"weekdays")}function Q_(t,e,s){return An(t,e,s,"weekdaysShort")}function X_(t,e,s){return An(t,e,s,"weekdaysMin")}Dt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=se(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});A.lang=Qe("moment.lang is deprecated. Use moment.locale instead.",Dt);A.langData=Qe("moment.langData is deprecated. Use moment.localeData instead.",yt);var ht=Math.abs;function em(){var t=this._data;return this._milliseconds=ht(this._milliseconds),this._days=ht(this._days),this._months=ht(this._months),t.milliseconds=ht(t.milliseconds),t.seconds=ht(t.seconds),t.minutes=ht(t.minutes),t.hours=ht(t.hours),t.months=ht(t.months),t.years=ht(t.years),this}function fo(t,e,s,r){var n=it(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function tm(t,e){return fo(this,t,e,1)}function sm(t,e){return fo(this,t,e,-1)}function qi(t){return t<0?Math.floor(t):Math.ceil(t)}function rm(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,a,l,o;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=qi(Jr(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=Ke(t/1e3),r.seconds=n%60,i=Ke(n/60),r.minutes=i%60,a=Ke(i/60),r.hours=a%24,e+=Ke(a/24),o=Ke(_o(e)),s+=o,e-=qi(Jr(o)),l=Ke(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function _o(t){return t*4800/146097}function Jr(t){return t*146097/4800}function nm(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=Xe(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+_o(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(Jr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function wt(t){return function(){return this.as(t)}}var mo=wt("ms"),im=wt("s"),am=wt("m"),om=wt("h"),lm=wt("d"),cm=wt("w"),um=wt("M"),hm=wt("Q"),dm=wt("y"),fm=mo;function _m(){return it(this)}function mm(t){return t=Xe(t),this.isValid()?this[t+"s"]():NaN}function Ut(t){return function(){return this.isValid()?this._data[t]:NaN}}var pm=Ut("milliseconds"),gm=Ut("seconds"),bm=Ut("minutes"),vm=Ut("hours"),ym=Ut("days"),wm=Ut("months"),km=Ut("years");function $m(){return Ke(this.days()/7)}var dt=Math.round,Zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Sm(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function Om(t,e,s,r){var n=it(t).abs(),i=dt(n.as("s")),a=dt(n.as("m")),l=dt(n.as("h")),o=dt(n.as("d")),c=dt(n.as("M")),u=dt(n.as("w")),f=dt(n.as("y")),_=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||a<=1&&["m"]||a<s.m&&["mm",a]||l<=1&&["h"]||l<s.h&&["hh",l]||o<=1&&["d"]||o<s.d&&["dd",o];return s.w!=null&&(_=_||u<=1&&["w"]||u<s.w&&["ww",u]),_=_||c<=1&&["M"]||c<s.M&&["MM",c]||f<=1&&["y"]||["yy",f],_[2]=e,_[3]=+t>0,_[4]=r,Sm.apply(null,_)}function Tm(t){return t===void 0?dt:typeof t=="function"?(dt=t,!0):!1}function Dm(t,e){return Zt[t]===void 0?!1:e===void 0?Zt[t]:(Zt[t]=e,t==="s"&&(Zt.ss=e-1),!0)}function Mm(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Zt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Zt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=Om(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Ar=Math.abs;function Vt(t){return(t>0)-(t<0)||+t}function wr(){if(!this.isValid())return this.localeData().invalidDate();var t=Ar(this._milliseconds)/1e3,e=Ar(this._days),s=Ar(this._months),r,n,i,a,l=this.asSeconds(),o,c,u,f;return l?(r=Ke(t/60),n=Ke(r/60),t%=60,r%=60,i=Ke(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",o=l<0?"-":"",c=Vt(this._months)!==Vt(l)?"-":"",u=Vt(this._days)!==Vt(l)?"-":"",f=Vt(this._milliseconds)!==Vt(l)?"-":"",o+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?f+n+"H":"")+(r?f+r+"M":"")+(t?f+a+"S":"")):"P0D"}var ne=vr.prototype;ne.isValid=wf;ne.abs=em;ne.add=tm;ne.subtract=sm;ne.as=nm;ne.asMilliseconds=mo;ne.asSeconds=im;ne.asMinutes=am;ne.asHours=om;ne.asDays=lm;ne.asWeeks=cm;ne.asMonths=um;ne.asQuarters=hm;ne.asYears=dm;ne.valueOf=fm;ne._bubble=rm;ne.clone=_m;ne.get=mm;ne.milliseconds=pm;ne.seconds=gm;ne.minutes=bm;ne.hours=vm;ne.days=ym;ne.weeks=$m;ne.months=wm;ne.years=km;ne.humanize=Mm;ne.toISOString=wr;ne.toString=wr;ne.toJSON=wr;ne.locale=to;ne.localeData=ro;ne.toIsoString=Qe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wr);ne.lang=so;q("X",0,0,"unix");q("x",0,0,"valueOf");F("x",mr);F("X",Gh);ge("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});ge("x",function(t,e,s){s._d=new Date(se(t))});//! moment.js
A.version="2.30.1";Mh(ke);A.fn=R;A.min=gf;A.max=bf;A.now=vf;A.utc=lt;A.unix=z_;A.months=J_;A.isDate=Cs;A.locale=Dt;A.invalid=hr;A.duration=it;A.isMoment=nt;A.weekdays=Z_;A.parseZone=G_;A.localeData=yt;A.isDuration=Vs;A.monthsShort=K_;A.weekdaysMin=X_;A.defineLocale=Tn;A.updateLocale=zd;A.locales=Gd;A.weekdaysShort=Q_;A.normalizeUnits=Xe;A.relativeTimeRounding=Tm;A.relativeTimeThreshold=Dm;A.calendarFormat=qf;A.prototype=R;A.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Em(t){let e,s,r,n,i,a,l,o,c,u,f,_;const g=t[4].default,p=Zr(g,t,t[3],null);return{c(){e=m("div"),s=m("label"),r=te(t[0]),n=k(),i=m("div"),p&&p.c(),a=k(),l=m("div"),o=m("button"),c=te(t[2]),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-5 col-md-6 col-9"),h(o,"class","w-100 btn btn-outline-primary"),h(l,"class","col-sm-3 col-md-3 col-auto"),h(e,"class","mb-4 row justify-content-center")},m(b,v){M(b,e,v),d(e,s),d(s,r),d(e,n),d(e,i),p&&p.m(i,null),d(e,a),d(e,l),d(l,o),d(o,c),u=!0,f||(_=H(o,"click",t[5]),f=!0)},p(b,[v]){(!u||v&1)&&ce(r,b[0]),(!u||v&2)&&h(s,"for",b[1]),p&&p.p&&(!u||v&8)&&Xr(p,g,b,b[3],u?Qr(g,b[3],v,null):en(b[3]),null),(!u||v&4)&&ce(c,b[2])},i(b){u||($(p,b),u=!0)},o(b){S(p,b),u=!1},d(b){b&&D(e),p&&p.d(b),f=!1,_()}}}function Pm(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e,{button:l}=e;function o(c){Ir.call(this,t,c)}return t.$$set=c=>{"label"in c&&s(0,i=c.label),"id"in c&&s(1,a=c.id),"button"in c&&s(2,l=c.button),"$$scope"in c&&s(3,n=c.$$scope)},[i,a,l,n,r,o]}class Cm extends pe{constructor(e){super(),me(this,e,Pm,Em,ue,{label:0,id:1,button:2})}}function Rm(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("div"),r=m("b"),n=te(t[0]),i=te(":"),a=k(),l=m("div"),o=te(t[1]),h(s,"class","col-sm-4 col-md-4"),h(l,"class","col-sm-8 col-md-8"),h(e,"class","mb-2 row")},m(c,u){M(c,e,u),d(e,s),d(s,r),d(r,n),d(r,i),d(e,a),d(e,l),d(l,o)},p(c,[u]){u&1&&ce(n,c[0]),u&2&&ce(o,c[1])},i:P,o:P,d(c){c&&D(e)}}}function jm(t,e,s){let{key:r}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&s(0,r=i.key),"value"in i&&s(1,n=i.value)},[r,n]}class zt extends pe{constructor(e){super(),me(this,e,jm,Rm,ue,{key:0,value:1})}}function Am(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Reservation",h(e,"class",s="form-control "+t[8]),h(e,"type","number"),h(e,"id","reserve"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[3]),M(l,r,o),M(l,n,o),i||(a=[H(e,"input",t[15]),H(e,"keyup",t[16])],i=!0)},p(l,o){o&256&&s!==(s="form-control "+l[8])&&h(e,"class",s),o&8&&ar(e.value)!==l[3]&&z(e,l[3])},d(l){l&&(D(e),D(r),D(n)),i=!1,$e(a)}}}function Im(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Student",h(e,"class",s="form-control "+t[9]),h(e,"type","text"),h(e,"id","stud-id"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[4]),M(l,r,o),M(l,n,o),i||(a=[H(e,"input",t[17]),H(e,"keyup",t[18])],i=!0)},p(l,o){o&512&&s!==(s="form-control "+l[9])&&h(e,"class",s),o&16&&e.value!==l[4]&&z(e,l[4])},d(l){l&&(D(e),D(r),D(n)),i=!1,$e(a)}}}function Lm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Book",h(e,"class",s="form-control "+t[10]),h(e,"type","text"),h(e,"id","book-barcode"),h(n,"class","invalid-feedback")},m(l,o){M(l,e,o),z(e,t[5]),M(l,r,o),M(l,n,o),i||(a=[H(e,"input",t[19]),H(e,"keyup",t[20])],i=!0)},p(l,o){o&1024&&s!==(s="form-control "+l[10])&&h(e,"class",s),o&32&&e.value!==l[5]&&z(e,l[5])},d(l){l&&(D(e),D(r),D(n)),i=!1,$e(a)}}}function Bi(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y;return n=new zt({props:{key:"Borrow ID",value:"-- Preview --"}}),a=new zt({props:{key:"Name",value:t[6]}}),o=new zt({props:{key:"Book Title",value:t[7]+" ("+t[5]+")"}}),u=new zt({props:{key:"Staff Name",value:"Francis James E. Salles (153827)"}}),_=new zt({props:{key:"Borrow Date",value:A(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new zt({props:{key:"Return Due",value:A(t[1]).format("MMMM DD, YYYY")+" ("+t[11]+" days)"}}),{c(){e=m("div"),s=m("h3"),s.textContent="Borrow Preview",r=k(),Y(n.$$.fragment),i=k(),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),c=k(),Y(u.$$.fragment),f=k(),Y(_.$$.fragment),g=k(),Y(p.$$.fragment),b=k(),v=m("div"),v.innerHTML='<button class="btn btn-secondary"><i class="bi bi-arrow-up-circle"></i> Borrow</button>',h(s,"class","py-4 text-center"),h(v,"class","float-end my-2"),h(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(w,O){M(w,e,O),d(e,s),d(e,r),I(n,e,null),d(e,i),I(a,e,null),d(e,l),I(o,e,null),d(e,c),I(u,e,null),d(e,f),I(_,e,null),d(e,g),I(p,e,null),d(e,b),d(e,v),y=!0},p(w,O){const E={};O&64&&(E.value=w[6]),a.$set(E);const T={};O&160&&(T.value=w[7]+" ("+w[5]+")"),o.$set(T);const C={};O&1&&(C.value=A(w[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(C);const x={};O&2050&&(x.value=A(w[1]).format("MMMM DD, YYYY")+" ("+w[11]+" days)"),p.$set(x)},i(w){y||($(n.$$.fragment,w),$(a.$$.fragment,w),$(o.$$.fragment,w),$(u.$$.fragment,w),$(_.$$.fragment,w),$(p.$$.fragment,w),y=!0)},o(w){S(n.$$.fragment,w),S(a.$$.fragment,w),S(o.$$.fragment,w),S(u.$$.fragment,w),S(_.$$.fragment,w),S(p.$$.fragment,w),y=!1},d(w){w&&D(e),L(n),L(a),L(o),L(u),L(_),L(p)}}}function Ym(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W,U,V,K,Z,he,G,N,B,le,be,Ee,de,ve,Le,Re,We,ut;s=new vt({props:{text:"Borrow Book"}}),a=new Cm({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Am]},$$scope:{ctx:t}}}),a.$on("click",t[14]),u=new Ce({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Im]},$$scope:{ctx:t}}}),_=new Ce({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Lm]},$$scope:{ctx:t}}});let ye=t[2]&&Bi(t);return{c(){e=m("main"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),Y(a.$$.fragment),l=k(),o=m("hr"),c=k(),Y(u.$$.fragment),f=k(),Y(_.$$.fragment),g=k(),p=m("div"),b=m("label"),b.textContent="Borrow Date:",v=k(),y=m("div"),w=m("input"),E=k(),T=m("div"),C=m("button"),C.textContent="Today",x=k(),j=m("div"),W=m("label"),W.textContent="Return Due:",U=k(),V=m("div"),K=m("input"),he=k(),G=m("div"),N=m("button"),N.textContent=`~${Kr} Days`,B=k(),le=m("div"),be=m("button"),be.innerHTML='<i class="bi bi-receipt"></i> Preview',Ee=k(),de=m("a"),de.innerHTML='<i class="bi bi-x-circle"></i> Cancel',ve=k(),ye&&ye.c(),h(o,"class","mb-4"),h(b,"class","col-sm-4 col-md-3 col-form-label"),h(b,"for","borrow-date"),h(w,"class","form-control"),h(w,"type","datetime-local"),h(w,"id","borrow-date"),h(w,"max",O=A(t[1]).format("YYYY-MM-DD HH:mm")),h(y,"class","col-sm-5 col-md-6 col-7"),h(C,"class","w-100 btn btn-outline-primary"),h(T,"class","col-sm-3 col-md-3 col-auto"),h(p,"class","mb-4 row justify-content-center"),h(W,"class","col-sm-4 col-md-3 col-form-label"),h(W,"for","return-date"),h(K,"class","form-control"),h(K,"type","date"),h(K,"id","return-date"),h(K,"min",Z=A(t[0]).format("YYYY-MM-DD")),h(V,"class","col-sm-5 col-md-6 col-7"),h(N,"class","w-100 btn btn-outline-primary"),h(G,"class","col-sm-3 col-md-3 col-auto"),h(j,"class","mb-4 row justify-content-center"),h(be,"class","btn btn-success"),h(de,"href","./#/"),h(de,"class","btn btn-danger"),h(le,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-around"),h(e,"class","container")},m(X,fe){M(X,e,fe),I(s,e,null),d(e,r),d(e,n),d(n,i),I(a,i,null),d(i,l),d(i,o),d(i,c),I(u,i,null),d(i,f),I(_,i,null),d(i,g),d(i,p),d(p,b),d(p,v),d(p,y),d(y,w),z(w,t[0]),d(p,E),d(p,T),d(T,C),d(i,x),d(i,j),d(j,W),d(j,U),d(j,V),d(V,K),z(K,t[1]),d(j,he),d(j,G),d(G,N),d(i,B),d(i,le),d(le,be),d(le,Ee),d(le,de),d(n,ve),ye&&ye.m(n,null),Re=!0,We||(ut=[H(w,"input",t[21]),H(C,"click",t[22]),H(K,"input",t[23]),H(N,"click",t[24]),H(be,"click",t[25])],We=!0)},p(X,[fe]){const Ie={};fe&268435720&&(Ie.$$scope={dirty:fe,ctx:X}),a.$set(Ie);const ie={};fe&268435984&&(ie.$$scope={dirty:fe,ctx:X}),u.$set(ie);const J={};fe&268436512&&(J.$$scope={dirty:fe,ctx:X}),_.$set(J),(!Re||fe&2&&O!==(O=A(X[1]).format("YYYY-MM-DD HH:mm")))&&h(w,"max",O),fe&1&&z(w,X[0]),(!Re||fe&1&&Z!==(Z=A(X[0]).format("YYYY-MM-DD")))&&h(K,"min",Z),fe&2&&z(K,X[1]),X[2]?ye?(ye.p(X,fe),fe&4&&$(ye,1)):(ye=Bi(X),ye.c(),$(ye,1),ye.m(n,null)):ye&&(De(),S(ye,1,1,()=>{ye=null}),Me())},i(X){Re||($(s.$$.fragment,X),$(a.$$.fragment,X),$(u.$$.fragment,X),$(_.$$.fragment,X),$(ye),X&&(Le||Ye(()=>{Le=Ve(e,ze,{duration:500}),Le.start()})),Re=!0)},o(X){S(s.$$.fragment,X),S(a.$$.fragment,X),S(u.$$.fragment,X),S(_.$$.fragment,X),S(ye),Re=!1},d(X){X&&D(e),L(s),L(a),L(u),L(_),ye&&ye.d(),We=!1,$e(ut)}}}const Kr=14;function Nm(t,e,s){let r,n;Ji(t,zo,G=>s(26,n=G));const i=A().format("YYYY-MM-DD HH:mm");let a=i,l=A(i).add(Kr,"days").format("YYYY-MM-DD"),o=!1,c,u,f;const _=new URLSearchParams(n);c=_.get("reserve_id")||"",f=_.get("barcode")||"";let g,p,b,v,y;async function w(){const{data:G,error:N}=await _e.from("account_details").select("fname, lname").eq("user_id",u).single();N?s(9,v="is-invalid"):s(6,g=`${G.fname} ${G.lname}`);const{data:B,error:le}=await _e.from("library_holdings").select("books(title)").eq("barcode",f).single();le||!B?s(10,y="is-invalid"):s(7,p=B.books.title),s(2,o=!o)}async function O(){const{data:G,error:N}=await _e.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",c).single();N||!G?(s(8,b="is-invalid"),console.error(N)):(s(4,u=G.stud_id),s(5,f=G.library_holdings.barcode),w())}function E(){c=ar(this.value),s(3,c)}const T=()=>s(8,b="");function C(){u=this.value,s(4,u)}const x=()=>s(9,v="");function j(){f=this.value,s(5,f)}const W=()=>s(10,y="");function U(){a=this.value,s(0,a)}const V=()=>s(0,a=i);function K(){l=this.value,s(1,l)}const Z=()=>s(1,l=A(a).add(Kr,"days").format("YYYY-MM-DD")),he=()=>{w()};return t.$$.update=()=>{t.$$.dirty&3&&s(11,r=A(l).subtract(a,"days").subtract(1,"days").format("DD"))},[a,l,o,c,u,f,g,p,b,v,y,r,i,w,O,E,T,C,x,j,W,U,V,K,Z,he]}class xm extends pe{constructor(e){super(),me(this,e,Nm,Ym,ue,{})}}function Um(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-id")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function Fm(t){let e,s,r,n,i;return{c(){e=m("select"),s=m("option"),s.textContent="New",r=m("option"),r.textContent="Good",n=m("option"),n.textContent="Fair",i=m("option"),i.textContent="Poor",s.__value="New",z(s,s.__value),r.__value="Good",z(r,r.__value),n.__value="Fair",z(n,n.__value),i.__value="Poor",z(i,i.__value),h(e,"class","form-select"),h(e,"id","book-condition")},m(a,l){M(a,e,l),d(e,s),d(e,r),d(e,n),d(e,i)},p:P,d(a){a&&D(e)}}}function Wm(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"rows","3"),h(e,"id","book-note")},m(s,r){M(s,e,r)},p:P,d(s){s&&D(e)}}}function Hm(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W;return s=new vt({props:{text:"Return Book"}}),a=new Ce({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Um]},$$scope:{ctx:t}}}),o=new Ce({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Fm]},$$scope:{ctx:t}}}),u=new Ce({props:{label:"Note:",id:"book-note",$$slots:{default:[Wm]},$$scope:{ctx:t}}}),{c(){e=m("main"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),c=k(),Y(u.$$.fragment),f=k(),_=m("div"),g=m("label"),g.textContent="Return Time:",p=k(),b=m("div"),v=m("input"),y=k(),w=m("div"),O=m("button"),O.textContent="Today",E=k(),T=m("div"),T.innerHTML='<button class="btn btn-success"><i class="bi bi-arrow-down-circle"></i> Return</button> <a href="./#/" class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</a>',h(g,"class","col-sm-4 col-md-3 col-form-label"),h(g,"for","return-time"),h(v,"class","form-control"),h(v,"type","datetime-local"),h(v,"id","return-time"),h(b,"class","col-sm-5 col-md-6 col-7"),h(O,"class","w-100 btn btn-outline-primary"),h(w,"class","col-sm-3 col-md-3 col-auto"),h(_,"class","mb-4 row justify-content-center"),h(T,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(e,"class","container")},m(U,V){M(U,e,V),I(s,e,null),d(e,r),d(e,n),d(n,i),I(a,i,null),d(i,l),I(o,i,null),d(i,c),I(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,b),d(b,v),z(v,t[0]),d(_,y),d(_,w),d(w,O),d(i,E),d(i,T),x=!0,j||(W=[H(v,"input",t[2]),H(O,"click",To(t[3]))],j=!0)},p(U,[V]){const K={};V&32&&(K.$$scope={dirty:V,ctx:U}),a.$set(K);const Z={};V&32&&(Z.$$scope={dirty:V,ctx:U}),o.$set(Z);const he={};V&32&&(he.$$scope={dirty:V,ctx:U}),u.$set(he),V&1&&z(v,U[0])},i(U){x||($(s.$$.fragment,U),$(a.$$.fragment,U),$(o.$$.fragment,U),$(u.$$.fragment,U),U&&(C||Ye(()=>{C=Ve(e,ze,{duration:500}),C.start()})),x=!0)},o(U){S(s.$$.fragment,U),S(a.$$.fragment,U),S(o.$$.fragment,U),S(u.$$.fragment,U),x=!1},d(U){U&&D(e),L(s),L(a),L(o),L(u),j=!1,$e(W)}}}function qm(t,e,s){let r=A().format("YYYY-MM-DD HH:mm"),n=r;A(r).add(5,"days").format("YYYY-MM-DD");function i(){n=this.value,s(0,n)}return[n,r,i,()=>s(0,n=r)]}class Bm extends pe{constructor(e){super(),me(this,e,qm,Hm,ue,{})}}function Vm(t){let e,s;return{c(){e=m("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',h(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Nt(e,"height","70vh")},m(r,n){M(r,e,n)},p:P,i(r){r&&(s||Ye(()=>{s=Ve(e,ze,{duration:500}),s.start()}))},o:P,d(r){r&&D(e)}}}class po extends pe{constructor(e){super(),me(this,e,null,Vm,ue,{})}}function zm(t){let e,s,r,n;return{c(){e=m("input"),h(e,"class",s="form-control "+t[7]),h(e,"type","text"),h(e,"id","author-name")},m(i,a){M(i,e,a),z(e,t[4]),r||(n=[H(e,"input",t[11]),H(e,"keyup",t[12])],r=!0)},p(i,a){a&128&&s!==(s="form-control "+i[7])&&h(e,"class",s),a&16&&e.value!==i[4]&&z(e,i[4])},d(i){i&&D(e),r=!1,$e(n)}}}function Gm(t){let e,s,r,n;return{c(){e=m("textarea"),h(e,"class",s="form-control "+t[8]),h(e,"id","author-bio"),h(e,"rows","4")},m(i,a){M(i,e,a),z(e,t[5]),r||(n=[H(e,"input",t[13]),H(e,"keyup",t[14])],r=!0)},p(i,a){a&256&&s!==(s="form-control "+i[8])&&h(e,"class",s),a&32&&z(e,i[5])},d(i){i&&D(e),r=!1,$e(n)}}}function Jm(t){let e,s,r,n;return{c(){e=m("input"),h(e,"type","text"),h(e,"id","author-link"),h(e,"class",s="form-control "+t[9])},m(i,a){M(i,e,a),z(e,t[6]),r||(n=[H(e,"input",t[15]),H(e,"keyup",t[16])],r=!0)},p(i,a){a&512&&s!==(s="form-control "+i[9])&&h(e,"class",s),a&64&&e.value!==i[6]&&z(e,i[6])},d(i){i&&D(e),r=!1,$e(n)}}}function Km(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","author-pic"),h(e,"accept","image/*")},m(n,i){M(n,e,i),t[18](e),s||(r=H(e,"change",t[17]),s=!0)},p:P,d(n){n&&D(e),t[18](null),s=!1,r()}}}function Zm(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W,U,V,K,Z,he,G;return s=new vt({props:{text:"Add Author"}}),a=new Ce({props:{label:"Author Name:",id:"author-name",$$slots:{default:[zm]},$$scope:{ctx:t}}}),o=new Ce({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Gm]},$$scope:{ctx:t}}}),u=new Ce({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Jm]},$$scope:{ctx:t}}}),_=new Ce({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Km]},$$scope:{ctx:t}}}),{c(){e=m("section"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),c=k(),Y(u.$$.fragment),f=k(),Y(_.$$.fragment),g=k(),p=m("div"),b=m("label"),b.textContent="Preview:",v=k(),y=m("div"),w=m("img"),E=k(),T=m("button"),T.textContent="Remove",x=k(),j=m("div"),W=m("button"),W.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',U=k(),V=m("a"),V.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',h(b,"for","cover-preview"),h(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Fe(w.src,O=t[3])||h(w,"src",O),h(w,"alt","Preview"),h(w,"id","cover-preview"),h(w,"height","150"),h(T,"class","btn btn-sm btn-danger"),h(y,"class","col-sm-8 col-md-9"),h(y,"id","preview-div"),h(p,"class",C="my-3 row "+t[2]),h(W,"class","btn btn-success"),h(V,"href","./#/"),h(j,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","justify-content-around row"),h(e,"class","container")},m(N,B){M(N,e,B),I(s,e,null),d(e,r),d(e,n),d(n,i),I(a,i,null),d(i,l),I(o,i,null),d(i,c),I(u,i,null),d(i,f),I(_,i,null),d(i,g),d(i,p),d(p,b),d(p,v),d(p,y),d(y,w),d(y,E),d(y,T),d(i,x),d(i,j),d(j,W),d(j,U),d(j,V),Z=!0,he||(G=[H(T,"click",t[19]),H(W,"click",t[10])],he=!0)},p(N,[B]){const le={};B&1048720&&(le.$$scope={dirty:B,ctx:N}),a.$set(le);const be={};B&1048864&&(be.$$scope={dirty:B,ctx:N}),o.$set(be);const Ee={};B&1049152&&(Ee.$$scope={dirty:B,ctx:N}),u.$set(Ee);const de={};B&1048579&&(de.$$scope={dirty:B,ctx:N}),_.$set(de),(!Z||B&8&&!Fe(w.src,O=N[3]))&&h(w,"src",O),(!Z||B&4&&C!==(C="my-3 row "+N[2]))&&h(p,"class",C)},i(N){Z||($(s.$$.fragment,N),$(a.$$.fragment,N),$(o.$$.fragment,N),$(u.$$.fragment,N),$(_.$$.fragment,N),N&&(K||Ye(()=>{K=Ve(e,ze,{duration:500}),K.start()})),Z=!0)},o(N){S(s.$$.fragment,N),S(a.$$.fragment,N),S(o.$$.fragment,N),S(u.$$.fragment,N),S(_.$$.fragment,N),Z=!1},d(N){N&&D(e),L(s),L(a),L(o),L(u),L(_),he=!1,$e(G)}}}function Qm(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=o?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function v(){o=this.value,s(5,o)}const y=()=>s(8,f="");function w(){c=this.value,s(6,c)}const O=()=>s(9,_="");function E(){r=this.files,s(0,r)}function T(x){is[x?"unshift":"push"](()=>{n=x,s(1,n)})}const C=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const x=URL.createObjectURL(r[0]);s(3,a=x)}else s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C]}class Xm extends pe{constructor(e){super(),me(this,e,Qm,Zm,ue,{})}}function ep(t){let e,s,r,n;return{c(){e=m("input"),h(e,"class",s="form-control "+t[7]),h(e,"type","text"),h(e,"id","publisher-name")},m(i,a){M(i,e,a),z(e,t[4]),r||(n=[H(e,"input",t[11]),H(e,"keyup",t[12])],r=!0)},p(i,a){a&128&&s!==(s="form-control "+i[7])&&h(e,"class",s),a&16&&e.value!==i[4]&&z(e,i[4])},d(i){i&&D(e),r=!1,$e(n)}}}function tp(t){let e,s,r,n;return{c(){e=m("textarea"),h(e,"class",s="form-control "+t[8]),h(e,"id","publisher-description"),h(e,"rows","4")},m(i,a){M(i,e,a),z(e,t[5]),r||(n=[H(e,"input",t[13]),H(e,"keyup",t[14])],r=!0)},p(i,a){a&256&&s!==(s="form-control "+i[8])&&h(e,"class",s),a&32&&z(e,i[5])},d(i){i&&D(e),r=!1,$e(n)}}}function sp(t){let e,s,r,n;return{c(){e=m("input"),h(e,"type","text"),h(e,"id","publisher-link"),h(e,"class",s="form-control "+t[9])},m(i,a){M(i,e,a),z(e,t[6]),r||(n=[H(e,"input",t[15]),H(e,"keyup",t[16])],r=!0)},p(i,a){a&512&&s!==(s="form-control "+i[9])&&h(e,"class",s),a&64&&e.value!==i[6]&&z(e,i[6])},d(i){i&&D(e),r=!1,$e(n)}}}function rp(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","publisher-pic"),h(e,"accept","image/*")},m(n,i){M(n,e,i),t[18](e),s||(r=H(e,"change",t[17]),s=!0)},p:P,d(n){n&&D(e),t[18](null),s=!1,r()}}}function np(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C,x,j,W,U,V,K,Z,he,G;return s=new vt({props:{text:"Add Publisher"}}),a=new Ce({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[ep]},$$scope:{ctx:t}}}),o=new Ce({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[tp]},$$scope:{ctx:t}}}),u=new Ce({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[sp]},$$scope:{ctx:t}}}),_=new Ce({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[rp]},$$scope:{ctx:t}}}),{c(){e=m("section"),Y(s.$$.fragment),r=k(),n=m("div"),i=m("div"),Y(a.$$.fragment),l=k(),Y(o.$$.fragment),c=k(),Y(u.$$.fragment),f=k(),Y(_.$$.fragment),g=k(),p=m("div"),b=m("label"),b.textContent="Preview:",v=k(),y=m("div"),w=m("img"),E=k(),T=m("button"),T.textContent="Remove",x=k(),j=m("div"),W=m("button"),W.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',U=k(),V=m("a"),V.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',h(b,"for","cover-preview"),h(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Fe(w.src,O=t[3])||h(w,"src",O),h(w,"alt","Preview"),h(w,"id","cover-preview"),h(w,"height","150"),h(T,"class","btn btn-sm btn-danger"),h(y,"class","col-sm-8 col-md-9"),h(y,"id","preview-div"),h(p,"class",C="my-3 row "+t[2]),h(W,"class","btn btn-success"),h(V,"href","./#/"),h(j,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","justify-content-around row"),h(e,"class","container")},m(N,B){M(N,e,B),I(s,e,null),d(e,r),d(e,n),d(n,i),I(a,i,null),d(i,l),I(o,i,null),d(i,c),I(u,i,null),d(i,f),I(_,i,null),d(i,g),d(i,p),d(p,b),d(p,v),d(p,y),d(y,w),d(y,E),d(y,T),d(i,x),d(i,j),d(j,W),d(j,U),d(j,V),Z=!0,he||(G=[H(T,"click",t[19]),H(W,"click",t[10])],he=!0)},p(N,[B]){const le={};B&1048720&&(le.$$scope={dirty:B,ctx:N}),a.$set(le);const be={};B&1048864&&(be.$$scope={dirty:B,ctx:N}),o.$set(be);const Ee={};B&1049152&&(Ee.$$scope={dirty:B,ctx:N}),u.$set(Ee);const de={};B&1048579&&(de.$$scope={dirty:B,ctx:N}),_.$set(de),(!Z||B&8&&!Fe(w.src,O=N[3]))&&h(w,"src",O),(!Z||B&4&&C!==(C="my-3 row "+N[2]))&&h(p,"class",C)},i(N){Z||($(s.$$.fragment,N),$(a.$$.fragment,N),$(o.$$.fragment,N),$(u.$$.fragment,N),$(_.$$.fragment,N),N&&(K||Ye(()=>{K=Ve(e,ze,{duration:500}),K.start()})),Z=!0)},o(N){S(s.$$.fragment,N),S(a.$$.fragment,N),S(o.$$.fragment,N),S(u.$$.fragment,N),S(_.$$.fragment,N),Z=!1},d(N){N&&D(e),L(s),L(a),L(o),L(u),L(_),he=!1,$e(G)}}}function ip(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=o?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function v(){o=this.value,s(5,o)}const y=()=>s(8,f="");function w(){c=this.value,s(6,c)}const O=()=>s(9,_="");function E(){r=this.files,s(0,r)}function T(x){is[x?"unshift":"push"](()=>{n=x,s(1,n)})}const C=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const x=URL.createObjectURL(r[0]);s(3,a=x)}else s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,b,v,y,w,O,E,T,C]}class ap extends pe{constructor(e){super(),me(this,e,ip,np,ue,{})}}function op(t){let e,s;return e=new nn({props:{routes:{"*":Dh}}}),{c(){Y(e.$$.fragment)},m(r,n){I(e,r,n),s=!0},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function lp(t){let e,s,r,n;return e=new aa({}),r=new nn({props:{routes:{"/":gh,"/book/:bookID":wa,"/author/:authorID":ka,"/publisher/:publisherID":$a,"/search":ts,"/search/author":ts,"/search/publisher":ts,"/add-book":Ku,"/add-author":Xm,"/add-publisher":ap,"/borrow":xm,"/return":Bm,"*":po}}}),{c(){Y(e.$$.fragment),s=k(),Y(r.$$.fragment)},m(i,a){I(e,i,a),M(i,s,a),I(r,i,a),n=!0},i(i){n||($(e.$$.fragment,i),$(r.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),S(r.$$.fragment,i),n=!1},d(i){i&&D(s),L(e,i),L(r,i)}}}function cp(t){let e,s,r,n;return e=new aa({}),r=new nn({props:{routes:{"/":fu,"/book/:bookID":wa,"/author/:authorID":ka,"/publisher/:publisherID":$a,"/search":ts,"/search/author":ts,"/search/publisher":ts,"*":po}}}),{c(){Y(e.$$.fragment),s=k(),Y(r.$$.fragment)},m(i,a){I(e,i,a),M(i,s,a),I(r,i,a),n=!0},i(i){n||($(e.$$.fragment,i),$(r.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),S(r.$$.fragment,i),n=!1},d(i){i&&D(s),L(e,i),L(r,i)}}}function up(t){let e,s,r,n;const i=[cp,lp,op],a=[];function l(o,c){return o[0]=="client"?0:o[0]=="staff"?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Be()},m(o,c){a[e].m(o,c),M(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e!==u&&(De(),S(a[u],1,1,()=>{a[u]=null}),Me(),s=a[e],s||(s=a[e]=i[e](o),s.c()),$(s,1),s.m(r.parentNode,r))},i(o){n||($(s),n=!0)},o(o){S(s),n=!1},d(o){o&&D(r),a[e].d(o)}}}function hp(t,e,s){let r;return as.subscribe(n=>{s(0,r=n);const i=r=="staff"?"153827":r=="client"?"263690":"";Fo.set(i),localStorage.setItem("user_id",i)}),[r]}class dp extends pe{constructor(e){super(),me(this,e,hp,up,ue,{})}}new dp({target:document.getElementById("app")})});export default fp();
