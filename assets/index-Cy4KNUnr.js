var eo=Object.defineProperty;var to=(t,e,s)=>e in t?eo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var so=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _r=(t,e,s)=>(to(t,typeof e!="symbol"?e+"":e,s),s);var _m=so((gm,Us)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function j(){}const Mi=t=>t;function ps(t,e){for(const s in e)t[s]=e[s];return t}function Pi(t){return t()}function Mn(){return Object.create(null)}function ze(t){t.forEach(Pi)}function Qs(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ms;function Ae(t,e){return t===e?!0:(Ms||(Ms=document.createElement("a")),Ms.href=e,t===Ms.href)}function ro(t){return Object.keys(t).length===0}function Ri(t,...e){if(t==null){for(const r of e)r(void 0);return j}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function no(t,e,s){t.$$.on_destroy.push(Ri(e,s))}function Fr(t,e,s,r){if(t){const n=Ci(t,e,s,r);return t[0](n)}}function Ci(t,e,s,r){return t[1]&&r?ps(s.ctx.slice(),t[1](r(e))):s.ctx}function Wr(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],a=Math.max(e.dirty.length,n.length);for(let l=0;l<a;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function Hr(t,e,s,r,n,i){if(n){const a=Ci(e,s,r,i);t.p(a,n)}}function Br(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}const ji=typeof window<"u";let io=ji?()=>window.performance.now():()=>Date.now(),zr=ji?t=>requestAnimationFrame(t):j;const Gt=new Set;function Ai(t){Gt.forEach(e=>{e.c(t)||(Gt.delete(e),e.f())}),Gt.size!==0&&zr(Ai)}function ao(t){let e;return Gt.size===0&&zr(Ai),{promise:new Promise(s=>{Gt.add(e={c:t,f:s})}),abort(){Gt.delete(e)}}}function f(t,e){t.appendChild(e)}function xi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function oo(t){const e=m("style");return e.textContent="/* empty */",lo(xi(t),e),e.sheet}function lo(t,e){return f(t.head||t,e),e.sheet}function C(t,e,s){t.insertBefore(e,s||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function ct(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function m(t){return document.createElement(t)}function Q(t){return document.createTextNode(t)}function S(){return Q(" ")}function Ge(){return Q("")}function ke(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function Ii(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function co(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function Me(t,e){t.value=e??""}function Mt(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function Li(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function Fs(t,e){return new t(e)}const Ws=new Map;let Hs=0;function uo(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function ho(t,e){const s={stylesheet:oo(e),rules:{}};return Ws.set(t,s),s}function fo(t,e,s,r,n,i,a,l=0){const o=16.666/r;let c=`{
`;for(let b=0;b<=1;b+=o){const y=e+(s-e)*i(b);c+=b*100+`%{${a(y,1-y)}}
`}const u=c+`100% {${a(s,1-s)}}
}`,d=`__svelte_${uo(u)}_${l}`,_=xi(t),{stylesheet:g,rules:p}=Ws.get(_)||ho(_,t);p[d]||(p[d]=!0,g.insertRule(`@keyframes ${d} ${u}`,g.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${n}ms 1 both`,Hs+=1,d}function Pn(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),Hs-=n,Hs||_o())}function _o(){zr(()=>{Hs||(Ws.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&R(e)}),Ws.clear())})}let gs;function ds(t){gs=t}function Xs(){if(!gs)throw new Error("Function called outside component initialization");return gs}function bs(t){Xs().$$.on_mount.push(t)}function mo(t){Xs().$$.after_update.push(t)}function po(t){Xs().$$.on_destroy.push(t)}function go(){const t=Xs();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=Li(e,s,{cancelable:r});return n.slice().forEach(a=>{a.call(t,i)}),!i.defaultPrevented}return!0}}function Rn(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const Wt=[],Bs=[];let qt=[];const Cn=[],Yi=Promise.resolve();let Dr=!1;function Ni(){Dr||(Dr=!0,Yi.then(Fi))}function Ui(){return Ni(),Yi}function We(t){qt.push(t)}const mr=new Set;let It=0;function Fi(){if(It!==0)return;const t=gs;do{try{for(;It<Wt.length;){const e=Wt[It];It++,ds(e),bo(e.$$)}}catch(e){throw Wt.length=0,It=0,e}for(ds(null),Wt.length=0,It=0;Bs.length;)Bs.pop()();for(let e=0;e<qt.length;e+=1){const s=qt[e];mr.has(s)||(mr.add(s),s())}qt.length=0}while(Wt.length);for(;Cn.length;)Cn.pop()();Dr=!1,mr.clear(),ds(t)}function bo(t){if(t.fragment!==null){t.update(),ze(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(We)}}function yo(t){const e=[],s=[];qt.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),qt=e}let os;function vo(){return os||(os=Promise.resolve(),os.then(()=>{os=null})),os}function jn(t,e,s){t.dispatchEvent(Li(`intro${s}`))}const Is=new Set;let Tt;function de(){Tt={r:0,c:[],p:Tt}}function fe(){Tt.r||ze(Tt.c),Tt=Tt.p}function w(t,e){t&&t.i&&(Is.delete(t),t.i(e))}function D(t,e,s,r){if(t&&t.o){if(Is.has(t))return;Is.add(t),Tt.c.push(()=>{Is.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const wo={duration:0};function Pt(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,a,l,o=0;function c(){a&&Pn(t,a)}function u(){const{delay:_=0,duration:g=300,easing:p=Mi,tick:v=j,css:b}=n||wo;b&&(a=fo(t,0,1,g,_,p,b,o++)),v(0,1);const y=io()+_,$=y+g;l&&l.abort(),i=!0,We(()=>jn(t,!0,"start")),l=ao(k=>{if(i){if(k>=$)return v(1,0),jn(t,!0,"end"),c(),i=!1;if(k>=y){const O=p((k-y)/g);v(O,1-O)}}return i})}let d=!1;return{start(){d||(d=!0,Pn(t),Qs(n)?(n=n(r),vo().then(u)):u())},invalidate(){d=!1},end(){i&&(c(),i=!1)}}}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function zs(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const a=t[i],l=e[i];if(l){for(const o in a)o in l||(r[o]=1);for(const o in l)n[o]||(s[o]=l[o],n[o]=1);t[i]=l}else for(const o in a)n[o]=1}for(const a in r)a in s||(s[a]=void 0);return s}function Gs(t){return typeof t=="object"&&t!==null?t:{}}function L(t){t&&t.c()}function x(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),We(()=>{const i=t.$$.on_mount.map(Pi).filter(Qs);t.$$.on_destroy?t.$$.on_destroy.push(...i):ze(i),t.$$.on_mount=[]}),n.forEach(We)}function I(t,e){const s=t.$$;s.fragment!==null&&(yo(s.after_update),ze(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function ko(t,e){t.$$.dirty[0]===-1&&(Wt.push(t),Ni(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,s,r,n,i,a=null,l=[-1]){const o=gs;ds(t);const c=t.$$={fragment:null,ctx:[],props:i,update:j,not_equal:n,bound:Mn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Mn(),dirty:l,skip_bound:!1,root:e.target||o.$$.root};a&&a(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(d,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[d],c.ctx[d]=p)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](p),u&&ko(t,d)),_}):[],c.update(),u=!0,ze(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const d=co(e.target);c.fragment&&c.fragment.l(d),d.forEach(R)}else c.fragment&&c.fragment.c();e.intro&&w(t.$$.fragment),x(t,e.target,e.anchor),Fi()}ds(o)}class ce{constructor(){_r(this,"$$");_r(this,"$$set")}$destroy(){I(this,1),this.$destroy=j}$on(e,s){if(!Qs(s))return j;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!ro(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $o="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($o);const Lt=[];function Wi(t,e){return{subscribe:Gr(t,e).subscribe}}function Gr(t,e=j){let s;const r=new Set;function n(l){if(ie(t,l)&&(t=l,s)){const o=!Lt.length;for(const c of r)c[1](),Lt.push(c,t);if(o){for(let c=0;c<Lt.length;c+=2)Lt[c][0](Lt[c+1]);Lt.length=0}}}function i(l){n(l(t))}function a(l,o=j){const c=[l,o];return r.add(c),r.size===1&&(s=e(n,i)||j),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:a}}function Hi(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Wi(s,(a,l)=>{let o=!1;const c=[];let u=0,d=j;const _=()=>{if(u)return;d();const p=e(r?c[0]:c,a,l);i?a(p):d=Qs(p)?p:j},g=n.map((p,v)=>Ri(p,b=>{c[v]=b,u&=~(1<<v),o&&_()},()=>{u|=1<<v}));return o=!0,_(),function(){ze(g),d(),o=!1}})}const Xt=Gr(localStorage.getItem("accType"));function So(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,a=[],l="",o=t.split("/");for(o[0]||o.shift();n=o.shift();)s=n[0],s==="*"?(a.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+"/?$","i")}}function Oo(t){let e,s,r;const n=[t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ps(c,n[u]);return o!==void 0&&o&4&&(c=ps(c,zs(n,[Gs(l[2])]))),{props:c}}return i&&(e=Fs(i,a(t)),e.$on("routeEvent",t[7])),{c(){e&&L(e.$$.fragment),s=Ge()},m(l,o){e&&x(e,l,o),C(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{I(c,1)}),fe()}i?(e=Fs(i,a(l,o)),e.$on("routeEvent",l[7]),L(e.$$.fragment),w(e.$$.fragment,1),x(e,s.parentNode,s)):e=null}else if(i){const c=o&4?zs(n,[Gs(l[2])]):{};e.$set(c)}},i(l){r||(e&&w(e.$$.fragment,l),r=!0)},o(l){e&&D(e.$$.fragment,l),r=!1},d(l){l&&R(s),e&&I(e,l)}}}function To(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ps(c,n[u]);return o!==void 0&&o&6&&(c=ps(c,zs(n,[o&2&&{params:l[1]},o&4&&Gs(l[2])]))),{props:c}}return i&&(e=Fs(i,a(t)),e.$on("routeEvent",t[6])),{c(){e&&L(e.$$.fragment),s=Ge()},m(l,o){e&&x(e,l,o),C(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){de();const c=e;D(c.$$.fragment,1,0,()=>{I(c,1)}),fe()}i?(e=Fs(i,a(l,o)),e.$on("routeEvent",l[6]),L(e.$$.fragment),w(e.$$.fragment,1),x(e,s.parentNode,s)):e=null}else if(i){const c=o&6?zs(n,[o&2&&{params:l[1]},o&4&&Gs(l[2])]):{};e.$set(c)}},i(l){r||(e&&w(e.$$.fragment,l),r=!0)},o(l){e&&D(e.$$.fragment,l),r=!1},d(l){l&&R(s),e&&I(e,l)}}}function Do(t){let e,s,r,n;const i=[To,Oo],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e===u?a[e].p(o,c):(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function An(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const qr=Wi(null,function(e){e(An());const s=()=>{e(An())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),Eo=Hi(qr,t=>t.location);Hi(qr,t=>t.querystring);const xn=Gr(void 0);async function Mo(){await Ui(),window.history.back()}function Po(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Ro(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class a{constructor(T,M){if(!M||typeof M!="function"&&(typeof M!="object"||M._sveltesparouter!==!0))throw Error("Invalid component object");if(!T||typeof T=="string"&&(T.length<1||T.charAt(0)!="/"&&T.charAt(0)!="*")||typeof T=="object"&&!(T instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:Y,keys:U}=So(T);this.path=T,typeof M=="object"&&M._sveltesparouter===!0?(this.component=M.component,this.conditions=M.conditions||[],this.userData=M.userData,this.props=M.props||{}):(this.component=()=>Promise.resolve(M),this.conditions=[],this.props={}),this._pattern=Y,this._keys=U}match(T){if(n){if(typeof n=="string")if(T.startsWith(n))T=T.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const G=T.match(n);if(G&&G[0])T=T.substr(G[0].length)||"/";else return null}}const M=this._pattern.exec(T);if(M===null)return null;if(this._keys===!1)return M;const Y={};let U=0;for(;U<this._keys.length;){try{Y[this._keys[U]]=decodeURIComponent(M[U+1]||"")||null}catch{Y[this._keys[U]]=null}U++}return Y}async checkConditions(T){for(let M=0;M<this.conditions.length;M++)if(!await this.conditions[M](T))return!1;return!0}}const l=[];r instanceof Map?r.forEach((O,T)=>{l.push(new a(T,O))}):Object.keys(r).forEach(O=>{l.push(new a(O,r[O]))});let o=null,c=null,u={};const d=go();async function _(O,T){await Ui(),d(O,T)}let g=null,p=null;i&&(p=O=>{O.state&&(O.state.__svelte_spa_router_scrollY||O.state.__svelte_spa_router_scrollX)?g=O.state:g=null},window.addEventListener("popstate",p),mo(()=>{Po(g)}));let v=null,b=null;const y=qr.subscribe(async O=>{v=O;let T=0;for(;T<l.length;){const M=l[T].match(O.location);if(!M){T++;continue}const Y={route:l[T].path,location:O.location,querystring:O.querystring,userData:l[T].userData,params:M&&typeof M=="object"&&Object.keys(M).length?M:null};if(!await l[T].checkConditions(Y)){s(0,o=null),b=null,_("conditionsFailed",Y);return}_("routeLoading",Object.assign({},Y));const U=l[T].component;if(b!=U){U.loading?(s(0,o=U.loading),b=U,s(1,c=U.loadingParams),s(2,u={}),_("routeLoaded",Object.assign({},Y,{component:o,name:o.name,params:c}))):(s(0,o=null),b=null);const G=await U();if(O!=v)return;s(0,o=G&&G.default||G),b=U}M&&typeof M=="object"&&Object.keys(M).length?s(1,c=M):s(1,c=null),s(2,u=l[T].props),_("routeLoaded",Object.assign({},Y,{component:o,name:o.name,params:c})).then(()=>{xn.set(c)});return}s(0,o=null),b=null,xn.set(void 0)});po(()=>{y(),p&&window.removeEventListener("popstate",p)});function $(O){Rn.call(this,t,O)}function k(O){Rn.call(this,t,O)}return t.$$set=O=>{"routes"in O&&s(3,r=O.routes),"prefix"in O&&s(4,n=O.prefix),"restoreScrollState"in O&&s(5,i=O.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[o,c,u,r,n,i,$,k]}class Vr extends ce{constructor(e){super(),le(this,e,Ro,Do,ie,{routes:3,prefix:4,restoreScrollState:5})}}function In(t){let e;return{c(){e=m("a"),e.textContent="Add book",h(e,"class","nav-link svelte-oup04o"),h(e,"href","./#/add-book")},m(s,r){C(s,e,r)},d(s){s&&R(e)}}}function Co(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$,k,O,T,M,Y,U,G,W,X,we,ae,Oe,Te,ee,_e,se=t[0]=="staff"&&In();return{c(){e=m("nav"),s=m("div"),r=m("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=S(),i=m("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',a=S(),l=m("div"),o=m("div"),c=m("a"),c.textContent="Books",u=S(),d=m("a"),d.textContent="Authors",_=S(),g=m("a"),g.textContent="Publishers",p=S(),se&&se.c(),v=S(),b=m("li"),y=m("a"),y.innerHTML='<i class="bi bi-person-fill"></i> Salles',$=S(),k=m("ul"),O=m("li"),O.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Profile</a>',T=S(),M=m("li"),M.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Settings</a>',Y=S(),U=m("li"),U.innerHTML='<hr class="dropdown-divider"/>',G=S(),W=m("li"),X=m("a"),X.textContent="Log Out",we=S(),ae=m("button"),Oe=m("span"),h(r,"class","navbar-brand m-0 svelte-oup04o"),h(r,"href","./#/"),h(i,"class","navbar-toggler"),h(i,"type","button"),h(i,"data-bs-toggle","collapse"),h(i,"data-bs-target","#navbarContent"),h(c,"class","nav-link svelte-oup04o"),h(c,"href","./#/search"),h(d,"class","nav-link svelte-oup04o"),h(d,"href","./#/search/author"),h(g,"class","nav-link svelte-oup04o"),h(g,"href","./#/search/publisher"),h(y,"class","nav-link dropdown-toggle svelte-oup04o"),h(y,"href","#"),h(y,"role","button"),h(y,"data-bs-toggle","dropdown"),h(y,"aria-expanded","false"),h(X,"class","dropdown-item text-danger"),h(X,"href","./#/"),h(k,"class","dropdown-menu"),h(b,"class","nav-item dropdown"),h(Oe,"class",Te="bi bi-"+t[1]+" svelte-oup04o"),h(ae,"title","Switch theme"),h(ae,"class","px-1 border-0 bg-transparent nav-link svelte-oup04o"),h(o,"class","navbar-nav ms-auto svelte-oup04o"),h(l,"class","collapse navbar-collapse"),h(l,"id","navbarContent"),h(s,"class","container px-4 fw-semibold"),h(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(me,et){C(me,e,et),f(e,s),f(s,r),f(s,n),f(s,i),f(s,a),f(s,l),f(l,o),f(o,c),f(o,u),f(o,d),f(o,_),f(o,g),f(o,p),se&&se.m(o,null),f(o,v),f(o,b),f(b,y),f(b,$),f(b,k),f(k,O),f(k,T),f(k,M),f(k,Y),f(k,U),f(k,G),f(k,W),f(W,X),f(o,we),f(o,ae),f(ae,Oe),ee||(_e=[ke(X,"click",t[3]),ke(ae,"click",t[2])],ee=!0)},p(me,[et]){me[0]=="staff"?se||(se=In(),se.c(),se.m(o,v)):se&&(se.d(1),se=null),et&2&&Te!==(Te="bi bi-"+me[1]+" svelte-oup04o")&&h(Oe,"class",Te)},i:j,o:j,d(me){me&&R(e),se&&se.d(),ee=!1,ze(_e)}}}function jo(t,e,s){let r,n;Xt.subscribe(o=>s(0,n=o));let i=localStorage.getItem("theme")||"light";function a(){s(4,i=i=="light"?"dark":"light"),localStorage.setItem("theme",i)}function l(){Xt.set(""),localStorage.removeItem("accType")}return t.$$.update=()=>{t.$$.dirty&16&&document.querySelector("body").setAttribute("data-bs-theme",i),t.$$.dirty&16&&s(1,r=i=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,r,a,l,i]}class Bi extends ce{constructor(e){super(),le(this,e,jo,Co,ie,{})}}function Ao(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$;return{c(){e=m("section"),s=m("div"),r=m("div"),n=m("div"),i=m("img"),l=S(),o=m("div"),c=m("img"),d=S(),_=m("div"),g=m("img"),v=S(),b=m("button"),b.innerHTML='<span class="carousel-control-prev-icon"></span>',y=S(),$=m("button"),$.innerHTML='<span class="carousel-control-next-icon"></span>',Ae(i.src,a=pr)||h(i,"src",a),h(i,"class","d-block w-100"),h(i,"alt","..."),h(n,"class","carousel-item active"),Ae(c.src,u=pr)||h(c,"src",u),h(c,"class","d-block w-100"),h(c,"alt","..."),h(o,"class","carousel-item"),Ae(g.src,p=pr)||h(g,"src",p),h(g,"class","d-block w-100"),h(g,"alt","..."),h(_,"class","carousel-item"),h(r,"class","carousel-inner"),h(b,"class","carousel-control-prev"),h(b,"type","button"),h(b,"data-bs-target","#homeAdCarousel"),h(b,"data-bs-slide","prev"),h($,"class","carousel-control-next"),h($,"type","button"),h($,"data-bs-target","#homeAdCarousel"),h($,"data-bs-slide","next"),h(s,"id","homeAdCarousel"),h(s,"class","carousel slide"),h(s,"data-bs-ride","carousel"),h(s,"data-bs-interval","8000")},m(k,O){C(k,e,O),f(e,s),f(s,r),f(r,n),f(n,i),f(r,l),f(r,o),f(o,c),f(r,d),f(r,_),f(_,g),f(s,v),f(s,b),f(s,y),f(s,$)},p:j,i:j,o:j,d(k){k&&R(e)}}}let pr="./cover.jpg";class xo extends ce{constructor(e){super(),le(this,e,null,Ao,ie,{})}}function Io(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p;return{c(){e=m("div"),s=m("img"),n=S(),i=m("div"),a=m("h5"),l=m("a"),o=Q(t[1]),u=S(),d=m("small"),_=m("i"),g=S(),p=Q(t[2]),Ae(s.src,r="./"+t[0]+".jpg")||h(s,"src",r),h(s,"alt","book cover"),h(s,"class","svelte-1a99e4f"),h(l,"class","stretched-link svelte-1a99e4f"),h(l,"href",c="./#/book/"+t[0]),h(a,"class","card-title"),h(_,"class","bi bi-person"),h(d,"class","card-text"),h(i,"class","card-body"),h(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(v,b){C(v,e,b),f(e,s),f(e,n),f(e,i),f(i,a),f(a,l),f(l,o),f(i,u),f(i,d),f(d,_),f(d,g),f(d,p)},p(v,[b]){b&1&&!Ae(s.src,r="./"+v[0]+".jpg")&&h(s,"src",r),b&2&&ne(o,v[1]),b&1&&c!==(c="./#/book/"+v[0])&&h(l,"href",c),b&4&&ne(p,v[2])},i:j,o:j,d(v){v&&R(e)}}}function Lo(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e;return t.$$set=a=>{"id"in a&&s(0,r=a.id),"title"in a&&s(1,n=a.title),"author"in a&&s(2,i=a.author)},[r,n,i]}class er extends ce{constructor(e){super(),le(this,e,Lo,Io,ie,{id:0,title:1,author:2})}}function Ln(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("a"),r=m("button"),n=Q(t[3]),i=S(),a=m("i"),h(a,"class","bi bi-arrow-right"),h(r,"class","btn btn-outline-primary btn-sm"),h(s,"href",l="./#/"+t[2]),h(e,"class","align-middle align-self-center")},m(o,c){C(o,e,c),f(e,s),f(s,r),f(r,n),f(r,i),f(r,a)},p(o,c){c&8&&ne(n,o[3]),c&4&&l!==(l="./#/"+o[2])&&h(s,"href",l)},d(o){o&&R(e)}}}function Yo(t){let e,s,r,n,i,a,l,o,c,u,d=t[2]!==""&&Ln(t);const _=t[5].default,g=Fr(_,t,t[4],null);return{c(){e=m("section"),s=m("div"),r=m("h4"),n=m("i"),a=S(),l=Q(t[0]),o=S(),d&&d.c(),c=S(),g&&g.c(),h(n,"class",i="bi bi-"+t[1]),h(r,"class","my-3"),h(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,v){C(p,e,v),f(e,s),f(s,r),f(r,n),f(r,a),f(r,l),f(s,o),d&&d.m(s,null),f(e,c),g&&g.m(e,null),u=!0},p(p,[v]){(!u||v&2&&i!==(i="bi bi-"+p[1]))&&h(n,"class",i),(!u||v&1)&&ne(l,p[0]),p[2]!==""?d?d.p(p,v):(d=Ln(p),d.c(),d.m(s,null)):d&&(d.d(1),d=null),g&&g.p&&(!u||v&16)&&Hr(g,_,p,p[4],u?Wr(_,p[4],v,null):Br(p[4]),null)},i(p){u||(w(g,p),u=!0)},o(p){D(g,p),u=!1},d(p){p&&R(e),d&&d.d(),g&&g.d(p)}}}function No(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:a}=e,{link:l=""}=e,{linkText:o="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,a=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,o=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class gt extends ce{constructor(e){super(),le(this,e,No,Yo,ie,{title:0,icon:1,link:2,linkText:3})}}const Uo="modulepreload",Fo=function(t){return"/library/"+t},Yn={},es=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=Fo(l),l in Yn)return;Yn[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Uo,o||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),o)return new Promise((d,_)=>{u.addEventListener("load",d),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Wo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>es(()=>Promise.resolve().then(()=>Ss),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Jr extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Ho extends Jr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bo extends Jr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zo extends Jr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Er;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Er||(Er={}));var Go=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class qo{constructor(e,{headers:s={},customFetch:r,region:n=Er.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Wo(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Go(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=s;let l={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(l["x-region"]=o);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(l["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(l["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new Ho(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Bo(u);if(!u.ok)throw new zo(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var Vo=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=Vo();const Jo=ts.fetch,Kr=ts.fetch.bind(ts),zi=ts.Headers,Ko=ts.Request,Zo=ts.Response,Ss=Object.freeze(Object.defineProperty({__proto__:null,Headers:zi,Request:Ko,Response:Zo,default:Kr,fetch:Jo},Symbol.toStringTag,{value:"Module"}));class Qo extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Xo{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Kr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,o;let c=null,u=null,d=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&v===""?(_=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((o=c==null?void 0:c.details)===null||o===void 0)&&o.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new Qo(c)}return{error:c,data:u,count:d,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,o;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class el extends Xo{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const o=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ht extends el{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class tl{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Ht({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(a.length>0){const l=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ht({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ht({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Ht({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ht({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const sl="1.15.2",rl={"X-Client-Info":`postgrest-js/${sl}`};class Zr{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},rl),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new tl(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Zr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let o;r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{l.searchParams.append(u,d)})):(a="POST",o=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Ht({method:a,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const nl="2.9.5",il={"X-Client-Info":`realtime-js/${nl}`},al="1.0.0",Gi=1e4,ol=1e3;var Vt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vt||(Vt={}));var Pe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pe||(Pe={}));var Ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ne||(Ne={}));var Mr;(function(t){t.websocket="websocket"})(Mr||(Mr={}));var Ot;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ot||(Ot={}));class qi{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ll{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+n));a=a+n;const o=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class gr{constructor(e,s,r={},n=Gi){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Nn||(Nn={}));class fs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,n,i,a),this.pendingDiffs.forEach(o=>{this.state=fs.syncDiff(this.state,o,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=fs.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),a=this.transformState(s),l={},o={};return this.map(i,(c,u)=>{a[c]||(o[c]=u)}),this.map(a,(c,u)=>{const d=i[c];if(d){const _=u.map(b=>b.presence_ref),g=d.map(b=>b.presence_ref),p=u.filter(b=>g.indexOf(b.presence_ref)<0),v=d.filter(b=>_.indexOf(b.presence_ref)<0);p.length>0&&(l[c]=p),v.length>0&&(o[c]=v)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:o},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,o)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(o),u.length>0){const d=e[l].map(g=>g.presence_ref),_=u.filter(g=>d.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,o)}),this.map(a,(l,o)=>{let c=e[l];if(!c)return;const u=o.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[l]=c,n(l,c,o),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const Un=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=cl(a,t,e,n),i),{})},cl=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,a=s[t];return i&&!r.includes(i)?Vi(i,a):Pr(a)},Vi=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return fl(e,s)}switch(t){case re.bool:return ul(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return hl(e);case re.json:case re.jsonb:return dl(e);case re.timestamp:return _l(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Pr(e);default:return Pr(e)}},Pr=t=>t,ul=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},hl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},fl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Vi(e,l))}return t},_l=t=>typeof t=="string"?t.replace(" ","T"):t;var Fn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Fn||(Fn={}));var Wn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Wn||(Wn={}));var Hn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class Qr{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new gr(this,Ne.join,this.params,this.timeout),this.rejoinTimer=new qi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ne.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new fs(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},o={broadcast:i,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,_=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const v=d[p],{filter:{event:b,schema:y,table:$,filter:k}}=v,O=c&&c[p];if(O&&O.event===b&&O.schema===y&&O.table===$&&O.filter===k)g.push(Object.assign(Object.assign({},v),{id:O.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(o){return o.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,o;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ne.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new gr(this,Ne.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new gr(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:o,leave:c,join:u}=Ne;if(r&&[l,o,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,v,b;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(v=g.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(g=>g.callback(_,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,v,b,y,$,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const O=g.id,T=(p=g.filter)===null||p===void 0?void 0:p.event;return O&&((v=s.ids)===null||v===void 0?void 0:v.includes(O))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=($=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return O==="*"||O===((k=s==null?void 0:s.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:v,table:b,commit_timestamp:y,type:$,errors:k}=p;_=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:y,eventType:$,new:{},old:{},errors:k}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===Pe.closed}_isJoined(){return this.state===Pe.joined}_isJoining(){return this.state===Pe.joining}_isLeaving(){return this.state===Pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Qr.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ne.close,{},e)}_onError(e){this._on(Ne.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Un(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Un(e.columns,e.old_record)),s}}const ml=()=>{},pl=typeof WebSocket<"u";class gl{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=il,this.params={},this.timeout=Gi,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ml,this.conn=null,this.sendBuffer=[],this.serializer=new ll,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>es(()=>Promise.resolve().then(()=>Ss),void 0).then(({default:o})=>o(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${Mr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(pl){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new bl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),es(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return Ot.Connecting;case Vt.open:return Ot.Open;case Vt.closing:return Ot.Closing;default:return Ot.Closed}}isConnected(){return this.connectionState()===Ot.Open}channel(e,s={config:{}}){const r=new Qr(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(Ne.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:al}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:a}=s;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ne.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ol,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class bl{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Vt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Xr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class yl extends Xr{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Bn extends Xr{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var vl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Ji=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>es(()=>Promise.resolve().then(()=>Ss),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},wl=()=>vl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield es(()=>Promise.resolve().then(()=>Ss),void 0)).Response:Response});var ss=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const br=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kl=(t,e)=>ss(void 0,void 0,void 0,function*(){const s=yield wl();t instanceof s?t.json().then(r=>{e(new yl(br(r),t.status||500))}).catch(r=>{e(new Bn(br(r),r))}):e(new Bn(br(t),t))}),$l=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function tr(t,e,s,r,n,i){return ss(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,$l(e,r,n,i)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>a(o)).catch(o=>kl(o,l))})})}function Rr(t,e,s,r){return ss(this,void 0,void 0,function*(){return tr(t,"GET",e,s,r)})}function ft(t,e,s,r,n){return ss(this,void 0,void 0,function*(){return tr(t,"POST",e,r,n,s)})}function Sl(t,e,s,r,n){return ss(this,void 0,void 0,function*(){return tr(t,"PUT",e,r,n,s)})}function Ki(t,e,s,r,n){return ss(this,void 0,void 0,function*(){return tr(t,"DELETE",e,r,n,s)})}var Ce=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Ol={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tl{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Ji(n)}uploadOrUpdate(e,s,r,n){return Ce(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},zn),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl)):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType);const o=this._removeEmptyFolders(s),c=this._getFinalPath(o),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield u.json();return u.ok?{data:{path:o,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if($e(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let o;const c=Object.assign({upsert:zn.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(l.toString(),{method:"PUT",body:o,headers:u}),_=yield d.json();return d.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if($e(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e){return Ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield ft(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new Xr("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}update(e,s,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Ce(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}copy(e,s){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield ft(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ft(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Ce(this,void 0,void 0,function*(){try{const n=yield ft(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}download(e,s){return Ce(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Rr(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if($e(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Ce(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}list(e,s,r){return Ce(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ol),s),{prefix:e||""});return{data:yield ft(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Dl="2.5.5",El={"X-Client-Info":`storage-js/${Dl}`};var Yt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Ml{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},El),s),this.fetch=Ji(r)}listBuckets(){return Yt(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}getBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Yt(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Yt(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Yt(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}}class Pl extends Ml{constructor(e,s={},r){super(e,s,r)}from(e){return new Tl(this.url,this.headers,e,this.fetch)}}const Rl="2.43.2";let hs="";typeof Deno<"u"?hs="deno":typeof document<"u"?hs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hs="react-native":hs="node";const Cl={"X-Client-Info":`supabase-js-${hs}/${Rl}`},jl={headers:Cl},Al={schema:"public"},xl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Il={};var Ll=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Yl=t=>{let e;return t?e=t:typeof fetch>"u"?e=Kr:e=fetch,(...s)=>e(...s)},Nl=()=>typeof Headers>"u"?zi:Headers,Ul=(t,e,s)=>{const r=Yl(s),n=Nl();return(i,a)=>Ll(void 0,void 0,void 0,function*(){var l;const o=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};function Fl(t){return t.replace(/\/$/,"")}function Wl(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:a,auth:l,realtime:o,global:c}=e;return{db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},o),n),global:Object.assign(Object.assign({},c),i)}}const Zi="2.64.2",Hl="http://localhost:9999",Bl="supabase.auth.token",zl={"X-Client-Info":`gotrue-js/${Zi}`},Gn=10,Cr="X-Supabase-Api-Version",Qi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Gl(t){return Math.round(Date.now()/1e3)+t}function ql(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ye=()=>typeof document<"u",wt={tested:!1,writable:!1},_s=()=>{if(!Ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wt.tested)return wt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),wt.tested=!0,wt.writable=!0}catch{wt.tested=!0,wt.writable=!1}return wt.writable};function yr(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const Xi=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>es(()=>Promise.resolve().then(()=>Ss),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Vl=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ea=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Ps=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},vr=async(t,e)=>{await t.removeItem(e)};function Jl(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,a,l,o,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=a<<2|l>>4,n=(l&15)<<4|o>>2,i=(o&3)<<6|c,s=s+String.fromCharCode(r),o!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class sr{constructor(){this.promise=new sr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}sr.promiseConstructor=Promise;function qn(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(Jl(r))}async function Kl(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Zl(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Ql(t){return("0"+t.toString(16)).substr(-2)}function Xl(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Ql).join("")}async function ec(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function tc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await ec(t);return tc(s)}async function Nt(t,e,s=!1){const r=Xl();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ea(t,`${e}-code-verifier`,n);const i=await sc(r);return[i,r===i?"plain":"s256"]}const rc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nc(t){const e=t.headers.get(Cr);if(!e||!e.match(rc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class en extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ic extends en{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function ac(t){return H(t)&&t.name==="AuthApiError"}class ta extends en{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Rt extends en{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class kt extends Rt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class wr extends Rt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rs extends Rt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Cs extends Rt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vn extends Rt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jr extends Rt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function kr(t){return H(t)&&t.name==="AuthRetryableFetchError"}class Jn extends Rt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var oc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const St=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lc=[502,503,504];async function Kn(t){var e;if(!Vl(t))throw new jr(St(t),0);if(lc.includes(t.status))throw new jr(St(t),t.status);let s;try{s=await t.json()}catch(i){throw new ta(St(i),i)}let r;const n=nc(t);if(n&&n.getTime()>=Qi["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Jn(St(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Jn(St(s),t.status,s.weak_password.reasons);throw new ic(St(s),t.status||500,r)}const cc=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function q(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Cr]||(i[Cr]=Qi["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await uc(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function uc(t,e,s,r,n,i){const a=cc(e,r,n,i);let l;try{l=await t(s,Object.assign({},a))}catch(o){throw console.error(o),new jr(St(o),0)}if(l.ok||await Kn(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await Kn(o)}}function dt(t){var e;let s=null;_c(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Gl(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Zn(t){const e=dt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _t(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hc(t){return{data:t,error:null}}function dc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,a=oc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},o=Object.assign({},a);return{data:{properties:l,user:o},error:null}}function fc(t){return t}function _c(t){return t.access_token&&t.refresh_token&&t.expires_in}var mc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class pc{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Xi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:_t})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=mc(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:dc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(H(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_t})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,a,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:fc});if(u.error)throw u.error;const d=await u.json(),_=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_t})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:_t})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:_t})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(H(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}}const gc={getItem:t=>_s()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{_s()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{_s()&&globalThis.localStorage.removeItem(t)}};function Qn(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function bc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ut={debug:!!(globalThis&&_s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sa extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yc extends sa{}async function vc(t,e,s){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ut.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}bc();const wc={url:Hl,storageKey:Bl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ls=30*1e3,Xn=3;async function ei(t,e,s){return await s()}class ys{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ys.nextInstanceID,ys.nextInstanceID+=1,this.instanceID>0&&Ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},wc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new pc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Xi(n.fetch),this.lock=n.lock||ei,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ye()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=vc:this.lock=ei,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:_s()?this.storage=gc:(this.memoryStorage={},this.storage=Qn(this.memoryStorage)):(this.memoryStorage={},this.storage=Qn(this.memoryStorage)),Ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Ye()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return H(e)?{error:e}:{error:new ta("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:dt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Nt(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:d,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:dt})}else if("phone"in e){const{phone:u,password:d,options:_}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:dt})}else throw new Rs("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zn})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zn})}else throw new Rs("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Ps(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:a}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dt});return await vr(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=e,l=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:dt}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new wr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:o}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Nt(this.storage,this.storageKey));const{error:d}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:o}=e,{data:c,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(a=o==null?void 0:o.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Rs("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:dt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,c=a.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Nt(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:hc})}catch(i){if(H(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new kt;const{error:n}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await q(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:l}=await q(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Rs("You must provide either an email or phone number and a type")}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Ps(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(o,c,u){return!a&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(o,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_t}):await this._useSession(async s=>{var r,n,i;const{data:a,error:l}=s;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:_t})})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new kt;const a=n.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await Nt(this.storage,this.storageKey));const{data:c,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:a.access_token,xform:_t});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return qn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const a=qn(e.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(H(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new kt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!Ye())throw new Cs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Cs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Vn("Not a valid PKCE flow url.");const s=yr(window.location.href);if(e){if(!s.code)throw new Vn("No code detected.");const{data:$,error:k}=await this._exchangeCodeForSession(s.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:$.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new Cs(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:o,token_type:c}=s;if(!i||!l||!a||!c)throw new Cs("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(l);let _=u+d;o&&(_=parseInt(o));const g=_-u;g*1e3<=ls&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const p=_-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:_,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:s.type},error:null}}catch(s){if(H(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=yr(window.location.href);return!!(Ye()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=yr(window.location.href),s=await Ps(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(ac(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=ql(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Nt(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(H(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,l,o,c,u;const{data:d,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Ye()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(H(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Zl(async n=>(n>0&&await Kl(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dt})),(n,i)=>{const a=200*Math.pow(2,n);return i&&kr(i)&&Date.now()+a-r<ls})}catch(r){if(this._debug(s,"error",r),H(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Ye()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Ps(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+Gn;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Gn}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),kr(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new sr;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new kt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),H(i)){const a={session:null,error:i};return kr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(o){i.push(o)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ea(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ls);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/ls);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ls}ms, refresh threshold is ${Xn} ticks`),n<=Xn&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sa)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Nt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await q(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(H(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(H(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}}ys.nextInstanceID=0;const kc=ys;class $c extends kc{constructor(e){super(e)}}var Sc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(d){a(d)}}function o(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Oc{constructor(e,s,r){var n,i,a,l,o,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const _=Fl(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Al,realtime:Il,auth:Object.assign(Object.assign({},xl),{storageKey:g}),global:jl},v=Wl(r??{},p);this.storageKey=(i=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=v.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((o=v.auth)!==null&&o!==void 0?o:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=Ul(s,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Zr(`${_}/rest/v1`,{headers:this.headers,schema:(d=v.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new qo(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Sc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,debug:l},o,c){var u;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $c({url:this.authUrl,headers:Object.assign(Object.assign({},d),o),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new gl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tc=(t,e,s)=>new Oc(t,e,s),it=Tc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function Ct(t,{delay:e=0,duration:s=400,easing:r=Mi}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function Dc(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',h(e,"class","d-flex justify-content-center")},m(s,r){C(s,e,r)},p:j,i:j,o:j,d(s){s&&R(e)}}}class yt extends ce{constructor(e){super(),le(this,e,null,Dc,ie,{})}}function Ec(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=S(),i=m("div"),a=m("h6"),l=m("a"),o=Q(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Ae(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","author"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/author/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,d){C(u,e,d),f(e,s),f(e,n),f(e,i),f(i,a),f(a,l),f(l,o)},p(u,[d]){d&1&&ne(o,u[0]),d&2&&c!==(c="./#/author/"+u[1])&&h(l,"href",c)},i:j,o:j,d(u){u&&R(e)}}}function Mc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class ra extends ce{constructor(e){super(),le(this,e,Mc,Ec,ie,{name:0,id:1})}}function Pc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=S(),i=m("div"),a=m("h6"),l=m("a"),o=Q(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),Ae(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","publisher"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/publisher/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,d){C(u,e,d),f(e,s),f(e,n),f(e,i),f(i,a),f(a,l),f(l,o)},p(u,[d]){d&1&&ne(o,u[0]),d&2&&c!==(c="./#/publisher/"+u[1])&&h(l,"href",c)},i:j,o:j,d(u){u&&R(e)}}}function Rc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class na extends ce{constructor(e){super(),le(this,e,Rc,Pc,ie,{name:0,id:1})}}function Cc(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("h2"),r.textContent="Error",n=S(),i=m("p"),a=Q(t[0]),l=Q(": "),o=Q(t[1]),c=S(),u=m("a"),u.textContent="Reload",h(u,"href","./#/"),h(u,"class","fw-bold"),h(s,"class","text-center"),h(e,"class","d-flex align-items-center justify-content-center my-3")},m(d,_){C(d,e,_),f(e,s),f(s,r),f(s,n),f(s,i),f(i,a),f(i,l),f(i,o),f(s,c),f(s,u)},p(d,[_]){_&1&&ne(a,d[0]),_&2&&ne(o,d[1])},i:j,o:j,d(d){d&&R(e)}}}function jc(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let tn=class extends ce{constructor(e){super(),le(this,e,jc,Cc,ie,{code:0,message:1})}};function ti(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function si(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function ri(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function Ac(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function xc(t){let e,s;return e=new tn({props:{message:t[3]}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Ic(t){let e,s,r=ve(Object.entries(t[0])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ni(ri(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){C(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&1){r=ve(Object.entries(a[0]));let o;for(o=0;o<r.length;o+=1){const c=ri(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=ni(c),n[o].c(),w(n[o],1),n[o].m(e,null))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function ni(t){let e,s;return e=new er({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Lc(t){let e,s,r,n;const i=[Ic,xc,Ac],a=[];function l(o,c){return o[0]?0:o[3]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function Yc(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Nc(t){let e,s;return e=new tn({props:{message:t[4]}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Uc(t){let e,s,r=ve(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ii(si(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){C(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=ve(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=si(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=ii(c),n[o].c(),w(n[o],1),n[o].m(e,null))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function ii(t){let e,s;return e=new ra({props:{id:t[13].author_id,name:t[13].name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Fc(t){let e,s,r,n;const i=[Uc,Nc,Yc],a=[];function l(o,c){return o[1]?0:o[4]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function Wc(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Hc(t){let e,s;return e=new tn({props:{message:t[5]}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Bc(t){let e,s,r=ve(Object.entries(t[2])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ai(ti(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){C(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&4){r=ve(Object.entries(a[2]));let o;for(o=0;o<r.length;o+=1){const c=ti(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=ai(c),n[o].c(),w(n[o],1),n[o].m(e,null))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function ai(t){let e,s;return e=new na({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function zc(t){let e,s,r,n;const i=[Bc,Hc,Wc],a=[];function l(o,c){return o[2]?0:o[5]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function Gc(t){let e,s,r,n,i,a,l,o,c,u;return s=new xo({}),n=new gt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Lc]},$$scope:{ctx:t}}}),a=new gt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Fc]},$$scope:{ctx:t}}}),o=new gt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[zc]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=S(),L(n.$$.fragment),i=S(),L(a.$$.fragment),l=S(),L(o.$$.fragment),h(e,"class","container mb-5")},m(d,_){C(d,e,_),x(s,e,null),f(e,r),x(n,e,null),f(e,i),x(a,e,null),f(e,l),x(o,e,null),u=!0},p(d,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:d}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:d}),a.$set(p);const v={};_&524324&&(v.$$scope={dirty:_,ctx:d}),o.$set(v)},i(d){u||(w(s.$$.fragment,d),w(n.$$.fragment,d),w(a.$$.fragment,d),w(o.$$.fragment,d),d&&(c||We(()=>{c=Pt(e,Ct,{duration:500}),c.start()})),u=!0)},o(d){D(s.$$.fragment,d),D(n.$$.fragment,d),D(a.$$.fragment,d),D(o.$$.fragment,d),u=!1},d(d){d&&R(e),I(s),I(n),I(a),I(o)}}}function qc(t,e,s){let r,n,i,a,l,o;async function c(){const{data:_,error:g}=await it.rpc("get_books");s(0,r=_),s(3,a=g?g.message:"")}async function u(){const{data:_,error:g}=await it.rpc("get_authors");s(1,n=_),s(4,l=g?g.message:"")}async function d(){const{data:_,error:g}=await it.rpc("get_publishers");s(2,i=_),s(5,o=g||"")}return c(),u(),d(),[r,n,i,a,l,o]}class Vc extends ce{constructor(e){super(),le(this,e,qc,Gc,ie,{})}}function Jc(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=S(),n=m("div"),i=m("h4"),a=Q(t[0]),h(s,"class","btn"),Mt(s,"font-size","1.5em"),h(i,"class","my-auto"),h(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){C(c,e,u),f(e,s),f(e,r),f(e,n),f(n,i),f(i,a),l||(o=ke(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&ne(a,c[0])},i:j,o:j,d(c){c&&R(e),l=!1,o()}}}function Kc(t,e,s){let{text:r}=e;const n=()=>Mo();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class jt extends ce{constructor(e){super(),le(this,e,Kc,Jc,ie,{text:0})}}function Zc(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$;const k=t[5].default,O=Fr(k,t,t[4],null);return{c(){e=m("div"),s=m("div"),r=m("div"),n=m("div"),i=m("h1"),a=Q(t[0]),l=S(),o=m("button"),c=S(),u=m("div"),O&&O.c(),d=S(),_=m("div"),g=m("button"),p=Q(t[3]),v=S(),b=m("button"),y=Q(t[2]),h(i,"class","modal-title fs-5"),h(i,"id","exampleModalLabel"),h(o,"type","button"),h(o,"class","btn-close"),h(o,"data-bs-dismiss","modal"),h(o,"aria-label","Close"),h(n,"class","modal-header"),h(u,"class","modal-body"),h(g,"type","button"),h(g,"class","btn btn-secondary"),h(g,"data-bs-dismiss","modal"),h(b,"type","button"),h(b,"class","btn btn-primary"),h(_,"class","modal-footer"),h(r,"class","modal-content"),h(s,"class","modal-dialog"),h(e,"class","modal fade"),h(e,"id",t[1]),h(e,"tabindex","-1"),h(e,"aria-hidden","true")},m(T,M){C(T,e,M),f(e,s),f(s,r),f(r,n),f(n,i),f(i,a),f(n,l),f(n,o),f(r,c),f(r,u),O&&O.m(u,null),f(r,d),f(r,_),f(_,g),f(g,p),f(_,v),f(_,b),f(b,y),$=!0},p(T,[M]){(!$||M&1)&&ne(a,T[0]),O&&O.p&&(!$||M&16)&&Hr(O,k,T,T[4],$?Wr(k,T[4],M,null):Br(T[4]),null),(!$||M&8)&&ne(p,T[3]),(!$||M&4)&&ne(y,T[2]),(!$||M&2)&&h(e,"id",T[1])},i(T){$||(w(O,T),$=!0)},o(T){D(O,T),$=!1},d(T){T&&R(e),O&&O.d(T)}}}function Qc(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i="Modal"}=e,{id:a="modal"}=e,{pButton:l="Confirm"}=e,{sButton:o="Cancel"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"id"in c&&s(1,a=c.id),"pButton"in c&&s(2,l=c.pButton),"sButton"in c&&s(3,o=c.sButton),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class Xc extends ce{constructor(e){super(),le(this,e,Qc,Zc,ie,{title:0,id:1,pButton:2,sButton:3})}}function oi(t,e,s){const r=t.slice();return r[6]=e[s][0],r[7]=e[s][1],r}function eu(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function tu(t){let e,s,r,n,i,a,l,o=t[1].isbn+"",c,u,d,_,g,p=t[1].title+"",v,b,y,$=t[1].description+"",k,O,T,M,Y,U,G=t[1].author.name+"",W,X,we,ae,Oe,Te,ee,_e=t[1].publisher.name+"",se,me,et,Ve,Je,xt,Le=t[1].shelf_number+"",vt,as,B,Z,ge=t[0]=="client"&&li(t);return{c(){e=m("div"),s=m("div"),r=m("img"),i=S(),a=m("small"),l=Q("ISBN: "),c=Q(o),u=S(),ge&&ge.c(),d=S(),_=m("div"),g=m("h1"),v=Q(p),b=S(),y=m("p"),k=Q($),O=S(),T=m("p"),M=m("b"),M.textContent="Author:",Y=S(),U=m("a"),W=Q(G),we=S(),ae=m("p"),Oe=m("b"),Oe.textContent="Publisher:",Te=S(),ee=m("a"),se=Q(_e),et=S(),Ve=m("p"),Je=m("b"),Je.textContent="Shelf Number:",xt=S(),vt=Q(Le),as=S(),B=m("p"),B.innerHTML='<b>Category:</b> <a href="/"></a>',h(r,"id","img-cover"),h(r,"class","border p-3"),Ae(r.src,n="./"+t[2]+".jpg")||h(r,"src",n),h(r,"alt","book cover"),h(r,"height","300"),h(r,"width","300"),Mt(r,"object-fit","contain"),h(a,"class","text-secondary"),h(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),h(g,"id","book-title"),h(g,"class","mb-2 pb-2"),h(y,"id","book-description"),h(U,"href",X="./#/author/"+t[1].author.author_id),h(ee,"href",me="./#/publisher/"+t[1].publisher.publisher_id),h(_,"id","details-container"),h(_,"class","container"),h(e,"class","d-md-flex d-block")},m(be,De){C(be,e,De),f(e,s),f(s,r),f(s,i),f(s,a),f(a,l),f(a,c),f(s,u),ge&&ge.m(s,null),f(e,d),f(e,_),f(_,g),f(g,v),f(_,b),f(_,y),f(y,k),f(_,O),f(_,T),f(T,M),f(T,Y),f(T,U),f(U,W),f(_,we),f(_,ae),f(ae,Oe),f(ae,Te),f(ae,ee),f(ee,se),f(_,et),f(_,Ve),f(Ve,Je),f(Ve,xt),f(Ve,vt),f(_,as),f(_,B),Z=!0},p(be,De){(!Z||De&2)&&o!==(o=be[1].isbn+"")&&ne(c,o),be[0]=="client"?ge?De&1&&w(ge,1):(ge=li(be),ge.c(),w(ge,1),ge.m(s,null)):ge&&(de(),D(ge,1,1,()=>{ge=null}),fe()),(!Z||De&2)&&p!==(p=be[1].title+"")&&ne(v,p),(!Z||De&2)&&$!==($=be[1].description+"")&&ne(k,$),(!Z||De&2)&&G!==(G=be[1].author.name+"")&&ne(W,G),(!Z||De&2&&X!==(X="./#/author/"+be[1].author.author_id))&&h(U,"href",X),(!Z||De&2)&&_e!==(_e=be[1].publisher.name+"")&&ne(se,_e),(!Z||De&2&&me!==(me="./#/publisher/"+be[1].publisher.publisher_id))&&h(ee,"href",me),(!Z||De&2)&&Le!==(Le=be[1].shelf_number+"")&&ne(vt,Le)},i(be){Z||(w(ge),Z=!0)},o(be){D(ge),Z=!1},d(be){be&&R(e),ge&&ge.d()}}}function li(t){let e,s,r,n;return r=new Xc({props:{id:"reserve",$$slots:{default:[su]},$$scope:{ctx:t}}}),{c(){e=m("button"),e.textContent="Reserve",s=S(),L(r.$$.fragment),h(e,"class","btn btn-primary w-50"),h(e,"data-bs-toggle","modal"),h(e,"data-bs-target","#reserve")},m(i,a){C(i,e,a),C(i,s,a),x(r,i,a),n=!0},i(i){n||(w(r.$$.fragment,i),n=!0)},o(i){D(r.$$.fragment,i),n=!1},d(i){i&&(R(e),R(s)),I(r,i)}}}function su(t){let e;return{c(){e=m("div"),e.textContent="Reserving Form"},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function ci(t){let e,s;return e=new gt({props:{title:"To Do",icon:"check2-square",$$slots:{default:[ru]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ru(t){let e;return{c(){e=m("div"),e.textContent="a",h(e,"class","my-5")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function ui(t){let e,s;return e=new gt({props:{title:"Status",icon:"journal",$$slots:{default:[nu]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&1024&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function hi(t){let e,s,r,n,i,a,l=t[7].status+"",o,c;return{c(){e=m("tr"),s=m("td"),s.textContent=`${t[7].barcode}`,r=S(),n=m("td"),n.textContent=`${t[7].status!="Available"?"Francis James E. Salles":"--"}`,i=S(),a=m("td"),o=Q(l),c=S(),h(a,"class",t[7].status=="Available"?"text-bg-success":t[7].status=="Reserved"?"text-bg-secondary":"text-bg-danger")},m(u,d){C(u,e,d),f(e,s),f(e,r),f(e,n),f(e,i),f(e,a),f(a,o),f(e,c)},p:j,d(u){u&&R(e)}}}function nu(t){let e,s,r,n,i,a,l=ve(Object.entries(t[3])),o=[];for(let c=0;c<l.length;c+=1)o[c]=hi(oi(t,l,c));return{c(){e=m("table"),s=m("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th></tr>',r=S(),n=m("tbody");for(let c=0;c<o.length;c+=1)o[c].c();i=S(),a=m("div"),a.innerHTML='<label for="copy" class="form=control col-auto">Add Copy:</label> <div class="col-7"><input type="text" class="form-control" placeholder="Barcode Number"/></div> <button class="btn btn-primary col-auto">Add</button>',h(e,"class","table table-bordered table-striped text-center align-middle"),h(a,"class","row justify-content-center align-items-center")},m(c,u){C(c,e,u),f(e,s),f(e,r),f(e,n);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null);C(c,i,u),C(c,a,u)},p(c,u){if(u&8){l=ve(Object.entries(c[3]));let d;for(d=0;d<l.length;d+=1){const _=oi(c,l,d);o[d]?o[d].p(_,u):(o[d]=hi(_),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},d(c){c&&(R(e),R(i),R(a)),ct(o,c)}}}function iu(t){let e,s,r,n,i,a,l,o,c,u,d,_;r=new jt({props:{text:"Book Details"}});const g=[tu,eu],p=[];function v($,k){return $[1]?0:1}i=v(t),a=p[i]=g[i](t);let b=t[0]=="client"&&ci(t),y=t[0]=="staff"&&ui(t);return{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=S(),a.c(),l=S(),b&&b.c(),o=S(),y&&y.c(),c=S(),u=m("div"),h(u,"class","my-5"),h(e,"class","container")},m($,k){C($,e,k),f(e,s),x(r,s,null),f(s,n),p[i].m(s,null),f(e,l),b&&b.m(e,null),f(e,o),y&&y.m(e,null),f(e,c),f(e,u),_=!0},p($,[k]){let O=i;i=v($),i===O?p[i].p($,k):(de(),D(p[O],1,1,()=>{p[O]=null}),fe(),a=p[i],a?a.p($,k):(a=p[i]=g[i]($),a.c()),w(a,1),a.m(s,null)),$[0]=="client"?b?k&1&&w(b,1):(b=ci($),b.c(),w(b,1),b.m(e,o)):b&&(de(),D(b,1,1,()=>{b=null}),fe()),$[0]=="staff"?y?(y.p($,k),k&1&&w(y,1)):(y=ui($),y.c(),w(y,1),y.m(e,c)):y&&(de(),D(y,1,1,()=>{y=null}),fe())},i($){_||(w(r.$$.fragment,$),w(a),w(b),w(y),$&&(d||We(()=>{d=Pt(e,Ct,{duration:500}),d.start()})),_=!0)},o($){D(r.$$.fragment,$),D(a),D(b),D(y),_=!1},d($){$&&R(e),I(r),p[i].d(),b&&b.d(),y&&y.d()}}}function au(t,e,s){let r;Xt.subscribe(c=>s(0,r=c));let{params:n}=e,i=n.bookID,a;async function l(){const{data:c,error:u}=await it.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i);console.log(c),s(1,a=c[0])}bs(l);let o={0:{barcode:"13251235173",status:"Available"},1:{barcode:"128736197689",status:"Reserved"},2:{barcode:"351313525135",status:"Borrowed"}};return t.$$set=c=>{"params"in c&&s(4,n=c.params)},[r,a,i,o,n]}class ia extends ce{constructor(e){super(),le(this,e,au,iu,ie,{params:4})}}function ou(t){let e,s,r,n,i,a;const l=t[3].default,o=Fr(l,t,t[2],null);return{c(){e=m("div"),s=m("label"),r=Q(t[0]),n=S(),i=m("div"),o&&o.c(),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-8 col-md-9"),h(e,"class","mb-4 row")},m(c,u){C(c,e,u),f(e,s),f(s,r),f(e,n),f(e,i),o&&o.m(i,null),a=!0},p(c,[u]){(!a||u&1)&&ne(r,c[0]),(!a||u&2)&&h(s,"for",c[1]),o&&o.p&&(!a||u&4)&&Hr(o,l,c,c[2],a?Wr(l,c[2],u,null):Br(c[2]),null)},i(c){a||(w(o,c),a=!0)},o(c){D(o,c),a=!1},d(c){c&&R(e),o&&o.d(c)}}}function lu(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,a=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,a,n,r]}class Ue extends ce{constructor(e){super(),le(this,e,lu,ou,ie,{label:0,id:1})}}function cu(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function uu(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"id","book-description"),h(e,"rows","4")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function hu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","book-cover"),h(e,"accept","image/*")},m(n,i){C(n,e,i),t[5](e),s||(r=ke(e,"change",t[4]),s=!0)},p:j,d(n){n&&R(e),t[5](null),s=!1,r()}}}function du(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-category")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function fu(t){let e;return{c(){e=m("input"),h(e,"list","authors"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-author")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function _u(t){let e;return{c(){e=m("input"),h(e,"list","publishers"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-publisher")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function mu(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-isbn")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function pu(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$,k,O,T,M,Y,U,G,W,X,we,ae,Oe,Te,ee,_e,se,me,et,Ve,Je,xt,Le,vt,as;return s=new jt({props:{text:"Add Book"}}),a=new Ue({props:{label:"Book Title:",id:"book-name",$$slots:{default:[cu]},$$scope:{ctx:t}}}),o=new Ue({props:{label:"Book Description:",id:"book-description",$$slots:{default:[uu]},$$scope:{ctx:t}}}),u=new Ue({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[hu]},$$scope:{ctx:t}}}),Y=new Ue({props:{label:"Category:",id:"book-category",$$slots:{default:[du]},$$scope:{ctx:t}}}),G=new Ue({props:{label:"Author: ",id:"book-author",$$slots:{default:[fu]},$$scope:{ctx:t}}}),X=new Ue({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[_u]},$$scope:{ctx:t}}}),ae=new Ue({props:{label:"Category: ",id:"book-category",$$slots:{default:[mu]},$$scope:{ctx:t}}}),{c(){e=m("section"),L(s.$$.fragment),r=S(),n=m("div"),i=m("div"),L(a.$$.fragment),l=S(),L(o.$$.fragment),c=S(),L(u.$$.fragment),d=S(),_=m("div"),g=m("label"),g.textContent="Preview:",p=S(),v=m("div"),b=m("img"),$=S(),k=m("button"),k.textContent="Remove",T=S(),M=m("div"),L(Y.$$.fragment),U=S(),L(G.$$.fragment),W=S(),L(X.$$.fragment),we=S(),L(ae.$$.fragment),Oe=S(),Te=m("div"),Te.innerHTML='<button class="btn btn-success" disabled="" id="add"><i class="bi bi-plus-circle"></i> Add Book</button> <a href="./#/"><button class="btn btn-danger" id="cancel"><i class="bi bi-x-circle"></i> Cancel</button></a>',ee=S(),_e=m("datalist"),se=m("option"),se.innerHTML="",me=m("option"),me.innerHTML="",et=S(),Ve=m("datalist"),Je=m("option"),Je.innerHTML="",h(g,"for","cover-preview"),h(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ae(b.src,y=t[3])||h(b,"src",y),h(b,"alt","Preview"),h(b,"id","cover-preview"),h(b,"height","150"),h(k,"class","btn btn-sm btn-danger"),h(v,"class","col-sm-8 col-md-9"),h(v,"id","preview-div"),h(_,"class",O="my-3 row "+t[2]),h(i,"class","col-sm-12 col-lg-6"),h(M,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(Te,"class","my-3"),se.__value="Jemma Development Group",Me(se,se.__value),me.__value="Richard Osman",Me(me,me.__value),h(_e,"id","authors"),Je.__value="Jemma Inc.",Me(Je,Je.__value),h(Ve,"id","publishers"),h(e,"class","my-1 container")},m(B,Z){C(B,e,Z),x(s,e,null),f(e,r),f(e,n),f(n,i),x(a,i,null),f(i,l),x(o,i,null),f(i,c),x(u,i,null),f(i,d),f(i,_),f(_,g),f(_,p),f(_,v),f(v,b),f(v,$),f(v,k),f(n,T),f(n,M),x(Y,M,null),f(M,U),x(G,M,null),f(M,W),x(X,M,null),f(M,we),x(ae,M,null),f(e,Oe),f(e,Te),f(e,ee),f(e,_e),f(_e,se),f(_e,me),f(e,et),f(e,Ve),f(Ve,Je),Le=!0,vt||(as=ke(k,"click",t[6]),vt=!0)},p(B,[Z]){const ge={};Z&128&&(ge.$$scope={dirty:Z,ctx:B}),a.$set(ge);const be={};Z&128&&(be.$$scope={dirty:Z,ctx:B}),o.$set(be);const De={};Z&131&&(De.$$scope={dirty:Z,ctx:B}),u.$set(De),(!Le||Z&8&&!Ae(b.src,y=B[3]))&&h(b,"src",y),(!Le||Z&4&&O!==(O="my-3 row "+B[2]))&&h(_,"class",O);const On={};Z&128&&(On.$$scope={dirty:Z,ctx:B}),Y.$set(On);const Tn={};Z&128&&(Tn.$$scope={dirty:Z,ctx:B}),G.$set(Tn);const Dn={};Z&128&&(Dn.$$scope={dirty:Z,ctx:B}),X.$set(Dn);const En={};Z&128&&(En.$$scope={dirty:Z,ctx:B}),ae.$set(En)},i(B){Le||(w(s.$$.fragment,B),w(a.$$.fragment,B),w(o.$$.fragment,B),w(u.$$.fragment,B),w(Y.$$.fragment,B),w(G.$$.fragment,B),w(X.$$.fragment,B),w(ae.$$.fragment,B),B&&(xt||We(()=>{xt=Pt(e,Ct,{duration:500}),xt.start()})),Le=!0)},o(B){D(s.$$.fragment,B),D(a.$$.fragment,B),D(o.$$.fragment,B),D(u.$$.fragment,B),D(Y.$$.fragment,B),D(G.$$.fragment,B),D(X.$$.fragment,B),D(ae.$$.fragment,B),Le=!1},d(B){B&&R(e),I(s),I(a),I(o),I(u),I(Y),I(G),I(X),I(ae),vt=!1,as()}}}function gu(t,e,s){let r,n,i="d-none",a;function l(){r=this.files,s(0,r)}function o(u){Bs[u?"unshift":"push"](()=>{n=u,s(1,n)})}const c=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const u=URL.createObjectURL(r[0]);s(3,a=u)}else console.log(r),s(2,i="d-none")},[r,n,i,a,l,o,c]}class bu extends ce{constructor(e){super(),le(this,e,gu,pu,ie,{})}}function di(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function yu(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function vu(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,d,_=t[0].email+"",g,p;function v($,k){return $[0].bio==null?ku:wu}let b=v(t),y=b(t);return{c(){e=m("div"),s=m("h1"),n=Q(r),i=S(),a=m("p"),y.c(),l=S(),o=m("p"),c=m("b"),c.textContent="Website:",u=S(),d=m("a"),g=Q(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(d,"href",p="mailto:"+t[0].email),h(e,"class","container")},m($,k){C($,e,k),f(e,s),f(s,n),f(e,i),f(e,a),y.m(a,null),f(e,l),f(e,o),f(o,c),f(o,u),f(o,d),f(d,g)},p($,k){k&1&&r!==(r=$[0].name+"")&&ne(n,r),b===(b=v($))&&y?y.p($,k):(y.d(1),y=b($),y&&(y.c(),y.m(a,null))),k&1&&_!==(_=$[0].email+"")&&ne(g,_),k&1&&p!==(p="mailto:"+$[0].email)&&h(d,"href",p)},i:j,o:j,d($){$&&R(e),y.d()}}}function wu(t){let e=t[0].bio+"",s;return{c(){s=Q(e)},m(r,n){C(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ne(s,e)},d(r){r&&R(s)}}}function ku(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function $u(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Su(t){let e,s,r=ve(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=fi(di(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){C(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=ve(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=di(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=fi(c),n[o].c(),w(n[o],1),n[o].m(e,null))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function fi(t){let e,s;return e=new er({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Ou(t){let e,s,r,n;const i=[Su,$u],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function Tu(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v;r=new jt({props:{text:"Author Details"}});const b=[vu,yu],y=[];function $(k,O){return k[0]?0:1}return u=$(t),d=y[u]=b[u](t),g=new gt({props:{title:"Books",icon:"journal",$$slots:{default:[Ou]},$$scope:{ctx:t}}}),{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=S(),i=m("div"),a=m("div"),l=m("img"),c=S(),d.c(),_=S(),L(g.$$.fragment),h(l,"class","border p-3"),Ae(l.src,o=Du)||h(l,"src",o),h(l,"alt","author"),h(l,"height","300"),h(l,"width","300"),Mt(l,"object-fit","contain"),h(a,"class","d-flex justify-content-center my-1"),h(i,"class","d-md-flex d-block"),h(e,"class","container")},m(k,O){C(k,e,O),f(e,s),x(r,s,null),f(s,n),f(s,i),f(i,a),f(a,l),f(i,c),y[u].m(i,null),f(e,_),x(g,e,null),v=!0},p(k,[O]){let T=u;u=$(k),u===T?y[u].p(k,O):(de(),D(y[T],1,1,()=>{y[T]=null}),fe(),d=y[u],d?d.p(k,O):(d=y[u]=b[u](k),d.c()),w(d,1),d.m(i,null));const M={};O&514&&(M.$$scope={dirty:O,ctx:k}),g.$set(M)},i(k){v||(w(r.$$.fragment,k),w(d),w(g.$$.fragment,k),k&&(p||We(()=>{p=Pt(e,Ct,{duration:500}),p.start()})),v=!0)},o(k){D(r.$$.fragment,k),D(d),D(g.$$.fragment,k),v=!1},d(k){k&&R(e),I(r),y[u].d(),I(g)}}}let Du="./default-profile.jpg";function Eu(t,e,s){let{params:r}=e,n=r.authorID,i,a;async function l(){const{data:o,error:c}=await it.from("author").select().eq("author_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:d}=await it.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,a=u)}return bs(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class aa extends ce{constructor(e){super(),le(this,e,Eu,Tu,ie,{params:2})}}function _i(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function mi(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,d,_=t[0].email+"",g,p;function v($,k){return $[0].bio==null?Pu:Mu}let b=v(t),y=b(t);return{c(){e=m("div"),s=m("h1"),n=Q(r),i=S(),a=m("p"),y.c(),l=S(),o=m("p"),c=m("b"),c.textContent="Website:",u=S(),d=m("a"),g=Q(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(d,"href",p="https://"+t[0].email),h(d,"id","publisher-website"),h(e,"class","container")},m($,k){C($,e,k),f(e,s),f(s,n),f(e,i),f(e,a),y.m(a,null),f(e,l),f(e,o),f(o,c),f(o,u),f(o,d),f(d,g)},p($,k){k&1&&r!==(r=$[0].name+"")&&ne(n,r),b===(b=v($))&&y?y.p($,k):(y.d(1),y=b($),y&&(y.c(),y.m(a,null))),k&1&&_!==(_=$[0].email+"")&&ne(g,_),k&1&&p!==(p="https://"+$[0].email)&&h(d,"href",p)},d($){$&&R(e),y.d()}}}function Mu(t){let e=t[0].bio+"",s;return{c(){s=Q(e)},m(r,n){C(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ne(s,e)},d(r){r&&R(s)}}}function Pu(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function Ru(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Cu(t){let e,s,r=ve(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=pi(_i(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){C(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=ve(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=_i(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=pi(c),n[o].c(),w(n[o],1),n[o].m(e,null))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function pi(t){let e,s;return e=new er({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ju(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b;s=new jt({props:{text:"Publisher Details"}});let y=t[0]&&mi(t);_=new gt({props:{title:"Books",icon:"journal"}});const $=[Cu,Ru],k=[];function O(T,M){return T[1]?0:1}return p=O(t),v=k[p]=$[p](t),{c(){e=m("section"),L(s.$$.fragment),r=S(),n=m("div"),i=m("div"),a=m("img"),o=S(),y&&y.c(),u=S(),d=m("section"),L(_.$$.fragment),g=S(),v.c(),h(a,"id","img-cover"),h(a,"class","border p-3"),Ae(a.src,l=Au)||h(a,"src",l),h(a,"alt","publisher"),h(a,"height","300"),h(a,"width","300"),Mt(a,"object-fit","contain"),h(i,"id","publisher-cover"),h(i,"class","d-flex justify-content-center my-1"),h(n,"class","d-md-flex d-block"),h(e,"class","container"),h(d,"class","container")},m(T,M){C(T,e,M),x(s,e,null),f(e,r),f(e,n),f(n,i),f(i,a),f(n,o),y&&y.m(n,null),C(T,u,M),C(T,d,M),x(_,d,null),f(d,g),k[p].m(d,null),b=!0},p(T,[M]){T[0]?y?y.p(T,M):(y=mi(T),y.c(),y.m(n,null)):y&&(y.d(1),y=null);let Y=p;p=O(T),p===Y?k[p].p(T,M):(de(),D(k[Y],1,1,()=>{k[Y]=null}),fe(),v=k[p],v?v.p(T,M):(v=k[p]=$[p](T),v.c()),w(v,1),v.m(d,null))},i(T){b||(w(s.$$.fragment,T),T&&(c||We(()=>{c=Pt(e,Ct,{duration:500}),c.start()})),w(_.$$.fragment,T),w(v),b=!0)},o(T){D(s.$$.fragment,T),D(_.$$.fragment,T),D(v),b=!1},d(T){T&&(R(e),R(u),R(d)),I(s),y&&y.d(),I(_),k[p].d()}}}let Au="./default-profile.jpg";function xu(t,e,s){let{params:r}=e,n=r.publisherID,i,a;async function l(){const{data:o,error:c}=await it.from("publisher").select().eq("publisher_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:d}=await it.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,a=u)}return bs(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class oa extends ce{constructor(e){super(),le(this,e,xu,ju,ie,{params:2})}}function Iu(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("i"),i=S(),a=m("div"),l=m("h5"),o=m("a"),c=Q(t[0]),h(r,"class",n="bi bi-"+t[2]),h(s,"class","d-flex justify-content-center"),Mt(s,"font-size","4em"),h(o,"class","stretched-link svelte-1vxezln"),h(o,"href",u="./#/"+t[1]),h(l,"class","card-title text-center my-3"),h(a,"class","card-body p-1"),h(e,"class","card col-md-3 col-6 border-1 py-4 svelte-1vxezln")},m(d,_){C(d,e,_),f(e,s),f(s,r),f(e,i),f(e,a),f(a,l),f(l,o),f(o,c)},p(d,[_]){_&4&&n!==(n="bi bi-"+d[2])&&h(r,"class",n),_&1&&ne(c,d[0]),_&2&&u!==(u="./#/"+d[1])&&h(o,"href",u)},i:j,o:j,d(d){d&&R(e)}}}function Lu(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=a=>{"name"in a&&s(0,r=a.name),"link"in a&&s(1,n=a.link),"icon"in a&&s(2,i=a.icon)},[r,n,i]}class js extends ce{constructor(e){super(),le(this,e,Lu,Iu,ie,{name:0,link:1,icon:2})}}function Yu(t){let e,s,r,n,i,a,l,o,c,u,d,_,g;return s=new gt({props:{title:"Welcome!",icon:"wrench-adjustable"}}),i=new js({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),l=new js({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),c=new js({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),d=new js({props:{name:"Manage",link:"manage",icon:"journal-album"}}),{c(){e=m("main"),L(s.$$.fragment),r=S(),n=m("div"),L(i.$$.fragment),a=S(),L(l.$$.fragment),o=S(),L(c.$$.fragment),u=S(),L(d.$$.fragment),h(n,"class","row"),h(e,"class","container")},m(p,v){C(p,e,v),x(s,e,null),f(e,r),f(e,n),x(i,n,null),f(n,a),x(l,n,null),f(n,o),x(c,n,null),f(n,u),x(d,n,null),g=!0},p:j,i(p){g||(w(s.$$.fragment,p),w(i.$$.fragment,p),w(l.$$.fragment,p),w(c.$$.fragment,p),w(d.$$.fragment,p),p&&(_||We(()=>{_=Pt(e,Ct,{duration:500}),_.start()})),g=!0)},o(p){D(s.$$.fragment,p),D(i.$$.fragment,p),D(l.$$.fragment,p),D(c.$$.fragment,p),D(d.$$.fragment,p),g=!1},d(p){p&&R(e),I(s),I(i),I(l),I(c),I(d)}}}class Nu extends ce{constructor(e){super(),le(this,e,null,Yu,ie,{})}}function gi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function bi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function yi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Uu(t){let e,s;return e=new yt({}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p:j,i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Fu(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',h(e,"class","d-flex justify-content-center")},m(s,r){C(s,e,r)},p:j,i:j,o:j,d(s){s&&R(e)}}}function Wu(t){let e,s,r=ve(Object.entries(t[2].publisher)),n=[];for(let a=0;a<r.length;a+=1)n[a]=vi(gi(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ge()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),s=!0},p(a,l){if(l&4){r=ve(Object.entries(a[2].publisher));let o;for(o=0;o<r.length;o+=1){const c=gi(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=vi(c),n[o].c(),w(n[o],1),n[o].m(e.parentNode,e))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function Hu(t){let e,s,r=ve(Object.entries(t[2].author)),n=[];for(let a=0;a<r.length;a+=1)n[a]=wi(bi(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ge()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),s=!0},p(a,l){if(l&4){r=ve(Object.entries(a[2].author));let o;for(o=0;o<r.length;o+=1){const c=bi(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=wi(c),n[o].c(),w(n[o],1),n[o].m(e.parentNode,e))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function Bu(t){let e,s,r=ve(Object.entries(t[2].books)),n=[];for(let a=0;a<r.length;a+=1)n[a]=ki(yi(t,r,a));const i=a=>D(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Ge()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),s=!0},p(a,l){if(l&4){r=ve(Object.entries(a[2].books));let o;for(o=0;o<r.length;o+=1){const c=yi(a,r,o);n[o]?(n[o].p(c,l),w(n[o],1)):(n[o]=ki(c),n[o].c(),w(n[o],1),n[o].m(e.parentNode,e))}for(de(),o=r.length;o<n.length;o+=1)i(o);fe()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)w(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)D(n[l]);s=!1},d(a){a&&R(e),ct(n,a)}}}function vi(t){let e,s;return e=new na({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function wi(t){let e,s;return e=new ra({props:{id:t[14].author_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ki(t){let e,s;return e=new er({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function zu(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$,k,O,T,M;s=new jt({props:{text:"Library Holdings"}});const Y=[Bu,Hu,Wu,Fu,Uu],U=[];function G(W,X){return W[2].books.length>0?0:W[2].author.length>0?1:W[2].publisher.length>0?2:W[0]?4:3}return y=G(t),$=U[y]=Y[y](t),{c(){e=m("main"),L(s.$$.fragment),r=S(),n=m("div"),i=m("div"),a=m("select"),l=m("option"),l.textContent="Books",o=m("option"),o.textContent="Author",c=m("option"),c.textContent="Publisher",u=S(),d=m("div"),_=m("input"),g=S(),p=m("button"),p.innerHTML='<i class="bi bi-search"></i>',v=S(),b=m("div"),$.c(),l.selected=!0,l.__value="books",Me(l,l.__value),o.__value="author",Me(o,o.__value),c.__value="publisher",Me(c,c.__value),h(a,"name","searchtype"),h(a,"class","form-select"),h(i,"class","col-auto col-md-2 p-0 pe-md-4"),h(_,"class","form-control form-control-lg"),h(_,"type","search"),h(_,"placeholder","Search"),h(_,"name","Search"),h(d,"class","col-6 col-md-6 p-0"),h(p,"class","btn btn-lg btn-success col-auto col-md-1"),h(p,"type","submit"),h(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),h(b,"class","row"),h(e,"class","container")},m(W,X){C(W,e,X),x(s,e,null),f(e,r),f(e,n),f(n,i),f(i,a),f(a,l),f(a,o),f(a,c),t[5](a),f(n,u),f(n,d),f(d,_),Me(_,t[1]),f(n,g),f(n,p),f(e,v),f(e,b),U[y].m(b,null),O=!0,T||(M=[ke(a,"change",t[4]),ke(_,"input",t[6]),ke(_,"keyup",t[7]),ke(p,"click",t[4])],T=!0)},p(W,[X]){X&2&&_.value!==W[1]&&Me(_,W[1]);let we=y;y=G(W),y===we?U[y].p(W,X):(de(),D(U[we],1,1,()=>{U[we]=null}),fe(),$=U[y],$?$.p(W,X):($=U[y]=Y[y](W),$.c()),w($,1),$.m(b,null))},i(W){O||(w(s.$$.fragment,W),w($),W&&(k||We(()=>{k=Pt(e,Ct,{duration:500}),k.start()})),O=!0)},o(W){D(s.$$.fragment,W),D($),O=!1},d(W){W&&R(e),I(s),t[5](null),U[y].d(),T=!1,ze(M)}}}function Gu(t,e,s){let r;no(t,Eo,b=>s(9,r=b));let n=!0;function i(){switch(r){case"/search/author":s(3,d.value="author",d);break;case"/search/publisher":s(3,d.value="publisher",d);break;default:s(3,d.value="books",d)}}const a={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let o="books",c="",u={books:[],author:[],publisher:[]},d;async function _(){s(0,n=!0),o=d.value,console.log(o);const{data:b,error:y}=await it.from(o).select(a[o]).ilike(l[o],`%${c}%`);y&&console.log(y),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[o]=b,u),s(2,u),s(0,n=!1),console.log(n,u)}bs(i),bs(_);function g(b){Bs[b?"unshift":"push"](()=>{d=b,s(3,d)})}function p(){c=this.value,s(1,c)}return[n,c,u,d,_,g,p,b=>b.key==="Enter"&&_()]}class Jt extends ce{constructor(e){super(),le(this,e,Gu,zu,ie,{})}}function qu(t){let e,s,r,n,i,a;return{c(){e=m("div"),s=m("button"),s.textContent="Client",r=S(),n=m("button"),n.textContent="Staff",h(s,"class","m-2 btn btn-primary btn-lg"),h(n,"class","m-2 btn btn-danger btn-lg"),h(e,"class","d-flex justify-content-center align-items-center"),Mt(e,"height","90vh")},m(l,o){C(l,e,o),f(e,s),f(e,r),f(e,n),i||(a=[ke(s,"click",t[0]),ke(n,"click",t[1])],i=!0)},p:j,i:j,o:j,d(l){l&&R(e),i=!1,ze(a)}}}function Vu(t){return document.querySelector("body").setAttribute("data-bs-theme","dark"),[()=>{Xt.set("client"),localStorage.setItem("accType","client")},()=>{Xt.set("staff"),localStorage.setItem("accType","staff")}]}class Ju extends ce{constructor(e){super(),le(this,e,Vu,qu,ie,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var la;function P(){return la.apply(null,arguments)}function Ku(t){la=t}function He(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Et(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function J(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sn(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(J(t,e))return!1;return!0}function Ee(t){return t===void 0}function lt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Os(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function ca(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function mt(t,e){for(var s in e)J(e,s)&&(t[s]=e[s]);return J(e,"toString")&&(t.toString=e.toString),J(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Qe(t,e,s,r){return Ca(t,e,s,r,!0).utc()}function Zu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function F(t){return t._pf==null&&(t._pf=Zu()),t._pf}var Ar;Array.prototype.some?Ar=Array.prototype.some:Ar=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function rn(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=F(t),s=Ar.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function rr(t){var e=Qe(NaN);return t!=null?mt(F(e),t):F(e).userInvalidated=!0,e}var $i=P.momentProperties=[],$r=!1;function nn(t,e){var s,r,n,i=$i.length;if(Ee(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ee(e._i)||(t._i=e._i),Ee(e._f)||(t._f=e._f),Ee(e._l)||(t._l=e._l),Ee(e._strict)||(t._strict=e._strict),Ee(e._tzm)||(t._tzm=e._tzm),Ee(e._isUTC)||(t._isUTC=e._isUTC),Ee(e._offset)||(t._offset=e._offset),Ee(e._pf)||(t._pf=F(e)),Ee(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=$i[s],n=e[r],Ee(n)||(t[r]=n);return t}function Ts(t){nn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),$r===!1&&($r=!0,P.updateOffset(this),$r=!1)}function Be(t){return t instanceof Ts||t!=null&&t._isAMomentObject!=null}function ua(t){P.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function xe(t,e){var s=!0;return mt(function(){if(P.deprecationHandler!=null&&P.deprecationHandler(null,t),s){var r=[],n,i,a,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(a in arguments[0])J(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}ua(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Si={};function ha(t,e){P.deprecationHandler!=null&&P.deprecationHandler(t,e),Si[t]||(ua(e),Si[t]=!0)}P.suppressDeprecationWarnings=!1;P.deprecationHandler=null;function Xe(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Qu(t){var e,s;for(s in t)J(t,s)&&(e=t[s],Xe(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function xr(t,e){var s=mt({},t),r;for(r in e)J(e,r)&&(Et(t[r])&&Et(e[r])?(s[r]={},mt(s[r],t[r]),mt(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)J(t,r)&&!J(e,r)&&Et(t[r])&&(s[r]=mt({},s[r]));return s}function an(t){t!=null&&this.set(t)}var Ir;Object.keys?Ir=Object.keys:Ir=function(t){var e,s=[];for(e in t)J(t,e)&&s.push(e);return s};var Xu={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function eh(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return Xe(r)?r.call(e,s):r}function Ze(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var on=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,As=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Sr={},Kt={};function N(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(Kt[t]=n),e&&(Kt[e[0]]=function(){return Ze(n.apply(this,arguments),e[1],e[2])}),s&&(Kt[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function th(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function sh(t){var e=t.match(on),s,r;for(s=0,r=e.length;s<r;s++)Kt[e[s]]?e[s]=Kt[e[s]]:e[s]=th(e[s]);return function(n){var i="",a;for(a=0;a<r;a++)i+=Xe(e[a])?e[a].call(n,t):e[a];return i}}function Ls(t,e){return t.isValid()?(e=da(e,t.localeData()),Sr[e]=Sr[e]||sh(e),Sr[e](t)):t.localeData().invalidDate()}function da(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(As.lastIndex=0;s>=0&&As.test(t);)t=t.replace(As,r),As.lastIndex=0,s-=1;return t}var rh={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function nh(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(on).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var ih="Invalid date";function ah(){return this._invalidDate}var oh="%d",lh=/\d{1,2}/;function ch(t){return this._ordinal.replace("%d",t)}var uh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function hh(t,e,s,r){var n=this._relativeTime[s];return Xe(n)?n(t,e,s,r):n.replace(/%d/i,t)}function dh(t,e){var s=this._relativeTime[t>0?"future":"past"];return Xe(s)?s(e):s.replace(/%s/i,e)}var Oi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ie(t){return typeof t=="string"?Oi[t]||Oi[t.toLowerCase()]:void 0}function ln(t){var e={},s,r;for(r in t)J(t,r)&&(s=Ie(r),s&&(e[s]=t[r]));return e}var fh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function _h(t){var e=[],s;for(s in t)J(t,s)&&e.push({unit:s,priority:fh[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var fa=/\d/,Re=/\d\d/,_a=/\d{3}/,cn=/\d{4}/,nr=/[+-]?\d{6}/,ue=/\d\d?/,ma=/\d\d\d\d?/,pa=/\d\d\d\d\d\d?/,ir=/\d{1,3}/,un=/\d{1,4}/,ar=/[+-]?\d{1,6}/,rs=/\d+/,or=/[+-]?\d+/,mh=/Z|[+-]\d\d:?\d\d/gi,lr=/Z|[+-]\d\d(?::?\d\d)?/gi,ph=/[+-]?\d+(\.\d{1,3})?/,Ds=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ns=/^[1-9]\d?/,hn=/^([1-9]\d|\d)/,qs;qs={};function A(t,e,s){qs[t]=Xe(e)?e:function(r,n){return r&&s?s:e}}function gh(t,e){return J(qs,t)?qs[t](e._strict,e._locale):new RegExp(bh(t))}function bh(t){return at(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function at(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function je(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function z(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=je(e)),s}var Lr={};function te(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),lt(e)&&(r=function(i,a){a[e]=z(i)}),n=t.length,s=0;s<n;s++)Lr[t[s]]=r}function Es(t,e){te(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function yh(t,e,s){e!=null&&J(Lr,t)&&Lr[t](e,s._a,s,t)}function cr(t){return t%4===0&&t%100!==0||t%400===0}var Se=0,rt=1,Ke=2,ye=3,Fe=4,nt=5,Dt=6,vh=7,wh=8;N("Y",0,0,function(){var t=this.year();return t<=9999?Ze(t,4):"+"+t});N(0,["YY",2],0,function(){return this.year()%100});N(0,["YYYY",4],0,"year");N(0,["YYYYY",5],0,"year");N(0,["YYYYYY",6,!0],0,"year");A("Y",or);A("YY",ue,Re);A("YYYY",un,cn);A("YYYYY",ar,nr);A("YYYYYY",ar,nr);te(["YYYYY","YYYYYY"],Se);te("YYYY",function(t,e){e[Se]=t.length===2?P.parseTwoDigitYear(t):z(t)});te("YY",function(t,e){e[Se]=P.parseTwoDigitYear(t)});te("Y",function(t,e){e[Se]=parseInt(t,10)});function ms(t){return cr(t)?366:365}P.parseTwoDigitYear=function(t){return z(t)+(z(t)>68?1900:2e3)};var ga=is("FullYear",!0);function kh(){return cr(this.year())}function is(t,e){return function(s){return s!=null?(ba(this,t,s),P.updateOffset(this,e),this):vs(this,t)}}function vs(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function ba(t,e,s){var r,n,i,a,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,a=t.month(),l=t.date(),l=l===29&&a===1&&!cr(i)?28:l,n?r.setUTCFullYear(i,a,l):r.setFullYear(i,a,l)}}function $h(t){return t=Ie(t),Xe(this[t])?this[t]():this}function Sh(t,e){if(typeof t=="object"){t=ln(t);var s=_h(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=Ie(t),Xe(this[t]))return this[t](e);return this}function Oh(t,e){return(t%e+e)%e}var pe;Array.prototype.indexOf?pe=Array.prototype.indexOf:pe=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function dn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=Oh(e,12);return t+=(e-s)/12,s===1?cr(t)?29:28:31-s%7%2}N("M",["MM",2],"Mo",function(){return this.month()+1});N("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});N("MMMM",0,0,function(t){return this.localeData().months(this,t)});A("M",ue,ns);A("MM",ue,Re);A("MMM",function(t,e){return e.monthsShortRegex(t)});A("MMMM",function(t,e){return e.monthsRegex(t)});te(["M","MM"],function(t,e){e[rt]=z(t)-1});te(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[rt]=n:F(s).invalidMonth=t});var Th="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ya="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),va=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Dh=Ds,Eh=Ds;function Mh(t,e){return t?He(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||va).test(e)?"format":"standalone"][t.month()]:He(this._months)?this._months:this._months.standalone}function Ph(t,e){return t?He(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[va.test(e)?"format":"standalone"][t.month()]:He(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Rh(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=Qe([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=pe.call(this._shortMonthsParse,a),n!==-1?n:null):(n=pe.call(this._longMonthsParse,a),n!==-1?n:null):e==="MMM"?(n=pe.call(this._shortMonthsParse,a),n!==-1?n:(n=pe.call(this._longMonthsParse,a),n!==-1?n:null)):(n=pe.call(this._longMonthsParse,a),n!==-1?n:(n=pe.call(this._shortMonthsParse,a),n!==-1?n:null))}function Ch(t,e,s){var r,n,i;if(this._monthsParseExact)return Rh.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=Qe([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function wa(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=z(e);else if(e=t.localeData().monthsParse(e),!lt(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,dn(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function ka(t){return t!=null?(wa(this,t),P.updateOffset(this,!0),this):vs(this,"Month")}function jh(){return dn(this.year(),this.month())}function Ah(t){return this._monthsParseExact?(J(this,"_monthsRegex")||$a.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(J(this,"_monthsShortRegex")||(this._monthsShortRegex=Dh),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function xh(t){return this._monthsParseExact?(J(this,"_monthsRegex")||$a.call(this),t?this._monthsStrictRegex:this._monthsRegex):(J(this,"_monthsRegex")||(this._monthsRegex=Eh),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function $a(){function t(o,c){return c.length-o.length}var e=[],s=[],r=[],n,i,a,l;for(n=0;n<12;n++)i=Qe([2e3,n]),a=at(this.monthsShort(i,"")),l=at(this.months(i,"")),e.push(a),s.push(l),r.push(l),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Ih(t,e,s,r,n,i,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,a),l}function ws(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Vs(t,e,s){var r=7+e-s,n=(7+ws(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Sa(t,e,s,r,n){var i=(7+s-r)%7,a=Vs(t,r,n),l=1+7*(e-1)+i+a,o,c;return l<=0?(o=t-1,c=ms(o)+l):l>ms(t)?(o=t+1,c=l-ms(t)):(o=t,c=l),{year:o,dayOfYear:c}}function ks(t,e,s){var r=Vs(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,a;return n<1?(a=t.year()-1,i=n+ot(a,e,s)):n>ot(t.year(),e,s)?(i=n-ot(t.year(),e,s),a=t.year()+1):(a=t.year(),i=n),{week:i,year:a}}function ot(t,e,s){var r=Vs(t,e,s),n=Vs(t+1,e,s);return(ms(t)-r+n)/7}N("w",["ww",2],"wo","week");N("W",["WW",2],"Wo","isoWeek");A("w",ue,ns);A("ww",ue,Re);A("W",ue,ns);A("WW",ue,Re);Es(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=z(t)});function Lh(t){return ks(t,this._week.dow,this._week.doy).week}var Yh={dow:0,doy:6};function Nh(){return this._week.dow}function Uh(){return this._week.doy}function Fh(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Wh(t){var e=ks(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}N("d",0,"do","day");N("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});N("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});N("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});N("e",0,0,"weekday");N("E",0,0,"isoWeekday");A("d",ue);A("e",ue);A("E",ue);A("dd",function(t,e){return e.weekdaysMinRegex(t)});A("ddd",function(t,e){return e.weekdaysShortRegex(t)});A("dddd",function(t,e){return e.weekdaysRegex(t)});Es(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:F(s).invalidWeekday=t});Es(["d","e","E"],function(t,e,s,r){e[r]=z(t)});function Hh(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Bh(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function fn(t,e){return t.slice(e,7).concat(t.slice(0,e))}var zh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Oa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gh="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qh=Ds,Vh=Ds,Jh=Ds;function Kh(t,e){var s=He(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?fn(s,this._week.dow):t?s[t.day()]:s}function Zh(t){return t===!0?fn(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Qh(t){return t===!0?fn(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Xh(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=Qe([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=pe.call(this._weekdaysParse,a),n!==-1?n:null):e==="ddd"?(n=pe.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=pe.call(this._minWeekdaysParse,a),n!==-1?n:null):e==="dddd"?(n=pe.call(this._weekdaysParse,a),n!==-1||(n=pe.call(this._shortWeekdaysParse,a),n!==-1)?n:(n=pe.call(this._minWeekdaysParse,a),n!==-1?n:null)):e==="ddd"?(n=pe.call(this._shortWeekdaysParse,a),n!==-1||(n=pe.call(this._weekdaysParse,a),n!==-1)?n:(n=pe.call(this._minWeekdaysParse,a),n!==-1?n:null)):(n=pe.call(this._minWeekdaysParse,a),n!==-1||(n=pe.call(this._weekdaysParse,a),n!==-1)?n:(n=pe.call(this._shortWeekdaysParse,a),n!==-1?n:null))}function ed(t,e,s){var r,n,i;if(this._weekdaysParseExact)return Xh.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=Qe([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function td(t){if(!this.isValid())return t!=null?this:NaN;var e=vs(this,"Day");return t!=null?(t=Hh(t,this.localeData()),this.add(t-e,"d")):e}function sd(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function rd(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Bh(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function nd(t){return this._weekdaysParseExact?(J(this,"_weekdaysRegex")||_n.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(J(this,"_weekdaysRegex")||(this._weekdaysRegex=qh),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function id(t){return this._weekdaysParseExact?(J(this,"_weekdaysRegex")||_n.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(J(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Vh),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ad(t){return this._weekdaysParseExact?(J(this,"_weekdaysRegex")||_n.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(J(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jh),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _n(){function t(u,d){return d.length-u.length}var e=[],s=[],r=[],n=[],i,a,l,o,c;for(i=0;i<7;i++)a=Qe([2e3,1]).day(i),l=at(this.weekdaysMin(a,"")),o=at(this.weekdaysShort(a,"")),c=at(this.weekdays(a,"")),e.push(l),s.push(o),r.push(c),n.push(l),n.push(o),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function mn(){return this.hours()%12||12}function od(){return this.hours()||24}N("H",["HH",2],0,"hour");N("h",["hh",2],0,mn);N("k",["kk",2],0,od);N("hmm",0,0,function(){return""+mn.apply(this)+Ze(this.minutes(),2)});N("hmmss",0,0,function(){return""+mn.apply(this)+Ze(this.minutes(),2)+Ze(this.seconds(),2)});N("Hmm",0,0,function(){return""+this.hours()+Ze(this.minutes(),2)});N("Hmmss",0,0,function(){return""+this.hours()+Ze(this.minutes(),2)+Ze(this.seconds(),2)});function Ta(t,e){N(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Ta("a",!0);Ta("A",!1);function Da(t,e){return e._meridiemParse}A("a",Da);A("A",Da);A("H",ue,hn);A("h",ue,ns);A("k",ue,ns);A("HH",ue,Re);A("hh",ue,Re);A("kk",ue,Re);A("hmm",ma);A("hmmss",pa);A("Hmm",ma);A("Hmmss",pa);te(["H","HH"],ye);te(["k","kk"],function(t,e,s){var r=z(t);e[ye]=r===24?0:r});te(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});te(["h","hh"],function(t,e,s){e[ye]=z(t),F(s).bigHour=!0});te("hmm",function(t,e,s){var r=t.length-2;e[ye]=z(t.substr(0,r)),e[Fe]=z(t.substr(r)),F(s).bigHour=!0});te("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[ye]=z(t.substr(0,r)),e[Fe]=z(t.substr(r,2)),e[nt]=z(t.substr(n)),F(s).bigHour=!0});te("Hmm",function(t,e,s){var r=t.length-2;e[ye]=z(t.substr(0,r)),e[Fe]=z(t.substr(r))});te("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[ye]=z(t.substr(0,r)),e[Fe]=z(t.substr(r,2)),e[nt]=z(t.substr(n))});function ld(t){return(t+"").toLowerCase().charAt(0)==="p"}var cd=/[ap]\.?m?\.?/i,ud=is("Hours",!0);function hd(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var Ea={calendar:Xu,longDateFormat:rh,invalidDate:ih,ordinal:oh,dayOfMonthOrdinalParse:lh,relativeTime:uh,months:Th,monthsShort:ya,week:Yh,weekdays:zh,weekdaysMin:Gh,weekdaysShort:Oa,meridiemParse:cd},he={},cs={},$s;function dd(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function Ti(t){return t&&t.toLowerCase().replace("_","-")}function fd(t){for(var e=0,s,r,n,i;e<t.length;){for(i=Ti(t[e]).split("-"),s=i.length,r=Ti(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=ur(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&dd(i,r)>=s-1)break;s--}e++}return $s}function _d(t){return!!(t&&t.match("^[^/\\\\]*$"))}function ur(t){var e=null,s;if(he[t]===void 0&&typeof Us<"u"&&Us&&Us.exports&&_d(t))try{e=$s._abbr,s=require,s("./locale/"+t),bt(e)}catch{he[t]=null}return he[t]}function bt(t,e){var s;return t&&(Ee(e)?s=ut(t):s=pn(t,e),s?$s=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),$s._abbr}function pn(t,e){if(e!==null){var s,r=Ea;if(e.abbr=t,he[t]!=null)ha("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=he[t]._config;else if(e.parentLocale!=null)if(he[e.parentLocale]!=null)r=he[e.parentLocale]._config;else if(s=ur(e.parentLocale),s!=null)r=s._config;else return cs[e.parentLocale]||(cs[e.parentLocale]=[]),cs[e.parentLocale].push({name:t,config:e}),null;return he[t]=new an(xr(r,e)),cs[t]&&cs[t].forEach(function(n){pn(n.name,n.config)}),bt(t),he[t]}else return delete he[t],null}function md(t,e){if(e!=null){var s,r,n=Ea;he[t]!=null&&he[t].parentLocale!=null?he[t].set(xr(he[t]._config,e)):(r=ur(t),r!=null&&(n=r._config),e=xr(n,e),r==null&&(e.abbr=t),s=new an(e),s.parentLocale=he[t],he[t]=s),bt(t)}else he[t]!=null&&(he[t].parentLocale!=null?(he[t]=he[t].parentLocale,t===bt()&&bt(t)):he[t]!=null&&delete he[t]);return he[t]}function ut(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return $s;if(!He(t)){if(e=ur(t),e)return e;t=[t]}return fd(t)}function pd(){return Ir(he)}function gn(t){var e,s=t._a;return s&&F(t).overflow===-2&&(e=s[rt]<0||s[rt]>11?rt:s[Ke]<1||s[Ke]>dn(s[Se],s[rt])?Ke:s[ye]<0||s[ye]>24||s[ye]===24&&(s[Fe]!==0||s[nt]!==0||s[Dt]!==0)?ye:s[Fe]<0||s[Fe]>59?Fe:s[nt]<0||s[nt]>59?nt:s[Dt]<0||s[Dt]>999?Dt:-1,F(t)._overflowDayOfYear&&(e<Se||e>Ke)&&(e=Ke),F(t)._overflowWeeks&&e===-1&&(e=vh),F(t)._overflowWeekday&&e===-1&&(e=wh),F(t).overflow=e),t}var gd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yd=/Z|[+-]\d\d(?::?\d\d)?/,xs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Or=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vd=/^\/?Date\((-?\d+)/i,wd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ma(t){var e,s,r=t._i,n=gd.exec(r)||bd.exec(r),i,a,l,o,c=xs.length,u=Or.length;if(n){for(F(t).iso=!0,e=0,s=c;e<s;e++)if(xs[e][1].exec(n[1])){a=xs[e][0],i=xs[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(Or[e][1].exec(n[3])){l=(n[2]||" ")+Or[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(yd.exec(n[4]))o="Z";else{t._isValid=!1;return}t._f=a+(l||"")+(o||""),yn(t)}else t._isValid=!1}function $d(t,e,s,r,n,i){var a=[Sd(t),ya.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&a.push(parseInt(i,10)),a}function Sd(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Od(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Td(t,e,s){if(t){var r=Oa.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return F(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Dd(t,e,s){if(t)return kd[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function Pa(t){var e=wd.exec(Od(t._i)),s;if(e){if(s=$d(e[4],e[3],e[2],e[5],e[6],e[7]),!Td(e[1],s,t))return;t._a=s,t._tzm=Dd(e[8],e[9],e[10]),t._d=ws.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),F(t).rfc2822=!0}else t._isValid=!1}function Ed(t){var e=vd.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Ma(t),t._isValid===!1)delete t._isValid;else return;if(Pa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:P.createFromInputFallback(t)}P.createFromInputFallback=xe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Bt(t,e,s){return t??e??s}function Md(t){var e=new Date(P.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function bn(t){var e,s,r=[],n,i,a;if(!t._d){for(n=Md(t),t._w&&t._a[Ke]==null&&t._a[rt]==null&&Pd(t),t._dayOfYear!=null&&(a=Bt(t._a[Se],n[Se]),(t._dayOfYear>ms(a)||t._dayOfYear===0)&&(F(t)._overflowDayOfYear=!0),s=ws(a,0,t._dayOfYear),t._a[rt]=s.getUTCMonth(),t._a[Ke]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[ye]===24&&t._a[Fe]===0&&t._a[nt]===0&&t._a[Dt]===0&&(t._nextDay=!0,t._a[ye]=0),t._d=(t._useUTC?ws:Ih).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ye]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(F(t).weekdayMismatch=!0)}}function Pd(t){var e,s,r,n,i,a,l,o,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,a=4,s=Bt(e.GG,t._a[Se],ks(oe(),1,4).year),r=Bt(e.W,1),n=Bt(e.E,1),(n<1||n>7)&&(o=!0)):(i=t._locale._week.dow,a=t._locale._week.doy,c=ks(oe(),i,a),s=Bt(e.gg,t._a[Se],c.year),r=Bt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(o=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(o=!0)):n=i),r<1||r>ot(s,i,a)?F(t)._overflowWeeks=!0:o!=null?F(t)._overflowWeekday=!0:(l=Sa(s,r,n,i,a),t._a[Se]=l.year,t._dayOfYear=l.dayOfYear)}P.ISO_8601=function(){};P.RFC_2822=function(){};function yn(t){if(t._f===P.ISO_8601){Ma(t);return}if(t._f===P.RFC_2822){Pa(t);return}t._a=[],F(t).empty=!0;var e=""+t._i,s,r,n,i,a,l=e.length,o=0,c,u;for(n=da(t._f,t._locale).match(on)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(gh(i,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&F(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),o+=r.length),Kt[i]?(r?F(t).empty=!1:F(t).unusedTokens.push(i),yh(i,r,t)):t._strict&&!r&&F(t).unusedTokens.push(i);F(t).charsLeftOver=l-o,e.length>0&&F(t).unusedInput.push(e),t._a[ye]<=12&&F(t).bigHour===!0&&t._a[ye]>0&&(F(t).bigHour=void 0),F(t).parsedDateParts=t._a.slice(0),F(t).meridiem=t._meridiem,t._a[ye]=Rd(t._locale,t._a[ye],t._meridiem),c=F(t).era,c!==null&&(t._a[Se]=t._locale.erasConvertYear(c,t._a[Se])),bn(t),gn(t)}function Rd(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function Cd(t){var e,s,r,n,i,a,l=!1,o=t._f.length;if(o===0){F(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<o;n++)i=0,a=!1,e=nn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],yn(e),rn(e)&&(a=!0),i+=F(e).charsLeftOver,i+=F(e).unusedTokens.length*10,F(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||a)&&(r=i,s=e,a&&(l=!0));mt(t,s||e)}function jd(t){if(!t._d){var e=ln(t._i),s=e.day===void 0?e.date:e.day;t._a=ca([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),bn(t)}}function Ad(t){var e=new Ts(gn(Ra(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ra(t){var e=t._i,s=t._f;return t._locale=t._locale||ut(t._l),e===null||s===void 0&&e===""?rr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Be(e)?new Ts(gn(e)):(Os(e)?t._d=e:He(s)?Cd(t):s?yn(t):xd(t),rn(t)||(t._d=null),t))}function xd(t){var e=t._i;Ee(e)?t._d=new Date(P.now()):Os(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Ed(t):He(e)?(t._a=ca(e.slice(0),function(s){return parseInt(s,10)}),bn(t)):Et(e)?jd(t):lt(e)?t._d=new Date(e):P.createFromInputFallback(t)}function Ca(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Et(t)&&sn(t)||He(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,Ad(i)}function oe(t,e,s,r){return Ca(t,e,s,r,!1)}var Id=xe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:rr()}),Ld=xe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:rr()});function ja(t,e){var s,r;if(e.length===1&&He(e[0])&&(e=e[0]),!e.length)return oe();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function Yd(){var t=[].slice.call(arguments,0);return ja("isBefore",t)}function Nd(){var t=[].slice.call(arguments,0);return ja("isAfter",t)}var Ud=function(){return Date.now?Date.now():+new Date},us=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fd(t){var e,s=!1,r,n=us.length;for(e in t)if(J(t,e)&&!(pe.call(us,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[us[r]]){if(s)return!1;parseFloat(t[us[r]])!==z(t[us[r]])&&(s=!0)}return!0}function Wd(){return this._isValid}function Hd(){return qe(NaN)}function hr(t){var e=ln(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,o=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Fd(e),this._milliseconds=+u+c*1e3+o*6e4+l*1e3*60*60,this._days=+a+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=ut(),this._bubble()}function Ys(t){return t instanceof hr}function Yr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Bd(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,a;for(a=0;a<r;a++)z(t[a])!==z(e[a])&&i++;return i+n}function Aa(t,e){N(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+Ze(~~(s/60),2)+e+Ze(~~s%60,2)})}Aa("Z",":");Aa("ZZ","");A("Z",lr);A("ZZ",lr);te(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=vn(lr,t)});var zd=/([\+\-]|\d\d)/gi;function vn(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(zd)||["-",0,0],i=+(n[1]*60)+z(n[2]),i===0?0:n[0]==="+"?i:-i)}function wn(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(Be(t)||Os(t)?t.valueOf():oe(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),P.updateOffset(s,!1),s):oe(t).local()}function Nr(t){return-Math.round(t._d.getTimezoneOffset())}P.updateOffset=function(){};function Gd(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=vn(lr,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=Nr(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?La(this,qe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,P.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Nr(this)}function qd(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Vd(t){return this.utcOffset(0,t)}function Jd(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Nr(this),"m")),this}function Kd(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=vn(mh,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Zd(t){return this.isValid()?(t=t?oe(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Qd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Xd(){if(!Ee(this._isDSTShifted))return this._isDSTShifted;var t={},e;return nn(t,this),t=Ra(t),t._a?(e=t._isUTC?Qe(t._a):oe(t._a),this._isDSTShifted=this.isValid()&&Bd(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ef(){return this.isValid()?!this._isUTC:!1}function tf(){return this.isValid()?this._isUTC:!1}function xa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var sf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,rf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qe(t,e){var s=t,r=null,n,i,a;return Ys(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:lt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=sf.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:z(r[Ke])*n,h:z(r[ye])*n,m:z(r[Fe])*n,s:z(r[nt])*n,ms:z(Yr(r[Dt]*1e3))*n}):(r=rf.exec(t))?(n=r[1]==="-"?-1:1,s={y:$t(r[2],n),M:$t(r[3],n),w:$t(r[4],n),d:$t(r[5],n),h:$t(r[6],n),m:$t(r[7],n),s:$t(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=nf(oe(s.from),oe(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),i=new hr(s),Ys(t)&&J(t,"_locale")&&(i._locale=t._locale),Ys(t)&&J(t,"_isValid")&&(i._isValid=t._isValid),i}qe.fn=hr.prototype;qe.invalid=Hd;function $t(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Di(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function nf(t,e){var s;return t.isValid()&&e.isValid()?(e=wn(e,t),t.isBefore(e)?s=Di(t,e):(s=Di(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Ia(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(ha(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=qe(s,r),La(this,n,t),this}}function La(t,e,s,r){var n=e._milliseconds,i=Yr(e._days),a=Yr(e._months);t.isValid()&&(r=r??!0,a&&wa(t,vs(t,"Month")+a*s),i&&ba(t,"Date",vs(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&P.updateOffset(t,i||a))}var af=Ia(1,"add"),of=Ia(-1,"subtract");function Ya(t){return typeof t=="string"||t instanceof String}function lf(t){return Be(t)||Os(t)||Ya(t)||lt(t)||uf(t)||cf(t)||t===null||t===void 0}function cf(t){var e=Et(t)&&!sn(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,a=r.length;for(n=0;n<a;n+=1)i=r[n],s=s||J(t,i);return e&&s}function uf(t){var e=He(t),s=!1;return e&&(s=t.filter(function(r){return!lt(r)&&Ya(t)}).length===0),e&&s}function hf(t){var e=Et(t)&&!sn(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||J(t,i);return e&&s}function df(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function ff(t,e){arguments.length===1&&(arguments[0]?lf(arguments[0])?(t=arguments[0],e=void 0):hf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||oe(),r=wn(s,this).startOf("day"),n=P.calendarFormat(this,r)||"sameElse",i=e&&(Xe(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,oe(s)))}function _f(){return new Ts(this)}function mf(t,e){var s=Be(t)?t:oe(t);return this.isValid()&&s.isValid()?(e=Ie(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function pf(t,e){var s=Be(t)?t:oe(t);return this.isValid()&&s.isValid()?(e=Ie(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function gf(t,e,s,r){var n=Be(t)?t:oe(t),i=Be(e)?e:oe(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function bf(t,e){var s=Be(t)?t:oe(t),r;return this.isValid()&&s.isValid()?(e=Ie(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function yf(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function vf(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function wf(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=wn(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=Ie(e),e){case"year":i=Ns(this,r)/12;break;case"month":i=Ns(this,r);break;case"quarter":i=Ns(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:je(i)}function Ns(t,e){if(t.date()<e.date())return-Ns(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}P.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";P.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function kf(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $f(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Ls(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Xe(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ls(s,"Z")):Ls(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Sf(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function Of(t){t||(t=this.isUtc()?P.defaultFormatUtc:P.defaultFormat);var e=Ls(this,t);return this.localeData().postformat(e)}function Tf(t,e){return this.isValid()&&(Be(t)&&t.isValid()||oe(t).isValid())?qe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Df(t){return this.from(oe(),t)}function Ef(t,e){return this.isValid()&&(Be(t)&&t.isValid()||oe(t).isValid())?qe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Mf(t){return this.to(oe(),t)}function Na(t){var e;return t===void 0?this._locale._abbr:(e=ut(t),e!=null&&(this._locale=e),this)}var Ua=xe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Fa(){return this._locale}var Js=1e3,Zt=60*Js,Ks=60*Zt,Wa=(365*400+97)*24*Ks;function Qt(t,e){return(t%e+e)%e}function Ha(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-Wa:new Date(t,e,s).valueOf()}function Ba(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-Wa:Date.UTC(t,e,s)}function Pf(t){var e,s;if(t=Ie(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ba:Ha,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Qt(e+(this._isUTC?0:this.utcOffset()*Zt),Ks);break;case"minute":e=this._d.valueOf(),e-=Qt(e,Zt);break;case"second":e=this._d.valueOf(),e-=Qt(e,Js);break}return this._d.setTime(e),P.updateOffset(this,!0),this}function Rf(t){var e,s;if(t=Ie(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ba:Ha,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Ks-Qt(e+(this._isUTC?0:this.utcOffset()*Zt),Ks)-1;break;case"minute":e=this._d.valueOf(),e+=Zt-Qt(e,Zt)-1;break;case"second":e=this._d.valueOf(),e+=Js-Qt(e,Js)-1;break}return this._d.setTime(e),P.updateOffset(this,!0),this}function Cf(){return this._d.valueOf()-(this._offset||0)*6e4}function jf(){return Math.floor(this.valueOf()/1e3)}function Af(){return new Date(this.valueOf())}function xf(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function If(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Lf(){return this.isValid()?this.toISOString():null}function Yf(){return rn(this)}function Nf(){return mt({},F(this))}function Uf(){return F(this).overflow}function Ff(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}N("N",0,0,"eraAbbr");N("NN",0,0,"eraAbbr");N("NNN",0,0,"eraAbbr");N("NNNN",0,0,"eraName");N("NNNNN",0,0,"eraNarrow");N("y",["y",1],"yo","eraYear");N("y",["yy",2],0,"eraYear");N("y",["yyy",3],0,"eraYear");N("y",["yyyy",4],0,"eraYear");A("N",kn);A("NN",kn);A("NNN",kn);A("NNNN",Qf);A("NNNNN",Xf);te(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?F(s).era=n:F(s).invalidEra=t});A("y",rs);A("yy",rs);A("yyy",rs);A("yyyy",rs);A("yo",e_);te(["y","yy","yyy","yyyy"],Se);te(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[Se]=s._locale.eraYearOrdinalParse(t,n):e[Se]=parseInt(t,10)});function Wf(t,e){var s,r,n,i=this._eras||ut("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=P(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=P(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function Hf(t,e,s){var r,n,i=this.eras(),a,l,o;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(a=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),o=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(a===t)return i[r];break;case"NNNNN":if(o===t)return i[r];break}else if([a,l,o].indexOf(t)>=0)return i[r]}function Bf(t,e){var s=t.since<=t.until?1:-1;return e===void 0?P(t.since).year():P(t.since).year()+(e-t.offset)*s}function zf(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function Gf(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function qf(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function Vf(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-P(n[t].since).year())*s+n[t].offset;return this.year()}function Jf(t){return J(this,"_erasNameRegex")||$n.call(this),t?this._erasNameRegex:this._erasRegex}function Kf(t){return J(this,"_erasAbbrRegex")||$n.call(this),t?this._erasAbbrRegex:this._erasRegex}function Zf(t){return J(this,"_erasNarrowRegex")||$n.call(this),t?this._erasNarrowRegex:this._erasRegex}function kn(t,e){return e.erasAbbrRegex(t)}function Qf(t,e){return e.erasNameRegex(t)}function Xf(t,e){return e.erasNarrowRegex(t)}function e_(t,e){return e._eraYearOrdinalRegex||rs}function $n(){var t=[],e=[],s=[],r=[],n,i,a,l,o,c=this.eras();for(n=0,i=c.length;n<i;++n)a=at(c[n].name),l=at(c[n].abbr),o=at(c[n].narrow),e.push(a),t.push(l),s.push(o),r.push(a),r.push(l),r.push(o);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}N(0,["gg",2],0,function(){return this.weekYear()%100});N(0,["GG",2],0,function(){return this.isoWeekYear()%100});function dr(t,e){N(0,[t,t.length],0,e)}dr("gggg","weekYear");dr("ggggg","weekYear");dr("GGGG","isoWeekYear");dr("GGGGG","isoWeekYear");A("G",or);A("g",or);A("GG",ue,Re);A("gg",ue,Re);A("GGGG",un,cn);A("gggg",un,cn);A("GGGGG",ar,nr);A("ggggg",ar,nr);Es(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=z(t)});Es(["gg","GG"],function(t,e,s,r){e[r]=P.parseTwoDigitYear(t)});function t_(t){return za.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function s_(t){return za.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function r_(){return ot(this.year(),1,4)}function n_(){return ot(this.isoWeekYear(),1,4)}function i_(){var t=this.localeData()._week;return ot(this.year(),t.dow,t.doy)}function a_(){var t=this.localeData()._week;return ot(this.weekYear(),t.dow,t.doy)}function za(t,e,s,r,n){var i;return t==null?ks(this,r,n).year:(i=ot(t,r,n),e>i&&(e=i),o_.call(this,t,e,s,r,n))}function o_(t,e,s,r,n){var i=Sa(t,e,s,r,n),a=ws(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}N("Q",0,"Qo","quarter");A("Q",fa);te("Q",function(t,e){e[rt]=(z(t)-1)*3});function l_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}N("D",["DD",2],"Do","date");A("D",ue,ns);A("DD",ue,Re);A("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});te(["D","DD"],Ke);te("Do",function(t,e){e[Ke]=z(t.match(ue)[0])});var Ga=is("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear");A("DDD",ir);A("DDDD",_a);te(["DDD","DDDD"],function(t,e,s){s._dayOfYear=z(t)});function c_(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}N("m",["mm",2],0,"minute");A("m",ue,hn);A("mm",ue,Re);te(["m","mm"],Fe);var u_=is("Minutes",!1);N("s",["ss",2],0,"second");A("s",ue,hn);A("ss",ue,Re);te(["s","ss"],nt);var h_=is("Seconds",!1);N("S",0,0,function(){return~~(this.millisecond()/100)});N(0,["SS",2],0,function(){return~~(this.millisecond()/10)});N(0,["SSS",3],0,"millisecond");N(0,["SSSS",4],0,function(){return this.millisecond()*10});N(0,["SSSSS",5],0,function(){return this.millisecond()*100});N(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});N(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});N(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});N(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});A("S",ir,fa);A("SS",ir,Re);A("SSS",ir,_a);var pt,qa;for(pt="SSSS";pt.length<=9;pt+="S")A(pt,rs);function d_(t,e){e[Dt]=z(("0."+t)*1e3)}for(pt="S";pt.length<=9;pt+="S")te(pt,d_);qa=is("Milliseconds",!1);N("z",0,0,"zoneAbbr");N("zz",0,0,"zoneName");function f_(){return this._isUTC?"UTC":""}function __(){return this._isUTC?"Coordinated Universal Time":""}var E=Ts.prototype;E.add=af;E.calendar=ff;E.clone=_f;E.diff=wf;E.endOf=Rf;E.format=Of;E.from=Tf;E.fromNow=Df;E.to=Ef;E.toNow=Mf;E.get=$h;E.invalidAt=Uf;E.isAfter=mf;E.isBefore=pf;E.isBetween=gf;E.isSame=bf;E.isSameOrAfter=yf;E.isSameOrBefore=vf;E.isValid=Yf;E.lang=Ua;E.locale=Na;E.localeData=Fa;E.max=Ld;E.min=Id;E.parsingFlags=Nf;E.set=Sh;E.startOf=Pf;E.subtract=of;E.toArray=xf;E.toObject=If;E.toDate=Af;E.toISOString=$f;E.inspect=Sf;typeof Symbol<"u"&&Symbol.for!=null&&(E[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});E.toJSON=Lf;E.toString=kf;E.unix=jf;E.valueOf=Cf;E.creationData=Ff;E.eraName=zf;E.eraNarrow=Gf;E.eraAbbr=qf;E.eraYear=Vf;E.year=ga;E.isLeapYear=kh;E.weekYear=t_;E.isoWeekYear=s_;E.quarter=E.quarters=l_;E.month=ka;E.daysInMonth=jh;E.week=E.weeks=Fh;E.isoWeek=E.isoWeeks=Wh;E.weeksInYear=i_;E.weeksInWeekYear=a_;E.isoWeeksInYear=r_;E.isoWeeksInISOWeekYear=n_;E.date=Ga;E.day=E.days=td;E.weekday=sd;E.isoWeekday=rd;E.dayOfYear=c_;E.hour=E.hours=ud;E.minute=E.minutes=u_;E.second=E.seconds=h_;E.millisecond=E.milliseconds=qa;E.utcOffset=Gd;E.utc=Vd;E.local=Jd;E.parseZone=Kd;E.hasAlignedHourOffset=Zd;E.isDST=Qd;E.isLocal=ef;E.isUtcOffset=tf;E.isUtc=xa;E.isUTC=xa;E.zoneAbbr=f_;E.zoneName=__;E.dates=xe("dates accessor is deprecated. Use date instead.",Ga);E.months=xe("months accessor is deprecated. Use month instead",ka);E.years=xe("years accessor is deprecated. Use year instead",ga);E.zone=xe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",qd);E.isDSTShifted=xe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Xd);function m_(t){return oe(t*1e3)}function p_(){return oe.apply(null,arguments).parseZone()}function Va(t){return t}var K=an.prototype;K.calendar=eh;K.longDateFormat=nh;K.invalidDate=ah;K.ordinal=ch;K.preparse=Va;K.postformat=Va;K.relativeTime=hh;K.pastFuture=dh;K.set=Qu;K.eras=Wf;K.erasParse=Hf;K.erasConvertYear=Bf;K.erasAbbrRegex=Kf;K.erasNameRegex=Jf;K.erasNarrowRegex=Zf;K.months=Mh;K.monthsShort=Ph;K.monthsParse=Ch;K.monthsRegex=xh;K.monthsShortRegex=Ah;K.week=Lh;K.firstDayOfYear=Uh;K.firstDayOfWeek=Nh;K.weekdays=Kh;K.weekdaysMin=Qh;K.weekdaysShort=Zh;K.weekdaysParse=ed;K.weekdaysRegex=nd;K.weekdaysShortRegex=id;K.weekdaysMinRegex=ad;K.isPM=ld;K.meridiem=hd;function Zs(t,e,s,r){var n=ut(),i=Qe().set(r,e);return n[s](i,t)}function Ja(t,e,s){if(lt(t)&&(e=t,t=void 0),t=t||"",e!=null)return Zs(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=Zs(t,r,s,"month");return n}function Sn(t,e,s,r){typeof t=="boolean"?(lt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,lt(e)&&(s=e,e=void 0),e=e||"");var n=ut(),i=t?n._week.dow:0,a,l=[];if(s!=null)return Zs(e,(s+i)%7,r,"day");for(a=0;a<7;a++)l[a]=Zs(e,(a+i)%7,r,"day");return l}function g_(t,e){return Ja(t,e,"months")}function b_(t,e){return Ja(t,e,"monthsShort")}function y_(t,e,s){return Sn(t,e,s,"weekdays")}function v_(t,e,s){return Sn(t,e,s,"weekdaysShort")}function w_(t,e,s){return Sn(t,e,s,"weekdaysMin")}bt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=z(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});P.lang=xe("moment.lang is deprecated. Use moment.locale instead.",bt);P.langData=xe("moment.langData is deprecated. Use moment.localeData instead.",ut);var tt=Math.abs;function k_(){var t=this._data;return this._milliseconds=tt(this._milliseconds),this._days=tt(this._days),this._months=tt(this._months),t.milliseconds=tt(t.milliseconds),t.seconds=tt(t.seconds),t.minutes=tt(t.minutes),t.hours=tt(t.hours),t.months=tt(t.months),t.years=tt(t.years),this}function Ka(t,e,s,r){var n=qe(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function $_(t,e){return Ka(this,t,e,1)}function S_(t,e){return Ka(this,t,e,-1)}function Ei(t){return t<0?Math.floor(t):Math.ceil(t)}function O_(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,a,l,o;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=Ei(Ur(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=je(t/1e3),r.seconds=n%60,i=je(n/60),r.minutes=i%60,a=je(i/60),r.hours=a%24,e+=je(a/24),o=je(Za(e)),s+=o,e-=Ei(Ur(o)),l=je(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function Za(t){return t*4800/146097}function Ur(t){return t*146097/4800}function T_(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=Ie(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+Za(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(Ur(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function ht(t){return function(){return this.as(t)}}var Qa=ht("ms"),D_=ht("s"),E_=ht("m"),M_=ht("h"),P_=ht("d"),R_=ht("w"),C_=ht("M"),j_=ht("Q"),A_=ht("y"),x_=Qa;function I_(){return qe(this)}function L_(t){return t=Ie(t),this.isValid()?this[t+"s"]():NaN}function At(t){return function(){return this.isValid()?this._data[t]:NaN}}var Y_=At("milliseconds"),N_=At("seconds"),U_=At("minutes"),F_=At("hours"),W_=At("days"),H_=At("months"),B_=At("years");function z_(){return je(this.days()/7)}var st=Math.round,zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function G_(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function q_(t,e,s,r){var n=qe(t).abs(),i=st(n.as("s")),a=st(n.as("m")),l=st(n.as("h")),o=st(n.as("d")),c=st(n.as("M")),u=st(n.as("w")),d=st(n.as("y")),_=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||a<=1&&["m"]||a<s.m&&["mm",a]||l<=1&&["h"]||l<s.h&&["hh",l]||o<=1&&["d"]||o<s.d&&["dd",o];return s.w!=null&&(_=_||u<=1&&["w"]||u<s.w&&["ww",u]),_=_||c<=1&&["M"]||c<s.M&&["MM",c]||d<=1&&["y"]||["yy",d],_[2]=e,_[3]=+t>0,_[4]=r,G_.apply(null,_)}function V_(t){return t===void 0?st:typeof t=="function"?(st=t,!0):!1}function J_(t,e){return zt[t]===void 0?!1:e===void 0?zt[t]:(zt[t]=e,t==="s"&&(zt.ss=e-1),!0)}function K_(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=zt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},zt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=q_(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Tr=Math.abs;function Ft(t){return(t>0)-(t<0)||+t}function fr(){if(!this.isValid())return this.localeData().invalidDate();var t=Tr(this._milliseconds)/1e3,e=Tr(this._days),s=Tr(this._months),r,n,i,a,l=this.asSeconds(),o,c,u,d;return l?(r=je(t/60),n=je(r/60),t%=60,r%=60,i=je(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",o=l<0?"-":"",c=Ft(this._months)!==Ft(l)?"-":"",u=Ft(this._days)!==Ft(l)?"-":"",d=Ft(this._milliseconds)!==Ft(l)?"-":"",o+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?d+n+"H":"")+(r?d+r+"M":"")+(t?d+a+"S":"")):"P0D"}var V=hr.prototype;V.isValid=Wd;V.abs=k_;V.add=$_;V.subtract=S_;V.as=T_;V.asMilliseconds=Qa;V.asSeconds=D_;V.asMinutes=E_;V.asHours=M_;V.asDays=P_;V.asWeeks=R_;V.asMonths=C_;V.asQuarters=j_;V.asYears=A_;V.valueOf=x_;V._bubble=O_;V.clone=I_;V.get=L_;V.milliseconds=Y_;V.seconds=N_;V.minutes=U_;V.hours=F_;V.days=W_;V.weeks=z_;V.months=H_;V.years=B_;V.humanize=K_;V.toISOString=fr;V.toString=fr;V.toJSON=fr;V.locale=Na;V.localeData=Fa;V.toIsoString=xe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fr);V.lang=Ua;N("X",0,0,"unix");N("x",0,0,"valueOf");A("x",or);A("X",ph);te("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});te("x",function(t,e,s){s._d=new Date(z(t))});//! moment.js
P.version="2.30.1";Ku(oe);P.fn=E;P.min=Yd;P.max=Nd;P.now=Ud;P.utc=Qe;P.unix=m_;P.months=g_;P.isDate=Os;P.locale=bt;P.invalid=rr;P.duration=qe;P.isMoment=Be;P.weekdays=y_;P.parseZone=p_;P.localeData=ut;P.isDuration=Ys;P.monthsShort=b_;P.weekdaysMin=w_;P.defineLocale=pn;P.updateLocale=md;P.locales=pd;P.weekdaysShort=v_;P.normalizeUnits=Ie;P.relativeTimeRounding=V_;P.relativeTimeThreshold=J_;P.calendarFormat=df;P.prototype=E;P.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Z_(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function Q_(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-barcode")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function X_(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$,k,O,T,M,Y,U,G,W,X,we,ae,Oe,Te;return s=new jt({props:{text:"Borrow Book"}}),a=new Ue({props:{label:"Student ID:",id:"book-name",$$slots:{default:[Z_]},$$scope:{ctx:t}}}),o=new Ue({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Q_]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=S(),n=m("div"),i=m("div"),L(a.$$.fragment),l=S(),L(o.$$.fragment),c=S(),u=m("div"),d=m("label"),d.textContent="Borrow Date:",_=S(),g=m("div"),p=m("input"),v=S(),b=m("div"),y=m("button"),y.textContent="Today",$=S(),k=m("div"),O=m("label"),O.textContent="Return Due Date:",T=S(),M=m("div"),Y=m("input"),U=S(),G=m("div"),W=m("button"),W.textContent="14 Days",X=S(),we=m("div"),we.innerHTML='<button class="btn btn-success"><i class="bi bi-arrow-up-circle"></i> Borrow</button> <a href="./#/" class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</a>',h(d,"class","col-sm-4 col-md-3 col-form-label"),h(d,"for","borrow-date"),h(p,"class","form-control"),h(p,"type","date"),h(p,"id","borrow-date"),h(g,"class","col-sm-5 col-md-6 col-7"),h(y,"class","w-100 btn btn-outline-primary"),h(b,"class","col-sm-3 col-md-3 col-auto"),h(u,"class","mb-4 row justify-content-center"),h(O,"class","col-sm-4 col-md-3 col-form-label"),h(O,"for","return-date"),h(Y,"class","form-control"),h(Y,"type","date"),h(Y,"id","return-date"),h(M,"class","col-sm-5 col-md-6 col-7"),h(W,"class","w-100 btn btn-outline-primary"),h(G,"class","col-sm-3 col-md-3 col-auto"),h(k,"class","mb-4 row justify-content-center"),h(we,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(e,"class","container")},m(ee,_e){C(ee,e,_e),x(s,e,null),f(e,r),f(e,n),f(n,i),x(a,i,null),f(i,l),x(o,i,null),f(i,c),f(i,u),f(u,d),f(u,_),f(u,g),f(g,p),Me(p,t[0]),f(u,v),f(u,b),f(b,y),f(i,$),f(i,k),f(k,O),f(k,T),f(k,M),f(M,Y),Me(Y,t[1]),f(k,U),f(k,G),f(G,W),f(i,X),f(i,we),ae=!0,Oe||(Te=[ke(p,"input",t[3]),ke(y,"click",Ii(t[4])),ke(Y,"input",t[5]),ke(W,"click",t[6])],Oe=!0)},p(ee,[_e]){const se={};_e&128&&(se.$$scope={dirty:_e,ctx:ee}),a.$set(se);const me={};_e&128&&(me.$$scope={dirty:_e,ctx:ee}),o.$set(me),_e&1&&Me(p,ee[0]),_e&2&&Me(Y,ee[1])},i(ee){ae||(w(s.$$.fragment,ee),w(a.$$.fragment,ee),w(o.$$.fragment,ee),ae=!0)},o(ee){D(s.$$.fragment,ee),D(a.$$.fragment,ee),D(o.$$.fragment,ee),ae=!1},d(ee){ee&&R(e),I(s),I(a),I(o),Oe=!1,ze(Te)}}}function em(t,e,s){let r=P().format("YYYY-MM-DD"),n=r,i=P(r).add(5,"days").format("YYYY-MM-DD");function a(){n=this.value,s(0,n)}const l=()=>s(0,n=r);function o(){i=this.value,s(1,i)}return[n,i,r,a,l,o,()=>s(1,i=P(n).add(14,"days").format("YYYY-MM-DD"))]}class tm extends ce{constructor(e){super(),le(this,e,em,X_,ie,{})}}function sm(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function rm(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"rows","3"),h(e,"id","book-barcode")},m(s,r){C(s,e,r)},p:j,d(s){s&&R(e)}}}function nm(t){let e,s,r,n,i,a,l,o,c,u,d,_,g,p,v,b,y,$,k,O,T,M;return s=new jt({props:{text:"Return Book"}}),a=new Ue({props:{label:"Borrow ID:",id:"book-name",$$slots:{default:[sm]},$$scope:{ctx:t}}}),o=new Ue({props:{label:"Note:",id:"book-barcode",$$slots:{default:[rm]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=S(),n=m("div"),i=m("div"),L(a.$$.fragment),l=S(),L(o.$$.fragment),c=S(),u=m("div"),d=m("label"),d.textContent="Borrow Time:",_=S(),g=m("div"),p=m("input"),v=S(),b=m("div"),y=m("button"),y.textContent="Today",$=S(),k=m("div"),k.innerHTML='<button class="btn btn-success"><i class="bi bi-arrow-down-circle"></i> Return</button> <a href="./#/" class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</a>',h(d,"class","col-sm-4 col-md-3 col-form-label"),h(d,"for","borrow-date"),h(p,"class","form-control"),h(p,"type","datetime-local"),h(p,"id","borrow-date"),h(g,"class","col-sm-5 col-md-6 col-7"),h(y,"class","w-100 btn btn-outline-primary"),h(b,"class","col-sm-3 col-md-3 col-auto"),h(u,"class","mb-4 row justify-content-center"),h(k,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(e,"class","container")},m(Y,U){C(Y,e,U),x(s,e,null),f(e,r),f(e,n),f(n,i),x(a,i,null),f(i,l),x(o,i,null),f(i,c),f(i,u),f(u,d),f(u,_),f(u,g),f(g,p),Me(p,t[0]),f(u,v),f(u,b),f(b,y),f(i,$),f(i,k),O=!0,T||(M=[ke(p,"input",t[2]),ke(y,"click",Ii(t[3]))],T=!0)},p(Y,[U]){const G={};U&32&&(G.$$scope={dirty:U,ctx:Y}),a.$set(G);const W={};U&32&&(W.$$scope={dirty:U,ctx:Y}),o.$set(W),U&1&&Me(p,Y[0])},i(Y){O||(w(s.$$.fragment,Y),w(a.$$.fragment,Y),w(o.$$.fragment,Y),O=!0)},o(Y){D(s.$$.fragment,Y),D(a.$$.fragment,Y),D(o.$$.fragment,Y),O=!1},d(Y){Y&&R(e),I(s),I(a),I(o),T=!1,ze(M)}}}function im(t,e,s){let r=P().format("YYYY-MM-DD HH:mm"),n=r;P(r).add(5,"days").format("YYYY-MM-DD");function i(){n=this.value,s(0,n)}return[n,r,i,()=>s(0,n=r)]}class am extends ce{constructor(e){super(),le(this,e,im,nm,ie,{})}}function om(t){let e;return{c(){e=m("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',h(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Mt(e,"height","70vh")},m(s,r){C(s,e,r)},p:j,i:j,o:j,d(s){s&&R(e)}}}class Xa extends ce{constructor(e){super(),le(this,e,null,om,ie,{})}}function lm(t){let e,s;return e=new Vr({props:{routes:{"*":Ju}}}),{c(){L(e.$$.fragment)},m(r,n){x(e,r,n),s=!0},i(r){s||(w(e.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function cm(t){let e,s,r,n;return e=new Bi({}),r=new Vr({props:{routes:{"/":Nu,"/book/:bookID":ia,"/author/:authorID":aa,"/publisher/:publisherID":oa,"/search":Jt,"/search/author":Jt,"/search/publisher":Jt,"/add-book":bu,"/borrow":tm,"/return":am,"*":Xa}}}),{c(){L(e.$$.fragment),s=S(),L(r.$$.fragment)},m(i,a){x(e,i,a),C(i,s,a),x(r,i,a),n=!0},i(i){n||(w(e.$$.fragment,i),w(r.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),D(r.$$.fragment,i),n=!1},d(i){i&&R(s),I(e,i),I(r,i)}}}function um(t){let e,s,r,n;return e=new Bi({}),r=new Vr({props:{routes:{"/":Vc,"/book/:bookID":ia,"/author/:authorID":aa,"/publisher/:publisherID":oa,"/search":Jt,"/search/author":Jt,"/search/publisher":Jt,"*":Xa}}}),{c(){L(e.$$.fragment),s=S(),L(r.$$.fragment)},m(i,a){x(e,i,a),C(i,s,a),x(r,i,a),n=!0},i(i){n||(w(e.$$.fragment,i),w(r.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),D(r.$$.fragment,i),n=!1},d(i){i&&R(s),I(e,i),I(r,i)}}}function hm(t){let e,s,r,n;const i=[um,cm,lm],a=[];function l(o,c){return o[0]=="client"?0:o[0]=="staff"?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Ge()},m(o,c){a[e].m(o,c),C(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e!==u&&(de(),D(a[u],1,1,()=>{a[u]=null}),fe(),s=a[e],s||(s=a[e]=i[e](o),s.c()),w(s,1),s.m(r.parentNode,r))},i(o){n||(w(s),n=!0)},o(o){D(s),n=!1},d(o){o&&R(r),a[e].d(o)}}}function dm(t,e,s){let r;return Xt.subscribe(n=>{s(0,r=n)}),[r]}class fm extends ce{constructor(e){super(),le(this,e,dm,hm,ie,{})}}new fm({target:document.getElementById("app")})});export default _m();
