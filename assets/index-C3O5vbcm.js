var Ka=Object.defineProperty;var Za=(t,e,r)=>e in t?Ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Qa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Rs=(t,e,r)=>(Za(t,typeof e!="symbol"?e+"":e,r),r);var $g=Qa((Tg,Xr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function F(){}const ln=t=>t;function Or(t,e){for(const r in e)t[r]=e[r];return t}function Xa(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Oo(t){return t()}function Zn(){return Object.create(null)}function De(t){t.forEach(Oo)}function Ar(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Fr;function et(t,e){return t===e?!0:(Fr||(Fr=document.createElement("a")),Fr.href=e,t===Fr.href)}function el(t){return Object.keys(t).length===0}function To(t,...e){if(t==null){for(const s of e)s(void 0);return F}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function cn(t,e,r){t.$$.on_destroy.push(To(e,r))}function ds(t,e,r,s){if(t){const n=Do(t,e,r,s);return t[0](n)}}function Do(t,e,r,s){return t[1]&&s?Or(r.ctx.slice(),t[1](s(e))):r.ctx}function fs(t,e,r,s){if(t[2]&&s){const n=t[2](s(r));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function hs(t,e,r,s,n,i){if(n){const o=Do(e,r,s,i);t.p(o,n)}}function _s(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let s=0;s<r;s++)e[s]=-1;return e}return-1}function Qn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Mo=typeof window<"u";let Co=Mo?()=>window.performance.now():()=>Date.now(),un=Mo?t=>requestAnimationFrame(t):F;const Xt=new Set;function Po(t){Xt.forEach(e=>{e.c(t)||(Xt.delete(e),e.f())}),Xt.size!==0&&un(Po)}function Eo(t){let e;return Xt.size===0&&un(Po),{promise:new Promise(r=>{Xt.add(e={c:t,f:r})}),abort(){Xt.delete(e)}}}function u(t,e){t.appendChild(e)}function Ro(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function tl(t){const e=h("style");return e.textContent="/* empty */",rl(Ro(t),e),e.sheet}function rl(t,e){return u(t.head||t,e),e.sheet}function E(t,e,r){t.insertBefore(e,r||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function ze(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function h(t){return document.createElement(t)}function se(t){return document.createTextNode(t)}function w(){return se(" ")}function We(){return se("")}function G(t,e,r,s){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r,s)}function er(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function ms(t){return t===""?null:+t}function sl(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function Je(t,e,r,s){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,"")}function Xn(t,e,r){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function nl(t){const e=t.querySelector(":checked");return e&&e.__value}function Ao(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function es(t,e){return new t(e)}const ts=new Map;let rs=0;function il(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function ol(t,e){const r={stylesheet:tl(e),rules:{}};return ts.set(t,r),r}function Ws(t,e,r,s,n,i,o,l=0){const a=16.666/s;let c=`{
`;for(let y=0;y<=1;y+=a){const b=e+(r-e)*i(y);c+=y*100+`%{${o(b,1-b)}}
`}const d=c+`100% {${o(r,1-r)}}
}`,_=`__svelte_${il(d)}_${l}`,m=Ro(t),{stylesheet:g,rules:p}=ts.get(m)||ol(m,t);p[_]||(p[_]=!0,g.insertRule(`@keyframes ${_} ${d}`,g.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${_} ${s}ms linear ${n}ms 1 both`,rs+=1,_}function Bs(t,e){const r=(t.style.animation||"").split(", "),s=r.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=r.length-s.length;n&&(t.style.animation=s.join(", "),rs-=n,rs||al())}function al(){un(()=>{rs||(ts.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&P(e)}),ts.clear())})}let Tr;function gt(t){Tr=t}function jr(){if(!Tr)throw new Error("Function called outside component initialization");return Tr}function Dr(t){jr().$$.on_mount.push(t)}function ll(t){jr().$$.after_update.push(t)}function cl(t){jr().$$.on_destroy.push(t)}function ul(){const t=jr();return(e,r,{cancelable:s=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=Ao(e,r,{cancelable:s});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function ss(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(s=>s.call(this,e))}const Jt=[],ar=[];let tr=[];const ei=[],jo=Promise.resolve();let qs=!1;function Io(){qs||(qs=!0,jo.then(fn))}function dn(){return Io(),jo}function Ee(t){tr.push(t)}const As=new Set;let zt=0;function fn(){if(zt!==0)return;const t=Tr;do{try{for(;zt<Jt.length;){const e=Jt[zt];zt++,gt(e),dl(e.$$)}}catch(e){throw Jt.length=0,zt=0,e}for(gt(null),Jt.length=0,zt=0;ar.length;)ar.pop()();for(let e=0;e<tr.length;e+=1){const r=tr[e];As.has(r)||(As.add(r),r())}tr.length=0}while(Jt.length);for(;ei.length;)ei.pop()();qs=!1,As.clear(),gt(t)}function dl(t){if(t.fragment!==null){t.update(),De(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function fl(t){const e=[],r=[];tr.forEach(s=>t.indexOf(s)===-1?e.push(s):r.push(s)),r.forEach(s=>s()),tr=e}let pr;function Lo(){return pr||(pr=Promise.resolve(),pr.then(()=>{pr=null})),pr}function yr(t,e,r){t.dispatchEvent(Ao(`${e?"intro":"outro"}${r}`))}const qr=new Set;let bt;function Oe(){bt={r:0,c:[],p:bt}}function Te(){bt.r||De(bt.c),bt=bt.p}function O(t,e){t&&t.i&&(qr.delete(t),t.i(e))}function M(t,e,r,s){if(t&&t.o){if(qr.has(t))return;qr.add(t),bt.c.push(()=>{qr.delete(t),s&&(r&&t.d(1),s())}),t.o(e)}else s&&s()}const Yo={duration:0};function Ue(t,e,r){const s={direction:"in"};let n=e(t,r,s),i=!1,o,l,a=0;function c(){o&&Bs(t,o)}function d(){const{delay:m=0,duration:g=300,easing:p=ln,tick:v=F,css:y}=n||Yo;y&&(o=Ws(t,0,1,g,m,p,y,a++)),v(0,1);const b=Co()+m,k=b+g;l&&l.abort(),i=!0,Ee(()=>yr(t,!0,"start")),l=Eo($=>{if(i){if($>=k)return v(1,0),yr(t,!0,"end"),c(),i=!1;if($>=b){const C=p(($-b)/g);v(C,1-C)}}return i})}let _=!1;return{start(){_||(_=!0,Bs(t),Ar(n)?(n=n(s),Lo().then(d)):d())},invalidate(){_=!1},end(){i&&(c(),i=!1)}}}function lr(t,e,r,s){let i=e(t,r,{direction:"both"}),o=s?0:1,l=null,a=null,c=null,d;function _(){c&&Bs(t,c)}function m(p,v){const y=p.b-o;return v*=Math.abs(y),{a:o,b:p.b,d:y,duration:v,start:p.start,end:p.start+v,group:p.group}}function g(p){const{delay:v=0,duration:y=300,easing:b=ln,tick:k=F,css:$}=i||Yo,C={start:Co()+v,b:p};p||(C.group=bt,bt.r+=1),"inert"in t&&(p?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),l||a?a=C:($&&(_(),c=Ws(t,o,p,y,v,b,$)),p&&k(0,1),l=m(C,y),Ee(()=>yr(t,p,"start")),Eo(S=>{if(a&&S>a.start&&(l=m(a,y),a=null,yr(t,l.b,"start"),$&&(_(),c=Ws(t,o,l.b,l.duration,0,b,i.css))),l){if(S>=l.end)k(o=l.b,1-o),yr(t,l.b,"end"),a||(l.b?_():--l.group.r||De(l.group.c)),l=null;else if(S>=l.start){const T=S-l.start;o=l.a+l.d*b(T/l.duration),k(o,1-o)}}return!!(l||a)}))}return{run(p){Ar(i)?Lo().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){_(),l=a=null}}}function Vr(t,e){const r=e.token={};function s(n,i,o,l){if(e.token!==r)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((_,m)=>{m!==i&&_&&(Oe(),M(_,1,1,()=>{e.blocks[m]===_&&(e.blocks[m]=null)}),Te())}):e.block.d(1),c.c(),O(c,1),c.m(e.mount(),e.anchor),d=!0),e.block=c,e.blocks&&(e.blocks[i]=c),d&&fn()}if(Xa(t)){const n=jr();if(t.then(i=>{gt(n),s(e.then,1,e.value,i),gt(null)},i=>{if(gt(n),s(e.catch,2,e.error,i),gt(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}}function Gr(t,e,r){const s=e.slice(),{resolved:n}=t;t.current===t.then&&(s[t.value]=n),t.current===t.catch&&(s[t.error]=n),t.block.p(s,r)}function $e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ns(t,e){const r={},s={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(r[a]=l[a],n[a]=1);t[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in r||(r[o]=void 0);return r}function is(t){return typeof t=="object"&&t!==null?t:{}}function N(t){t&&t.c()}function L(t,e,r){const{fragment:s,after_update:n}=t.$$;s&&s.m(e,r),Ee(()=>{const i=t.$$.on_mount.map(Oo).filter(Ar);t.$$.on_destroy?t.$$.on_destroy.push(...i):De(i),t.$$.on_mount=[]}),n.forEach(Ee)}function Y(t,e){const r=t.$$;r.fragment!==null&&(fl(r.after_update),De(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function hl(t,e){t.$$.dirty[0]===-1&&(Jt.push(t),Io(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ge(t,e,r,s,n,i,o=null,l=[-1]){const a=Tr;gt(t);const c=t.$$={fragment:null,ctx:[],props:i,update:F,not_equal:n,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let d=!1;if(c.ctx=r?r(t,e.props||{},(_,m,...g)=>{const p=g.length?g[0]:m;return c.ctx&&n(c.ctx[_],c.ctx[_]=p)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](p),d&&hl(t,_)),m}):[],c.update(),d=!0,De(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const _=sl(e.target);c.fragment&&c.fragment.l(_),_.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&O(t.$$.fragment),L(t,e.target,e.anchor),fn()}gt(a)}class be{constructor(){Rs(this,"$$");Rs(this,"$$set")}$destroy(){Y(this,1),this.$destroy=F}$on(e,r){if(!Ar(r))return F;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(r),()=>{const n=s.indexOf(r);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!el(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _l="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_l);const Wt=[];function No(t,e){return{subscribe:ps(t,e).subscribe}}function ps(t,e=F){let r;const s=new Set;function n(l){if(pe(t,l)&&(t=l,r)){const a=!Wt.length;for(const c of s)c[1](),Wt.push(c,t);if(a){for(let c=0;c<Wt.length;c+=2)Wt[c][0](Wt[c+1]);Wt.length=0}}}function i(l){n(l(t))}function o(l,a=F){const c=[l,a];return s.add(c),s.size===1&&(r=e(n,i)||F),l(t),()=>{s.delete(c),s.size===0&&r&&(r(),r=null)}}return{set:n,update:i,subscribe:o}}function Uo(t,e,r){const s=!Array.isArray(t),n=s?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return No(r,(o,l)=>{let a=!1;const c=[];let d=0,_=F;const m=()=>{if(d)return;_();const p=e(s?c[0]:c,o,l);i?o(p):_=Ar(p)?p:F},g=n.map((p,v)=>To(p,y=>{c[v]=y,d&=~(1<<v),a&&m()},()=>{d|=1<<v}));return a=!0,m(),function(){De(g),_(),a=!1}})}const Rt=ps(localStorage.getItem("accType")),Jr=ps(localStorage.getItem("user_id"));window.addEventListener("storage",function(t){let e;Jr.subscribe(r=>e=r),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Rt.set(""),Jr.set("")):(Jr.set(localStorage.getItem("user_id")),Rt.set(localStorage.getItem("accType"))))});function ml(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,n,i,o=[],l="",a=t.split("/");for(a[0]||a.shift();n=a.shift();)r=n[0],r==="*"?(o.push("wild"),l+="/(.*)"):r===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function pl(t){let e,r,s;const n=[t[2]];var i=t[0];function o(l,a){let c={};for(let d=0;d<n.length;d+=1)c=Or(c,n[d]);return a!==void 0&&a&4&&(c=Or(c,ns(n,[is(l[2])]))),{props:c}}return i&&(e=es(i,o(t)),e.$on("routeEvent",t[7])),{c(){e&&N(e.$$.fragment),r=We()},m(l,a){e&&L(e,l,a),E(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=es(i,o(l,a)),e.$on("routeEvent",l[7]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,r.parentNode,r)):e=null}else if(i){const c=a&4?ns(n,[is(l[2])]):{};e.$set(c)}},i(l){s||(e&&O(e.$$.fragment,l),s=!0)},o(l){e&&M(e.$$.fragment,l),s=!1},d(l){l&&P(r),e&&Y(e,l)}}}function gl(t){let e,r,s;const n=[{params:t[1]},t[2]];var i=t[0];function o(l,a){let c={};for(let d=0;d<n.length;d+=1)c=Or(c,n[d]);return a!==void 0&&a&6&&(c=Or(c,ns(n,[a&2&&{params:l[1]},a&4&&is(l[2])]))),{props:c}}return i&&(e=es(i,o(t)),e.$on("routeEvent",t[6])),{c(){e&&N(e.$$.fragment),r=We()},m(l,a){e&&L(e,l,a),E(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=es(i,o(l,a)),e.$on("routeEvent",l[6]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,r.parentNode,r)):e=null}else if(i){const c=a&6?ns(n,[a&2&&{params:l[1]},a&4&&is(l[2])]):{};e.$set(c)}},i(l){s||(e&&O(e.$$.fragment,l),s=!0)},o(l){e&&M(e.$$.fragment,l),s=!1},d(l){l&&P(r),e&&Y(e,l)}}}function bl(t){let e,r,s,n;const i=[gl,pl],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,[c]){let d=e;e=l(a),e===d?o[e].p(a,c):(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function ti(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let s="";return r>-1&&(s=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:s}}const hn=No(null,function(e){e(ti());const r=()=>{e(ti())};return window.addEventListener("hashchange",r,!1),function(){window.removeEventListener("hashchange",r,!1)}}),vl=Uo(hn,t=>t.location),Fo=Uo(hn,t=>t.querystring),ri=ps(void 0);async function wl(){await dn(),window.history.back()}async function yl(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await dn();const e=(t.charAt(0)=="#"?"":"#")+t;try{const r={...history.state};delete r.__svelte_spa_router_scrollX,delete r.__svelte_spa_router_scrollY,window.history.replaceState(r,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function kl(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function $l(t,e,r){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(S,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:A,keys:j}=ml(S);this.path=S,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=A,this._keys=j}match(S){if(n){if(typeof n=="string")if(S.startsWith(n))S=S.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const U=S.match(n);if(U&&U[0])S=S.substr(U[0].length)||"/";else return null}}const T=this._pattern.exec(S);if(T===null)return null;if(this._keys===!1)return T;const A={};let j=0;for(;j<this._keys.length;){try{A[this._keys[j]]=decodeURIComponent(T[j+1]||"")||null}catch{A[this._keys[j]]=null}j++}return A}async checkConditions(S){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](S))return!1;return!0}}const l=[];s instanceof Map?s.forEach((C,S)=>{l.push(new o(S,C))}):Object.keys(s).forEach(C=>{l.push(new o(C,s[C]))});let a=null,c=null,d={};const _=ul();async function m(C,S){await dn(),_(C,S)}let g=null,p=null;i&&(p=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?g=C.state:g=null},window.addEventListener("popstate",p),ll(()=>{kl(g)}));let v=null,y=null;const b=hn.subscribe(async C=>{v=C;let S=0;for(;S<l.length;){const T=l[S].match(C.location);if(!T){S++;continue}const A={route:l[S].path,location:C.location,querystring:C.querystring,userData:l[S].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await l[S].checkConditions(A)){r(0,a=null),y=null,m("conditionsFailed",A);return}m("routeLoading",Object.assign({},A));const j=l[S].component;if(y!=j){j.loading?(r(0,a=j.loading),y=j,r(1,c=j.loadingParams),r(2,d={}),m("routeLoaded",Object.assign({},A,{component:a,name:a.name,params:c}))):(r(0,a=null),y=null);const U=await j();if(C!=v)return;r(0,a=U&&U.default||U),y=j}T&&typeof T=="object"&&Object.keys(T).length?r(1,c=T):r(1,c=null),r(2,d=l[S].props),m("routeLoaded",Object.assign({},A,{component:a,name:a.name,params:c})).then(()=>{ri.set(c)});return}r(0,a=null),y=null,ri.set(void 0)});cl(()=>{b(),p&&window.removeEventListener("popstate",p)});function k(C){ss.call(this,t,C)}function $(C){ss.call(this,t,C)}return t.$$set=C=>{"routes"in C&&r(3,s=C.routes),"prefix"in C&&r(4,n=C.prefix),"restoreScrollState"in C&&r(5,i=C.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,d,s,n,i,k,$]}class _n extends be{constructor(e){super(),ge(this,e,$l,bl,pe,{routes:3,prefix:4,restoreScrollState:5})}}const Sl="modulepreload",Ol=function(t){return"/library/"+t},si={},cr=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(r.map(l=>{if(l=Ol(l),l in si)return;si[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":Sl,a||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((_,m)=>{d.addEventListener("load",_),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Tl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class mn extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Dl extends mn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ml extends mn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cl extends mn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Vs||(Vs={}));var Pl=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class El{constructor(e,{headers:r={},customFetch:s,region:n=Vs.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=Tl(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return Pl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:a}=r;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new Dl(p)}),_=d.headers.get("x-relay-error");if(_&&_==="true")throw new Ml(d);if(!d.ok)throw new Cl(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var Rl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ur=Rl();const Al=ur.fetch,pn=ur.fetch.bind(ur),xo=ur.Headers,jl=ur.Request,Il=ur.Response,Ir=Object.freeze(Object.defineProperty({__proto__:null,Headers:xo,Request:jl,Response:Il,default:pn,fetch:Al},Symbol.toStringTag,{value:"Module"}));class Ll extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Yl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,d=null,_=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(_=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,_=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(d=[],c=null,m=200,g="OK")}catch{i.status===404&&v===""?(m=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new Ll(c)}return{error:c,data:d,count:_,status:m,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}}class Nl extends Yl{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Kt extends Nl{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}}class Ul{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(a.length>0){const c=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new Kt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Kt({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Fl="1.15.2",xl={"X-Client-Info":`postgrest-js/${Fl}`};class gn{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},xl),r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new Ul(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([d,_])=>_!==void 0).map(([d,_])=>[d,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([d,_])=>{l.searchParams.append(d,_)})):(o="POST",a=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Kt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Hl="2.9.5",zl={"X-Client-Info":`realtime-js/${Hl}`},Wl="1.0.0",Ho=1e4,Bl=1e3;var rr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rr||(rr={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(nt||(nt={}));var Gs;(function(t){t.websocket="websocket"})(Gs||(Gs={}));var Nt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Nt||(Nt={}));class zo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ql{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class js{constructor(e,r,s={},n=Ho){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ni;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ni||(ni={}));class kr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=kr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=kr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),l={},a={};return this.map(i,(c,d)=>{o[c]||(a[c]=d)}),this.map(o,(c,d)=>{const _=i[c];if(_){const m=d.map(y=>y.presence_ref),g=_.map(y=>y.presence_ref),p=d.filter(y=>g.indexOf(y.presence_ref)<0),v=_.filter(y=>m.indexOf(y.presence_ref)<0);p.length>0&&(l[c]=p),v.length>0&&(a[c]=v)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),d.length>0){const _=e[l].map(g=>g.presence_ref),m=d.filter(g=>_.indexOf(g.presence_ref)<0);e[l].unshift(...m)}s(l,d,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const d=a.map(_=>_.presence_ref);c=c.filter(_=>d.indexOf(_.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Pe||(Pe={}));const ii=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Vl(o,t,e,n),i),{})},Vl=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?Wo(i,o):Js(o)},Wo=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Zl(e,r)}switch(t){case Pe.bool:return Gl(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Jl(e);case Pe.json:case Pe.jsonb:return Kl(e);case Pe.timestamp:return Ql(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Js(e);default:return Js(e)}},Js=t=>t,Gl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Jl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Kl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Zl=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Wo(e,l))}return t},Ql=t=>typeof t=="string"?t.replace(" ","T"):t;var oi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oi||(oi={}));var ai;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ai||(ai={}));var li;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class bn{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new js(this,nt.join,this.params,this.timeout),this.rejoinTimer=new zo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new kr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:c})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const _=this.bindings.postgres_changes,m=(d=_==null?void 0:_.length)!==null&&d!==void 0?d:0,g=[];for(let p=0;p<m;p++){const v=_[p],{filter:{event:y,schema:b,table:k,filter:$}}=v,C=c&&c[p];if(C&&C.event===y&&C.schema===b&&C.table===k&&C.filter===$)g.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new js(this,nt.leave,{},e);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new js(this,e,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:d}=nt;if(s&&[l,a,c,d].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,v,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(v=g.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,v,y,b,k,$;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,S=(p=g.filter)===null||p===void 0?void 0:p.event;return C&&((v=r.ids)===null||v===void 0?void 0:v.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(k=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return C==="*"||C===(($=r==null?void 0:r.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:v,table:y,commit_timestamp:b,type:k,errors:$}=p;m=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:b,eventType:k,new:{},old:{},errors:$}),this._getPayloadRecords(p))}g.callback(m,s)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&bn.isEqual(n.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nt.close,{},e)}_onError(e){this._on(nt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ii(e.columns,e.old_record)),r}}const Xl=()=>{},ec=typeof WebSocket<"u";class tc{constructor(e,r){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=zl,this.params={},this.timeout=Ho,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Xl,this.conn=null,this.sendBuffer=[],this.serializer=new ql,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Gs.websocket}`,r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ec){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new rc(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),cr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rr.connecting:return Nt.Connecting;case rr.open:return Nt.Open;case rr.closing:return Nt.Closing;default:return Nt.Closed}}isConnected(){return this.connectionState()===Nt.Open}channel(e,r={config:{}}){const s=new bn(`realtime:${e}`,r,this);return this.channels.push(s),s}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(nt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wl}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:n,payload:i,ref:o}=r;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(nt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Bl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class rc{constructor(e,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class sc extends vn{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ci extends vn{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var nc=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Bo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},ic=()=>nc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cr(()=>Promise.resolve().then(()=>Ir),void 0)).Response:Response});var fr=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oc=(t,e)=>fr(void 0,void 0,void 0,function*(){const r=yield ic();t instanceof r?t.json().then(s=>{e(new sc(Is(s),t.status||500))}).catch(s=>{e(new ci(Is(s),s))}):e(new ci(Is(t),t))}),ac=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};function gs(t,e,r,s,n,i){return fr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,ac(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>oc(a,l))})})}function Ks(t,e,r,s){return fr(this,void 0,void 0,function*(){return gs(t,"GET",e,r,s)})}function Dt(t,e,r,s,n){return fr(this,void 0,void 0,function*(){return gs(t,"POST",e,s,n,r)})}function lc(t,e,r,s,n){return fr(this,void 0,void 0,function*(){return gs(t,"PUT",e,s,n,r)})}function qo(t,e,r,s,n){return fr(this,void 0,void 0,function*(){return gs(t,"DELETE",e,s,n,r)})}var Qe=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const cc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ui={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uc{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Bo(n)}uploadOrUpdate(e,r,s,n){return Qe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ui),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(r),c=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),_=yield d.json();return d.ok?{data:{path:a,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return Qe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let a;const c=Object.assign({upsert:ui.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",c.cacheControl)):(a=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const _=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),m=yield _.json();return _.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=yield Dt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new vn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}update(e,r,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r){return Qe(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}copy(e,r){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,s){return Qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Dt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return Qe(this,void 0,void 0,function*(){try{const n=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,r){return Qe(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ks(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${c}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}list(e,r,s){return Qe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},cc),r),{prefix:e||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const dc="2.5.5",fc={"X-Client-Info":`storage-js/${dc}`};var Bt=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class hc{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},fc),r),this.fetch=Bo(s)}listBuckets(){return Bt(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Bt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield qo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}}class _c extends hc{constructor(e,r={},s){super(e,r,s)}from(e){return new uc(this.url,this.headers,e,this.fetch)}}const mc="2.43.2";let wr="";typeof Deno<"u"?wr="deno":typeof document<"u"?wr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wr="react-native":wr="node";const pc={"X-Client-Info":`supabase-js-${wr}/${mc}`},gc={headers:pc},bc={schema:"public"},vc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wc={};var yc=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const kc=t=>{let e;return t?e=t:typeof fetch>"u"?e=pn:e=fetch,(...r)=>e(...r)},$c=()=>typeof Headers>"u"?xo:Headers,Sc=(t,e,r)=>{const s=kc(r),n=$c();return(i,o)=>yc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};function Oc(t){return t.replace(/\/$/,"")}function Tc(t,e){const{db:r,auth:s,realtime:n,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const Vo="2.64.2",Dc="http://localhost:9999",Mc="supabase.auth.token",Cc={"X-Client-Info":`gotrue-js/${Vo}`},di=10,Zs="X-Supabase-Api-Version",Go={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Pc(t){return Math.round(Date.now()/1e3)+t}function Ec(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const st=()=>typeof document<"u",jt={tested:!1,writable:!1},$r=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jt.tested)return jt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jt.tested=!0,jt.writable=!0}catch{jt.tested=!0,jt.writable=!1}return jt.writable};function Ls(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Jo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Rc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ko=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ys=async(t,e)=>{await t.removeItem(e)};function Ac(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",s,n,i,o,l,a,c,d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)o=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),a=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,r=r+String.fromCharCode(s),a!=64&&n!=0&&(r=r+String.fromCharCode(n)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class bs{constructor(){this.promise=new bs.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}bs.promiseConstructor=Promise;function fi(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=r[1];return JSON.parse(Ac(s))}async function jc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ic(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Lc(t){return("0"+t.toString(16)).substr(-2)}function Yc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Lc).join("")}async function Nc(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Uc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Nc(t);return Uc(r)}async function qt(t,e,r=!1){const s=Yc();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Ko(t,`${e}-code-verifier`,n);const i=await Fc(s);return[i,s===i?"plain":"s256"]}const xc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hc(t){const e=t.headers.get(Zs);if(!e||!e.match(xc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class wn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zc extends wn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Wc(t){return he(t)&&t.name==="AuthApiError"}class Zo extends wn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xt extends wn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class It extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ns extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hr extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zr extends xt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hi extends xt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qs extends xt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Us(t){return he(t)&&t.name==="AuthRetryableFetchError"}class _i extends xt{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}var Bc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const Yt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qc=[502,503,504];async function mi(t){var e;if(!Rc(t))throw new Qs(Yt(t),0);if(qc.includes(t.status))throw new Qs(Yt(t),t.status);let r;try{r=await t.json()}catch(i){throw new Zo(Yt(i),i)}let s;const n=Hc(t);if(n&&n.getTime()>=Go["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new _i(Yt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _i(Yt(r),t.status,r.weak_password.reasons);throw new zc(Yt(r),t.status||500,s)}const Vc=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function me(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Zs]||(i[Zs]=Go["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Gc(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Gc(t,e,r,s,n,i){const o=Vc(e,s,n,i);let l;try{l=await t(r,Object.assign({},o))}catch(a){throw console.error(a),new Qs(Yt(a),0)}if(l.ok||await mi(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await mi(a)}}function Tt(t){var e;let r=null;Qc(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Pc(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function pi(t){const e=Tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Mt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Jc(t){return{data:t,error:null}}function Kc(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=Bc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Zc(t){return t}function Qc(t){return t.access_token&&t.refresh_token&&t.expires_in}var Xc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class eu{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Jo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Xc(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Kc,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mt})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},d=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Zc});if(d.error)throw d.error;const _=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},_),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mt})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:r,error:s}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}const tu={getItem:t=>$r()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{$r()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{$r()&&globalThis.localStorage.removeItem(t)}};function gi(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function ru(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&$r()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class su extends Qo{}async function nu(t,e,r){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new su(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}ru();const iu={url:Dc,storageKey:Mc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},gr=30*1e3,bi=3;async function vi(t,e,r){return await r()}class Mr{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mr.nextInstanceID,Mr.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},iu),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new eu({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Jo(n.fetch),this.lock=n.lock||vi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:st()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=nu:this.lock=vi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:$r()?this.storage=tu:(this.memoryStorage={},this.storage=gi(this.memoryStorage)):(this.memoryStorage={},this.storage=gi(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Vo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=st()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return he(e)?{error:e}:{error:new Zo("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{await this._removeSession();const i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Tt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{await this._removeSession();let i;if("email"in e){const{email:d,password:_,options:m}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await qt(this.storage,this.storageKey)),i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:_,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},xform:Tt})}else if("phone"in e){const{phone:d,password:_,options:m}=e;i=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:_,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Tt})}else throw new Hr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else throw new Hr("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ns}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await xr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/"),{data:i,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Tt});return await Ys(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ns}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Tt}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ns}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await qt(this.storage,this.storageKey));const{error:_}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=a==null?void 0:a.data)!==null&&r!==void 0?r:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:d}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Hr("You must provide either an email or phone number.")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Tt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await qt(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Jc})}catch(i){if(he(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new It;const{error:n}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Hr("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,d){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,d)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mt}):await this._useSession(async r=>{var s,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Mt})})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new It;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await qt(this.storage,this.storageKey));const{data:c,error:d}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Mt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return fi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new It;const r=Date.now()/1e3;let s=r,n=!0,i=null;const o=fi(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new It;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!st())throw new zr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new zr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new hi("Not a valid PKCE flow url.");const r=Ls(window.location.href);if(e){if(!r.code)throw new hi("No code detected.");const{data:k,error:$}=await this._exchangeCodeForSession(r.code);if($)throw $;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:k.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new zr(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=r;if(!i||!l||!o||!c)throw new zr("No session defined in URL");const d=Math.round(Date.now()/1e3),_=parseInt(l);let m=d+_;a&&(m=parseInt(a));const g=m-d;g*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${_}s`);const p=m-_;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,m,d);const{data:v,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:_,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:r.type},error:null}}catch(r){if(he(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=Ls(window.location.href);return!!(st()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Ls(window.location.href),r=await xr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Wc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=Ec(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await qt(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(he(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,c,d;const{data:_,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=_.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return st()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(he(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Ic(async n=>(n>0&&await jc(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Us(i)&&Date.now()+o-s<gr})}catch(s){if(this._debug(r,"error",s),he(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),st()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await xr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+di;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${di}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Us(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new bs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new It;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),he(i)){const o={session:null,error:i};return Us(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ko(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${gr}ms, refresh threshold is ${bi} ticks`),n<=bi&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const{data:l,error:a}=await me(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}Mr.nextInstanceID=0;const ou=Mr;class au extends ou{constructor(e){super(e)}}var lu=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(s.next(d))}catch(_){o(_)}}function a(d){try{c(s.throw(d))}catch(_){o(_)}}function c(d){d.done?i(d.value):n(d.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class cu{constructor(e,r,s){var n,i,o,l,a,c,d,_;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const m=Oc(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:bc,realtime:wc,auth:Object.assign(Object.assign({},vc),{storageKey:g}),global:gc},v=Tc(s??{},p);this.storageKey=(i=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=Sc(r,this._getAccessToken.bind(this),(d=v.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new gn(`${m}/rest/v1`,{headers:this.headers,schema:(_=v.db)===null||_===void 0?void 0:_.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new El(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _c(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return lu(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,c){var d;const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new au({url:this.authUrl,headers:Object.assign(Object.assign({},_),a),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new tc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uu=(t,e,r)=>new cu(t,e,r),ae=uu("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function wi(t){let e,r,s;return{c(){e=h("a"),e.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',r=w(),s=h("a"),s.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',f(e,"class","nav-link svelte-ecrr7r"),f(e,"href","./#/borrow"),f(s,"class","nav-link svelte-ecrr7r"),f(s,"href","./#/return")},m(n,i){E(n,e,i),E(n,r,i),E(n,s,i)},d(n){n&&(P(e),P(r),P(s))}}}function du(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe=t[0]=="staff"&&wi();return{c(){e=h("nav"),r=h("div"),s=h("a"),s.innerHTML=`<i class="bi bi-book"></i> 
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=w(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=w(),l=h("div"),a=h("div"),c=h("a"),c.innerHTML='<i class="bi bi-house-door"></i> Home',d=w(),_=h("a"),_.innerHTML='<i class="bi bi-journal"></i> Books',m=w(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=w(),v=h("a"),v.innerHTML='<i class="bi bi-building"></i> Publishers',y=w(),oe&&oe.c(),b=w(),k=h("li"),$=h("a"),C=h("i"),S=w(),T=se(t[1]),A=w(),j=h("ul"),U=h("li"),U.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Profile</a>',Z=w(),H=h("li"),H.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Settings</a>',K=w(),W=h("li"),W.innerHTML='<hr class="dropdown-divider"/>',R=w(),I=h("li"),D=h("a"),D.textContent="Log Out",V=w(),te=h("button"),x=h("span"),f(s,"class","navbar-brand m-0 px-2 svelte-ecrr7r"),f(s,"href","./#/"),f(i,"class","navbar-toggler"),f(i,"type","button"),f(i,"data-bs-toggle","collapse"),f(i,"data-bs-target","#navbarContent"),f(c,"class","nav-link svelte-ecrr7r"),f(c,"href","./#/"),f(_,"class","nav-link svelte-ecrr7r"),f(_,"href","./#/search"),f(g,"class","nav-link svelte-ecrr7r"),f(g,"href","./#/search/author"),f(v,"class","nav-link svelte-ecrr7r"),f(v,"href","./#/search/publisher"),f(C,"class","bi bi-person-fill"),f($,"class","nav-link dropdown-toggle svelte-ecrr7r"),f($,"href","#"),f($,"role","button"),f($,"data-bs-toggle","dropdown"),f($,"aria-expanded","false"),f(D,"class","dropdown-item text-danger svelte-ecrr7r"),f(D,"href","./#/"),f(j,"class","dropdown-menu"),f(k,"class","nav-item dropdown"),f(x,"class",B="bi bi-"+t[2]+" svelte-ecrr7r"),f(te,"title","Switch theme"),f(te,"class","px-1 border-0 bg-transparent nav-link svelte-ecrr7r"),f(a,"class","navbar-nav ms-auto text-center svelte-ecrr7r"),f(l,"class","collapse navbar-collapse"),f(l,"id","navbarContent"),f(r,"class","container px-4 fw-semibold"),f(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow svelte-ecrr7r")},m(re,fe){E(re,e,fe),u(e,r),u(r,s),u(r,n),u(r,i),u(r,o),u(r,l),u(l,a),u(a,c),u(a,d),u(a,_),u(a,m),u(a,g),u(a,p),u(a,v),u(a,y),oe&&oe.m(a,null),u(a,b),u(a,k),u(k,$),u($,C),u($,S),u($,T),u(k,A),u(k,j),u(j,U),u(j,Z),u(j,H),u(j,K),u(j,W),u(j,R),u(j,I),u(I,D),u(a,V),u(a,te),u(te,x),X||(we=[G(D,"click",t[4]),G(te,"click",t[3])],X=!0)},p(re,[fe]){re[0]=="staff"?oe||(oe=wi(),oe.c(),oe.m(a,b)):oe&&(oe.d(1),oe=null),fe&2&&le(T,re[1]),fe&4&&B!==(B="bi bi-"+re[2]+" svelte-ecrr7r")&&f(x,"class",B)},i:F,o:F,d(re){re&&P(e),oe&&oe.d(),X=!1,De(we)}}}function fu(t,e,r){let s,n,i=localStorage.getItem("user_id");Rt.subscribe(_=>r(0,n=_)),l();let o="";async function l(){const{data:_,error:m}=await ae.from("account_details").select("lname").eq("user_id",i).single();m&&console.error(m),console.log(i,_),r(1,o=_.lname)}let a=localStorage.getItem("theme")||"light";function c(){r(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function d(){Rt.set(""),Jr.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return t.$$.update=()=>{t.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),t.$$.dirty&32&&r(2,s=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,s,c,d,a]}class Xo extends be{constructor(e){super(),ge(this,e,fu,du,pe,{})}}function hu(t){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(r,s){E(r,e,s)},p:F,i:F,o:F,d(r){r&&P(e)}}}class _u extends be{constructor(e){super(),ge(this,e,null,hu,pe,{})}}function mu(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p;return{c(){e=h("div"),r=h("img"),n=w(),i=h("div"),o=h("h5"),l=h("a"),a=se(t[1]),d=w(),_=h("small"),m=h("i"),g=w(),p=se(t[2]),et(r.src,s=t[3])||f(r,"src",s),f(r,"alt","book cover"),f(r,"class","svelte-1a99e4f"),f(l,"class","stretched-link svelte-1a99e4f"),f(l,"href",c="./#/book/"+t[0]),f(o,"class","card-title"),f(m,"class","bi bi-person"),f(_,"class","card-text"),f(i,"class","card-body"),f(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(v,y){E(v,e,y),u(e,r),u(e,n),u(e,i),u(i,o),u(o,l),u(l,a),u(i,d),u(i,_),u(_,m),u(_,g),u(_,p)},p(v,[y]){y&2&&le(a,v[1]),y&1&&c!==(c="./#/book/"+v[0])&&f(l,"href",c),y&4&&le(p,v[2])},i:F,o:F,d(v){v&&P(e)}}}function pu(t,e,r){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=s>4?"./book-cover.png":`./${s}.jpg`;return t.$$set=l=>{"id"in l&&r(0,s=l.id),"title"in l&&r(1,n=l.title),"author"in l&&r(2,i=l.author)},[s,n,i,o]}class vs extends be{constructor(e){super(),ge(this,e,pu,mu,pe,{id:0,title:1,author:2})}}function yi(t){let e,r,s,n,i,o,l;return{c(){e=h("div"),r=h("a"),s=h("button"),n=se(t[3]),i=w(),o=h("i"),f(o,"class","bi bi-arrow-right"),f(s,"class","btn btn-outline-primary btn-sm"),f(r,"href",l="./#/"+t[2]),f(e,"class","align-middle align-self-center")},m(a,c){E(a,e,c),u(e,r),u(r,s),u(s,n),u(s,i),u(s,o)},p(a,c){c&8&&le(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&f(r,"href",l)},d(a){a&&P(e)}}}function gu(t){let e,r,s,n,i,o,l,a,c,d,_=t[2]!==""&&yi(t);const m=t[5].default,g=ds(m,t,t[4],null);return{c(){e=h("section"),r=h("div"),s=h("h4"),n=h("i"),o=w(),l=se(t[0]),a=w(),_&&_.c(),c=w(),g&&g.c(),f(n,"class",i="bi bi-"+t[1]),f(s,"class","my-3"),f(r,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,v){E(p,e,v),u(e,r),u(r,s),u(s,n),u(s,o),u(s,l),u(r,a),_&&_.m(r,null),u(e,c),g&&g.m(e,null),d=!0},p(p,[v]){(!d||v&2&&i!==(i="bi bi-"+p[1]))&&f(n,"class",i),(!d||v&1)&&le(l,p[0]),p[2]!==""?_?_.p(p,v):(_=yi(p),_.c(),_.m(r,null)):_&&(_.d(1),_=null),g&&g.p&&(!d||v&16)&&hs(g,m,p,p[4],d?fs(m,p[4],v,null):_s(p[4]),null)},i(p){d||(O(g,p),d=!0)},o(p){M(g,p),d=!1},d(p){p&&P(e),_&&_.d(),g&&g.d(p)}}}function bu(t,e,r){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return t.$$set=c=>{"title"in c&&r(0,i=c.title),"icon"in c&&r(1,o=c.icon),"link"in c&&r(2,l=c.link),"linkText"in c&&r(3,a=c.linkText),"$$scope"in c&&r(4,n=c.$$scope)},[i,o,l,a,n,s]}class dt extends be{constructor(e){super(),ge(this,e,bu,gu,pe,{title:0,icon:1,link:2,linkText:3})}}function vu(t){const e=t-1;return e*e*e+1}function Fe(t,{delay:e=0,duration:r=400,easing:s=ln}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:i=>`opacity: ${i*n}`}}function dr(t,{delay:e=0,duration:r=400,easing:s=vu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,d=a*(1-o),[_,m]=Qn(n),[g,p]=Qn(i);return{delay:e,duration:r,easing:s,css:(v,y)=>`
			transform: ${c} translate(${(1-v)*_}${m}, ${(1-v)*g}${p});
			opacity: ${a-d*y}`}}function wu(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',f(e,"class","d-flex justify-content-center")},m(r,s){E(r,e,s)},p:F,i:F,o:F,d(r){r&&P(e)}}}class At extends be{constructor(e){super(),ge(this,e,null,wu,pe,{})}}function yu(t){let e,r,s,n,i,o,l,a,c;return{c(){e=h("div"),r=h("img"),n=w(),i=h("div"),o=h("h6"),l=h("a"),a=se(t[0]),f(r,"class","object-fit-contain rounded my-2"),f(r,"height","150"),et(r.src,s="./default-profile.jpg")||f(r,"src",s),f(r,"alt","author"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/author/"+t[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,_){E(d,e,_),u(e,r),u(e,n),u(e,i),u(i,o),u(o,l),u(l,a)},p(d,[_]){_&1&&le(a,d[0]),_&2&&c!==(c="./#/author/"+d[1])&&f(l,"href",c)},i:F,o:F,d(d){d&&P(e)}}}function ku(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class ea extends be{constructor(e){super(),ge(this,e,ku,yu,pe,{name:0,id:1})}}function $u(t){let e,r,s,n,i,o,l,a,c;return{c(){e=h("div"),r=h("img"),n=w(),i=h("div"),o=h("h6"),l=h("a"),a=se(t[0]),f(r,"class","object-fit-contain rounded my-2"),f(r,"height","150"),et(r.src,s="./default-profile.jpg")||f(r,"src",s),f(r,"alt","publisher"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/publisher/"+t[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,_){E(d,e,_),u(e,r),u(e,n),u(e,i),u(i,o),u(o,l),u(l,a)},p(d,[_]){_&1&&le(a,d[0]),_&2&&c!==(c="./#/publisher/"+d[1])&&f(l,"href",c)},i:F,o:F,d(d){d&&P(e)}}}function Su(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class ta extends be{constructor(e){super(),ge(this,e,Su,$u,pe,{name:0,id:1})}}function Ou(t){let e,r,s,n,i,o,l,a,c,d;return{c(){e=h("div"),r=h("div"),s=h("h2"),s.textContent="Error",n=w(),i=h("p"),o=se(t[0]),l=se(": "),a=se(t[1]),c=w(),d=h("a"),d.textContent="Reload",f(d,"href","./#/"),f(d,"class","fw-bold"),f(r,"class","text-center"),f(e,"class","d-flex align-items-center justify-content-center my-3")},m(_,m){E(_,e,m),u(e,r),u(r,s),u(r,n),u(r,i),u(i,o),u(i,l),u(i,a),u(r,c),u(r,d)},p(_,[m]){m&1&&le(o,_[0]),m&2&&le(a,_[1])},i:F,o:F,d(_){_&&P(e)}}}function Tu(t,e,r){let{code:s="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&r(0,s=i.code),"message"in i&&r(1,n=i.message)},[s,n]}let ws=class extends be{constructor(e){super(),ge(this,e,Tu,Ou,pe,{code:0,message:1})}};function Du(t){let e,r,s,n,i,o,l,a,c,d,_;return{c(){e=h("div"),r=h("div"),s=h("h5"),n=h("a"),i=se(t[1]),l=w(),a=h("div"),c=h("span"),d=se(t[2]),f(n,"class","stretched-link svelte-9p7s9b"),f(n,"href",o="./#/book/"+t[0]),f(s,"class","card-title"),f(c,"class",_="badge rounded-pill text-bg-"+t[3]+" svelte-9p7s9b"),f(r,"class","card-body"),f(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(m,g){E(m,e,g),u(e,r),u(r,s),u(s,n),u(n,i),u(r,l),u(r,a),u(a,c),u(c,d)},p(m,[g]){g&2&&le(i,m[1]),g&1&&o!==(o="./#/book/"+m[0])&&f(n,"href",o),g&4&&le(d,m[2]),g&8&&_!==(_="badge rounded-pill text-bg-"+m[3]+" svelte-9p7s9b")&&f(c,"class",_)},i:F,o:F,d(m){m&&P(e)}}}function Mu(t,e,r){let{id:s=0}=e,{title:n}=e,{label:i}=e,{color:o}=e;return t.$$set=l=>{"id"in l&&r(0,s=l.id),"title"in l&&r(1,n=l.title),"label"in l&&r(2,i=l.label),"color"in l&&r(3,o=l.color)},[s,n,i,o]}class Cu extends be{constructor(e){super(),ge(this,e,Mu,Du,pe,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ra;function z(){return ra.apply(null,arguments)}function Pu(t){ra=t}function ot(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ft(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function ke(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yn(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(ke(t,e))return!1;return!0}function Ve(t){return t===void 0}function $t(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Lr(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function sa(t,e){var r=[],s,n=t.length;for(s=0;s<n;++s)r.push(e(t[s],s));return r}function Ct(t,e){for(var r in e)ke(e,r)&&(t[r]=e[r]);return ke(e,"toString")&&(t.toString=e.toString),ke(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ht(t,e,r,s){return Ta(t,e,r,s,!0).utc()}function Eu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function de(t){return t._pf==null&&(t._pf=Eu()),t._pf}var Xs;Array.prototype.some?Xs=Array.prototype.some:Xs=function(t){var e=Object(this),r=e.length>>>0,s;for(s=0;s<r;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function kn(t){var e=null,r=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=de(t),r=Xs.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function ys(t){var e=ht(NaN);return t!=null?Ct(de(e),t):de(e).userInvalidated=!0,e}var ki=z.momentProperties=[],Fs=!1;function $n(t,e){var r,s,n,i=ki.length;if(Ve(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ve(e._i)||(t._i=e._i),Ve(e._f)||(t._f=e._f),Ve(e._l)||(t._l=e._l),Ve(e._strict)||(t._strict=e._strict),Ve(e._tzm)||(t._tzm=e._tzm),Ve(e._isUTC)||(t._isUTC=e._isUTC),Ve(e._offset)||(t._offset=e._offset),Ve(e._pf)||(t._pf=de(e)),Ve(e._locale)||(t._locale=e._locale),i>0)for(r=0;r<i;r++)s=ki[r],n=e[s],Ve(n)||(t[s]=n);return t}function Yr(t){$n(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Fs===!1&&(Fs=!0,z.updateOffset(this),Fs=!1)}function at(t){return t instanceof Yr||t!=null&&t._isAMomentObject!=null}function na(t){z.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function tt(t,e){var r=!0;return Ct(function(){if(z.deprecationHandler!=null&&z.deprecationHandler(null,t),r){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])ke(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}na(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return e.apply(this,arguments)},e)}var $i={};function ia(t,e){z.deprecationHandler!=null&&z.deprecationHandler(t,e),$i[t]||(na(e),$i[t]=!0)}z.suppressDeprecationWarnings=!1;z.deprecationHandler=null;function _t(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Ru(t){var e,r;for(r in t)ke(t,r)&&(e=t[r],_t(e)?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(t,e){var r=Ct({},t),s;for(s in e)ke(e,s)&&(Ft(t[s])&&Ft(e[s])?(r[s]={},Ct(r[s],t[s]),Ct(r[s],e[s])):e[s]!=null?r[s]=e[s]:delete r[s]);for(s in t)ke(t,s)&&!ke(e,s)&&Ft(t[s])&&(r[s]=Ct({},r[s]));return r}function Sn(t){t!=null&&this.set(t)}var tn;Object.keys?tn=Object.keys:tn=function(t){var e,r=[];for(e in t)ke(t,e)&&r.push(e);return r};var Au={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ju(t,e,r){var s=this._calendar[t]||this._calendar.sameElse;return _t(s)?s.call(e,r):s}function ft(t,e,r){var s=""+Math.abs(t),n=e-s.length,i=t>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var On=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xs={},sr={};function ne(t,e,r,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),t&&(sr[t]=n),e&&(sr[e[0]]=function(){return ft(n.apply(this,arguments),e[1],e[2])}),r&&(sr[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function Iu(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Lu(t){var e=t.match(On),r,s;for(r=0,s=e.length;r<s;r++)sr[e[r]]?e[r]=sr[e[r]]:e[r]=Iu(e[r]);return function(n){var i="",o;for(o=0;o<s;o++)i+=_t(e[o])?e[o].call(n,t):e[o];return i}}function Kr(t,e){return t.isValid()?(e=oa(e,t.localeData()),xs[e]=xs[e]||Lu(e),xs[e](t)):t.localeData().invalidDate()}function oa(t,e){var r=5;function s(n){return e.longDateFormat(n)||n}for(Wr.lastIndex=0;r>=0&&Wr.test(t);)t=t.replace(Wr,s),Wr.lastIndex=0,r-=1;return t}var Yu={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Nu(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match(On).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var Uu="Invalid date";function Fu(){return this._invalidDate}var xu="%d",Hu=/\d{1,2}/;function zu(t){return this._ordinal.replace("%d",t)}var Wu={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Bu(t,e,r,s){var n=this._relativeTime[r];return _t(n)?n(t,e,r,s):n.replace(/%d/i,t)}function qu(t,e){var r=this._relativeTime[t>0?"future":"past"];return _t(r)?r(e):r.replace(/%s/i,e)}var Si={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function rt(t){return typeof t=="string"?Si[t]||Si[t.toLowerCase()]:void 0}function Tn(t){var e={},r,s;for(s in t)ke(t,s)&&(r=rt(s),r&&(e[r]=t[s]));return e}var Vu={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Gu(t){var e=[],r;for(r in t)ke(t,r)&&e.push({unit:r,priority:Vu[r]});return e.sort(function(s,n){return s.priority-n.priority}),e}var aa=/\d/,Ke=/\d\d/,la=/\d{3}/,Dn=/\d{4}/,ks=/[+-]?\d{6}/,Ae=/\d\d?/,ca=/\d\d\d\d?/,ua=/\d\d\d\d\d\d?/,$s=/\d{1,3}/,Mn=/\d{1,4}/,Ss=/[+-]?\d{1,6}/,hr=/\d+/,Os=/[+-]?\d+/,Ju=/Z|[+-]\d\d:?\d\d/gi,Ts=/Z|[+-]\d\d(?::?\d\d)?/gi,Ku=/[+-]?\d+(\.\d{1,3})?/,Nr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_r=/^[1-9]\d?/,Cn=/^([1-9]\d|\d)/,os;os={};function Q(t,e,r){os[t]=_t(e)?e:function(s,n){return s&&r?r:e}}function Zu(t,e){return ke(os,t)?os[t](e._strict,e._locale):new RegExp(Qu(t))}function Qu(t){return yt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,r,s,n,i){return r||s||n||i}))}function yt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Xe(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function _e(t){var e=+t,r=0;return e!==0&&isFinite(e)&&(r=Xe(e)),r}var rn={};function Me(t,e){var r,s=e,n;for(typeof t=="string"&&(t=[t]),$t(e)&&(s=function(i,o){o[e]=_e(i)}),n=t.length,r=0;r<n;r++)rn[t[r]]=s}function Ur(t,e){Me(t,function(r,s,n,i){n._w=n._w||{},e(r,n._w,n,i)})}function Xu(t,e,r){e!=null&&ke(rn,t)&&rn[t](e,r._a,r,t)}function Ds(t){return t%4===0&&t%100!==0||t%400===0}var He=0,vt=1,ct=2,Ne=3,it=4,wt=5,Ut=6,ed=7,td=8;ne("Y",0,0,function(){var t=this.year();return t<=9999?ft(t,4):"+"+t});ne(0,["YY",2],0,function(){return this.year()%100});ne(0,["YYYY",4],0,"year");ne(0,["YYYYY",5],0,"year");ne(0,["YYYYYY",6,!0],0,"year");Q("Y",Os);Q("YY",Ae,Ke);Q("YYYY",Mn,Dn);Q("YYYYY",Ss,ks);Q("YYYYYY",Ss,ks);Me(["YYYYY","YYYYYY"],He);Me("YYYY",function(t,e){e[He]=t.length===2?z.parseTwoDigitYear(t):_e(t)});Me("YY",function(t,e){e[He]=z.parseTwoDigitYear(t)});Me("Y",function(t,e){e[He]=parseInt(t,10)});function Sr(t){return Ds(t)?366:365}z.parseTwoDigitYear=function(t){return _e(t)+(_e(t)>68?1900:2e3)};var da=mr("FullYear",!0);function rd(){return Ds(this.year())}function mr(t,e){return function(r){return r!=null?(fa(this,t,r),z.updateOffset(this,e),this):Cr(this,t)}}function Cr(t,e){if(!t.isValid())return NaN;var r=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return s?r.getUTCSeconds():r.getSeconds();case"Minutes":return s?r.getUTCMinutes():r.getMinutes();case"Hours":return s?r.getUTCHours():r.getHours();case"Date":return s?r.getUTCDate():r.getDate();case"Day":return s?r.getUTCDay():r.getDay();case"Month":return s?r.getUTCMonth():r.getMonth();case"FullYear":return s?r.getUTCFullYear():r.getFullYear();default:return NaN}}function fa(t,e,r){var s,n,i,o,l;if(!(!t.isValid()||isNaN(r))){switch(s=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(r):s.setMilliseconds(r));case"Seconds":return void(n?s.setUTCSeconds(r):s.setSeconds(r));case"Minutes":return void(n?s.setUTCMinutes(r):s.setMinutes(r));case"Hours":return void(n?s.setUTCHours(r):s.setHours(r));case"Date":return void(n?s.setUTCDate(r):s.setDate(r));case"FullYear":break;default:return}i=r,o=t.month(),l=t.date(),l=l===29&&o===1&&!Ds(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function sd(t){return t=rt(t),_t(this[t])?this[t]():this}function nd(t,e){if(typeof t=="object"){t=Tn(t);var r=Gu(t),s,n=r.length;for(s=0;s<n;s++)this[r[s].unit](t[r[s].unit])}else if(t=rt(t),_t(this[t]))return this[t](e);return this}function id(t,e){return(t%e+e)%e}var Ye;Array.prototype.indexOf?Ye=Array.prototype.indexOf:Ye=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Pn(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=id(e,12);return t+=(e-r)/12,r===1?Ds(t)?29:28:31-r%7%2}ne("M",["MM",2],"Mo",function(){return this.month()+1});ne("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});ne("MMMM",0,0,function(t){return this.localeData().months(this,t)});Q("M",Ae,_r);Q("MM",Ae,Ke);Q("MMM",function(t,e){return e.monthsShortRegex(t)});Q("MMMM",function(t,e){return e.monthsRegex(t)});Me(["M","MM"],function(t,e){e[vt]=_e(t)-1});Me(["MMM","MMMM"],function(t,e,r,s){var n=r._locale.monthsParse(t,s,r._strict);n!=null?e[vt]=n:de(r).invalidMonth=t});var od="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ha="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_a=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ad=Nr,ld=Nr;function cd(t,e){return t?ot(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||_a).test(e)?"format":"standalone"][t.month()]:ot(this._months)?this._months:this._months.standalone}function ud(t,e){return t?ot(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[_a.test(e)?"format":"standalone"][t.month()]:ot(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function dd(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=ht([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return r?e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null))}function fd(t,e,r){var s,n,i;if(this._monthsParseExact)return dd.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=ht([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(r&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!r&&this._monthsParse[s].test(t))return s}}function ma(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=_e(e);else if(e=t.localeData().monthsParse(e),!$t(e))return t}var r=e,s=t.date();return s=s<29?s:Math.min(s,Pn(t.year(),r)),t._isUTC?t._d.setUTCMonth(r,s):t._d.setMonth(r,s),t}function pa(t){return t!=null?(ma(this,t),z.updateOffset(this,!0),this):Cr(this,"Month")}function hd(){return Pn(this.year(),this.month())}function _d(t){return this._monthsParseExact?(ke(this,"_monthsRegex")||ga.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(ke(this,"_monthsShortRegex")||(this._monthsShortRegex=ad),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function md(t){return this._monthsParseExact?(ke(this,"_monthsRegex")||ga.call(this),t?this._monthsStrictRegex:this._monthsRegex):(ke(this,"_monthsRegex")||(this._monthsRegex=ld),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ga(){function t(a,c){return c.length-a.length}var e=[],r=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=ht([2e3,n]),o=yt(this.monthsShort(i,"")),l=yt(this.months(i,"")),e.push(o),r.push(l),s.push(l),s.push(o);e.sort(t),r.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function pd(t,e,r,s,n,i,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,r,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,r,s,n,i,o),l}function Pr(t){var e,r;return t<100&&t>=0?(r=Array.prototype.slice.call(arguments),r[0]=t+400,e=new Date(Date.UTC.apply(null,r)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function as(t,e,r){var s=7+e-r,n=(7+Pr(t,0,s).getUTCDay()-e)%7;return-n+s-1}function ba(t,e,r,s,n){var i=(7+r-s)%7,o=as(t,s,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=t-1,c=Sr(a)+l):l>Sr(t)?(a=t+1,c=l-Sr(t)):(a=t,c=l),{year:a,dayOfYear:c}}function Er(t,e,r){var s=as(t.year(),e,r),n=Math.floor((t.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=t.year()-1,i=n+kt(o,e,r)):n>kt(t.year(),e,r)?(i=n-kt(t.year(),e,r),o=t.year()+1):(o=t.year(),i=n),{week:i,year:o}}function kt(t,e,r){var s=as(t,e,r),n=as(t+1,e,r);return(Sr(t)-s+n)/7}ne("w",["ww",2],"wo","week");ne("W",["WW",2],"Wo","isoWeek");Q("w",Ae,_r);Q("ww",Ae,Ke);Q("W",Ae,_r);Q("WW",Ae,Ke);Ur(["w","ww","W","WW"],function(t,e,r,s){e[s.substr(0,1)]=_e(t)});function gd(t){return Er(t,this._week.dow,this._week.doy).week}var bd={dow:0,doy:6};function vd(){return this._week.dow}function wd(){return this._week.doy}function yd(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function kd(t){var e=Er(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}ne("d",0,"do","day");ne("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});ne("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});ne("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});ne("e",0,0,"weekday");ne("E",0,0,"isoWeekday");Q("d",Ae);Q("e",Ae);Q("E",Ae);Q("dd",function(t,e){return e.weekdaysMinRegex(t)});Q("ddd",function(t,e){return e.weekdaysShortRegex(t)});Q("dddd",function(t,e){return e.weekdaysRegex(t)});Ur(["dd","ddd","dddd"],function(t,e,r,s){var n=r._locale.weekdaysParse(t,s,r._strict);n!=null?e.d=n:de(r).invalidWeekday=t});Ur(["d","e","E"],function(t,e,r,s){e[s]=_e(t)});function $d(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Sd(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function En(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Od="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),va="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Td="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Dd=Nr,Md=Nr,Cd=Nr;function Pd(t,e){var r=ot(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?En(r,this._week.dow):t?r[t.day()]:r}function Ed(t){return t===!0?En(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Rd(t){return t===!0?En(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ad(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=ht([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return r?e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1||(n=Ye.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ye.call(this._minWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function jd(t,e,r){var s,n,i;if(this._weekdaysParseExact)return Ad.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=ht([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(r&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(r&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!r&&this._weekdaysParse[s].test(t))return s}}function Id(t){if(!this.isValid())return t!=null?this:NaN;var e=Cr(this,"Day");return t!=null?(t=$d(t,this.localeData()),this.add(t-e,"d")):e}function Ld(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Yd(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Sd(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Nd(t){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(ke(this,"_weekdaysRegex")||(this._weekdaysRegex=Dd),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ud(t){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ke(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Md),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Fd(t){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ke(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Cd),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Rn(){function t(d,_){return _.length-d.length}var e=[],r=[],s=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ht([2e3,1]).day(i),l=yt(this.weekdaysMin(o,"")),a=yt(this.weekdaysShort(o,"")),c=yt(this.weekdays(o,"")),e.push(l),r.push(a),s.push(c),n.push(l),n.push(a),n.push(c);e.sort(t),r.sort(t),s.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function An(){return this.hours()%12||12}function xd(){return this.hours()||24}ne("H",["HH",2],0,"hour");ne("h",["hh",2],0,An);ne("k",["kk",2],0,xd);ne("hmm",0,0,function(){return""+An.apply(this)+ft(this.minutes(),2)});ne("hmmss",0,0,function(){return""+An.apply(this)+ft(this.minutes(),2)+ft(this.seconds(),2)});ne("Hmm",0,0,function(){return""+this.hours()+ft(this.minutes(),2)});ne("Hmmss",0,0,function(){return""+this.hours()+ft(this.minutes(),2)+ft(this.seconds(),2)});function wa(t,e){ne(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}wa("a",!0);wa("A",!1);function ya(t,e){return e._meridiemParse}Q("a",ya);Q("A",ya);Q("H",Ae,Cn);Q("h",Ae,_r);Q("k",Ae,_r);Q("HH",Ae,Ke);Q("hh",Ae,Ke);Q("kk",Ae,Ke);Q("hmm",ca);Q("hmmss",ua);Q("Hmm",ca);Q("Hmmss",ua);Me(["H","HH"],Ne);Me(["k","kk"],function(t,e,r){var s=_e(t);e[Ne]=s===24?0:s});Me(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t});Me(["h","hh"],function(t,e,r){e[Ne]=_e(t),de(r).bigHour=!0});Me("hmm",function(t,e,r){var s=t.length-2;e[Ne]=_e(t.substr(0,s)),e[it]=_e(t.substr(s)),de(r).bigHour=!0});Me("hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ne]=_e(t.substr(0,s)),e[it]=_e(t.substr(s,2)),e[wt]=_e(t.substr(n)),de(r).bigHour=!0});Me("Hmm",function(t,e,r){var s=t.length-2;e[Ne]=_e(t.substr(0,s)),e[it]=_e(t.substr(s))});Me("Hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ne]=_e(t.substr(0,s)),e[it]=_e(t.substr(s,2)),e[wt]=_e(t.substr(n))});function Hd(t){return(t+"").toLowerCase().charAt(0)==="p"}var zd=/[ap]\.?m?\.?/i,Wd=mr("Hours",!0);function Bd(t,e,r){return t>11?r?"pm":"PM":r?"am":"AM"}var ka={calendar:Au,longDateFormat:Yu,invalidDate:Uu,ordinal:xu,dayOfMonthOrdinalParse:Hu,relativeTime:Wu,months:od,monthsShort:ha,week:bd,weekdays:Od,weekdaysMin:Td,weekdaysShort:va,meridiemParse:zd},je={},br={},Rr;function qd(t,e){var r,s=Math.min(t.length,e.length);for(r=0;r<s;r+=1)if(t[r]!==e[r])return r;return s}function Oi(t){return t&&t.toLowerCase().replace("_","-")}function Vd(t){for(var e=0,r,s,n,i;e<t.length;){for(i=Oi(t[e]).split("-"),r=i.length,s=Oi(t[e+1]),s=s?s.split("-"):null;r>0;){if(n=Ms(i.slice(0,r).join("-")),n)return n;if(s&&s.length>=r&&qd(i,s)>=r-1)break;r--}e++}return Rr}function Gd(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Ms(t){var e=null,r;if(je[t]===void 0&&typeof Xr<"u"&&Xr&&Xr.exports&&Gd(t))try{e=Rr._abbr,r=require,r("./locale/"+t),Et(e)}catch{je[t]=null}return je[t]}function Et(t,e){var r;return t&&(Ve(e)?r=St(t):r=jn(t,e),r?Rr=r:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Rr._abbr}function jn(t,e){if(e!==null){var r,s=ka;if(e.abbr=t,je[t]!=null)ia("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=je[t]._config;else if(e.parentLocale!=null)if(je[e.parentLocale]!=null)s=je[e.parentLocale]._config;else if(r=Ms(e.parentLocale),r!=null)s=r._config;else return br[e.parentLocale]||(br[e.parentLocale]=[]),br[e.parentLocale].push({name:t,config:e}),null;return je[t]=new Sn(en(s,e)),br[t]&&br[t].forEach(function(n){jn(n.name,n.config)}),Et(t),je[t]}else return delete je[t],null}function Jd(t,e){if(e!=null){var r,s,n=ka;je[t]!=null&&je[t].parentLocale!=null?je[t].set(en(je[t]._config,e)):(s=Ms(t),s!=null&&(n=s._config),e=en(n,e),s==null&&(e.abbr=t),r=new Sn(e),r.parentLocale=je[t],je[t]=r),Et(t)}else je[t]!=null&&(je[t].parentLocale!=null?(je[t]=je[t].parentLocale,t===Et()&&Et(t)):je[t]!=null&&delete je[t]);return je[t]}function St(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Rr;if(!ot(t)){if(e=Ms(t),e)return e;t=[t]}return Vd(t)}function Kd(){return tn(je)}function In(t){var e,r=t._a;return r&&de(t).overflow===-2&&(e=r[vt]<0||r[vt]>11?vt:r[ct]<1||r[ct]>Pn(r[He],r[vt])?ct:r[Ne]<0||r[Ne]>24||r[Ne]===24&&(r[it]!==0||r[wt]!==0||r[Ut]!==0)?Ne:r[it]<0||r[it]>59?it:r[wt]<0||r[wt]>59?wt:r[Ut]<0||r[Ut]>999?Ut:-1,de(t)._overflowDayOfYear&&(e<He||e>ct)&&(e=ct),de(t)._overflowWeeks&&e===-1&&(e=ed),de(t)._overflowWeekday&&e===-1&&(e=td),de(t).overflow=e),t}var Zd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xd=/Z|[+-]\d\d(?::?\d\d)?/,Br=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Hs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ef=/^\/?Date\((-?\d+)/i,tf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,rf={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function $a(t){var e,r,s=t._i,n=Zd.exec(s)||Qd.exec(s),i,o,l,a,c=Br.length,d=Hs.length;if(n){for(de(t).iso=!0,e=0,r=c;e<r;e++)if(Br[e][1].exec(n[1])){o=Br[e][0],i=Br[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(n[3]){for(e=0,r=d;e<r;e++)if(Hs[e][1].exec(n[3])){l=(n[2]||" ")+Hs[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(Xd.exec(n[4]))a="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(a||""),Yn(t)}else t._isValid=!1}function sf(t,e,r,s,n,i){var o=[nf(t),ha.indexOf(e),parseInt(r,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function nf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function of(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function af(t,e,r){if(t){var s=va.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return de(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function lf(t,e,r){if(t)return rf[t];if(e)return 0;var s=parseInt(r,10),n=s%100,i=(s-n)/100;return i*60+n}function Sa(t){var e=tf.exec(of(t._i)),r;if(e){if(r=sf(e[4],e[3],e[2],e[5],e[6],e[7]),!af(e[1],r,t))return;t._a=r,t._tzm=lf(e[8],e[9],e[10]),t._d=Pr.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),de(t).rfc2822=!0}else t._isValid=!1}function cf(t){var e=ef.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if($a(t),t._isValid===!1)delete t._isValid;else return;if(Sa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:z.createFromInputFallback(t)}z.createFromInputFallback=tt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Zt(t,e,r){return t??e??r}function uf(t){var e=new Date(z.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ln(t){var e,r,s=[],n,i,o;if(!t._d){for(n=uf(t),t._w&&t._a[ct]==null&&t._a[vt]==null&&df(t),t._dayOfYear!=null&&(o=Zt(t._a[He],n[He]),(t._dayOfYear>Sr(o)||t._dayOfYear===0)&&(de(t)._overflowDayOfYear=!0),r=Pr(o,0,t._dayOfYear),t._a[vt]=r.getUTCMonth(),t._a[ct]=r.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ne]===24&&t._a[it]===0&&t._a[wt]===0&&t._a[Ut]===0&&(t._nextDay=!0,t._a[Ne]=0),t._d=(t._useUTC?Pr:pd).apply(null,s),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ne]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(de(t).weekdayMismatch=!0)}}function df(t){var e,r,s,n,i,o,l,a,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,r=Zt(e.GG,t._a[He],Er(Re(),1,4).year),s=Zt(e.W,1),n=Zt(e.E,1),(n<1||n>7)&&(a=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Er(Re(),i,o),r=Zt(e.gg,t._a[He],c.year),s=Zt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>kt(r,i,o)?de(t)._overflowWeeks=!0:a!=null?de(t)._overflowWeekday=!0:(l=ba(r,s,n,i,o),t._a[He]=l.year,t._dayOfYear=l.dayOfYear)}z.ISO_8601=function(){};z.RFC_2822=function(){};function Yn(t){if(t._f===z.ISO_8601){$a(t);return}if(t._f===z.RFC_2822){Sa(t);return}t._a=[],de(t).empty=!0;var e=""+t._i,r,s,n,i,o,l=e.length,a=0,c,d;for(n=oa(t._f,t._locale).match(On)||[],d=n.length,r=0;r<d;r++)i=n[r],s=(e.match(Zu(i,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&de(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),sr[i]?(s?de(t).empty=!1:de(t).unusedTokens.push(i),Xu(i,s,t)):t._strict&&!s&&de(t).unusedTokens.push(i);de(t).charsLeftOver=l-a,e.length>0&&de(t).unusedInput.push(e),t._a[Ne]<=12&&de(t).bigHour===!0&&t._a[Ne]>0&&(de(t).bigHour=void 0),de(t).parsedDateParts=t._a.slice(0),de(t).meridiem=t._meridiem,t._a[Ne]=ff(t._locale,t._a[Ne],t._meridiem),c=de(t).era,c!==null&&(t._a[He]=t._locale.erasConvertYear(c,t._a[He])),Ln(t),In(t)}function ff(t,e,r){var s;return r==null?e:t.meridiemHour!=null?t.meridiemHour(e,r):(t.isPM!=null&&(s=t.isPM(r),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function hf(t){var e,r,s,n,i,o,l=!1,a=t._f.length;if(a===0){de(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=$n({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],Yn(e),kn(e)&&(o=!0),i+=de(e).charsLeftOver,i+=de(e).unusedTokens.length*10,de(e).score=i,l?i<s&&(s=i,r=e):(s==null||i<s||o)&&(s=i,r=e,o&&(l=!0));Ct(t,r||e)}function _f(t){if(!t._d){var e=Tn(t._i),r=e.day===void 0?e.date:e.day;t._a=sa([e.year,e.month,r,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),Ln(t)}}function mf(t){var e=new Yr(In(Oa(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Oa(t){var e=t._i,r=t._f;return t._locale=t._locale||St(t._l),e===null||r===void 0&&e===""?ys({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),at(e)?new Yr(In(e)):(Lr(e)?t._d=e:ot(r)?hf(t):r?Yn(t):pf(t),kn(t)||(t._d=null),t))}function pf(t){var e=t._i;Ve(e)?t._d=new Date(z.now()):Lr(e)?t._d=new Date(e.valueOf()):typeof e=="string"?cf(t):ot(e)?(t._a=sa(e.slice(0),function(r){return parseInt(r,10)}),Ln(t)):Ft(e)?_f(t):$t(e)?t._d=new Date(e):z.createFromInputFallback(t)}function Ta(t,e,r,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(Ft(t)&&yn(t)||ot(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=r,i._i=t,i._f=e,i._strict=s,mf(i)}function Re(t,e,r,s){return Ta(t,e,r,s,!1)}var gf=tt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Re.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:ys()}),bf=tt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Re.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:ys()});function Da(t,e){var r,s;if(e.length===1&&ot(e[0])&&(e=e[0]),!e.length)return Re();for(r=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](r))&&(r=e[s]);return r}function vf(){var t=[].slice.call(arguments,0);return Da("isBefore",t)}function wf(){var t=[].slice.call(arguments,0);return Da("isAfter",t)}var yf=function(){return Date.now?Date.now():+new Date},vr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kf(t){var e,r=!1,s,n=vr.length;for(e in t)if(ke(t,e)&&!(Ye.call(vr,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<n;++s)if(t[vr[s]]){if(r)return!1;parseFloat(t[vr[s]])!==_e(t[vr[s]])&&(r=!0)}return!0}function $f(){return this._isValid}function Sf(){return lt(NaN)}function Cs(t){var e=Tn(t),r=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,d=e.millisecond||0;this._isValid=kf(e),this._milliseconds=+d+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+r*12,this._data={},this._locale=St(),this._bubble()}function Zr(t){return t instanceof Cs}function sn(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Of(t,e,r){var s=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,o;for(o=0;o<s;o++)_e(t[o])!==_e(e[o])&&i++;return i+n}function Ma(t,e){ne(t,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+ft(~~(r/60),2)+e+ft(~~r%60,2)})}Ma("Z",":");Ma("ZZ","");Q("Z",Ts);Q("ZZ",Ts);Me(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=Nn(Ts,t)});var Tf=/([\+\-]|\d\d)/gi;function Nn(t,e){var r=(e||"").match(t),s,n,i;return r===null?null:(s=r[r.length-1]||[],n=(s+"").match(Tf)||["-",0,0],i=+(n[1]*60)+_e(n[2]),i===0?0:n[0]==="+"?i:-i)}function Un(t,e){var r,s;return e._isUTC?(r=e.clone(),s=(at(t)||Lr(t)?t.valueOf():Re(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),z.updateOffset(r,!1),r):Re(t).local()}function nn(t){return-Math.round(t._d.getTimezoneOffset())}z.updateOffset=function(){};function Df(t,e,r){var s=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Nn(Ts,t),t===null)return this}else Math.abs(t)<16&&!r&&(t=t*60);return!this._isUTC&&e&&(n=nn(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==t&&(!e||this._changeInProgress?Ea(this,lt(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,z.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:nn(this)}function Mf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Cf(t){return this.utcOffset(0,t)}function Pf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(nn(this),"m")),this}function Ef(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Nn(Ju,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Rf(t){return this.isValid()?(t=t?Re(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Af(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jf(){if(!Ve(this._isDSTShifted))return this._isDSTShifted;var t={},e;return $n(t,this),t=Oa(t),t._a?(e=t._isUTC?ht(t._a):Re(t._a),this._isDSTShifted=this.isValid()&&Of(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function If(){return this.isValid()?!this._isUTC:!1}function Lf(){return this.isValid()?this._isUTC:!1}function Ca(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Yf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Nf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function lt(t,e){var r=t,s=null,n,i,o;return Zr(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:$t(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(s=Yf.exec(t))?(n=s[1]==="-"?-1:1,r={y:0,d:_e(s[ct])*n,h:_e(s[Ne])*n,m:_e(s[it])*n,s:_e(s[wt])*n,ms:_e(sn(s[Ut]*1e3))*n}):(s=Nf.exec(t))?(n=s[1]==="-"?-1:1,r={y:Lt(s[2],n),M:Lt(s[3],n),w:Lt(s[4],n),d:Lt(s[5],n),h:Lt(s[6],n),m:Lt(s[7],n),s:Lt(s[8],n)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=Uf(Re(r.from),Re(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new Cs(r),Zr(t)&&ke(t,"_locale")&&(i._locale=t._locale),Zr(t)&&ke(t,"_isValid")&&(i._isValid=t._isValid),i}lt.fn=Cs.prototype;lt.invalid=Sf;function Lt(t,e){var r=t&&parseFloat(t.replace(",","."));return(isNaN(r)?0:r)*e}function Ti(t,e){var r={};return r.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function Uf(t,e){var r;return t.isValid()&&e.isValid()?(e=Un(e,t),t.isBefore(e)?r=Ti(t,e):(r=Ti(e,t),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function Pa(t,e){return function(r,s){var n,i;return s!==null&&!isNaN(+s)&&(ia(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=s,s=i),n=lt(r,s),Ea(this,n,t),this}}function Ea(t,e,r,s){var n=e._milliseconds,i=sn(e._days),o=sn(e._months);t.isValid()&&(s=s??!0,o&&ma(t,Cr(t,"Month")+o*r),i&&fa(t,"Date",Cr(t,"Date")+i*r),n&&t._d.setTime(t._d.valueOf()+n*r),s&&z.updateOffset(t,i||o))}var Ff=Pa(1,"add"),xf=Pa(-1,"subtract");function Ra(t){return typeof t=="string"||t instanceof String}function Hf(t){return at(t)||Lr(t)||Ra(t)||$t(t)||Wf(t)||zf(t)||t===null||t===void 0}function zf(t){var e=Ft(t)&&!yn(t),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],r=r||ke(t,i);return e&&r}function Wf(t){var e=ot(t),r=!1;return e&&(r=t.filter(function(s){return!$t(s)&&Ra(t)}).length===0),e&&r}function Bf(t){var e=Ft(t)&&!yn(t),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],r=r||ke(t,i);return e&&r}function qf(t,e){var r=t.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Vf(t,e){arguments.length===1&&(arguments[0]?Hf(arguments[0])?(t=arguments[0],e=void 0):Bf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var r=t||Re(),s=Un(r,this).startOf("day"),n=z.calendarFormat(this,s)||"sameElse",i=e&&(_t(e[n])?e[n].call(this,r):e[n]);return this.format(i||this.localeData().calendar(n,this,Re(r)))}function Gf(){return new Yr(this)}function Jf(t,e){var r=at(t)?t:Re(t);return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf()):!1}function Kf(t,e){var r=at(t)?t:Re(t);return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf()):!1}function Zf(t,e,r,s){var n=at(t)?t:Re(t),i=at(e)?e:Re(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,r):!this.isBefore(n,r))&&(s[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function Qf(t,e){var r=at(t)?t:Re(t),s;return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function Xf(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function eh(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function th(t,e,r){var s,n,i;if(!this.isValid())return NaN;if(s=Un(t,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=rt(e),e){case"year":i=Qr(this,s)/12;break;case"month":i=Qr(this,s);break;case"quarter":i=Qr(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return r?i:Xe(i)}function Qr(t,e){if(t.date()<e.date())return-Qr(e,t);var r=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(r,"months"),n,i;return e-s<0?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)||0}z.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";z.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function rh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sh(t){if(!this.isValid())return null;var e=t!==!0,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?Kr(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_t(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Kr(r,"Z")):Kr(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function nh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",r,s,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),r="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(r+s+n+i)}function ih(t){t||(t=this.isUtc()?z.defaultFormatUtc:z.defaultFormat);var e=Kr(this,t);return this.localeData().postformat(e)}function oh(t,e){return this.isValid()&&(at(t)&&t.isValid()||Re(t).isValid())?lt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ah(t){return this.from(Re(),t)}function lh(t,e){return this.isValid()&&(at(t)&&t.isValid()||Re(t).isValid())?lt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ch(t){return this.to(Re(),t)}function Aa(t){var e;return t===void 0?this._locale._abbr:(e=St(t),e!=null&&(this._locale=e),this)}var ja=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Ia(){return this._locale}var ls=1e3,nr=60*ls,cs=60*nr,La=(365*400+97)*24*cs;function ir(t,e){return(t%e+e)%e}function Ya(t,e,r){return t<100&&t>=0?new Date(t+400,e,r)-La:new Date(t,e,r).valueOf()}function Na(t,e,r){return t<100&&t>=0?Date.UTC(t+400,e,r)-La:Date.UTC(t,e,r)}function uh(t){var e,r;if(t=rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Na:Ya,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ir(e+(this._isUTC?0:this.utcOffset()*nr),cs);break;case"minute":e=this._d.valueOf(),e-=ir(e,nr);break;case"second":e=this._d.valueOf(),e-=ir(e,ls);break}return this._d.setTime(e),z.updateOffset(this,!0),this}function dh(t){var e,r;if(t=rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Na:Ya,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cs-ir(e+(this._isUTC?0:this.utcOffset()*nr),cs)-1;break;case"minute":e=this._d.valueOf(),e+=nr-ir(e,nr)-1;break;case"second":e=this._d.valueOf(),e+=ls-ir(e,ls)-1;break}return this._d.setTime(e),z.updateOffset(this,!0),this}function fh(){return this._d.valueOf()-(this._offset||0)*6e4}function hh(){return Math.floor(this.valueOf()/1e3)}function _h(){return new Date(this.valueOf())}function mh(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ph(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function gh(){return this.isValid()?this.toISOString():null}function bh(){return kn(this)}function vh(){return Ct({},de(this))}function wh(){return de(this).overflow}function yh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ne("N",0,0,"eraAbbr");ne("NN",0,0,"eraAbbr");ne("NNN",0,0,"eraAbbr");ne("NNNN",0,0,"eraName");ne("NNNNN",0,0,"eraNarrow");ne("y",["y",1],"yo","eraYear");ne("y",["yy",2],0,"eraYear");ne("y",["yyy",3],0,"eraYear");ne("y",["yyyy",4],0,"eraYear");Q("N",Fn);Q("NN",Fn);Q("NNN",Fn);Q("NNNN",Rh);Q("NNNNN",Ah);Me(["N","NN","NNN","NNNN","NNNNN"],function(t,e,r,s){var n=r._locale.erasParse(t,s,r._strict);n?de(r).era=n:de(r).invalidEra=t});Q("y",hr);Q("yy",hr);Q("yyy",hr);Q("yyyy",hr);Q("yo",jh);Me(["y","yy","yyy","yyyy"],He);Me(["yo"],function(t,e,r,s){var n;r._locale._eraYearOrdinalRegex&&(n=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[He]=r._locale.eraYearOrdinalParse(t,n):e[He]=parseInt(t,10)});function kh(t,e){var r,s,n,i=this._eras||St("en")._eras;for(r=0,s=i.length;r<s;++r){switch(typeof i[r].since){case"string":n=z(i[r].since).startOf("day"),i[r].since=n.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":n=z(i[r].until).startOf("day").valueOf(),i[r].until=n.valueOf();break}}return i}function $h(t,e,r){var s,n,i=this.eras(),o,l,a;for(t=t.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[s];break;case"NNNN":if(o===t)return i[s];break;case"NNNNN":if(a===t)return i[s];break}else if([o,l,a].indexOf(t)>=0)return i[s]}function Sh(t,e){var r=t.since<=t.until?1:-1;return e===void 0?z(t.since).year():z(t.since).year()+(e-t.offset)*r}function Oh(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].name;return""}function Th(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].narrow;return""}function Dh(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].abbr;return""}function Mh(){var t,e,r,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(r=n[t].since<=n[t].until?1:-1,s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return(this.year()-z(n[t].since).year())*r+n[t].offset;return this.year()}function Ch(t){return ke(this,"_erasNameRegex")||xn.call(this),t?this._erasNameRegex:this._erasRegex}function Ph(t){return ke(this,"_erasAbbrRegex")||xn.call(this),t?this._erasAbbrRegex:this._erasRegex}function Eh(t){return ke(this,"_erasNarrowRegex")||xn.call(this),t?this._erasNarrowRegex:this._erasRegex}function Fn(t,e){return e.erasAbbrRegex(t)}function Rh(t,e){return e.erasNameRegex(t)}function Ah(t,e){return e.erasNarrowRegex(t)}function jh(t,e){return e._eraYearOrdinalRegex||hr}function xn(){var t=[],e=[],r=[],s=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=yt(c[n].name),l=yt(c[n].abbr),a=yt(c[n].narrow),e.push(o),t.push(l),r.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}ne(0,["gg",2],0,function(){return this.weekYear()%100});ne(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ps(t,e){ne(0,[t,t.length],0,e)}Ps("gggg","weekYear");Ps("ggggg","weekYear");Ps("GGGG","isoWeekYear");Ps("GGGGG","isoWeekYear");Q("G",Os);Q("g",Os);Q("GG",Ae,Ke);Q("gg",Ae,Ke);Q("GGGG",Mn,Dn);Q("gggg",Mn,Dn);Q("GGGGG",Ss,ks);Q("ggggg",Ss,ks);Ur(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,s){e[s.substr(0,2)]=_e(t)});Ur(["gg","GG"],function(t,e,r,s){e[s]=z.parseTwoDigitYear(t)});function Ih(t){return Ua.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Lh(t){return Ua.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Yh(){return kt(this.year(),1,4)}function Nh(){return kt(this.isoWeekYear(),1,4)}function Uh(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function Fh(){var t=this.localeData()._week;return kt(this.weekYear(),t.dow,t.doy)}function Ua(t,e,r,s,n){var i;return t==null?Er(this,s,n).year:(i=kt(t,s,n),e>i&&(e=i),xh.call(this,t,e,r,s,n))}function xh(t,e,r,s,n){var i=ba(t,e,r,s,n),o=Pr(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ne("Q",0,"Qo","quarter");Q("Q",aa);Me("Q",function(t,e){e[vt]=(_e(t)-1)*3});function Hh(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}ne("D",["DD",2],"Do","date");Q("D",Ae,_r);Q("DD",Ae,Ke);Q("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Me(["D","DD"],ct);Me("Do",function(t,e){e[ct]=_e(t.match(Ae)[0])});var Fa=mr("Date",!0);ne("DDD",["DDDD",3],"DDDo","dayOfYear");Q("DDD",$s);Q("DDDD",la);Me(["DDD","DDDD"],function(t,e,r){r._dayOfYear=_e(t)});function zh(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}ne("m",["mm",2],0,"minute");Q("m",Ae,Cn);Q("mm",Ae,Ke);Me(["m","mm"],it);var Wh=mr("Minutes",!1);ne("s",["ss",2],0,"second");Q("s",Ae,Cn);Q("ss",Ae,Ke);Me(["s","ss"],wt);var Bh=mr("Seconds",!1);ne("S",0,0,function(){return~~(this.millisecond()/100)});ne(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ne(0,["SSS",3],0,"millisecond");ne(0,["SSSS",4],0,function(){return this.millisecond()*10});ne(0,["SSSSS",5],0,function(){return this.millisecond()*100});ne(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ne(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ne(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ne(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Q("S",$s,aa);Q("SS",$s,Ke);Q("SSS",$s,la);var Pt,xa;for(Pt="SSSS";Pt.length<=9;Pt+="S")Q(Pt,hr);function qh(t,e){e[Ut]=_e(("0."+t)*1e3)}for(Pt="S";Pt.length<=9;Pt+="S")Me(Pt,qh);xa=mr("Milliseconds",!1);ne("z",0,0,"zoneAbbr");ne("zz",0,0,"zoneName");function Vh(){return this._isUTC?"UTC":""}function Gh(){return this._isUTC?"Coordinated Universal Time":""}var q=Yr.prototype;q.add=Ff;q.calendar=Vf;q.clone=Gf;q.diff=th;q.endOf=dh;q.format=ih;q.from=oh;q.fromNow=ah;q.to=lh;q.toNow=ch;q.get=sd;q.invalidAt=wh;q.isAfter=Jf;q.isBefore=Kf;q.isBetween=Zf;q.isSame=Qf;q.isSameOrAfter=Xf;q.isSameOrBefore=eh;q.isValid=bh;q.lang=ja;q.locale=Aa;q.localeData=Ia;q.max=bf;q.min=gf;q.parsingFlags=vh;q.set=nd;q.startOf=uh;q.subtract=xf;q.toArray=mh;q.toObject=ph;q.toDate=_h;q.toISOString=sh;q.inspect=nh;typeof Symbol<"u"&&Symbol.for!=null&&(q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});q.toJSON=gh;q.toString=rh;q.unix=hh;q.valueOf=fh;q.creationData=yh;q.eraName=Oh;q.eraNarrow=Th;q.eraAbbr=Dh;q.eraYear=Mh;q.year=da;q.isLeapYear=rd;q.weekYear=Ih;q.isoWeekYear=Lh;q.quarter=q.quarters=Hh;q.month=pa;q.daysInMonth=hd;q.week=q.weeks=yd;q.isoWeek=q.isoWeeks=kd;q.weeksInYear=Uh;q.weeksInWeekYear=Fh;q.isoWeeksInYear=Yh;q.isoWeeksInISOWeekYear=Nh;q.date=Fa;q.day=q.days=Id;q.weekday=Ld;q.isoWeekday=Yd;q.dayOfYear=zh;q.hour=q.hours=Wd;q.minute=q.minutes=Wh;q.second=q.seconds=Bh;q.millisecond=q.milliseconds=xa;q.utcOffset=Df;q.utc=Cf;q.local=Pf;q.parseZone=Ef;q.hasAlignedHourOffset=Rf;q.isDST=Af;q.isLocal=If;q.isUtcOffset=Lf;q.isUtc=Ca;q.isUTC=Ca;q.zoneAbbr=Vh;q.zoneName=Gh;q.dates=tt("dates accessor is deprecated. Use date instead.",Fa);q.months=tt("months accessor is deprecated. Use month instead",pa);q.years=tt("years accessor is deprecated. Use year instead",da);q.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Mf);q.isDSTShifted=tt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",jf);function Jh(t){return Re(t*1e3)}function Kh(){return Re.apply(null,arguments).parseZone()}function Ha(t){return t}var Se=Sn.prototype;Se.calendar=ju;Se.longDateFormat=Nu;Se.invalidDate=Fu;Se.ordinal=zu;Se.preparse=Ha;Se.postformat=Ha;Se.relativeTime=Bu;Se.pastFuture=qu;Se.set=Ru;Se.eras=kh;Se.erasParse=$h;Se.erasConvertYear=Sh;Se.erasAbbrRegex=Ph;Se.erasNameRegex=Ch;Se.erasNarrowRegex=Eh;Se.months=cd;Se.monthsShort=ud;Se.monthsParse=fd;Se.monthsRegex=md;Se.monthsShortRegex=_d;Se.week=gd;Se.firstDayOfYear=wd;Se.firstDayOfWeek=vd;Se.weekdays=Pd;Se.weekdaysMin=Rd;Se.weekdaysShort=Ed;Se.weekdaysParse=jd;Se.weekdaysRegex=Nd;Se.weekdaysShortRegex=Ud;Se.weekdaysMinRegex=Fd;Se.isPM=Hd;Se.meridiem=Bd;function us(t,e,r,s){var n=St(),i=ht().set(s,e);return n[r](i,t)}function za(t,e,r){if($t(t)&&(e=t,t=void 0),t=t||"",e!=null)return us(t,e,r,"month");var s,n=[];for(s=0;s<12;s++)n[s]=us(t,s,r,"month");return n}function Hn(t,e,r,s){typeof t=="boolean"?($t(e)&&(r=e,e=void 0),e=e||""):(e=t,r=e,t=!1,$t(e)&&(r=e,e=void 0),e=e||"");var n=St(),i=t?n._week.dow:0,o,l=[];if(r!=null)return us(e,(r+i)%7,s,"day");for(o=0;o<7;o++)l[o]=us(e,(o+i)%7,s,"day");return l}function Zh(t,e){return za(t,e,"months")}function Qh(t,e){return za(t,e,"monthsShort")}function Xh(t,e,r){return Hn(t,e,r,"weekdays")}function e_(t,e,r){return Hn(t,e,r,"weekdaysShort")}function t_(t,e,r){return Hn(t,e,r,"weekdaysMin")}Et("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,r=_e(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+r}});z.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Et);z.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",St);var mt=Math.abs;function r_(){var t=this._data;return this._milliseconds=mt(this._milliseconds),this._days=mt(this._days),this._months=mt(this._months),t.milliseconds=mt(t.milliseconds),t.seconds=mt(t.seconds),t.minutes=mt(t.minutes),t.hours=mt(t.hours),t.months=mt(t.months),t.years=mt(t.years),this}function Wa(t,e,r,s){var n=lt(e,r);return t._milliseconds+=s*n._milliseconds,t._days+=s*n._days,t._months+=s*n._months,t._bubble()}function s_(t,e){return Wa(this,t,e,1)}function n_(t,e){return Wa(this,t,e,-1)}function Di(t){return t<0?Math.floor(t):Math.ceil(t)}function i_(){var t=this._milliseconds,e=this._days,r=this._months,s=this._data,n,i,o,l,a;return t>=0&&e>=0&&r>=0||t<=0&&e<=0&&r<=0||(t+=Di(on(r)+e)*864e5,e=0,r=0),s.milliseconds=t%1e3,n=Xe(t/1e3),s.seconds=n%60,i=Xe(n/60),s.minutes=i%60,o=Xe(i/60),s.hours=o%24,e+=Xe(o/24),a=Xe(Ba(e)),r+=a,e-=Di(on(a)),l=Xe(r/12),r%=12,s.days=e,s.months=r,s.years=l,this}function Ba(t){return t*4800/146097}function on(t){return t*146097/4800}function o_(t){if(!this.isValid())return NaN;var e,r,s=this._milliseconds;if(t=rt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,r=this._months+Ba(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(on(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function Ot(t){return function(){return this.as(t)}}var qa=Ot("ms"),a_=Ot("s"),l_=Ot("m"),c_=Ot("h"),u_=Ot("d"),d_=Ot("w"),f_=Ot("M"),h_=Ot("Q"),__=Ot("y"),m_=qa;function p_(){return lt(this)}function g_(t){return t=rt(t),this.isValid()?this[t+"s"]():NaN}function Ht(t){return function(){return this.isValid()?this._data[t]:NaN}}var b_=Ht("milliseconds"),v_=Ht("seconds"),w_=Ht("minutes"),y_=Ht("hours"),k_=Ht("days"),$_=Ht("months"),S_=Ht("years");function O_(){return Xe(this.days()/7)}var pt=Math.round,Qt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function T_(t,e,r,s,n){return n.relativeTime(e||1,!!r,t,s)}function D_(t,e,r,s){var n=lt(t).abs(),i=pt(n.as("s")),o=pt(n.as("m")),l=pt(n.as("h")),a=pt(n.as("d")),c=pt(n.as("M")),d=pt(n.as("w")),_=pt(n.as("y")),m=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||a<=1&&["d"]||a<r.d&&["dd",a];return r.w!=null&&(m=m||d<=1&&["w"]||d<r.w&&["ww",d]),m=m||c<=1&&["M"]||c<r.M&&["MM",c]||_<=1&&["y"]||["yy",_],m[2]=e,m[3]=+t>0,m[4]=s,T_.apply(null,m)}function M_(t){return t===void 0?pt:typeof t=="function"?(pt=t,!0):!1}function C_(t,e){return Qt[t]===void 0?!1:e===void 0?Qt[t]:(Qt[t]=e,t==="s"&&(Qt.ss=e-1),!0)}function P_(t,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=Qt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(r=t),typeof e=="object"&&(s=Object.assign({},Qt,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=D_(this,!r,s,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var zs=Math.abs;function Gt(t){return(t>0)-(t<0)||+t}function Es(){if(!this.isValid())return this.localeData().invalidDate();var t=zs(this._milliseconds)/1e3,e=zs(this._days),r=zs(this._months),s,n,i,o,l=this.asSeconds(),a,c,d,_;return l?(s=Xe(t/60),n=Xe(s/60),t%=60,s%=60,i=Xe(r/12),r%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=Gt(this._months)!==Gt(l)?"-":"",d=Gt(this._days)!==Gt(l)?"-":"",_=Gt(this._milliseconds)!==Gt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(r?c+r+"M":"")+(e?d+e+"D":"")+(n||s||t?"T":"")+(n?_+n+"H":"")+(s?_+s+"M":"")+(t?_+o+"S":"")):"P0D"}var ve=Cs.prototype;ve.isValid=$f;ve.abs=r_;ve.add=s_;ve.subtract=n_;ve.as=o_;ve.asMilliseconds=qa;ve.asSeconds=a_;ve.asMinutes=l_;ve.asHours=c_;ve.asDays=u_;ve.asWeeks=d_;ve.asMonths=f_;ve.asQuarters=h_;ve.asYears=__;ve.valueOf=m_;ve._bubble=i_;ve.clone=p_;ve.get=g_;ve.milliseconds=b_;ve.seconds=v_;ve.minutes=w_;ve.hours=y_;ve.days=k_;ve.weeks=O_;ve.months=$_;ve.years=S_;ve.humanize=P_;ve.toISOString=Es;ve.toString=Es;ve.toJSON=Es;ve.locale=Aa;ve.localeData=Ia;ve.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Es);ve.lang=ja;ne("X",0,0,"unix");ne("x",0,0,"valueOf");Q("x",Os);Q("X",Ku);Me("X",function(t,e,r){r._d=new Date(parseFloat(t)*1e3)});Me("x",function(t,e,r){r._d=new Date(_e(t))});//! moment.js
z.version="2.30.1";Pu(Re);z.fn=q;z.min=vf;z.max=wf;z.now=yf;z.utc=ht;z.unix=Jh;z.months=Zh;z.isDate=Lr;z.locale=Et;z.invalid=ys;z.duration=lt;z.isMoment=at;z.weekdays=Xh;z.parseZone=Kh;z.localeData=St;z.isDuration=Zr;z.monthsShort=Qh;z.weekdaysMin=t_;z.defineLocale=jn;z.updateLocale=Jd;z.locales=Kd;z.weekdaysShort=e_;z.normalizeUnits=rt;z.relativeTimeRounding=M_;z.relativeTimeThreshold=C_;z.calendarFormat=qf;z.prototype=q;z.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Mi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function Ci(t,e,r){const s=t.slice();return s[13]=e[r][0],s[17]=e[r][1],s}function Pi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[20]=e[r][1],s}function Ei(t,e,r){const s=t.slice();return s[13]=e[r][0],s[23]=e[r][1],s}function E_(t){let e,r;return e=new ws({props:{message:t[7]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&128&&(i.message=s[7]),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function R_(t){let e,r;return e=new dt({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[A_]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Ri(t){let e,r;return e=new Cu({props:{id:t[23].book_id,title:t[23].title,label:t[23].status=="Borrowed"?`Due: ${z(t[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:t[23].status=="Borrowed"?"danger":"secondary"}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&8&&(i.id=s[23].book_id),n&8&&(i.title=s[23].title),n&8&&(i.label=s[23].status=="Borrowed"?`Due: ${z(s[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),n&8&&(i.color=s[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function A_(t){let e,r,s=$e(Object.entries(t[3])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ri(Ei(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-center justify-content-md-start")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&8){s=$e(Object.entries(o[3]));let a;for(a=0;a<s.length;a+=1){const c=Ei(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ri(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function j_(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function I_(t){let e,r;return e=new ws({props:{message:t[4]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function L_(t){let e,r,s=$e(Object.entries(t[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ai(Pi(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&1){s=$e(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const c=Pi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ai(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function Ai(t){let e,r;return e=new vs({props:{title:t[20].title,id:t[20].book_id,author:t[20].author}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&1&&(i.title=s[20].title),n&1&&(i.id=s[20].book_id),n&1&&(i.author=s[20].author),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Y_(t){let e,r,s,n;const i=[L_,I_,j_],o=[];function l(a,c){return a[0]?0:a[4]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let d=e;e=l(a),e===d?o[e].p(a,c):(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function N_(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function U_(t){let e,r;return e=new ws({props:{message:t[5]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function F_(t){let e,r,s=$e(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ji(Ci(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=$e(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Ci(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ji(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function ji(t){let e,r;return e=new ea({props:{id:t[17].author_id,name:t[17].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.id=s[17].author_id),n&2&&(i.name=s[17].name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function x_(t){let e,r,s,n;const i=[F_,U_,N_],o=[];function l(a,c){return a[1]?0:a[5]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let d=e;e=l(a),e===d?o[e].p(a,c):(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function H_(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function z_(t){let e,r;return e=new ws({props:{message:t[6]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&64&&(i.message=s[6]),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function W_(t){let e,r,s=$e(Object.entries(t[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ii(Mi(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&4){s=$e(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const c=Mi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ii(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function Ii(t){let e,r;return e=new ta({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function B_(t){let e,r,s,n;const i=[W_,z_,H_],o=[];function l(a,c){return a[2]?0:a[6]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let d=e;e=l(a),e===d?o[e].p(a,c):(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function q_(t){let e,r,s,n,i,o,l,a,c,d,_,m,g;r=new _u({});const p=[R_,E_],v=[];function y(b,k){return b[3]&&b[3].length!=0?0:b[7]?1:-1}return~(n=y(t))&&(i=v[n]=p[n](t)),l=new dt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Y_]},$$scope:{ctx:t}}}),c=new dt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[x_]},$$scope:{ctx:t}}}),_=new dt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[B_]},$$scope:{ctx:t}}}),{c(){e=h("main"),N(r.$$.fragment),s=w(),i&&i.c(),o=w(),N(l.$$.fragment),a=w(),N(c.$$.fragment),d=w(),N(_.$$.fragment),f(e,"class","container mb-5")},m(b,k){E(b,e,k),L(r,e,null),u(e,s),~n&&v[n].m(e,null),u(e,o),L(l,e,null),u(e,a),L(c,e,null),u(e,d),L(_,e,null),g=!0},p(b,[k]){let $=n;n=y(b),n===$?~n&&v[n].p(b,k):(i&&(Oe(),M(v[$],1,1,()=>{v[$]=null}),Te()),~n?(i=v[n],i?i.p(b,k):(i=v[n]=p[n](b),i.c()),O(i,1),i.m(e,o)):i=null);const C={};k&67108881&&(C.$$scope={dirty:k,ctx:b}),l.$set(C);const S={};k&67108898&&(S.$$scope={dirty:k,ctx:b}),c.$set(S);const T={};k&67108932&&(T.$$scope={dirty:k,ctx:b}),_.$set(T)},i(b){g||(O(r.$$.fragment,b),O(i),O(l.$$.fragment,b),O(c.$$.fragment,b),O(_.$$.fragment,b),b&&(m||Ee(()=>{m=Ue(e,Fe,{duration:500}),m.start()})),g=!0)},o(b){M(r.$$.fragment,b),M(i),M(l.$$.fragment,b),M(c.$$.fragment,b),M(_.$$.fragment,b),g=!1},d(b){b&&P(e),Y(r),~n&&v[n].d(),Y(l),Y(c),Y(_)}}}function V_(t,e,r){const s=localStorage.getItem("user_id")||"";let n,i,o,l,a,c,d,_;async function m(){const{data:y,error:b}=await ae.rpc("get_books");r(0,n=y),r(4,a=b?b.message:"")}async function g(){const{data:y,error:b}=await ae.rpc("get_authors");r(1,i=y),r(5,c=b?b.message:"")}async function p(){const{data:y,error:b}=await ae.rpc("get_publishers");r(2,o=y),r(6,d=b||"")}async function v(){const{data:y,error:b}=await ae.rpc("get_inventory",{loggedid:s});r(3,l=y),console.log(l),r(7,_=b||"")}return m(),g(),p(),v(),[n,i,o,l,a,c,d,_]}class G_ extends be{constructor(e){super(),ge(this,e,V_,q_,pe,{})}}function J_(t){let e,r,s,n,i,o,l,a;return{c(){e=h("div"),r=h("button"),r.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=w(),n=h("div"),i=h("h4"),o=se(t[0]),f(r,"class","btn"),Je(r,"font-size","1.5em"),f(i,"class","my-auto"),f(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,d){E(c,e,d),u(e,r),u(e,s),u(e,n),u(n,i),u(i,o),l||(a=G(r,"click",t[1]),l=!0)},p(c,[d]){d&1&&le(o,c[0])},i:F,o:F,d(c){c&&P(e),l=!1,a()}}}function K_(t,e,r){let{text:s}=e;const n=()=>wl();return t.$$set=i=>{"text"in i&&r(0,s=i.text)},[s,n]}class Ze extends be{constructor(e){super(),ge(this,e,K_,J_,pe,{text:0})}}function Z_(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C;const S=t[5].default,T=ds(S,t,t[4],null);return{c(){e=h("div"),r=h("div"),s=h("div"),n=h("div"),i=h("h1"),o=se(t[0]),l=w(),a=h("button"),c=w(),d=h("div"),T&&T.c(),_=w(),m=h("div"),g=h("button"),p=se(t[3]),v=w(),y=h("button"),b=se(t[2]),f(i,"class","modal-title fs-5"),f(i,"id","exampleModalLabel"),f(a,"type","button"),f(a,"class","btn-close"),f(a,"data-bs-dismiss","modal"),f(a,"aria-label","Close"),f(n,"class","modal-header"),f(d,"class","modal-body"),f(g,"type","button"),f(g,"class","btn btn-secondary"),f(g,"data-bs-dismiss","modal"),f(y,"type","button"),f(y,"class","btn btn-primary"),f(y,"data-bs-dismiss","modal"),f(m,"class","modal-footer"),f(s,"class","modal-content"),f(r,"class","modal-dialog"),f(e,"class","modal fade"),f(e,"id",t[1]),f(e,"tabindex","-1"),f(e,"aria-hidden","true")},m(A,j){E(A,e,j),u(e,r),u(r,s),u(s,n),u(n,i),u(i,o),u(n,l),u(n,a),u(s,c),u(s,d),T&&T.m(d,null),u(s,_),u(s,m),u(m,g),u(g,p),u(m,v),u(m,y),u(y,b),k=!0,$||(C=G(y,"click",t[6]),$=!0)},p(A,[j]){(!k||j&1)&&le(o,A[0]),T&&T.p&&(!k||j&16)&&hs(T,S,A,A[4],k?fs(S,A[4],j,null):_s(A[4]),null),(!k||j&8)&&le(p,A[3]),(!k||j&4)&&le(b,A[2]),(!k||j&2)&&f(e,"id",A[1])},i(A){k||(O(T,A),k=!0)},o(A){M(T,A),k=!1},d(A){A&&P(e),T&&T.d(A),$=!1,C()}}}function Q_(t,e,r){let{$$slots:s={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function c(d){ss.call(this,t,d)}return t.$$set=d=>{"title"in d&&r(0,i=d.title),"id"in d&&r(1,o=d.id),"pButton"in d&&r(2,l=d.pButton),"sButton"in d&&r(3,a=d.sButton),"$$scope"in d&&r(4,n=d.$$scope)},[i,o,l,a,n,s,c]}class X_ extends be{constructor(e){super(),ge(this,e,Q_,Z_,pe,{title:0,id:1,pButton:2,sButton:3})}}function em(t){let e,r,s;return{c(){e=h("div"),r=h("div"),r.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',f(r,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Je(r,"height","70vh"),f(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Je(e,"background-color","var(--bs-body-bg)"),Je(e,"width","100vw"),Je(e,"height","100vh")},m(n,i){E(n,e,i),u(e,r)},p:F,i(n){n&&(s||Ee(()=>{s=Ue(r,Fe,{duration:500}),s.start()}))},o:F,d(n){n&&P(e)}}}class zn extends be{constructor(e){super(),ge(this,e,null,em,pe,{})}}function Li(t,e,r){const s=t.slice();return s[27]=e[r][0],s[28]=e[r][1],s}function Yi(t,e,r){const s=t.slice();return s[27]=e[r][0],s[31]=e[r][1],s}function Ni(t){let e,r;return e=new zn({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function tm(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function rm(t){let e,r,s,n,i,o,l,a=t[3].isbn+"",c,d,_,m,g,p=t[3].title+"",v,y,b,k=t[3].description+"",$,C,S,T,A,j,U=t[3].author.name+"",Z,H,K,W,R,I,D,V=t[3].publisher.name+"",te,x,B,X,we,oe,re,fe,Le,Ce,ee=t[3].shelf_number+"",ue,ye=t[1]=="client"&&Ui(t),ce=t[4]&&Fi(t);return{c(){e=h("div"),r=h("div"),s=h("img"),i=w(),o=h("small"),l=se("ISBN: "),c=se(a),d=w(),ye&&ye.c(),_=w(),m=h("div"),g=h("h1"),v=se(p),y=w(),b=h("p"),$=se(k),C=w(),S=h("p"),T=h("b"),T.textContent="Author:",A=w(),j=h("a"),Z=se(U),K=w(),W=h("p"),R=h("b"),R.textContent="Publisher:",I=w(),D=h("a"),te=se(V),B=w(),X=h("p"),we=h("b"),we.textContent="Category:",oe=w(),ce&&ce.c(),re=w(),fe=h("p"),Le=h("b"),Le.textContent="Shelf No.:",Ce=w(),ue=se(ee),f(s,"id","img-cover"),f(s,"class","border p-3"),et(s.src,n=t[14])||f(s,"src",n),f(s,"alt","book cover"),f(s,"height","300"),f(s,"width","300"),Je(s,"object-fit","contain"),f(o,"class","text-secondary"),f(r,"class","d-flex flex-column justify-content-center align-items-center gap-2"),f(g,"id","book-title"),f(g,"class","mb-2 pb-2"),f(b,"id","book-description"),f(j,"href",H="./#/author/"+t[3].author.author_id),f(D,"href",x="./#/publisher/"+t[3].publisher.publisher_id),f(m,"id","details-container"),f(m,"class","container mt-md-0 mt-3"),f(e,"class","d-md-flex d-block")},m(ie,Be){E(ie,e,Be),u(e,r),u(r,s),u(r,i),u(r,o),u(o,l),u(o,c),u(r,d),ye&&ye.m(r,null),u(e,_),u(e,m),u(m,g),u(g,v),u(m,y),u(m,b),u(b,$),u(m,C),u(m,S),u(S,T),u(S,A),u(S,j),u(j,Z),u(m,K),u(m,W),u(W,R),u(W,I),u(W,D),u(D,te),u(m,B),u(m,X),u(X,we),u(X,oe),ce&&ce.m(X,null),u(m,re),u(m,fe),u(fe,Le),u(fe,Ce),u(fe,ue)},p(ie,Be){Be[0]&8&&a!==(a=ie[3].isbn+"")&&le(c,a),ie[1]=="client"?ye?ye.p(ie,Be):(ye=Ui(ie),ye.c(),ye.m(r,null)):ye&&(ye.d(1),ye=null),Be[0]&8&&p!==(p=ie[3].title+"")&&le(v,p),Be[0]&8&&k!==(k=ie[3].description+"")&&le($,k),Be[0]&8&&U!==(U=ie[3].author.name+"")&&le(Z,U),Be[0]&8&&H!==(H="./#/author/"+ie[3].author.author_id)&&f(j,"href",H),Be[0]&8&&V!==(V=ie[3].publisher.name+"")&&le(te,V),Be[0]&8&&x!==(x="./#/publisher/"+ie[3].publisher.publisher_id)&&f(D,"href",x),ie[4]?ce?ce.p(ie,Be):(ce=Fi(ie),ce.c(),ce.m(X,null)):ce&&(ce.d(1),ce=null),Be[0]&8&&ee!==(ee=ie[3].shelf_number+"")&&le(ue,ee)},i:F,o:F,d(ie){ie&&P(e),ye&&ye.d(),ce&&ce.d()}}}function Ui(t){let e;function r(i,o){return i[7]?om:i[0]?im:i[8]==0?nm:sm}let s=r(t),n=s(t);return{c(){n.c(),e=We()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){s===(s=r(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function sm(t){let e,r,s;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,f(e,"class","btn btn-primary w-50")},m(n,i){E(n,e,i),r||(s=G(e,"click",t[12]),r=!0)},p:F,d(n){n&&P(e),r=!1,s()}}}function nm(t){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,f(e,"class","btn btn-secondary w-50")},m(r,s){E(r,e,s)},p:F,d(r){r&&P(e)}}}function im(t){let e,r,s,n,i,o,l;return{c(){e=h("button"),r=h("i"),s=w(),n=se(t[10]),f(r,"class","bi bi-x-circle"),f(e,"class",i="btn "+t[9]+" w-75")},m(a,c){E(a,e,c),u(e,r),u(e,s),u(e,n),o||(l=[G(e,"mouseenter",t[16]),G(e,"mouseleave",t[17]),G(e,"click",t[13])],o=!0)},p(a,c){c[0]&1024&&le(n,a[10]),c[0]&512&&i!==(i="btn "+a[9]+" w-75")&&f(e,"class",i)},d(a){a&&P(e),o=!1,De(l)}}}function om(t){let e,r,s,n;return{c(){e=h("button"),r=se("Borrowed (#"),s=se(t[7]),n=se(")"),f(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){E(i,e,o),u(e,r),u(e,s),u(e,n)},p(i,o){o[0]&128&&le(s,i[7])},d(i){i&&P(e)}}}function Fi(t){let e,r=$e(Object.entries(t[4])),s=[];for(let n=0;n<r.length;n+=1)s[n]=xi(Yi(t,r,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=We()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);E(n,e,i)},p(n,i){if(i[0]&16){r=$e(Object.entries(n[4]));let o;for(o=0;o<r.length;o+=1){const l=Yi(n,r,o);s[o]?s[o].p(l,i):(s[o]=xi(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&P(e),ze(s,n)}}}function xi(t){let e,r=t[31].category.name+"",s,n;return{c(){e=h("a"),s=se(r),n=se(`\r
              `),f(e,"href","./#/")},m(i,o){E(i,e,o),u(e,s),E(i,n,o)},p(i,o){o[0]&16&&r!==(r=i[31].category.name+"")&&le(s,r)},d(i){i&&(P(e),P(n))}}}function Hi(t){let e,r;return e=new dt({props:{title:"Status",icon:"journal",$$slots:{default:[cm]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n[0]&96|n[1]&8&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function zi(t){let e;function r(i,o){return i[6].length<=0?lm:am}let s=r(t),n=s(t);return{c(){n.c(),e=We()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){s===(s=r(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function am(t){let e,r,s,n,i=$e(Object.entries(t[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Wi(Li(t,i,l));return{c(){e=h("table"),r=h("thead"),r.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=w(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();f(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){E(l,e,a),u(e,r),u(e,s),u(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a[0]&64){i=$e(Object.entries(l[6]));let c;for(c=0;c<i.length;c+=1){const d=Li(l,i,c);o[c]?o[c].p(d,a):(o[c]=Wi(d),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&P(e),ze(o,l)}}}function lm(t){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",f(e,"class","text-center my-5")},m(r,s){E(r,e,s)},p:F,d(r){r&&P(e)}}}function Wi(t){let e,r,s=t[28].barcode+"",n,i,o,l=t[28].status!="Available"?`${t[28].fname} ${t[28].lname}`:"--",a,c,d,_=t[28].status+"",m,g,p=t[28].reservation_id?`(${t[28].reservation_id})`:t[28].borrow_id?`(${t[28].borrow_id})`:"",v,y,b,k,$,C,S=t[28].status=="Borrowed"?"Return":"Borrow",T,A,j,U,Z;return{c(){e=h("tr"),r=h("td"),n=se(s),i=w(),o=h("td"),a=se(l),c=w(),d=h("td"),m=se(_),g=w(),v=se(p),b=w(),k=h("td"),$=h("a"),C=h("small"),T=se(S),A=w(),j=h("i"),Z=w(),f(d,"class",y=t[28].status=="Available"?"text-bg-success":t[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),f(j,"class","bi bi-box-arrow-up-right"),f($,"href",U=t[28].status=="Available"?`./#/borrow?barcode=${t[28].barcode}`:t[28].status=="Reserved"?`./#/borrow?reserve_id=${t[28].reservation_id}`:`./#/return?borrow_id=${t[28].borrow_id}`),f($,"class","btn btn-outline-primary btn-sm")},m(H,K){E(H,e,K),u(e,r),u(r,n),u(e,i),u(e,o),u(o,a),u(e,c),u(e,d),u(d,m),u(d,g),u(d,v),u(e,b),u(e,k),u(k,$),u($,C),u(C,T),u(C,A),u(C,j),u(e,Z)},p(H,K){K[0]&64&&s!==(s=H[28].barcode+"")&&le(n,s),K[0]&64&&l!==(l=H[28].status!="Available"?`${H[28].fname} ${H[28].lname}`:"--")&&le(a,l),K[0]&64&&_!==(_=H[28].status+"")&&le(m,_),K[0]&64&&p!==(p=H[28].reservation_id?`(${H[28].reservation_id})`:H[28].borrow_id?`(${H[28].borrow_id})`:"")&&le(v,p),K[0]&64&&y!==(y=H[28].status=="Available"?"text-bg-success":H[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&f(d,"class",y),K[0]&64&&S!==(S=H[28].status=="Borrowed"?"Return":"Borrow")&&le(T,S),K[0]&64&&U!==(U=H[28].status=="Available"?`./#/borrow?barcode=${H[28].barcode}`:H[28].status=="Reserved"?`./#/borrow?reserve_id=${H[28].reservation_id}`:`./#/return?borrow_id=${H[28].borrow_id}`)&&f($,"href",U)},d(H){H&&P(e)}}}function cm(t){let e,r,s,n,i,o,l,a,c,d,_,m=t[6]&&zi(t);return{c(){e=h("div"),r=h("label"),r.textContent="Add Copy:",s=w(),n=h("div"),i=h("input"),o=w(),l=h("button"),l.textContent="Add",a=w(),m&&m.c(),c=We(),f(r,"for","copy"),f(r,"class","form=control col-auto"),f(i,"type","text"),f(i,"class","form-control"),f(i,"id","copy"),f(i,"placeholder","Barcode Number"),f(n,"class","col-4"),f(l,"class","btn btn-primary col-2"),f(e,"class","row justify-content-center align-items-center my-3")},m(g,p){E(g,e,p),u(e,r),u(e,s),u(e,n),u(n,i),J(i,t[5]),u(e,o),u(e,l),E(g,a,p),m&&m.m(g,p),E(g,c,p),d||(_=[G(i,"input",t[18]),G(l,"click",t[11])],d=!0)},p(g,p){p[0]&32&&i.value!==g[5]&&J(i,g[5]),g[6]?m?m.p(g,p):(m=zi(g),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(g){g&&(P(e),P(a),P(c)),m&&m.d(g),d=!1,De(_)}}}function um(t){let e,r,s,n,i,o,l,a,c,d,_,m,g=t[2]&&Ni();n=new Ze({props:{text:"Book Details"}});const p=[rm,tm],v=[];function y(k,$){return k[3]?0:1}o=y(t),l=v[o]=p[o](t);let b=t[1]=="staff"&&Hi(t);return{c(){e=h("main"),g&&g.c(),r=w(),s=h("section"),N(n.$$.fragment),i=w(),l.c(),a=w(),b&&b.c(),c=w(),d=h("div"),f(d,"class","my-5"),f(e,"class","container")},m(k,$){E(k,e,$),g&&g.m(e,null),u(e,r),u(e,s),L(n,s,null),u(s,i),v[o].m(s,null),u(e,a),b&&b.m(e,null),u(e,c),u(e,d),m=!0},p(k,$){k[2]?g?$[0]&4&&O(g,1):(g=Ni(),g.c(),O(g,1),g.m(e,r)):g&&(Oe(),M(g,1,1,()=>{g=null}),Te());let C=o;o=y(k),o===C?v[o].p(k,$):(Oe(),M(v[C],1,1,()=>{v[C]=null}),Te(),l=v[o],l?l.p(k,$):(l=v[o]=p[o](k),l.c()),O(l,1),l.m(s,null)),k[1]=="staff"?b?(b.p(k,$),$[0]&2&&O(b,1)):(b=Hi(k),b.c(),O(b,1),b.m(e,c)):b&&(Oe(),M(b,1,1,()=>{b=null}),Te())},i(k){m||(O(g),O(n.$$.fragment,k),O(l),O(b),k&&(_||Ee(()=>{_=Ue(e,Fe,{duration:500}),_.start()})),m=!0)},o(k){M(g),M(n.$$.fragment,k),M(l),M(b),m=!1},d(k){k&&P(e),g&&g.d(),Y(n),v[o].d(),b&&b.d()}}}function Bi(){return 3e6+Math.floor(Math.random()*9e3)}function dm(t,e,r){let s,n;Rt.subscribe(R=>r(1,n=R));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,c,d;async function _(){const{data:R,error:I}=await ae.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(R[0]),r(3,c=R[0]),R.length==0&&r(2,a=!0);const{data:D,error:V}=await ae.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",D),V&&console.error(V),D.length==0?(r(4,d={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",d)):r(4,d=D)}Dr(_);let m;async function g(){const{data:R,error:I}=await ae.rpc("get_holdings",{bookid:l});I&&console.error(I),console.table(R),r(6,v=R)}async function p(){const{data:R}=await ae.from("library_holdings").select().eq("barcode",m);R.length==0&&await ae.from("library_holdings").insert({book_id:l,barcode:m})}let v;n=="staff"&&(g(),ae.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},g).subscribe());let y,b,k=0,$="btn-secondary";n=="client"&&(T(),b||(C(),S()));async function C(){const{data:R,error:I}=await ae.rpc("isreserved",{bookid:l,studid:i});r(0,y=R)}async function S(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");r(8,k=R.length)}async function T(){const{data:R,error:I}=await ae.rpc("isborrowed",{bookid:l,studid:i});r(7,b=R)}async function A(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(I){console.error(I);return}const{error:D}=await ae.from("book_reservation").insert({reservation_id:await U(),stud_id:i,holding_id:R.holding_id});if(D){console.error(D);return}const{data:V,error:te}=await ae.from("library_holdings").update({status:"Reserved"}).eq("barcode",R.barcode).select("holding_id").single();if(te){console.error(te);return}C()}async function j(){const{data:R,error:I}=await ae.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:D}=await ae.from("library_holdings").update({status:"Available"}).eq("holding_id",R.holding_id);!I||!D?(C(),S()):(console.error(I),console.error(D))}async function U(){let R=Bi();const{data:I,error:D}=await ae.from("book_reservation").select().eq("reservation_id",R);return console.log(I),I.length!=0&&(R=Bi(),console.log("exists")),console.log(R),R}let Z=l>4?"./book-cover.png":`./${l}.jpg`;const H=()=>{r(10,s="Cancel Reservation"),r(9,$="btn-danger")},K=()=>{r(10,s=`Reserved (#${y})`),r(9,$="btn-secondary")};function W(){m=this.value,r(5,m)}return t.$$set=R=>{"params"in R&&r(15,o=R.params)},t.$$.update=()=>{t.$$.dirty[0]&1&&r(10,s=`Reserved (${y})`)},[y,n,a,c,d,m,v,b,k,$,s,p,A,j,Z,o,H,K,W]}class Va extends be{constructor(e){super(),ge(this,e,dm,um,pe,{params:15},null,[-1,-1])}}function fm(t){let e,r,s,n,i,o;const l=t[3].default,a=ds(l,t,t[2],null);return{c(){e=h("div"),r=h("label"),s=se(t[0]),n=w(),i=h("div"),a&&a.c(),f(r,"class","col-sm-4 col-md-3 col-form-label"),f(r,"for",t[1]),f(i,"class","col-sm-8 col-md-9"),f(e,"class","mb-4 row")},m(c,d){E(c,e,d),u(e,r),u(r,s),u(e,n),u(e,i),a&&a.m(i,null),o=!0},p(c,[d]){(!o||d&1)&&le(s,c[0]),(!o||d&2)&&f(r,"for",c[1]),a&&a.p&&(!o||d&4)&&hs(a,l,c,c[2],o?fs(l,c[2],d,null):_s(c[2]),null)},i(c){o||(O(a,c),o=!0)},o(c){M(a,c),o=!1},d(c){c&&P(e),a&&a.d(c)}}}function hm(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return t.$$set=l=>{"label"in l&&r(0,i=l.label),"id"in l&&r(1,o=l.id),"$$scope"in l&&r(2,n=l.$$scope)},[i,o,n,s]}class Ie extends be{constructor(e){super(),ge(this,e,hm,fm,pe,{label:0,id:1})}}function qi(t,e,r){const s=t.slice();return s[29]=e[r][0],s[30]=e[r][1],s}function Vi(t,e,r){const s=t.slice();return s[29]=e[r][0],s[34]=e[r][1],s}function Gi(t,e,r){const s=t.slice();return s[29]=e[r][0],s[38]=e[r][1],s}function _m(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-name"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[4]),r||(s=G(e,"input",t[18]),r=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&P(e),r=!1,s()}}}function mm(t){let e,r,s;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"id","book-description"),f(e,"rows","6"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[5]),r||(s=G(e,"input",t[19]),r=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&P(e),r=!1,s()}}}function pm(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","book-cover"),f(e,"accept","image/*")},m(n,i){E(n,e,i),t[21](e),r||(s=G(e,"change",t[20]),r=!0)},p:F,d(n){n&&P(e),t[21](null),r=!1,s()}}}function gm(t){let e,r,s,n,i;return{c(){e=h("input"),r=w(),s=h("div"),s.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","categories"),f(e,"class","form-control "+t[13]),f(e,"type","text"),f(e,"id","book-category"),f(e,"autocomplete","off"),f(s,"class","invalid-feedback")},m(o,l){E(o,e,l),J(e,t[6]),E(o,r,l),E(o,s,l),n||(i=G(e,"input",t[23]),n=!0)},p(o,l){l[0]&64&&e.value!==o[6]&&J(e,o[6])},d(o){o&&(P(e),P(r),P(s)),n=!1,i()}}}function bm(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","authors"),f(e,"class",r="form-control "+t[11]),f(e,"type","text"),f(e,"id","book-author"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[7]),E(l,s,a),E(l,n,a),i||(o=G(e,"input",t[24]),i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&f(e,"class",r),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(P(e),P(s),P(n)),i=!1,o()}}}function vm(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","publishers"),f(e,"class",r="form-control "+t[12]),f(e,"type","text"),f(e,"id","book-publisher"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[8]),E(l,s,a),E(l,n,a),i||(o=G(e,"input",t[25]),i=!0)},p(l,a){a[0]&4096&&r!==(r="form-control "+l[12])&&f(e,"class",r),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(P(e),P(s),P(n)),i=!1,o()}}}function wm(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","number"),f(e,"id","book-shelf"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[9]),r||(s=G(e,"input",t[26]),r=!0)},p(n,i){i[0]&512&&ms(e.value)!==n[9]&&J(e,n[9])},d(n){n&&P(e),r=!1,s()}}}function ym(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-isbn"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[10]),r||(s=G(e,"input",t[27]),r=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&P(e),r=!1,s()}}}function km(t){return{c:F,m:F,p:F,d:F}}function $m(t){let e,r=$e(Object.entries(t[37])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Ji(Gi(t,r,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","authors")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){r=$e(Object.entries(n[37]));let o;for(o=0;o<r.length;o+=1){const l=Gi(n,r,o);s[o]?s[o].p(l,i):(s[o]=Ji(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&P(e),ze(s,n)}}}function Ji(t){let e;return{c(){e=h("option"),e.__value=t[38].name,J(e,e.__value)},m(r,s){E(r,e,s)},p:F,d(r){r&&P(e)}}}function Sm(t){return{c:F,m:F,p:F,d:F}}function Om(t){return{c:F,m:F,p:F,d:F}}function Tm(t){let e,r=$e(Object.entries(t[33])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Ki(Vi(t,r,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","publishers")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){r=$e(Object.entries(n[33]));let o;for(o=0;o<r.length;o+=1){const l=Vi(n,r,o);s[o]?s[o].p(l,i):(s[o]=Ki(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&P(e),ze(s,n)}}}function Ki(t){let e;return{c(){e=h("option"),e.__value=t[34].name,J(e,e.__value)},m(r,s){E(r,e,s)},p:F,d(r){r&&P(e)}}}function Dm(t){return{c:F,m:F,p:F,d:F}}function Mm(t){return{c:F,m:F,p:F,d:F}}function Cm(t){let e,r=$e(Object.entries(t[28])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Zi(qi(t,r,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","categories")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){r=$e(Object.entries(n[28]));let o;for(o=0;o<r.length;o+=1){const l=qi(n,r,o);s[o]?s[o].p(l,i):(s[o]=Zi(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&P(e),ze(s,n)}}}function Zi(t){let e;return{c(){e=h("option"),e.__value=t[30].name,J(e,e.__value)},m(r,s){E(r,e,s)},p:F,d(r){r&&P(e)}}}function Pm(t){return{c:F,m:F,p:F,d:F}}function Em(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,re,fe,Le,Ce;r=new Ze({props:{text:"Add Book"}}),o=new Ie({props:{label:"Book Title:",id:"book-name",$$slots:{default:[_m]},$$scope:{ctx:t}}}),a=new Ie({props:{label:"Book Description:",id:"book-description",$$slots:{default:[mm]},$$scope:{ctx:t}}}),d=new Ie({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[pm]},$$scope:{ctx:t}}}),A=new Ie({props:{label:"Category:",id:"book-category",$$slots:{default:[gm]},$$scope:{ctx:t}}}),U=new Ie({props:{label:"Author: ",id:"book-author",$$slots:{default:[bm]},$$scope:{ctx:t}}}),H=new Ie({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[vm]},$$scope:{ctx:t}}}),W=new Ie({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[wm]},$$scope:{ctx:t}}}),I=new Ie({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[ym]},$$scope:{ctx:t}}});let ee={ctx:t,current:null,token:null,hasCatch:!1,pending:Sm,then:$m,catch:km,value:37};Vr(t[15](),ee);let ue={ctx:t,current:null,token:null,hasCatch:!1,pending:Dm,then:Tm,catch:Om,value:33};Vr(t[16](),ue);let ye={ctx:t,current:null,token:null,hasCatch:!1,pending:Pm,then:Cm,catch:Mm,value:28};return Vr(t[17](),ye),{c(){e=h("section"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),m=h("div"),g=h("label"),g.textContent="Preview:",p=w(),v=h("div"),y=h("img"),k=w(),$=h("button"),$.textContent="Remove",S=w(),T=h("div"),N(A.$$.fragment),j=w(),N(U.$$.fragment),Z=w(),N(H.$$.fragment),K=w(),N(W.$$.fragment),R=w(),N(I.$$.fragment),D=w(),V=h("div"),te=h("button"),te.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',x=w(),B=h("a"),B.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',X=w(),ee.block.c(),we=w(),ue.block.c(),oe=w(),ye.block.c(),f(g,"for","cover-preview"),f(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(y.src,b=t[3])||f(y,"src",b),f(y,"alt","Preview"),f(y,"id","cover-preview"),f(y,"height","150"),f($,"class","btn btn-sm btn-danger"),f(v,"class","col-sm-8 col-md-9"),f(v,"id","preview-div"),f(m,"class",C="my-3 row "+t[2]),f(i,"class","col-sm-12 col-lg-6"),f(T,"class","col-sm-12 col-lg-6"),f(n,"class","row justify-content-center"),f(te,"class","btn btn-success"),f(B,"href","./#/"),f(V,"class","my-3"),f(e,"class","my-1 container")},m(ce,ie){E(ce,e,ie),L(r,e,null),u(e,s),u(e,n),u(n,i),L(o,i,null),u(i,l),L(a,i,null),u(i,c),L(d,i,null),u(i,_),u(i,m),u(m,g),u(m,p),u(m,v),u(v,y),u(v,k),u(v,$),u(n,S),u(n,T),L(A,T,null),u(T,j),L(U,T,null),u(T,Z),L(H,T,null),u(T,K),L(W,T,null),u(T,R),L(I,T,null),u(e,D),u(e,V),u(V,te),u(V,x),u(V,B),u(e,X),ee.block.m(e,ee.anchor=null),ee.mount=()=>e,ee.anchor=we,u(e,we),ue.block.m(e,ue.anchor=null),ue.mount=()=>e,ue.anchor=oe,u(e,oe),ye.block.m(e,ye.anchor=null),ye.mount=()=>e,ye.anchor=null,fe=!0,Le||(Ce=[G($,"click",t[22]),G(te,"click",t[14])],Le=!0)},p(ce,ie){t=ce;const Be={};ie[0]&16|ie[1]&1024&&(Be.$$scope={dirty:ie,ctx:t}),o.$set(Be);const Wn={};ie[0]&32|ie[1]&1024&&(Wn.$$scope={dirty:ie,ctx:t}),a.$set(Wn);const Bn={};ie[0]&3|ie[1]&1024&&(Bn.$$scope={dirty:ie,ctx:t}),d.$set(Bn),(!fe||ie[0]&8&&!et(y.src,b=t[3]))&&f(y,"src",b),(!fe||ie[0]&4&&C!==(C="my-3 row "+t[2]))&&f(m,"class",C);const qn={};ie[0]&64|ie[1]&1024&&(qn.$$scope={dirty:ie,ctx:t}),A.$set(qn);const Vn={};ie[0]&2176|ie[1]&1024&&(Vn.$$scope={dirty:ie,ctx:t}),U.$set(Vn);const Gn={};ie[0]&4352|ie[1]&1024&&(Gn.$$scope={dirty:ie,ctx:t}),H.$set(Gn);const Jn={};ie[0]&512|ie[1]&1024&&(Jn.$$scope={dirty:ie,ctx:t}),W.$set(Jn);const Kn={};ie[0]&1024|ie[1]&1024&&(Kn.$$scope={dirty:ie,ctx:t}),I.$set(Kn),Gr(ee,t,ie),Gr(ue,t,ie),Gr(ye,t,ie)},i(ce){fe||(O(r.$$.fragment,ce),O(o.$$.fragment,ce),O(a.$$.fragment,ce),O(d.$$.fragment,ce),O(A.$$.fragment,ce),O(U.$$.fragment,ce),O(H.$$.fragment,ce),O(W.$$.fragment,ce),O(I.$$.fragment,ce),ce&&(re||Ee(()=>{re=Ue(e,Fe,{duration:500}),re.start()})),fe=!0)},o(ce){M(r.$$.fragment,ce),M(o.$$.fragment,ce),M(a.$$.fragment,ce),M(d.$$.fragment,ce),M(A.$$.fragment,ce),M(U.$$.fragment,ce),M(H.$$.fragment,ce),M(W.$$.fragment,ce),M(I.$$.fragment,ce),fe=!1},d(ce){ce&&P(e),Y(r),Y(o),Y(a),Y(d),Y(A),Y(U),Y(H),Y(W),Y(I),ee.block.d(),ee.token=null,ee=null,ue.block.d(),ue.token=null,ue=null,ye.block.d(),ye.token=null,ye=null,Le=!1,De(Ce)}}}function Rm(t,e,r){let s,n,i="d-none",o,l,a,c,d,_,m,g,p,v,y;async function b(){const{data:I,error:D}=await ae.from("author").select("author_id").eq("name",d).single(),{data:V,error:te}=await ae.from("publisher").select("publisher_id").eq("name",_).single();let x=!0;if((D||!I)&&(r(11,v="is-invalid"),x=!1),(te||!V)&&(r(12,y="is-invalid"),x=!1),!x)return;const{error:B}=await ae.from("books").insert({title:l,description:a,author_id:I.author_id,publisher_id:V.publisher_id,shelf_number:m,isbn:g});B?console.error(B):alert(`Successfully Added ${l}!`)}async function k(){const{data:I,error:D}=await ae.from("author").select("name").order("name",{ascending:!0});return I}async function $(){const{data:I,error:D}=await ae.from("publisher").select("name").order("name",{ascending:!0});return I}async function C(){const{data:I,error:D}=await ae.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return I}function S(){l=this.value,r(4,l)}function T(){a=this.value,r(5,a)}function A(){s=this.files,r(0,s)}function j(I){ar[I?"unshift":"push"](()=>{n=I,r(1,n)})}const U=()=>{r(1,n.value="",n),r(0,s="")};function Z(){c=this.value,r(6,c)}function H(){d=this.value,r(7,d)}function K(){_=this.value,r(8,_)}function W(){m=ms(this.value),r(9,m)}function R(){g=this.value,r(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(s&&s[0]){console.log(s),r(2,i="");const I=URL.createObjectURL(s[0]);r(3,o=I)}else console.log(s),r(2,i="d-none")},[s,n,i,o,l,a,c,d,_,m,g,v,y,p,b,k,$,C,S,T,A,j,U,Z,H,K,W,R]}class Am extends be{constructor(e){super(),ge(this,e,Rm,Em,pe,{},null,[-1,-1])}}function Qi(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function jm(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Im(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,d,_,m=t[0].link+"",g,p;function v(k,$){return k[0].bio==null?Ym:Lm}let y=v(t),b=y(t);return{c(){e=h("div"),r=h("h1"),n=se(s),i=w(),o=h("p"),b.c(),l=w(),a=h("p"),c=h("b"),c.textContent="Website:",d=w(),_=h("a"),g=se(m),f(r,"class","mb-2 pb-2"),f(o,"class",""),f(_,"href",p="mailto:"+t[0].email),f(e,"class","container")},m(k,$){E(k,e,$),u(e,r),u(r,n),u(e,i),u(e,o),b.m(o,null),u(e,l),u(e,a),u(a,c),u(a,d),u(a,_),u(_,g)},p(k,$){$&1&&s!==(s=k[0].name+"")&&le(n,s),y===(y=v(k))&&b?b.p(k,$):(b.d(1),b=y(k),b&&(b.c(),b.m(o,null))),$&1&&m!==(m=k[0].link+"")&&le(g,m),$&1&&p!==(p="mailto:"+k[0].email)&&f(_,"href",p)},i:F,o:F,d(k){k&&P(e),b.d()}}}function Lm(t){let e=t[0].bio+"",r;return{c(){r=se(e)},m(s,n){E(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&le(r,e)},d(s){s&&P(r)}}}function Ym(t){let e,r=t[0].bio+"",s;return{c(){e=h("span"),s=se(r),f(e,"class","text-secondary")},m(n,i){E(n,e,i),u(e,s)},p(n,i){i&1&&r!==(r=n[0].bio+"")&&le(s,r)},d(n){n&&P(e)}}}function Nm(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Um(t){let e,r,s=$e(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Xi(Qi(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=$e(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Qi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Xi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function Xi(t){let e,r;return e=new vs({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].publisher.name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Fm(t){let e,r,s,n;const i=[Um,Nm],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let d=e;e=l(a),e===d?o[e].p(a,c):(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function xm(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v;s=new Ze({props:{text:"Author Details"}});const y=[Im,jm],b=[];function k($,C){return $[0]?0:1}return d=k(t),_=b[d]=y[d](t),g=new dt({props:{title:"Books",icon:"journal",$$slots:{default:[Fm]},$$scope:{ctx:t}}}),{c(){e=h("main"),r=h("section"),N(s.$$.fragment),n=w(),i=h("div"),o=h("div"),l=h("img"),c=w(),_.c(),m=w(),N(g.$$.fragment),f(l,"class","border p-3"),et(l.src,a=Hm)||f(l,"src",a),f(l,"alt","author"),f(l,"height","300"),f(l,"width","300"),Je(l,"object-fit","contain"),f(o,"class","d-flex justify-content-center my-1"),f(i,"class","d-md-flex d-block"),f(e,"class","container")},m($,C){E($,e,C),u(e,r),L(s,r,null),u(r,n),u(r,i),u(i,o),u(o,l),u(i,c),b[d].m(i,null),u(e,m),L(g,e,null),v=!0},p($,[C]){let S=d;d=k($),d===S?b[d].p($,C):(Oe(),M(b[S],1,1,()=>{b[S]=null}),Te(),_=b[d],_?_.p($,C):(_=b[d]=y[d]($),_.c()),O(_,1),_.m(i,null));const T={};C&514&&(T.$$scope={dirty:C,ctx:$}),g.$set(T)},i($){v||(O(s.$$.fragment,$),O(_),O(g.$$.fragment,$),$&&(p||Ee(()=>{p=Ue(e,Fe,{duration:500}),p.start()})),v=!0)},o($){M(s.$$.fragment,$),M(_),M(g.$$.fragment,$),v=!1},d($){$&&P(e),Y(s),b[d].d(),Y(g)}}}let Hm="./default-profile.jpg";function zm(t,e,r){let{params:s}=e,n=s.authorID,i,o;async function l(){const{data:a,error:c}=await ae.from("author").select().eq("author_id",n);console.log(a),r(0,i=a[0]);const{data:d,error:_}=await ae.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(d),r(1,o=d)}return Dr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class Ga extends be{constructor(e){super(),ge(this,e,zm,xm,pe,{params:2})}}function eo(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function to(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,d,_,m=t[0].email+"",g,p;function v(k,$){return k[0].bio==null?Bm:Wm}let y=v(t),b=y(t);return{c(){e=h("div"),r=h("h1"),n=se(s),i=w(),o=h("p"),b.c(),l=w(),a=h("p"),c=h("b"),c.textContent="Website:",d=w(),_=h("a"),g=se(m),f(r,"class","mb-2 pb-2"),f(o,"class",""),f(_,"href",p="https://"+t[0].link),f(_,"id","publisher-website"),f(e,"class","container")},m(k,$){E(k,e,$),u(e,r),u(r,n),u(e,i),u(e,o),b.m(o,null),u(e,l),u(e,a),u(a,c),u(a,d),u(a,_),u(_,g)},p(k,$){$&1&&s!==(s=k[0].name+"")&&le(n,s),y===(y=v(k))&&b?b.p(k,$):(b.d(1),b=y(k),b&&(b.c(),b.m(o,null))),$&1&&m!==(m=k[0].email+"")&&le(g,m),$&1&&p!==(p="https://"+k[0].link)&&f(_,"href",p)},d(k){k&&P(e),b.d()}}}function Wm(t){let e=t[0].bio+"",r;return{c(){r=se(e)},m(s,n){E(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&le(r,e)},d(s){s&&P(r)}}}function Bm(t){let e,r=t[0].description+"",s;return{c(){e=h("span"),s=se(r),f(e,"class","text-secondary")},m(n,i){E(n,e,i),u(e,s)},p(n,i){i&1&&r!==(r=n[0].description+"")&&le(s,r)},d(n){n&&P(e)}}}function qm(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Vm(t){let e,r,s=$e(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ro(eo(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=$e(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=eo(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ro(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function ro(t){let e,r;return e=new vs({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].author.name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Gm(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y;r=new Ze({props:{text:"Publisher Details"}});let b=t[0]&&to(t);m=new dt({props:{title:"Books",icon:"journal"}});const k=[Vm,qm],$=[];function C(S,T){return S[1]?0:1}return p=C(t),v=$[p]=k[p](t),{c(){e=h("section"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),o=h("img"),a=w(),b&&b.c(),d=w(),_=h("section"),N(m.$$.fragment),g=w(),v.c(),f(o,"id","img-cover"),f(o,"class","border p-3"),et(o.src,l=Jm)||f(o,"src",l),f(o,"alt","publisher"),f(o,"height","300"),f(o,"width","300"),Je(o,"object-fit","contain"),f(i,"id","publisher-cover"),f(i,"class","d-flex justify-content-center my-1"),f(n,"class","d-md-flex d-block"),f(e,"class","container"),f(_,"class","container")},m(S,T){E(S,e,T),L(r,e,null),u(e,s),u(e,n),u(n,i),u(i,o),u(n,a),b&&b.m(n,null),E(S,d,T),E(S,_,T),L(m,_,null),u(_,g),$[p].m(_,null),y=!0},p(S,[T]){S[0]?b?b.p(S,T):(b=to(S),b.c(),b.m(n,null)):b&&(b.d(1),b=null);let A=p;p=C(S),p===A?$[p].p(S,T):(Oe(),M($[A],1,1,()=>{$[A]=null}),Te(),v=$[p],v?v.p(S,T):(v=$[p]=k[p](S),v.c()),O(v,1),v.m(_,null))},i(S){y||(O(r.$$.fragment,S),S&&(c||Ee(()=>{c=Ue(e,Fe,{duration:500}),c.start()})),O(m.$$.fragment,S),O(v),y=!0)},o(S){M(r.$$.fragment,S),M(m.$$.fragment,S),M(v),y=!1},d(S){S&&(P(e),P(d),P(_)),Y(r),b&&b.d(),Y(m),$[p].d()}}}let Jm="./default-profile.jpg";function Km(t,e,r){let{params:s}=e,n=s.publisherID,i,o;async function l(){const{data:a,error:c}=await ae.from("publisher").select().eq("publisher_id",n);console.log(a),r(0,i=a[0]);const{data:d,error:_}=await ae.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(d),r(1,o=d)}return Dr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class Ja extends be{constructor(e){super(),ge(this,e,Km,Gm,pe,{params:2})}}function Zm(t){let e,r,s,n,i,o,l,a,c,d;return{c(){e=h("div"),r=h("div"),s=h("i"),i=w(),o=h("div"),l=h("h5"),a=h("a"),c=se(t[0]),f(s,"class",n="bi bi-"+t[2]),f(r,"class","d-flex justify-content-center"),Je(r,"font-size","3em"),f(a,"class","stretched-link svelte-1vxezln"),f(a,"href",d="./#/"+t[1]),f(l,"class","card-title text-center my-2"),f(o,"class","card-body p-1"),f(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(_,m){E(_,e,m),u(e,r),u(r,s),u(e,i),u(e,o),u(o,l),u(l,a),u(a,c)},p(_,[m]){m&4&&n!==(n="bi bi-"+_[2])&&f(s,"class",n),m&1&&le(c,_[0]),m&2&&d!==(d="./#/"+_[1])&&f(a,"href",d)},i:F,o:F,d(_){_&&P(e)}}}function Qm(t,e,r){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=o=>{"name"in o&&r(0,s=o.name),"link"in o&&r(1,n=o.link),"icon"in o&&r(2,i=o.icon)},[s,n,i]}class ut extends be{constructor(e){super(),ge(this,e,Qm,Zm,pe,{name:0,link:1,icon:2})}}function Xm(t){let e,r,s,n,i;return r=new ut({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new ut({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),N(r.$$.fragment),s=w(),N(n.$$.fragment),f(e,"class","row justify-content-center gap-4")},m(o,l){E(o,e,l),L(r,e,null),u(e,s),L(n,e,null),i=!0},p:F,i(o){i||(O(r.$$.fragment,o),O(n.$$.fragment,o),i=!0)},o(o){M(r.$$.fragment,o),M(n.$$.fragment,o),i=!1},d(o){o&&P(e),Y(r),Y(n)}}}function ep(t){let e,r,s,n,i,o,l,a,c;return r=new ut({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new ut({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new ut({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new ut({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),N(r.$$.fragment),s=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5")},m(d,_){E(d,e,_),L(r,e,null),u(e,s),L(n,e,null),u(e,i),L(o,e,null),u(e,l),L(a,e,null),c=!0},p:F,i(d){c||(O(r.$$.fragment,d),O(n.$$.fragment,d),O(o.$$.fragment,d),O(a.$$.fragment,d),c=!0)},o(d){M(r.$$.fragment,d),M(n.$$.fragment,d),M(o.$$.fragment,d),M(a.$$.fragment,d),c=!1},d(d){d&&P(e),Y(r),Y(n),Y(o),Y(a)}}}function tp(t){let e,r,s,n,i,o,l,a,c;return r=new ut({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new ut({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new ut({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new ut({props:{name:"Transactions Report",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),N(r.$$.fragment),s=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5 mb-5")},m(d,_){E(d,e,_),L(r,e,null),u(e,s),L(n,e,null),u(e,i),L(o,e,null),u(e,l),L(a,e,null),c=!0},p:F,i(d){c||(O(r.$$.fragment,d),O(n.$$.fragment,d),O(o.$$.fragment,d),O(a.$$.fragment,d),c=!0)},o(d){M(r.$$.fragment,d),M(n.$$.fragment,d),M(o.$$.fragment,d),M(a.$$.fragment,d),c=!1},d(d){d&&P(e),Y(r),Y(n),Y(o),Y(a)}}}function rp(t){let e,r,s,n,i,o,l,a;return r=new dt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Xm]},$$scope:{ctx:t}}}),n=new dt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[ep]},$$scope:{ctx:t}}}),o=new dt({props:{title:"Reports",icon:"receipt",$$slots:{default:[tp]},$$scope:{ctx:t}}}),{c(){e=h("main"),N(r.$$.fragment),s=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),f(e,"class","container")},m(c,d){E(c,e,d),L(r,e,null),u(e,s),L(n,e,null),u(e,i),L(o,e,null),a=!0},p(c,[d]){const _={};d&1&&(_.$$scope={dirty:d,ctx:c}),r.$set(_);const m={};d&1&&(m.$$scope={dirty:d,ctx:c}),n.$set(m);const g={};d&1&&(g.$$scope={dirty:d,ctx:c}),o.$set(g)},i(c){a||(O(r.$$.fragment,c),O(n.$$.fragment,c),O(o.$$.fragment,c),c&&(l||Ee(()=>{l=Ue(e,Fe,{duration:500}),l.start()})),a=!0)},o(c){M(r.$$.fragment,c),M(n.$$.fragment,c),M(o.$$.fragment,c),a=!1},d(c){c&&P(e),Y(r),Y(n),Y(o)}}}class sp extends be{constructor(e){super(),ge(this,e,null,rp,pe,{})}}function so(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function no(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function io(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function oo(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T;return{c(){e=h("div"),r=h("div"),r.textContent="Category:",s=w(),n=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",c=w(),d=h("div"),d.textContent="Sort by:",_=w(),m=h("div"),g=h("select"),p=h("option"),p.textContent="Total",v=h("option"),v.textContent="Available",y=h("option"),y.textContent="Reserved",b=h("option"),b.textContent="Borrowed",k=w(),$=h("div"),C=h("select"),S=h("option"),S.textContent="Ascending",T=h("option"),T.textContent="Descending",o.__value="all",J(o,o.__value),l.__value="tech",J(l,l.__value),a.__value="all",J(a,a.__value),f(i,"name","category"),f(i,"class","form-select"),p.__value="",J(p,p.__value),v.__value="",J(v,v.__value),y.__value="",J(y,y.__value),b.__value="",J(b,b.__value),f(g,"name","filter"),f(g,"class","form-select"),S.__value="",J(S,S.__value),T.__value="",J(T,T.__value),f(C,"name","order"),f(C,"class","form-select"),f(e,"class","d-flex justify-content-end align-items-center gap-2")},m(A,j){E(A,e,j),u(e,r),u(e,s),u(e,n),u(n,i),u(i,o),u(i,l),u(i,a),u(e,c),u(e,d),u(e,_),u(e,m),u(m,g),u(g,p),u(g,v),u(g,y),u(g,b),u(e,k),u(e,$),u($,C),u(C,S),u(C,T)},d(A){A&&P(e)}}}function np(t){let e,r;return e=new At({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p:F,i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function ip(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',f(e,"class","d-flex justify-content-center mt-5")},m(r,s){E(r,e,s)},p:F,i:F,o:F,d(r){r&&P(e)}}}function op(t){let e,r,s=$e(Object.entries(t[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=ao(so(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),r=!0},p(o,l){if(l&4){s=$e(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const c=so(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ao(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function ap(t){let e,r,s=$e(Object.entries(t[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=lo(no(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),r=!0},p(o,l){if(l&4){s=$e(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const c=no(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=lo(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function lp(t){let e,r,s=$e(Object.entries(t[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=co(io(t,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),r=!0},p(o,l){if(l&4){s=$e(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const c=io(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=co(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)O(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);r=!1},d(o){o&&P(e),ze(n,o)}}}function ao(t){let e,r;return e=new ta({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function lo(t){let e,r;return e=new ea({props:{id:t[14].author_id,name:t[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].author_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function co(t){let e,r;return e=new vs({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.title=s[14].title),n&4&&(i.id=s[14].book_id),n&4&&(i.author=s[14].author.name),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function cp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U;r=new Ze({props:{text:"Library Holdings"}});let Z=t[3]&&t[3].value=="books"&&oo();const H=[lp,ap,op,ip,np],K=[];function W(R,I){return R[2].books.length>0?0:R[2].author.length>0?1:R[2].publisher.length>0?2:R[0]?4:3}return C=W(t),S=K[C]=H[C](t),{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",c=h("option"),c.textContent="Publisher",d=w(),_=h("div"),m=h("input"),g=w(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',v=w(),Z&&Z.c(),y=w(),b=h("hr"),k=w(),$=h("div"),S.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),f(o,"name","searchtype"),f(o,"class","form-select"),f(i,"class","col-auto col-md-2 p-0 pe-md-4"),f(m,"class","form-control form-control-lg"),f(m,"type","search"),f(m,"placeholder","Search"),f(m,"name","Search"),f(_,"class","col-6 col-md-6 p-0"),f(p,"class","btn btn-lg btn-success col-auto col-md-1"),f(p,"type","submit"),f(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),f($,"class","row"),f(e,"class","container")},m(R,I){E(R,e,I),L(r,e,null),u(e,s),u(e,n),u(n,i),u(i,o),u(o,l),u(o,a),u(o,c),t[5](o),u(n,d),u(n,_),u(_,m),J(m,t[1]),u(n,g),u(n,p),u(e,v),Z&&Z.m(e,null),u(e,y),u(e,b),u(e,k),u(e,$),K[C].m($,null),A=!0,j||(U=[G(o,"change",t[4]),G(m,"input",t[6]),G(m,"keyup",t[7]),G(p,"click",t[4])],j=!0)},p(R,[I]){I&2&&m.value!==R[1]&&J(m,R[1]),R[3]&&R[3].value=="books"?Z||(Z=oo(),Z.c(),Z.m(e,y)):Z&&(Z.d(1),Z=null);let D=C;C=W(R),C===D?K[C].p(R,I):(Oe(),M(K[D],1,1,()=>{K[D]=null}),Te(),S=K[C],S?S.p(R,I):(S=K[C]=H[C](R),S.c()),O(S,1),S.m($,null))},i(R){A||(O(r.$$.fragment,R),O(S),R&&(T||Ee(()=>{T=Ue(e,Fe,{duration:500}),T.start()})),A=!0)},o(R){M(r.$$.fragment,R),M(S),A=!1},d(R){R&&P(e),Y(r),t[5](null),Z&&Z.d(),K[C].d(),j=!1,De(U)}}}function up(t,e,r){let s;cn(t,vl,y=>r(9,s=y));let n=!0;function i(){switch(s){case"/search/author":r(3,_.value="author",_);break;case"/search/publisher":r(3,_.value="publisher",_);break;default:r(3,_.value="books",_)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",d={books:[],author:[],publisher:[]},_;async function m(){r(0,n=!0),a=_.value,console.log(a);const{data:y,error:b}=await ae.from(a).select(o[a]).ilike(l[a],`%${c}%`);b&&console.log(b),r(2,d.books=[],d),r(2,d.author=[],d),r(2,d.publisher=[],d),r(2,d[a]=y,d),r(2,d),r(0,n=!1),console.log(n,d)}Dr(i),Dr(m);function g(y){ar[y?"unshift":"push"](()=>{_=y,r(3,_)})}function p(){c=this.value,r(1,c)}return[n,c,d,_,m,g,p,y=>y.key==="Enter"&&m()]}class or extends be{constructor(e){super(),ge(this,e,up,cp,pe,{})}}function uo(t){let e,r;return{c(){e=h("div"),r=se(t[4]),f(e,"class","alert alert-danger p-1 text-center svelte-1c2zskh")},m(s,n){E(s,e,n),u(e,r)},p(s,n){n[0]&16&&le(r,s[4])},d(s){s&&P(e)}}}function dp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b=t[6]&&fo(t);return{c(){e=h("div"),r=h("h2"),r.textContent="Register",s=w(),n=h("form"),b&&b.c(),i=w(),o=h("div"),o.innerHTML='<div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-bounding-box"></i></span> <input type="text" id="sID" name="hidden" required="" minlength="6" maxlength="6" autocomplete="off" class="svelte-1c2zskh"/> <label for="sID" class="svelte-1c2zskh">Student ID</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="fname" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="fname" class="svelte-1c2zskh">First Name</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="lname" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="lname" class="svelte-1c2zskh">Last Name</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="email" id="email" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="email" class="svelte-1c2zskh">Email</label></div>',l=w(),a=h("div"),a.innerHTML='<div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-telephone-fill"></i></span> <input type="tel" id="contact" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="contact" class="svelte-1c2zskh">Contact</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-geo-alt-fill"></i></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="address" class="svelte-1c2zskh">Address</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="number" id="yearLevel" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="yearLevel" class="svelte-1c2zskh">Year Level</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="text" id="course" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="course" class="svelte-1c2zskh">Course</label></div>',c=w(),d=h("button"),d.textContent="Proceed",_=w(),m=h("a"),m.textContent="Back",f(r,"class","svelte-1c2zskh"),f(o,"class","col-12 col-sm-6"),f(a,"class","col-12 col-sm-6"),f(d,"type","submit"),f(d,"class","bton w-50 svelte-1c2zskh"),f(d,"name","hidden"),f(d,"id","Proceed"),f(n,"class","row justify-content-center"),f(m,"href","./#/"),f(m,"class","mt-2 svelte-1c2zskh"),f(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1c2zskh"),f(e,"style","height")},m(k,$){E(k,e,$),u(e,r),u(e,s),u(e,n),b&&b.m(n,null),u(n,i),u(n,o),u(n,l),u(n,a),u(n,c),u(n,d),u(e,_),u(e,m),p=!0,v||(y=[G(d,"click",pp),G(n,"submit",er(t[16])),G(m,"click",t[27])],v=!0)},p(k,$){k[6]?b?b.p(k,$):(b=fo(k),b.c(),b.m(n,i)):b&&(b.d(1),b=null)},i(k){p||(k&&Ee(()=>{p&&(g||(g=lr(e,dr,{duration:600,y:500},!0)),g.run(1))}),p=!0)},o(k){k&&(g||(g=lr(e,dr,{duration:600,y:500},!1)),g.run(0)),p=!1},d(k){k&&P(e),b&&b.d(),k&&g&&g.end(),v=!1,De(y)}}}function fp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe=t[5]&&ho(t);return{c(){e=h("div"),r=h("h2"),r.textContent="Registration",s=w(),oe&&oe.c(),n=w(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=w(),c=h("input"),d=w(),_=h("label"),_.textContent="Username",m=w(),g=h("div"),p=h("span"),v=h("a"),v.innerHTML='<i class="bi bi-eye"></i>',y=w(),b=h("input"),k=w(),$=h("label"),$.textContent="Password",C=w(),S=h("div"),T=h("span"),A=h("a"),A.innerHTML='<i class="bi bi-eye"></i>',j=w(),U=h("input"),Z=w(),H=h("label"),H.textContent="Confirm Password",K=w(),W=h("button"),W.textContent="Next",R=w(),I=h("div"),D=h("p"),V=se("Already have an account? "),te=h("a"),te.textContent="Login",f(r,"class","svelte-1c2zskh"),f(l,"class","icon svelte-1c2zskh"),f(c,"type","text"),f(c,"id","registerUsername"),c.required=!0,f(c,"autocomplete","off"),f(c,"class","svelte-1c2zskh"),f(_,"for","registerUsername"),f(_,"class","svelte-1c2zskh"),f(o,"class","input-box svelte-1c2zskh"),f(v,"href","./#/"),f(v,"class","svelte-1c2zskh"),f(p,"class","icon svelte-1c2zskh"),f(p,"id","showPass2"),f(b,"type","password"),f(b,"id","registerPass"),b.required=!0,f(b,"autocomplete","off"),f(b,"minlength","6"),f(b,"class","svelte-1c2zskh"),f($,"for","registerPass"),f($,"class","svelte-1c2zskh"),f(g,"class","input-box svelte-1c2zskh"),f(A,"href","./#/"),f(A,"class","svelte-1c2zskh"),f(T,"class","icon svelte-1c2zskh"),f(T,"id","showPass3"),f(U,"type","password"),f(U,"id","registerConfirm"),U.required=!0,f(U,"autocomplete","off"),f(U,"minlength","6"),f(U,"class","svelte-1c2zskh"),f(H,"for","registerConfirm"),f(H,"class","svelte-1c2zskh"),f(S,"class","input-box svelte-1c2zskh"),f(W,"type","submit"),f(W,"class","bton svelte-1c2zskh"),f(W,"id","registerBtn"),f(te,"href","./#/"),f(te,"class","login-link svelte-1c2zskh"),f(I,"class","login-register svelte-1c2zskh"),f(e,"class","form-box register svelte-1c2zskh")},m(re,fe){E(re,e,fe),u(e,r),u(e,s),oe&&oe.m(e,null),u(e,n),u(e,i),u(i,o),u(o,l),u(o,a),u(o,c),J(c,t[7]),u(o,d),u(o,_),u(i,m),u(i,g),u(g,p),u(p,v),u(g,y),u(g,b),J(b,t[8]),u(g,k),u(g,$),u(i,C),u(i,S),u(S,T),u(T,A),u(S,j),u(S,U),J(U,t[9]),u(S,Z),u(S,H),u(i,K),u(i,W),u(i,R),u(i,I),u(I,D),u(D,V),u(D,te),B=!0,X||(we=[G(c,"keyup",t[21]),G(c,"input",t[22]),G(v,"click",er(_p)),G(b,"keyup",t[23]),G(b,"input",t[24]),G(A,"click",er(mp)),G(U,"keyup",t[25]),G(U,"input",t[26]),G(te,"click",t[13]),G(i,"submit",er(t[15]))],X=!0)},p(re,fe){re[5]?oe?oe.p(re,fe):(oe=ho(re),oe.c(),oe.m(e,n)):oe&&(oe.d(1),oe=null),fe[0]&128&&c.value!==re[7]&&J(c,re[7]),fe[0]&256&&b.value!==re[8]&&J(b,re[8]),fe[0]&512&&U.value!==re[9]&&J(U,re[9])},i(re){B||(re&&Ee(()=>{B&&(x||(x=lr(e,dr,{duration:600,y:500},!0)),x.run(1))}),B=!0)},o(re){re&&(x||(x=lr(e,dr,{duration:600,y:500},!1)),x.run(0)),B=!1},d(re){re&&P(e),oe&&oe.d(),re&&x&&x.end(),X=!1,De(we)}}}function fo(t){let e,r,s;return{c(){e=h("div"),r=h("div"),s=se(t[6]),f(r,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1c2zskh"),f(e,"class","d-flex justify-content-center")},m(n,i){E(n,e,i),u(e,r),u(r,s)},p(n,i){i[0]&64&&le(s,n[6])},d(n){n&&P(e)}}}function ho(t){let e,r;return{c(){e=h("div"),r=se(t[5]),f(e,"class","alert alert-danger p-1 text-center svelte-1c2zskh")},m(s,n){E(s,e,n),u(e,r)},p(s,n){n[0]&32&&le(r,s[5])},d(s){s&&P(e)}}}function hp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,re=t[4]&&uo(t);const fe=[fp,dp],Le=[];function Ce(ee,ue){return ee[0]?1:0}return W=Ce(t),R=Le[W]=fe[W](t),{c(){e=h("main"),r=h("div"),s=h("div"),n=h("h2"),n.textContent="Login",i=w(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',c=w(),d=h("input"),_=w(),m=h("label"),m.textContent="Username",g=w(),p=h("div"),v=h("span"),v.innerHTML='<i class="bi bi-eye"></i>',y=w(),b=h("input"),k=w(),$=h("label"),$.textContent="Password",C=w(),re&&re.c(),S=w(),T=h("button"),T.textContent="Login",A=w(),j=h("div"),U=h("p"),Z=se("Don't have an account? "),H=h("a"),H.textContent="Register",K=w(),R.c(),D=w(),V=h("div"),te=h("button"),te.textContent="Client",x=w(),B=h("button"),B.textContent="Staff",f(n,"class","svelte-1c2zskh"),f(a,"class","icon svelte-1c2zskh"),f(d,"type","text"),f(d,"id","usernameLogin"),d.required=!0,f(d,"autocomplete","off"),f(d,"class","svelte-1c2zskh"),f(m,"for","usernameLogin"),f(m,"class","svelte-1c2zskh"),f(l,"class","input-box svelte-1c2zskh"),f(v,"class","icon svelte-1c2zskh"),f(b,"minlength","6"),f(b,"maxlength","12"),f(b,"type","password"),f(b,"id","passwordLogin"),b.required=!0,f(b,"autocomplete","off"),f(b,"class","svelte-1c2zskh"),f($,"for","passwordLogin"),f($,"class","svelte-1c2zskh"),f(p,"class","input-box svelte-1c2zskh"),f(T,"type","submit"),f(T,"class","bton svelte-1c2zskh"),f(T,"id","loginBton"),f(H,"href","./#/"),f(H,"class","register-link svelte-1c2zskh"),f(j,"class","login-register svelte-1c2zskh"),f(o,"id","form"),f(s,"class","form-box login svelte-1c2zskh"),f(r,"class",I="wrapper "+t[1]+" active-popup "+t[10]+" svelte-1c2zskh"),f(te,"class","m-2 btn btn-primary btn-lg"),f(B,"class","m-2 btn btn-danger btn-lg"),f(V,"class","d-none"),Je(e,"background",'url("./login-bg.jpg") no-repeat'),Je(e,"background-size","cover"),Je(e,"background-position","center"),Je(e,"background-position-y","5%"),f(e,"class","svelte-1c2zskh")},m(ee,ue){E(ee,e,ue),u(e,r),u(r,s),u(s,n),u(s,i),u(s,o),u(o,l),u(l,a),u(l,c),u(l,d),J(d,t[2]),u(l,_),u(l,m),u(o,g),u(o,p),u(p,v),u(p,y),u(p,b),J(b,t[3]),u(p,k),u(p,$),u(o,C),re&&re.m(o,null),u(o,S),u(o,T),u(o,A),u(o,j),u(j,U),u(U,Z),u(U,H),u(r,K),Le[W].m(r,null),u(e,D),u(e,V),u(V,te),u(V,x),u(V,B),we||(oe=[G(d,"input",t[18]),G(b,"keyup",t[19]),G(b,"input",t[20]),G(H,"click",t[13]),G(o,"submit",er(t[14])),G(te,"click",t[28]),G(B,"click",t[29])],we=!0)},p(ee,ue){ue[0]&4&&d.value!==ee[2]&&J(d,ee[2]),ue[0]&8&&b.value!==ee[3]&&J(b,ee[3]),ee[4]?re?re.p(ee,ue):(re=uo(ee),re.c(),re.m(o,S)):re&&(re.d(1),re=null);let ye=W;W=Ce(ee),W===ye?Le[W].p(ee,ue):(Oe(),M(Le[ye],1,1,()=>{Le[ye]=null}),Te(),R=Le[W],R?R.p(ee,ue):(R=Le[W]=fe[W](ee),R.c()),O(R,1),R.m(r,null)),ue[0]&1026&&I!==(I="wrapper "+ee[1]+" active-popup "+ee[10]+" svelte-1c2zskh")&&f(r,"class",I)},i(ee){O(R),ee&&(X||Ee(()=>{X=Ue(e,Fe,{duration:500}),X.start()}))},o(ee){M(R)},d(ee){ee&&P(e),re&&re.d(),Le[W].d(),we=!1,De(oe)}}}const _p=()=>{},mp=()=>{},pp=()=>{};function gp(t,e,r){let s;document.querySelector("body").setAttribute("data-bs-theme","dark"),yl("/");function n(x){Rt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",x)}function i(x){Rt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",x)}let o=!0,l="";function a(){r(17,o=!o)}let c,d;async function _(){const{data:x,error:B}=await ae.from("user_level").select("account_type, user_id").eq("username",c).eq("password",d).maybeSingle();if(B){console.error(B);return}if(!x&&await g(c)){r(4,p="Wrong password.");return}else if(!x){r(4,p="User does not exist.");return}x.account_type=="student"?n(x.user_id):x.account_type=="staff"?i(x.user_id):console.error(x)}let m=!1;async function g(x){const{data:B,error:X}=await ae.from("user_level").select().eq("username",x);return X&&console.error(X),B.length>0}let p,v,y,b,k,$,C;async function S(){if(await g(b)){r(5,v="Username already exists.");return}else if(k!=$){r(5,v="Password does not match.");return}r(0,m=!m)}async function T(){const{data:x,error:B}=await ae.from("user_level").select().eq("username",C);if(x.length==0){r(6,y="Student ID already exists");return}}function A(){c=this.value,r(2,c)}const j=()=>r(4,p="");function U(){d=this.value,r(3,d)}const Z=()=>r(5,v="");function H(){b=this.value,r(7,b)}const K=()=>r(5,v="");function W(){k=this.value,r(8,k)}const R=()=>r(5,v="");function I(){$=this.value,r(9,$)}const D=()=>r(0,m=!m),V=()=>n("263690"),te=()=>i("153827");return t.$$.update=()=>{t.$$.dirty[0]&131072&&r(1,l=o?"":"active"),t.$$.dirty[0]&131073&&r(10,s=m&&!o?"moreinfo":"")},[m,l,c,d,p,v,y,b,k,$,s,n,i,a,_,S,T,o,A,j,U,Z,H,K,W,R,I,D,V,te]}class bp extends be{constructor(e){super(),ge(this,e,gp,hp,pe,{},null,[-1,-1])}}function vp(t){let e,r,s,n,i,o,l,a,c,d,_,m;const g=t[4].default,p=ds(g,t,t[3],null);return{c(){e=h("div"),r=h("label"),s=se(t[0]),n=w(),i=h("div"),p&&p.c(),o=w(),l=h("div"),a=h("button"),c=se(t[2]),f(r,"class","col-sm-4 col-md-3 col-form-label"),f(r,"for",t[1]),f(i,"class","col-sm-5 col-md-6 col-9"),f(a,"class","w-100 btn btn-outline-primary"),f(l,"class","col-sm-3 col-md-3 col-auto"),f(e,"class","mb-4 row justify-content-center")},m(v,y){E(v,e,y),u(e,r),u(r,s),u(e,n),u(e,i),p&&p.m(i,null),u(e,o),u(e,l),u(l,a),u(a,c),d=!0,_||(m=G(a,"click",t[5]),_=!0)},p(v,[y]){(!d||y&1)&&le(s,v[0]),(!d||y&2)&&f(r,"for",v[1]),p&&p.p&&(!d||y&8)&&hs(p,g,v,v[3],d?fs(g,v[3],y,null):_s(v[3]),null),(!d||y&4)&&le(c,v[2])},i(v){d||(O(p,v),d=!0)},o(v){M(p,v),d=!1},d(v){v&&P(e),p&&p.d(v),_=!1,m()}}}function wp(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){ss.call(this,t,c)}return t.$$set=c=>{"label"in c&&r(0,i=c.label),"id"in c&&r(1,o=c.id),"button"in c&&r(2,l=c.button),"$$scope"in c&&r(3,n=c.$$scope)},[i,o,l,n,s,a]}class yp extends be{constructor(e){super(),ge(this,e,wp,vp,pe,{label:0,id:1,button:2})}}function kp(t){let e,r,s,n,i,o,l,a;return{c(){e=h("div"),r=h("div"),s=h("b"),n=se(t[0]),i=se(":"),o=w(),l=h("div"),a=se(t[1]),f(r,"class","col-sm-4 col-md-4"),f(l,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(c,d){E(c,e,d),u(e,r),u(r,s),u(s,n),u(s,i),u(e,o),u(e,l),u(l,a)},p(c,[d]){d&1&&le(n,c[0]),d&2&&le(a,c[1])},i:F,o:F,d(c){c&&P(e)}}}function $p(t,e,r){let{key:s}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&r(0,s=i.key),"value"in i&&r(1,n=i.value)},[s,n]}class qe extends be{constructor(e){super(),ge(this,e,$p,kp,pe,{key:0,value:1})}}function Sp(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.textContent="Cannot Find Reservation",f(e,"class",r="form-control "+t[9]),f(e,"type","number"),f(e,"id","reserve"),f(e,"placeholder","e.g 300xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[4]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",t[18]),G(e,"keyup",t[19])],i=!0)},p(l,a){a[0]&512&&r!==(r="form-control "+l[9])&&f(e,"class",r),a[0]&16&&ms(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function Op(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.textContent="Cannot Find Student",f(e,"class",r="form-control "+t[10]),f(e,"type","text"),f(e,"id","stud-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[5]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",t[20]),G(e,"keyup",t[21])],i=!0)},p(l,a){a[0]&1024&&r!==(r="form-control "+l[10])&&f(e,"class",r),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function Tp(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.textContent="Cannot Find Book",f(e,"class",r="form-control "+t[11]),f(e,"type","text"),f(e,"id","book-barcode"),f(e,"placeholder","e.g 1000xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[6]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",t[22]),G(e,"keyup",t[23])],i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&f(e,"class",r),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function _o(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C;return n=new qe({props:{key:"Borrow ID",value:t[3]}}),o=new qe({props:{key:"Name",value:t[7]}}),a=new qe({props:{key:"Book Title",value:t[8]+" ("+t[6]+")"}}),d=new qe({props:{key:"Staff Name",value:"Francis James E. Salles ("+t[14]+")"}}),m=new qe({props:{key:"Borrow Date",value:z(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new qe({props:{key:"Return Due",value:z(t[1]).format("MMMM DD, YYYY")+" ("+t[12]+" days)"}}),{c(){e=h("div"),r=h("h3"),r.textContent="Borrow Preview",s=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),g=w(),N(p.$$.fragment),v=w(),y=h("div"),b=h("button"),b.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',f(r,"class","py-4 text-center"),f(b,"class","btn btn-secondary"),f(y,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(S,T){E(S,e,T),u(e,r),u(e,s),L(n,e,null),u(e,i),L(o,e,null),u(e,l),L(a,e,null),u(e,c),L(d,e,null),u(e,_),L(m,e,null),u(e,g),L(p,e,null),u(e,v),u(e,y),u(y,b),k=!0,$||(C=G(b,"click",t[17]),$=!0)},p(S,T){const A={};T[0]&8&&(A.value=S[3]),n.$set(A);const j={};T[0]&128&&(j.value=S[7]),o.$set(j);const U={};T[0]&320&&(U.value=S[8]+" ("+S[6]+")"),a.$set(U);const Z={};T[0]&1&&(Z.value=z(S[0]).format("MMMM DD, YYYY - hh:mm a")),m.$set(Z);const H={};T[0]&4098&&(H.value=z(S[1]).format("MMMM DD, YYYY")+" ("+S[12]+" days)"),p.$set(H)},i(S){k||(O(n.$$.fragment,S),O(o.$$.fragment,S),O(a.$$.fragment,S),O(d.$$.fragment,S),O(m.$$.fragment,S),O(p.$$.fragment,S),k=!0)},o(S){M(n.$$.fragment,S),M(o.$$.fragment,S),M(a.$$.fragment,S),M(d.$$.fragment,S),M(m.$$.fragment,S),M(p.$$.fragment,S),k=!1},d(S){S&&P(e),Y(n),Y(o),Y(a),Y(d),Y(m),Y(p),$=!1,C()}}}function Dp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,re,fe,Le;r=new Ze({props:{text:"Borrow Book"}}),o=new yp({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Sp]},$$scope:{ctx:t}}}),o.$on("click",t[16]),d=new Ie({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Op]},$$scope:{ctx:t}}}),m=new Ie({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Tp]},$$scope:{ctx:t}}});let Ce=t[2]&&_o(t);return{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),a=h("hr"),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Borrow Date:",y=w(),b=h("div"),k=h("input"),C=w(),S=h("div"),T=h("button"),T.textContent="Today",A=w(),j=h("div"),U=h("label"),U.textContent="Return Due:",Z=w(),H=h("div"),K=h("input"),R=w(),I=h("div"),D=h("button"),D.textContent=`~${an} Days`,V=w(),te=h("div"),x=h("button"),x.innerHTML='<i class="bi bi-receipt"></i> Borrow',B=w(),X=h("a"),X.innerHTML='<i class="bi bi-x-circle"></i> Cancel',we=w(),Ce&&Ce.c(),f(a,"class","mb-4"),f(v,"class","col-sm-4 col-md-3 col-form-label"),f(v,"for","borrow-date"),f(k,"class","form-control"),f(k,"type","datetime-local"),f(k,"id","borrow-date"),f(k,"max",$=z(t[1]).format("YYYY-MM-DD HH:mm")),f(b,"class","col-sm-5 col-md-6 col-7"),f(T,"class","w-100 btn btn-outline-primary"),f(S,"class","col-sm-3 col-md-3 col-auto"),f(p,"class","mb-4 row justify-content-center"),f(U,"class","col-sm-4 col-md-3 col-form-label"),f(U,"for","return-date"),f(K,"class","form-control"),f(K,"type","date"),f(K,"id","return-date"),f(K,"min",W=z(t[0]).format("YYYY-MM-DD")),f(H,"class","col-sm-5 col-md-6 col-7"),f(D,"class","w-100 btn btn-outline-primary"),f(I,"class","col-sm-3 col-md-3 col-auto"),f(j,"class","mb-4 row justify-content-center"),f(x,"class","btn btn-success"),f(X,"href","./#/"),f(X,"class","btn btn-danger"),f(te,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(ee,ue){E(ee,e,ue),L(r,e,null),u(e,s),u(e,n),u(n,i),L(o,i,null),u(i,l),u(i,a),u(i,c),L(d,i,null),u(i,_),L(m,i,null),u(i,g),u(i,p),u(p,v),u(p,y),u(p,b),u(b,k),J(k,t[0]),u(p,C),u(p,S),u(S,T),u(i,A),u(i,j),u(j,U),u(j,Z),u(j,H),u(H,K),J(K,t[1]),u(j,R),u(j,I),u(I,D),u(i,V),u(i,te),u(te,x),u(te,B),u(te,X),u(n,we),Ce&&Ce.m(n,null),re=!0,fe||(Le=[G(k,"input",t[24]),G(T,"click",t[25]),G(K,"input",t[26]),G(D,"click",t[27]),G(x,"click",t[28])],fe=!0)},p(ee,ue){const ye={};ue[0]&528|ue[1]&2&&(ye.$$scope={dirty:ue,ctx:ee}),o.$set(ye);const ce={};ue[0]&1056|ue[1]&2&&(ce.$$scope={dirty:ue,ctx:ee}),d.$set(ce);const ie={};ue[0]&2112|ue[1]&2&&(ie.$$scope={dirty:ue,ctx:ee}),m.$set(ie),(!re||ue[0]&2&&$!==($=z(ee[1]).format("YYYY-MM-DD HH:mm")))&&f(k,"max",$),ue[0]&1&&J(k,ee[0]),(!re||ue[0]&1&&W!==(W=z(ee[0]).format("YYYY-MM-DD")))&&f(K,"min",W),ue[0]&2&&J(K,ee[1]),ee[2]?Ce?(Ce.p(ee,ue),ue[0]&4&&O(Ce,1)):(Ce=_o(ee),Ce.c(),O(Ce,1),Ce.m(n,null)):Ce&&(Oe(),M(Ce,1,1,()=>{Ce=null}),Te())},i(ee){re||(O(r.$$.fragment,ee),O(o.$$.fragment,ee),O(d.$$.fragment,ee),O(m.$$.fragment,ee),O(Ce),ee&&(oe||Ee(()=>{oe=Ue(e,Fe,{duration:500}),oe.start()})),re=!0)},o(ee){M(r.$$.fragment,ee),M(o.$$.fragment,ee),M(d.$$.fragment,ee),M(m.$$.fragment,ee),M(Ce),re=!1},d(ee){ee&&P(e),Y(r),Y(o),Y(d),Y(m),Ce&&Ce.d(),fe=!1,De(Le)}}}const an=14;function mo(){return"400"+Math.floor(Math.random()*9e3)}function Mp(t,e,r){let s,n;cn(t,Fo,x=>r(29,n=x));const i=z().format("YYYY-MM-DD HH:mm");let o=i,l=z(i).add(an,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,d,_,m,g;const p=new URLSearchParams(n);_=p.get("reserve_id")||"",g=p.get("barcode")||"";let v,y,b,k,$;async function C(){const{data:x,error:B}=await ae.from("account_details").select("fname, lname").eq("user_id",m).single();B?(r(10,k="is-invalid"),console.error(B)):r(7,v=`${x.fname} ${x.lname}`);const{data:X,error:we}=await ae.from("library_holdings").select("books(title)").eq("barcode",g).single();we||!X?(r(11,$="is-invalid"),console.error(we)):r(8,y=X.books.title),(!we||!B)&&(r(3,d=await A()),r(2,c=!c))}async function S(){const{data:x,error:B}=await ae.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",_).eq("active",!0).single();B||!x?(r(9,b="is-invalid"),console.error(B)):(r(5,m=x.stud_id),r(6,g=x.library_holdings.barcode),C())}async function T(){const{data:x,error:B}=await ae.from("library_holdings").select("holding_id").eq("barcode",g).single();B&&console.error(B);const X=z(o).format("YYYY-MM-DDTHH:MMZ"),we=z(l).format("YYYY-MM-DDTHH:MMZ"),{error:oe}=await ae.from("book_borrow").insert({borrow_id:d,stud_id:m,holding_id:x.holding_id,staff_id:a,borrow_date:X,due_date:we});if(oe){console.error(oe);return}const{data:re,error:fe}=await ae.from("book_reservation").update({staff_id:a,release_date:X,active:!1}).eq("active",!0).eq("holding_id",x.holding_id).select();if(console.log("updated Rows:",re),fe){console.error(fe);return}const{error:Le}=await ae.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",x.holding_id);Le&&console.error(Le)}async function A(){let x=mo();const{data:B,error:X}=await ae.from("book_borrow").select().eq("borrow_id",x);return console.log(B),B.length!=0&&(x=mo(),console.log("exists")),console.log(x),x}function j(){_=ms(this.value),r(4,_)}const U=()=>r(9,b="");function Z(){m=this.value,r(5,m)}const H=()=>r(10,k="");function K(){g=this.value,r(6,g)}const W=()=>r(11,$="");function R(){o=this.value,r(0,o)}const I=()=>r(0,o=i);function D(){l=this.value,r(1,l)}const V=()=>r(1,l=z(o).add(an,"days").format("YYYY-MM-DD")),te=()=>{C()};return t.$$.update=()=>{t.$$.dirty[0]&3&&r(12,s=z(l).diff(z(o).format("YYYY-MM-DD"),"days"))},[o,l,c,d,_,m,g,v,y,b,k,$,s,i,a,C,S,T,j,U,Z,H,K,W,R,I,D,V,te]}class Cp extends be{constructor(e){super(),ge(this,e,Mp,Dp,pe,{},null,[-1,-1])}}function Pp(t){let e,r,s,n,i,o;return{c(){e=h("input"),s=w(),n=h("div"),n.textContent="Borrow ID not found.",f(e,"class",r="form-control "+t[4]),f(e,"type","text"),f(e,"id","book-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[3]),E(l,s,a),E(l,n,a),i||(o=[G(e,"keyup",t[19]),G(e,"input",t[20])],i=!0)},p(l,a){a&16&&r!==(r="form-control "+l[4])&&f(e,"class",r),a&8&&e.value!==l[3]&&J(e,l[3])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function Ep(t){let e,r,s,n,i,o,l;return{c(){e=h("select"),r=h("option"),r.textContent="New",s=h("option"),s.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",r.__value="New",J(r,r.__value),s.__value="Good",J(s,s.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),f(e,"class","form-select"),f(e,"id","book-condition"),t[12]===void 0&&Ee(()=>t[21].call(e))},m(a,c){E(a,e,c),u(e,r),u(e,s),u(e,n),u(e,i),Xn(e,t[12],!0),o||(l=G(e,"change",t[21]),o=!0)},p(a,c){c&4096&&Xn(e,a[12])},d(a){a&&P(e),o=!1,l()}}}function Rp(t){let e,r,s;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"rows","3"),f(e,"id","book-note")},m(n,i){E(n,e,i),J(e,t[11]),r||(s=G(e,"input",t[22]),r=!0)},p(n,i){i&2048&&J(e,n[11])},d(n){n&&P(e),r=!1,s()}}}function po(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K;n=new qe({props:{key:"Borrow ID",value:t[3]}}),o=new qe({props:{key:"Return ID",value:t[6]}}),a=new qe({props:{key:"Name",value:t[10]+" ("+t[9]+")"}}),d=new qe({props:{key:"Book Title",value:t[7]+" ("+t[8]+")"}}),m=new qe({props:{key:"Condition",value:t[12]}});let W=t[11]&&go(t);v=new qe({props:{key:"Received by",value:"Francis James E. Salles ("+t[16]+")"}}),b=new qe({props:{key:"Return Due",value:z(t[1]).format("MMMM DD, YYYY")}}),$=new qe({props:{key:"Return Date",value:z(t[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(t[2]>0?`+${t[2]}`:t[2])+" days)"}});let R=t[2]<0&&bo(t),I=t[2]<0&&vo();return{c(){e=h("div"),r=h("h3"),r.textContent="Return Preview",s=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),g=w(),W&&W.c(),p=w(),N(v.$$.fragment),y=w(),N(b.$$.fragment),k=w(),N($.$$.fragment),C=w(),R&&R.c(),S=w(),T=h("div"),A=h("button"),A.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',j=w(),I&&I.c(),f(r,"class","py-4 text-center"),f(A,"class","btn btn-success"),f(T,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(D,V){E(D,e,V),u(e,r),u(e,s),L(n,e,null),u(e,i),L(o,e,null),u(e,l),L(a,e,null),u(e,c),L(d,e,null),u(e,_),L(m,e,null),u(e,g),W&&W.m(e,null),u(e,p),L(v,e,null),u(e,y),L(b,e,null),u(e,k),L($,e,null),u(e,C),R&&R.m(e,null),u(e,S),u(e,T),u(T,A),u(T,j),I&&I.m(T,null),Z=!0,H||(K=G(A,"click",t[18]),H=!0)},p(D,V){const te={};V&8&&(te.value=D[3]),n.$set(te);const x={};V&64&&(x.value=D[6]),o.$set(x);const B={};V&1536&&(B.value=D[10]+" ("+D[9]+")"),a.$set(B);const X={};V&384&&(X.value=D[7]+" ("+D[8]+")"),d.$set(X);const we={};V&4096&&(we.value=D[12]),m.$set(we),D[11]?W?(W.p(D,V),V&2048&&O(W,1)):(W=go(D),W.c(),O(W,1),W.m(e,p)):W&&(Oe(),M(W,1,1,()=>{W=null}),Te());const oe={};V&2&&(oe.value=z(D[1]).format("MMMM DD, YYYY")),b.$set(oe);const re={};V&5&&(re.value=z(D[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(D[2]>0?`+${D[2]}`:D[2])+" days)"),$.$set(re),D[2]<0?R?R.p(D,V):(R=bo(D),R.c(),R.m(e,S)):R&&(R.d(1),R=null),D[2]<0?I||(I=vo(),I.c(),I.m(T,null)):I&&(I.d(1),I=null)},i(D){Z||(O(n.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(d.$$.fragment,D),O(m.$$.fragment,D),O(W),O(v.$$.fragment,D),O(b.$$.fragment,D),O($.$$.fragment,D),D&&Ee(()=>{Z&&(U||(U=lr(e,dr,{duration:400,y:-60},!0)),U.run(1))}),Z=!0)},o(D){M(n.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(d.$$.fragment,D),M(m.$$.fragment,D),M(W),M(v.$$.fragment,D),M(b.$$.fragment,D),M($.$$.fragment,D),D&&(U||(U=lr(e,dr,{duration:400,y:-60},!1)),U.run(0)),Z=!1},d(D){D&&P(e),Y(n),Y(o),Y(a),Y(d),Y(m),W&&W.d(),Y(v),Y(b),Y($),R&&R.d(),I&&I.d(),D&&U&&U.end(),H=!1,K()}}}function go(t){let e,r;return e=new qe({props:{key:"Return Note",value:t[11]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},p(s,n){const i={};n&2048&&(i.value=s[11]),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function bo(t){let e,r,s,n,i,o;return{c(){e=h("div"),r=h("div"),r.innerHTML="<b>Late Return Fee:</b>",s=w(),n=h("div"),i=se(t[14]),o=se(" pesos"),f(r,"class","col-sm-4 col-md-4"),f(n,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(l,a){E(l,e,a),u(e,r),u(e,s),u(e,n),u(n,i),u(n,o)},p(l,a){a&16384&&le(i,l[14])},d(l){l&&P(e)}}}function vo(t){let e,r,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay',f(e,"class","btn btn-danger"),f(e,"data-bs-toggle","modal"),f(e,"data-bs-target","#payModal")},m(n,i){E(n,e,i),r||(s=G(e,"click",Yp),r=!0)},d(n){n&&P(e),r=!1,s()}}}function Ap(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","ref")},m(n,i){E(n,e,i),J(e,t[13]),r||(s=G(e,"input",t[25]),r=!0)},p(n,i){i&8192&&e.value!==n[13]&&J(e,n[13])},d(n){n&&P(e),r=!1,s()}}}function jp(t){let e,r,s,n;return{c(){e=h("select"),r=h("option"),r.textContent="Cash",s=h("option"),s.textContent="GCash",n=h("option"),n.textContent="Bank Transfer",r.__value="cash",J(r,r.__value),s.__value="GCash",J(s,s.__value),n.__value="bank",J(n,n.__value),f(e,"name","payment_method"),f(e,"class","form-select"),f(e,"id","payment_method")},m(i,o){E(i,e,o),u(e,r),u(e,s),u(e,n)},p:F,d(i){i&&P(e)}}}function Ip(t){let e,r,s,n,i,o,l,a,c,d,_,m,g;return d=new Ie({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Ap]},$$scope:{ctx:t}}}),m=new Ie({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[jp]},$$scope:{ctx:t}}}),{c(){e=h("div"),r=h("div"),r.textContent="Amount to pay:",s=w(),n=h("h1"),i=se(""),o=se(t[14]),l=w(),a=h("hr"),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),f(n,"class","text-center"),f(a,"class","my-4"),f(e,"class","container row")},m(p,v){E(p,e,v),u(e,r),u(e,s),u(e,n),u(n,i),u(n,o),u(e,l),u(e,a),u(e,c),L(d,e,null),u(e,_),L(m,e,null),g=!0},p(p,v){(!g||v&16384)&&le(o,p[14]);const y={};v&536879104&&(y.$$scope={dirty:v,ctx:p}),d.$set(y);const b={};v&536870912&&(b.$$scope={dirty:v,ctx:p}),m.$set(b)},i(p){g||(O(d.$$.fragment,p),O(m.$$.fragment,p),g=!0)},o(p){M(d.$$.fragment,p),M(m.$$.fragment,p),g=!1},d(p){p&&P(e),Y(d),Y(m)}}}function Lp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I,D,V,te;r=new Ze({props:{text:"Return Book"}}),o=new Ie({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Pp]},$$scope:{ctx:t}}}),a=new Ie({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Ep]},$$scope:{ctx:t}}}),d=new Ie({props:{label:"Note:",id:"book-note",$$slots:{default:[Rp]},$$scope:{ctx:t}}});let x=t[5]&&po(t);return R=new X_({props:{title:"Process Payment",id:"payModal",pButton:"Done",$$slots:{default:[Ip]},$$scope:{ctx:t}}}),R.$on("click",Np),{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),m=h("div"),g=h("label"),g.textContent="Return Time:",p=w(),v=h("div"),y=h("input"),b=w(),k=h("div"),$=h("button"),$.textContent="Now",C=w(),S=h("div"),T=h("button"),A=h("i"),j=se(" Preview"),Z=w(),H=h("a"),H.innerHTML='<i class="bi bi-x-circle"></i> Cancel',K=w(),x&&x.c(),W=w(),N(R.$$.fragment),f(g,"class","col-sm-4 col-md-3 col-form-label"),f(g,"for","return-time"),f(y,"class","form-control"),f(y,"type","datetime-local"),f(y,"id","return-time"),f(v,"class","col-sm-5 col-md-6 col-7"),f($,"class","w-100 btn btn-outline-primary"),f(k,"class","col-sm-3 col-md-3 col-auto"),f(m,"class","mb-4 row justify-content-center"),f(A,"class","bi bi-receipt"),f(T,"class",U="btn btn-"+(t[5]?"secondary":"success")),f(H,"href","./#/"),f(H,"class","btn btn-danger"),f(S,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-sm-4"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(B,X){E(B,e,X),L(r,e,null),u(e,s),u(e,n),u(n,i),L(o,i,null),u(i,l),L(a,i,null),u(i,c),L(d,i,null),u(i,_),u(i,m),u(m,g),u(m,p),u(m,v),u(v,y),J(y,t[0]),u(m,b),u(m,k),u(k,$),u(i,C),u(i,S),u(S,T),u(T,A),u(T,j),u(S,Z),u(S,H),u(n,K),x&&x.m(n,null),u(e,W),L(R,e,null),D=!0,V||(te=[G(y,"input",t[23]),G($,"click",t[24]),G(T,"click",t[17])],V=!0)},p(B,[X]){const we={};X&536870936&&(we.$$scope={dirty:X,ctx:B}),o.$set(we);const oe={};X&536875008&&(oe.$$scope={dirty:X,ctx:B}),a.$set(oe);const re={};X&536872960&&(re.$$scope={dirty:X,ctx:B}),d.$set(re),X&1&&J(y,B[0]),(!D||X&32&&U!==(U="btn btn-"+(B[5]?"secondary":"success")))&&f(T,"class",U),B[5]?x?(x.p(B,X),X&32&&O(x,1)):(x=po(B),x.c(),O(x,1),x.m(n,null)):x&&(Oe(),M(x,1,1,()=>{x=null}),Te());const fe={};X&536895488&&(fe.$$scope={dirty:X,ctx:B}),R.$set(fe)},i(B){D||(O(r.$$.fragment,B),O(o.$$.fragment,B),O(a.$$.fragment,B),O(d.$$.fragment,B),O(x),O(R.$$.fragment,B),B&&(I||Ee(()=>{I=Ue(e,Fe,{duration:500}),I.start()})),D=!0)},o(B){M(r.$$.fragment,B),M(o.$$.fragment,B),M(a.$$.fragment,B),M(d.$$.fragment,B),M(x),M(R.$$.fragment,B),D=!1},d(B){B&&P(e),Y(r),Y(o),Y(a),Y(d),x&&x.d(),Y(R),V=!1,De(te)}}}function wo(){return"500"+Math.floor(Math.random()*9e3)}const Yp=()=>{},Np=()=>{};function Up(t,e,r){let s,n,i;cn(t,Fo,D=>r(26,i=D));let o=z().format("YYYY-MM-DD HH:mm"),l=o,a="";const c=localStorage.getItem("user_id");let d,_="";d=new URLSearchParams(i).get("borrow_id")||"";let g=!1,p,v,y,b,k,$,C;async function S(){const{data:D,error:V}=await ae.from("book_borrow").select().eq("borrow_id",d).eq("active",!0).maybeSingle();if(!D){r(4,_="is-invalid");return}const{data:te,error:x}=await ae.rpc("getborrowinfo",{borrowid:d});console.error(x),console.table(te);let B=te[0];r(10,k=`${B.fname} ${B.lname}`),r(9,b=B.stud_id),r(7,v=B.title),r(8,y=B.barcode),r(1,a=B.due_date),r(6,p=await A()),r(5,g=!0)}async function T(){const{data:D,error:V}=await ae.from("book_return").insert({return_id:await A(),borrow_id:d,staff_id:c,note:$,return_date:z(l).format("YYYY-MM-DDTHH:MMZ"),condition:C}).select();if(V){console.error(V);return}console.table(D);const{data:te,error:x}=await ae.from("library_holdings").update({status:"Available",condition:C}).eq("barcode",y).select(),{data:B,error:X}=await ae.from("book_borrow").update({active:!1}).eq("borrow_id",d).select();if(x||X){console.error(x),console.error(X);return}console.log(te,B)}async function A(){let D=wo();const{data:V,error:te}=await ae.from("book_return").select().eq("return_id",D);return console.log(V),V.length!=0&&(D=wo(),console.log("exists")),console.log(D),D}let j;const U=()=>r(4,_="");function Z(){d=this.value,r(3,d)}function H(){C=nl(this),r(12,C)}function K(){$=this.value,r(11,$)}function W(){l=this.value,r(0,l)}const R=()=>r(0,l=o);function I(){j=this.value,r(13,j)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,s=z(l).diff(z(a),"days")*-1),t.$$.dirty&4&&r(14,n=s*-50)},[l,a,s,d,_,g,p,v,y,b,k,$,C,j,n,o,c,S,T,U,Z,H,K,W,R,I]}class Fp extends be{constructor(e){super(),ge(this,e,Up,Lp,pe,{})}}function xp(t){let e,r,s,n;return{c(){e=h("input"),f(e,"class",r="form-control "+t[7]),f(e,"type","text"),f(e,"id","author-name")},m(i,o){E(i,e,o),J(e,t[4]),s||(n=[G(e,"input",t[11]),G(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&f(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),s=!1,De(n)}}}function Hp(t){let e,r,s,n;return{c(){e=h("textarea"),f(e,"class",r="form-control "+t[8]),f(e,"id","author-bio"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,t[5]),s||(n=[G(e,"input",t[13]),G(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&f(e,"class",r),o&32&&J(e,i[5])},d(i){i&&P(e),s=!1,De(n)}}}function zp(t){let e,r,s,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","author-link"),f(e,"class",r="form-control "+t[9])},m(i,o){E(i,e,o),J(e,t[6]),s||(n=[G(e,"input",t[15]),G(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&f(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),s=!1,De(n)}}}function Wp(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","author-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),r||(s=G(e,"change",t[17]),r=!0)},p:F,d(n){n&&P(e),t[18](null),r=!1,s()}}}function Bp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I;return r=new Ze({props:{text:"Add Author"}}),o=new Ie({props:{label:"Author Name:",id:"author-name",$$slots:{default:[xp]},$$scope:{ctx:t}}}),a=new Ie({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Hp]},$$scope:{ctx:t}}}),d=new Ie({props:{label:"Author Link:",id:"author-link",$$slots:{default:[zp]},$$scope:{ctx:t}}}),m=new Ie({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Wp]},$$scope:{ctx:t}}}),{c(){e=h("section"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Preview:",y=w(),b=h("div"),k=h("img"),C=w(),S=h("button"),S.textContent="Remove",A=w(),j=h("div"),U=h("button"),U.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',Z=w(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(k.src,$=t[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+t[2]),f(U,"class","btn btn-success"),f(H,"href","./#/"),f(j,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,V){E(D,e,V),L(r,e,null),u(e,s),u(e,n),u(n,i),L(o,i,null),u(i,l),L(a,i,null),u(i,c),L(d,i,null),u(i,_),L(m,i,null),u(i,g),u(i,p),u(p,v),u(p,y),u(p,b),u(b,k),u(b,C),u(b,S),u(i,A),u(i,j),u(j,U),u(j,Z),u(j,H),W=!0,R||(I=[G(S,"click",t[19]),G(U,"click",t[10])],R=!0)},p(D,[V]){const te={};V&1048720&&(te.$$scope={dirty:V,ctx:D}),o.$set(te);const x={};V&1048864&&(x.$$scope={dirty:V,ctx:D}),a.$set(x);const B={};V&1049152&&(B.$$scope={dirty:V,ctx:D}),d.$set(B);const X={};V&1048579&&(X.$$scope={dirty:V,ctx:D}),m.$set(X),(!W||V&8&&!et(k.src,$=D[3]))&&f(k,"src",$),(!W||V&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){W||(O(r.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(d.$$.fragment,D),O(m.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),W=!0)},o(D){M(r.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(d.$$.fragment,D),M(m.$$.fragment,D),W=!1},d(D){D&&P(e),Y(r),Y(o),Y(a),Y(d),Y(m),R=!1,De(I)}}}function qp(t,e,r){let s,n,i="d-none",o,l,a,c,d,_,m;async function g(){r(7,d=l?"":"is-invalid"),r(8,_=a?"":"is-invalid"),r(9,m=c?"":"is-invalid"),console.log(d,_,m)}function p(){l=this.value,r(4,l)}const v=()=>r(7,d="");function y(){a=this.value,r(5,a)}const b=()=>r(8,_="");function k(){c=this.value,r(6,c)}const $=()=>r(9,m="");function C(){s=this.files,r(0,s)}function S(A){ar[A?"unshift":"push"](()=>{n=A,r(1,n)})}const T=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const A=URL.createObjectURL(s[0]);r(3,o=A)}else r(2,i="d-none")},[s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T]}class Vp extends be{constructor(e){super(),ge(this,e,qp,Bp,pe,{})}}function Gp(t){let e,r,s,n;return{c(){e=h("input"),f(e,"class",r="form-control "+t[7]),f(e,"type","text"),f(e,"id","publisher-name")},m(i,o){E(i,e,o),J(e,t[4]),s||(n=[G(e,"input",t[11]),G(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&f(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),s=!1,De(n)}}}function Jp(t){let e,r,s,n;return{c(){e=h("textarea"),f(e,"class",r="form-control "+t[8]),f(e,"id","publisher-description"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,t[5]),s||(n=[G(e,"input",t[13]),G(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&f(e,"class",r),o&32&&J(e,i[5])},d(i){i&&P(e),s=!1,De(n)}}}function Kp(t){let e,r,s,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","publisher-link"),f(e,"class",r="form-control "+t[9])},m(i,o){E(i,e,o),J(e,t[6]),s||(n=[G(e,"input",t[15]),G(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&f(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),s=!1,De(n)}}}function Zp(t){let e,r,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","publisher-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),r||(s=G(e,"change",t[17]),r=!0)},p:F,d(n){n&&P(e),t[18](null),r=!1,s()}}}function Qp(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W,R,I;return r=new Ze({props:{text:"Add Publisher"}}),o=new Ie({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Gp]},$$scope:{ctx:t}}}),a=new Ie({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[Jp]},$$scope:{ctx:t}}}),d=new Ie({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Kp]},$$scope:{ctx:t}}}),m=new Ie({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[Zp]},$$scope:{ctx:t}}}),{c(){e=h("section"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(d.$$.fragment),_=w(),N(m.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Preview:",y=w(),b=h("div"),k=h("img"),C=w(),S=h("button"),S.textContent="Remove",A=w(),j=h("div"),U=h("button"),U.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',Z=w(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(k.src,$=t[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+t[2]),f(U,"class","btn btn-success"),f(H,"href","./#/"),f(j,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,V){E(D,e,V),L(r,e,null),u(e,s),u(e,n),u(n,i),L(o,i,null),u(i,l),L(a,i,null),u(i,c),L(d,i,null),u(i,_),L(m,i,null),u(i,g),u(i,p),u(p,v),u(p,y),u(p,b),u(b,k),u(b,C),u(b,S),u(i,A),u(i,j),u(j,U),u(j,Z),u(j,H),W=!0,R||(I=[G(S,"click",t[19]),G(U,"click",t[10])],R=!0)},p(D,[V]){const te={};V&1048720&&(te.$$scope={dirty:V,ctx:D}),o.$set(te);const x={};V&1048864&&(x.$$scope={dirty:V,ctx:D}),a.$set(x);const B={};V&1049152&&(B.$$scope={dirty:V,ctx:D}),d.$set(B);const X={};V&1048579&&(X.$$scope={dirty:V,ctx:D}),m.$set(X),(!W||V&8&&!et(k.src,$=D[3]))&&f(k,"src",$),(!W||V&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){W||(O(r.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(d.$$.fragment,D),O(m.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),W=!0)},o(D){M(r.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(d.$$.fragment,D),M(m.$$.fragment,D),W=!1},d(D){D&&P(e),Y(r),Y(o),Y(a),Y(d),Y(m),R=!1,De(I)}}}function Xp(t,e,r){let s,n,i="d-none",o,l,a,c,d,_,m;async function g(){r(7,d=l?"":"is-invalid"),r(8,_=a?"":"is-invalid"),r(9,m=c?"":"is-invalid"),console.log(d,_,m)}function p(){l=this.value,r(4,l)}const v=()=>r(7,d="");function y(){a=this.value,r(5,a)}const b=()=>r(8,_="");function k(){c=this.value,r(6,c)}const $=()=>r(9,m="");function C(){s=this.files,r(0,s)}function S(A){ar[A?"unshift":"push"](()=>{n=A,r(1,n)})}const T=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const A=URL.createObjectURL(s[0]);r(3,o=A)}else r(2,i="d-none")},[s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T]}class eg extends be{constructor(e){super(),ge(this,e,Xp,Qp,pe,{})}}function yo(t,e,r){const s=t.slice();return s[2]=e[r][0],s[3]=e[r][1],s}function tg(t){return{c:F,m:F,p:F,d:F}}function rg(t){let e,r=$e(Object.entries(t[1])),s=[];for(let n=0;n<r.length;n+=1)s[n]=ko(yo(t,r,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=We()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);E(n,e,i)},p(n,i){if(i&1){r=$e(Object.entries(n[1]));let o;for(o=0;o<r.length;o+=1){const l=yo(n,r,o);s[o]?s[o].p(l,i):(s[o]=ko(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&P(e),ze(s,n)}}}function ko(t){let e,r,s,n,i,o,l,a,c,d,_,m,g;return{c(){e=h("tr"),r=h("td"),r.textContent=`${t[3].isbn}`,s=w(),n=h("td"),n.textContent=`${t[3].title}`,i=w(),o=h("td"),o.textContent=`${t[3].available}`,l=w(),a=h("td"),a.textContent=`${t[3].reserved}`,c=w(),d=h("td"),d.textContent=`${t[3].borrowed}`,_=w(),m=h("td"),m.textContent=`${t[3].total}`,g=w(),f(r,"class","d-none d-sm-table-cell"),f(m,"class","fw-bold")},m(p,v){E(p,e,v),u(e,r),u(e,s),u(e,n),u(e,i),u(e,o),u(e,l),u(e,a),u(e,c),u(e,d),u(e,_),u(e,m),u(e,g)},p:F,d(p){p&&P(e)}}}function sg(t){return{c:F,m:F,p:F,d:F}}function ng(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b,k,$,C,S,T,A,j,U,Z,H,K,W;r=new Ze({props:{text:"Books Report"}});let R={ctx:t,current:null,token:null,hasCatch:!1,pending:sg,then:rg,catch:tg,value:1};return Vr(t[0](),R),{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),i.textContent="Filters:",o=w(),l=h("div"),a=h("select"),c=h("option"),c.textContent="Total",d=h("option"),d.textContent="Available",_=h("option"),_.textContent="Reserved",m=h("option"),m.textContent="Borrowed",g=w(),p=h("div"),v=h("select"),y=h("option"),y.textContent="Ascending",b=h("option"),b.textContent="Descending",k=w(),$=h("form"),$.innerHTML='<input type="text" placeholder="Search title..." name="search" class="form-control"/> <button type="submit" class="btn btn-outline-success"><i class="bi bi-search"></i></button>',C=w(),S=h("div"),T=h("table"),A=h("thead"),A.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-none d-sm-table-cell">ISBN</th> <th class="py-3 col-5">Book Title</th> <th class="py-3 col-1 text-bg-success">Available</th> <th class="py-3 col-1 text-bg-secondary">Reserved</th> <th class="py-3 col-1 text-bg-danger">Borrowed</th> <th class="py-3 col-1 text-bg-primary">Total</th></tr>',j=w(),U=h("tbody"),R.block.c(),c.__value="",J(c,c.__value),d.__value="",J(d,d.__value),_.__value="",J(_,_.__value),m.__value="",J(m,m.__value),f(a,"name","filter"),f(a,"class","form-select"),y.__value="",J(y,y.__value),b.__value="",J(b,b.__value),f(v,"name","order"),f(v,"class","form-select"),f($,"class","d-flex ms-3"),f(n,"class","d-flex justify-content-end align-items-center gap-2 mb-3"),f(T,"class","table table-bordered table-striped table-hover text-center align-middle"),f(S,"class","table-responsive"),f(e,"class","container")},m(I,D){E(I,e,D),L(r,e,null),u(e,s),u(e,n),u(n,i),u(n,o),u(n,l),u(l,a),u(a,c),u(a,d),u(a,_),u(a,m),u(n,g),u(n,p),u(p,v),u(v,y),u(v,b),u(n,k),u(n,$),u(e,C),u(e,S),u(S,T),u(T,A),u(T,j),u(T,U),R.block.m(U,R.anchor=null),R.mount=()=>U,R.anchor=null,H=!0,K||(W=G($,"submit",er(ig)),K=!0)},p(I,[D]){t=I,Gr(R,t,D)},i(I){H||(O(r.$$.fragment,I),I&&(Z||Ee(()=>{Z=Ue(e,Fe,{duration:500}),Z.start()})),H=!0)},o(I){M(r.$$.fragment,I),H=!1},d(I){I&&P(e),Y(r),R.block.d(),R.token=null,R=null,K=!1,W()}}}const ig=()=>{};function og(t){async function e(){const{data:r,error:s}=await ae.rpc("getbooksreport");if(s){console.error(s);return}return console.table(r),r}return[e]}class ag extends be{constructor(e){super(),ge(this,e,og,ng,pe,{})}}function lg(t){let e,r,s,n,i,o,l,a,c,d,_,m,g,p,v,y,b;return r=new Ze({props:{text:"Payments Report"}}),{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("div"),i=h("div"),o=h("div"),o.textContent="Overall Total Payment",l=w(),a=h("h1"),a.textContent=`${cg}`,c=w(),d=h("div"),_=h("div"),_.textContent="Total Late Returns",m=w(),g=h("h1"),g.textContent=`${ug}`,p=w(),v=h("table"),v.innerHTML='<thead><tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr></thead> <tbody><tr><td>091238120</td> <td>Francis James E. Salles</td> <td>200</td> <td>4</td></tr></tbody>',f(n,"class","d-flex justify-content-center gap-5 my-3"),f(v,"class","table table-bordered table-striped text-center"),f(e,"class","container")},m(k,$){E(k,e,$),L(r,e,null),u(e,s),u(e,n),u(n,i),u(i,o),u(i,l),u(i,a),u(n,c),u(n,d),u(d,_),u(d,m),u(d,g),u(e,p),u(e,v),b=!0},p:F,i(k){b||(O(r.$$.fragment,k),k&&(y||Ee(()=>{y=Ue(e,Fe,{duration:500}),y.start()})),b=!0)},o(k){M(r.$$.fragment,k),b=!1},d(k){k&&P(e),Y(r)}}}let cg=200,ug=27;class dg extends be{constructor(e){super(),ge(this,e,null,lg,pe,{})}}function $o(t,e,r){const s=t.slice();return s[1]=e[r],s}function So(t){let e,r,s,n,i,o,l,a,c;return{c(){e=h("tr"),r=h("td"),r.textContent=`${t[1].stud_id}`,s=w(),n=h("td"),n.textContent=`${t[1].name}`,i=w(),o=h("td"),o.textContent=`${t[1].reserved}`,l=w(),a=h("td"),a.textContent=`${t[1].borrowed}`,c=w()},m(d,_){E(d,e,_),u(e,r),u(e,s),u(e,n),u(e,i),u(e,o),u(e,l),u(e,a),u(e,c)},p:F,d(d){d&&P(e)}}}function fg(t){let e,r,s,n,i,o,l,a,c;r=new Ze({props:{text:"Student Inventory Report"}});let d=$e(t[0]),_=[];for(let m=0;m<d.length;m+=1)_[m]=So($o(t,d,m));return{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("table"),i=h("thead"),i.innerHTML="<tr><th>Student ID</th> <th>Student Name</th> <th>Reserved</th> <th>Borrowed</th></tr>",o=w(),l=h("tbody");for(let m=0;m<_.length;m+=1)_[m].c();f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(m,g){E(m,e,g),L(r,e,null),u(e,s),u(e,n),u(n,i),u(n,o),u(n,l);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(l,null);c=!0},p(m,[g]){if(g&1){d=$e(m[0]);let p;for(p=0;p<d.length;p+=1){const v=$o(m,d,p);_[p]?_[p].p(v,g):(_[p]=So(v),_[p].c(),_[p].m(l,null))}for(;p<_.length;p+=1)_[p].d(1);_.length=d.length}},i(m){c||(O(r.$$.fragment,m),m&&(a||Ee(()=>{a=Ue(e,Fe,{duration:500}),a.start()})),c=!0)},o(m){M(r.$$.fragment,m),c=!1},d(m){m&&P(e),Y(r),ze(_,m)}}}function hg(t){return[[{stud_id:218791,name:"Kaysha Dela Pena",reserved:2,borrowed:0},{stud_id:218791,name:"Rich James Lozano",reserved:5,borrowed:1},{stud_id:102378,name:"Aaryanah Gayo",reserved:2,borrowed:8},{stud_id:201919,name:"Knicole Bataclan",reserved:0,borrowed:5},{stud_id:201845,name:"Chloey Eusebio",reserved:0,borrowed:1},{stud_id:218581,name:"Tristan Aquino",reserved:2,borrowed:4},{stud_id:201919,name:"Kirsten Torrenueva",reserved:0,borrowed:7},{stud_id:201919,name:"Mark Anthony Gipit",reserved:0,borrowed:1},{stud_id:201919,name:"Raven Baldueza",reserved:0,borrowed:1},{stud_id:201919,name:"Henreizh Nathan Aruta",reserved:5,borrowed:1}]]}class _g extends be{constructor(e){super(),ge(this,e,hg,fg,pe,{})}}function mg(t){let e,r,s,n,i,o;return r=new Ze({props:{text:"Transaction Report"}}),{c(){e=h("main"),N(r.$$.fragment),s=w(),n=h("table"),n.innerHTML="<thead><tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr></thead> <tbody><tr><td>06/09/2024/ 10:18am</td> <td>Francis James Salles</td> <td>Some Student Name</td> <td>Borrowed</td> <td>Name borrowed &quot;Book title&quot;</td></tr></tbody>",f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(l,a){E(l,e,a),L(r,e,null),u(e,s),u(e,n),o=!0},p:F,i(l){o||(O(r.$$.fragment,l),l&&(i||Ee(()=>{i=Ue(e,Fe,{duration:500}),i.start()})),o=!0)},o(l){M(r.$$.fragment,l),o=!1},d(l){l&&P(e),Y(r)}}}class pg extends be{constructor(e){super(),ge(this,e,null,mg,pe,{})}}function gg(t){let e,r;return e=new _n({props:{routes:{"*":bp}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),r=!0},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){M(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function bg(t){let e,r,s,n;return e=new Xo({}),s=new _n({props:{routes:{"/":sp,"/book/:bookID":Va,"/author/:authorID":Ga,"/publisher/:publisherID":Ja,"/search":or,"/search/author":or,"/search/publisher":or,"/add-book":Am,"/add-author":Vp,"/add-publisher":eg,"/borrow":Cp,"/return":Fp,"/book-report":ag,"/payment-report":dg,"/student-report":_g,"/reports":pg,"*":zn}}}),{c(){N(e.$$.fragment),r=w(),N(s.$$.fragment)},m(i,o){L(e,i,o),E(i,r,o),L(s,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(s.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(s.$$.fragment,i),n=!1},d(i){i&&P(r),Y(e,i),Y(s,i)}}}function vg(t){let e,r,s,n;return e=new Xo({}),s=new _n({props:{routes:{"/":G_,"/book/:bookID":Va,"/author/:authorID":Ga,"/publisher/:publisherID":Ja,"/search":or,"/search/author":or,"/search/publisher":or,"*":zn}}}),{c(){N(e.$$.fragment),r=w(),N(s.$$.fragment)},m(i,o){L(e,i,o),E(i,r,o),L(s,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(s.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(s.$$.fragment,i),n=!1},d(i){i&&P(r),Y(e,i),Y(s,i)}}}function wg(t){let e,r,s,n;const i=[vg,bg,gg],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,[c]){let d=e;e=l(a),e!==d&&(Oe(),M(o[d],1,1,()=>{o[d]=null}),Te(),r=o[e],r||(r=o[e]=i[e](a),r.c()),O(r,1),r.m(s.parentNode,s))},i(a){n||(O(r),n=!0)},o(a){M(r),n=!1},d(a){a&&P(s),o[e].d(a)}}}function yg(t,e,r){let s;return Rt.subscribe(n=>{r(0,s=n)}),[s]}class kg extends be{constructor(e){super(),ge(this,e,yg,wg,pe,{})}}new kg({target:document.getElementById("app")})});export default $g();
