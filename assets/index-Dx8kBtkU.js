var dl=Object.defineProperty;var hl=(n,e,t)=>e in n?dl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ml=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Yr=(n,e,t)=>(hl(n,typeof e!="symbol"?e+"":e,t),t);var tb=ml((sb,rr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Z(){}const gs=n=>n;function En(n,e){for(const t in e)n[t]=e[t];return n}function _l(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Wo(n){return n()}function ii(){return Object.create(null)}function ve(n){n.forEach(Wo)}function Un(n){return typeof n=="function"}function $e(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let xn;function Be(n,e){return n===e?!0:(xn||(xn=document.createElement("a")),xn.href=e,n===xn.href)}function pl(n){return Object.keys(n).length===0}function qo(n,...e){if(n==null){for(const r of e)r(void 0);return Z}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function pr(n,e,t){n.$$.on_destroy.push(qo(e,t))}function gr(n,e,t,r){if(n){const s=Bo(n,e,t,r);return n[0](s)}}function Bo(n,e,t,r){return n[1]&&r?En(t.ctx.slice(),n[1](r(e))):t.ctx}function br(n,e,t,r){if(n[2]&&r){const s=n[2](r(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|s[l];return i}return e.dirty|s}return e.dirty}function vr(n,e,t,r,s,i){if(s){const o=Bo(e,t,r,i);n.p(o,s)}}function wr(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function oi(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Vo=typeof window<"u";let xo=Vo?()=>window.performance.now():()=>Date.now(),bs=Vo?n=>requestAnimationFrame(n):Z;const on=new Set;function zo(n){on.forEach(e=>{e.c(n)||(on.delete(e),e.f())}),on.size!==0&&bs(zo)}function Go(n){let e;return on.size===0&&bs(zo),{promise:new Promise(t=>{on.add(e={c:n,f:t})}),abort(){on.delete(e)}}}function c(n,e){n.appendChild(e)}function Jo(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function gl(n){const e=h("style");return e.textContent="/* empty */",bl(Jo(n),e),e.sheet}function bl(n,e){return c(n.head||n,e),e.sheet}function M(n,e,t){n.insertBefore(e,t||null)}function C(n){n.parentNode&&n.parentNode.removeChild(n)}function ze(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function h(n){return document.createElement(n)}function re(n){return document.createTextNode(n)}function w(){return re(" ")}function Ge(){return re("")}function q(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function pt(n){return function(e){return e.preventDefault(),n.call(this,e)}}function u(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function bn(n){return n===""?null:+n}function vl(n){return Array.from(n.childNodes)}function ue(n,e){e=""+e,n.data!==e&&(n.data=e)}function G(n,e){n.value=e??""}function Xe(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function sr(n,e,t){for(let r=0;r<n.options.length;r+=1){const s=n.options[r];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ai(n){const e=n.querySelector(":checked");return e&&e.__value}function Ko(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function ir(n,e){return new n(e)}const or=new Map;let ar=0;function wl(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function yl(n,e){const t={stylesheet:gl(e),rules:{}};return or.set(n,t),t}function Qr(n,e,t,r,s,i,o,l=0){const a=16.666/r;let f=`{
`;for(let y=0;y<=1;y+=a){const v=e+(t-e)*i(y);f+=y*100+`%{${o(v,1-v)}}
`}const d=f+`100% {${o(t,1-t)}}
}`,m=`__svelte_${wl(d)}_${l}`,_=Jo(n),{stylesheet:g,rules:p}=or.get(_)||yl(_,n);p[m]||(p[m]=!0,g.insertRule(`@keyframes ${m} ${d}`,g.cssRules.length));const b=n.style.animation||"";return n.style.animation=`${b?`${b}, `:""}${m} ${r}ms linear ${s}ms 1 both`,ar+=1,m}function Xr(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-r.length;s&&(n.style.animation=r.join(", "),ar-=s,ar||kl())}function kl(){bs(()=>{ar||(or.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&C(e)}),or.clear())})}let jn;function $t(n){jn=n}function Fn(){if(!jn)throw new Error("Function called outside component initialization");return jn}function hn(n){Fn().$$.on_mount.push(n)}function $l(n){Fn().$$.after_update.push(n)}function Sl(n){Fn().$$.on_destroy.push(n)}function Dl(){const n=Fn();return(e,t,{cancelable:r=!1}={})=>{const s=n.$$.callbacks[e];if(s){const i=Ko(e,t,{cancelable:r});return s.slice().forEach(o=>{o.call(n,i)}),!i.defaultPrevented}return!0}}function lr(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const tn=[],ut=[];let an=[];const li=[],Zo=Promise.resolve();let es=!1;function Qo(){es||(es=!0,Zo.then(ws))}function vs(){return Qo(),Zo}function Ie(n){an.push(n)}const Nr=new Set;let Jt=0;function ws(){if(Jt!==0)return;const n=jn;do{try{for(;Jt<tn.length;){const e=tn[Jt];Jt++,$t(e),Tl(e.$$)}}catch(e){throw tn.length=0,Jt=0,e}for($t(null),tn.length=0,Jt=0;ut.length;)ut.pop()();for(let e=0;e<an.length;e+=1){const t=an[e];Nr.has(t)||(Nr.add(t),t())}an.length=0}while(tn.length);for(;li.length;)li.pop()();es=!1,Nr.clear(),$t(n)}function Tl(n){if(n.fragment!==null){n.update(),ve(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ie)}}function Ol(n){const e=[],t=[];an.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),an=e}let $n;function Xo(){return $n||($n=Promise.resolve(),$n.then(()=>{$n=null})),$n}function Cn(n,e,t){n.dispatchEvent(Ko(`${e?"intro":"outro"}${t}`))}const Qn=new Set;let St;function je(){St={r:0,c:[],p:St}}function Ae(){St.r||ve(St.c),St=St.p}function O(n,e){n&&n.i&&(Qn.delete(n),n.i(e))}function P(n,e,t,r){if(n&&n.o){if(Qn.has(n))return;Qn.add(n),St.c.push(()=>{Qn.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const ea={duration:0};function Ve(n,e,t){const r={direction:"in"};let s=e(n,t,r),i=!1,o,l,a=0;function f(){o&&Xr(n,o)}function d(){const{delay:_=0,duration:g=300,easing:p=gs,tick:b=Z,css:y}=s||ea;y&&(o=Qr(n,0,1,g,_,p,y,a++)),b(0,1);const v=xo()+_,S=v+g;l&&l.abort(),i=!0,Ie(()=>Cn(n,!0,"start")),l=Go(k=>{if(i){if(k>=S)return b(1,0),Cn(n,!0,"end"),f(),i=!1;if(k>=v){const D=p((k-v)/g);b(D,1-D)}}return i})}let m=!1;return{start(){m||(m=!0,Xr(n),Un(s)?(s=s(r),Xo().then(d)):d())},invalidate(){m=!1},end(){i&&(f(),i=!1)}}}function mn(n,e,t,r){let i=e(n,t,{direction:"both"}),o=r?0:1,l=null,a=null,f=null,d;function m(){f&&Xr(n,f)}function _(p,b){const y=p.b-o;return b*=Math.abs(y),{a:o,b:p.b,d:y,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:y=300,easing:v=gs,tick:S=Z,css:k}=i||ea,D={start:xo()+b,b:p};p||(D.group=St,St.r+=1),"inert"in n&&(p?d!==void 0&&(n.inert=d):(d=n.inert,n.inert=!0)),l||a?a=D:(k&&(m(),f=Qr(n,o,p,y,b,v,k)),p&&S(0,1),l=_(D,y),Ie(()=>Cn(n,p,"start")),Go($=>{if(a&&$>a.start&&(l=_(a,y),a=null,Cn(n,l.b,"start"),k&&(m(),f=Qr(n,o,l.b,l.duration,0,v,i.css))),l){if($>=l.end)S(o=l.b,1-o),Cn(n,l.b,"end"),a||(l.b?m():--l.group.r||ve(l.group.c)),l=null;else if($>=l.start){const T=$-l.start;o=l.a+l.d*v(T/l.duration),S(o,1-o)}}return!!(l||a)}))}return{run(p){Un(i)?Xo().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){m(),l=a=null}}}function Ur(n,e){const t=e.token={};function r(s,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const f=s&&(e.current=s)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((m,_)=>{_!==i&&m&&(je(),P(m,1,1,()=>{e.blocks[_]===m&&(e.blocks[_]=null)}),Ae())}):e.block.d(1),f.c(),O(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[i]=f),d&&ws()}if(_l(n)){const s=Fn();if(n.then(i=>{$t(s),r(e.then,1,e.value,i),$t(null)},i=>{if($t(s),r(e.catch,2,e.error,i),$t(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Fr(n,e,t){const r=e.slice(),{resolved:s}=n;n.current===n.then&&(r[n.value]=s),n.current===n.catch&&(r[n.error]=s),n.block.p(r,t)}function Ce(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function cr(n,e){const t={},r={},s={$$scope:1};let i=n.length;for(;i--;){const o=n[i],l=e[i];if(l){for(const a in o)a in l||(r[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);n[i]=l}else for(const a in o)s[a]=1}for(const o in r)o in t||(t[o]=void 0);return t}function ur(n){return typeof n=="object"&&n!==null?n:{}}function x(n){n&&n.c()}function B(n,e,t){const{fragment:r,after_update:s}=n.$$;r&&r.m(e,t),Ie(()=>{const i=n.$$.on_mount.map(Wo).filter(Un);n.$$.on_destroy?n.$$.on_destroy.push(...i):ve(i),n.$$.on_mount=[]}),s.forEach(Ie)}function V(n,e){const t=n.$$;t.fragment!==null&&(Ol(t.after_update),ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cl(n,e){n.$$.dirty[0]===-1&&(tn.push(n),Qo(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function De(n,e,t,r,s,i,o=null,l=[-1]){const a=jn;$t(n);const f=n.$$={fragment:null,ctx:[],props:i,update:Z,not_equal:s,bound:ii(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ii(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(n,e.props||{},(m,_,...g)=>{const p=g.length?g[0]:_;return f.ctx&&s(f.ctx[m],f.ctx[m]=p)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](p),d&&Cl(n,m)),_}):[],f.update(),d=!0,ve(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const m=vl(e.target);f.fragment&&f.fragment.l(m),m.forEach(C)}else f.fragment&&f.fragment.c();e.intro&&O(n.$$.fragment),B(n,e.target,e.anchor),ws()}$t(a)}class Te{constructor(){Yr(this,"$$");Yr(this,"$$set")}$destroy(){V(this,1),this.$destroy=Z}$on(e,t){if(!Un(t))return Z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!pl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ml="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ml);const Kt=[];function ta(n,e){return{subscribe:yr(n,e).subscribe}}function yr(n,e=Z){let t;const r=new Set;function s(l){if($e(n,l)&&(n=l,t)){const a=!Kt.length;for(const f of r)f[1](),Kt.push(f,n);if(a){for(let f=0;f<Kt.length;f+=2)Kt[f][0](Kt[f+1]);Kt.length=0}}}function i(l){s(l(n))}function o(l,a=Z){const f=[l,a];return r.add(f),r.size===1&&(t=e(s,i)||Z),l(n),()=>{r.delete(f),r.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function na(n,e,t){const r=!Array.isArray(n),s=r?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return ta(t,(o,l)=>{let a=!1;const f=[];let d=0,m=Z;const _=()=>{if(d)return;m();const p=e(r?f[0]:f,o,l);i?o(p):m=Un(p)?p:Z},g=s.map((p,b)=>qo(p,y=>{f[b]=y,d&=~(1<<b),a&&_()},()=>{d|=1<<b}));return a=!0,_(),function(){ve(g),m(),a=!1}})}const Nt=yr(localStorage.getItem("accType")),Xn=yr(localStorage.getItem("user_id"));window.addEventListener("storage",function(n){let e;Xn.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Nt.set(""),Xn.set("")):(Xn.set(localStorage.getItem("user_id")),Nt.set(localStorage.getItem("accType"))))});function Pl(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,s,i,o=[],l="",a=n.split("/");for(a[0]||a.shift();s=a.shift();)t=s[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Rl(n){let e,t,r;const s=[n[2]];var i=n[0];function o(l,a){let f={};for(let d=0;d<s.length;d+=1)f=En(f,s[d]);return a!==void 0&&a&4&&(f=En(f,cr(s,[ur(l[2])]))),{props:f}}return i&&(e=ir(i,o(n)),e.$on("routeEvent",n[7])),{c(){e&&x(e.$$.fragment),t=Ge()},m(l,a){e&&B(e,l,a),M(l,t,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){je();const f=e;P(f.$$.fragment,1,0,()=>{V(f,1)}),Ae()}i?(e=ir(i,o(l,a)),e.$on("routeEvent",l[7]),x(e.$$.fragment),O(e.$$.fragment,1),B(e,t.parentNode,t)):e=null}else if(i){const f=a&4?cr(s,[ur(l[2])]):{};e.$set(f)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&P(e.$$.fragment,l),r=!1},d(l){l&&C(t),e&&V(e,l)}}}function El(n){let e,t,r;const s=[{params:n[1]},n[2]];var i=n[0];function o(l,a){let f={};for(let d=0;d<s.length;d+=1)f=En(f,s[d]);return a!==void 0&&a&6&&(f=En(f,cr(s,[a&2&&{params:l[1]},a&4&&ur(l[2])]))),{props:f}}return i&&(e=ir(i,o(n)),e.$on("routeEvent",n[6])),{c(){e&&x(e.$$.fragment),t=Ge()},m(l,a){e&&B(e,l,a),M(l,t,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){je();const f=e;P(f.$$.fragment,1,0,()=>{V(f,1)}),Ae()}i?(e=ir(i,o(l,a)),e.$on("routeEvent",l[6]),x(e.$$.fragment),O(e.$$.fragment,1),B(e,t.parentNode,t)):e=null}else if(i){const f=a&6?cr(s,[a&2&&{params:l[1]},a&4&&ur(l[2])]):{};e.$set(f)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&P(e.$$.fragment,l),r=!1},d(l){l&&C(t),e&&V(e,l)}}}function jl(n){let e,t,r,s;const i=[El,Rl],o=[];function l(a,f){return a[1]?0:1}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,[f]){let d=e;e=l(a),e===d?o[e].p(a,f):(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function ci(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let r="";return t>-1&&(r=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:r}}const ys=ta(null,function(e){e(ci());const t=()=>{e(ci())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),Al=na(ys,n=>n.location),ks=na(ys,n=>n.querystring),ui=yr(void 0);async function ts(){await vs(),window.history.back()}async function ns(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await vs();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function Il(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Ll(n,e,t){let{routes:r={}}=e,{prefix:s=""}=e,{restoreScrollState:i=!1}=e;class o{constructor($,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!$||typeof $=="string"&&($.length<1||$.charAt(0)!="/"&&$.charAt(0)!="*")||typeof $=="object"&&!($ instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:R,keys:E}=Pl($);this.path=$,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=R,this._keys=E}match($){if(s){if(typeof s=="string")if($.startsWith(s))$=$.substr(s.length)||"/";else return null;else if(s instanceof RegExp){const I=$.match(s);if(I&&I[0])$=$.substr(I[0].length)||"/";else return null}}const T=this._pattern.exec($);if(T===null)return null;if(this._keys===!1)return T;const R={};let E=0;for(;E<this._keys.length;){try{R[this._keys[E]]=decodeURIComponent(T[E+1]||"")||null}catch{R[this._keys[E]]=null}E++}return R}async checkConditions($){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T]($))return!1;return!0}}const l=[];r instanceof Map?r.forEach((D,$)=>{l.push(new o($,D))}):Object.keys(r).forEach(D=>{l.push(new o(D,r[D]))});let a=null,f=null,d={};const m=Dl();async function _(D,$){await vs(),m(D,$)}let g=null,p=null;i&&(p=D=>{D.state&&(D.state.__svelte_spa_router_scrollY||D.state.__svelte_spa_router_scrollX)?g=D.state:g=null},window.addEventListener("popstate",p),$l(()=>{Il(g)}));let b=null,y=null;const v=ys.subscribe(async D=>{b=D;let $=0;for(;$<l.length;){const T=l[$].match(D.location);if(!T){$++;continue}const R={route:l[$].path,location:D.location,querystring:D.querystring,userData:l[$].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await l[$].checkConditions(R)){t(0,a=null),y=null,_("conditionsFailed",R);return}_("routeLoading",Object.assign({},R));const E=l[$].component;if(y!=E){E.loading?(t(0,a=E.loading),y=E,t(1,f=E.loadingParams),t(2,d={}),_("routeLoaded",Object.assign({},R,{component:a,name:a.name,params:f}))):(t(0,a=null),y=null);const I=await E();if(D!=b)return;t(0,a=I&&I.default||I),y=E}T&&typeof T=="object"&&Object.keys(T).length?t(1,f=T):t(1,f=null),t(2,d=l[$].props),_("routeLoaded",Object.assign({},R,{component:a,name:a.name,params:f})).then(()=>{ui.set(f)});return}t(0,a=null),y=null,ui.set(void 0)});Sl(()=>{v(),p&&window.removeEventListener("popstate",p)});function S(D){lr.call(this,n,D)}function k(D){lr.call(this,n,D)}return n.$$set=D=>{"routes"in D&&t(3,r=D.routes),"prefix"in D&&t(4,s=D.prefix),"restoreScrollState"in D&&t(5,i=D.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,f,d,r,s,i,S,k]}class $s extends Te{constructor(e){super(),De(this,e,Ll,jl,$e,{routes:3,prefix:4,restoreScrollState:5})}}const Yl="modulepreload",Nl=function(n){return"/library/"+n},fi={},_n=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(t.map(l=>{if(l=Nl(l),l in fi)return;fi[l]=!0;const a=l.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":Yl,a||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((m,_)=>{d.addEventListener("load",m),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Ul=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>_n(()=>Promise.resolve().then(()=>Hn),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ss extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Fl extends Ss{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hl extends Ss{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Wl extends Ss{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rs;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(rs||(rs={}));var ql=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};class Bl{constructor(e,{headers:t={},customFetch:r,region:s=rs.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Ul(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ql(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let f;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(p=>{throw new Fl(p)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new Hl(d);if(!d.ok)throw new Wl(d);let _=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield d.json():_==="application/octet-stream"?g=yield d.blob():_==="text/event-stream"?g=d:_==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var Vl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pn=Vl();const xl=pn.fetch,Ds=pn.fetch.bind(pn),ra=pn.Headers,zl=pn.Request,Gl=pn.Response,Hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ra,Request:zl,Response:Gl,default:Ds,fetch:xl},Symbol.toStringTag,{value:"Module"}));class Jl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Kl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ds:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let f=null,d=null,m=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(f={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,_=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{f=JSON.parse(b),Array.isArray(f)&&i.status===404&&(d=[],f=null,_=200,g="OK")}catch{i.status===404&&b===""?(_=204,g="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((a=f==null?void 0:f.details)===null||a===void 0)&&a.includes("0 rows"))&&(f=null,_=200,g="OK"),f&&this.shouldThrowOnError)throw new Jl(f)}return{error:f,data:d,count:m,status:_,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class Zl extends Kl{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${f}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class nn extends Zl{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class Ql{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new nn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new nn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(a.length>0){const f=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new nn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new nn({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new nn({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Xl="1.15.2",ec={"X-Client-Info":`postgrest-js/${Xl}`};class Ts{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},ec),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Ql(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ts(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{l.searchParams.append(d,m)})):(o="POST",a=t);const f=Object.assign({},this.headers);return i&&(f.Prefer=`count=${i}`),new nn({method:o,url:l,headers:f,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const tc="2.9.5",nc={"X-Client-Info":`realtime-js/${tc}`},rc="1.0.0",sa=1e4,sc=1e3;var ln;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ln||(ln={}));var tt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(tt||(tt={}));var lt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(lt||(lt={}));var ss;(function(n){n.websocket="websocket"})(ss||(ss={}));var Bt;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Bt||(Bt={}));class ia{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ic{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const a=r.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:f}}}class Hr{constructor(e,t,r={},s=sa){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var di;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(di||(di={}));class Mn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Mn.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(f,d)=>{o[f]||(a[f]=d)}),this.map(o,(f,d)=>{const m=i[f];if(m){const _=d.map(y=>y.presence_ref),g=m.map(y=>y.presence_ref),p=d.filter(y=>g.indexOf(y.presence_ref)<0),b=m.filter(y=>_.indexOf(y.presence_ref)<0);p.length>0&&(l[f]=p),b.length>0&&(a[f]=b)}else l[f]=d}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var f;const d=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(a),d.length>0){const m=e[l].map(g=>g.presence_ref),_=d.filter(g=>m.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,d,a)}),this.map(o,(l,a)=>{let f=e[l];if(!f)return;const d=a.map(m=>m.presence_ref);f=f.filter(m=>d.indexOf(m.presence_ref)<0),e[l]=f,s(l,f,a),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ye;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ye||(Ye={}));const hi=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=oc(o,n,e,s),i),{})},oc=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?oa(i,o):is(o)},oa=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return uc(e,t)}switch(n){case Ye.bool:return ac(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return lc(e);case Ye.json:case Ye.jsonb:return cc(e);case Ye.timestamp:return fc(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return is(e);default:return is(e)}},is=n=>n,ac=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},lc=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},cc=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},uc=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>oa(e,l))}return n},fc=n=>typeof n=="string"?n.replace(" ","T"):n;var mi;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(mi||(mi={}));var _i;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(_i||(_i={}));var pi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class Os{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Hr(this,lt.join,this.params,this.timeout),this.rejoinTimer=new ia(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Mn(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(f=>e&&e("CHANNEL_ERROR",f)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:f})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),f===void 0){e&&e("SUBSCRIBED");return}else{const m=this.bindings.postgres_changes,_=(d=m==null?void 0:m.length)!==null&&d!==void 0?d:0,g=[];for(let p=0;p<_;p++){const b=m[p],{filter:{event:y,schema:v,table:S,filter:k}}=b,D=f&&f[p];if(D&&D.event===y&&D.schema===v&&D.table===S&&D.filter===k)g.push(Object.assign(Object.assign({},b),{id:D.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",f=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Hr(this,lt.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Hr(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:f,join:d}=lt;if(r&&[l,a,f,d].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,b,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(b=g.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(_,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,y,v,S,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const D=g.id,$=(p=g.filter)===null||p===void 0?void 0:p.event;return D&&((b=t.ids)===null||b===void 0?void 0:b.includes(D))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const D=(S=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return D==="*"||D===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:b,table:y,commit_timestamp:v,type:S,errors:k}=p;_=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:v,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Os.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lt.close,{},e)}_onError(e){this._on(lt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=hi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=hi(e.columns,e.old_record)),t}}const dc=()=>{},hc=typeof WebSocket<"u";class mc{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=nc,this.params={},this.timeout=sa,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dc,this.conn=null,this.sendBuffer=[],this.serializer=new ic,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>_n(()=>Promise.resolve().then(()=>Hn),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ss.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ia(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(hc){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new _c(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),_n(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ln.connecting:return Bt.Connecting;case ln.open:return Bt.Open;case ln.closing:return Bt.Closing;default:return Bt.Closed}}isConnected(){return this.connectionState()===Bt.Open}channel(e,t={config:{}}){const r=new Os(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(lt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rc}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(lt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(sc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class _c{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ln.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Cs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Je(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class pc extends Cs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gi extends Cs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var gc=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};const aa=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>_n(()=>Promise.resolve().then(()=>Hn),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},bc=()=>gc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _n(()=>Promise.resolve().then(()=>Hn),void 0)).Response:Response});var vn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};const Wr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vc=(n,e)=>vn(void 0,void 0,void 0,function*(){const t=yield bc();n instanceof t?n.json().then(r=>{e(new pc(Wr(r),n.status||500))}).catch(r=>{e(new gi(Wr(r),r))}):e(new gi(Wr(n),n))}),wc=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function kr(n,e,t,r,s,i){return vn(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,wc(e,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>vc(a,l))})})}function os(n,e,t,r){return vn(this,void 0,void 0,function*(){return kr(n,"GET",e,t,r)})}function jt(n,e,t,r,s){return vn(this,void 0,void 0,function*(){return kr(n,"POST",e,r,s,t)})}function yc(n,e,t,r,s){return vn(this,void 0,void 0,function*(){return kr(n,"PUT",e,r,s,t)})}function la(n,e,t,r,s){return vn(this,void 0,void 0,function*(){return kr(n,"DELETE",e,r,s,t)})}var rt=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};const kc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $c{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=aa(s)}uploadOrUpdate(e,t,r,s){return rt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bi),s),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),f=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield d.json();return d.ok?{data:{path:a,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Je(i))return{data:null,error:i};throw i}})}upload(e,t,r){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return rt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const f=Object.assign({upsert:bi.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",f.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",f.cacheControl)):(a=r,d["cache-control"]=`max-age=${f.cacheControl}`,d["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),_=yield m.json();return m.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(a){if(Je(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return rt(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield jt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),i=s.searchParams.get("token");if(!i)throw new Cs("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}update(e,t,r){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return rt(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}copy(e,t){return rt(this,void 0,void 0,function*(){try{return{data:{path:(yield jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield jt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return rt(this,void 0,void 0,function*(){try{const s=yield jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}download(e,t){return rt(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield os(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Je(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&s.push(a);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(e){return rt(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}list(e,t,r){return rt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},kc),t),{prefix:e||""});return{data:yield jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Sc="2.5.5",Dc={"X-Client-Info":`storage-js/${Sc}`};var Zt=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};class Tc{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dc),t),this.fetch=aa(r)}listBuckets(){return Zt(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Je(e))return{data:null,error:e};throw e}})}getBucket(e){return Zt(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Zt(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Zt(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Zt(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Zt(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}}class Oc extends Tc{constructor(e,t={},r){super(e,t,r)}from(e){return new $c(this.url,this.headers,e,this.fetch)}}const Cc="2.43.2";let On="";typeof Deno<"u"?On="deno":typeof document<"u"?On="web":typeof navigator<"u"&&navigator.product==="ReactNative"?On="react-native":On="node";const Mc={"X-Client-Info":`supabase-js-${On}/${Cc}`},Pc={headers:Mc},Rc={schema:"public"},Ec={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jc={};var Ac=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};const Ic=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ds:e=fetch,(...t)=>e(...t)},Lc=()=>typeof Headers>"u"?ra:Headers,Yc=(n,e,t)=>{const r=Ic(t),s=Lc();return(i,o)=>Ac(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:n;let f=new s(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:f}))})};function Nc(n){return n.replace(/\/$/,"")}function Uc(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:l,realtime:a,global:f}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),s),global:Object.assign(Object.assign({},f),i)}}const ca="2.64.2",Fc="http://localhost:9999",Hc="supabase.auth.token",Wc={"X-Client-Info":`gotrue-js/${ca}`},vi=10,as="X-Supabase-Api-Version",ua={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function qc(n){return Math.round(Date.now()/1e3)+n}function Bc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const at=()=>typeof document<"u",Ft={tested:!1,writable:!1},Pn=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ft.tested)return Ft.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ft.tested=!0,Ft.writable=!0}catch{Ft.tested=!0,Ft.writable=!1}return Ft.writable};function qr(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const fa=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>_n(()=>Promise.resolve().then(()=>Hn),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Vc=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",da=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},zn=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Br=async(n,e)=>{await n.removeItem(e)};function xc(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,o,l,a,f,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),l=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),f=e.indexOf(n.charAt(d++)),r=o<<2|l>>4,s=(l&15)<<4|a>>2,i=(a&3)<<6|f,t=t+String.fromCharCode(r),a!=64&&s!=0&&(t=t+String.fromCharCode(s)),f!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class $r{constructor(){this.promise=new $r.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$r.promiseConstructor=Promise;function wi(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(xc(r))}async function zc(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Gc(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Jc(n){return("0"+n.toString(16)).substr(-2)}function Kc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Jc).join("")}async function Zc(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Qc(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xc(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Zc(n);return Qc(t)}async function Qt(n,e,t=!1){const r=Kc();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await da(n,`${e}-code-verifier`,s);const i=await Xc(r);return[i,r===i?"plain":"s256"]}const eu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tu(n){const e=n.headers.get(as);if(!e||!e.match(eu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ms extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ye(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class nu extends Ms{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function ru(n){return ye(n)&&n.name==="AuthApiError"}class ha extends Ms{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class zt extends Ms{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Ht extends zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Vr extends zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gn extends zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jn extends zt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yi extends zt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ls extends zt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function xr(n){return ye(n)&&n.name==="AuthRetryableFetchError"}class ki extends zt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var su=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const qt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),iu=[502,503,504];async function $i(n){var e;if(!Vc(n))throw new ls(qt(n),0);if(iu.includes(n.status))throw new ls(qt(n),n.status);let t;try{t=await n.json()}catch(i){throw new ha(qt(i),i)}let r;const s=tu(n);if(s&&s.getTime()>=ua["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ki(qt(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ki(qt(t),n.status,t.weak_password.reasons);throw new nu(qt(t),n.status||500,r)}const ou=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Se(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[as]||(i[as]=ua["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await au(n,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function au(n,e,t,r,s,i){const o=ou(e,r,s,i);let l;try{l=await n(t,Object.assign({},o))}catch(a){throw console.error(a),new ls(qt(a),0)}if(l.ok||await $i(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await $i(a)}}function Et(n){var e;let t=null;fu(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=qc(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Si(n){const e=Et(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function At(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function lu(n){return{data:n,error:null}}function cu(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=su(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function uu(n){return n}function fu(n){return n.access_token&&n.refresh_token&&n.expires_in}var du=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class hu{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=fa(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=du(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cu,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ye(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(t){if(ye(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,l,a;try{const f={nextPage:null,lastPage:0,total:0},d=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:uu});if(d.error)throw d.error;const m=await d.json(),_=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);f[`${y}Page`]=b}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(ye(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(t){if(ye(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:At})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ye(t))return{data:null,error:t};throw t}}}const mu={getItem:n=>Pn()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Pn()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Pn()&&globalThis.localStorage.removeItem(n)}};function Di(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function _u(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xt={debug:!!(globalThis&&Pn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ma extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pu extends ma{}async function gu(n,e,t){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new pu(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}_u();const bu={url:Fc,storageKey:Hc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Sn=30*1e3,Ti=3;async function Oi(n,e,t){return await t()}class An{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=An.nextInstanceID,An.nextInstanceID+=1,this.instanceID>0&&at()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},bu),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hu({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fa(s.fetch),this.lock=s.lock||Oi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:at()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=gu:this.lock=Oi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pn()?this.storage=mu:(this.memoryStorage={},this.storage=Di(this.memoryStorage)):(this.memoryStorage={},this.storage=Di(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ca}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=at()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ye(e)?{error:e}:{error:new ha("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{await this._removeSession();const i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Et}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(ye(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{await this._removeSession();let i;if("email"in e){const{email:d,password:m,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Qt(this.storage,this.storageKey)),i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:d,password:m,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:Et})}else if("phone"in e){const{phone:d,password:m,options:_}=e;i=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Et})}else throw new Gn("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(ye(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Si})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Si})}else throw new Gn("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Vr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ye(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await zn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/"),{data:i,error:o}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Et});return await Br(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Vr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,l=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Et}),{data:a,error:f}=l;return f?{data:{user:null,session:null},error:f}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Vr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:f})}catch(t){if(ye(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let f=null,d=null;this.flowType==="pkce"&&([f,d]=await Qt(this.storage,this.storageKey));const{error:m}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:f,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:a}=e,{data:f,error:d}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:d}}throw new Gn("You must provide either an email or phone number.")}catch(l){if(ye(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Et});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,f=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Qt(this.storage,this.storageKey)),await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:lu})}catch(i){if(ye(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ht;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ye(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Gn("You must provide either an email or phone number and a type")}catch(t){if(ye(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,f,d){return!o&&f==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,f,d)}})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async t=>{var r,s,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:At})})}catch(t){if(ye(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ht;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Qt(this.storage,this.storageKey));const{data:f,error:d}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:At});if(d)throw d;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return wi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ht;const t=Date.now()/1e3;let r=t,s=!0,i=null;const o=wi(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ye(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ht;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ye(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!at())throw new Jn("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Jn("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new yi("Not a valid PKCE flow url.");const t=qr(window.location.href);if(e){if(!t.code)throw new yi("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:S.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Jn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:f}=t;if(!i||!l||!o||!f)throw new Jn("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let _=d+m;a&&(_=parseInt(a));const g=_-d;g*1e3<=Sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const p=_-m;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,d);const{data:b,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:_,refresh_token:o,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(t){if(ye(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=qr(window.location.href);return!!(at()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=qr(window.location.href),t=await zn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(ru(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Br(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Bc(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Qt(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ye(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ye(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,f,d;const{data:m,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return at()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ye(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Gc(async s=>(s>0&&await zc(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&xr(i)&&Date.now()+o-r<Sn})}catch(r){if(this._debug(t,"error",r),ye(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),at()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await zn(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+vi;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${vi}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),xr(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $r;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ye(i)){const o={session:null,error:i};return xr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await da(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Br(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Sn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sn}ms, refresh threshold is ${Ti} ticks`),s<=Ti&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ma)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(ye(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ye(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}An.nextInstanceID=0;const vu=An;class wu extends vu{constructor(e){super(e)}}var yu=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(r.next(d))}catch(m){o(m)}}function a(d){try{f(r.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((r=r.apply(n,e||[])).next())})};class ku{constructor(e,t,r){var s,i,o,l,a,f,d,m;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const _=Nc(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Rc,realtime:jc,auth:Object.assign(Object.assign({},Ec),{storageKey:g}),global:Pc},b=Uc(r??{},p);this.storageKey=(i=(s=b.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(f=b.global)===null||f===void 0?void 0:f.fetch),this.fetch=Yc(t,this._getAccessToken.bind(this),(d=b.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new Ts(`${_}/rest/v1`,{headers:this.headers,schema:(m=b.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Bl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Oc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yu(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,debug:l},a,f){var d;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wu({url:this.authUrl,headers:Object.assign(Object.assign({},m),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,debug:l,fetch:f,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new mc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $u=(n,e,t)=>new ku(n,e,t),ce=$u("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function Ci(n){let e,t,r;return{c(){e=h("a"),e.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',t=w(),r=h("a"),r.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',u(e,"class","nav-link svelte-kdejnj"),u(e,"href","./#/borrow"),u(r,"class","nav-link svelte-kdejnj"),u(r,"href","./#/return")},m(s,i){M(s,e,i),M(s,t,i),M(s,r,i)},d(s){s&&(C(e),C(t),C(r))}}}function Su(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J=n[0]=="staff"&&Ci();return{c(){e=h("nav"),t=h("div"),r=h("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-xl-inline d-none">CTADVDBL Project</small>`,s=w(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=w(),l=h("div"),a=h("div"),f=h("a"),f.innerHTML='<i class="bi bi-house-door"></i> Home',d=w(),m=h("a"),m.innerHTML='<i class="bi bi-journal"></i> Books',_=w(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=w(),b=h("a"),b.innerHTML='<i class="bi bi-building"></i> Publishers',y=w(),J&&J.c(),v=w(),S=h("li"),k=h("a"),D=h("i"),$=w(),T=re(n[1]),R=w(),E=h("ul"),I=h("li"),I.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Profile</a>',Y=w(),N=h("li"),N.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Settings</a>',z=w(),ne=h("li"),ne.innerHTML='<hr class="dropdown-divider"/>',j=w(),Q=h("li"),A=h("a"),A.textContent="Log Out",U=w(),F=h("button"),L=h("span"),u(r,"class","navbar-brand m-0 px-2 svelte-kdejnj"),u(r,"href","./#/"),u(i,"class","navbar-toggler"),u(i,"type","button"),u(i,"data-bs-toggle","collapse"),u(i,"data-bs-target","#navbarContent"),u(f,"class","nav-link svelte-kdejnj"),u(f,"href","./#/"),u(m,"class","nav-link svelte-kdejnj"),u(m,"href","./#/search"),u(g,"class","nav-link svelte-kdejnj"),u(g,"href","./#/search/author"),u(b,"class","nav-link svelte-kdejnj"),u(b,"href","./#/search/publisher"),u(D,"class","bi bi-person-fill"),u(k,"class","nav-link dropdown-toggle svelte-kdejnj"),u(k,"href","#"),u(k,"role","button"),u(k,"data-bs-toggle","dropdown"),u(k,"aria-expanded","false"),u(A,"class","dropdown-item text-danger svelte-kdejnj"),u(A,"href","./#/"),u(E,"class","dropdown-menu"),u(S,"class","nav-item dropdown"),u(L,"class",W="bi bi-"+n[2]+" svelte-kdejnj"),u(F,"title","Switch theme"),u(F,"class","px-1 border-0 bg-transparent nav-link svelte-kdejnj"),u(a,"class","navbar-nav ms-auto text-center svelte-kdejnj"),u(l,"class","collapse navbar-collapse"),u(l,"id","navbarContent"),u(t,"class","container px-4 fw-semibold"),u(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow d-print-none")},m(te,X){M(te,e,X),c(e,t),c(t,r),c(t,s),c(t,i),c(t,o),c(t,l),c(l,a),c(a,f),c(a,d),c(a,m),c(a,_),c(a,g),c(a,p),c(a,b),c(a,y),J&&J.m(a,null),c(a,v),c(a,S),c(S,k),c(k,D),c(k,$),c(k,T),c(S,R),c(S,E),c(E,I),c(E,Y),c(E,N),c(E,z),c(E,ne),c(E,j),c(E,Q),c(Q,A),c(a,U),c(a,F),c(F,L),H||(oe=[q(A,"click",n[4]),q(F,"click",n[3])],H=!0)},p(te,[X]){te[0]=="staff"?J||(J=Ci(),J.c(),J.m(a,v)):J&&(J.d(1),J=null),X&2&&ue(T,te[1]),X&4&&W!==(W="bi bi-"+te[2]+" svelte-kdejnj")&&u(L,"class",W)},i:Z,o:Z,d(te){te&&C(e),J&&J.d(),H=!1,ve(oe)}}}function Du(n,e,t){let r,s,i=localStorage.getItem("user_id");Nt.subscribe(m=>t(0,s=m)),l();let o="";async function l(){const{data:m,error:_}=await ce.from("account_details").select("lname").eq("user_id",i).single();_&&console.error(_),console.log(i,m),t(1,o=m.lname)}let a=localStorage.getItem("theme")||"light";function f(){t(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function d(){Nt.set(""),Xn.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return n.$$.update=()=>{n.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),n.$$.dirty&32&&t(2,r=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[s,o,r,f,d,a]}class _a extends Te{constructor(e){super(),De(this,e,Du,Su,$e,{})}}function Tu(n){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,r){M(t,e,r)},p:Z,i:Z,o:Z,d(t){t&&C(e)}}}class Ou extends Te{constructor(e){super(),De(this,e,null,Tu,$e,{})}}function Cu(n){let e,t,r,s;return{c(){e=h("img"),Be(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+n[0]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(i,o){M(i,e,o),r||(s=q(e,"error",n[4]),r=!0)},p(i,o){o&1&&!Be(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[0]+".jpg")&&u(e,"src",t)},d(i){i&&C(e),r=!1,s()}}}function Mu(n){let e,t;return{c(){e=h("img"),Be(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(r,s){M(r,e,s)},p:Z,d(r){r&&C(e)}}}function Pu(n){let e,t,r,s,i,o,l,a,f,d,m,_;function g(y,v){return y[3]?Mu:Cu}let p=g(n),b=p(n);return{c(){e=h("div"),b.c(),t=w(),r=h("div"),s=h("h5"),i=h("a"),o=re(n[1]),a=w(),f=h("small"),d=h("i"),m=w(),_=re(n[2]),u(i,"class","stretched-link svelte-1a99e4f"),u(i,"href",l="./#/book/"+n[0]),u(s,"class","card-title"),u(d,"class","bi bi-person"),u(f,"class","card-text"),u(r,"class","card-body"),u(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(y,v){M(y,e,v),b.m(e,null),c(e,t),c(e,r),c(r,s),c(s,i),c(i,o),c(r,a),c(r,f),c(f,d),c(f,m),c(f,_)},p(y,[v]){p===(p=g(y))&&b?b.p(y,v):(b.d(1),b=p(y),b&&(b.c(),b.m(e,t))),v&2&&ue(o,y[1]),v&1&&l!==(l="./#/book/"+y[0])&&u(i,"href",l),v&4&&ue(_,y[2])},i:Z,o:Z,d(y){y&&C(e),b.d()}}}function Ru(n,e,t){let{id:r=0}=e,{title:s}=e,{author:i}=e,o=!1;const l=()=>t(3,o=!0);return n.$$set=a=>{"id"in a&&t(0,r=a.id),"title"in a&&t(1,s=a.title),"author"in a&&t(2,i=a.author)},[r,s,i,o,l]}class Sr extends Te{constructor(e){super(),De(this,e,Ru,Pu,$e,{id:0,title:1,author:2})}}function Mi(n){let e,t,r,s,i,o,l;return{c(){e=h("div"),t=h("a"),r=h("button"),s=re(n[3]),i=w(),o=h("i"),u(o,"class","bi bi-arrow-right"),u(r,"class","btn btn-outline-primary btn-sm"),u(t,"href",l="./#/"+n[2]),u(e,"class","align-middle align-self-center")},m(a,f){M(a,e,f),c(e,t),c(t,r),c(r,s),c(r,i),c(r,o)},p(a,f){f&8&&ue(s,a[3]),f&4&&l!==(l="./#/"+a[2])&&u(t,"href",l)},d(a){a&&C(e)}}}function Eu(n){let e,t,r,s,i,o,l,a,f,d,m=n[2]!==""&&Mi(n);const _=n[5].default,g=gr(_,n,n[4],null);return{c(){e=h("section"),t=h("div"),r=h("h4"),s=h("i"),o=w(),l=re(n[0]),a=w(),m&&m.c(),f=w(),g&&g.c(),u(s,"class",i="bi bi-"+n[1]),u(r,"class","my-3"),u(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){M(p,e,b),c(e,t),c(t,r),c(r,s),c(r,o),c(r,l),c(t,a),m&&m.m(t,null),c(e,f),g&&g.m(e,null),d=!0},p(p,[b]){(!d||b&2&&i!==(i="bi bi-"+p[1]))&&u(s,"class",i),(!d||b&1)&&ue(l,p[0]),p[2]!==""?m?m.p(p,b):(m=Mi(p),m.c(),m.m(t,null)):m&&(m.d(1),m=null),g&&g.p&&(!d||b&16)&&vr(g,_,p,p[4],d?br(_,p[4],b,null):wr(p[4]),null)},i(p){d||(O(g,p),d=!0)},o(p){P(g,p),d=!1},d(p){p&&C(e),m&&m.d(),g&&g.d(p)}}}function ju(n,e,t){let{$$slots:r={},$$scope:s}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return n.$$set=f=>{"title"in f&&t(0,i=f.title),"icon"in f&&t(1,o=f.icon),"link"in f&&t(2,l=f.link),"linkText"in f&&t(3,a=f.linkText),"$$scope"in f&&t(4,s=f.$$scope)},[i,o,l,a,s,r]}class gt extends Te{constructor(e){super(),De(this,e,ju,Eu,$e,{title:0,icon:1,link:2,linkText:3})}}function Au(n){const e=n-1;return e*e*e+1}function xe(n,{delay:e=0,duration:t=400,easing:r=gs}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:i=>`opacity: ${i*s}`}}function gn(n,{delay:e=0,duration:t=400,easing:r=Au,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(n),a=+l.opacity,f=l.transform==="none"?"":l.transform,d=a*(1-o),[m,_]=oi(s),[g,p]=oi(i);return{delay:e,duration:t,easing:r,css:(b,y)=>`
			transform: ${f} translate(${(1-b)*m}${_}, ${(1-b)*g}${p});
			opacity: ${a-d*y}`}}function Iu(n){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',u(e,"class","d-flex justify-content-center")},m(t,r){M(t,e,r)},p:Z,i:Z,o:Z,d(t){t&&C(e)}}}class Ut extends Te{constructor(e){super(),De(this,e,null,Iu,$e,{})}}function Lu(n){let e,t,r,s,i,o,l,a,f;return{c(){e=h("div"),t=h("img"),s=w(),i=h("div"),o=h("h6"),l=h("a"),a=re(n[0]),u(t,"class","object-fit-contain rounded my-2"),u(t,"height","150"),Be(t.src,r="./default-profile.jpg")||u(t,"src",r),u(t,"alt","author"),u(l,"class","stretched-link svelte-1rzxrzv"),u(l,"href",f="./#/author/"+n[1]),u(o,"class","card-title text-center"),u(i,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,m){M(d,e,m),c(e,t),c(e,s),c(e,i),c(i,o),c(o,l),c(l,a)},p(d,[m]){m&1&&ue(a,d[0]),m&2&&f!==(f="./#/author/"+d[1])&&u(l,"href",f)},i:Z,o:Z,d(d){d&&C(e)}}}function Yu(n,e,t){let{name:r}=e,{id:s}=e;return n.$$set=i=>{"name"in i&&t(0,r=i.name),"id"in i&&t(1,s=i.id)},[r,s]}class pa extends Te{constructor(e){super(),De(this,e,Yu,Lu,$e,{name:0,id:1})}}function Nu(n){let e,t,r,s,i,o,l,a,f;return{c(){e=h("div"),t=h("img"),s=w(),i=h("div"),o=h("h6"),l=h("a"),a=re(n[0]),u(t,"class","object-fit-contain rounded my-2"),u(t,"height","150"),Be(t.src,r="./default-profile.jpg")||u(t,"src",r),u(t,"alt","publisher"),u(l,"class","stretched-link svelte-1rzxrzv"),u(l,"href",f="./#/publisher/"+n[1]),u(o,"class","card-title text-center"),u(i,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,m){M(d,e,m),c(e,t),c(e,s),c(e,i),c(i,o),c(o,l),c(l,a)},p(d,[m]){m&1&&ue(a,d[0]),m&2&&f!==(f="./#/publisher/"+d[1])&&u(l,"href",f)},i:Z,o:Z,d(d){d&&C(e)}}}function Uu(n,e,t){let{name:r}=e,{id:s}=e;return n.$$set=i=>{"name"in i&&t(0,r=i.name),"id"in i&&t(1,s=i.id)},[r,s]}class ga extends Te{constructor(e){super(),De(this,e,Uu,Nu,$e,{name:0,id:1})}}function Fu(n){let e,t,r,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),r=h("h2"),r.textContent="Error",s=w(),i=h("p"),o=re(n[0]),l=re(": "),a=re(n[1]),f=w(),d=h("a"),d.textContent="Reload",u(d,"href","./#/"),u(d,"class","fw-bold"),u(t,"class","text-center"),u(e,"class","d-flex align-items-center justify-content-center my-3")},m(m,_){M(m,e,_),c(e,t),c(t,r),c(t,s),c(t,i),c(i,o),c(i,l),c(i,a),c(t,f),c(t,d)},p(m,[_]){_&1&&ue(o,m[0]),_&2&&ue(a,m[1])},i:Z,o:Z,d(m){m&&C(e)}}}function Hu(n,e,t){let{code:r="err"}=e,{message:s}=e;return n.$$set=i=>{"code"in i&&t(0,r=i.code),"message"in i&&t(1,s=i.message)},[r,s]}let Dr=class extends Te{constructor(e){super(),De(this,e,Hu,Fu,$e,{code:0,message:1})}};function Wu(n){let e,t,r,s,i,o,l,a,f,d,m;return{c(){e=h("div"),t=h("div"),r=h("h5"),s=h("a"),i=re(n[1]),l=w(),a=h("div"),f=h("span"),d=re(n[2]),u(s,"class","stretched-link svelte-9p7s9b"),u(s,"href",o="./#/book/"+n[0]),u(r,"class","card-title"),u(f,"class",m="badge rounded-pill text-bg-"+n[3]+" svelte-9p7s9b"),u(t,"class","card-body"),u(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(_,g){M(_,e,g),c(e,t),c(t,r),c(r,s),c(s,i),c(t,l),c(t,a),c(a,f),c(f,d)},p(_,[g]){g&2&&ue(i,_[1]),g&1&&o!==(o="./#/book/"+_[0])&&u(s,"href",o),g&4&&ue(d,_[2]),g&8&&m!==(m="badge rounded-pill text-bg-"+_[3]+" svelte-9p7s9b")&&u(f,"class",m)},i:Z,o:Z,d(_){_&&C(e)}}}function qu(n,e,t){let{id:r=0}=e,{title:s}=e,{label:i}=e,{color:o}=e;return n.$$set=l=>{"id"in l&&t(0,r=l.id),"title"in l&&t(1,s=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[r,s,i,o]}class Bu extends Te{constructor(e){super(),De(this,e,qu,Wu,$e,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ba;function K(){return ba.apply(null,arguments)}function Vu(n){ba=n}function ft(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function xt(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Pe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ps(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(Pe(n,e))return!1;return!0}function Qe(n){return n===void 0}function Mt(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function Wn(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function va(n,e){var t=[],r,s=n.length;for(r=0;r<s;++r)t.push(e(n[r],r));return t}function It(n,e){for(var t in e)Pe(e,t)&&(n[t]=e[t]);return Pe(e,"toString")&&(n.toString=e.toString),Pe(e,"valueOf")&&(n.valueOf=e.valueOf),n}function vt(n,e,t,r){return Wa(n,e,t,r,!0).utc()}function xu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function be(n){return n._pf==null&&(n._pf=xu()),n._pf}var cs;Array.prototype.some?cs=Array.prototype.some:cs=function(n){var e=Object(this),t=e.length>>>0,r;for(r=0;r<t;r++)if(r in e&&n.call(this,e[r],r,e))return!0;return!1};function Rs(n){var e=null,t=!1,r=n._d&&!isNaN(n._d.getTime());if(r&&(e=be(n),t=cs.call(e.parsedDateParts,function(s){return s!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=r;else return r;return n._isValid}function Tr(n){var e=vt(NaN);return n!=null?It(be(e),n):be(e).userInvalidated=!0,e}var Pi=K.momentProperties=[],zr=!1;function Es(n,e){var t,r,s,i=Pi.length;if(Qe(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Qe(e._i)||(n._i=e._i),Qe(e._f)||(n._f=e._f),Qe(e._l)||(n._l=e._l),Qe(e._strict)||(n._strict=e._strict),Qe(e._tzm)||(n._tzm=e._tzm),Qe(e._isUTC)||(n._isUTC=e._isUTC),Qe(e._offset)||(n._offset=e._offset),Qe(e._pf)||(n._pf=be(e)),Qe(e._locale)||(n._locale=e._locale),i>0)for(t=0;t<i;t++)r=Pi[t],s=e[r],Qe(s)||(n[r]=s);return n}function qn(n){Es(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),zr===!1&&(zr=!0,K.updateOffset(this),zr=!1)}function dt(n){return n instanceof qn||n!=null&&n._isAMomentObject!=null}function wa(n){K.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function it(n,e){var t=!0;return It(function(){if(K.deprecationHandler!=null&&K.deprecationHandler(null,n),t){var r=[],s,i,o,l=arguments.length;for(i=0;i<l;i++){if(s="",typeof arguments[i]=="object"){s+=`
[`+i+"] ";for(o in arguments[0])Pe(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[i];r.push(s)}wa(n+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var Ri={};function ya(n,e){K.deprecationHandler!=null&&K.deprecationHandler(n,e),Ri[n]||(wa(e),Ri[n]=!0)}K.suppressDeprecationWarnings=!1;K.deprecationHandler=null;function wt(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function zu(n){var e,t;for(t in n)Pe(n,t)&&(e=n[t],wt(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function us(n,e){var t=It({},n),r;for(r in e)Pe(e,r)&&(xt(n[r])&&xt(e[r])?(t[r]={},It(t[r],n[r]),It(t[r],e[r])):e[r]!=null?t[r]=e[r]:delete t[r]);for(r in n)Pe(n,r)&&!Pe(e,r)&&xt(n[r])&&(t[r]=It({},t[r]));return t}function js(n){n!=null&&this.set(n)}var fs;Object.keys?fs=Object.keys:fs=function(n){var e,t=[];for(e in n)Pe(n,e)&&t.push(e);return t};var Gu={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ju(n,e,t){var r=this._calendar[n]||this._calendar.sameElse;return wt(r)?r.call(e,t):r}function bt(n,e,t){var r=""+Math.abs(n),s=e-r.length,i=n>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var As=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Kn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gr={},cn={};function he(n,e,t,r){var s=r;typeof r=="string"&&(s=function(){return this[r]()}),n&&(cn[n]=s),e&&(cn[e[0]]=function(){return bt(s.apply(this,arguments),e[1],e[2])}),t&&(cn[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),n)})}function Ku(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function Zu(n){var e=n.match(As),t,r;for(t=0,r=e.length;t<r;t++)cn[e[t]]?e[t]=cn[e[t]]:e[t]=Ku(e[t]);return function(s){var i="",o;for(o=0;o<r;o++)i+=wt(e[o])?e[o].call(s,n):e[o];return i}}function er(n,e){return n.isValid()?(e=ka(e,n.localeData()),Gr[e]=Gr[e]||Zu(e),Gr[e](n)):n.localeData().invalidDate()}function ka(n,e){var t=5;function r(s){return e.longDateFormat(s)||s}for(Kn.lastIndex=0;t>=0&&Kn.test(n);)n=n.replace(Kn,r),Kn.lastIndex=0,t-=1;return n}var Qu={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Xu(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(As).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[n])}var ef="Invalid date";function tf(){return this._invalidDate}var nf="%d",rf=/\d{1,2}/;function sf(n){return this._ordinal.replace("%d",n)}var of={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function af(n,e,t,r){var s=this._relativeTime[t];return wt(s)?s(n,e,t,r):s.replace(/%d/i,n)}function lf(n,e){var t=this._relativeTime[n>0?"future":"past"];return wt(t)?t(e):t.replace(/%s/i,e)}var Ei={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ot(n){return typeof n=="string"?Ei[n]||Ei[n.toLowerCase()]:void 0}function Is(n){var e={},t,r;for(r in n)Pe(n,r)&&(t=ot(r),t&&(e[t]=n[r]));return e}var cf={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function uf(n){var e=[],t;for(t in n)Pe(n,t)&&e.push({unit:t,priority:cf[t]});return e.sort(function(r,s){return r.priority-s.priority}),e}var $a=/\d/,nt=/\d\d/,Sa=/\d{3}/,Ls=/\d{4}/,Or=/[+-]?\d{6}/,Ue=/\d\d?/,Da=/\d\d\d\d?/,Ta=/\d\d\d\d\d\d?/,Cr=/\d{1,3}/,Ys=/\d{1,4}/,Mr=/[+-]?\d{1,6}/,wn=/\d+/,Pr=/[+-]?\d+/,ff=/Z|[+-]\d\d:?\d\d/gi,Rr=/Z|[+-]\d\d(?::?\d\d)?/gi,df=/[+-]?\d+(\.\d{1,3})?/,Bn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,yn=/^[1-9]\d?/,Ns=/^([1-9]\d|\d)/,fr;fr={};function ae(n,e,t){fr[n]=wt(e)?e:function(r,s){return r&&t?t:e}}function hf(n,e){return Pe(fr,n)?fr[n](e._strict,e._locale):new RegExp(mf(n))}function mf(n){return Ot(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,s,i){return t||r||s||i}))}function Ot(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function st(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function ke(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=st(e)),t}var ds={};function Le(n,e){var t,r=e,s;for(typeof n=="string"&&(n=[n]),Mt(e)&&(r=function(i,o){o[e]=ke(i)}),s=n.length,t=0;t<s;t++)ds[n[t]]=r}function Vn(n,e){Le(n,function(t,r,s,i){s._w=s._w||{},e(t,s._w,s,i)})}function _f(n,e,t){e!=null&&Pe(ds,n)&&ds[n](e,t._a,t,n)}function Er(n){return n%4===0&&n%100!==0||n%400===0}var Ke=0,Dt=1,mt=2,qe=3,ct=4,Tt=5,Vt=6,pf=7,gf=8;he("Y",0,0,function(){var n=this.year();return n<=9999?bt(n,4):"+"+n});he(0,["YY",2],0,function(){return this.year()%100});he(0,["YYYY",4],0,"year");he(0,["YYYYY",5],0,"year");he(0,["YYYYYY",6,!0],0,"year");ae("Y",Pr);ae("YY",Ue,nt);ae("YYYY",Ys,Ls);ae("YYYYY",Mr,Or);ae("YYYYYY",Mr,Or);Le(["YYYYY","YYYYYY"],Ke);Le("YYYY",function(n,e){e[Ke]=n.length===2?K.parseTwoDigitYear(n):ke(n)});Le("YY",function(n,e){e[Ke]=K.parseTwoDigitYear(n)});Le("Y",function(n,e){e[Ke]=parseInt(n,10)});function Rn(n){return Er(n)?366:365}K.parseTwoDigitYear=function(n){return ke(n)+(ke(n)>68?1900:2e3)};var Oa=kn("FullYear",!0);function bf(){return Er(this.year())}function kn(n,e){return function(t){return t!=null?(Ca(this,n,t),K.updateOffset(this,e),this):In(this,n)}}function In(n,e){if(!n.isValid())return NaN;var t=n._d,r=n._isUTC;switch(e){case"Milliseconds":return r?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return r?t.getUTCSeconds():t.getSeconds();case"Minutes":return r?t.getUTCMinutes():t.getMinutes();case"Hours":return r?t.getUTCHours():t.getHours();case"Date":return r?t.getUTCDate():t.getDate();case"Day":return r?t.getUTCDay():t.getDay();case"Month":return r?t.getUTCMonth():t.getMonth();case"FullYear":return r?t.getUTCFullYear():t.getFullYear();default:return NaN}}function Ca(n,e,t){var r,s,i,o,l;if(!(!n.isValid()||isNaN(t))){switch(r=n._d,s=n._isUTC,e){case"Milliseconds":return void(s?r.setUTCMilliseconds(t):r.setMilliseconds(t));case"Seconds":return void(s?r.setUTCSeconds(t):r.setSeconds(t));case"Minutes":return void(s?r.setUTCMinutes(t):r.setMinutes(t));case"Hours":return void(s?r.setUTCHours(t):r.setHours(t));case"Date":return void(s?r.setUTCDate(t):r.setDate(t));case"FullYear":break;default:return}i=t,o=n.month(),l=n.date(),l=l===29&&o===1&&!Er(i)?28:l,s?r.setUTCFullYear(i,o,l):r.setFullYear(i,o,l)}}function vf(n){return n=ot(n),wt(this[n])?this[n]():this}function wf(n,e){if(typeof n=="object"){n=Is(n);var t=uf(n),r,s=t.length;for(r=0;r<s;r++)this[t[r].unit](n[t[r].unit])}else if(n=ot(n),wt(this[n]))return this[n](e);return this}function yf(n,e){return(n%e+e)%e}var We;Array.prototype.indexOf?We=Array.prototype.indexOf:We=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function Us(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=yf(e,12);return n+=(e-t)/12,t===1?Er(n)?29:28:31-t%7%2}he("M",["MM",2],"Mo",function(){return this.month()+1});he("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});he("MMMM",0,0,function(n){return this.localeData().months(this,n)});ae("M",Ue,yn);ae("MM",Ue,nt);ae("MMM",function(n,e){return e.monthsShortRegex(n)});ae("MMMM",function(n,e){return e.monthsRegex(n)});Le(["M","MM"],function(n,e){e[Dt]=ke(n)-1});Le(["MMM","MMMM"],function(n,e,t,r){var s=t._locale.monthsParse(n,r,t._strict);s!=null?e[Dt]=s:be(t).invalidMonth=n});var kf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ma="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$f=Bn,Sf=Bn;function Df(n,e){return n?ft(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||Pa).test(e)?"format":"standalone"][n.month()]:ft(this._months)?this._months:this._months.standalone}function Tf(n,e){return n?ft(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[Pa.test(e)?"format":"standalone"][n.month()]:ft(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Of(n,e,t){var r,s,i,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=vt([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(s=We.call(this._shortMonthsParse,o),s!==-1?s:null):(s=We.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=We.call(this._shortMonthsParse,o),s!==-1?s:(s=We.call(this._longMonthsParse,o),s!==-1?s:null)):(s=We.call(this._longMonthsParse,o),s!==-1?s:(s=We.call(this._shortMonthsParse,o),s!==-1?s:null))}function Cf(n,e,t){var r,s,i;if(this._monthsParseExact)return Of.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=vt([2e3,r]),t&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[r]&&(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[r].test(n))return r;if(t&&e==="MMM"&&this._shortMonthsParse[r].test(n))return r;if(!t&&this._monthsParse[r].test(n))return r}}function Ra(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=ke(e);else if(e=n.localeData().monthsParse(e),!Mt(e))return n}var t=e,r=n.date();return r=r<29?r:Math.min(r,Us(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,r):n._d.setMonth(t,r),n}function Ea(n){return n!=null?(Ra(this,n),K.updateOffset(this,!0),this):In(this,"Month")}function Mf(){return Us(this.year(),this.month())}function Pf(n){return this._monthsParseExact?(Pe(this,"_monthsRegex")||ja.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Pe(this,"_monthsShortRegex")||(this._monthsShortRegex=$f),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function Rf(n){return this._monthsParseExact?(Pe(this,"_monthsRegex")||ja.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Pe(this,"_monthsRegex")||(this._monthsRegex=Sf),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function ja(){function n(a,f){return f.length-a.length}var e=[],t=[],r=[],s,i,o,l;for(s=0;s<12;s++)i=vt([2e3,s]),o=Ot(this.monthsShort(i,"")),l=Ot(this.months(i,"")),e.push(o),t.push(l),r.push(l),r.push(o);e.sort(n),t.sort(n),r.sort(n),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Ef(n,e,t,r,s,i,o){var l;return n<100&&n>=0?(l=new Date(n+400,e,t,r,s,i,o),isFinite(l.getFullYear())&&l.setFullYear(n)):l=new Date(n,e,t,r,s,i,o),l}function Ln(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function dr(n,e,t){var r=7+e-t,s=(7+Ln(n,0,r).getUTCDay()-e)%7;return-s+r-1}function Aa(n,e,t,r,s){var i=(7+t-r)%7,o=dr(n,r,s),l=1+7*(e-1)+i+o,a,f;return l<=0?(a=n-1,f=Rn(a)+l):l>Rn(n)?(a=n+1,f=l-Rn(n)):(a=n,f=l),{year:a,dayOfYear:f}}function Yn(n,e,t){var r=dr(n.year(),e,t),s=Math.floor((n.dayOfYear()-r-1)/7)+1,i,o;return s<1?(o=n.year()-1,i=s+Ct(o,e,t)):s>Ct(n.year(),e,t)?(i=s-Ct(n.year(),e,t),o=n.year()+1):(o=n.year(),i=s),{week:i,year:o}}function Ct(n,e,t){var r=dr(n,e,t),s=dr(n+1,e,t);return(Rn(n)-r+s)/7}he("w",["ww",2],"wo","week");he("W",["WW",2],"Wo","isoWeek");ae("w",Ue,yn);ae("ww",Ue,nt);ae("W",Ue,yn);ae("WW",Ue,nt);Vn(["w","ww","W","WW"],function(n,e,t,r){e[r.substr(0,1)]=ke(n)});function jf(n){return Yn(n,this._week.dow,this._week.doy).week}var Af={dow:0,doy:6};function If(){return this._week.dow}function Lf(){return this._week.doy}function Yf(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Nf(n){var e=Yn(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}he("d",0,"do","day");he("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});he("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});he("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});he("e",0,0,"weekday");he("E",0,0,"isoWeekday");ae("d",Ue);ae("e",Ue);ae("E",Ue);ae("dd",function(n,e){return e.weekdaysMinRegex(n)});ae("ddd",function(n,e){return e.weekdaysShortRegex(n)});ae("dddd",function(n,e){return e.weekdaysRegex(n)});Vn(["dd","ddd","dddd"],function(n,e,t,r){var s=t._locale.weekdaysParse(n,r,t._strict);s!=null?e.d=s:be(t).invalidWeekday=n});Vn(["d","e","E"],function(n,e,t,r){e[r]=ke(n)});function Uf(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function Ff(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function Fs(n,e){return n.slice(e,7).concat(n.slice(0,e))}var Hf="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ia="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wf="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qf=Bn,Bf=Bn,Vf=Bn;function xf(n,e){var t=ft(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?Fs(t,this._week.dow):n?t[n.day()]:t}function zf(n){return n===!0?Fs(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function Gf(n){return n===!0?Fs(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function Jf(n,e,t){var r,s,i,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=vt([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(s=We.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=We.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=We.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=We.call(this._weekdaysParse,o),s!==-1||(s=We.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=We.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=We.call(this._shortWeekdaysParse,o),s!==-1||(s=We.call(this._weekdaysParse,o),s!==-1)?s:(s=We.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=We.call(this._minWeekdaysParse,o),s!==-1||(s=We.call(this._weekdaysParse,o),s!==-1)?s:(s=We.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function Kf(n,e,t){var r,s,i;if(this._weekdaysParseExact)return Jf.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=vt([2e3,1]).day(r),t&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[r].test(n))return r;if(t&&e==="ddd"&&this._shortWeekdaysParse[r].test(n))return r;if(t&&e==="dd"&&this._minWeekdaysParse[r].test(n))return r;if(!t&&this._weekdaysParse[r].test(n))return r}}function Zf(n){if(!this.isValid())return n!=null?this:NaN;var e=In(this,"Day");return n!=null?(n=Uf(n,this.localeData()),this.add(n-e,"d")):e}function Qf(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function Xf(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=Ff(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function ed(n){return this._weekdaysParseExact?(Pe(this,"_weekdaysRegex")||Hs.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Pe(this,"_weekdaysRegex")||(this._weekdaysRegex=qf),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function td(n){return this._weekdaysParseExact?(Pe(this,"_weekdaysRegex")||Hs.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Pe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bf),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function nd(n){return this._weekdaysParseExact?(Pe(this,"_weekdaysRegex")||Hs.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Pe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vf),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Hs(){function n(d,m){return m.length-d.length}var e=[],t=[],r=[],s=[],i,o,l,a,f;for(i=0;i<7;i++)o=vt([2e3,1]).day(i),l=Ot(this.weekdaysMin(o,"")),a=Ot(this.weekdaysShort(o,"")),f=Ot(this.weekdays(o,"")),e.push(l),t.push(a),r.push(f),s.push(l),s.push(a),s.push(f);e.sort(n),t.sort(n),r.sort(n),s.sort(n),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Ws(){return this.hours()%12||12}function rd(){return this.hours()||24}he("H",["HH",2],0,"hour");he("h",["hh",2],0,Ws);he("k",["kk",2],0,rd);he("hmm",0,0,function(){return""+Ws.apply(this)+bt(this.minutes(),2)});he("hmmss",0,0,function(){return""+Ws.apply(this)+bt(this.minutes(),2)+bt(this.seconds(),2)});he("Hmm",0,0,function(){return""+this.hours()+bt(this.minutes(),2)});he("Hmmss",0,0,function(){return""+this.hours()+bt(this.minutes(),2)+bt(this.seconds(),2)});function La(n,e){he(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}La("a",!0);La("A",!1);function Ya(n,e){return e._meridiemParse}ae("a",Ya);ae("A",Ya);ae("H",Ue,Ns);ae("h",Ue,yn);ae("k",Ue,yn);ae("HH",Ue,nt);ae("hh",Ue,nt);ae("kk",Ue,nt);ae("hmm",Da);ae("hmmss",Ta);ae("Hmm",Da);ae("Hmmss",Ta);Le(["H","HH"],qe);Le(["k","kk"],function(n,e,t){var r=ke(n);e[qe]=r===24?0:r});Le(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});Le(["h","hh"],function(n,e,t){e[qe]=ke(n),be(t).bigHour=!0});Le("hmm",function(n,e,t){var r=n.length-2;e[qe]=ke(n.substr(0,r)),e[ct]=ke(n.substr(r)),be(t).bigHour=!0});Le("hmmss",function(n,e,t){var r=n.length-4,s=n.length-2;e[qe]=ke(n.substr(0,r)),e[ct]=ke(n.substr(r,2)),e[Tt]=ke(n.substr(s)),be(t).bigHour=!0});Le("Hmm",function(n,e,t){var r=n.length-2;e[qe]=ke(n.substr(0,r)),e[ct]=ke(n.substr(r))});Le("Hmmss",function(n,e,t){var r=n.length-4,s=n.length-2;e[qe]=ke(n.substr(0,r)),e[ct]=ke(n.substr(r,2)),e[Tt]=ke(n.substr(s))});function sd(n){return(n+"").toLowerCase().charAt(0)==="p"}var id=/[ap]\.?m?\.?/i,od=kn("Hours",!0);function ad(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var Na={calendar:Gu,longDateFormat:Qu,invalidDate:ef,ordinal:nf,dayOfMonthOrdinalParse:rf,relativeTime:of,months:kf,monthsShort:Ma,week:Af,weekdays:Hf,weekdaysMin:Wf,weekdaysShort:Ia,meridiemParse:id},Fe={},Dn={},Nn;function ld(n,e){var t,r=Math.min(n.length,e.length);for(t=0;t<r;t+=1)if(n[t]!==e[t])return t;return r}function ji(n){return n&&n.toLowerCase().replace("_","-")}function cd(n){for(var e=0,t,r,s,i;e<n.length;){for(i=ji(n[e]).split("-"),t=i.length,r=ji(n[e+1]),r=r?r.split("-"):null;t>0;){if(s=jr(i.slice(0,t).join("-")),s)return s;if(r&&r.length>=t&&ld(i,r)>=t-1)break;t--}e++}return Nn}function ud(n){return!!(n&&n.match("^[^/\\\\]*$"))}function jr(n){var e=null,t;if(Fe[n]===void 0&&typeof rr<"u"&&rr&&rr.exports&&ud(n))try{e=Nn._abbr,t=require,t("./locale/"+n),Yt(e)}catch{Fe[n]=null}return Fe[n]}function Yt(n,e){var t;return n&&(Qe(e)?t=Pt(n):t=qs(n,e),t?Nn=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),Nn._abbr}function qs(n,e){if(e!==null){var t,r=Na;if(e.abbr=n,Fe[n]!=null)ya("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Fe[n]._config;else if(e.parentLocale!=null)if(Fe[e.parentLocale]!=null)r=Fe[e.parentLocale]._config;else if(t=jr(e.parentLocale),t!=null)r=t._config;else return Dn[e.parentLocale]||(Dn[e.parentLocale]=[]),Dn[e.parentLocale].push({name:n,config:e}),null;return Fe[n]=new js(us(r,e)),Dn[n]&&Dn[n].forEach(function(s){qs(s.name,s.config)}),Yt(n),Fe[n]}else return delete Fe[n],null}function fd(n,e){if(e!=null){var t,r,s=Na;Fe[n]!=null&&Fe[n].parentLocale!=null?Fe[n].set(us(Fe[n]._config,e)):(r=jr(n),r!=null&&(s=r._config),e=us(s,e),r==null&&(e.abbr=n),t=new js(e),t.parentLocale=Fe[n],Fe[n]=t),Yt(n)}else Fe[n]!=null&&(Fe[n].parentLocale!=null?(Fe[n]=Fe[n].parentLocale,n===Yt()&&Yt(n)):Fe[n]!=null&&delete Fe[n]);return Fe[n]}function Pt(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return Nn;if(!ft(n)){if(e=jr(n),e)return e;n=[n]}return cd(n)}function dd(){return fs(Fe)}function Bs(n){var e,t=n._a;return t&&be(n).overflow===-2&&(e=t[Dt]<0||t[Dt]>11?Dt:t[mt]<1||t[mt]>Us(t[Ke],t[Dt])?mt:t[qe]<0||t[qe]>24||t[qe]===24&&(t[ct]!==0||t[Tt]!==0||t[Vt]!==0)?qe:t[ct]<0||t[ct]>59?ct:t[Tt]<0||t[Tt]>59?Tt:t[Vt]<0||t[Vt]>999?Vt:-1,be(n)._overflowDayOfYear&&(e<Ke||e>mt)&&(e=mt),be(n)._overflowWeeks&&e===-1&&(e=pf),be(n)._overflowWeekday&&e===-1&&(e=gf),be(n).overflow=e),n}var hd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,md=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_d=/Z|[+-]\d\d(?::?\d\d)?/,Zn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pd=/^\/?Date\((-?\d+)/i,gd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,bd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ua(n){var e,t,r=n._i,s=hd.exec(r)||md.exec(r),i,o,l,a,f=Zn.length,d=Jr.length;if(s){for(be(n).iso=!0,e=0,t=f;e<t;e++)if(Zn[e][1].exec(s[1])){o=Zn[e][0],i=Zn[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(s[3]){for(e=0,t=d;e<t;e++)if(Jr[e][1].exec(s[3])){l=(s[2]||" ")+Jr[e][0];break}if(l==null){n._isValid=!1;return}}if(!i&&l!=null){n._isValid=!1;return}if(s[4])if(_d.exec(s[4]))a="Z";else{n._isValid=!1;return}n._f=o+(l||"")+(a||""),xs(n)}else n._isValid=!1}function vd(n,e,t,r,s,i){var o=[wd(n),Ma.indexOf(e),parseInt(t,10),parseInt(r,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function wd(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function yd(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kd(n,e,t){if(n){var r=Ia.indexOf(n),s=new Date(e[0],e[1],e[2]).getDay();if(r!==s)return be(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function $d(n,e,t){if(n)return bd[n];if(e)return 0;var r=parseInt(t,10),s=r%100,i=(r-s)/100;return i*60+s}function Fa(n){var e=gd.exec(yd(n._i)),t;if(e){if(t=vd(e[4],e[3],e[2],e[5],e[6],e[7]),!kd(e[1],t,n))return;n._a=t,n._tzm=$d(e[8],e[9],e[10]),n._d=Ln.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),be(n).rfc2822=!0}else n._isValid=!1}function Sd(n){var e=pd.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(Ua(n),n._isValid===!1)delete n._isValid;else return;if(Fa(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:K.createFromInputFallback(n)}K.createFromInputFallback=it("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function rn(n,e,t){return n??e??t}function Dd(n){var e=new Date(K.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Vs(n){var e,t,r=[],s,i,o;if(!n._d){for(s=Dd(n),n._w&&n._a[mt]==null&&n._a[Dt]==null&&Td(n),n._dayOfYear!=null&&(o=rn(n._a[Ke],s[Ke]),(n._dayOfYear>Rn(o)||n._dayOfYear===0)&&(be(n)._overflowDayOfYear=!0),t=Ln(o,0,n._dayOfYear),n._a[Dt]=t.getUTCMonth(),n._a[mt]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=r[e]=s[e];for(;e<7;e++)n._a[e]=r[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[qe]===24&&n._a[ct]===0&&n._a[Tt]===0&&n._a[Vt]===0&&(n._nextDay=!0,n._a[qe]=0),n._d=(n._useUTC?Ln:Ef).apply(null,r),i=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[qe]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==i&&(be(n).weekdayMismatch=!0)}}function Td(n){var e,t,r,s,i,o,l,a,f;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=rn(e.GG,n._a[Ke],Yn(Ne(),1,4).year),r=rn(e.W,1),s=rn(e.E,1),(s<1||s>7)&&(a=!0)):(i=n._locale._week.dow,o=n._locale._week.doy,f=Yn(Ne(),i,o),t=rn(e.gg,n._a[Ke],f.year),r=rn(e.w,f.week),e.d!=null?(s=e.d,(s<0||s>6)&&(a=!0)):e.e!=null?(s=e.e+i,(e.e<0||e.e>6)&&(a=!0)):s=i),r<1||r>Ct(t,i,o)?be(n)._overflowWeeks=!0:a!=null?be(n)._overflowWeekday=!0:(l=Aa(t,r,s,i,o),n._a[Ke]=l.year,n._dayOfYear=l.dayOfYear)}K.ISO_8601=function(){};K.RFC_2822=function(){};function xs(n){if(n._f===K.ISO_8601){Ua(n);return}if(n._f===K.RFC_2822){Fa(n);return}n._a=[],be(n).empty=!0;var e=""+n._i,t,r,s,i,o,l=e.length,a=0,f,d;for(s=ka(n._f,n._locale).match(As)||[],d=s.length,t=0;t<d;t++)i=s[t],r=(e.match(hf(i,n))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&be(n).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),a+=r.length),cn[i]?(r?be(n).empty=!1:be(n).unusedTokens.push(i),_f(i,r,n)):n._strict&&!r&&be(n).unusedTokens.push(i);be(n).charsLeftOver=l-a,e.length>0&&be(n).unusedInput.push(e),n._a[qe]<=12&&be(n).bigHour===!0&&n._a[qe]>0&&(be(n).bigHour=void 0),be(n).parsedDateParts=n._a.slice(0),be(n).meridiem=n._meridiem,n._a[qe]=Od(n._locale,n._a[qe],n._meridiem),f=be(n).era,f!==null&&(n._a[Ke]=n._locale.erasConvertYear(f,n._a[Ke])),Vs(n),Bs(n)}function Od(n,e,t){var r;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(r=n.isPM(t),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function Cd(n){var e,t,r,s,i,o,l=!1,a=n._f.length;if(a===0){be(n).invalidFormat=!0,n._d=new Date(NaN);return}for(s=0;s<a;s++)i=0,o=!1,e=Es({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[s],xs(e),Rs(e)&&(o=!0),i+=be(e).charsLeftOver,i+=be(e).unusedTokens.length*10,be(e).score=i,l?i<r&&(r=i,t=e):(r==null||i<r||o)&&(r=i,t=e,o&&(l=!0));It(n,t||e)}function Md(n){if(!n._d){var e=Is(n._i),t=e.day===void 0?e.date:e.day;n._a=va([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),Vs(n)}}function Pd(n){var e=new qn(Bs(Ha(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ha(n){var e=n._i,t=n._f;return n._locale=n._locale||Pt(n._l),e===null||t===void 0&&e===""?Tr({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),dt(e)?new qn(Bs(e)):(Wn(e)?n._d=e:ft(t)?Cd(n):t?xs(n):Rd(n),Rs(n)||(n._d=null),n))}function Rd(n){var e=n._i;Qe(e)?n._d=new Date(K.now()):Wn(e)?n._d=new Date(e.valueOf()):typeof e=="string"?Sd(n):ft(e)?(n._a=va(e.slice(0),function(t){return parseInt(t,10)}),Vs(n)):xt(e)?Md(n):Mt(e)?n._d=new Date(e):K.createFromInputFallback(n)}function Wa(n,e,t,r,s){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(t===!0||t===!1)&&(r=t,t=void 0),(xt(n)&&Ps(n)||ft(n)&&n.length===0)&&(n=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=t,i._i=n,i._f=e,i._strict=r,Pd(i)}function Ne(n,e,t,r){return Wa(n,e,t,r,!1)}var Ed=it("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Ne.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:Tr()}),jd=it("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Ne.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:Tr()});function qa(n,e){var t,r;if(e.length===1&&ft(e[0])&&(e=e[0]),!e.length)return Ne();for(t=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][n](t))&&(t=e[r]);return t}function Ad(){var n=[].slice.call(arguments,0);return qa("isBefore",n)}function Id(){var n=[].slice.call(arguments,0);return qa("isAfter",n)}var Ld=function(){return Date.now?Date.now():+new Date},Tn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Yd(n){var e,t=!1,r,s=Tn.length;for(e in n)if(Pe(n,e)&&!(We.call(Tn,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(r=0;r<s;++r)if(n[Tn[r]]){if(t)return!1;parseFloat(n[Tn[r]])!==ke(n[Tn[r]])&&(t=!0)}return!0}function Nd(){return this._isValid}function Ud(){return ht(NaN)}function Ar(n){var e=Is(n),t=e.year||0,r=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,f=e.second||0,d=e.millisecond||0;this._isValid=Yd(e),this._milliseconds=+d+f*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+s+r*3+t*12,this._data={},this._locale=Pt(),this._bubble()}function tr(n){return n instanceof Ar}function hs(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function Fd(n,e,t){var r=Math.min(n.length,e.length),s=Math.abs(n.length-e.length),i=0,o;for(o=0;o<r;o++)ke(n[o])!==ke(e[o])&&i++;return i+s}function Ba(n,e){he(n,0,0,function(){var t=this.utcOffset(),r="+";return t<0&&(t=-t,r="-"),r+bt(~~(t/60),2)+e+bt(~~t%60,2)})}Ba("Z",":");Ba("ZZ","");ae("Z",Rr);ae("ZZ",Rr);Le(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=zs(Rr,n)});var Hd=/([\+\-]|\d\d)/gi;function zs(n,e){var t=(e||"").match(n),r,s,i;return t===null?null:(r=t[t.length-1]||[],s=(r+"").match(Hd)||["-",0,0],i=+(s[1]*60)+ke(s[2]),i===0?0:s[0]==="+"?i:-i)}function Gs(n,e){var t,r;return e._isUTC?(t=e.clone(),r=(dt(n)||Wn(n)?n.valueOf():Ne(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+r),K.updateOffset(t,!1),t):Ne(n).local()}function ms(n){return-Math.round(n._d.getTimezoneOffset())}K.updateOffset=function(){};function Wd(n,e,t){var r=this._offset||0,s;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=zs(Rr,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(s=ms(this)),this._offset=n,this._isUTC=!0,s!=null&&this.add(s,"m"),r!==n&&(!e||this._changeInProgress?za(this,ht(n-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,K.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:ms(this)}function qd(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function Bd(n){return this.utcOffset(0,n)}function Vd(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(ms(this),"m")),this}function xd(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=zs(ff,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function zd(n){return this.isValid()?(n=n?Ne(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function Gd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Jd(){if(!Qe(this._isDSTShifted))return this._isDSTShifted;var n={},e;return Es(n,this),n=Ha(n),n._a?(e=n._isUTC?vt(n._a):Ne(n._a),this._isDSTShifted=this.isValid()&&Fd(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Kd(){return this.isValid()?!this._isUTC:!1}function Zd(){return this.isValid()?this._isUTC:!1}function Va(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Qd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ht(n,e){var t=n,r=null,s,i,o;return tr(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Mt(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(r=Qd.exec(n))?(s=r[1]==="-"?-1:1,t={y:0,d:ke(r[mt])*s,h:ke(r[qe])*s,m:ke(r[ct])*s,s:ke(r[Tt])*s,ms:ke(hs(r[Vt]*1e3))*s}):(r=Xd.exec(n))?(s=r[1]==="-"?-1:1,t={y:Wt(r[2],s),M:Wt(r[3],s),w:Wt(r[4],s),d:Wt(r[5],s),h:Wt(r[6],s),m:Wt(r[7],s),s:Wt(r[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=eh(Ne(t.from),Ne(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Ar(t),tr(n)&&Pe(n,"_locale")&&(i._locale=n._locale),tr(n)&&Pe(n,"_isValid")&&(i._isValid=n._isValid),i}ht.fn=Ar.prototype;ht.invalid=Ud;function Wt(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function Ai(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function eh(n,e){var t;return n.isValid()&&e.isValid()?(e=Gs(e,n),n.isBefore(e)?t=Ai(n,e):(t=Ai(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function xa(n,e){return function(t,r){var s,i;return r!==null&&!isNaN(+r)&&(ya(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=r,r=i),s=ht(t,r),za(this,s,n),this}}function za(n,e,t,r){var s=e._milliseconds,i=hs(e._days),o=hs(e._months);n.isValid()&&(r=r??!0,o&&Ra(n,In(n,"Month")+o*t),i&&Ca(n,"Date",In(n,"Date")+i*t),s&&n._d.setTime(n._d.valueOf()+s*t),r&&K.updateOffset(n,i||o))}var th=xa(1,"add"),nh=xa(-1,"subtract");function Ga(n){return typeof n=="string"||n instanceof String}function rh(n){return dt(n)||Wn(n)||Ga(n)||Mt(n)||ih(n)||sh(n)||n===null||n===void 0}function sh(n){var e=xt(n)&&!Ps(n),t=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,i,o=r.length;for(s=0;s<o;s+=1)i=r[s],t=t||Pe(n,i);return e&&t}function ih(n){var e=ft(n),t=!1;return e&&(t=n.filter(function(r){return!Mt(r)&&Ga(n)}).length===0),e&&t}function oh(n){var e=xt(n)&&!Ps(n),t=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,i;for(s=0;s<r.length;s+=1)i=r[s],t=t||Pe(n,i);return e&&t}function ah(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function lh(n,e){arguments.length===1&&(arguments[0]?rh(arguments[0])?(n=arguments[0],e=void 0):oh(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||Ne(),r=Gs(t,this).startOf("day"),s=K.calendarFormat(this,r)||"sameElse",i=e&&(wt(e[s])?e[s].call(this,t):e[s]);return this.format(i||this.localeData().calendar(s,this,Ne(t)))}function ch(){return new qn(this)}function uh(n,e){var t=dt(n)?n:Ne(n);return this.isValid()&&t.isValid()?(e=ot(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function fh(n,e){var t=dt(n)?n:Ne(n);return this.isValid()&&t.isValid()?(e=ot(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function dh(n,e,t,r){var s=dt(n)?n:Ne(n),i=dt(e)?e:Ne(e);return this.isValid()&&s.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(r[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function hh(n,e){var t=dt(n)?n:Ne(n),r;return this.isValid()&&t.isValid()?(e=ot(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(r=t.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function mh(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function _h(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function ph(n,e,t){var r,s,i;if(!this.isValid())return NaN;if(r=Gs(n,this),!r.isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,e=ot(e),e){case"year":i=nr(this,r)/12;break;case"month":i=nr(this,r);break;case"quarter":i=nr(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-s)/864e5;break;case"week":i=(this-r-s)/6048e5;break;default:i=this-r}return t?i:st(i)}function nr(n,e){if(n.date()<e.date())return-nr(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),r=n.clone().add(t,"months"),s,i;return e-r<0?(s=n.clone().add(t-1,"months"),i=(e-r)/(r-s)):(s=n.clone().add(t+1,"months"),i=(e-r)/(s-r)),-(t+i)||0}K.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";K.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function gh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function bh(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?er(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):wt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",er(t,"Z")):er(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function vh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,r,s,i;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+r+s+i)}function wh(n){n||(n=this.isUtc()?K.defaultFormatUtc:K.defaultFormat);var e=er(this,n);return this.localeData().postformat(e)}function yh(n,e){return this.isValid()&&(dt(n)&&n.isValid()||Ne(n).isValid())?ht({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function kh(n){return this.from(Ne(),n)}function $h(n,e){return this.isValid()&&(dt(n)&&n.isValid()||Ne(n).isValid())?ht({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Sh(n){return this.to(Ne(),n)}function Ja(n){var e;return n===void 0?this._locale._abbr:(e=Pt(n),e!=null&&(this._locale=e),this)}var Ka=it("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function Za(){return this._locale}var hr=1e3,un=60*hr,mr=60*un,Qa=(365*400+97)*24*mr;function fn(n,e){return(n%e+e)%e}function Xa(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-Qa:new Date(n,e,t).valueOf()}function el(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-Qa:Date.UTC(n,e,t)}function Dh(n){var e,t;if(n=ot(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?el:Xa,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=fn(e+(this._isUTC?0:this.utcOffset()*un),mr);break;case"minute":e=this._d.valueOf(),e-=fn(e,un);break;case"second":e=this._d.valueOf(),e-=fn(e,hr);break}return this._d.setTime(e),K.updateOffset(this,!0),this}function Th(n){var e,t;if(n=ot(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?el:Xa,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=mr-fn(e+(this._isUTC?0:this.utcOffset()*un),mr)-1;break;case"minute":e=this._d.valueOf(),e+=un-fn(e,un)-1;break;case"second":e=this._d.valueOf(),e+=hr-fn(e,hr)-1;break}return this._d.setTime(e),K.updateOffset(this,!0),this}function Oh(){return this._d.valueOf()-(this._offset||0)*6e4}function Ch(){return Math.floor(this.valueOf()/1e3)}function Mh(){return new Date(this.valueOf())}function Ph(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function Rh(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function Eh(){return this.isValid()?this.toISOString():null}function jh(){return Rs(this)}function Ah(){return It({},be(this))}function Ih(){return be(this).overflow}function Lh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}he("N",0,0,"eraAbbr");he("NN",0,0,"eraAbbr");he("NNN",0,0,"eraAbbr");he("NNNN",0,0,"eraName");he("NNNNN",0,0,"eraNarrow");he("y",["y",1],"yo","eraYear");he("y",["yy",2],0,"eraYear");he("y",["yyy",3],0,"eraYear");he("y",["yyyy",4],0,"eraYear");ae("N",Js);ae("NN",Js);ae("NNN",Js);ae("NNNN",zh);ae("NNNNN",Gh);Le(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,r){var s=t._locale.erasParse(n,r,t._strict);s?be(t).era=s:be(t).invalidEra=n});ae("y",wn);ae("yy",wn);ae("yyy",wn);ae("yyyy",wn);ae("yo",Jh);Le(["y","yy","yyy","yyyy"],Ke);Le(["yo"],function(n,e,t,r){var s;t._locale._eraYearOrdinalRegex&&(s=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Ke]=t._locale.eraYearOrdinalParse(n,s):e[Ke]=parseInt(n,10)});function Yh(n,e){var t,r,s,i=this._eras||Pt("en")._eras;for(t=0,r=i.length;t<r;++t){switch(typeof i[t].since){case"string":s=K(i[t].since).startOf("day"),i[t].since=s.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":s=K(i[t].until).startOf("day").valueOf(),i[t].until=s.valueOf();break}}return i}function Nh(n,e,t){var r,s,i=this.eras(),o,l,a;for(n=n.toUpperCase(),r=0,s=i.length;r<s;++r)if(o=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),a=i[r].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===n)return i[r];break;case"NNNN":if(o===n)return i[r];break;case"NNNNN":if(a===n)return i[r];break}else if([o,l,a].indexOf(n)>=0)return i[r]}function Uh(n,e){var t=n.since<=n.until?1:-1;return e===void 0?K(n.since).year():K(n.since).year()+(e-n.offset)*t}function Fh(){var n,e,t,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),r[n].since<=t&&t<=r[n].until||r[n].until<=t&&t<=r[n].since)return r[n].name;return""}function Hh(){var n,e,t,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),r[n].since<=t&&t<=r[n].until||r[n].until<=t&&t<=r[n].since)return r[n].narrow;return""}function Wh(){var n,e,t,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),r[n].since<=t&&t<=r[n].until||r[n].until<=t&&t<=r[n].since)return r[n].abbr;return""}function qh(){var n,e,t,r,s=this.localeData().eras();for(n=0,e=s.length;n<e;++n)if(t=s[n].since<=s[n].until?1:-1,r=this.clone().startOf("day").valueOf(),s[n].since<=r&&r<=s[n].until||s[n].until<=r&&r<=s[n].since)return(this.year()-K(s[n].since).year())*t+s[n].offset;return this.year()}function Bh(n){return Pe(this,"_erasNameRegex")||Ks.call(this),n?this._erasNameRegex:this._erasRegex}function Vh(n){return Pe(this,"_erasAbbrRegex")||Ks.call(this),n?this._erasAbbrRegex:this._erasRegex}function xh(n){return Pe(this,"_erasNarrowRegex")||Ks.call(this),n?this._erasNarrowRegex:this._erasRegex}function Js(n,e){return e.erasAbbrRegex(n)}function zh(n,e){return e.erasNameRegex(n)}function Gh(n,e){return e.erasNarrowRegex(n)}function Jh(n,e){return e._eraYearOrdinalRegex||wn}function Ks(){var n=[],e=[],t=[],r=[],s,i,o,l,a,f=this.eras();for(s=0,i=f.length;s<i;++s)o=Ot(f[s].name),l=Ot(f[s].abbr),a=Ot(f[s].narrow),e.push(o),n.push(l),t.push(a),r.push(o),r.push(l),r.push(a);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}he(0,["gg",2],0,function(){return this.weekYear()%100});he(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ir(n,e){he(0,[n,n.length],0,e)}Ir("gggg","weekYear");Ir("ggggg","weekYear");Ir("GGGG","isoWeekYear");Ir("GGGGG","isoWeekYear");ae("G",Pr);ae("g",Pr);ae("GG",Ue,nt);ae("gg",Ue,nt);ae("GGGG",Ys,Ls);ae("gggg",Ys,Ls);ae("GGGGG",Mr,Or);ae("ggggg",Mr,Or);Vn(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,r){e[r.substr(0,2)]=ke(n)});Vn(["gg","GG"],function(n,e,t,r){e[r]=K.parseTwoDigitYear(n)});function Kh(n){return tl.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Zh(n){return tl.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function Qh(){return Ct(this.year(),1,4)}function Xh(){return Ct(this.isoWeekYear(),1,4)}function em(){var n=this.localeData()._week;return Ct(this.year(),n.dow,n.doy)}function tm(){var n=this.localeData()._week;return Ct(this.weekYear(),n.dow,n.doy)}function tl(n,e,t,r,s){var i;return n==null?Yn(this,r,s).year:(i=Ct(n,r,s),e>i&&(e=i),nm.call(this,n,e,t,r,s))}function nm(n,e,t,r,s){var i=Aa(n,e,t,r,s),o=Ln(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}he("Q",0,"Qo","quarter");ae("Q",$a);Le("Q",function(n,e){e[Dt]=(ke(n)-1)*3});function rm(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}he("D",["DD",2],"Do","date");ae("D",Ue,yn);ae("DD",Ue,nt);ae("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Le(["D","DD"],mt);Le("Do",function(n,e){e[mt]=ke(n.match(Ue)[0])});var nl=kn("Date",!0);he("DDD",["DDDD",3],"DDDo","dayOfYear");ae("DDD",Cr);ae("DDDD",Sa);Le(["DDD","DDDD"],function(n,e,t){t._dayOfYear=ke(n)});function sm(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}he("m",["mm",2],0,"minute");ae("m",Ue,Ns);ae("mm",Ue,nt);Le(["m","mm"],ct);var im=kn("Minutes",!1);he("s",["ss",2],0,"second");ae("s",Ue,Ns);ae("ss",Ue,nt);Le(["s","ss"],Tt);var om=kn("Seconds",!1);he("S",0,0,function(){return~~(this.millisecond()/100)});he(0,["SS",2],0,function(){return~~(this.millisecond()/10)});he(0,["SSS",3],0,"millisecond");he(0,["SSSS",4],0,function(){return this.millisecond()*10});he(0,["SSSSS",5],0,function(){return this.millisecond()*100});he(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});he(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});he(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});he(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ae("S",Cr,$a);ae("SS",Cr,nt);ae("SSS",Cr,Sa);var Lt,rl;for(Lt="SSSS";Lt.length<=9;Lt+="S")ae(Lt,wn);function am(n,e){e[Vt]=ke(("0."+n)*1e3)}for(Lt="S";Lt.length<=9;Lt+="S")Le(Lt,am);rl=kn("Milliseconds",!1);he("z",0,0,"zoneAbbr");he("zz",0,0,"zoneName");function lm(){return this._isUTC?"UTC":""}function cm(){return this._isUTC?"Coordinated Universal Time":""}var ee=qn.prototype;ee.add=th;ee.calendar=lh;ee.clone=ch;ee.diff=ph;ee.endOf=Th;ee.format=wh;ee.from=yh;ee.fromNow=kh;ee.to=$h;ee.toNow=Sh;ee.get=vf;ee.invalidAt=Ih;ee.isAfter=uh;ee.isBefore=fh;ee.isBetween=dh;ee.isSame=hh;ee.isSameOrAfter=mh;ee.isSameOrBefore=_h;ee.isValid=jh;ee.lang=Ka;ee.locale=Ja;ee.localeData=Za;ee.max=jd;ee.min=Ed;ee.parsingFlags=Ah;ee.set=wf;ee.startOf=Dh;ee.subtract=nh;ee.toArray=Ph;ee.toObject=Rh;ee.toDate=Mh;ee.toISOString=bh;ee.inspect=vh;typeof Symbol<"u"&&Symbol.for!=null&&(ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ee.toJSON=Eh;ee.toString=gh;ee.unix=Ch;ee.valueOf=Oh;ee.creationData=Lh;ee.eraName=Fh;ee.eraNarrow=Hh;ee.eraAbbr=Wh;ee.eraYear=qh;ee.year=Oa;ee.isLeapYear=bf;ee.weekYear=Kh;ee.isoWeekYear=Zh;ee.quarter=ee.quarters=rm;ee.month=Ea;ee.daysInMonth=Mf;ee.week=ee.weeks=Yf;ee.isoWeek=ee.isoWeeks=Nf;ee.weeksInYear=em;ee.weeksInWeekYear=tm;ee.isoWeeksInYear=Qh;ee.isoWeeksInISOWeekYear=Xh;ee.date=nl;ee.day=ee.days=Zf;ee.weekday=Qf;ee.isoWeekday=Xf;ee.dayOfYear=sm;ee.hour=ee.hours=od;ee.minute=ee.minutes=im;ee.second=ee.seconds=om;ee.millisecond=ee.milliseconds=rl;ee.utcOffset=Wd;ee.utc=Bd;ee.local=Vd;ee.parseZone=xd;ee.hasAlignedHourOffset=zd;ee.isDST=Gd;ee.isLocal=Kd;ee.isUtcOffset=Zd;ee.isUtc=Va;ee.isUTC=Va;ee.zoneAbbr=lm;ee.zoneName=cm;ee.dates=it("dates accessor is deprecated. Use date instead.",nl);ee.months=it("months accessor is deprecated. Use month instead",Ea);ee.years=it("years accessor is deprecated. Use year instead",Oa);ee.zone=it("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",qd);ee.isDSTShifted=it("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Jd);function um(n){return Ne(n*1e3)}function fm(){return Ne.apply(null,arguments).parseZone()}function sl(n){return n}var Re=js.prototype;Re.calendar=Ju;Re.longDateFormat=Xu;Re.invalidDate=tf;Re.ordinal=sf;Re.preparse=sl;Re.postformat=sl;Re.relativeTime=af;Re.pastFuture=lf;Re.set=zu;Re.eras=Yh;Re.erasParse=Nh;Re.erasConvertYear=Uh;Re.erasAbbrRegex=Vh;Re.erasNameRegex=Bh;Re.erasNarrowRegex=xh;Re.months=Df;Re.monthsShort=Tf;Re.monthsParse=Cf;Re.monthsRegex=Rf;Re.monthsShortRegex=Pf;Re.week=jf;Re.firstDayOfYear=Lf;Re.firstDayOfWeek=If;Re.weekdays=xf;Re.weekdaysMin=Gf;Re.weekdaysShort=zf;Re.weekdaysParse=Kf;Re.weekdaysRegex=ed;Re.weekdaysShortRegex=td;Re.weekdaysMinRegex=nd;Re.isPM=sd;Re.meridiem=ad;function _r(n,e,t,r){var s=Pt(),i=vt().set(r,e);return s[t](i,n)}function il(n,e,t){if(Mt(n)&&(e=n,n=void 0),n=n||"",e!=null)return _r(n,e,t,"month");var r,s=[];for(r=0;r<12;r++)s[r]=_r(n,r,t,"month");return s}function Zs(n,e,t,r){typeof n=="boolean"?(Mt(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Mt(e)&&(t=e,e=void 0),e=e||"");var s=Pt(),i=n?s._week.dow:0,o,l=[];if(t!=null)return _r(e,(t+i)%7,r,"day");for(o=0;o<7;o++)l[o]=_r(e,(o+i)%7,r,"day");return l}function dm(n,e){return il(n,e,"months")}function hm(n,e){return il(n,e,"monthsShort")}function mm(n,e,t){return Zs(n,e,t,"weekdays")}function _m(n,e,t){return Zs(n,e,t,"weekdaysShort")}function pm(n,e,t){return Zs(n,e,t,"weekdaysMin")}Yt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=ke(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});K.lang=it("moment.lang is deprecated. Use moment.locale instead.",Yt);K.langData=it("moment.langData is deprecated. Use moment.localeData instead.",Pt);var yt=Math.abs;function gm(){var n=this._data;return this._milliseconds=yt(this._milliseconds),this._days=yt(this._days),this._months=yt(this._months),n.milliseconds=yt(n.milliseconds),n.seconds=yt(n.seconds),n.minutes=yt(n.minutes),n.hours=yt(n.hours),n.months=yt(n.months),n.years=yt(n.years),this}function ol(n,e,t,r){var s=ht(e,t);return n._milliseconds+=r*s._milliseconds,n._days+=r*s._days,n._months+=r*s._months,n._bubble()}function bm(n,e){return ol(this,n,e,1)}function vm(n,e){return ol(this,n,e,-1)}function Ii(n){return n<0?Math.floor(n):Math.ceil(n)}function wm(){var n=this._milliseconds,e=this._days,t=this._months,r=this._data,s,i,o,l,a;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=Ii(_s(t)+e)*864e5,e=0,t=0),r.milliseconds=n%1e3,s=st(n/1e3),r.seconds=s%60,i=st(s/60),r.minutes=i%60,o=st(i/60),r.hours=o%24,e+=st(o/24),a=st(al(e)),t+=a,e-=Ii(_s(a)),l=st(t/12),t%=12,r.days=e,r.months=t,r.years=l,this}function al(n){return n*4800/146097}function _s(n){return n*146097/4800}function ym(n){if(!this.isValid())return NaN;var e,t,r=this._milliseconds;if(n=ot(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+r/864e5,t=this._months+al(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(_s(this._months)),n){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+n)}}function Rt(n){return function(){return this.as(n)}}var ll=Rt("ms"),km=Rt("s"),$m=Rt("m"),Sm=Rt("h"),Dm=Rt("d"),Tm=Rt("w"),Om=Rt("M"),Cm=Rt("Q"),Mm=Rt("y"),Pm=ll;function Rm(){return ht(this)}function Em(n){return n=ot(n),this.isValid()?this[n+"s"]():NaN}function Gt(n){return function(){return this.isValid()?this._data[n]:NaN}}var jm=Gt("milliseconds"),Am=Gt("seconds"),Im=Gt("minutes"),Lm=Gt("hours"),Ym=Gt("days"),Nm=Gt("months"),Um=Gt("years");function Fm(){return st(this.days()/7)}var kt=Math.round,sn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Hm(n,e,t,r,s){return s.relativeTime(e||1,!!t,n,r)}function Wm(n,e,t,r){var s=ht(n).abs(),i=kt(s.as("s")),o=kt(s.as("m")),l=kt(s.as("h")),a=kt(s.as("d")),f=kt(s.as("M")),d=kt(s.as("w")),m=kt(s.as("y")),_=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(_=_||d<=1&&["w"]||d<t.w&&["ww",d]),_=_||f<=1&&["M"]||f<t.M&&["MM",f]||m<=1&&["y"]||["yy",m],_[2]=e,_[3]=+n>0,_[4]=r,Hm.apply(null,_)}function qm(n){return n===void 0?kt:typeof n=="function"?(kt=n,!0):!1}function Bm(n,e){return sn[n]===void 0?!1:e===void 0?sn[n]:(sn[n]=e,n==="s"&&(sn.ss=e-1),!0)}function Vm(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,r=sn,s,i;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(r=Object.assign({},sn,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),s=this.localeData(),i=Wm(this,!t,r,s),t&&(i=s.pastFuture(+this,i)),s.postformat(i)}var Kr=Math.abs;function en(n){return(n>0)-(n<0)||+n}function Lr(){if(!this.isValid())return this.localeData().invalidDate();var n=Kr(this._milliseconds)/1e3,e=Kr(this._days),t=Kr(this._months),r,s,i,o,l=this.asSeconds(),a,f,d,m;return l?(r=st(n/60),s=st(r/60),n%=60,r%=60,i=st(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",f=en(this._months)!==en(l)?"-":"",d=en(this._days)!==en(l)?"-":"",m=en(this._milliseconds)!==en(l)?"-":"",a+"P"+(i?f+i+"Y":"")+(t?f+t+"M":"")+(e?d+e+"D":"")+(s||r||n?"T":"")+(s?m+s+"H":"")+(r?m+r+"M":"")+(n?m+o+"S":"")):"P0D"}var Me=Ar.prototype;Me.isValid=Nd;Me.abs=gm;Me.add=bm;Me.subtract=vm;Me.as=ym;Me.asMilliseconds=ll;Me.asSeconds=km;Me.asMinutes=$m;Me.asHours=Sm;Me.asDays=Dm;Me.asWeeks=Tm;Me.asMonths=Om;Me.asQuarters=Cm;Me.asYears=Mm;Me.valueOf=Pm;Me._bubble=wm;Me.clone=Rm;Me.get=Em;Me.milliseconds=jm;Me.seconds=Am;Me.minutes=Im;Me.hours=Lm;Me.days=Ym;Me.weeks=Fm;Me.months=Nm;Me.years=Um;Me.humanize=Vm;Me.toISOString=Lr;Me.toString=Lr;Me.toJSON=Lr;Me.locale=Ja;Me.localeData=Za;Me.toIsoString=it("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Lr);Me.lang=Ka;he("X",0,0,"unix");he("x",0,0,"valueOf");ae("x",Pr);ae("X",df);Le("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});Le("x",function(n,e,t){t._d=new Date(ke(n))});//! moment.js
K.version="2.30.1";Vu(Ne);K.fn=ee;K.min=Ad;K.max=Id;K.now=Ld;K.utc=vt;K.unix=um;K.months=dm;K.isDate=Wn;K.locale=Yt;K.invalid=Tr;K.duration=ht;K.isMoment=dt;K.weekdays=mm;K.parseZone=fm;K.localeData=Pt;K.isDuration=tr;K.monthsShort=hm;K.weekdaysMin=pm;K.defineLocale=qs;K.updateLocale=fd;K.locales=dd;K.weekdaysShort=_m;K.normalizeUnits=ot;K.relativeTimeRounding=qm;K.relativeTimeThreshold=Bm;K.calendarFormat=ah;K.prototype=ee;K.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Li(n,e,t){const r=n.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function Yi(n,e,t){const r=n.slice();return r[13]=e[t][0],r[17]=e[t][1],r}function Ni(n,e,t){const r=n.slice();return r[13]=e[t][0],r[20]=e[t][1],r}function Ui(n,e,t){const r=n.slice();return r[13]=e[t][0],r[23]=e[t][1],r}function xm(n){let e,t;return e=new Dr({props:{message:n[7]}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&128&&(i.message=r[7]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function zm(n){let e,t;return e=new gt({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[Gm]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&67108872&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Fi(n){let e,t;return e=new Bu({props:{id:n[23].book_id,title:n[23].title,label:n[23].status=="Borrowed"?`Due: ${K(n[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:n[23].status=="Borrowed"?"danger":"secondary"}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&8&&(i.id=r[23].book_id),s&8&&(i.title=r[23].title),s&8&&(i.label=r[23].status=="Borrowed"?`Due: ${K(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),s&8&&(i.color=r[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Gm(n){let e,t,r=Ce(Object.entries(n[3])),s=[];for(let o=0;o<r.length;o+=1)s[o]=Fi(Ui(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row justify-content-center justify-content-md-start")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&8){r=Ce(Object.entries(o[3]));let a;for(a=0;a<r.length;a+=1){const f=Ui(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=Fi(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function Jm(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Km(n){let e,t;return e=new Dr({props:{message:n[4]}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&16&&(i.message=r[4]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Zm(n){let e,t,r=Ce(Object.entries(n[0])),s=[];for(let o=0;o<r.length;o+=1)s[o]=Hi(Ni(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&1){r=Ce(Object.entries(o[0]));let a;for(a=0;a<r.length;a+=1){const f=Ni(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=Hi(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function Hi(n){let e,t;return e=new Sr({props:{title:n[20].title,id:n[20].book_id,author:n[20].author}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&1&&(i.title=r[20].title),s&1&&(i.id=r[20].book_id),s&1&&(i.author=r[20].author),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Qm(n){let e,t,r,s;const i=[Zm,Km,Jm],o=[];function l(a,f){return a[0]?0:a[4]?1:2}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function Xm(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function e_(n){let e,t;return e=new Dr({props:{message:n[5]}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&32&&(i.message=r[5]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function t_(n){let e,t,r=Ce(Object.entries(n[1])),s=[];for(let o=0;o<r.length;o+=1)s[o]=Wi(Yi(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const f=Yi(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=Wi(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function Wi(n){let e,t;return e=new pa({props:{id:n[17].author_id,name:n[17].name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&2&&(i.id=r[17].author_id),s&2&&(i.name=r[17].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function n_(n){let e,t,r,s;const i=[t_,e_,Xm],o=[];function l(a,f){return a[1]?0:a[5]?1:2}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function r_(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function s_(n){let e,t;return e=new Dr({props:{message:n[6]}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&64&&(i.message=r[6]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function i_(n){let e,t,r=Ce(Object.entries(n[2])),s=[];for(let o=0;o<r.length;o+=1)s[o]=qi(Li(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2]));let a;for(a=0;a<r.length;a+=1){const f=Li(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=qi(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function qi(n){let e,t;return e=new ga({props:{id:n[14].publisher_id,name:n[14].name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&4&&(i.id=r[14].publisher_id),s&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function o_(n){let e,t,r,s;const i=[i_,s_,r_],o=[];function l(a,f){return a[2]?0:a[6]?1:2}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function a_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g;t=new Ou({});const p=[zm,xm],b=[];function y(v,S){return v[3]&&v[3].length!=0?0:v[7]?1:-1}return~(s=y(n))&&(i=b[s]=p[s](n)),l=new gt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Qm]},$$scope:{ctx:n}}}),f=new gt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[n_]},$$scope:{ctx:n}}}),m=new gt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[o_]},$$scope:{ctx:n}}}),{c(){e=h("main"),x(t.$$.fragment),r=w(),i&&i.c(),o=w(),x(l.$$.fragment),a=w(),x(f.$$.fragment),d=w(),x(m.$$.fragment),u(e,"class","container mb-5")},m(v,S){M(v,e,S),B(t,e,null),c(e,r),~s&&b[s].m(e,null),c(e,o),B(l,e,null),c(e,a),B(f,e,null),c(e,d),B(m,e,null),g=!0},p(v,[S]){let k=s;s=y(v),s===k?~s&&b[s].p(v,S):(i&&(je(),P(b[k],1,1,()=>{b[k]=null}),Ae()),~s?(i=b[s],i?i.p(v,S):(i=b[s]=p[s](v),i.c()),O(i,1),i.m(e,o)):i=null);const D={};S&67108881&&(D.$$scope={dirty:S,ctx:v}),l.$set(D);const $={};S&67108898&&($.$$scope={dirty:S,ctx:v}),f.$set($);const T={};S&67108932&&(T.$$scope={dirty:S,ctx:v}),m.$set(T)},i(v){g||(O(t.$$.fragment,v),O(i),O(l.$$.fragment,v),O(f.$$.fragment,v),O(m.$$.fragment,v),v&&(_||Ie(()=>{_=Ve(e,xe,{duration:500}),_.start()})),g=!0)},o(v){P(t.$$.fragment,v),P(i),P(l.$$.fragment,v),P(f.$$.fragment,v),P(m.$$.fragment,v),g=!1},d(v){v&&C(e),V(t),~s&&b[s].d(),V(l),V(f),V(m)}}}function l_(n,e,t){const r=localStorage.getItem("user_id")||"";let s,i,o,l,a,f,d,m;async function _(){const{data:y,error:v}=await ce.rpc("get_books");t(0,s=y),t(4,a=v?v.message:"")}async function g(){const{data:y,error:v}=await ce.rpc("get_authors");t(1,i=y),t(5,f=v?v.message:"")}async function p(){const{data:y,error:v}=await ce.rpc("get_publishers");t(2,o=y),t(6,d=v||"")}async function b(){const{data:y,error:v}=await ce.rpc("get_inventory",{loggedid:r});t(3,l=y),console.log(l),t(7,m=v||"")}return _(),g(),p(),b(),[s,i,o,l,a,f,d,m]}class c_ extends Te{constructor(e){super(),De(this,e,l_,a_,$e,{})}}function Bi(n){let e,t,r;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-printer"></i> Print',u(e,"class","btn btn-outline-primary btn-sm col-1")},m(s,i){M(s,e,i),t||(r=q(e,"click",n[3]),t=!0)},p:Z,d(s){s&&C(e),t=!1,r()}}}function u_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$=n[1]&&Bi(n);return{c(){e=h("div"),t=h("div"),r=h("button"),r.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=w(),i=h("div"),o=h("h4"),l=re(n[0]),a=w(),$&&$.c(),f=w(),d=h("div"),m=h("h1"),m.innerHTML=`<b><i class="bi bi-book"></i>
      Zenodotus</b>`,_=w(),g=h("h6"),g.textContent="CTADVDBL Project",p=w(),b=h("h4"),y=re(n[0]),v=w(),S=h("small"),S.textContent=`Printed by: Staff #${localStorage.getItem("user_id")}`,u(r,"class","btn"),Xe(r,"font-size","1.5em"),u(o,"class","my-auto"),u(t,"class","d-flex align-items-center"),u(e,"class","d-flex border-bottom border-1 my-3 align-items-center d-print-none justify-content-between"),u(m,"class","m-0"),u(b,"class","mb-0"),u(d,"class","justify-content-center align-items-center d-none d-print-flex flex-column mt-3")},m(T,R){M(T,e,R),c(e,t),c(t,r),c(t,s),c(t,i),c(i,o),c(o,l),c(e,a),$&&$.m(e,null),M(T,f,R),M(T,d,R),c(d,m),c(d,_),c(d,g),c(d,p),c(d,b),c(b,y),c(d,v),c(d,S),k||(D=q(r,"click",n[2]),k=!0)},p(T,[R]){R&1&&ue(l,T[0]),T[1]?$?$.p(T,R):($=Bi(T),$.c(),$.m(e,null)):$&&($.d(1),$=null),R&1&&ue(y,T[0])},i:Z,o:Z,d(T){T&&(C(e),C(f),C(d)),$&&$.d(),k=!1,D()}}}function f_(n,e,t){let{text:r}=e,{print:s=!1}=e;const i=()=>ts(),o=()=>window.print();return n.$$set=l=>{"text"in l&&t(0,r=l.text),"print"in l&&t(1,s=l.print)},[r,s,i,o]}class et extends Te{constructor(e){super(),De(this,e,f_,u_,$e,{text:0,print:1})}}function d_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D;const $=n[5].default,T=gr($,n,n[4],null);return{c(){e=h("div"),t=h("div"),r=h("div"),s=h("div"),i=h("h1"),o=re(n[0]),l=w(),a=h("button"),f=w(),d=h("div"),T&&T.c(),m=w(),_=h("div"),g=h("button"),p=re(n[3]),b=w(),y=h("button"),v=re(n[2]),u(i,"class","modal-title fs-5"),u(i,"id","exampleModalLabel"),u(a,"type","button"),u(a,"class","btn-close"),u(a,"data-bs-dismiss","modal"),u(a,"aria-label","Close"),u(s,"class","modal-header"),u(d,"class","modal-body"),u(g,"type","button"),u(g,"class","btn btn-secondary"),u(g,"data-bs-dismiss","modal"),u(y,"type","button"),u(y,"class","btn btn-primary"),u(y,"data-bs-dismiss","modal"),u(_,"class","modal-footer"),u(r,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id",n[1]),u(e,"tabindex","-1"),u(e,"aria-hidden","true")},m(R,E){M(R,e,E),c(e,t),c(t,r),c(r,s),c(s,i),c(i,o),c(s,l),c(s,a),c(r,f),c(r,d),T&&T.m(d,null),c(r,m),c(r,_),c(_,g),c(g,p),c(_,b),c(_,y),c(y,v),S=!0,k||(D=q(y,"click",n[6]),k=!0)},p(R,[E]){(!S||E&1)&&ue(o,R[0]),T&&T.p&&(!S||E&16)&&vr(T,$,R,R[4],S?br($,R[4],E,null):wr(R[4]),null),(!S||E&8)&&ue(p,R[3]),(!S||E&4)&&ue(v,R[2]),(!S||E&2)&&u(e,"id",R[1])},i(R){S||(O(T,R),S=!0)},o(R){P(T,R),S=!1},d(R){R&&C(e),T&&T.d(R),k=!1,D()}}}function h_(n,e,t){let{$$slots:r={},$$scope:s}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function f(d){lr.call(this,n,d)}return n.$$set=d=>{"title"in d&&t(0,i=d.title),"id"in d&&t(1,o=d.id),"pButton"in d&&t(2,l=d.pButton),"sButton"in d&&t(3,a=d.sButton),"$$scope"in d&&t(4,s=d.$$scope)},[i,o,l,a,s,r,f]}class m_ extends Te{constructor(e){super(),De(this,e,h_,d_,$e,{title:0,id:1,pButton:2,sButton:3})}}function __(n){let e,t,r;return{c(){e=h("div"),t=h("div"),t.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',u(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Xe(t,"height","70vh"),u(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Xe(e,"background-color","var(--bs-body-bg)"),Xe(e,"width","100vw"),Xe(e,"height","100vh")},m(s,i){M(s,e,i),c(e,t)},p:Z,i(s){s&&(r||Ie(()=>{r=Ve(t,xe,{duration:500}),r.start()}))},o:Z,d(s){s&&C(e)}}}class Qs extends Te{constructor(e){super(),De(this,e,null,__,$e,{})}}function Vi(n,e,t){const r=n.slice();return r[29]=e[t][0],r[30]=e[t][1],r}function xi(n,e,t){const r=n.slice();return r[29]=e[t][0],r[33]=e[t][1],r}function zi(n){let e,t;return e=new Qs({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function p_(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function g_(n){let e,t,r,s,i,o=n[3].isbn+"",l,a,f,d,m,_,g=n[3].title+"",p,b,y,v,S=n[3].description+"",k,D,$,T,R,E,I=n[3].author.name+"",Y,N,z,ne,j,Q,A,U=n[3].publisher.name+"",F,L,W,H,oe,J,te,X,de,le,se=n[3].shelf_number+"",_e;function me(ge,He){return ge[10]?v_:b_}let fe=me(n),we=fe(n),Oe=n[1]=="client"&&Gi(n),pe=n[1]=="staff"&&Ji(n),ie=n[4]&&Ki(n);return{c(){e=h("div"),t=h("div"),we.c(),r=w(),s=h("small"),i=re("ISBN: "),l=re(o),a=w(),Oe&&Oe.c(),f=w(),d=h("div"),m=h("div"),_=h("h1"),p=re(g),b=w(),pe&&pe.c(),y=w(),v=h("p"),k=re(S),D=w(),$=h("p"),T=h("b"),T.textContent="Author:",R=w(),E=h("a"),Y=re(I),z=w(),ne=h("p"),j=h("b"),j.textContent="Publisher:",Q=w(),A=h("a"),F=re(U),W=w(),H=h("p"),oe=h("b"),oe.textContent="Category:",J=w(),ie&&ie.c(),te=w(),X=h("p"),de=h("b"),de.textContent="Shelf No.:",le=w(),_e=re(se),u(s,"class","text-secondary"),u(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),u(_,"id","book-title"),u(_,"class","flex-fill"),u(m,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(v,"id","book-description"),u(E,"href",N="./#/author/"+n[3].author.author_id),u(A,"href",L="./#/publisher/"+n[3].publisher.publisher_id),u(d,"id","details-container"),u(d,"class","container mt-md-0 mt-3"),u(e,"class","d-md-flex d-block")},m(ge,He){M(ge,e,He),c(e,t),we.m(t,null),c(t,r),c(t,s),c(s,i),c(s,l),c(t,a),Oe&&Oe.m(t,null),c(e,f),c(e,d),c(d,m),c(m,_),c(_,p),c(m,b),pe&&pe.m(m,null),c(d,y),c(d,v),c(v,k),c(d,D),c(d,$),c($,T),c($,R),c($,E),c(E,Y),c(d,z),c(d,ne),c(ne,j),c(ne,Q),c(ne,A),c(A,F),c(d,W),c(d,H),c(H,oe),c(H,J),ie&&ie.m(H,null),c(d,te),c(d,X),c(X,de),c(X,le),c(X,_e)},p(ge,He){fe===(fe=me(ge))&&we?we.p(ge,He):(we.d(1),we=fe(ge),we&&(we.c(),we.m(t,r))),He[0]&8&&o!==(o=ge[3].isbn+"")&&ue(l,o),ge[1]=="client"?Oe?Oe.p(ge,He):(Oe=Gi(ge),Oe.c(),Oe.m(t,null)):Oe&&(Oe.d(1),Oe=null),He[0]&8&&g!==(g=ge[3].title+"")&&ue(p,g),ge[1]=="staff"?pe?pe.p(ge,He):(pe=Ji(ge),pe.c(),pe.m(m,null)):pe&&(pe.d(1),pe=null),He[0]&8&&S!==(S=ge[3].description+"")&&ue(k,S),He[0]&8&&I!==(I=ge[3].author.name+"")&&ue(Y,I),He[0]&8&&N!==(N="./#/author/"+ge[3].author.author_id)&&u(E,"href",N),He[0]&8&&U!==(U=ge[3].publisher.name+"")&&ue(F,U),He[0]&8&&L!==(L="./#/publisher/"+ge[3].publisher.publisher_id)&&u(A,"href",L),ge[4]?ie?ie.p(ge,He):(ie=Ki(ge),ie.c(),ie.m(H,null)):ie&&(ie.d(1),ie=null),He[0]&8&&se!==(se=ge[3].shelf_number+"")&&ue(_e,se)},i:Z,o:Z,d(ge){ge&&C(e),we.d(),Oe&&Oe.d(),pe&&pe.d(),ie&&ie.d()}}}function b_(n){let e,t,r,s;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Be(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+n[3].book_id+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Xe(e,"object-fit","contain")},m(i,o){M(i,e,o),r||(s=q(e,"error",n[18]),r=!0)},p(i,o){o[0]&8&&!Be(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[3].book_id+".jpg")&&u(e,"src",t)},d(i){i&&C(e),r=!1,s()}}}function v_(n){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Be(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Xe(e,"object-fit","contain")},m(r,s){M(r,e,s)},p:Z,d(r){r&&C(e)}}}function Gi(n){let e;function t(i,o){return i[7]?$_:i[0]?k_:i[8]==0?y_:w_}let r=t(n),s=r(n);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),M(i,e,o)},p(i,o){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&C(e),s.d(i)}}}function w_(n){let e,t,r;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,u(e,"class","btn btn-primary w-50")},m(s,i){M(s,e,i),t||(r=q(e,"click",n[14]),t=!0)},p:Z,d(s){s&&C(e),t=!1,r()}}}function y_(n){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,u(e,"class","btn btn-secondary w-50")},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function k_(n){let e,t,r,s,i,o,l;return{c(){e=h("button"),t=h("i"),r=w(),s=re(n[11]),u(t,"class","bi bi-x-circle"),u(e,"class",i="btn "+n[9]+" w-75")},m(a,f){M(a,e,f),c(e,t),c(e,r),c(e,s),o||(l=[q(e,"mouseenter",n[19]),q(e,"mouseleave",n[20]),q(e,"click",n[15])],o=!0)},p(a,f){f[0]&2048&&ue(s,a[11]),f[0]&512&&i!==(i="btn "+a[9]+" w-75")&&u(e,"class",i)},d(a){a&&C(e),o=!1,ve(l)}}}function $_(n){let e,t,r,s;return{c(){e=h("button"),t=re("Borrowed (#"),r=re(n[7]),s=re(")"),u(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){M(i,e,o),c(e,t),c(e,r),c(e,s)},p(i,o){o[0]&128&&ue(r,i[7])},d(i){i&&C(e)}}}function Ji(n){let e,t,r,s,i,o,l,a;function f(_,g){if(_[3].storage_type=="public")return D_;if(_[3].storage_type=="private")return S_}let d=f(n),m=d&&d(n);return{c(){e=h("div"),t=h("a"),r=h("button"),r.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',s=w(),i=h("span"),i.textContent="|",o=w(),m&&m.c(),l=w(),a=h("button"),a.innerHTML='<i class="bi bi-trash3-fill"></i> <div class="d-none d-sm-inline"></div>',u(r,"class","btn btn-outline-primary"),u(t,"href","./#/update-book?id="+n[12]),u(i,"class","mx-2"),u(a,"class","btn btn-outline-danger"),u(a,"title","Delete Permanently"),u(e,"class","d-print-none")},m(_,g){M(_,e,g),c(e,t),c(t,r),c(e,s),c(e,i),c(e,o),m&&m.m(e,null),c(e,l),c(e,a)},p(_,g){d!==(d=f(_))&&(m&&m.d(1),m=d&&d(_),m&&(m.c(),m.m(e,l)))},d(_){_&&C(e),m&&m.d()}}}function S_(n){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-file-earmark-lock"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to public")},m(t,r){M(t,e,r)},d(t){t&&C(e)}}}function D_(n){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-globe-americas"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to private")},m(t,r){M(t,e,r)},d(t){t&&C(e)}}}function Ki(n){let e,t=Ce(Object.entries(n[4])),r=[];for(let s=0;s<t.length;s+=1)r[s]=Zi(xi(n,t,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ge()},m(s,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(s,i);M(s,e,i)},p(s,i){if(i[0]&16){t=Ce(Object.entries(s[4]));let o;for(o=0;o<t.length;o+=1){const l=xi(s,t,o);r[o]?r[o].p(l,i):(r[o]=Zi(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function Zi(n){let e,t=n[33].category.name+"",r,s;return{c(){e=h("a"),r=re(t),s=re(`\r
                `),u(e,"href","./#/")},m(i,o){M(i,e,o),c(e,r),M(i,s,o)},p(i,o){o[0]&16&&t!==(t=i[33].category.name+"")&&ue(r,t)},d(i){i&&(C(e),C(s))}}}function Qi(n){let e,t;return e=new gt({props:{title:"Status",icon:"journal",$$slots:{default:[C_]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s[0]&96|s[1]&32&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Xi(n){let e;function t(i,o){return i[6].length<=0?O_:T_}let r=t(n),s=r(n);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),M(i,e,o)},p(i,o){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&C(e),s.d(i)}}}function T_(n){let e,t,r,s,i=Ce(Object.entries(n[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=eo(Vi(n,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=w(),s=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();u(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){M(l,e,a),c(e,t),c(e,r),c(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(l,a){if(a[0]&64){i=Ce(Object.entries(l[6]));let f;for(f=0;f<i.length;f+=1){const d=Vi(l,i,f);o[f]?o[f].p(d,a):(o[f]=eo(d),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&C(e),ze(o,l)}}}function O_(n){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",u(e,"class","text-center my-5")},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function eo(n){let e,t,r=n[30].barcode+"",s,i,o,l=n[30].status!="Available"?`${n[30].fname} ${n[30].lname}`:"--",a,f,d,m=n[30].status+"",_,g,p=n[30].reservation_id?`(${n[30].reservation_id})`:n[30].borrow_id?`(${n[30].borrow_id})`:"",b,y,v,S,k,D,$=n[30].status=="Borrowed"?"Return":"Borrow",T,R,E,I,Y;return{c(){e=h("tr"),t=h("td"),s=re(r),i=w(),o=h("td"),a=re(l),f=w(),d=h("td"),_=re(m),g=w(),b=re(p),v=w(),S=h("td"),k=h("a"),D=h("small"),T=re($),R=w(),E=h("i"),Y=w(),u(d,"class",y=n[30].status=="Available"?"text-bg-success":n[30].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),u(E,"class","bi bi-box-arrow-up-right"),u(k,"href",I=n[30].status=="Available"?`./#/borrow?barcode=${n[30].barcode}`:n[30].status=="Reserved"?`./#/borrow?reserve_id=${n[30].reservation_id}`:`./#/return?borrow_id=${n[30].borrow_id}`),u(k,"class","btn btn-outline-primary btn-sm")},m(N,z){M(N,e,z),c(e,t),c(t,s),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,_),c(d,g),c(d,b),c(e,v),c(e,S),c(S,k),c(k,D),c(D,T),c(D,R),c(D,E),c(e,Y)},p(N,z){z[0]&64&&r!==(r=N[30].barcode+"")&&ue(s,r),z[0]&64&&l!==(l=N[30].status!="Available"?`${N[30].fname} ${N[30].lname}`:"--")&&ue(a,l),z[0]&64&&m!==(m=N[30].status+"")&&ue(_,m),z[0]&64&&p!==(p=N[30].reservation_id?`(${N[30].reservation_id})`:N[30].borrow_id?`(${N[30].borrow_id})`:"")&&ue(b,p),z[0]&64&&y!==(y=N[30].status=="Available"?"text-bg-success":N[30].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&u(d,"class",y),z[0]&64&&$!==($=N[30].status=="Borrowed"?"Return":"Borrow")&&ue(T,$),z[0]&64&&I!==(I=N[30].status=="Available"?`./#/borrow?barcode=${N[30].barcode}`:N[30].status=="Reserved"?`./#/borrow?reserve_id=${N[30].reservation_id}`:`./#/return?borrow_id=${N[30].borrow_id}`)&&u(k,"href",I)},d(N){N&&C(e)}}}function C_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p=n[6]&&Xi(n);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",r=w(),s=h("div"),i=h("input"),o=w(),l=h("button"),l.textContent="Generate",a=w(),f=h("button"),f.textContent="Add",d=w(),p&&p.c(),m=Ge(),u(t,"for","copy"),u(t,"class","form=control col-auto"),u(i,"type","text"),u(i,"class","form-control"),u(i,"id","copy"),u(i,"placeholder","Barcode Number"),u(s,"class","col-4"),u(l,"class","btn btn-outline-primary col-1"),u(f,"class","btn btn-primary col-1"),u(e,"class","row justify-content-center align-items-center my-3 gap-2")},m(b,y){M(b,e,y),c(e,t),c(e,r),c(e,s),c(s,i),G(i,n[5]),c(e,o),c(e,l),c(e,a),c(e,f),M(b,d,y),p&&p.m(b,y),M(b,m,y),_||(g=[q(i,"input",n[21]),q(l,"click",n[16]),q(f,"click",n[13])],_=!0)},p(b,y){y[0]&32&&i.value!==b[5]&&G(i,b[5]),b[6]?p?p.p(b,y):(p=Xi(b),p.c(),p.m(m.parentNode,m)):p&&(p.d(1),p=null)},d(b){b&&(C(e),C(d),C(m)),p&&p.d(b),_=!1,ve(g)}}}function M_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g=n[2]&&zi();s=new et({props:{text:"Book Details"}});const p=[g_,p_],b=[];function y(S,k){return S[3]?0:1}o=y(n),l=b[o]=p[o](n);let v=n[1]=="staff"&&Qi(n);return{c(){e=h("main"),g&&g.c(),t=w(),r=h("section"),x(s.$$.fragment),i=w(),l.c(),a=w(),v&&v.c(),f=w(),d=h("div"),u(d,"class","my-5"),u(e,"class","container")},m(S,k){M(S,e,k),g&&g.m(e,null),c(e,t),c(e,r),B(s,r,null),c(r,i),b[o].m(r,null),c(e,a),v&&v.m(e,null),c(e,f),c(e,d),_=!0},p(S,k){S[2]?g?k[0]&4&&O(g,1):(g=zi(),g.c(),O(g,1),g.m(e,t)):g&&(je(),P(g,1,1,()=>{g=null}),Ae());let D=o;o=y(S),o===D?b[o].p(S,k):(je(),P(b[D],1,1,()=>{b[D]=null}),Ae(),l=b[o],l?l.p(S,k):(l=b[o]=p[o](S),l.c()),O(l,1),l.m(r,null)),S[1]=="staff"?v?(v.p(S,k),k[0]&2&&O(v,1)):(v=Qi(S),v.c(),O(v,1),v.m(e,f)):v&&(je(),P(v,1,1,()=>{v=null}),Ae())},i(S){_||(O(g),O(s.$$.fragment,S),O(l),O(v),S&&(m||Ie(()=>{m=Ve(e,xe,{duration:500}),m.start()})),_=!0)},o(S){P(g),P(s.$$.fragment,S),P(l),P(v),_=!1},d(S){S&&C(e),g&&g.d(),V(s),b[o].d(),v&&v.d()}}}function to(){return 3e6+Math.floor(Math.random()*9e3)}function no(){return"1000"+Math.floor(Math.random()*9e3)}function P_(n,e,t){let r,s;Nt.subscribe(A=>t(1,s=A));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,f,d;async function m(){const{data:A,error:U}=await ce.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(A[0]),t(3,f=A[0]),A.length==0&&t(2,a=!0);const{data:F,error:L}=await ce.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",F),L&&console.error(L),F.length==0?(t(4,d={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",d)):t(4,d=F)}hn(m);let _;async function g(){const{data:A,error:U}=await ce.rpc("get_holdings",{bookid:l});U&&console.error(U),console.table(A),t(6,b=A)}async function p(){const{data:A}=await ce.from("library_holdings").select().eq("barcode",_);if(A.length!=0)return;const{error:U}=await ce.from("library_holdings").insert({book_id:l,barcode:_});if(U){console.error(U),alert(U.message);return}t(5,_="")}let b;s=="staff"&&(g(),ce.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},g).subscribe());let y,v,S=0,k="btn-secondary";s=="client"&&(T(),v||(D(),$()));async function D(){const{data:A,error:U}=await ce.rpc("isreserved",{bookid:l,studid:i});t(0,y=A)}async function $(){const{data:A,error:U}=await ce.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,S=A.length)}async function T(){const{data:A,error:U}=await ce.rpc("isborrowed",{bookid:l,studid:i});t(7,v=A)}async function R(){const{data:A,error:U}=await ce.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(U){console.error(U);return}const{error:F}=await ce.from("book_reservation").insert({reservation_id:await I(),stud_id:i,holding_id:A.holding_id});if(F){console.error(F);return}const{data:L,error:W}=await ce.from("library_holdings").update({status:"Reserved"}).eq("barcode",A.barcode).select("holding_id").single();if(W){console.error(W);return}D()}async function E(){const{data:A,error:U}=await ce.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:F}=await ce.from("library_holdings").update({status:"Available"}).eq("holding_id",A.holding_id);!U||!F?(D(),$()):(console.error(U),console.error(F))}async function I(){let A=to();const{data:U,error:F}=await ce.from("book_reservation").select().eq("reservation_id",A);return console.log(U),U.length!=0&&(A=to(),console.log("exists")),console.log(A),A}async function Y(){let A=no();const{data:U,error:F}=await ce.from("book_borrow").select().eq("borrow_id",A);console.log(U),U.length!=0&&(A=no(),console.log("exists")),t(5,_=A)}let N=!1;const z=()=>t(10,N=!0),ne=()=>{t(11,r="Cancel Reservation"),t(9,k="btn-danger")},j=()=>{t(11,r=`Reserved (#${y})`),t(9,k="btn-secondary")};function Q(){_=this.value,t(5,_)}return n.$$set=A=>{"params"in A&&t(17,o=A.params)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,r=`Reserved (${y})`)},[y,s,a,f,d,_,b,v,S,k,N,r,l,p,R,E,Y,o,z,ne,j,Q]}class cl extends Te{constructor(e){super(),De(this,e,P_,M_,$e,{params:17},null,[-1,-1])}}function R_(n){let e,t,r,s,i,o;const l=n[3].default,a=gr(l,n,n[2],null);return{c(){e=h("div"),t=h("label"),r=re(n[0]),s=w(),i=h("div"),a&&a.c(),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",n[1]),u(i,"class","col-sm-8 col-md-9"),u(e,"class","mb-4 row")},m(f,d){M(f,e,d),c(e,t),c(t,r),c(e,s),c(e,i),a&&a.m(i,null),o=!0},p(f,[d]){(!o||d&1)&&ue(r,f[0]),(!o||d&2)&&u(t,"for",f[1]),a&&a.p&&(!o||d&4)&&vr(a,l,f,f[2],o?br(l,f[2],d,null):wr(f[2]),null)},i(f){o||(O(a,f),o=!0)},o(f){P(a,f),o=!1},d(f){f&&C(e),a&&a.d(f)}}}function E_(n,e,t){let{$$slots:r={},$$scope:s}=e,{label:i}=e,{id:o}=e;return n.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,s=l.$$scope)},[i,o,s,r]}class Ee extends Te{constructor(e){super(),De(this,e,E_,R_,$e,{label:0,id:1})}}function ro(n,e,t){const r=n.slice();return r[35]=e[t][0],r[36]=e[t][1],r}function so(n,e,t){const r=n.slice();return r[35]=e[t][0],r[40]=e[t][1],r}function io(n,e,t){const r=n.slice();return r[35]=e[t][0],r[44]=e[t][1],r}function j_(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[4]),t||(r=q(e,"input",n[18]),t=!0)},p(s,i){i[0]&16&&e.value!==s[4]&&G(e,s[4])},d(s){s&&C(e),t=!1,r()}}}function A_(n){let e,t,r;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[5]),t||(r=q(e,"input",n[19]),t=!0)},p(s,i){i[0]&32&&G(e,s[5])},d(s){s&&C(e),t=!1,r()}}}function I_(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(s,i){M(s,e,i),n[21](e),t||(r=q(e,"change",n[20]),t=!0)},p:Z,d(s){s&&C(e),n[21](null),t=!1,r()}}}function L_(n){let e,t,r,s,i,o,l,a;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=w(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+n[11]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){M(f,e,d),G(e,n[6]),M(f,r,d),M(f,s,d),M(f,i,d),M(f,o,d),l||(a=[q(e,"input",n[23]),q(e,"keyup",n[24])],l=!0)},p(f,d){d[0]&2048&&t!==(t="form-control "+f[11])&&u(e,"class",t),d[0]&64&&e.value!==f[6]&&G(e,f[6])},d(f){f&&(C(e),C(r),C(s),C(i),C(o)),l=!1,ve(a)}}}function Y_(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+n[12]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[7]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[25]),q(e,"keyup",n[26])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&u(e,"class",t),a[0]&128&&e.value!==l[7]&&G(e,l[7])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function N_(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+n[13]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[8]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[27]),q(e,"keyup",n[28])],i=!0)},p(l,a){a[0]&8192&&t!==(t="form-control "+l[13])&&u(e,"class",t),a[0]&256&&e.value!==l[8]&&G(e,l[8])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function U_(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),u(e,"min","0"),u(e,"max","6"),e.required=!0},m(s,i){M(s,e,i),G(e,n[9]),t||(r=q(e,"input",n[29]),t=!0)},p(s,i){i[0]&512&&bn(e.value)!==s[9]&&G(e,s[9])},d(s){s&&C(e),t=!1,r()}}}function F_(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[10]),t||(r=q(e,"input",n[30]),t=!0)},p(s,i){i[0]&1024&&e.value!==s[10]&&G(e,s[10])},d(s){s&&C(e),t=!1,r()}}}function H_(n){return{c:Z,m:Z,p:Z,d:Z}}function W_(n){let e,t=Ce(Object.entries(n[43])),r=[];for(let s=0;s<t.length;s+=1)r[s]=oo(io(n,t,s));return{c(){e=h("datalist");for(let s=0;s<r.length;s+=1)r[s].c();u(e,"id","authors")},m(s,i){M(s,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(s,i){if(i[0]&32768){t=Ce(Object.entries(s[43]));let o;for(o=0;o<t.length;o+=1){const l=io(s,t,o);r[o]?r[o].p(l,i):(r[o]=oo(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function oo(n){let e;return{c(){e=h("option"),e.__value=n[44].name,G(e,e.__value)},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function q_(n){return{c:Z,m:Z,p:Z,d:Z}}function B_(n){return{c:Z,m:Z,p:Z,d:Z}}function V_(n){let e,t=Ce(Object.entries(n[39])),r=[];for(let s=0;s<t.length;s+=1)r[s]=ao(so(n,t,s));return{c(){e=h("datalist");for(let s=0;s<r.length;s+=1)r[s].c();u(e,"id","publishers")},m(s,i){M(s,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(s,i){if(i[0]&65536){t=Ce(Object.entries(s[39]));let o;for(o=0;o<t.length;o+=1){const l=so(s,t,o);r[o]?r[o].p(l,i):(r[o]=ao(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function ao(n){let e;return{c(){e=h("option"),e.__value=n[40].name,G(e,e.__value)},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function x_(n){return{c:Z,m:Z,p:Z,d:Z}}function z_(n){return{c:Z,m:Z,p:Z,d:Z}}function G_(n){let e,t=Ce(Object.entries(n[34])),r=[];for(let s=0;s<t.length;s+=1)r[s]=lo(ro(n,t,s));return{c(){e=h("datalist");for(let s=0;s<r.length;s+=1)r[s].c();u(e,"id","categories")},m(s,i){M(s,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(s,i){if(i[0]&131072){t=Ce(Object.entries(s[34]));let o;for(o=0;o<t.length;o+=1){const l=ro(s,t,o);r[o]?r[o].p(l,i):(r[o]=lo(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function lo(n){let e;return{c(){e=h("option"),e.__value=n[36].name,G(e,e.__value)},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function J_(n){return{c:Z,m:Z,p:Z,d:Z}}function K_(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J,te,X,de,le,se,_e,me;t=new et({props:{text:"Add Book"}}),l=new Ee({props:{label:"Book Title:",id:"book-name",$$slots:{default:[j_]},$$scope:{ctx:n}}}),f=new Ee({props:{label:"Book Description:",id:"book-description",$$slots:{default:[A_]},$$scope:{ctx:n}}}),m=new Ee({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[I_]},$$scope:{ctx:n}}}),E=new Ee({props:{label:"Category:",id:"book-category",$$slots:{default:[L_]},$$scope:{ctx:n}}}),Y=new Ee({props:{label:"Author: ",id:"book-author",$$slots:{default:[Y_]},$$scope:{ctx:n}}}),z=new Ee({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[N_]},$$scope:{ctx:n}}}),j=new Ee({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[U_]},$$scope:{ctx:n}}}),A=new Ee({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[F_]},$$scope:{ctx:n}}});let fe={ctx:n,current:null,token:null,hasCatch:!1,pending:q_,then:W_,catch:H_,value:43};Ur(n[15](),fe);let we={ctx:n,current:null,token:null,hasCatch:!1,pending:x_,then:V_,catch:B_,value:39};Ur(n[16](),we);let Oe={ctx:n,current:null,token:null,hasCatch:!1,pending:J_,then:G_,catch:z_,value:34};return Ur(n[17](),Oe),{c(){e=h("section"),x(t.$$.fragment),r=w(),s=h("form"),i=h("div"),o=h("div"),x(l.$$.fragment),a=w(),x(f.$$.fragment),d=w(),x(m.$$.fragment),_=w(),g=h("div"),p=h("label"),p.textContent="Preview:",b=w(),y=h("div"),v=h("img"),k=w(),D=h("button"),D.textContent="Remove",T=w(),R=h("div"),x(E.$$.fragment),I=w(),x(Y.$$.fragment),N=w(),x(z.$$.fragment),ne=w(),x(j.$$.fragment),Q=w(),x(A.$$.fragment),U=w(),F=h("div"),L=h("button"),L.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',W=w(),H=h("button"),H.innerHTML='<i class="bi bi-plus-circle"></i> Reset',oe=w(),J=h("a"),J.innerHTML='<button class="btn btn-danger" type="button"><i class="bi bi-x-circle"></i> Cancel</button>',te=w(),fe.block.c(),X=w(),we.block.c(),de=w(),Oe.block.c(),u(p,"for","cover-preview"),u(p,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Be(v.src,S=n[3])||u(v,"src",S),u(v,"alt","Preview"),u(v,"id","cover-preview"),u(v,"height","150"),u(D,"class","btn btn-sm btn-danger"),u(y,"class","col-sm-8 col-md-9"),u(y,"id","preview-div"),u(g,"class",$="my-3 row "+n[2]),u(o,"class","col-sm-12 col-lg-6"),u(R,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(L,"class","btn btn-success"),u(L,"type","submit"),u(H,"class","btn btn-secondary"),u(H,"type","reset"),u(J,"href","./#/"),u(F,"class","my-3"),u(e,"class","my-1 container")},m(pe,ie){M(pe,e,ie),B(t,e,null),c(e,r),c(e,s),c(s,i),c(i,o),B(l,o,null),c(o,a),B(f,o,null),c(o,d),B(m,o,null),c(o,_),c(o,g),c(g,p),c(g,b),c(g,y),c(y,v),c(y,k),c(y,D),c(i,T),c(i,R),B(E,R,null),c(R,I),B(Y,R,null),c(R,N),B(z,R,null),c(R,ne),B(j,R,null),c(R,Q),B(A,R,null),c(s,U),c(s,F),c(F,L),c(F,W),c(F,H),c(F,oe),c(F,J),c(e,te),fe.block.m(e,fe.anchor=null),fe.mount=()=>e,fe.anchor=X,c(e,X),we.block.m(e,we.anchor=null),we.mount=()=>e,we.anchor=de,c(e,de),Oe.block.m(e,Oe.anchor=null),Oe.mount=()=>e,Oe.anchor=null,se=!0,_e||(me=[q(D,"click",n[22]),q(H,"click",n[31]),q(s,"submit",pt(n[14]))],_e=!0)},p(pe,ie){n=pe;const ge={};ie[0]&16|ie[1]&65536&&(ge.$$scope={dirty:ie,ctx:n}),l.$set(ge);const He={};ie[0]&32|ie[1]&65536&&(He.$$scope={dirty:ie,ctx:n}),f.$set(He);const Xs={};ie[0]&3|ie[1]&65536&&(Xs.$$scope={dirty:ie,ctx:n}),m.$set(Xs),(!se||ie[0]&8&&!Be(v.src,S=n[3]))&&u(v,"src",S),(!se||ie[0]&4&&$!==($="my-3 row "+n[2]))&&u(g,"class",$);const ei={};ie[0]&2112|ie[1]&65536&&(ei.$$scope={dirty:ie,ctx:n}),E.$set(ei);const ti={};ie[0]&4224|ie[1]&65536&&(ti.$$scope={dirty:ie,ctx:n}),Y.$set(ti);const ni={};ie[0]&8448|ie[1]&65536&&(ni.$$scope={dirty:ie,ctx:n}),z.$set(ni);const ri={};ie[0]&512|ie[1]&65536&&(ri.$$scope={dirty:ie,ctx:n}),j.$set(ri);const si={};ie[0]&1024|ie[1]&65536&&(si.$$scope={dirty:ie,ctx:n}),A.$set(si),Fr(fe,n,ie),Fr(we,n,ie),Fr(Oe,n,ie)},i(pe){se||(O(t.$$.fragment,pe),O(l.$$.fragment,pe),O(f.$$.fragment,pe),O(m.$$.fragment,pe),O(E.$$.fragment,pe),O(Y.$$.fragment,pe),O(z.$$.fragment,pe),O(j.$$.fragment,pe),O(A.$$.fragment,pe),pe&&(le||Ie(()=>{le=Ve(e,xe,{duration:500}),le.start()})),se=!0)},o(pe){P(t.$$.fragment,pe),P(l.$$.fragment,pe),P(f.$$.fragment,pe),P(m.$$.fragment,pe),P(E.$$.fragment,pe),P(Y.$$.fragment,pe),P(z.$$.fragment,pe),P(j.$$.fragment,pe),P(A.$$.fragment,pe),se=!1},d(pe){pe&&C(e),V(t),V(l),V(f),V(m),V(E),V(Y),V(z),V(j),V(A),fe.block.d(),fe.token=null,fe=null,we.block.d(),we.token=null,we=null,Oe.block.d(),Oe.token=null,Oe=null,_e=!1,ve(me)}}}function Z_(n,e,t){let r,s,i="d-none",o,l,a,f="",d,m,_,g,p=[],b,y,v;async function S(){const{data:H,error:oe}=await ce.from("author").select("author_id").eq("name",d).single(),{data:J,error:te}=await ce.from("publisher").select("publisher_id").eq("name",m).single();let X=!0;if((oe||!H)&&(t(12,y="is-invalid"),X=!1),(te||!J)&&(t(13,v="is-invalid"),X=!1),!await k()){if(p.length!=0)return;t(11,b="is-invalid"),X=!1}if(!X)return;const{data:de,error:le}=await ce.from("books").insert({title:l,description:a,author_id:H.author_id,publisher_id:J.publisher_id,shelf_number:_,isbn:g}).select("book_id").single();if(le){console.error(le),alert(le.message);return}let se=!0;for(const _e in p){const{data:me,error:fe}=await ce.from("books_category").insert({book_id:de.book_id,category_id:p[_e]});fe&&(console.error(fe),se=!1)}if(alert(`Successfully Added ${l}!`),se||alert("Had problem while adding categories, Update book later"),r&&r[0]){const{data:_e,error:me}=await ce.storage.from("books").upload(`${de.book_id}.jpg`,r[0]);me&&console.error(me)}}async function k(){if(f=="")return!1;let H=!0,oe=[],J=f.split(",").map(te=>te.trim());for(const te of J){const{data:X,error:de}=await ce.from("category").select("category_id").eq("name",te).single();de?(H=!1,console.error(de)):oe.push(X.category_id),console.log(H)}return console.log(J,oe),p=H?oe:[],console.log(H,p),H}async function D(){const{data:H,error:oe}=await ce.from("author").select("name").order("name",{ascending:!0});return H}async function $(){const{data:H,error:oe}=await ce.from("publisher").select("name").order("name",{ascending:!0});return H}async function T(){const{data:H,error:oe}=await ce.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return H}function R(){l=this.value,t(4,l)}function E(){a=this.value,t(5,a)}function I(){r=this.files,t(0,r)}function Y(H){ut[H?"unshift":"push"](()=>{s=H,t(1,s)})}const N=()=>{t(1,s.value="",s),t(0,r="")};function z(){f=this.value,t(6,f)}const ne=()=>t(11,b="");function j(){d=this.value,t(7,d)}const Q=()=>t(12,y="");function A(){m=this.value,t(8,m)}const U=()=>t(13,v="");function F(){_=bn(this.value),t(9,_)}function L(){g=this.value,t(10,g)}const W=()=>{t(1,s.value="",s),t(0,r="")};return n.$$.update=()=>{if(n.$$.dirty[0]&1)if(r&&r[0]){t(2,i="");const H=URL.createObjectURL(r[0]);t(3,o=H)}else t(2,i="d-none")},[r,s,i,o,l,a,f,d,m,_,g,b,y,v,S,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W]}class Q_ extends Te{constructor(e){super(),De(this,e,Z_,K_,$e,{},null,[-1,-1])}}function co(n,e,t){const r=n.slice();return r[5]=e[t][0],r[6]=e[t][1],r}function X_(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function ep(n){let e,t,r=n[0].name+"",s,i,o,l,a,f,d,m,_=n[0].link+"",g,p;function b(S,k){return S[0].bio==null?np:tp}let y=b(n),v=y(n);return{c(){e=h("div"),t=h("h1"),s=re(r),i=w(),o=h("p"),v.c(),l=w(),a=h("p"),f=h("b"),f.textContent="Website:",d=w(),m=h("a"),g=re(_),u(t,"class","mb-2 pb-2"),u(o,"class",""),u(m,"href",p=n[0].link),u(e,"class","container")},m(S,k){M(S,e,k),c(e,t),c(t,s),c(e,i),c(e,o),v.m(o,null),c(e,l),c(e,a),c(a,f),c(a,d),c(a,m),c(m,g)},p(S,k){k&1&&r!==(r=S[0].name+"")&&ue(s,r),y===(y=b(S))&&v?v.p(S,k):(v.d(1),v=y(S),v&&(v.c(),v.m(o,null))),k&1&&_!==(_=S[0].link+"")&&ue(g,_),k&1&&p!==(p=S[0].link)&&u(m,"href",p)},i:Z,o:Z,d(S){S&&C(e),v.d()}}}function tp(n){let e=n[0].bio+"",t;return{c(){t=re(e)},m(r,s){M(r,t,s)},p(r,s){s&1&&e!==(e=r[0].bio+"")&&ue(t,e)},d(r){r&&C(t)}}}function np(n){let e;return{c(){e=h("span"),e.textContent="No Bio",u(e,"class","text-secondary")},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function rp(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function sp(n){let e,t,r=Ce(Object.entries(n[1])),s=[];for(let o=0;o<r.length;o+=1)s[o]=uo(co(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const f=co(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=uo(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function uo(n){let e,t;return e=new Sr({props:{title:n[6].title,id:n[6].book_id,author:n[6].publisher.name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&2&&(i.title=r[6].title),s&2&&(i.id=r[6].book_id),s&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function ip(n){let e,t,r,s;const i=[sp,rp],o=[];function l(a,f){return a[1]?0:1}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function op(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b;r=new et({props:{text:"Author Details"}});const y=[ep,X_],v=[];function S(k,D){return k[0]?0:1}return d=S(n),m=v[d]=y[d](n),g=new gt({props:{title:"Books",icon:"journal",$$slots:{default:[ip]},$$scope:{ctx:n}}}),{c(){e=h("main"),t=h("section"),x(r.$$.fragment),s=w(),i=h("div"),o=h("div"),l=h("img"),f=w(),m.c(),_=w(),x(g.$$.fragment),u(l,"class","border p-3"),Be(l.src,a=ap)||u(l,"src",a),u(l,"alt","author"),u(l,"height","300"),u(l,"width","300"),Xe(l,"object-fit","contain"),u(o,"class","d-flex justify-content-center my-1"),u(i,"class","d-md-flex d-block"),u(e,"class","container")},m(k,D){M(k,e,D),c(e,t),B(r,t,null),c(t,s),c(t,i),c(i,o),c(o,l),c(i,f),v[d].m(i,null),c(e,_),B(g,e,null),b=!0},p(k,[D]){let $=d;d=S(k),d===$?v[d].p(k,D):(je(),P(v[$],1,1,()=>{v[$]=null}),Ae(),m=v[d],m?m.p(k,D):(m=v[d]=y[d](k),m.c()),O(m,1),m.m(i,null));const T={};D&514&&(T.$$scope={dirty:D,ctx:k}),g.$set(T)},i(k){b||(O(r.$$.fragment,k),O(m),O(g.$$.fragment,k),k&&(p||Ie(()=>{p=Ve(e,xe,{duration:500}),p.start()})),b=!0)},o(k){P(r.$$.fragment,k),P(m),P(g.$$.fragment,k),b=!1},d(k){k&&C(e),V(r),v[d].d(),V(g)}}}let ap="./default-profile.jpg";function lp(n,e,t){let{params:r}=e,s=r.authorID,i,o;async function l(){const{data:a,error:f}=await ce.from("author").select().eq("author_id",s);console.log(a),t(0,i=a[0]);const{data:d,error:m}=await ce.from("books").select("book_id, title, publisher(name)").eq("author_id",s);console.log(d),t(1,o=d)}return hn(l),n.$$set=a=>{"params"in a&&t(2,r=a.params)},[i,o,r]}class ul extends Te{constructor(e){super(),De(this,e,lp,op,$e,{params:2})}}function fo(n,e,t){const r=n.slice();return r[5]=e[t][0],r[6]=e[t][1],r}function ho(n){let e,t,r=n[0].name+"",s,i,o,l,a,f,d,m,_=n[0].link+"",g,p;function b(S,k){return S[0].description==null?up:cp}let y=b(n),v=y(n);return{c(){e=h("div"),t=h("h1"),s=re(r),i=w(),o=h("p"),v.c(),l=w(),a=h("p"),f=h("b"),f.textContent="Website:",d=w(),m=h("a"),g=re(_),u(t,"class","mb-2 pb-2"),u(o,"class",""),u(m,"href",p="https://"+n[0].link),u(m,"id","publisher-website"),u(e,"class","container")},m(S,k){M(S,e,k),c(e,t),c(t,s),c(e,i),c(e,o),v.m(o,null),c(e,l),c(e,a),c(a,f),c(a,d),c(a,m),c(m,g)},p(S,k){k&1&&r!==(r=S[0].name+"")&&ue(s,r),y===(y=b(S))&&v?v.p(S,k):(v.d(1),v=y(S),v&&(v.c(),v.m(o,null))),k&1&&_!==(_=S[0].link+"")&&ue(g,_),k&1&&p!==(p="https://"+S[0].link)&&u(m,"href",p)},d(S){S&&C(e),v.d()}}}function cp(n){let e=n[0].description+"",t;return{c(){t=re(e)},m(r,s){M(r,t,s)},p(r,s){s&1&&e!==(e=r[0].description+"")&&ue(t,e)},d(r){r&&C(t)}}}function up(n){let e,t=n[0].description+"",r;return{c(){e=h("span"),r=re(t)},m(s,i){M(s,e,i),c(e,r)},p(s,i){i&1&&t!==(t=s[0].description+"")&&ue(r,t)},d(s){s&&C(e)}}}function fp(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function dp(n){let e,t,r=Ce(Object.entries(n[1])),s=[];for(let o=0;o<r.length;o+=1)s[o]=mo(fo(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","row")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const f=fo(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=mo(f),s[a].c(),O(s[a],1),s[a].m(e,null))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function mo(n){let e,t;return e=new Sr({props:{title:n[6].title,id:n[6].book_id,author:n[6].author.name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&2&&(i.title=r[6].title),s&2&&(i.id=r[6].book_id),s&2&&(i.author=r[6].author.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function hp(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y;t=new et({props:{text:"Publisher Details"}});let v=n[0]&&ho(n);_=new gt({props:{title:"Books",icon:"journal"}});const S=[dp,fp],k=[];function D($,T){return $[1]?0:1}return p=D(n),b=k[p]=S[p](n),{c(){e=h("section"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),o=h("img"),a=w(),v&&v.c(),d=w(),m=h("section"),x(_.$$.fragment),g=w(),b.c(),u(o,"id","img-cover"),u(o,"class","border p-3"),Be(o.src,l=mp)||u(o,"src",l),u(o,"alt","publisher"),u(o,"height","300"),u(o,"width","300"),Xe(o,"object-fit","contain"),u(i,"id","publisher-cover"),u(i,"class","d-flex justify-content-center my-1"),u(s,"class","d-md-flex d-block"),u(e,"class","container"),u(m,"class","container")},m($,T){M($,e,T),B(t,e,null),c(e,r),c(e,s),c(s,i),c(i,o),c(s,a),v&&v.m(s,null),M($,d,T),M($,m,T),B(_,m,null),c(m,g),k[p].m(m,null),y=!0},p($,[T]){$[0]?v?v.p($,T):(v=ho($),v.c(),v.m(s,null)):v&&(v.d(1),v=null);let R=p;p=D($),p===R?k[p].p($,T):(je(),P(k[R],1,1,()=>{k[R]=null}),Ae(),b=k[p],b?b.p($,T):(b=k[p]=S[p]($),b.c()),O(b,1),b.m(m,null))},i($){y||(O(t.$$.fragment,$),$&&(f||Ie(()=>{f=Ve(e,xe,{duration:500}),f.start()})),O(_.$$.fragment,$),O(b),y=!0)},o($){P(t.$$.fragment,$),P(_.$$.fragment,$),P(b),y=!1},d($){$&&(C(e),C(d),C(m)),V(t),v&&v.d(),V(_),k[p].d()}}}let mp="./default-profile.jpg";function _p(n,e,t){let{params:r}=e,s=r.publisherID,i,o;async function l(){const{data:a,error:f}=await ce.from("publisher").select().eq("publisher_id",s);console.log(a),t(0,i=a[0]);const{data:d,error:m}=await ce.from("books").select("book_id, title, author(name)").eq("publisher_id",s);console.log(d),t(1,o=d)}return hn(l),n.$$set=a=>{"params"in a&&t(2,r=a.params)},[i,o,r]}class fl extends Te{constructor(e){super(),De(this,e,_p,hp,$e,{params:2})}}function pp(n){let e,t,r,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),r=h("i"),i=w(),o=h("div"),l=h("h5"),a=h("a"),f=re(n[0]),u(r,"class",s="bi bi-"+n[2]),u(t,"class","d-flex justify-content-center"),Xe(t,"font-size","3em"),u(a,"class","stretched-link svelte-1vxezln"),u(a,"href",d="./#/"+n[1]),u(l,"class","card-title text-center my-2"),u(o,"class","card-body p-1"),u(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(m,_){M(m,e,_),c(e,t),c(t,r),c(e,i),c(e,o),c(o,l),c(l,a),c(a,f)},p(m,[_]){_&4&&s!==(s="bi bi-"+m[2])&&u(r,"class",s),_&1&&ue(f,m[0]),_&2&&d!==(d="./#/"+m[1])&&u(a,"href",d)},i:Z,o:Z,d(m){m&&C(e)}}}function gp(n,e,t){let{name:r}=e,{link:s}=e,{icon:i=""}=e;return n.$$set=o=>{"name"in o&&t(0,r=o.name),"link"in o&&t(1,s=o.link),"icon"in o&&t(2,i=o.icon)},[r,s,i]}class _t extends Te{constructor(e){super(),De(this,e,gp,pp,$e,{name:0,link:1,icon:2})}}function bp(n){let e,t,r,s,i;return t=new _t({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),s=new _t({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),x(t.$$.fragment),r=w(),x(s.$$.fragment),u(e,"class","row justify-content-center gap-4")},m(o,l){M(o,e,l),B(t,e,null),c(e,r),B(s,e,null),i=!0},p:Z,i(o){i||(O(t.$$.fragment,o),O(s.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),P(s.$$.fragment,o),i=!1},d(o){o&&C(e),V(t),V(s)}}}function vp(n){let e,t,r,s,i,o,l,a,f;return t=new _t({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),s=new _t({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new _t({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new _t({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),x(t.$$.fragment),r=w(),x(s.$$.fragment),i=w(),x(o.$$.fragment),l=w(),x(a.$$.fragment),u(e,"class","row justify-content-center gap-5")},m(d,m){M(d,e,m),B(t,e,null),c(e,r),B(s,e,null),c(e,i),B(o,e,null),c(e,l),B(a,e,null),f=!0},p:Z,i(d){f||(O(t.$$.fragment,d),O(s.$$.fragment,d),O(o.$$.fragment,d),O(a.$$.fragment,d),f=!0)},o(d){P(t.$$.fragment,d),P(s.$$.fragment,d),P(o.$$.fragment,d),P(a.$$.fragment,d),f=!1},d(d){d&&C(e),V(t),V(s),V(o),V(a)}}}function wp(n){let e,t,r,s,i,o,l,a,f;return t=new _t({props:{name:"Books Report",link:"book-report",icon:"journals"}}),s=new _t({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new _t({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new _t({props:{name:"Transactions Report",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),x(t.$$.fragment),r=w(),x(s.$$.fragment),i=w(),x(o.$$.fragment),l=w(),x(a.$$.fragment),u(e,"class","row justify-content-center gap-5 mb-5")},m(d,m){M(d,e,m),B(t,e,null),c(e,r),B(s,e,null),c(e,i),B(o,e,null),c(e,l),B(a,e,null),f=!0},p:Z,i(d){f||(O(t.$$.fragment,d),O(s.$$.fragment,d),O(o.$$.fragment,d),O(a.$$.fragment,d),f=!0)},o(d){P(t.$$.fragment,d),P(s.$$.fragment,d),P(o.$$.fragment,d),P(a.$$.fragment,d),f=!1},d(d){d&&C(e),V(t),V(s),V(o),V(a)}}}function yp(n){let e,t,r,s,i,o,l,a;return t=new gt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[bp]},$$scope:{ctx:n}}}),s=new gt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[vp]},$$scope:{ctx:n}}}),o=new gt({props:{title:"Reports",icon:"receipt",$$slots:{default:[wp]},$$scope:{ctx:n}}}),{c(){e=h("main"),x(t.$$.fragment),r=w(),x(s.$$.fragment),i=w(),x(o.$$.fragment),u(e,"class","container")},m(f,d){M(f,e,d),B(t,e,null),c(e,r),B(s,e,null),c(e,i),B(o,e,null),a=!0},p(f,[d]){const m={};d&1&&(m.$$scope={dirty:d,ctx:f}),t.$set(m);const _={};d&1&&(_.$$scope={dirty:d,ctx:f}),s.$set(_);const g={};d&1&&(g.$$scope={dirty:d,ctx:f}),o.$set(g)},i(f){a||(O(t.$$.fragment,f),O(s.$$.fragment,f),O(o.$$.fragment,f),f&&(l||Ie(()=>{l=Ve(e,xe,{duration:500}),l.start()})),a=!0)},o(f){P(t.$$.fragment,f),P(s.$$.fragment,f),P(o.$$.fragment,f),a=!1},d(f){f&&C(e),V(t),V(s),V(o)}}}class kp extends Te{constructor(e){super(),De(this,e,null,yp,$e,{})}}function _o(n,e,t){const r=n.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function po(n,e,t){const r=n.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function go(n,e,t){const r=n.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function bo(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T;return{c(){e=h("div"),t=h("div"),t.textContent="Category:",r=w(),s=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",f=w(),d=h("div"),d.textContent="Sort by:",m=w(),_=h("div"),g=h("select"),p=h("option"),p.textContent="Total",b=h("option"),b.textContent="Available",y=h("option"),y.textContent="Reserved",v=h("option"),v.textContent="Borrowed",S=w(),k=h("div"),D=h("select"),$=h("option"),$.textContent="Ascending",T=h("option"),T.textContent="Descending",o.__value="all",G(o,o.__value),l.__value="tech",G(l,l.__value),a.__value="all",G(a,a.__value),u(i,"name","category"),u(i,"class","form-select"),p.__value="",G(p,p.__value),b.__value="",G(b,b.__value),y.__value="",G(y,y.__value),v.__value="",G(v,v.__value),u(g,"name","filter"),u(g,"class","form-select"),$.__value="",G($,$.__value),T.__value="",G(T,T.__value),u(D,"name","order"),u(D,"class","form-select"),u(e,"class","d-flex justify-content-end align-items-center gap-2")},m(R,E){M(R,e,E),c(e,t),c(e,r),c(e,s),c(s,i),c(i,o),c(i,l),c(i,a),c(e,f),c(e,d),c(e,m),c(e,_),c(_,g),c(g,p),c(g,b),c(g,y),c(g,v),c(e,S),c(e,k),c(k,D),c(D,$),c(D,T)},d(R){R&&C(e)}}}function $p(n){let e,t;return e=new Ut({}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p:Z,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Sp(n){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',u(e,"class","d-flex justify-content-center mt-5")},m(t,r){M(t,e,r)},p:Z,i:Z,o:Z,d(t){t&&C(e)}}}function Dp(n){let e,t,r=Ce(Object.entries(n[2].publisher)),s=[];for(let o=0;o<r.length;o+=1)s[o]=vo(_o(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ge()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].publisher));let a;for(a=0;a<r.length;a+=1){const f=_o(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=vo(f),s[a].c(),O(s[a],1),s[a].m(e.parentNode,e))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function Tp(n){let e,t,r=Ce(Object.entries(n[2].author)),s=[];for(let o=0;o<r.length;o+=1)s[o]=wo(po(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ge()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].author));let a;for(a=0;a<r.length;a+=1){const f=po(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=wo(f),s[a].c(),O(s[a],1),s[a].m(e.parentNode,e))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function Op(n){let e,t,r=Ce(Object.entries(n[2].books)),s=[];for(let o=0;o<r.length;o+=1)s[o]=yo(go(n,r,o));const i=o=>P(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ge()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].books));let a;for(a=0;a<r.length;a+=1){const f=go(o,r,a);s[a]?(s[a].p(f,l),O(s[a],1)):(s[a]=yo(f),s[a].c(),O(s[a],1),s[a].m(e.parentNode,e))}for(je(),a=r.length;a<s.length;a+=1)i(a);Ae()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)P(s[l]);t=!1},d(o){o&&C(e),ze(s,o)}}}function vo(n){let e,t;return e=new ga({props:{id:n[14].publisher_id,name:n[14].name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&4&&(i.id=r[14].publisher_id),s&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function wo(n){let e,t;return e=new pa({props:{id:n[14].author_id,name:n[14].name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&4&&(i.id=r[14].author_id),s&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function yo(n){let e,t;return e=new Sr({props:{title:n[14].title,id:n[14].book_id,author:n[14].author.name}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s&4&&(i.title=r[14].title),s&4&&(i.id=r[14].book_id),s&4&&(i.author=r[14].author.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Cp(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I;t=new et({props:{text:"Library Holdings"}});let Y=n[3]&&n[3].value=="books"&&bo();const N=[Op,Tp,Dp,Sp,$p],z=[];function ne(j,Q){return j[2].books.length>0?0:j[2].author.length>0?1:j[2].publisher.length>0?2:j[0]?4:3}return D=ne(n),$=z[D]=N[D](n),{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",f=h("option"),f.textContent="Publisher",d=w(),m=h("div"),_=h("input"),g=w(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',b=w(),Y&&Y.c(),y=w(),v=h("hr"),S=w(),k=h("div"),$.c(),l.selected=!0,l.__value="books",G(l,l.__value),a.__value="author",G(a,a.__value),f.__value="publisher",G(f,f.__value),u(o,"name","searchtype"),u(o,"class","form-select"),u(i,"class","col-auto col-md-2 p-0 pe-md-4"),u(_,"class","form-control form-control-lg"),u(_,"type","search"),u(_,"placeholder","Search"),u(_,"name","Search"),u(m,"class","col-6 col-md-6 p-0"),u(p,"class","btn btn-lg btn-success col-auto col-md-1"),u(p,"type","submit"),u(s,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),u(k,"class","row"),u(e,"class","container")},m(j,Q){M(j,e,Q),B(t,e,null),c(e,r),c(e,s),c(s,i),c(i,o),c(o,l),c(o,a),c(o,f),n[5](o),c(s,d),c(s,m),c(m,_),G(_,n[1]),c(s,g),c(s,p),c(e,b),Y&&Y.m(e,null),c(e,y),c(e,v),c(e,S),c(e,k),z[D].m(k,null),R=!0,E||(I=[q(o,"change",n[4]),q(_,"input",n[6]),q(_,"keyup",n[7]),q(p,"click",n[4])],E=!0)},p(j,[Q]){Q&2&&_.value!==j[1]&&G(_,j[1]),j[3]&&j[3].value=="books"?Y||(Y=bo(),Y.c(),Y.m(e,y)):Y&&(Y.d(1),Y=null);let A=D;D=ne(j),D===A?z[D].p(j,Q):(je(),P(z[A],1,1,()=>{z[A]=null}),Ae(),$=z[D],$?$.p(j,Q):($=z[D]=N[D](j),$.c()),O($,1),$.m(k,null))},i(j){R||(O(t.$$.fragment,j),O($),j&&(T||Ie(()=>{T=Ve(e,xe,{duration:500}),T.start()})),R=!0)},o(j){P(t.$$.fragment,j),P($),R=!1},d(j){j&&C(e),V(t),n[5](null),Y&&Y.d(),z[D].d(),E=!1,ve(I)}}}function Mp(n,e,t){let r;pr(n,Al,y=>t(9,r=y));let s=!0;function i(){switch(r){case"/search/author":t(3,m.value="author",m);break;case"/search/publisher":t(3,m.value="publisher",m);break;default:t(3,m.value="books",m)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",f="",d={books:[],author:[],publisher:[]},m;async function _(){t(0,s=!0),a=m.value,console.log(a);const{data:y,error:v}=await ce.from(a).select(o[a]).ilike(l[a],`%${f}%`);v&&console.log(v),t(2,d.books=[],d),t(2,d.author=[],d),t(2,d.publisher=[],d),t(2,d[a]=y,d),t(2,d),t(0,s=!1),console.log(s,d)}hn(i),hn(_);function g(y){ut[y?"unshift":"push"](()=>{m=y,t(3,m)})}function p(){f=this.value,t(1,f)}return[s,f,d,m,_,g,p,y=>y.key==="Enter"&&_()]}class dn extends Te{constructor(e){super(),De(this,e,Mp,Cp,$e,{})}}function ko(n){let e,t;return{c(){e=h("div"),t=re(n[6]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(r,s){M(r,e,s),c(e,t)},p(r,s){s[0]&64&&ue(t,r[6])},d(r){r&&C(e)}}}function Pp(n){let e;return{c(){e=re("Log In")},m(t,r){M(t,e,r)},d(t){t&&C(e)}}}function Rp(n){let e;return{c(){e=h("div"),u(e,"class","spinner-border spinner-border-sm"),u(e,"role","status")},m(t,r){M(t,e,r)},d(t){t&&C(e)}}}function Ep(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S=n[8]&&$o(n);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",r=w(),s=h("form"),S&&S.c(),i=w(),o=h("div"),o.innerHTML='<div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-person-bounding-box"></i></span> <input type="text" id="sID" name="hidden" required="" minlength="6" maxlength="6" autocomplete="off" class="svelte-1h623o7"/> <label for="sID" class="svelte-1h623o7">Student ID</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="fname" name="hidden" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="fname" class="svelte-1h623o7">First Name</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="lname" name="hidden" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="lname" class="svelte-1h623o7">Last Name</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-envelope"></i></span> <input type="email" id="email" name="hidden" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="email" class="svelte-1h623o7">Email</label></div>',l=w(),a=h("div"),a.innerHTML='<div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-telephone-fill"></i></span> <input type="tel" id="contact" name="hidden" minlength="11" maxlength="11" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="contact" class="svelte-1h623o7">Contact</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-geo-alt-fill"></i></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="address" class="svelte-1h623o7">Address</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-calendar"></i></span> <input type="number" id="yearLevel" name="hidden" max="4" min="1" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="yearLevel" class="svelte-1h623o7">Year Level</label></div> <div class="input-box svelte-1h623o7"><span class="icon svelte-1h623o7"><i class="bi bi-mortarboard-fill"></i></span> <input type="text" id="course" name="hidden" required="" autocomplete="off" class="svelte-1h623o7"/> <label for="course" class="svelte-1h623o7">Course</label></div>',f=w(),d=h("button"),m=re("Proceed"),_=w(),g=h("a"),g.textContent="Back",u(t,"class","svelte-1h623o7"),u(o,"class","col-12 col-sm-6"),u(a,"class","col-12 col-sm-6"),u(d,"type","submit"),u(d,"class","bton w-50 svelte-1h623o7"),u(d,"name","hidden"),u(d,"id","Proceed"),d.disabled=Ip,u(s,"class","row justify-content-center"),u(g,"href","./#/"),u(g,"class","mt-2 svelte-1h623o7"),u(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1h623o7"),u(e,"style","height")},m(k,D){M(k,e,D),c(e,t),c(e,r),c(e,s),S&&S.m(s,null),c(s,i),c(s,o),c(s,l),c(s,a),c(s,f),c(s,d),c(d,m),c(e,_),c(e,g),b=!0,y||(v=[q(d,"click",Lp),q(s,"submit",pt(n[21])),q(g,"click",n[33])],y=!0)},p(k,D){k[8]?S?S.p(k,D):(S=$o(k),S.c(),S.m(s,i)):S&&(S.d(1),S=null)},i(k){b||(k&&Ie(()=>{b&&(p||(p=mn(e,gn,{duration:600,y:500},!0)),p.run(1))}),b=!0)},o(k){k&&(p||(p=mn(e,gn,{duration:600,y:500},!1)),p.run(0)),b=!1},d(k){k&&C(e),S&&S.d(),k&&p&&p.end(),y=!1,ve(v)}}}function jp(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J,te,X,de,le,se,_e,me=n[7]&&So(n);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",r=w(),me&&me.c(),s=w(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=w(),f=h("input"),d=w(),m=h("label"),m.textContent="Username",_=w(),g=h("div"),p=h("span"),b=h("a"),y=h("i"),S=w(),k=h("input"),$=w(),T=h("label"),T.textContent="Password",R=w(),E=h("div"),I=h("span"),Y=h("a"),N=h("i"),ne=w(),j=h("input"),A=w(),U=h("label"),U.textContent="Confirm Password",F=w(),L=h("button"),W=re("Next"),H=w(),oe=h("div"),J=h("p"),te=re("Already have an account? "),X=h("a"),X.textContent="Login",u(t,"class","svelte-1h623o7"),u(l,"class","icon svelte-1h623o7"),u(f,"type","text"),u(f,"id","registerUsername"),f.required=!0,u(f,"autocomplete","off"),u(f,"class","svelte-1h623o7"),u(m,"for","registerUsername"),u(m,"class","svelte-1h623o7"),u(o,"class","input-box svelte-1h623o7"),u(y,"class",v="bi bi-"+(n[13]?"eye-slash":"eye")),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u(p,"class","icon svelte-1h623o7"),u(p,"id","showPass2"),u(k,"minlength","6"),u(k,"type",D=n[13]?"text":"password"),u(k,"id","registerUsername"),k.required=!0,u(k,"autocomplete","off"),u(k,"maxlength","16"),u(k,"class","svelte-1h623o7"),u(T,"for","registerPass"),u(T,"class","svelte-1h623o7"),u(g,"class","input-box svelte-1h623o7"),u(N,"class",z="bi bi-"+(n[14]?"eye-slash":"eye")),u(Y,"href","./#/"),u(Y,"class","svelte-1h623o7"),u(I,"class","icon svelte-1h623o7"),u(I,"id","showPass3"),u(j,"type",Q=n[14]?"text":"password"),u(j,"id","registerConfirm"),j.required=!0,u(j,"autocomplete","off"),u(j,"class","svelte-1h623o7"),u(U,"for","registerConfirm"),u(U,"class","svelte-1h623o7"),u(E,"class","input-box svelte-1h623o7"),L.disabled=n[2],u(L,"type","submit"),u(L,"class","bton svelte-1h623o7"),u(L,"id","registerBtn"),u(X,"href","./#/"),u(X,"class","login-link svelte-1h623o7"),u(oe,"class","login-register svelte-1h623o7"),u(e,"class","form-box register svelte-1h623o7")},m(fe,we){M(fe,e,we),c(e,t),c(e,r),me&&me.m(e,null),c(e,s),c(e,i),c(i,o),c(o,l),c(o,a),c(o,f),G(f,n[9]),c(o,d),c(o,m),c(i,_),c(i,g),c(g,p),c(p,b),c(b,y),c(g,S),c(g,k),c(g,$),c(g,T),c(i,R),c(i,E),c(E,I),c(I,Y),c(Y,N),c(E,ne),c(E,j),c(E,A),c(E,U),c(i,F),c(i,L),c(L,W),c(i,H),c(i,oe),c(oe,J),c(J,te),c(J,X),le=!0,se||(_e=[q(f,"keyup",n[27]),q(f,"input",n[28]),q(b,"click",pt(n[29])),q(k,"keyup",n[30]),q(Y,"click",pt(n[31])),q(j,"keyup",n[32]),q(X,"click",n[18]),q(i,"submit",pt(n[20]))],se=!0)},p(fe,we){fe[7]?me?me.p(fe,we):(me=So(fe),me.c(),me.m(e,s)):me&&(me.d(1),me=null),we[0]&512&&f.value!==fe[9]&&G(f,fe[9]),(!le||we[0]&8192&&v!==(v="bi bi-"+(fe[13]?"eye-slash":"eye")))&&u(y,"class",v),(!le||we[0]&8192&&D!==(D=fe[13]?"text":"password"))&&u(k,"type",D),(!le||we[0]&16384&&z!==(z="bi bi-"+(fe[14]?"eye-slash":"eye")))&&u(N,"class",z),(!le||we[0]&16384&&Q!==(Q=fe[14]?"text":"password"))&&u(j,"type",Q),(!le||we[0]&4)&&(L.disabled=fe[2])},i(fe){le||(fe&&Ie(()=>{le&&(de||(de=mn(e,gn,{duration:600,y:500},!0)),de.run(1))}),le=!0)},o(fe){fe&&(de||(de=mn(e,gn,{duration:600,y:500},!1)),de.run(0)),le=!1},d(fe){fe&&C(e),me&&me.d(),fe&&de&&de.end(),se=!1,ve(_e)}}}function $o(n){let e,t,r;return{c(){e=h("div"),t=h("div"),r=re(n[8]),u(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1h623o7"),u(e,"class","d-flex justify-content-center")},m(s,i){M(s,e,i),c(e,t),c(t,r)},p(s,i){i[0]&256&&ue(r,s[8])},d(s){s&&C(e)}}}function So(n){let e,t;return{c(){e=h("div"),t=re(n[7]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(r,s){M(r,e,s),c(e,t)},p(r,s){s[0]&128&&ue(t,r[7])},d(r){r&&C(e)}}}function Ap(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J,te,X,de,le,se=n[6]&&ko(n);function _e(ie,ge){return ie[1]?Rp:Pp}let me=_e(n),fe=me(n);const we=[jp,Ep],Oe=[];function pe(ie,ge){return ie[0]?1:0}return U=pe(n),F=Oe[U]=we[U](n),{c(){e=h("main"),t=h("div"),r=h("div"),s=h("h2"),s.textContent="Login",i=w(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',f=w(),d=h("input"),m=w(),_=h("label"),_.textContent="Username",g=w(),p=h("div"),b=h("a"),y=h("span"),v=h("i"),k=w(),D=h("input"),T=w(),R=h("label"),R.textContent="Password",E=w(),se&&se.c(),I=w(),Y=h("button"),fe.c(),N=w(),z=h("div"),ne=h("p"),j=re("Don't have an account? "),Q=h("a"),Q.textContent="Register",A=w(),F.c(),W=w(),H=h("div"),oe=h("button"),oe.textContent="Client",J=w(),te=h("button"),te.textContent="Staff",u(s,"class","svelte-1h623o7"),u(a,"class","icon svelte-1h623o7"),u(d,"type","text"),u(d,"id","usernameLogin"),d.required=!0,u(d,"autocomplete","off"),u(d,"class","svelte-1h623o7"),u(_,"for","usernameLogin"),u(_,"class","svelte-1h623o7"),u(l,"class","input-box svelte-1h623o7"),u(v,"class",S="bi bi-"+(n[12]?"eye-slash":"eye")),u(y,"class","icon svelte-1h623o7"),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u(D,"minlength","6"),u(D,"maxlength","12"),u(D,"type",$=n[12]?"text":"password"),u(D,"id","passwordLogin"),D.required=!0,u(D,"autocomplete","off"),u(D,"class","svelte-1h623o7"),u(R,"for","passwordLogin"),u(R,"class","svelte-1h623o7"),u(p,"class","input-box svelte-1h623o7"),Y.disabled=n[1],u(Y,"type","submit"),u(Y,"class","bton svelte-1h623o7"),u(Y,"id","loginBton"),u(Q,"href","./#/"),u(Q,"class","register-link svelte-1h623o7"),u(z,"class","login-register svelte-1h623o7"),u(o,"id","form"),u(r,"class","form-box login svelte-1h623o7"),u(t,"class",L="wrapper "+n[3]+" active-popup "+n[15]+" svelte-1h623o7"),u(oe,"class","m-2 btn btn-primary btn-lg"),u(te,"class","m-2 btn btn-danger btn-lg"),u(H,"class","d-none"),Xe(e,"background","url('./login-bg.jpg') no-repeat"),Xe(e,"background-size","cover"),Xe(e,"background-position","center"),Xe(e,"background-position-y","5%"),u(e,"class","svelte-1h623o7")},m(ie,ge){M(ie,e,ge),c(e,t),c(t,r),c(r,s),c(r,i),c(r,o),c(o,l),c(l,a),c(l,f),c(l,d),G(d,n[4]),c(l,m),c(l,_),c(o,g),c(o,p),c(p,b),c(b,y),c(y,v),c(p,k),c(p,D),c(p,T),c(p,R),c(o,E),se&&se.m(o,null),c(o,I),c(o,Y),fe.m(Y,null),c(o,N),c(o,z),c(z,ne),c(ne,j),c(ne,Q),c(t,A),Oe[U].m(t,null),c(e,W),c(e,H),c(H,oe),c(H,J),c(H,te),de||(le=[q(d,"input",n[23]),q(d,"keyup",n[24]),q(b,"click",pt(n[25])),q(D,"input",n[26]),q(Q,"click",n[18]),q(o,"submit",pt(n[19])),q(oe,"click",n[34]),q(te,"click",n[35])],de=!0)},p(ie,ge){ge[0]&16&&d.value!==ie[4]&&G(d,ie[4]),ge[0]&4096&&S!==(S="bi bi-"+(ie[12]?"eye-slash":"eye"))&&u(v,"class",S),ge[0]&4096&&$!==($=ie[12]?"text":"password")&&u(D,"type",$),ie[6]?se?se.p(ie,ge):(se=ko(ie),se.c(),se.m(o,I)):se&&(se.d(1),se=null),me!==(me=_e(ie))&&(fe.d(1),fe=me(ie),fe&&(fe.c(),fe.m(Y,null))),ge[0]&2&&(Y.disabled=ie[1]);let He=U;U=pe(ie),U===He?Oe[U].p(ie,ge):(je(),P(Oe[He],1,1,()=>{Oe[He]=null}),Ae(),F=Oe[U],F?F.p(ie,ge):(F=Oe[U]=we[U](ie),F.c()),O(F,1),F.m(t,null)),ge[0]&32776&&L!==(L="wrapper "+ie[3]+" active-popup "+ie[15]+" svelte-1h623o7")&&u(t,"class",L)},i(ie){O(F),ie&&(X||Ie(()=>{X=Ve(e,xe,{duration:500}),X.start()}))},o(ie){P(F)},d(ie){ie&&C(e),se&&se.d(),fe.d(),Oe[U].d(),de=!1,ve(le)}}}let Ip=!1;function Zr(n){return n.target.value}const Lp=()=>{};function Yp(n,e,t){let r;document.querySelector("body").setAttribute("data-bs-theme","dark"),ns("/");function s(X){Nt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",X)}function i(X){Nt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",X)}let o=!1,l=!1,a=!0,f="";function d(){t(22,a=!a)}let m,_;async function g(){console.log("CLicked"),t(1,o=!0);const{data:X,error:de}=await ce.from("user_level").select("account_type, user_id").eq("username",m).eq("password",_).maybeSingle();if(t(1,o=!1),de){console.error(de);return}if(!X&&await b(m)){t(6,y="Wrong password.");return}else if(!X){t(6,y="User does not exist.");return}X.account_type=="student"?s(X.user_id):X.account_type=="staff"?i(X.user_id):console.error(X)}let p=!1;async function b(X){const{data:de,error:le}=await ce.from("user_level").select().eq("username",X);return le&&console.error(le),de.length>0}let y,v,S,k,D,$,T;async function R(){t(2,l=!0);let X=await b(k);if(t(2,l=!1),X){t(7,v="Username already exists.");return}else if(D!=$){t(7,v="Password does not match.");return}t(0,p=!p)}async function E(){const{data:X,error:de}=await ce.from("user_level").select().eq("username",T);if(X.length==0){t(8,S="Student ID already exists");return}}let I=!1,Y=!1,N=!1;function z(){m=this.value,t(4,m)}const ne=()=>t(6,y=""),j=()=>t(12,I=!I),Q=X=>{t(6,y=""),t(5,_=Zr(X))},A=()=>t(7,v="");function U(){k=this.value,t(9,k)}const F=()=>t(13,Y=!Y),L=X=>{t(7,v=""),t(10,D=Zr(X))},W=()=>t(14,N=!N),H=X=>{t(7,v=""),t(11,$=Zr(X))},oe=()=>t(0,p=!p),J=()=>s("263690"),te=()=>i("153827");return n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(3,f=a?"":"active"),n.$$.dirty[0]&4194305&&t(15,r=p&&!a?"moreinfo":"")},[p,o,l,f,m,_,y,v,S,k,D,$,I,Y,N,r,s,i,d,g,R,E,a,z,ne,j,Q,A,U,F,L,W,H,oe,J,te]}class Np extends Te{constructor(e){super(),De(this,e,Yp,Ap,$e,{},null,[-1,-1])}}function Up(n){let e,t,r,s,i,o,l,a,f,d,m,_;const g=n[4].default,p=gr(g,n,n[3],null);return{c(){e=h("div"),t=h("label"),r=re(n[0]),s=w(),i=h("div"),p&&p.c(),o=w(),l=h("div"),a=h("button"),f=re(n[2]),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",n[1]),u(i,"class","col-sm-5 col-md-6 col-9"),u(a,"class","w-100 btn btn-outline-primary"),u(l,"class","col-sm-3 col-md-3 col-auto"),u(e,"class","mb-4 row justify-content-center")},m(b,y){M(b,e,y),c(e,t),c(t,r),c(e,s),c(e,i),p&&p.m(i,null),c(e,o),c(e,l),c(l,a),c(a,f),d=!0,m||(_=q(a,"click",n[5]),m=!0)},p(b,[y]){(!d||y&1)&&ue(r,b[0]),(!d||y&2)&&u(t,"for",b[1]),p&&p.p&&(!d||y&8)&&vr(p,g,b,b[3],d?br(g,b[3],y,null):wr(b[3]),null),(!d||y&4)&&ue(f,b[2])},i(b){d||(O(p,b),d=!0)},o(b){P(p,b),d=!1},d(b){b&&C(e),p&&p.d(b),m=!1,_()}}}function Fp(n,e,t){let{$$slots:r={},$$scope:s}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(f){lr.call(this,n,f)}return n.$$set=f=>{"label"in f&&t(0,i=f.label),"id"in f&&t(1,o=f.id),"button"in f&&t(2,l=f.button),"$$scope"in f&&t(3,s=f.$$scope)},[i,o,l,s,r,a]}class Hp extends Te{constructor(e){super(),De(this,e,Fp,Up,$e,{label:0,id:1,button:2})}}function Wp(n){let e,t,r,s,i,o,l,a;return{c(){e=h("div"),t=h("div"),r=h("b"),s=re(n[0]),i=re(":"),o=w(),l=h("div"),a=re(n[1]),u(t,"class","col-sm-4 col-md-4"),u(l,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(f,d){M(f,e,d),c(e,t),c(t,r),c(r,s),c(r,i),c(e,o),c(e,l),c(l,a)},p(f,[d]){d&1&&ue(s,f[0]),d&2&&ue(a,f[1])},i:Z,o:Z,d(f){f&&C(e)}}}function qp(n,e,t){let{key:r}=e,{value:s}=e;return n.$$set=i=>{"key"in i&&t(0,r=i.key),"value"in i&&t(1,s=i.value)},[r,s]}class Ze extends Te{constructor(e){super(),De(this,e,qp,Wp,$e,{key:0,value:1})}}function Bp(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Cannot Find Reservation",u(e,"class",t="form-control "+n[9]),u(e,"type","number"),u(e,"id","reserve"),u(e,"placeholder","e.g 300xxx"),u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[4]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[18]),q(e,"keyup",n[19])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a[0]&16&&bn(e.value)!==l[4]&&G(e,l[4])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function Vp(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Cannot Find Student",u(e,"class",t="form-control "+n[10]),u(e,"type","text"),u(e,"id","stud-id"),u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[5]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[20]),q(e,"keyup",n[21])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&32&&e.value!==l[5]&&G(e,l[5])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function xp(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Cannot Find Book",u(e,"class",t="form-control "+n[11]),u(e,"type","text"),u(e,"id","book-barcode"),u(e,"placeholder","e.g 1000xxx"),u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[6]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[22]),q(e,"keyup",n[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&u(e,"class",t),a[0]&64&&e.value!==l[6]&&G(e,l[6])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function Do(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D;return s=new Ze({props:{key:"Borrow ID",value:n[3]}}),o=new Ze({props:{key:"Name",value:n[7]}}),a=new Ze({props:{key:"Book Title",value:n[8]+" ("+n[6]+")"}}),d=new Ze({props:{key:"Staff Name",value:"Francis James E. Salles ("+n[14]+")"}}),_=new Ze({props:{key:"Borrow Date",value:K(n[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new Ze({props:{key:"Return Due",value:K(n[1]).format("MMMM DD, YYYY")+" ("+n[12]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",r=w(),x(s.$$.fragment),i=w(),x(o.$$.fragment),l=w(),x(a.$$.fragment),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),g=w(),x(p.$$.fragment),b=w(),y=h("div"),v=h("button"),v.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',u(t,"class","py-4 text-center"),u(v,"class","btn btn-secondary"),u(y,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m($,T){M($,e,T),c(e,t),c(e,r),B(s,e,null),c(e,i),B(o,e,null),c(e,l),B(a,e,null),c(e,f),B(d,e,null),c(e,m),B(_,e,null),c(e,g),B(p,e,null),c(e,b),c(e,y),c(y,v),S=!0,k||(D=q(v,"click",n[17]),k=!0)},p($,T){const R={};T[0]&8&&(R.value=$[3]),s.$set(R);const E={};T[0]&128&&(E.value=$[7]),o.$set(E);const I={};T[0]&320&&(I.value=$[8]+" ("+$[6]+")"),a.$set(I);const Y={};T[0]&1&&(Y.value=K($[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(Y);const N={};T[0]&4098&&(N.value=K($[1]).format("MMMM DD, YYYY")+" ("+$[12]+" days)"),p.$set(N)},i($){S||(O(s.$$.fragment,$),O(o.$$.fragment,$),O(a.$$.fragment,$),O(d.$$.fragment,$),O(_.$$.fragment,$),O(p.$$.fragment,$),S=!0)},o($){P(s.$$.fragment,$),P(o.$$.fragment,$),P(a.$$.fragment,$),P(d.$$.fragment,$),P(_.$$.fragment,$),P(p.$$.fragment,$),S=!1},d($){$&&C(e),V(s),V(o),V(a),V(d),V(_),V(p),k=!1,D()}}}function zp(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J,te,X,de;t=new et({props:{text:"Borrow Book"}}),o=new Hp({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Bp]},$$scope:{ctx:n}}}),o.$on("click",n[16]),d=new Ee({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Vp]},$$scope:{ctx:n}}}),_=new Ee({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[xp]},$$scope:{ctx:n}}});let le=n[2]&&Do(n);return{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),x(o.$$.fragment),l=w(),a=h("hr"),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),g=w(),p=h("div"),b=h("label"),b.textContent="Borrow Date:",y=w(),v=h("div"),S=h("input"),D=w(),$=h("div"),T=h("button"),T.textContent="Today",R=w(),E=h("div"),I=h("label"),I.textContent="Return Due:",Y=w(),N=h("div"),z=h("input"),j=w(),Q=h("div"),A=h("button"),A.textContent=`~${ps} Days`,U=w(),F=h("div"),L=h("button"),L.innerHTML='<i class="bi bi-receipt"></i> Borrow',W=w(),H=h("a"),H.innerHTML='<i class="bi bi-x-circle"></i> Cancel',oe=w(),le&&le.c(),u(a,"class","mb-4"),u(b,"class","col-sm-4 col-md-3 col-form-label"),u(b,"for","borrow-date"),u(S,"class","form-control"),u(S,"type","datetime-local"),u(S,"id","borrow-date"),u(S,"max",k=K(n[1]).format("YYYY-MM-DD HH:mm")),u(v,"class","col-sm-5 col-md-6 col-7"),u(T,"class","w-100 btn btn-outline-primary"),u($,"class","col-sm-3 col-md-3 col-auto"),u(p,"class","mb-4 row justify-content-center"),u(I,"class","col-sm-4 col-md-3 col-form-label"),u(I,"for","return-date"),u(z,"class","form-control"),u(z,"type","date"),u(z,"id","return-date"),u(z,"min",ne=K(n[0]).format("YYYY-MM-DD")),u(N,"class","col-sm-5 col-md-6 col-7"),u(A,"class","w-100 btn btn-outline-primary"),u(Q,"class","col-sm-3 col-md-3 col-auto"),u(E,"class","mb-4 row justify-content-center"),u(L,"class","btn btn-success"),u(H,"href","./#/"),u(H,"class","btn btn-danger"),u(F,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),u(s,"class","row justify-content-around"),u(e,"class","container")},m(se,_e){M(se,e,_e),B(t,e,null),c(e,r),c(e,s),c(s,i),B(o,i,null),c(i,l),c(i,a),c(i,f),B(d,i,null),c(i,m),B(_,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,v),c(v,S),G(S,n[0]),c(p,D),c(p,$),c($,T),c(i,R),c(i,E),c(E,I),c(E,Y),c(E,N),c(N,z),G(z,n[1]),c(E,j),c(E,Q),c(Q,A),c(i,U),c(i,F),c(F,L),c(F,W),c(F,H),c(s,oe),le&&le.m(s,null),te=!0,X||(de=[q(S,"input",n[24]),q(T,"click",n[25]),q(z,"input",n[26]),q(A,"click",n[27]),q(L,"click",n[28])],X=!0)},p(se,_e){const me={};_e[0]&528|_e[1]&2&&(me.$$scope={dirty:_e,ctx:se}),o.$set(me);const fe={};_e[0]&1056|_e[1]&2&&(fe.$$scope={dirty:_e,ctx:se}),d.$set(fe);const we={};_e[0]&2112|_e[1]&2&&(we.$$scope={dirty:_e,ctx:se}),_.$set(we),(!te||_e[0]&2&&k!==(k=K(se[1]).format("YYYY-MM-DD HH:mm")))&&u(S,"max",k),_e[0]&1&&G(S,se[0]),(!te||_e[0]&1&&ne!==(ne=K(se[0]).format("YYYY-MM-DD")))&&u(z,"min",ne),_e[0]&2&&G(z,se[1]),se[2]?le?(le.p(se,_e),_e[0]&4&&O(le,1)):(le=Do(se),le.c(),O(le,1),le.m(s,null)):le&&(je(),P(le,1,1,()=>{le=null}),Ae())},i(se){te||(O(t.$$.fragment,se),O(o.$$.fragment,se),O(d.$$.fragment,se),O(_.$$.fragment,se),O(le),se&&(J||Ie(()=>{J=Ve(e,xe,{duration:500}),J.start()})),te=!0)},o(se){P(t.$$.fragment,se),P(o.$$.fragment,se),P(d.$$.fragment,se),P(_.$$.fragment,se),P(le),te=!1},d(se){se&&C(e),V(t),V(o),V(d),V(_),le&&le.d(),X=!1,ve(de)}}}const ps=14;function To(){return"400"+Math.floor(Math.random()*9e3)}function Gp(n,e,t){let r,s;pr(n,ks,L=>t(29,s=L));const i=K().format("YYYY-MM-DD HH:mm");let o=i,l=K(i).add(ps,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let f=!1,d,m,_,g;const p=new URLSearchParams(s);m=p.get("reserve_id")||"",g=p.get("barcode")||"";let b,y,v,S,k;async function D(){const{data:L,error:W}=await ce.from("account_details").select("fname, lname").eq("user_id",_).single();W?(t(10,S="is-invalid"),console.error(W)):t(7,b=`${L.fname} ${L.lname}`);const{data:H,error:oe}=await ce.from("library_holdings").select("books(title)").eq("barcode",g).single();oe||!H?(t(11,k="is-invalid"),console.error(oe)):t(8,y=H.books.title),(!oe||!W)&&(t(3,d=await R()),t(2,f=!f))}async function $(){const{data:L,error:W}=await ce.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();W||!L?(t(9,v="is-invalid"),console.error(W)):(t(5,_=L.stud_id),t(6,g=L.library_holdings.barcode),D())}async function T(){const{data:L,error:W}=await ce.from("library_holdings").select("holding_id").eq("barcode",g).single();W&&console.error(W);const H=K(o).format("YYYY-MM-DDTHH:MMZ"),oe=K(l).format("YYYY-MM-DDTHH:MMZ"),{error:J}=await ce.from("book_borrow").insert({borrow_id:d,stud_id:_,holding_id:L.holding_id,staff_id:a,borrow_date:H,due_date:oe});if(J){console.error(J);return}const{data:te,error:X}=await ce.from("book_reservation").update({staff_id:a,release_date:H,active:!1}).eq("active",!0).eq("holding_id",L.holding_id).select();if(console.log("updated Rows:",te),X){console.error(X);return}const{error:de}=await ce.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",L.holding_id);if(de){console.error(de);return}alert(`${b} successfully borrowed ${y}!`)}async function R(){let L=To();const{data:W,error:H}=await ce.from("book_borrow").select().eq("borrow_id",L);return console.log(W),W.length!=0&&(L=To(),console.log("exists")),console.log(L),L}function E(){m=bn(this.value),t(4,m)}const I=()=>t(9,v="");function Y(){_=this.value,t(5,_)}const N=()=>t(10,S="");function z(){g=this.value,t(6,g)}const ne=()=>t(11,k="");function j(){o=this.value,t(0,o)}const Q=()=>t(0,o=i);function A(){l=this.value,t(1,l)}const U=()=>t(1,l=K(o).add(ps,"days").format("YYYY-MM-DD")),F=()=>{D()};return n.$$.update=()=>{n.$$.dirty[0]&3&&t(12,r=K(l).diff(K(o).format("YYYY-MM-DD"),"days"))},[o,l,f,d,m,_,g,b,y,v,S,k,r,i,a,D,$,T,E,I,Y,N,z,ne,j,Q,A,U,F]}class Jp extends Te{constructor(e){super(),De(this,e,Gp,zp,$e,{},null,[-1,-1])}}function Kp(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Borrow ID not found.",u(e,"class",t="form-control "+n[4]),e.disabled=n[5],u(e,"type","text"),u(e,"id","book-id"),u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[3]),M(l,r,a),M(l,s,a),i||(o=[q(e,"keyup",n[21]),q(e,"input",n[22])],i=!0)},p(l,a){a[0]&16&&t!==(t="form-control "+l[4])&&u(e,"class",t),a[0]&32&&(e.disabled=l[5]),a[0]&8&&e.value!==l[3]&&G(e,l[3])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function Zp(n){let e,t,r,s,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",r=h("option"),r.textContent="Good",s=h("option"),s.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",G(t,t.__value),r.__value="Good",G(r,r.__value),s.__value="Fair",G(s,s.__value),i.__value="Poor",G(i,i.__value),u(e,"class","form-select"),u(e,"id","book-condition"),n[12]===void 0&&Ie(()=>n[23].call(e))},m(a,f){M(a,e,f),c(e,t),c(e,r),c(e,s),c(e,i),sr(e,n[12],!0),o||(l=q(e,"change",n[23]),o=!0)},p(a,f){f[0]&4096&&sr(e,a[12])},d(a){a&&C(e),o=!1,l()}}}function Qp(n){let e,t,r;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"rows","3"),u(e,"id","book-note")},m(s,i){M(s,e,i),G(e,n[11]),t||(r=q(e,"input",n[24]),t=!0)},p(s,i){i[0]&2048&&G(e,s[11])},d(s){s&&C(e),t=!1,r()}}}function Oo(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E;s=new Ze({props:{key:"Borrow ID",value:n[3]}}),o=new Ze({props:{key:"Return ID",value:n[6]}}),a=new Ze({props:{key:"Name",value:n[10]+" ("+n[9]+")"}}),d=new Ze({props:{key:"Book Title",value:n[7]+" ("+n[8]+")"}}),_=new Ze({props:{key:"Condition",value:n[12]}});let I=n[11]&&Co(n);b=new Ze({props:{key:"Received by",value:"Francis James E. Salles ("+n[17]+")"}}),v=new Ze({props:{key:"Return Due",value:K(n[1]).format("MMMM DD, YYYY")}}),k=new Ze({props:{key:"Return Date",value:K(n[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(n[2]>0?`+${n[2]}`:n[2])+" days)"}});let Y=n[2]<0&&Mo(n);function N(j,Q){return j[2]>=0?eg:Xp}let z=N(n),ne=z(n);return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",r=w(),x(s.$$.fragment),i=w(),x(o.$$.fragment),l=w(),x(a.$$.fragment),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),g=w(),I&&I.c(),p=w(),x(b.$$.fragment),y=w(),x(v.$$.fragment),S=w(),x(k.$$.fragment),D=w(),Y&&Y.c(),$=w(),T=h("div"),ne.c(),u(t,"class","py-4 text-center"),u(T,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(j,Q){M(j,e,Q),c(e,t),c(e,r),B(s,e,null),c(e,i),B(o,e,null),c(e,l),B(a,e,null),c(e,f),B(d,e,null),c(e,m),B(_,e,null),c(e,g),I&&I.m(e,null),c(e,p),B(b,e,null),c(e,y),B(v,e,null),c(e,S),B(k,e,null),c(e,D),Y&&Y.m(e,null),c(e,$),c(e,T),ne.m(T,null),E=!0},p(j,Q){const A={};Q[0]&8&&(A.value=j[3]),s.$set(A);const U={};Q[0]&64&&(U.value=j[6]),o.$set(U);const F={};Q[0]&1536&&(F.value=j[10]+" ("+j[9]+")"),a.$set(F);const L={};Q[0]&384&&(L.value=j[7]+" ("+j[8]+")"),d.$set(L);const W={};Q[0]&4096&&(W.value=j[12]),_.$set(W),j[11]?I?(I.p(j,Q),Q[0]&2048&&O(I,1)):(I=Co(j),I.c(),O(I,1),I.m(e,p)):I&&(je(),P(I,1,1,()=>{I=null}),Ae());const H={};Q[0]&2&&(H.value=K(j[1]).format("MMMM DD, YYYY")),v.$set(H);const oe={};Q[0]&5&&(oe.value=K(j[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(j[2]>0?`+${j[2]}`:j[2])+" days)"),k.$set(oe),j[2]<0?Y?Y.p(j,Q):(Y=Mo(j),Y.c(),Y.m(e,$)):Y&&(Y.d(1),Y=null),z===(z=N(j))&&ne?ne.p(j,Q):(ne.d(1),ne=z(j),ne&&(ne.c(),ne.m(T,null)))},i(j){E||(O(s.$$.fragment,j),O(o.$$.fragment,j),O(a.$$.fragment,j),O(d.$$.fragment,j),O(_.$$.fragment,j),O(I),O(b.$$.fragment,j),O(v.$$.fragment,j),O(k.$$.fragment,j),j&&Ie(()=>{E&&(R||(R=mn(e,gn,{duration:400,y:-60},!0)),R.run(1))}),E=!0)},o(j){P(s.$$.fragment,j),P(o.$$.fragment,j),P(a.$$.fragment,j),P(d.$$.fragment,j),P(_.$$.fragment,j),P(I),P(b.$$.fragment,j),P(v.$$.fragment,j),P(k.$$.fragment,j),j&&(R||(R=mn(e,gn,{duration:400,y:-60},!1)),R.run(0)),E=!1},d(j){j&&C(e),V(s),V(o),V(a),V(d),V(_),I&&I.d(),V(b),V(v),V(k),Y&&Y.d(),ne.d(),j&&R&&R.end()}}}function Co(n){let e,t;return e=new Ze({props:{key:"Return Note",value:n[11]}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},p(r,s){const i={};s[0]&2048&&(i.value=r[11]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Mo(n){let e,t,r,s,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",r=w(),s=h("div"),i=re(n[15]),o=re(" pesos"),u(t,"class","col-sm-4 col-md-4"),u(s,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(l,a){M(l,e,a),c(e,t),c(e,r),c(e,s),c(s,i),c(s,o)},p(l,a){a[0]&32768&&ue(i,l[15])},d(l){l&&C(e)}}}function Xp(n){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay and Return Book',u(e,"class","btn btn-danger"),u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#payModal")},m(t,r){M(t,e,r)},p:Z,d(t){t&&C(e)}}}function eg(n){let e,t,r;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',u(e,"class","btn btn-success")},m(s,i){M(s,e,i),t||(r=q(e,"click",n[19]),t=!0)},p:Z,d(s){s&&C(e),t=!1,r()}}}function tg(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","ref")},m(s,i){M(s,e,i),G(e,n[13]),t||(r=q(e,"input",n[27]),t=!0)},p(s,i){i[0]&8192&&e.value!==s[13]&&G(e,s[13])},d(s){s&&C(e),t=!1,r()}}}function ng(n){let e,t,r,s,i,o;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",r=h("option"),r.textContent="GCash",s=h("option"),s.textContent="Bank Transfer",t.__value="cash",G(t,t.__value),r.__value="GCash",G(r,r.__value),s.__value="bank",G(s,s.__value),u(e,"name","payment_method"),u(e,"class","form-select"),u(e,"id","payment_method"),n[14]===void 0&&Ie(()=>n[28].call(e))},m(l,a){M(l,e,a),c(e,t),c(e,r),c(e,s),sr(e,n[14],!0),i||(o=q(e,"change",n[28]),i=!0)},p(l,a){a[0]&16384&&sr(e,l[14])},d(l){l&&C(e),i=!1,o()}}}function rg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g;return d=new Ee({props:{label:"Ref No.:",id:"ref",$$slots:{default:[tg]},$$scope:{ctx:n}}}),_=new Ee({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[ng]},$$scope:{ctx:n}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",r=w(),s=h("h1"),i=re(""),o=re(n[15]),l=w(),a=h("hr"),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),u(s,"class","text-center"),u(a,"class","my-4"),u(e,"class","container row")},m(p,b){M(p,e,b),c(e,t),c(e,r),c(e,s),c(s,i),c(s,o),c(e,l),c(e,a),c(e,f),B(d,e,null),c(e,m),B(_,e,null),g=!0},p(p,b){(!g||b[0]&32768)&&ue(o,p[15]);const y={};b[0]&8192|b[1]&4&&(y.$$scope={dirty:b,ctx:p}),d.$set(y);const v={};b[0]&16384|b[1]&4&&(v.$$scope={dirty:b,ctx:p}),_.$set(v)},i(p){g||(O(d.$$.fragment,p),O(_.$$.fragment,p),g=!0)},o(p){P(d.$$.fragment,p),P(_.$$.fragment,p),g=!1},d(p){p&&C(e),V(d),V(_)}}}function sg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F;t=new et({props:{text:"Return Book"}}),o=new Ee({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Kp]},$$scope:{ctx:n}}}),a=new Ee({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Zp]},$$scope:{ctx:n}}}),d=new Ee({props:{label:"Note:",id:"book-note",$$slots:{default:[Qp]},$$scope:{ctx:n}}});let L=n[5]&&Oo(n);return j=new m_({props:{title:"Process Payment",id:"payModal",pButton:"Return and Pay",$$slots:{default:[rg]},$$scope:{ctx:n}}}),j.$on("click",n[29]),{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),x(o.$$.fragment),l=w(),x(a.$$.fragment),f=w(),x(d.$$.fragment),m=w(),_=h("div"),g=h("label"),g.textContent="Return Time:",p=w(),b=h("div"),y=h("input"),v=w(),S=h("div"),k=h("button"),k.textContent="Now",D=w(),$=h("div"),T=h("button"),R=h("i"),E=re(" Preview"),Y=w(),N=h("a"),N.innerHTML='<i class="bi bi-x-circle"></i> Cancel',z=w(),L&&L.c(),ne=w(),x(j.$$.fragment),u(g,"class","col-sm-4 col-md-3 col-form-label"),u(g,"for","return-time"),u(y,"class","form-control"),u(y,"type","datetime-local"),u(y,"id","return-time"),u(b,"class","col-sm-5 col-md-6 col-7"),u(k,"class","w-100 btn btn-outline-primary"),u(S,"class","col-sm-3 col-md-3 col-auto"),u(_,"class","mb-4 row justify-content-center"),u(R,"class","bi bi-receipt"),u(T,"class",I="btn btn-"+(n[5]?"secondary":"success")),u(N,"href","./#/"),u(N,"class","btn btn-danger"),u($,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-sm-4"),u(s,"class","row justify-content-around"),u(e,"class","container")},m(W,H){M(W,e,H),B(t,e,null),c(e,r),c(e,s),c(s,i),B(o,i,null),c(i,l),B(a,i,null),c(i,f),B(d,i,null),c(i,m),c(i,_),c(_,g),c(_,p),c(_,b),c(b,y),G(y,n[0]),c(_,v),c(_,S),c(S,k),c(i,D),c(i,$),c($,T),c(T,R),c(T,E),c($,Y),c($,N),c(s,z),L&&L.m(s,null),c(e,ne),B(j,e,null),A=!0,U||(F=[q(y,"input",n[25]),q(k,"click",n[26]),q(T,"click",n[18])],U=!0)},p(W,H){const oe={};H[0]&56|H[1]&4&&(oe.$$scope={dirty:H,ctx:W}),o.$set(oe);const J={};H[0]&4096|H[1]&4&&(J.$$scope={dirty:H,ctx:W}),a.$set(J);const te={};H[0]&2048|H[1]&4&&(te.$$scope={dirty:H,ctx:W}),d.$set(te),H[0]&1&&G(y,W[0]),(!A||H[0]&32&&I!==(I="btn btn-"+(W[5]?"secondary":"success")))&&u(T,"class",I),W[5]?L?(L.p(W,H),H[0]&32&&O(L,1)):(L=Oo(W),L.c(),O(L,1),L.m(s,null)):L&&(je(),P(L,1,1,()=>{L=null}),Ae());const X={};H[0]&57344|H[1]&4&&(X.$$scope={dirty:H,ctx:W}),j.$set(X)},i(W){A||(O(t.$$.fragment,W),O(o.$$.fragment,W),O(a.$$.fragment,W),O(d.$$.fragment,W),O(L),O(j.$$.fragment,W),W&&(Q||Ie(()=>{Q=Ve(e,xe,{duration:500}),Q.start()})),A=!0)},o(W){P(t.$$.fragment,W),P(o.$$.fragment,W),P(a.$$.fragment,W),P(d.$$.fragment,W),P(L),P(j.$$.fragment,W),A=!1},d(W){W&&C(e),V(t),V(o),V(a),V(d),L&&L.d(),V(j),U=!1,ve(F)}}}function Po(){return"500"+Math.floor(Math.random()*9e3)}function ig(n,e,t){let r,s,i;pr(n,ks,W=>t(30,i=W));let o=K().format("YYYY-MM-DD HH:mm"),l=o,a="";const f=localStorage.getItem("user_id");let d,m="";d=new URLSearchParams(i).get("borrow_id")||"";let g=!1,p,b,y,v,S,k="",D;async function $(){if(g){t(5,g=!1);return}const{data:W,error:H}=await ce.from("book_borrow").select().eq("borrow_id",d).eq("active",!0).maybeSingle();if(!W){t(4,m="is-invalid");return}const{data:oe,error:J}=await ce.rpc("getborrowinfo",{borrowid:d});console.error(J),console.table(oe);let te=oe[0];t(10,S=`${te.fname} ${te.lname}`),t(9,v=te.stud_id),t(7,b=te.title),t(8,y=te.barcode),t(1,a=te.due_date),t(6,p=await Y()),t(5,g=!0)}async function T(){const{data:W,error:H}=await ce.from("book_return").insert({return_id:p,borrow_id:d,staff_id:f,note:k,return_date:K(l).format("YYYY-MM-DDTHH:MMZ"),condition:D}).select();if(H)return console.error(H),!1;console.table(W);const{data:oe,error:J}=await ce.from("library_holdings").update({status:"Available",condition:D}).eq("barcode",y).select(),{data:te,error:X}=await ce.from("book_borrow").update({active:!1}).eq("borrow_id",d).select();return J||X?(console.error(J),console.error(X),!1):(console.log(oe,te),alert(`Successfully Returned ${b}(${y})`),t(5,g=!1),t(3,d=""),!0)}let R="",E;async function I(){if(R.trim()==""){alert("Please enter Reference Number");return}await T()&&await ce.from("payments").insert({return_id:p,amount:s,payment_method:E})}async function Y(){let W=Po();const{data:H,error:oe}=await ce.from("book_return").select().eq("return_id",W);return console.log(H),H.length!=0&&(W=Po(),console.log("exists")),console.log(W),W}const N=()=>t(4,m="");function z(){d=this.value,t(3,d)}function ne(){D=ai(this),t(12,D)}function j(){k=this.value,t(11,k)}function Q(){l=this.value,t(0,l)}const A=()=>t(0,l=o);function U(){R=this.value,t(13,R)}function F(){E=ai(this),t(14,E)}const L=()=>{I()};return n.$$.update=()=>{n.$$.dirty[0]&3&&t(2,r=K(l).diff(K(a),"days")*-1),n.$$.dirty[0]&4&&t(15,s=r*-50)},[l,a,r,d,m,g,p,b,y,v,S,k,D,R,E,s,o,f,$,T,I,N,z,ne,j,Q,A,U,F,L]}class og extends Te{constructor(e){super(),De(this,e,ig,sg,$e,{},null,[-1,-1])}}function ag(n){let e,t,r,s;return{c(){e=h("input"),u(e,"class",t="form-control "+n[7]),u(e,"type","text"),u(e,"id","author-name")},m(i,o){M(i,e,o),G(e,n[4]),r||(s=[q(e,"input",n[11]),q(e,"keyup",n[12])],r=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&e.value!==i[4]&&G(e,i[4])},d(i){i&&C(e),r=!1,ve(s)}}}function lg(n){let e,t,r,s;return{c(){e=h("textarea"),u(e,"class",t="form-control "+n[8]),u(e,"id","author-bio"),u(e,"rows","4")},m(i,o){M(i,e,o),G(e,n[5]),r||(s=[q(e,"input",n[13]),q(e,"keyup",n[14])],r=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&G(e,i[5])},d(i){i&&C(e),r=!1,ve(s)}}}function cg(n){let e,t,r,s;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","author-link"),u(e,"class",t="form-control "+n[9])},m(i,o){M(i,e,o),G(e,n[6]),r||(s=[q(e,"input",n[15]),q(e,"keyup",n[16])],r=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&u(e,"class",t),o&64&&e.value!==i[6]&&G(e,i[6])},d(i){i&&C(e),r=!1,ve(s)}}}function ug(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","author-pic"),u(e,"accept","image/*")},m(s,i){M(s,e,i),n[18](e),t||(r=q(e,"change",n[17]),t=!0)},p:Z,d(s){s&&C(e),n[18](null),t=!1,r()}}}function fg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q;return t=new et({props:{text:"Add Author"}}),o=new Ee({props:{label:"Author Name:",id:"author-name",$$slots:{default:[ag]},$$scope:{ctx:n}}}),a=new Ee({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[lg]},$$scope:{ctx:n}}}),d=new Ee({props:{label:"Author Link:",id:"author-link",$$slots:{default:[cg]},$$scope:{ctx:n}}}),_=new Ee({props:{label:"Picture:",id:"author-pic",$$slots:{default:[ug]},$$scope:{ctx:n}}}),{c(){e=h("section"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),x(o.$$.fragment),l=w(),x(a.$$.fragment),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),g=w(),p=h("div"),b=h("label"),b.textContent="Preview:",y=w(),v=h("div"),S=h("img"),D=w(),$=h("button"),$.textContent="Remove",R=w(),E=h("div"),I=h("button"),I.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',Y=w(),N=h("a"),N.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Be(S.src,k=n[3])||u(S,"src",k),u(S,"alt","Preview"),u(S,"id","cover-preview"),u(S,"height","150"),u($,"class","btn btn-sm btn-danger"),u(v,"class","col-sm-8 col-md-9"),u(v,"id","preview-div"),u(p,"class",T="my-3 row "+n[2]),u(I,"class","btn btn-success"),u(N,"href","./#/"),u(E,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(s,"class","justify-content-around row"),u(e,"class","container")},m(A,U){M(A,e,U),B(t,e,null),c(e,r),c(e,s),c(s,i),B(o,i,null),c(i,l),B(a,i,null),c(i,f),B(d,i,null),c(i,m),B(_,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,v),c(v,S),c(v,D),c(v,$),c(i,R),c(i,E),c(E,I),c(E,Y),c(E,N),ne=!0,j||(Q=[q($,"click",n[19]),q(I,"click",n[10])],j=!0)},p(A,[U]){const F={};U&1048720&&(F.$$scope={dirty:U,ctx:A}),o.$set(F);const L={};U&1048864&&(L.$$scope={dirty:U,ctx:A}),a.$set(L);const W={};U&1049152&&(W.$$scope={dirty:U,ctx:A}),d.$set(W);const H={};U&1048579&&(H.$$scope={dirty:U,ctx:A}),_.$set(H),(!ne||U&8&&!Be(S.src,k=A[3]))&&u(S,"src",k),(!ne||U&4&&T!==(T="my-3 row "+A[2]))&&u(p,"class",T)},i(A){ne||(O(t.$$.fragment,A),O(o.$$.fragment,A),O(a.$$.fragment,A),O(d.$$.fragment,A),O(_.$$.fragment,A),A&&(z||Ie(()=>{z=Ve(e,xe,{duration:500}),z.start()})),ne=!0)},o(A){P(t.$$.fragment,A),P(o.$$.fragment,A),P(a.$$.fragment,A),P(d.$$.fragment,A),P(_.$$.fragment,A),ne=!1},d(A){A&&C(e),V(t),V(o),V(a),V(d),V(_),j=!1,ve(Q)}}}function dg(n,e,t){let r,s,i="d-none",o,l,a,f,d,m,_;async function g(){t(7,d=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=f?"":"is-invalid"),console.log(d,m,_)}function p(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const v=()=>t(8,m="");function S(){f=this.value,t(6,f)}const k=()=>t(9,_="");function D(){r=this.files,t(0,r)}function $(R){ut[R?"unshift":"push"](()=>{s=R,t(1,s)})}const T=()=>{t(1,s.value="",s),t(0,r="")};return n.$$.update=()=>{if(n.$$.dirty&1)if(r&&r[0]){console.log(r),t(2,i="");const R=URL.createObjectURL(r[0]);t(3,o=R)}else t(2,i="d-none")},[r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T]}class hg extends Te{constructor(e){super(),De(this,e,dg,fg,$e,{})}}function mg(n){let e,t,r,s;return{c(){e=h("input"),u(e,"class",t="form-control "+n[7]),u(e,"type","text"),u(e,"id","publisher-name")},m(i,o){M(i,e,o),G(e,n[4]),r||(s=[q(e,"input",n[11]),q(e,"keyup",n[12])],r=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&e.value!==i[4]&&G(e,i[4])},d(i){i&&C(e),r=!1,ve(s)}}}function _g(n){let e,t,r,s;return{c(){e=h("textarea"),u(e,"class",t="form-control "+n[8]),u(e,"id","publisher-description"),u(e,"rows","4")},m(i,o){M(i,e,o),G(e,n[5]),r||(s=[q(e,"input",n[13]),q(e,"keyup",n[14])],r=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&G(e,i[5])},d(i){i&&C(e),r=!1,ve(s)}}}function pg(n){let e,t,r,s;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","publisher-link"),u(e,"class",t="form-control "+n[9])},m(i,o){M(i,e,o),G(e,n[6]),r||(s=[q(e,"input",n[15]),q(e,"keyup",n[16])],r=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&u(e,"class",t),o&64&&e.value!==i[6]&&G(e,i[6])},d(i){i&&C(e),r=!1,ve(s)}}}function gg(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","publisher-pic"),u(e,"accept","image/*")},m(s,i){M(s,e,i),n[18](e),t||(r=q(e,"change",n[17]),t=!0)},p:Z,d(s){s&&C(e),n[18](null),t=!1,r()}}}function bg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q;return t=new et({props:{text:"Add Publisher"}}),o=new Ee({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[mg]},$$scope:{ctx:n}}}),a=new Ee({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[_g]},$$scope:{ctx:n}}}),d=new Ee({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[pg]},$$scope:{ctx:n}}}),_=new Ee({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[gg]},$$scope:{ctx:n}}}),{c(){e=h("section"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),x(o.$$.fragment),l=w(),x(a.$$.fragment),f=w(),x(d.$$.fragment),m=w(),x(_.$$.fragment),g=w(),p=h("div"),b=h("label"),b.textContent="Preview:",y=w(),v=h("div"),S=h("img"),D=w(),$=h("button"),$.textContent="Remove",R=w(),E=h("div"),I=h("button"),I.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',Y=w(),N=h("a"),N.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Be(S.src,k=n[3])||u(S,"src",k),u(S,"alt","Preview"),u(S,"id","cover-preview"),u(S,"height","150"),u($,"class","btn btn-sm btn-danger"),u(v,"class","col-sm-8 col-md-9"),u(v,"id","preview-div"),u(p,"class",T="my-3 row "+n[2]),u(I,"class","btn btn-success"),u(N,"href","./#/"),u(E,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(s,"class","justify-content-around row"),u(e,"class","container")},m(A,U){M(A,e,U),B(t,e,null),c(e,r),c(e,s),c(s,i),B(o,i,null),c(i,l),B(a,i,null),c(i,f),B(d,i,null),c(i,m),B(_,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,v),c(v,S),c(v,D),c(v,$),c(i,R),c(i,E),c(E,I),c(E,Y),c(E,N),ne=!0,j||(Q=[q($,"click",n[19]),q(I,"click",n[10])],j=!0)},p(A,[U]){const F={};U&1048720&&(F.$$scope={dirty:U,ctx:A}),o.$set(F);const L={};U&1048864&&(L.$$scope={dirty:U,ctx:A}),a.$set(L);const W={};U&1049152&&(W.$$scope={dirty:U,ctx:A}),d.$set(W);const H={};U&1048579&&(H.$$scope={dirty:U,ctx:A}),_.$set(H),(!ne||U&8&&!Be(S.src,k=A[3]))&&u(S,"src",k),(!ne||U&4&&T!==(T="my-3 row "+A[2]))&&u(p,"class",T)},i(A){ne||(O(t.$$.fragment,A),O(o.$$.fragment,A),O(a.$$.fragment,A),O(d.$$.fragment,A),O(_.$$.fragment,A),A&&(z||Ie(()=>{z=Ve(e,xe,{duration:500}),z.start()})),ne=!0)},o(A){P(t.$$.fragment,A),P(o.$$.fragment,A),P(a.$$.fragment,A),P(d.$$.fragment,A),P(_.$$.fragment,A),ne=!1},d(A){A&&C(e),V(t),V(o),V(a),V(d),V(_),j=!1,ve(Q)}}}function vg(n,e,t){let r,s,i="d-none",o,l,a,f,d,m,_;async function g(){t(7,d=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=f?"":"is-invalid"),console.log(d,m,_)}function p(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const v=()=>t(8,m="");function S(){f=this.value,t(6,f)}const k=()=>t(9,_="");function D(){r=this.files,t(0,r)}function $(R){ut[R?"unshift":"push"](()=>{s=R,t(1,s)})}const T=()=>{t(1,s.value="",s),t(0,r="")};return n.$$.update=()=>{if(n.$$.dirty&1)if(r&&r[0]){console.log(r),t(2,i="");const R=URL.createObjectURL(r[0]);t(3,o=R)}else t(2,i="d-none")},[r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T]}class wg extends Te{constructor(e){super(),De(this,e,vg,bg,$e,{})}}function Ro(n,e,t){const r=n.slice();return r[10]=e[t][0],r[11]=e[t][1],r}function Eo(n){let e,t,r,s;return{c(){e=h("b"),e.textContent="Search Query:",t=w(),r=h("span"),s=re(n[3])},m(i,o){M(i,e,o),M(i,t,o),M(i,r,o),c(r,s)},p(i,o){o&8&&ue(s,i[3])},d(i){i&&(C(e),C(t),C(r))}}}function jo(n){let e,t=Ce(Object.entries(n[0])),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ao(Ro(n,t,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ge()},m(s,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=Ce(Object.entries(s[0]));let o;for(o=0;o<t.length;o+=1){const l=Ro(s,t,o);r[o]?r[o].p(l,i):(r[o]=Ao(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function Ao(n){let e,t,r=n[11].isbn+"",s,i,o,l=n[11].title+"",a,f,d,m=n[11].available+"",_,g,p,b=n[11].reserved+"",y,v,S,k=n[11].borrowed+"",D,$,T,R=n[11].total+"",E,I;return{c(){e=h("tr"),t=h("td"),s=re(r),i=w(),o=h("td"),a=re(l),f=w(),d=h("td"),_=re(m),g=w(),p=h("td"),y=re(b),v=w(),S=h("td"),D=re(k),$=w(),T=h("td"),E=re(R),I=w(),u(t,"class","d-md-table-cell  svelte-1cmatm3"),u(o,"class","svelte-1cmatm3"),u(d,"class","svelte-1cmatm3"),u(p,"class","svelte-1cmatm3"),u(S,"class","svelte-1cmatm3"),u(T,"class","fw-bold svelte-1cmatm3")},m(Y,N){M(Y,e,N),c(e,t),c(t,s),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,_),c(e,g),c(e,p),c(p,y),c(e,v),c(e,S),c(S,D),c(e,$),c(e,T),c(T,E),c(e,I)},p(Y,N){N&1&&r!==(r=Y[11].isbn+"")&&ue(s,r),N&1&&l!==(l=Y[11].title+"")&&ue(a,l),N&1&&m!==(m=Y[11].available+"")&&ue(_,m),N&1&&b!==(b=Y[11].reserved+"")&&ue(y,b),N&1&&k!==(k=Y[11].borrowed+"")&&ue(D,k),N&1&&R!==(R=Y[11].total+"")&&ue(E,R)},d(Y){Y&&C(e)}}}function yg(n){let e,t,r,s,i,o,l,a,f,d,m=n[5].toUpperCase()+"",_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe,J,te,X,de,le;t=new et({props:{text:"Books Report",print:!0}});let se=n[3]&&Eo(n),_e=n[0]&&jo(n);return{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("b"),i.textContent="Sorted by:",o=w(),l=h("span"),a=re(n[2]),f=w(),d=h("i"),_=re(m),g=w(),se&&se.c(),p=w(),b=h("div"),y=h("div"),y.textContent="Sort by:",v=w(),S=h("div"),k=h("select"),D=h("option"),D.textContent="Total",$=h("option"),$.textContent="Available",T=h("option"),T.textContent="Reserved",R=h("option"),R.textContent="Borrowed",E=w(),I=h("div"),Y=h("select"),N=h("option"),N.textContent="Ascending",z=h("option"),z.textContent="Descending",ne=w(),j=h("form"),Q=h("input"),A=w(),U=h("button"),U.innerHTML='<i class="bi bi-search"></i>',F=w(),L=h("div"),W=h("table"),H=h("thead"),H.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-md-table-cell svelte-1cmatm3">ISBN</th> <th class="py-3 col-5 svelte-1cmatm3">Book Title</th> <th class="py-3 col-1 text-bg-success svelte-1cmatm3">Available</th> <th class="py-3 col-1 text-bg-secondary svelte-1cmatm3">Reserved</th> <th class="py-3 col-1 text-bg-danger svelte-1cmatm3">Borrowed</th> <th class="py-3 col-1 text-bg-primary svelte-1cmatm3">Total</th></tr>',oe=w(),J=h("tbody"),_e&&_e.c(),u(s,"class","d-none d-print-flex align-items-center gap-2 my-3"),D.__value="Total",G(D,D.__value),$.__value="Available",G($,$.__value),T.__value="Reserved",G(T,T.__value),R.__value="Borrowed",G(R,R.__value),u(k,"name","filter"),u(k,"class","form-select"),N.__value="asc",G(N,N.__value),z.__value="desc",G(z,z.__value),u(Y,"name","order"),u(Y,"class","form-select"),u(Q,"type","text"),u(Q,"placeholder","Search title..."),u(Q,"name","search"),u(Q,"class","form-control"),u(U,"type","submit"),u(U,"class","btn btn-outline-success"),u(j,"class","d-flex ms-3"),u(b,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(W,"class","table table-bordered table-striped table-hover text-center align-middle"),u(L,"class",""),u(e,"class","container")},m(me,fe){M(me,e,fe),B(t,e,null),c(e,r),c(e,s),c(s,i),c(s,o),c(s,l),c(l,a),c(l,f),c(l,d),c(d,_),c(s,g),se&&se.m(s,null),c(e,p),c(e,b),c(b,y),c(b,v),c(b,S),c(S,k),c(k,D),c(k,$),c(k,T),c(k,R),n[7](k),c(b,E),c(b,I),c(I,Y),c(Y,N),c(Y,z),n[8](Y),c(b,ne),c(b,j),c(j,Q),G(Q,n[3]),c(j,A),c(j,U),c(e,F),c(e,L),c(L,W),c(W,H),c(W,oe),c(W,J),_e&&_e.m(J,null),X=!0,de||(le=[q(k,"change",n[6]),q(Y,"change",n[6]),q(Q,"input",n[9]),q(U,"click",n[6]),q(j,"submit",pt(kg))],de=!0)},p(me,[fe]){(!X||fe&4)&&ue(a,me[2]),(!X||fe&32)&&m!==(m=me[5].toUpperCase()+"")&&ue(_,m),me[3]?se?se.p(me,fe):(se=Eo(me),se.c(),se.m(s,null)):se&&(se.d(1),se=null),fe&8&&Q.value!==me[3]&&G(Q,me[3]),me[0]?_e?_e.p(me,fe):(_e=jo(me),_e.c(),_e.m(J,null)):_e&&(_e.d(1),_e=null)},i(me){X||(O(t.$$.fragment,me),me&&(te||Ie(()=>{te=Ve(e,xe,{duration:500}),te.start()})),X=!0)},o(me){P(t.$$.fragment,me),X=!1},d(me){me&&C(e),V(t),se&&se.d(),n[7](null),n[8](null),_e&&_e.d(),de=!1,ve(le)}}}const kg=()=>{};function $g(n,e,t){let r,s,i="total",o="",l,a="asc";async function f(){t(2,i=s.value),t(5,a=l.value);const{data:g,error:p}=await ce.rpc("getbooksreport",{sortby:i,search:o});if(p){console.error(p);return}a=="asc"&&g.sort((b,y)=>b[i.toLowerCase()]-y[i.toLowerCase()]),console.table(g),t(0,r=g)}hn(f);function d(g){ut[g?"unshift":"push"](()=>{s=g,t(1,s)})}function m(g){ut[g?"unshift":"push"](()=>{l=g,t(4,l)})}function _(){o=this.value,t(3,o)}return[r,s,i,o,l,a,f,d,m,_]}class Sg extends Te{constructor(e){super(),De(this,e,$g,yg,$e,{})}}function Io(n,e,t){const r=n.slice();return r[2]=e[t],r}function Lo(n){let e,t,r,s,i,o,l,a,f;return{c(){e=h("tr"),t=h("td"),t.textContent=`${n[2].ref}`,r=w(),s=h("td"),s.textContent=`${n[2].name}`,i=w(),o=h("td"),o.textContent=`${n[2].daysLate*50}`,l=w(),a=h("td"),a.textContent=`${n[2].daysLate}`,f=w()},m(d,m){M(d,e,m),c(e,t),c(e,r),c(e,s),c(e,i),c(e,o),c(e,l),c(e,a),c(e,f)},p:Z,d(d){d&&C(e)}}}function Dg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T;t=new et({props:{text:"Payments Report"}});let R=Ce(n[1]),E=[];for(let I=0;I<R.length;I+=1)E[I]=Lo(Io(n,R,I));return{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),o=h("div"),o.textContent="Overall Total Payment",l=w(),a=h("h1"),f=re(""),d=re(n[0]),m=w(),_=h("div"),g=h("div"),g.textContent="Total Late Returns",p=w(),b=h("h1"),b.textContent=`${Tg}`,y=w(),v=h("table"),S=h("thead"),S.innerHTML='<tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr>',k=w(),D=h("tbody");for(let I=0;I<E.length;I+=1)E[I].c();u(s,"class","d-flex justify-content-center gap-5 my-3"),u(v,"class","table table-bordered table-striped text-center"),u(e,"class","container")},m(I,Y){M(I,e,Y),B(t,e,null),c(e,r),c(e,s),c(s,i),c(i,o),c(i,l),c(i,a),c(a,f),c(a,d),c(s,m),c(s,_),c(_,g),c(_,p),c(_,b),c(e,y),c(e,v),c(v,S),c(v,k),c(v,D);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(D,null);T=!0},p(I,[Y]){if((!T||Y&1)&&ue(d,I[0]),Y&2){R=Ce(I[1]);let N;for(N=0;N<R.length;N+=1){const z=Io(I,R,N);E[N]?E[N].p(z,Y):(E[N]=Lo(z),E[N].c(),E[N].m(D,null))}for(;N<E.length;N+=1)E[N].d(1);E.length=R.length}},i(I){T||(O(t.$$.fragment,I),I&&($||Ie(()=>{$=Ve(e,xe,{duration:500}),$.start()})),T=!0)},o(I){P(t.$$.fragment,I),T=!1},d(I){I&&C(e),V(t),ze(E,I)}}}let Tg=10;function Og(n,e,t){let r=200;const s=[{ref:"09124812",name:"Kaysha Dela Pena",daysLate:3},{ref:"235789321",name:"Rich James Lozano",daysLate:2},{ref:"902345789",name:"Aaryanah Gayo",daysLate:1},{ref:"237892431",name:"Knicole Bataclan",daysLate:2},{ref:"2356789235",name:"Chloey Eusebio",daysLate:5},{ref:"234578923",name:"Tristan Aquino",daysLate:7},{ref:"291716781",name:"Kirsten Torrenueva",daysLate:2},{ref:"192782712",name:"Mark Anthony Gipit",daysLate:1},{ref:"214789234",name:"Raven Baldueza",daysLate:6},{ref:"123478623",name:"Henreizh Nathan Aruta",daysLate:2}];return s.forEach(i=>t(0,r+=i.daysLate*50)),[r,s]}class Cg extends Te{constructor(e){super(),De(this,e,Og,Dg,$e,{})}}function Yo(n,e,t){const r=n.slice();return r[10]=e[t],r}function Mg(n){let e,t;return{c(){e=h("option"),e.textContent="Ascending",t=h("option"),t.textContent="Descending",e.__value="",G(e,e.__value),t.__value="",G(t,t.__value)},m(r,s){M(r,e,s),M(r,t,s)},d(r){r&&(C(e),C(t))}}}function Pg(n){let e,t;return{c(){e=h("option"),e.textContent="Borrowed",t=h("option"),t.textContent="Reserved",e.__value="",G(e,e.__value),t.__value="",G(t,t.__value)},m(r,s){M(r,e,s),M(r,t,s)},d(r){r&&(C(e),C(t))}}}function No(n){let e,t=Ce(n[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Fo(Yo(n,t,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ge()},m(s,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=Ce(s[0]);let o;for(o=0;o<t.length;o+=1){const l=Yo(s,t,o);r[o]?r[o].p(l,i):(r[o]=Fo(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(s){s&&C(e),ze(r,s)}}}function Uo(n){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-trash-fill"></i>',u(e,"class","btn btn-sm btn-outline-danger")},m(t,r){M(t,e,r)},d(t){t&&C(e)}}}function Fo(n){let e,t,r=(n[10].bb_stud_id||n[10].br_stud_id)+"",s,i,o,l=n[10].fname+"",a,f,d=n[10].lname+"",m,_,g,p=n[10].title+"",b,y,v,S=n[10].status+"",k,D,$,T=K(n[10].date_reserved||n[10].due_date).format("MM-DD-YYYY")+"",R,E,I,Y,N,z,ne,j,Q,A,U,F,L=n[10].status=="Reserved"&&Uo();return{c(){e=h("tr"),t=h("td"),s=re(r),i=w(),o=h("td"),a=re(l),f=w(),m=re(d),_=w(),g=h("td"),b=re(p),y=w(),v=h("td"),k=re(S),D=w(),$=h("td"),R=re(T),E=w(),I=h("td"),Y=h("a"),N=h("button"),N.innerHTML='<i class="bi bi-envelope-fill"></i>',ne=w(),j=h("a"),Q=h("button"),Q.innerHTML='<i class="bi bi-telephone-fill"></i>',U=w(),L&&L.c(),F=w(),u(N,"class","btn btn-sm btn-outline-primary"),u(Y,"href",z="mailto:"+n[10].email),u(Q,"class","btn btn-sm btn-outline-success"),u(j,"href",A="tel:"+n[10].contact),u(I,"class","d-print-none")},m(W,H){M(W,e,H),c(e,t),c(t,s),c(e,i),c(e,o),c(o,a),c(o,f),c(o,m),c(e,_),c(e,g),c(g,b),c(e,y),c(e,v),c(v,k),c(e,D),c(e,$),c($,R),c(e,E),c(e,I),c(I,Y),c(Y,N),c(I,ne),c(I,j),c(j,Q),c(I,U),L&&L.m(I,null),c(e,F)},p(W,H){H&1&&r!==(r=(W[10].bb_stud_id||W[10].br_stud_id)+"")&&ue(s,r),H&1&&l!==(l=W[10].fname+"")&&ue(a,l),H&1&&d!==(d=W[10].lname+"")&&ue(m,d),H&1&&p!==(p=W[10].title+"")&&ue(b,p),H&1&&S!==(S=W[10].status+"")&&ue(k,S),H&1&&T!==(T=K(W[10].date_reserved||W[10].due_date).format("MM-DD-YYYY")+"")&&ue(R,T),H&1&&z!==(z="mailto:"+W[10].email)&&u(Y,"href",z),H&1&&A!==(A="tel:"+W[10].contact)&&u(j,"href",A),W[10].status=="Reserved"?L||(L=Uo(),L.c(),L.m(I,null)):L&&(L.d(1),L=null)},d(W){W&&C(e),L&&L.d()}}}function Rg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A,U,F,L;t=new et({props:{text:"Student Inventory Report",print:!0}});function W(te,X){return te[2]=="status"?Pg:Mg}let H=W(n),oe=H(n),J=n[0]&&No(n);return{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("div"),i=h("div"),i.textContent="Filters:",o=w(),l=h("div"),a=h("select"),f=h("option"),f.textContent="Student Name",d=h("option"),d.textContent="Book Title",m=h("option"),m.textContent="Status",_=h("option"),_.textContent="Due Date",g=w(),p=h("div"),b=h("select"),oe.c(),y=w(),v=h("form"),S=h("div"),S.textContent="Search:",k=w(),D=h("select"),$=h("option"),$.textContent="Student Name",T=h("option"),T.textContent="Book Title",R=w(),E=h("input"),I=w(),Y=h("button"),Y.innerHTML='<i class="bi bi-search"></i>',N=w(),z=h("table"),ne=h("thead"),ne.innerHTML='<tr class="align-middle"><th>Student ID</th> <th>Student Name</th> <th>Book</th> <th>Status</th> <th>Due Date</th> <th class="d-print-none">Actions</th></tr>',j=w(),Q=h("tbody"),J&&J.c(),f.__value="fname",G(f,f.__value),d.__value="title",G(d,d.__value),m.__value="status",G(m,m.__value),_.__value="",G(_,_.__value),u(a,"name","filter"),u(a,"class","form-select"),u(b,"name","order"),u(b,"class","form-select"),$.__value="fname",G($,$.__value),T.__value="title",G(T,T.__value),u(D,"name","filter"),u(D,"class","form-select"),u(E,"type","text"),u(E,"placeholder","Search..."),u(E,"name","search"),u(E,"class","form-control"),u(Y,"type","submit"),u(Y,"class","btn btn-outline-success"),u(v,"class","d-flex ms-3 align-items-center gap-2"),u(s,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(z,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(te,X){M(te,e,X),B(t,e,null),c(e,r),c(e,s),c(s,i),c(s,o),c(s,l),c(l,a),c(a,f),c(a,d),c(a,m),c(a,_),n[5](a),c(s,g),c(s,p),c(p,b),oe.m(b,null),c(s,y),c(s,v),c(v,S),c(v,k),c(v,D),c(D,$),c(D,T),n[7](D),c(v,R),c(v,E),G(E,n[4]),c(v,I),c(v,Y),c(e,N),c(e,z),c(z,ne),c(z,j),c(z,Q),J&&J.m(Q,null),U=!0,F||(L=[q(a,"change",n[6]),q(D,"change",Eg),q(E,"input",n[8]),q(v,"submit",pt(jg))],F=!0)},p(te,[X]){H!==(H=W(te))&&(oe.d(1),oe=H(te),oe&&(oe.c(),oe.m(b,null))),X&16&&E.value!==te[4]&&G(E,te[4]),te[0]?J?J.p(te,X):(J=No(te),J.c(),J.m(Q,null)):J&&(J.d(1),J=null)},i(te){U||(O(t.$$.fragment,te),te&&(A||Ie(()=>{A=Ve(e,xe,{duration:500}),A.start()})),U=!0)},o(te){P(t.$$.fragment,te),U=!1},d(te){te&&C(e),V(t),n[5](null),oe.d(),n[7](null),J&&J.d(),F=!1,ve(L)}}}const Eg=()=>{},jg=()=>{};function Ag(n,e,t){let r,s={value:""},i="",o,l;async function a(){const{data:g,error:p}=await ce.rpc("getstudentreport");p&&console.error(p),t(0,r=g),console.log(g)}a();function f(g){ut[g?"unshift":"push"](()=>{s=g,t(1,s)})}const d=()=>{t(2,i=s.value),console.log(i)};function m(g){ut[g?"unshift":"push"](()=>{o=g,t(3,o)})}function _(){l=this.value,t(4,l)}return[r,s,i,o,l,f,d,m,_]}class Ig extends Te{constructor(e){super(),De(this,e,Ag,Rg,$e,{})}}function Lg(n){let e,t,r,s,i,o;return t=new et({props:{text:"Transaction Report"}}),{c(){e=h("main"),x(t.$$.fragment),r=w(),s=h("table"),s.innerHTML="<thead><tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr></thead> <tbody><tr><td>06/09/2024/ 10:18am</td> <td>Francis James Salles</td> <td>Some Student Name</td> <td>Borrowed</td> <td>Name borrowed &quot;Book title&quot;</td></tr></tbody>",u(s,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(l,a){M(l,e,a),B(t,e,null),c(e,r),c(e,s),o=!0},p:Z,i(l){o||(O(t.$$.fragment,l),l&&(i||Ie(()=>{i=Ve(e,xe,{duration:500}),i.start()})),o=!0)},o(l){P(t.$$.fragment,l),o=!1},d(l){l&&C(e),V(t)}}}class Yg extends Te{constructor(e){super(),De(this,e,null,Lg,$e,{})}}function Ng(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[1]),t||(r=q(e,"input",n[14]),t=!0)},p(s,i){i[0]&2&&e.value!==s[1]&&G(e,s[1])},d(s){s&&C(e),t=!1,r()}}}function Ug(n){let e,t,r;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off")},m(s,i){M(s,e,i),G(e,n[2]),t||(r=q(e,"input",n[15]),t=!0)},p(s,i){i[0]&4&&G(e,s[2])},d(s){s&&C(e),t=!1,r()}}}function Fg(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(s,i){M(s,e,i),n[17](e),t||(r=q(e,"change",n[16]),t=!0)},p:Z,d(s){s&&C(e),n[17](null),t=!1,r()}}}function Ho(n){let e,t,r,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",r=w(),s=h("div"),i=h("img"),l=w(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Be(i.src,o=n[12])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(s,"class","col-sm-8 col-md-9"),u(s,"id","preview-div"),u(e,"class","my-3 row")},m(m,_){M(m,e,_),c(e,t),c(e,r),c(e,s),c(s,i),c(s,l),c(s,a),f||(d=[q(i,"error",n[18]),q(a,"click",n[19])],f=!0)},p(m,_){_[0]&4096&&!Be(i.src,o=m[12])&&u(i,"src",o)},d(m){m&&C(e),f=!1,ve(d)}}}function Hg(n){let e,t,r,s,i,o,l,a;return{c(){e=h("input"),r=w(),s=h("div"),s.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=w(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+n[8]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){M(f,e,d),G(e,n[3]),M(f,r,d),M(f,s,d),M(f,i,d),M(f,o,d),l||(a=[q(e,"input",n[20]),q(e,"keyup",n[21])],l=!0)},p(f,d){d[0]&256&&t!==(t="form-control "+f[8])&&u(e,"class",t),d[0]&8&&e.value!==f[3]&&G(e,f[3])},d(f){f&&(C(e),C(r),C(s),C(i),C(o)),l=!1,ve(a)}}}function Wg(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+n[9]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[4]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[22]),q(e,"keyup",n[23])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a[0]&16&&e.value!==l[4]&&G(e,l[4])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function qg(n){let e,t,r,s,i,o;return{c(){e=h("input"),r=w(),s=h("div"),s.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+n[10]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(s,"class","invalid-feedback")},m(l,a){M(l,e,a),G(e,n[5]),M(l,r,a),M(l,s,a),i||(o=[q(e,"input",n[24]),q(e,"keyup",n[25])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&32&&e.value!==l[5]&&G(e,l[5])},d(l){l&&(C(e),C(r),C(s)),i=!1,ve(o)}}}function Bg(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[6]),t||(r=q(e,"input",n[26]),t=!0)},p(s,i){i[0]&64&&bn(e.value)!==s[6]&&G(e,s[6])},d(s){s&&C(e),t=!1,r()}}}function Vg(n){let e,t,r;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),G(e,n[7]),t||(r=q(e,"input",n[27]),t=!0)},p(s,i){i[0]&128&&e.value!==s[7]&&G(e,s[7])},d(s){s&&C(e),t=!1,r()}}}function xg(n){let e,t,r,s,i,o,l,a,f,d,m,_,g,p,b,y,v,S,k,D,$,T,R,E,I,Y,N,z,ne,j,Q,A;t=new et({props:{text:"Update Book"}}),l=new Ee({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Ng]},$$scope:{ctx:n}}}),f=new Ee({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Ug]},$$scope:{ctx:n}}}),m=new Ee({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Fg]},$$scope:{ctx:n}}});let U=n[12]&&Ho(n);return b=new Ee({props:{label:"Category:",id:"book-category",$$slots:{default:[Hg]},$$scope:{ctx:n}}}),v=new Ee({props:{label:"Author: ",id:"book-author",$$slots:{default:[Wg]},$$scope:{ctx:n}}}),k=new Ee({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[qg]},$$scope:{ctx:n}}}),$=new Ee({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Bg]},$$scope:{ctx:n}}}),R=new Ee({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Vg]},$$scope:{ctx:n}}}),{c(){e=h("section"),x(t.$$.fragment),r=w(),s=h("form"),i=h("div"),o=h("div"),x(l.$$.fragment),a=w(),x(f.$$.fragment),d=w(),x(m.$$.fragment),_=w(),U&&U.c(),g=w(),p=h("div"),x(b.$$.fragment),y=w(),x(v.$$.fragment),S=w(),x(k.$$.fragment),D=w(),x($.$$.fragment),T=w(),x(R.$$.fragment),E=w(),I=h("div"),Y=h("button"),Y.innerHTML='<i class="bi bi-arrow-clockwise"></i> Update Book',N=w(),z=h("button"),z.innerHTML='<i class="bi bi-x-circle"></i> Cancel',u(o,"class","col-sm-12 col-lg-6"),u(p,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(Y,"class","btn btn-success"),u(Y,"type","submit"),u(z,"class","btn btn-danger"),u(z,"type","button"),u(I,"class","my-3"),u(e,"class","my-1 container")},m(F,L){M(F,e,L),B(t,e,null),c(e,r),c(e,s),c(s,i),c(i,o),B(l,o,null),c(o,a),B(f,o,null),c(o,d),B(m,o,null),c(o,_),U&&U.m(o,null),c(i,g),c(i,p),B(b,p,null),c(p,y),B(v,p,null),c(p,S),B(k,p,null),c(p,D),B($,p,null),c(p,T),B(R,p,null),c(s,E),c(s,I),c(I,Y),c(I,N),c(I,z),j=!0,Q||(A=[q(z,"click",n[28]),q(s,"submit",pt(n[13]))],Q=!0)},p(F,L){const W={};L[0]&2|L[1]&64&&(W.$$scope={dirty:L,ctx:F}),l.$set(W);const H={};L[0]&4|L[1]&64&&(H.$$scope={dirty:L,ctx:F}),f.$set(H);const oe={};L[0]&2049|L[1]&64&&(oe.$$scope={dirty:L,ctx:F}),m.$set(oe),F[12]?U?U.p(F,L):(U=Ho(F),U.c(),U.m(o,null)):U&&(U.d(1),U=null);const J={};L[0]&264|L[1]&64&&(J.$$scope={dirty:L,ctx:F}),b.$set(J);const te={};L[0]&528|L[1]&64&&(te.$$scope={dirty:L,ctx:F}),v.$set(te);const X={};L[0]&1056|L[1]&64&&(X.$$scope={dirty:L,ctx:F}),k.$set(X);const de={};L[0]&64|L[1]&64&&(de.$$scope={dirty:L,ctx:F}),$.$set(de);const le={};L[0]&128|L[1]&64&&(le.$$scope={dirty:L,ctx:F}),R.$set(le)},i(F){j||(O(t.$$.fragment,F),O(l.$$.fragment,F),O(f.$$.fragment,F),O(m.$$.fragment,F),O(b.$$.fragment,F),O(v.$$.fragment,F),O(k.$$.fragment,F),O($.$$.fragment,F),O(R.$$.fragment,F),F&&(ne||Ie(()=>{ne=Ve(e,xe,{duration:500}),ne.start()})),j=!0)},o(F){P(t.$$.fragment,F),P(l.$$.fragment,F),P(f.$$.fragment,F),P(m.$$.fragment,F),P(b.$$.fragment,F),P(v.$$.fragment,F),P(k.$$.fragment,F),P($.$$.fragment,F),P(R.$$.fragment,F),j=!1},d(F){F&&C(e),V(t),V(l),V(f),V(m),U&&U.d(),V(b),V(v),V(k),V($),V(R),Q=!1,ve(A)}}}function zg(n,e,t){let r;pr(n,ks,J=>t(31,r=J));const i=new URLSearchParams(r).get("id");i?D():ns("#/invalid-link");let o,l,a,f,d,m,_,g,p,b,y,v,S,k=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/${i}.jpg`;async function D(){const{data:J,error:te}=await ce.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i).single();if(te){console.error(te),ns("#/invalid-link");return}t(1,o=J.title),t(2,l=J.description),t(4,f=J.author.name),t(5,d=J.publisher.name),t(6,m=J.shelf_number),t(7,_=J.isbn)}async function $(){if(!await T())return;const{error:J}=await ce.rpc("updatebook",{bookid:i,titlevalue:o,descriptionvalue:l,author_name:f,publisher_name:d,shelf_numbervalue:m,isbnvalue:_});if(v&&v[0]){const{data:de,error:le}=await ce.storage.from("books").upload(`${i}.jpg`,v[0],{upsert:!0});le&&console.error(le)}else{const{data:de,error:le}=await ce.storage.from("books").remove([`${i}.jpg`]);le&&console.error(le)}if(J){console.error(J),alert(J.details),alert(J.hint);return}alert("Succesfully Updated");const{error:te}=await ce.from("books_category").delete().eq("book_id",i);te&&console.error(te);let X=!0;for(const de in g){console.log(de);const{data:le,error:se}=await ce.from("books_category").insert({book_id:i,category_id:g[de]});se&&(console.error(se),X=!1)}X||alert("Had problem while pushing categories, Update book later"),ts()}async function T(){const{data:J,error:te}=await ce.from("author").select("author_id").eq("name",f).single(),{data:X,error:de}=await ce.from("publisher").select("publisher_id").eq("name",d).single();let le=!0;if((te||!J)&&(t(9,b="is-invalid"),le=!1),(de||!X)&&(t(10,y="is-invalid"),le=!1),!await R()){if(g.length!=0)return;t(8,p="is-invalid"),le=!1}return le}async function R(){if(a=="")return!1;let J=!0,te=[],X=a.split(",").map(de=>de.trim());console.log(X);for(const de of X){console.log(de);const{data:le,error:se}=await ce.from("category").select("category_id").eq("name",de).single();se?(J=!1,console.error(se)):te.push(le.category_id),console.log(J)}return console.log(X,te),g=J?te:[],console.log(J,g),J}function E(){o=this.value,t(1,o)}function I(){l=this.value,t(2,l)}function Y(){v=this.files,t(0,v)}function N(J){ut[J?"unshift":"push"](()=>{S=J,t(11,S)})}const z=()=>t(12,k=""),ne=()=>{t(11,S.value="",S),t(0,v=""),t(12,k="")};function j(){a=this.value,t(3,a)}const Q=()=>t(8,p="");function A(){f=this.value,t(4,f)}const U=()=>t(9,b="");function F(){d=this.value,t(5,d)}const L=()=>t(10,y="");function W(){m=bn(this.value),t(6,m)}function H(){_=this.value,t(7,_)}const oe=()=>ts();return n.$$.update=()=>{if(n.$$.dirty[0]&1)if(v&&v[0]){console.log(v);const J=URL.createObjectURL(v[0]);t(12,k=J)}else console.log(v)},[v,o,l,a,f,d,m,_,p,b,y,S,k,$,E,I,Y,N,z,ne,j,Q,A,U,F,L,W,H,oe]}class Gg extends Te{constructor(e){super(),De(this,e,zg,xg,$e,{},null,[-1,-1])}}function Jg(n){let e,t;return e=new $s({props:{routes:{"*":Np}}}),{c(){x(e.$$.fragment)},m(r,s){B(e,r,s),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Kg(n){let e,t,r,s;return e=new _a({}),r=new $s({props:{routes:{"/":kp,"/book/:bookID":cl,"/author/:authorID":ul,"/publisher/:publisherID":fl,"/search":dn,"/search/author":dn,"/search/publisher":dn,"/add-book":Q_,"/add-author":hg,"/add-publisher":wg,"/borrow":Jp,"/return":og,"/book-report":Sg,"/payment-report":Cg,"/student-report":Ig,"/reports":Yg,"/update-book":Gg,"*":Qs}}}),{c(){x(e.$$.fragment),t=w(),x(r.$$.fragment)},m(i,o){B(e,i,o),M(i,t,o),B(r,i,o),s=!0},i(i){s||(O(e.$$.fragment,i),O(r.$$.fragment,i),s=!0)},o(i){P(e.$$.fragment,i),P(r.$$.fragment,i),s=!1},d(i){i&&C(t),V(e,i),V(r,i)}}}function Zg(n){let e,t,r,s;return e=new _a({}),r=new $s({props:{routes:{"/":c_,"/book/:bookID":cl,"/author/:authorID":ul,"/publisher/:publisherID":fl,"/search":dn,"/search/author":dn,"/search/publisher":dn,"*":Qs}}}),{c(){x(e.$$.fragment),t=w(),x(r.$$.fragment)},m(i,o){B(e,i,o),M(i,t,o),B(r,i,o),s=!0},i(i){s||(O(e.$$.fragment,i),O(r.$$.fragment,i),s=!0)},o(i){P(e.$$.fragment,i),P(r.$$.fragment,i),s=!1},d(i){i&&C(t),V(e,i),V(r,i)}}}function Qg(n){let e,t,r,s;const i=[Zg,Kg,Jg],o=[];function l(a,f){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(n),t=o[e]=i[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),M(a,r,f),s=!0},p(a,[f]){let d=e;e=l(a),e!==d&&(je(),P(o[d],1,1,()=>{o[d]=null}),Ae(),t=o[e],t||(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){s||(O(t),s=!0)},o(a){P(t),s=!1},d(a){a&&C(r),o[e].d(a)}}}function Xg(n,e,t){let r;return Nt.subscribe(s=>{t(0,r=s)}),[r]}class eb extends Te{constructor(e){super(),De(this,e,Xg,Qg,$e,{})}}new eb({target:document.getElementById("app")})});export default tb();
