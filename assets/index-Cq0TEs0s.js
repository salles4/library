var Ua=Object.defineProperty;var Fa=(t,e,s)=>e in t?Ua(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Ha=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Rr=(t,e,s)=>(Fa(t,typeof e!="symbol"?e+"":e,s),s);var Zp=Ha((eg,Xs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function N(){}const ln=t=>t;function Os(t,e){for(const s in e)t[s]=e[s];return t}function Wa(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function _o(t){return t()}function Zn(){return Object.create(null)}function Se(t){t.forEach(_o)}function js(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Us;function Xe(t,e){return t===e?!0:(Us||(Us=document.createElement("a")),Us.href=e,t===Us.href)}function qa(t){return Object.keys(t).length===0}function po(t,...e){if(t==null){for(const r of e)r(void 0);return N}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function cn(t,e,s){t.$$.on_destroy.push(po(e,s))}function fr(t,e,s,r){if(t){const n=go(t,e,s,r);return t[0](n)}}function go(t,e,s,r){return t[1]&&r?Os(s.ctx.slice(),t[1](r(e))):s.ctx}function hr(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function mr(t,e,s,r,n,i){if(n){const o=go(e,s,r,i);t.p(o,n)}}function _r(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}function Qn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const bo=typeof window<"u";let vo=bo?()=>window.performance.now():()=>Date.now(),un=bo?t=>requestAnimationFrame(t):N;const es=new Set;function wo(t){es.forEach(e=>{e.c(t)||(es.delete(e),e.f())}),es.size!==0&&un(wo)}function yo(t){let e;return es.size===0&&un(wo),{promise:new Promise(s=>{es.add(e={c:t,f:s})}),abort(){es.delete(e)}}}function f(t,e){t.appendChild(e)}function ko(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ba(t){const e=h("style");return e.textContent="/* empty */",Va(ko(t),e),e.sheet}function Va(t,e){return f(t.head||t,e),e.sheet}function E(t,e,s){t.insertBefore(e,s||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function h(t){return document.createElement(t)}function se(t){return document.createTextNode(t)}function v(){return se(" ")}function qe(){return se("")}function z(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function er(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function pr(t){return t===""?null:+t}function za(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function pt(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function Xn(t,e,s){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function Ga(t){const e=t.querySelector(":checked");return e&&e.__value}function $o(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function tr(t,e){return new t(e)}const sr=new Map;let rr=0;function Ja(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function Ka(t,e){const s={stylesheet:Ba(e),rules:{}};return sr.set(t,s),s}function qr(t,e,s,r,n,i,o,l=0){const a=16.666/r;let c=`{
`;for(let y=0;y<=1;y+=a){const w=e+(s-e)*i(y);c+=y*100+`%{${o(w,1-w)}}
`}const u=c+`100% {${o(s,1-s)}}
}`,m=`__svelte_${Ja(u)}_${l}`,_=ko(t),{stylesheet:g,rules:p}=sr.get(_)||Ka(_,t);p[m]||(p[m]=!0,g.insertRule(`@keyframes ${m} ${u}`,g.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${m} ${r}ms linear ${n}ms 1 both`,rr+=1,m}function Br(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),rr-=n,rr||Za())}function Za(){un(()=>{rr||(sr.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&P(e)}),sr.clear())})}let Ts;function gt(t){Ts=t}function As(){if(!Ts)throw new Error("Function called outside component initialization");return Ts}function Ds(t){As().$$.on_mount.push(t)}function Qa(t){As().$$.after_update.push(t)}function Xa(t){As().$$.on_destroy.push(t)}function el(){const t=As();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=$o(e,s,{cancelable:r});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function nr(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const Kt=[],as=[];let ts=[];const ei=[],So=Promise.resolve();let Vr=!1;function Oo(){Vr||(Vr=!0,So.then(fn))}function dn(){return Oo(),So}function Ie(t){ts.push(t)}const jr=new Set;let qt=0;function fn(){if(qt!==0)return;const t=Ts;do{try{for(;qt<Kt.length;){const e=Kt[qt];qt++,gt(e),tl(e.$$)}}catch(e){throw Kt.length=0,qt=0,e}for(gt(null),Kt.length=0,qt=0;as.length;)as.pop()();for(let e=0;e<ts.length;e+=1){const s=ts[e];jr.has(s)||(jr.add(s),s())}ts.length=0}while(Kt.length);for(;ei.length;)ei.pop()();Vr=!1,jr.clear(),gt(t)}function tl(t){if(t.fragment!==null){t.update(),Se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}function sl(t){const e=[],s=[];ts.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),ts=e}let ps;function To(){return ps||(ps=Promise.resolve(),ps.then(()=>{ps=null})),ps}function ys(t,e,s){t.dispatchEvent($o(`${e?"intro":"outro"}${s}`))}const Vs=new Set;let bt;function De(){bt={r:0,c:[],p:bt}}function Me(){bt.r||Se(bt.c),bt=bt.p}function O(t,e){t&&t.i&&(Vs.delete(t),t.i(e))}function M(t,e,s,r){if(t&&t.o){if(Vs.has(t))return;Vs.add(t),bt.c.push(()=>{Vs.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const Do={duration:0};function Ve(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,o,l,a=0;function c(){o&&Br(t,o)}function u(){const{delay:_=0,duration:g=300,easing:p=ln,tick:b=N,css:y}=n||Do;y&&(o=qr(t,0,1,g,_,p,y,a++)),b(0,1);const w=vo()+_,S=w+g;l&&l.abort(),i=!0,Ie(()=>ys(t,!0,"start")),l=yo(k=>{if(i){if(k>=S)return b(1,0),ys(t,!0,"end"),c(),i=!1;if(k>=w){const D=p((k-w)/g);b(D,1-D)}}return i})}let m=!1;return{start(){m||(m=!0,Br(t),js(n)?(n=n(r),To().then(u)):u())},invalidate(){m=!1},end(){i&&(c(),i=!1)}}}function ls(t,e,s,r){let i=e(t,s,{direction:"both"}),o=r?0:1,l=null,a=null,c=null,u;function m(){c&&Br(t,c)}function _(p,b){const y=p.b-o;return b*=Math.abs(y),{a:o,b:p.b,d:y,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:y=300,easing:w=ln,tick:S=N,css:k}=i||Do,D={start:vo()+b,b:p};p||(D.group=bt,bt.r+=1),"inert"in t&&(p?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),l||a?a=D:(k&&(m(),c=qr(t,o,p,y,b,w,k)),p&&S(0,1),l=_(D,y),Ie(()=>ys(t,p,"start")),yo($=>{if(a&&$>a.start&&(l=_(a,y),a=null,ys(t,l.b,"start"),k&&(m(),c=qr(t,o,l.b,l.duration,0,w,i.css))),l){if($>=l.end)S(o=l.b,1-o),ys(t,l.b,"end"),a||(l.b?m():--l.group.r||Se(l.group.c)),l=null;else if($>=l.start){const T=$-l.start;o=l.a+l.d*w(T/l.duration),S(o,1-o)}}return!!(l||a)}))}return{run(p){js(i)?To().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){m(),l=a=null}}}function zs(t,e){const s=e.token={};function r(n,i,o,l){if(e.token!==s)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((m,_)=>{_!==i&&m&&(De(),M(m,1,1,()=>{e.blocks[_]===m&&(e.blocks[_]=null)}),Me())}):e.block.d(1),c.c(),O(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&fn()}if(Wa(t)){const n=As();if(t.then(i=>{gt(n),r(e.then,1,e.value,i),gt(null)},i=>{if(gt(n),r(e.catch,2,e.error,i),gt(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Gs(t,e,s){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,s)}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ir(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const a in o)a in l||(r[a]=1);for(const a in l)n[a]||(s[a]=l[a],n[a]=1);t[i]=l}else for(const a in o)n[a]=1}for(const o in r)o in s||(s[o]=void 0);return s}function or(t){return typeof t=="object"&&t!==null?t:{}}function x(t){t&&t.c()}function L(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),Ie(()=>{const i=t.$$.on_mount.map(_o).filter(js);t.$$.on_destroy?t.$$.on_destroy.push(...i):Se(i),t.$$.on_mount=[]}),n.forEach(Ie)}function Y(t,e){const s=t.$$;s.fragment!==null&&(sl(s.after_update),Se(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function rl(t,e){t.$$.dirty[0]===-1&&(Kt.push(t),Oo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,s,r,n,i,o=null,l=[-1]){const a=Ts;gt(t);const c=t.$$={fragment:null,ctx:[],props:i,update:N,not_equal:n,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(m,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[m],c.ctx[m]=p)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](p),u&&rl(t,m)),_}):[],c.update(),u=!0,Se(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const m=za(e.target);c.fragment&&c.fragment.l(m),m.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&O(t.$$.fragment),L(t,e.target,e.anchor),fn()}gt(a)}class $e{constructor(){Rr(this,"$$");Rr(this,"$$set")}$destroy(){Y(this,1),this.$destroy=N}$on(e,s){if(!js(s))return N;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!qa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nl);const Bt=[];function Mo(t,e){return{subscribe:gr(t,e).subscribe}}function gr(t,e=N){let s;const r=new Set;function n(l){if(ye(t,l)&&(t=l,s)){const a=!Bt.length;for(const c of r)c[1](),Bt.push(c,t);if(a){for(let c=0;c<Bt.length;c+=2)Bt[c][0](Bt[c+1]);Bt.length=0}}}function i(l){n(l(t))}function o(l,a=N){const c=[l,a];return r.add(c),r.size===1&&(s=e(n,i)||N),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:o}}function Co(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Mo(s,(o,l)=>{let a=!1;const c=[];let u=0,m=N;const _=()=>{if(u)return;m();const p=e(r?c[0]:c,o,l);i?o(p):m=js(p)?p:N},g=n.map((p,b)=>po(p,y=>{c[b]=y,u&=~(1<<b),a&&_()},()=>{u|=1<<b}));return a=!0,_(),function(){Se(g),m(),a=!1}})}const jt=gr(localStorage.getItem("accType")),Js=gr(localStorage.getItem("user_id"));window.addEventListener("storage",function(t){let e;Js.subscribe(s=>e=s),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(jt.set(""),Js.set("")):(Js.set(localStorage.getItem("user_id")),jt.set(localStorage.getItem("accType"))))});function il(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,o=[],l="",a=t.split("/");for(a[0]||a.shift();n=a.shift();)s=n[0],s==="*"?(o.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function ol(t){let e,s,r;const n=[t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Os(c,n[u]);return a!==void 0&&a&4&&(c=Os(c,ir(n,[or(l[2])]))),{props:c}}return i&&(e=tr(i,o(t)),e.$on("routeEvent",t[7])),{c(){e&&x(e.$$.fragment),s=qe()},m(l,a){e&&L(e,l,a),E(l,s,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){De();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Me()}i?(e=tr(i,o(l,a)),e.$on("routeEvent",l[7]),x(e.$$.fragment),O(e.$$.fragment,1),L(e,s.parentNode,s)):e=null}else if(i){const c=a&4?ir(n,[or(l[2])]):{};e.$set(c)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&M(e.$$.fragment,l),r=!1},d(l){l&&P(s),e&&Y(e,l)}}}function al(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Os(c,n[u]);return a!==void 0&&a&6&&(c=Os(c,ir(n,[a&2&&{params:l[1]},a&4&&or(l[2])]))),{props:c}}return i&&(e=tr(i,o(t)),e.$on("routeEvent",t[6])),{c(){e&&x(e.$$.fragment),s=qe()},m(l,a){e&&L(e,l,a),E(l,s,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){De();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Me()}i?(e=tr(i,o(l,a)),e.$on("routeEvent",l[6]),x(e.$$.fragment),O(e.$$.fragment,1),L(e,s.parentNode,s)):e=null}else if(i){const c=a&6?ir(n,[a&2&&{params:l[1]},a&4&&or(l[2])]):{};e.$set(c)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&M(e.$$.fragment,l),r=!1},d(l){l&&P(s),e&&Y(e,l)}}}function ll(t){let e,s,r,n;const i=[al,ol],o=[];function l(a,c){return a[1]?0:1}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function ti(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const hn=Mo(null,function(e){e(ti());const s=()=>{e(ti())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),cl=Co(hn,t=>t.location),Po=Co(hn,t=>t.querystring),si=gr(void 0);async function ul(){await dn(),window.history.back()}async function dl(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await dn();const e=(t.charAt(0)=="#"?"":"#")+t;try{const s={...history.state};delete s.__svelte_spa_router_scrollX,delete s.__svelte_spa_router_scrollY,window.history.replaceState(s,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function fl(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function hl(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor($,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!$||typeof $=="string"&&($.length<1||$.charAt(0)!="/"&&$.charAt(0)!="*")||typeof $=="object"&&!($ instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:R,keys:I}=il($);this.path=$,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=R,this._keys=I}match($){if(n){if(typeof n=="string")if($.startsWith(n))$=$.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const q=$.match(n);if(q&&q[0])$=$.substr(q[0].length)||"/";else return null}}const T=this._pattern.exec($);if(T===null)return null;if(this._keys===!1)return T;const R={};let I=0;for(;I<this._keys.length;){try{R[this._keys[I]]=decodeURIComponent(T[I+1]||"")||null}catch{R[this._keys[I]]=null}I++}return R}async checkConditions($){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T]($))return!1;return!0}}const l=[];r instanceof Map?r.forEach((D,$)=>{l.push(new o($,D))}):Object.keys(r).forEach(D=>{l.push(new o(D,r[D]))});let a=null,c=null,u={};const m=el();async function _(D,$){await dn(),m(D,$)}let g=null,p=null;i&&(p=D=>{D.state&&(D.state.__svelte_spa_router_scrollY||D.state.__svelte_spa_router_scrollX)?g=D.state:g=null},window.addEventListener("popstate",p),Qa(()=>{fl(g)}));let b=null,y=null;const w=hn.subscribe(async D=>{b=D;let $=0;for(;$<l.length;){const T=l[$].match(D.location);if(!T){$++;continue}const R={route:l[$].path,location:D.location,querystring:D.querystring,userData:l[$].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await l[$].checkConditions(R)){s(0,a=null),y=null,_("conditionsFailed",R);return}_("routeLoading",Object.assign({},R));const I=l[$].component;if(y!=I){I.loading?(s(0,a=I.loading),y=I,s(1,c=I.loadingParams),s(2,u={}),_("routeLoaded",Object.assign({},R,{component:a,name:a.name,params:c}))):(s(0,a=null),y=null);const q=await I();if(D!=b)return;s(0,a=q&&q.default||q),y=I}T&&typeof T=="object"&&Object.keys(T).length?s(1,c=T):s(1,c=null),s(2,u=l[$].props),_("routeLoaded",Object.assign({},R,{component:a,name:a.name,params:c})).then(()=>{si.set(c)});return}s(0,a=null),y=null,si.set(void 0)});Xa(()=>{w(),p&&window.removeEventListener("popstate",p)});function S(D){nr.call(this,t,D)}function k(D){nr.call(this,t,D)}return t.$$set=D=>{"routes"in D&&s(3,r=D.routes),"prefix"in D&&s(4,n=D.prefix),"restoreScrollState"in D&&s(5,i=D.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,r,n,i,S,k]}class mn extends $e{constructor(e){super(),ke(this,e,hl,ll,ye,{routes:3,prefix:4,restoreScrollState:5})}}const ml="modulepreload",_l=function(t){return"/library/"+t},ri={},cs=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=_l(l),l in ri)return;ri[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ml,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((m,_)=>{u.addEventListener("load",m),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},pl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class _n extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class gl extends _n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bl extends _n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vl extends _n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zr||(zr={}));var wl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class yl{constructor(e,{headers:s={},customFetch:r,region:n=zr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=pl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return wl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let l={},{region:a}=s;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new gl(p)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new bl(u);if(!u.ok)throw new vl(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var kl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},us=kl();const $l=us.fetch,pn=us.fetch.bind(us),Eo=us.Headers,Sl=us.Request,Ol=us.Response,Is=Object.freeze(Object.defineProperty({__proto__:null,Headers:Eo,Request:Sl,Response:Ol,default:pn,fetch:$l},Symbol.toStringTag,{value:"Module"}));class Tl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Dl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,m=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&b===""?(_=204,g="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new Tl(c)}return{error:c,data:u,count:m,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class Ml extends Dl{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Zt extends Ml{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class Cl{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Zt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Zt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Zt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Zt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Zt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Pl="1.15.2",El={"X-Client-Info":`postgrest-js/${Pl}`};class gn{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},El),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new Cl(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||n?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",a=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Zt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Rl="2.9.5",jl={"X-Client-Info":`realtime-js/${Rl}`},Al="1.0.0",Ro=1e4,Il=1e3;var ss;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ss||(ss={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var rt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rt||(rt={}));var Gr;(function(t){t.websocket="websocket"})(Gr||(Gr={}));var xt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xt||(xt={}));class jo{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ll{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+n));o=o+n;const a=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Ar{constructor(e,s,r={},n=Ro){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ni;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ni||(ni={}));class ks{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=ks.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ks.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const m=i[c];if(m){const _=u.map(y=>y.presence_ref),g=m.map(y=>y.presence_ref),p=u.filter(y=>g.indexOf(y.presence_ref)<0),b=m.filter(y=>_.indexOf(y.presence_ref)<0);p.length>0&&(l[c]=p),b.length>0&&(a[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const m=e[l].map(g=>g.presence_ref),_=u.filter(g=>m.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(m=>m.presence_ref);c=c.filter(m=>u.indexOf(m.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const ii=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Yl(o,t,e,n),i),{})},Yl=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?Ao(i,o):Jr(o)},Ao=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Fl(e,s)}switch(t){case Ce.bool:return Nl(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return xl(e);case Ce.json:case Ce.jsonb:return Ul(e);case Ce.timestamp:return Hl(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Jr(e);default:return Jr(e)}},Jr=t=>t,Nl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ul=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Fl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ao(e,l))}return t},Hl=t=>typeof t=="string"?t.replace(" ","T"):t;var oi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oi||(oi={}));var ai;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ai||(ai={}));var li;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class bn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ar(this,rt.join,this.params,this.timeout),this.rejoinTimer=new jo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ks(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const m=this.bindings.postgres_changes,_=(u=m==null?void 0:m.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const b=m[p],{filter:{event:y,schema:w,table:S,filter:k}}=b,D=c&&c[p];if(D&&D.event===y&&D.schema===w&&D.table===S&&D.filter===k)g.push(Object.assign(Object.assign({},b),{id:D.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Ar(this,rt.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ar(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=rt;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(b=g.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(_,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,y,w,S,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const D=g.id,$=(p=g.filter)===null||p===void 0?void 0:p.event;return D&&((b=s.ids)===null||b===void 0?void 0:b.includes(D))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((y=s.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const D=(S=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return D==="*"||D===((k=s==null?void 0:s.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:b,table:y,commit_timestamp:w,type:S,errors:k}=p;_=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:w,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&bn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rt.close,{},e)}_onError(e){this._on(rt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=ii(e.columns,e.old_record)),s}}const Wl=()=>{},ql=typeof WebSocket<"u";class Bl{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=jl,this.params={},this.timeout=Ro,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Wl,this.conn=null,this.sendBuffer=[],this.serializer=new Ll,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Gr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ql){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Vl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),cs(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ss.connecting:return xt.Connecting;case ss.open:return xt.Open;case ss.closing:return xt.Closing;default:return xt.Closed}}isConnected(){return this.connectionState()===xt.Open}channel(e,s={config:{}}){const r=new bn(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(rt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Al}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(rt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Il,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Vl{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ss.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class zl extends vn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ci extends vn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Gl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Io=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Jl=()=>Gl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cs(()=>Promise.resolve().then(()=>Is),void 0)).Response:Response});var fs=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Ir=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Kl=(t,e)=>fs(void 0,void 0,void 0,function*(){const s=yield Jl();t instanceof s?t.json().then(r=>{e(new zl(Ir(r),t.status||500))}).catch(r=>{e(new ci(Ir(r),r))}):e(new ci(Ir(t),t))}),Zl=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function br(t,e,s,r,n,i){return fs(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Zl(e,r,n,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Kl(a,l))})})}function Kr(t,e,s,r){return fs(this,void 0,void 0,function*(){return br(t,"GET",e,s,r)})}function Mt(t,e,s,r,n){return fs(this,void 0,void 0,function*(){return br(t,"POST",e,r,n,s)})}function Ql(t,e,s,r,n){return fs(this,void 0,void 0,function*(){return br(t,"PUT",e,r,n,s)})}function Lo(t,e,s,r,n){return fs(this,void 0,void 0,function*(){return br(t,"DELETE",e,r,n,s)})}var Ze=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Xl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ui={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ec{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Io(n)}uploadOrUpdate(e,s,r,n){return Ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ui),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(s),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield u.json();return u.ok?{data:{path:a,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let a;const c=Object.assign({upsert:ui.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),_=yield m.json();return m.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(a){if(Ue(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield Mt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new vn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}update(e,s,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}copy(e,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Mt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Mt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Ze(this,void 0,void 0,function*(){try{const n=yield Mt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}download(e,s){return Ze(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Kr(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}list(e,s,r){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Xl),s),{prefix:e||""});return{data:yield Mt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const tc="2.5.5",sc={"X-Client-Info":`storage-js/${tc}`};var Vt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class rc{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},sc),s),this.fetch=Io(r)}listBuckets(){return Vt(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Vt(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}}class nc extends rc{constructor(e,s={},r){super(e,s,r)}from(e){return new ec(this.url,this.headers,e,this.fetch)}}const ic="2.43.2";let ws="";typeof Deno<"u"?ws="deno":typeof document<"u"?ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ws="react-native":ws="node";const oc={"X-Client-Info":`supabase-js-${ws}/${ic}`},ac={headers:oc},lc={schema:"public"},cc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uc={};var dc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const fc=t=>{let e;return t?e=t:typeof fetch>"u"?e=pn:e=fetch,(...s)=>e(...s)},hc=()=>typeof Headers>"u"?Eo:Headers,mc=(t,e,s)=>{const r=fc(s),n=hc();return(i,o)=>dc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function _c(t){return t.replace(/\/$/,"")}function pc(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const Yo="2.64.2",gc="http://localhost:9999",bc="supabase.auth.token",vc={"X-Client-Info":`gotrue-js/${Yo}`},di=10,Zr="X-Supabase-Api-Version",No={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function wc(t){return Math.round(Date.now()/1e3)+t}function yc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const st=()=>typeof document<"u",It={tested:!1,writable:!1},$s=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(It.tested)return It.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),It.tested=!0,It.writable=!0}catch{It.tested=!0,It.writable=!1}return It.writable};function Lr(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const xo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},kc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Uo=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Fs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Yr=async(t,e)=>{await t.removeItem(e)};function $c(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,o,l,a,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,s=s+String.fromCharCode(r),a!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class vr{constructor(){this.promise=new vr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}vr.promiseConstructor=Promise;function fi(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse($c(r))}async function Sc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Oc(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Tc(t){return("0"+t.toString(16)).substr(-2)}function Dc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Tc).join("")}async function Mc(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Cc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Mc(t);return Cc(s)}async function zt(t,e,s=!1){const r=Dc();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Uo(t,`${e}-code-verifier`,n);const i=await Pc(r);return[i,r===i?"plain":"s256"]}const Ec=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rc(t){const e=t.headers.get(Zr);if(!e||!e.match(Ec))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class wn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jc extends wn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Ac(t){return ce(t)&&t.name==="AuthApiError"}class Fo extends wn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ht extends wn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Lt extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Nr extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hs extends Ht{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ws extends Ht{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hi extends Ht{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qr extends Ht{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function xr(t){return ce(t)&&t.name==="AuthRetryableFetchError"}class mi extends Ht{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var Ic=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Nt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lc=[502,503,504];async function _i(t){var e;if(!kc(t))throw new Qr(Nt(t),0);if(Lc.includes(t.status))throw new Qr(Nt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Fo(Nt(i),i)}let r;const n=Rc(t);if(n&&n.getTime()>=No["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new mi(Nt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mi(Nt(s),t.status,s.weak_password.reasons);throw new jc(Nt(s),t.status||500,r)}const Yc=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function he(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Zr]||(i[Zr]=No["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Nc(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function Nc(t,e,s,r,n,i){const o=Yc(e,r,n,i);let l;try{l=await t(s,Object.assign({},o))}catch(a){throw console.error(a),new Qr(Nt(a),0)}if(l.ok||await _i(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await _i(a)}}function Dt(t){var e;let s=null;Hc(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=wc(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function pi(t){const e=Dt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ct(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function xc(t){return{data:t,error:null}}function Uc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Ic(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Fc(t){return t}function Hc(t){return t.access_token&&t.refresh_token&&t.expires_in}var Wc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class qc{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=xo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ct})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Wc(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Uc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ct})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Fc});if(u.error)throw u.error;const m=await u.json(),_=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=b}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(ce(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ct})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ct})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ct})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}}const Bc={getItem:t=>$s()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{$s()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{$s()&&globalThis.localStorage.removeItem(t)}};function gi(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Vc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gt={debug:!!(globalThis&&$s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ho extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zc extends Ho{}async function Gc(t,e,s){Gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Gt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Gt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Vc();const Jc={url:gc,storageKey:bc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},gs=30*1e3,bi=3;async function vi(t,e,s){return await s()}class Ms{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ms.nextInstanceID,Ms.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Jc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new qc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=xo(n.fetch),this.lock=n.lock||vi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:st()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Gc:this.lock=vi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:$s()?this.storage=Bc:(this.memoryStorage={},this.storage=gi(this.memoryStorage)):(this.memoryStorage={},this.storage=gi(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=st()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ce(e)?{error:e}:{error:new Fo("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Dt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:m,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await zt(this.storage,this.storageKey)),i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:m,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:Dt})}else if("phone"in e){const{phone:u,password:m,options:_}=e;i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Dt})}else throw new Hs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else throw new Hs("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Nr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Fs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Dt});return await Yr(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Nr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,l=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Dt}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Nr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await zt(this.storage,this.storageKey));const{error:m}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Hs("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Dt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zt(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:xc})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Lt;const{error:n}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:l}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Hs("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ct}):await this._useSession(async s=>{var r,n,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ct})})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Lt;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await zt(this.storage,this.storageKey));const{data:c,error:u}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Ct});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return fi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const o=fi(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Lt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!st())throw new Ws("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ws("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new hi("Not a valid PKCE flow url.");const s=Lr(window.location.href);if(e){if(!s.code)throw new hi("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(s.code);if(k)throw k;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:S.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new Ws(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=s;if(!i||!l||!o||!c)throw new Ws("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let _=u+m;a&&(_=parseInt(a));const g=_-u;g*1e3<=gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const p=_-m;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:b,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:_,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:s.type},error:null}}catch(s){if(ce(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Lr(window.location.href);return!!(st()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Lr(window.location.href),s=await Fs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Ac(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=yc(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await zt(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:m,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return st()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ce(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Oc(async n=>(n>0&&await Sc(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&xr(i)&&Date.now()+o-r<gs})}catch(r){if(this._debug(s,"error",r),ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),st()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Fs(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+di;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${di}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),xr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new vr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Lt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),ce(i)){const o={session:null,error:i};return xr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Uo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Yr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${gs}ms, refresh threshold is ${bi} ticks`),n<=bi&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ho)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await zt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:l,error:a}=await he(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Ms.nextInstanceID=0;const Kc=Ms;class Zc extends Kc{constructor(e){super(e)}}var Qc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class Xc{constructor(e,s,r){var n,i,o,l,a,c,u,m;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const _=_c(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:lc,realtime:uc,auth:Object.assign(Object.assign({},cc),{storageKey:g}),global:ac},b=pc(r??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=mc(s,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new gn(`${_}/rest/v1`,{headers:this.headers,schema:(m=b.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new yl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new nc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Qc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zc({url:this.authUrl,headers:Object.assign(Object.assign({},m),a),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Bl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eu=(t,e,s)=>new Xc(t,e,s),ne=eu("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function wi(t){let e,s,r;return{c(){e=h("a"),e.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',s=v(),r=h("a"),r.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',d(e,"class","nav-link svelte-kdejnj"),d(e,"href","./#/borrow"),d(r,"class","nav-link svelte-kdejnj"),d(r,"href","./#/return")},m(n,i){E(n,e,i),E(n,s,i),E(n,r,i)},d(n){n&&(P(e),P(s),P(r))}}}function tu(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C,U,te,G,K,Q,me,ue=t[0]=="staff"&&wi();return{c(){e=h("nav"),s=h("div"),r=h("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=v(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=v(),l=h("div"),a=h("div"),c=h("a"),c.innerHTML='<i class="bi bi-house-door"></i> Home',u=v(),m=h("a"),m.innerHTML='<i class="bi bi-journal"></i> Books',_=v(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=v(),b=h("a"),b.innerHTML='<i class="bi bi-building"></i> Publishers',y=v(),ue&&ue.c(),w=v(),S=h("li"),k=h("a"),D=h("i"),$=v(),T=se(t[1]),R=v(),I=h("ul"),q=h("li"),q.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Profile</a>',Z=v(),B=h("li"),B.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Settings</a>',V=v(),j=h("li"),j.innerHTML='<hr class="dropdown-divider"/>',A=v(),H=h("li"),C=h("a"),C.textContent="Log Out",U=v(),te=h("button"),G=h("span"),d(r,"class","navbar-brand m-0 px-2 svelte-kdejnj"),d(r,"href","./#/"),d(i,"class","navbar-toggler"),d(i,"type","button"),d(i,"data-bs-toggle","collapse"),d(i,"data-bs-target","#navbarContent"),d(c,"class","nav-link svelte-kdejnj"),d(c,"href","./#/"),d(m,"class","nav-link svelte-kdejnj"),d(m,"href","./#/search"),d(g,"class","nav-link svelte-kdejnj"),d(g,"href","./#/search/author"),d(b,"class","nav-link svelte-kdejnj"),d(b,"href","./#/search/publisher"),d(D,"class","bi bi-person-fill"),d(k,"class","nav-link dropdown-toggle svelte-kdejnj"),d(k,"href","#"),d(k,"role","button"),d(k,"data-bs-toggle","dropdown"),d(k,"aria-expanded","false"),d(C,"class","dropdown-item text-danger svelte-kdejnj"),d(C,"href","./#/"),d(I,"class","dropdown-menu"),d(S,"class","nav-item dropdown"),d(G,"class",K="bi bi-"+t[2]+" svelte-kdejnj"),d(te,"title","Switch theme"),d(te,"class","px-1 border-0 bg-transparent nav-link svelte-kdejnj"),d(a,"class","navbar-nav ms-auto text-center svelte-kdejnj"),d(l,"class","collapse navbar-collapse"),d(l,"id","navbarContent"),d(s,"class","container px-4 fw-semibold"),d(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(ae,Oe){E(ae,e,Oe),f(e,s),f(s,r),f(s,n),f(s,i),f(s,o),f(s,l),f(l,a),f(a,c),f(a,u),f(a,m),f(a,_),f(a,g),f(a,p),f(a,b),f(a,y),ue&&ue.m(a,null),f(a,w),f(a,S),f(S,k),f(k,D),f(k,$),f(k,T),f(S,R),f(S,I),f(I,q),f(I,Z),f(I,B),f(I,V),f(I,j),f(I,A),f(I,H),f(H,C),f(a,U),f(a,te),f(te,G),Q||(me=[z(C,"click",t[4]),z(te,"click",t[3])],Q=!0)},p(ae,[Oe]){ae[0]=="staff"?ue||(ue=wi(),ue.c(),ue.m(a,w)):ue&&(ue.d(1),ue=null),Oe&2&&le(T,ae[1]),Oe&4&&K!==(K="bi bi-"+ae[2]+" svelte-kdejnj")&&d(G,"class",K)},i:N,o:N,d(ae){ae&&P(e),ue&&ue.d(),Q=!1,Se(me)}}}function su(t,e,s){let r,n,i=localStorage.getItem("user_id");jt.subscribe(m=>s(0,n=m)),l();let o="";async function l(){const{data:m,error:_}=await ne.from("account_details").select("lname").eq("user_id",i).single();_&&console.error(_),console.log(i,m),s(1,o=m.lname)}let a=localStorage.getItem("theme")||"light";function c(){s(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){jt.set(""),Js.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return t.$$.update=()=>{t.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),t.$$.dirty&32&&s(2,r=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,r,c,u,a]}class Wo extends $e{constructor(e){super(),ke(this,e,su,tu,ye,{})}}function ru(t){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(s,r){E(s,e,r)},p:N,i:N,o:N,d(s){s&&P(e)}}}class nu extends $e{constructor(e){super(),ke(this,e,null,ru,ye,{})}}function iu(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p;return{c(){e=h("div"),s=h("img"),n=v(),i=h("div"),o=h("h5"),l=h("a"),a=se(t[1]),u=v(),m=h("small"),_=h("i"),g=v(),p=se(t[2]),Xe(s.src,r=t[3])||d(s,"src",r),d(s,"alt","book cover"),d(s,"class","svelte-1a99e4f"),d(l,"class","stretched-link svelte-1a99e4f"),d(l,"href",c="./#/book/"+t[0]),d(o,"class","card-title"),d(_,"class","bi bi-person"),d(m,"class","card-text"),d(i,"class","card-body"),d(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(b,y){E(b,e,y),f(e,s),f(e,n),f(e,i),f(i,o),f(o,l),f(l,a),f(i,u),f(i,m),f(m,_),f(m,g),f(m,p)},p(b,[y]){y&2&&le(a,b[1]),y&1&&c!==(c="./#/book/"+b[0])&&d(l,"href",c),y&4&&le(p,b[2])},i:N,o:N,d(b){b&&P(e)}}}function ou(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e,o=r>4?"./book-cover.png":`./${r}.jpg`;return t.$$set=l=>{"id"in l&&s(0,r=l.id),"title"in l&&s(1,n=l.title),"author"in l&&s(2,i=l.author)},[r,n,i,o]}class wr extends $e{constructor(e){super(),ke(this,e,ou,iu,ye,{id:0,title:1,author:2})}}function yi(t){let e,s,r,n,i,o,l;return{c(){e=h("div"),s=h("a"),r=h("button"),n=se(t[3]),i=v(),o=h("i"),d(o,"class","bi bi-arrow-right"),d(r,"class","btn btn-outline-primary btn-sm"),d(s,"href",l="./#/"+t[2]),d(e,"class","align-middle align-self-center")},m(a,c){E(a,e,c),f(e,s),f(s,r),f(r,n),f(r,i),f(r,o)},p(a,c){c&8&&le(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&d(s,"href",l)},d(a){a&&P(e)}}}function au(t){let e,s,r,n,i,o,l,a,c,u,m=t[2]!==""&&yi(t);const _=t[5].default,g=fr(_,t,t[4],null);return{c(){e=h("section"),s=h("div"),r=h("h4"),n=h("i"),o=v(),l=se(t[0]),a=v(),m&&m.c(),c=v(),g&&g.c(),d(n,"class",i="bi bi-"+t[1]),d(r,"class","my-3"),d(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){E(p,e,b),f(e,s),f(s,r),f(r,n),f(r,o),f(r,l),f(s,a),m&&m.m(s,null),f(e,c),g&&g.m(e,null),u=!0},p(p,[b]){(!u||b&2&&i!==(i="bi bi-"+p[1]))&&d(n,"class",i),(!u||b&1)&&le(l,p[0]),p[2]!==""?m?m.p(p,b):(m=yi(p),m.c(),m.m(s,null)):m&&(m.d(1),m=null),g&&g.p&&(!u||b&16)&&mr(g,_,p,p[4],u?hr(_,p[4],b,null):_r(p[4]),null)},i(p){u||(O(g,p),u=!0)},o(p){M(g,p),u=!1},d(p){p&&P(e),m&&m.d(),g&&g.d(p)}}}function lu(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,o=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,a=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,o,l,a,n,r]}class yt extends $e{constructor(e){super(),ke(this,e,lu,au,ye,{title:0,icon:1,link:2,linkText:3})}}function cu(t){const e=t-1;return e*e*e+1}function ze(t,{delay:e=0,duration:s=400,easing:r=ln}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function ds(t,{delay:e=0,duration:s=400,easing:r=cu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[m,_]=Qn(n),[g,p]=Qn(i);return{delay:e,duration:s,easing:r,css:(b,y)=>`
			transform: ${c} translate(${(1-b)*m}${_}, ${(1-b)*g}${p});
			opacity: ${a-u*y}`}}function uu(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',d(e,"class","d-flex justify-content-center")},m(s,r){E(s,e,r)},p:N,i:N,o:N,d(s){s&&P(e)}}}class At extends $e{constructor(e){super(),ke(this,e,null,uu,ye,{})}}function du(t){let e,s,r,n,i,o,l,a,c;return{c(){e=h("div"),s=h("img"),n=v(),i=h("div"),o=h("h6"),l=h("a"),a=se(t[0]),d(s,"class","object-fit-contain rounded my-2"),d(s,"height","150"),Xe(s.src,r="./default-profile.jpg")||d(s,"src",r),d(s,"alt","author"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/author/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),f(e,s),f(e,n),f(e,i),f(i,o),f(o,l),f(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/author/"+u[1])&&d(l,"href",c)},i:N,o:N,d(u){u&&P(e)}}}function fu(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class qo extends $e{constructor(e){super(),ke(this,e,fu,du,ye,{name:0,id:1})}}function hu(t){let e,s,r,n,i,o,l,a,c;return{c(){e=h("div"),s=h("img"),n=v(),i=h("div"),o=h("h6"),l=h("a"),a=se(t[0]),d(s,"class","object-fit-contain rounded my-2"),d(s,"height","150"),Xe(s.src,r="./default-profile.jpg")||d(s,"src",r),d(s,"alt","publisher"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/publisher/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),f(e,s),f(e,n),f(e,i),f(i,o),f(o,l),f(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/publisher/"+u[1])&&d(l,"href",c)},i:N,o:N,d(u){u&&P(e)}}}function mu(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class Bo extends $e{constructor(e){super(),ke(this,e,mu,hu,ye,{name:0,id:1})}}function _u(t){let e,s,r,n,i,o,l,a,c,u;return{c(){e=h("div"),s=h("div"),r=h("h2"),r.textContent="Error",n=v(),i=h("p"),o=se(t[0]),l=se(": "),a=se(t[1]),c=v(),u=h("a"),u.textContent="Reload",d(u,"href","./#/"),d(u,"class","fw-bold"),d(s,"class","text-center"),d(e,"class","d-flex align-items-center justify-content-center my-3")},m(m,_){E(m,e,_),f(e,s),f(s,r),f(s,n),f(s,i),f(i,o),f(i,l),f(i,a),f(s,c),f(s,u)},p(m,[_]){_&1&&le(o,m[0]),_&2&&le(a,m[1])},i:N,o:N,d(m){m&&P(e)}}}function pu(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let yn=class extends $e{constructor(e){super(),ke(this,e,pu,_u,ye,{code:0,message:1})}};function ki(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function $i(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function Si(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function gu(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function bu(t){let e,s;return e=new yn({props:{message:t[3]}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function vu(t){let e,s,r=Pe(Object.entries(t[0])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Oi(Si(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&1){r=Pe(Object.entries(o[0]));let a;for(a=0;a<r.length;a+=1){const c=Si(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Oi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Oi(t){let e,s;return e=new wr({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function wu(t){let e,s,r,n;const i=[vu,bu,gu],o=[];function l(a,c){return a[0]?0:a[3]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function yu(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function ku(t){let e,s;return e=new yn({props:{message:t[4]}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function $u(t){let e,s,r=Pe(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ti($i(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Pe(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=$i(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ti(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Ti(t){let e,s;return e=new qo({props:{id:t[13].author_id,name:t[13].name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Su(t){let e,s,r,n;const i=[$u,ku,yu],o=[];function l(a,c){return a[1]?0:a[4]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Ou(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Tu(t){let e,s;return e=new yn({props:{message:t[5]}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Du(t){let e,s,r=Pe(Object.entries(t[2])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Di(ki(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&4){r=Pe(Object.entries(o[2]));let a;for(a=0;a<r.length;a+=1){const c=ki(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Di(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Di(t){let e,s;return e=new Bo({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Mu(t){let e,s,r,n;const i=[Du,Tu,Ou],o=[];function l(a,c){return a[2]?0:a[5]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Cu(t){let e,s,r,n,i,o,l,a,c,u;return s=new nu({}),n=new yt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[wu]},$$scope:{ctx:t}}}),o=new yt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Su]},$$scope:{ctx:t}}}),a=new yt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Mu]},$$scope:{ctx:t}}}),{c(){e=h("main"),x(s.$$.fragment),r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),l=v(),x(a.$$.fragment),d(e,"class","container mb-5")},m(m,_){E(m,e,_),L(s,e,null),f(e,r),L(n,e,null),f(e,i),L(o,e,null),f(e,l),L(a,e,null),u=!0},p(m,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:m}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:m}),o.$set(p);const b={};_&524324&&(b.$$scope={dirty:_,ctx:m}),a.$set(b)},i(m){u||(O(s.$$.fragment,m),O(n.$$.fragment,m),O(o.$$.fragment,m),O(a.$$.fragment,m),m&&(c||Ie(()=>{c=Ve(e,ze,{duration:500}),c.start()})),u=!0)},o(m){M(s.$$.fragment,m),M(n.$$.fragment,m),M(o.$$.fragment,m),M(a.$$.fragment,m),u=!1},d(m){m&&P(e),Y(s),Y(n),Y(o),Y(a)}}}function Pu(t,e,s){let r,n,i,o,l,a;async function c(){const{data:_,error:g}=await ne.rpc("get_books");s(0,r=_),s(3,o=g?g.message:"")}async function u(){const{data:_,error:g}=await ne.rpc("get_authors");s(1,n=_),s(4,l=g?g.message:"")}async function m(){const{data:_,error:g}=await ne.rpc("get_publishers");s(2,i=_),s(5,a=g||"")}return c(),u(),m(),[r,n,i,o,l,a]}class Eu extends $e{constructor(e){super(),ke(this,e,Pu,Cu,ye,{})}}function Ru(t){let e,s,r,n,i,o,l,a;return{c(){e=h("div"),s=h("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=v(),n=h("div"),i=h("h4"),o=se(t[0]),d(s,"class","btn"),pt(s,"font-size","1.5em"),d(i,"class","my-auto"),d(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){E(c,e,u),f(e,s),f(e,r),f(e,n),f(n,i),f(i,o),l||(a=z(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&le(o,c[0])},i:N,o:N,d(c){c&&P(e),l=!1,a()}}}function ju(t,e,s){let{text:r}=e;const n=()=>ul();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class dt extends $e{constructor(e){super(),ke(this,e,ju,Ru,ye,{text:0})}}function Au(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D;const $=t[5].default,T=fr($,t,t[4],null);return{c(){e=h("div"),s=h("div"),r=h("div"),n=h("div"),i=h("h1"),o=se(t[0]),l=v(),a=h("button"),c=v(),u=h("div"),T&&T.c(),m=v(),_=h("div"),g=h("button"),p=se(t[3]),b=v(),y=h("button"),w=se(t[2]),d(i,"class","modal-title fs-5"),d(i,"id","exampleModalLabel"),d(a,"type","button"),d(a,"class","btn-close"),d(a,"data-bs-dismiss","modal"),d(a,"aria-label","Close"),d(n,"class","modal-header"),d(u,"class","modal-body"),d(g,"type","button"),d(g,"class","btn btn-secondary"),d(g,"data-bs-dismiss","modal"),d(y,"type","button"),d(y,"class","btn btn-primary"),d(y,"data-bs-dismiss","modal"),d(_,"class","modal-footer"),d(r,"class","modal-content"),d(s,"class","modal-dialog"),d(e,"class","modal fade"),d(e,"id",t[1]),d(e,"tabindex","-1"),d(e,"aria-hidden","true")},m(R,I){E(R,e,I),f(e,s),f(s,r),f(r,n),f(n,i),f(i,o),f(n,l),f(n,a),f(r,c),f(r,u),T&&T.m(u,null),f(r,m),f(r,_),f(_,g),f(g,p),f(_,b),f(_,y),f(y,w),S=!0,k||(D=z(y,"click",t[6]),k=!0)},p(R,[I]){(!S||I&1)&&le(o,R[0]),T&&T.p&&(!S||I&16)&&mr(T,$,R,R[4],S?hr($,R[4],I,null):_r(R[4]),null),(!S||I&8)&&le(p,R[3]),(!S||I&4)&&le(w,R[2]),(!S||I&2)&&d(e,"id",R[1])},i(R){S||(O(T,R),S=!0)},o(R){M(T,R),S=!1},d(R){R&&P(e),T&&T.d(R),k=!1,D()}}}function Iu(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function c(u){nr.call(this,t,u)}return t.$$set=u=>{"title"in u&&s(0,i=u.title),"id"in u&&s(1,o=u.id),"pButton"in u&&s(2,l=u.pButton),"sButton"in u&&s(3,a=u.sButton),"$$scope"in u&&s(4,n=u.$$scope)},[i,o,l,a,n,r,c]}class Lu extends $e{constructor(e){super(),ke(this,e,Iu,Au,ye,{title:0,id:1,pButton:2,sButton:3})}}function Yu(t){let e,s,r;return{c(){e=h("div"),s=h("div"),s.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',d(s,"class","d-flex align-items-center justify-content-center flex-column gap-2"),pt(s,"height","70vh"),d(e,"class","position-absolute top-50 start-50 translate-middle z-2"),pt(e,"background-color","var(--bs-body-bg)"),pt(e,"width","100vw"),pt(e,"height","100vh")},m(n,i){E(n,e,i),f(e,s)},p:N,i(n){n&&(r||Ie(()=>{r=Ve(s,ze,{duration:500}),r.start()}))},o:N,d(n){n&&P(e)}}}class kn extends $e{constructor(e){super(),ke(this,e,null,Yu,ye,{})}}function Mi(t,e,s){const r=t.slice();return r[26]=e[s][0],r[27]=e[s][1],r}function Ci(t){let e,s;return e=new kn({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Nu(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function xu(t){let e,s,r,n,i,o,l,a=t[3].isbn+"",c,u,m,_,g,p=t[3].title+"",b,y,w,S=t[3].description+"",k,D,$,T,R,I,q=t[3].author.name+"",Z,B,V,j,A,H,C,U=t[3].publisher.name+"",te,G,K,Q,me,ue,ae=t[3].category.name+"",Oe,ge,de,ie,we,xe=t[3].shelf_number+"",pe,re=t[1]=="client"&&Pi(t);return{c(){e=h("div"),s=h("div"),r=h("img"),i=v(),o=h("small"),l=se("ISBN: "),c=se(a),u=v(),re&&re.c(),m=v(),_=h("div"),g=h("h1"),b=se(p),y=v(),w=h("p"),k=se(S),D=v(),$=h("p"),T=h("b"),T.textContent="Author:",R=v(),I=h("a"),Z=se(q),V=v(),j=h("p"),A=h("b"),A.textContent="Publisher:",H=v(),C=h("a"),te=se(U),K=v(),Q=h("p"),me=h("b"),me.textContent="Category:",ue=v(),Oe=se(ae),ge=v(),de=h("p"),ie=h("b"),ie.textContent="Shelf No.:",we=v(),pe=se(xe),d(r,"id","img-cover"),d(r,"class","border p-3"),Xe(r.src,n=t[13])||d(r,"src",n),d(r,"alt","book cover"),d(r,"height","300"),d(r,"width","300"),pt(r,"object-fit","contain"),d(o,"class","text-secondary"),d(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),d(g,"id","book-title"),d(g,"class","mb-2 pb-2"),d(w,"id","book-description"),d(I,"href",B="./#/author/"+t[3].author.author_id),d(C,"href",G="./#/publisher/"+t[3].publisher.publisher_id),d(_,"id","details-container"),d(_,"class","container mt-md-0 mt-3"),d(e,"class","d-md-flex d-block")},m(Ye,He){E(Ye,e,He),f(e,s),f(s,r),f(s,i),f(s,o),f(o,l),f(o,c),f(s,u),re&&re.m(s,null),f(e,m),f(e,_),f(_,g),f(g,b),f(_,y),f(_,w),f(w,k),f(_,D),f(_,$),f($,T),f($,R),f($,I),f(I,Z),f(_,V),f(_,j),f(j,A),f(j,H),f(j,C),f(C,te),f(_,K),f(_,Q),f(Q,me),f(Q,ue),f(Q,Oe),f(_,ge),f(_,de),f(de,ie),f(de,we),f(de,pe)},p(Ye,He){He&8&&a!==(a=Ye[3].isbn+"")&&le(c,a),Ye[1]=="client"?re?re.p(Ye,He):(re=Pi(Ye),re.c(),re.m(s,null)):re&&(re.d(1),re=null),He&8&&p!==(p=Ye[3].title+"")&&le(b,p),He&8&&S!==(S=Ye[3].description+"")&&le(k,S),He&8&&q!==(q=Ye[3].author.name+"")&&le(Z,q),He&8&&B!==(B="./#/author/"+Ye[3].author.author_id)&&d(I,"href",B),He&8&&U!==(U=Ye[3].publisher.name+"")&&le(te,U),He&8&&G!==(G="./#/publisher/"+Ye[3].publisher.publisher_id)&&d(C,"href",G),He&8&&ae!==(ae=Ye[3].category.name+"")&&le(Oe,ae),He&8&&xe!==(xe=Ye[3].shelf_number+"")&&le(pe,xe)},i:N,o:N,d(Ye){Ye&&P(e),re&&re.d()}}}function Pi(t){let e;function s(i,o){return i[6]?Wu:i[0]?Hu:i[7]==0?Fu:Uu}let r=s(t),n=r(t);return{c(){n.c(),e=qe()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){r===(r=s(i))&&n?n.p(i,o):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function Uu(t){let e,s,r;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,d(e,"class","btn btn-primary w-50")},m(n,i){E(n,e,i),s||(r=z(e,"click",t[11]),s=!0)},p:N,d(n){n&&P(e),s=!1,r()}}}function Fu(t){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,d(e,"class","btn btn-secondary w-50")},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function Hu(t){let e,s,r,n,i,o,l;return{c(){e=h("button"),s=h("i"),r=v(),n=se(t[9]),d(s,"class","bi bi-x-circle"),d(e,"class",i="btn "+t[8]+" w-75")},m(a,c){E(a,e,c),f(e,s),f(e,r),f(e,n),o||(l=[z(e,"mouseenter",t[15]),z(e,"mouseleave",t[16]),z(e,"click",t[12])],o=!0)},p(a,c){c&512&&le(n,a[9]),c&256&&i!==(i="btn "+a[8]+" w-75")&&d(e,"class",i)},d(a){a&&P(e),o=!1,Se(l)}}}function Wu(t){let e,s,r,n;return{c(){e=h("button"),s=se("Borrowed (#"),r=se(t[6]),n=se(")"),d(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){E(i,e,o),f(e,s),f(e,r),f(e,n)},p(i,o){o&64&&le(r,i[6])},d(i){i&&P(e)}}}function Ei(t){let e,s;return e=new yt({props:{title:"Status",icon:"journal",$$slots:{default:[Vu]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&1073741872&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Ri(t){let e;function s(i,o){return i[5].length<=0?Bu:qu}let r=s(t),n=r(t);return{c(){n.c(),e=qe()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){r===(r=s(i))&&n?n.p(i,o):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function qu(t){let e,s,r,n,i=Pe(Object.entries(t[5])),o=[];for(let l=0;l<i.length;l+=1)o[l]=ji(Mi(t,i,l));return{c(){e=h("table"),s=h("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=v(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();d(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){E(l,e,a),f(e,s),f(e,r),f(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a&32){i=Pe(Object.entries(l[5]));let c;for(c=0;c<i.length;c+=1){const u=Mi(l,i,c);o[c]?o[c].p(u,a):(o[c]=ji(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&P(e),Je(o,l)}}}function Bu(t){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",d(e,"class","text-center my-5")},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function ji(t){let e,s,r=t[27].barcode+"",n,i,o,l=t[27].status!="Available"?`${t[27].fname} ${t[27].lname}`:"--",a,c,u,m=t[27].status+"",_,g,p=t[27].reservation_id?`(${t[27].reservation_id})`:t[27].borrow_id?`(${t[27].borrow_id})`:"",b,y,w,S,k,D,$=t[27].status=="Borrowed"?"Return":"Borrow",T,R,I,q,Z;return{c(){e=h("tr"),s=h("td"),n=se(r),i=v(),o=h("td"),a=se(l),c=v(),u=h("td"),_=se(m),g=v(),b=se(p),w=v(),S=h("td"),k=h("a"),D=h("small"),T=se($),R=v(),I=h("i"),Z=v(),d(u,"class",y=t[27].status=="Available"?"text-bg-success":t[27].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),d(I,"class","bi bi-box-arrow-up-right"),d(k,"href",q=t[27].status=="Available"?`./#/borrow?barcode=${t[27].barcode}`:t[27].status=="Reserved"?`./#/borrow?reserve_id=${t[27].reservation_id}`:`./#/return?borrow_id=${t[27].borrow_id}`),d(k,"class","btn btn-outline-primary btn-sm")},m(B,V){E(B,e,V),f(e,s),f(s,n),f(e,i),f(e,o),f(o,a),f(e,c),f(e,u),f(u,_),f(u,g),f(u,b),f(e,w),f(e,S),f(S,k),f(k,D),f(D,T),f(D,R),f(D,I),f(e,Z)},p(B,V){V&32&&r!==(r=B[27].barcode+"")&&le(n,r),V&32&&l!==(l=B[27].status!="Available"?`${B[27].fname} ${B[27].lname}`:"--")&&le(a,l),V&32&&m!==(m=B[27].status+"")&&le(_,m),V&32&&p!==(p=B[27].reservation_id?`(${B[27].reservation_id})`:B[27].borrow_id?`(${B[27].borrow_id})`:"")&&le(b,p),V&32&&y!==(y=B[27].status=="Available"?"text-bg-success":B[27].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&d(u,"class",y),V&32&&$!==($=B[27].status=="Borrowed"?"Return":"Borrow")&&le(T,$),V&32&&q!==(q=B[27].status=="Available"?`./#/borrow?barcode=${B[27].barcode}`:B[27].status=="Reserved"?`./#/borrow?reserve_id=${B[27].reservation_id}`:`./#/return?borrow_id=${B[27].borrow_id}`)&&d(k,"href",q)},d(B){B&&P(e)}}}function Vu(t){let e,s,r,n,i,o,l,a,c,u,m,_=t[5]&&Ri(t);return{c(){e=h("div"),s=h("label"),s.textContent="Add Copy:",r=v(),n=h("div"),i=h("input"),o=v(),l=h("button"),l.textContent="Add",a=v(),_&&_.c(),c=qe(),d(s,"for","copy"),d(s,"class","form=control col-auto"),d(i,"type","text"),d(i,"class","form-control"),d(i,"id","copy"),d(i,"placeholder","Barcode Number"),d(n,"class","col-4"),d(l,"class","btn btn-primary col-2"),d(e,"class","row justify-content-center align-items-center my-3")},m(g,p){E(g,e,p),f(e,s),f(e,r),f(e,n),f(n,i),J(i,t[4]),f(e,o),f(e,l),E(g,a,p),_&&_.m(g,p),E(g,c,p),u||(m=[z(i,"input",t[17]),z(l,"click",t[10])],u=!0)},p(g,p){p&16&&i.value!==g[4]&&J(i,g[4]),g[5]?_?_.p(g,p):(_=Ri(g),_.c(),_.m(c.parentNode,c)):_&&(_.d(1),_=null)},d(g){g&&(P(e),P(a),P(c)),_&&_.d(g),u=!1,Se(m)}}}function zu(t){let e,s,r,n,i,o,l,a,c,u,m,_,g=t[2]&&Ci();n=new dt({props:{text:"Book Details"}});const p=[xu,Nu],b=[];function y(S,k){return S[3]?0:1}o=y(t),l=b[o]=p[o](t);let w=t[1]=="staff"&&Ei(t);return{c(){e=h("main"),g&&g.c(),s=v(),r=h("section"),x(n.$$.fragment),i=v(),l.c(),a=v(),w&&w.c(),c=v(),u=h("div"),d(u,"class","my-5"),d(e,"class","container")},m(S,k){E(S,e,k),g&&g.m(e,null),f(e,s),f(e,r),L(n,r,null),f(r,i),b[o].m(r,null),f(e,a),w&&w.m(e,null),f(e,c),f(e,u),_=!0},p(S,[k]){S[2]?g?k&4&&O(g,1):(g=Ci(),g.c(),O(g,1),g.m(e,s)):g&&(De(),M(g,1,1,()=>{g=null}),Me());let D=o;o=y(S),o===D?b[o].p(S,k):(De(),M(b[D],1,1,()=>{b[D]=null}),Me(),l=b[o],l?l.p(S,k):(l=b[o]=p[o](S),l.c()),O(l,1),l.m(r,null)),S[1]=="staff"?w?(w.p(S,k),k&2&&O(w,1)):(w=Ei(S),w.c(),O(w,1),w.m(e,c)):w&&(De(),M(w,1,1,()=>{w=null}),Me())},i(S){_||(O(g),O(n.$$.fragment,S),O(l),O(w),S&&(m||Ie(()=>{m=Ve(e,ze,{duration:500}),m.start()})),_=!0)},o(S){M(g),M(n.$$.fragment,S),M(l),M(w),_=!1},d(S){S&&P(e),g&&g.d(),Y(n),b[o].d(),w&&w.d()}}}function Ai(){return 3e6+Math.floor(Math.random()*9e3)}function Gu(t,e,s){let r,n;jt.subscribe(j=>s(1,n=j));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,c;async function u(){const{data:j,error:A}=await ne.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",l);console.table(j[0]),s(3,c=j[0]),j.length==0&&s(2,a=!0)}Ds(u);let m;async function _(){const{data:j,error:A}=await ne.rpc("get_holdings",{bookid:l});A&&console.error(A),console.table(j),s(5,p=j)}async function g(){const{data:j}=await ne.from("library_holdings").select().eq("barcode",m);j.length==0&&await ne.from("library_holdings").insert({book_id:l,barcode:m})}let p;n=="staff"&&(_(),ne.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},()=>{_()}).subscribe());let b,y,w=0,S="btn-secondary";n=="client"&&($(),y||(k(),D()));async function k(){const{data:j,error:A}=await ne.rpc("isreserved",{bookid:l,studid:i});s(0,b=j)}async function D(){const{data:j,error:A}=await ne.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");s(7,w=j.length)}async function $(){const{data:j,error:A}=await ne.rpc("isborrowed",{bookid:l,studid:i});s(6,y=j)}async function T(){const{data:j,error:A}=await ne.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(A){console.error(A);return}const{error:H}=await ne.from("book_reservation").insert({reservation_id:await I(),stud_id:i,holding_id:j.holding_id});if(H){console.error(H);return}const{data:C,error:U}=await ne.from("library_holdings").update({status:"Reserved"}).eq("barcode",j.barcode).select("holding_id").single();if(U){console.error(U);return}k()}async function R(){const{data:j,error:A}=await ne.from("book_reservation").update({active:!1}).eq("reservation_id",b).select().single(),{error:H}=await ne.from("library_holdings").update({status:"Available"}).eq("holding_id",j.holding_id);!A||!H?(k(),D()):(console.error(A),console.error(H))}async function I(){let j=Ai();const{data:A,error:H}=await ne.from("book_reservation").select().eq("reservation_id",j);return console.log(A),A.length!=0&&(j=Ai(),console.log("exists")),console.log(j),j}let q=l>4?"./book-cover.png":`./${l}.jpg`;const Z=()=>{s(9,r="Cancel Reservation"),s(8,S="btn-danger")},B=()=>{s(9,r=`Reserved (#${b})`),s(8,S="btn-secondary")};function V(){m=this.value,s(4,m)}return t.$$set=j=>{"params"in j&&s(14,o=j.params)},t.$$.update=()=>{t.$$.dirty&1&&s(9,r=`Reserved (${b})`)},[b,n,a,c,m,p,y,w,S,r,g,T,R,q,o,Z,B,V]}class Vo extends $e{constructor(e){super(),ke(this,e,Gu,zu,ye,{params:14})}}function Ju(t){let e,s,r,n,i,o;const l=t[3].default,a=fr(l,t,t[2],null);return{c(){e=h("div"),s=h("label"),r=se(t[0]),n=v(),i=h("div"),a&&a.c(),d(s,"class","col-sm-4 col-md-3 col-form-label"),d(s,"for",t[1]),d(i,"class","col-sm-8 col-md-9"),d(e,"class","mb-4 row")},m(c,u){E(c,e,u),f(e,s),f(s,r),f(e,n),f(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&le(r,c[0]),(!o||u&2)&&d(s,"for",c[1]),a&&a.p&&(!o||u&4)&&mr(a,l,c,c[2],o?hr(l,c[2],u,null):_r(c[2]),null)},i(c){o||(O(a,c),o=!0)},o(c){M(a,c),o=!1},d(c){c&&P(e),a&&a.d(c)}}}function Ku(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,o=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,o,n,r]}class Ae extends $e{constructor(e){super(),ke(this,e,Ku,Ju,ye,{label:0,id:1})}}function Ii(t,e,s){const r=t.slice();return r[29]=e[s][0],r[30]=e[s][1],r}function Li(t,e,s){const r=t.slice();return r[29]=e[s][0],r[34]=e[s][1],r}function Yi(t,e,s){const r=t.slice();return r[29]=e[s][0],r[38]=e[s][1],r}function Zu(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-name"),d(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[4]),s||(r=z(e,"input",t[18]),s=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&P(e),s=!1,r()}}}function Qu(t){let e,s,r;return{c(){e=h("textarea"),d(e,"class","form-control"),d(e,"id","book-description"),d(e,"rows","6"),d(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[5]),s||(r=z(e,"input",t[19]),s=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&P(e),s=!1,r()}}}function Xu(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","book-cover"),d(e,"accept","image/*")},m(n,i){E(n,e,i),t[21](e),s||(r=z(e,"change",t[20]),s=!0)},p:N,d(n){n&&P(e),t[21](null),s=!1,r()}}}function ed(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","categories"),d(e,"class",s="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-category"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[6]),E(l,r,a),E(l,n,a),i||(o=z(e,"input",t[23]),i=!0)},p(l,a){a[0]&2048&&s!==(s="form-control "+l[11])&&d(e,"class",s),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(P(e),P(r),P(n)),i=!1,o()}}}function td(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","authors"),d(e,"class",s="form-control "+t[12]),d(e,"type","text"),d(e,"id","book-author"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[7]),E(l,r,a),E(l,n,a),i||(o=z(e,"input",t[24]),i=!0)},p(l,a){a[0]&4096&&s!==(s="form-control "+l[12])&&d(e,"class",s),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(P(e),P(r),P(n)),i=!1,o()}}}function sd(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","publishers"),d(e,"class",s="form-control "+t[13]),d(e,"type","text"),d(e,"id","book-publisher"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[8]),E(l,r,a),E(l,n,a),i||(o=z(e,"input",t[25]),i=!0)},p(l,a){a[0]&8192&&s!==(s="form-control "+l[13])&&d(e,"class",s),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(P(e),P(r),P(n)),i=!1,o()}}}function rd(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","number"),d(e,"id","book-shelf"),d(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[9]),s||(r=z(e,"input",t[26]),s=!0)},p(n,i){i[0]&512&&pr(e.value)!==n[9]&&J(e,n[9])},d(n){n&&P(e),s=!1,r()}}}function nd(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-isbn"),d(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,t[10]),s||(r=z(e,"input",t[27]),s=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&P(e),s=!1,r()}}}function id(t){return{c:N,m:N,p:N,d:N}}function od(t){let e,s=Pe(Object.entries(t[37])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ni(Yi(t,s,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","authors")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&32768){s=Pe(Object.entries(n[37]));let o;for(o=0;o<s.length;o+=1){const l=Yi(n,s,o);r[o]?r[o].p(l,i):(r[o]=Ni(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&P(e),Je(r,n)}}}function Ni(t){let e;return{c(){e=h("option"),e.__value=t[38].name,J(e,e.__value)},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function ad(t){return{c:N,m:N,p:N,d:N}}function ld(t){return{c:N,m:N,p:N,d:N}}function cd(t){let e,s=Pe(Object.entries(t[33])),r=[];for(let n=0;n<s.length;n+=1)r[n]=xi(Li(t,s,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","publishers")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&65536){s=Pe(Object.entries(n[33]));let o;for(o=0;o<s.length;o+=1){const l=Li(n,s,o);r[o]?r[o].p(l,i):(r[o]=xi(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&P(e),Je(r,n)}}}function xi(t){let e;return{c(){e=h("option"),e.__value=t[34].name,J(e,e.__value)},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function ud(t){return{c:N,m:N,p:N,d:N}}function dd(t){return{c:N,m:N,p:N,d:N}}function fd(t){let e,s=Pe(Object.entries(t[28])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ui(Ii(t,s,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","categories")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&131072){s=Pe(Object.entries(n[28]));let o;for(o=0;o<s.length;o+=1){const l=Ii(n,s,o);r[o]?r[o].p(l,i):(r[o]=Ui(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&P(e),Je(r,n)}}}function Ui(t){let e;return{c(){e=h("option"),e.__value=t[30].name,J(e,e.__value)},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function hd(t){return{c:N,m:N,p:N,d:N}}function md(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C,U,te,G,K,Q,me,ue,ae,Oe,ge,de;s=new dt({props:{text:"Add Book"}}),o=new Ae({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Zu]},$$scope:{ctx:t}}}),a=new Ae({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Qu]},$$scope:{ctx:t}}}),u=new Ae({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Xu]},$$scope:{ctx:t}}}),R=new Ae({props:{label:"Category:",id:"book-category",$$slots:{default:[ed]},$$scope:{ctx:t}}}),q=new Ae({props:{label:"Author: ",id:"book-author",$$slots:{default:[td]},$$scope:{ctx:t}}}),B=new Ae({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[sd]},$$scope:{ctx:t}}}),j=new Ae({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[rd]},$$scope:{ctx:t}}}),H=new Ae({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[nd]},$$scope:{ctx:t}}});let ie={ctx:t,current:null,token:null,hasCatch:!1,pending:ad,then:od,catch:id,value:37};zs(t[15](),ie);let we={ctx:t,current:null,token:null,hasCatch:!1,pending:ud,then:cd,catch:ld,value:33};zs(t[16](),we);let xe={ctx:t,current:null,token:null,hasCatch:!1,pending:hd,then:fd,catch:dd,value:28};return zs(t[17](),xe),{c(){e=h("section"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),_=h("div"),g=h("label"),g.textContent="Preview:",p=v(),b=h("div"),y=h("img"),S=v(),k=h("button"),k.textContent="Remove",$=v(),T=h("div"),x(R.$$.fragment),I=v(),x(q.$$.fragment),Z=v(),x(B.$$.fragment),V=v(),x(j.$$.fragment),A=v(),x(H.$$.fragment),C=v(),U=h("div"),te=h("button"),te.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',G=v(),K=h("a"),K.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',Q=v(),ie.block.c(),me=v(),we.block.c(),ue=v(),xe.block.c(),d(g,"for","cover-preview"),d(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(y.src,w=t[3])||d(y,"src",w),d(y,"alt","Preview"),d(y,"id","cover-preview"),d(y,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(b,"class","col-sm-8 col-md-9"),d(b,"id","preview-div"),d(_,"class",D="my-3 row "+t[2]),d(i,"class","col-sm-12 col-lg-6"),d(T,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-center"),d(te,"class","btn btn-success"),d(K,"href","./#/"),d(U,"class","my-3"),d(e,"class","my-1 container")},m(pe,re){E(pe,e,re),L(s,e,null),f(e,r),f(e,n),f(n,i),L(o,i,null),f(i,l),L(a,i,null),f(i,c),L(u,i,null),f(i,m),f(i,_),f(_,g),f(_,p),f(_,b),f(b,y),f(b,S),f(b,k),f(n,$),f(n,T),L(R,T,null),f(T,I),L(q,T,null),f(T,Z),L(B,T,null),f(T,V),L(j,T,null),f(T,A),L(H,T,null),f(e,C),f(e,U),f(U,te),f(U,G),f(U,K),f(e,Q),ie.block.m(e,ie.anchor=null),ie.mount=()=>e,ie.anchor=me,f(e,me),we.block.m(e,we.anchor=null),we.mount=()=>e,we.anchor=ue,f(e,ue),xe.block.m(e,xe.anchor=null),xe.mount=()=>e,xe.anchor=null,Oe=!0,ge||(de=[z(k,"click",t[22]),z(te,"click",t[14])],ge=!0)},p(pe,re){t=pe;const Ye={};re[0]&16|re[1]&1024&&(Ye.$$scope={dirty:re,ctx:t}),o.$set(Ye);const He={};re[0]&32|re[1]&1024&&(He.$$scope={dirty:re,ctx:t}),a.$set(He);const Bn={};re[0]&3|re[1]&1024&&(Bn.$$scope={dirty:re,ctx:t}),u.$set(Bn),(!Oe||re[0]&8&&!Xe(y.src,w=t[3]))&&d(y,"src",w),(!Oe||re[0]&4&&D!==(D="my-3 row "+t[2]))&&d(_,"class",D);const Vn={};re[0]&2112|re[1]&1024&&(Vn.$$scope={dirty:re,ctx:t}),R.$set(Vn);const zn={};re[0]&4224|re[1]&1024&&(zn.$$scope={dirty:re,ctx:t}),q.$set(zn);const Gn={};re[0]&8448|re[1]&1024&&(Gn.$$scope={dirty:re,ctx:t}),B.$set(Gn);const Jn={};re[0]&512|re[1]&1024&&(Jn.$$scope={dirty:re,ctx:t}),j.$set(Jn);const Kn={};re[0]&1024|re[1]&1024&&(Kn.$$scope={dirty:re,ctx:t}),H.$set(Kn),Gs(ie,t,re),Gs(we,t,re),Gs(xe,t,re)},i(pe){Oe||(O(s.$$.fragment,pe),O(o.$$.fragment,pe),O(a.$$.fragment,pe),O(u.$$.fragment,pe),O(R.$$.fragment,pe),O(q.$$.fragment,pe),O(B.$$.fragment,pe),O(j.$$.fragment,pe),O(H.$$.fragment,pe),pe&&(ae||Ie(()=>{ae=Ve(e,ze,{duration:500}),ae.start()})),Oe=!0)},o(pe){M(s.$$.fragment,pe),M(o.$$.fragment,pe),M(a.$$.fragment,pe),M(u.$$.fragment,pe),M(R.$$.fragment,pe),M(q.$$.fragment,pe),M(B.$$.fragment,pe),M(j.$$.fragment,pe),M(H.$$.fragment,pe),Oe=!1},d(pe){pe&&P(e),Y(s),Y(o),Y(a),Y(u),Y(R),Y(q),Y(B),Y(j),Y(H),ie.block.d(),ie.token=null,ie=null,we.block.d(),we.token=null,we=null,xe.block.d(),xe.token=null,xe=null,ge=!1,Se(de)}}}function _d(t,e,s){let r,n,i="d-none",o,l,a,c,u,m,_,g,p,b,y;async function w(){const{data:H,error:C}=await ne.from("author").select("author_id").eq("name",u).single(),{data:U,error:te}=await ne.from("publisher").select("publisher_id").eq("name",m).single(),{data:G,error:K}=await ne.from("category").select("category_id").eq("name",c).single();let Q=!0;if((C||!H)&&(s(12,b="is-invalid"),Q=!1),(te||!U)&&(s(13,y="is-invalid"),Q=!1),(K||!G)&&(s(11,p="is-invalid"),Q=!1),!Q)return;const{error:me}=await ne.from("books").insert({title:l,description:a,category_id:G.category_id,author_id:H.author_id,publisher_id:U.publisher_id,shelf_number:_,isbn:g});me?console.error(me):alert(`Successfully Added ${l}!`)}async function S(){const{data:H,error:C}=await ne.from("author").select("name").order("name",{ascending:!0});return H}async function k(){const{data:H,error:C}=await ne.from("publisher").select("name").order("name",{ascending:!0});return H}async function D(){const{data:H,error:C}=await ne.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return H}function $(){l=this.value,s(4,l)}function T(){a=this.value,s(5,a)}function R(){r=this.files,s(0,r)}function I(H){as[H?"unshift":"push"](()=>{n=H,s(1,n)})}const q=()=>{s(1,n.value="",n),s(0,r="")};function Z(){c=this.value,s(6,c)}function B(){u=this.value,s(7,u)}function V(){m=this.value,s(8,m)}function j(){_=pr(this.value),s(9,_)}function A(){g=this.value,s(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(r&&r[0]){console.log(r),s(2,i="");const H=URL.createObjectURL(r[0]);s(3,o=H)}else console.log(r),s(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A]}class pd extends $e{constructor(e){super(),ke(this,e,_d,md,ye,{},null,[-1,-1])}}function Fi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function gd(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function bd(t){let e,s,r=t[0].name+"",n,i,o,l,a,c,u,m,_=t[0].email+"",g,p;function b(S,k){return S[0].bio==null?wd:vd}let y=b(t),w=y(t);return{c(){e=h("div"),s=h("h1"),n=se(r),i=v(),o=h("p"),w.c(),l=v(),a=h("p"),c=h("b"),c.textContent="Website:",u=v(),m=h("a"),g=se(_),d(s,"class","mb-2 pb-2"),d(o,"class",""),d(m,"href",p="mailto:"+t[0].email),d(e,"class","container")},m(S,k){E(S,e,k),f(e,s),f(s,n),f(e,i),f(e,o),w.m(o,null),f(e,l),f(e,a),f(a,c),f(a,u),f(a,m),f(m,g)},p(S,k){k&1&&r!==(r=S[0].name+"")&&le(n,r),y===(y=b(S))&&w?w.p(S,k):(w.d(1),w=y(S),w&&(w.c(),w.m(o,null))),k&1&&_!==(_=S[0].email+"")&&le(g,_),k&1&&p!==(p="mailto:"+S[0].email)&&d(m,"href",p)},i:N,o:N,d(S){S&&P(e),w.d()}}}function vd(t){let e=t[0].bio+"",s;return{c(){s=se(e)},m(r,n){E(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&le(s,e)},d(r){r&&P(s)}}}function wd(t){let e;return{c(){e=h("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function yd(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function kd(t){let e,s,r=Pe(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Hi(Fi(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Pe(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Fi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Hi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Hi(t){let e,s;return e=new wr({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function $d(t){let e,s,r,n;const i=[kd,yd],o=[];function l(a,c){return a[1]?0:1}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Sd(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b;r=new dt({props:{text:"Author Details"}});const y=[bd,gd],w=[];function S(k,D){return k[0]?0:1}return u=S(t),m=w[u]=y[u](t),g=new yt({props:{title:"Books",icon:"journal",$$slots:{default:[$d]},$$scope:{ctx:t}}}),{c(){e=h("main"),s=h("section"),x(r.$$.fragment),n=v(),i=h("div"),o=h("div"),l=h("img"),c=v(),m.c(),_=v(),x(g.$$.fragment),d(l,"class","border p-3"),Xe(l.src,a=Od)||d(l,"src",a),d(l,"alt","author"),d(l,"height","300"),d(l,"width","300"),pt(l,"object-fit","contain"),d(o,"class","d-flex justify-content-center my-1"),d(i,"class","d-md-flex d-block"),d(e,"class","container")},m(k,D){E(k,e,D),f(e,s),L(r,s,null),f(s,n),f(s,i),f(i,o),f(o,l),f(i,c),w[u].m(i,null),f(e,_),L(g,e,null),b=!0},p(k,[D]){let $=u;u=S(k),u===$?w[u].p(k,D):(De(),M(w[$],1,1,()=>{w[$]=null}),Me(),m=w[u],m?m.p(k,D):(m=w[u]=y[u](k),m.c()),O(m,1),m.m(i,null));const T={};D&514&&(T.$$scope={dirty:D,ctx:k}),g.$set(T)},i(k){b||(O(r.$$.fragment,k),O(m),O(g.$$.fragment,k),k&&(p||Ie(()=>{p=Ve(e,ze,{duration:500}),p.start()})),b=!0)},o(k){M(r.$$.fragment,k),M(m),M(g.$$.fragment,k),b=!1},d(k){k&&P(e),Y(r),w[u].d(),Y(g)}}}let Od="./default-profile.jpg";function Td(t,e,s){let{params:r}=e,n=r.authorID,i,o;async function l(){const{data:a,error:c}=await ne.from("author").select().eq("author_id",n);console.log(a),s(0,i=a[0]);const{data:u,error:m}=await ne.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,o=u)}return Ds(l),t.$$set=a=>{"params"in a&&s(2,r=a.params)},[i,o,r]}class zo extends $e{constructor(e){super(),ke(this,e,Td,Sd,ye,{params:2})}}function Wi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function qi(t){let e,s,r=t[0].name+"",n,i,o,l,a,c,u,m,_=t[0].email+"",g,p;function b(S,k){return S[0].bio==null?Md:Dd}let y=b(t),w=y(t);return{c(){e=h("div"),s=h("h1"),n=se(r),i=v(),o=h("p"),w.c(),l=v(),a=h("p"),c=h("b"),c.textContent="Website:",u=v(),m=h("a"),g=se(_),d(s,"class","mb-2 pb-2"),d(o,"class",""),d(m,"href",p="https://"+t[0].email),d(m,"id","publisher-website"),d(e,"class","container")},m(S,k){E(S,e,k),f(e,s),f(s,n),f(e,i),f(e,o),w.m(o,null),f(e,l),f(e,a),f(a,c),f(a,u),f(a,m),f(m,g)},p(S,k){k&1&&r!==(r=S[0].name+"")&&le(n,r),y===(y=b(S))&&w?w.p(S,k):(w.d(1),w=y(S),w&&(w.c(),w.m(o,null))),k&1&&_!==(_=S[0].email+"")&&le(g,_),k&1&&p!==(p="https://"+S[0].email)&&d(m,"href",p)},d(S){S&&P(e),w.d()}}}function Dd(t){let e=t[0].bio+"",s;return{c(){s=se(e)},m(r,n){E(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&le(s,e)},d(r){r&&P(s)}}}function Md(t){let e;return{c(){e=h("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(s,r){E(s,e,r)},p:N,d(s){s&&P(e)}}}function Cd(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Pd(t){let e,s,r=Pe(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Bi(Wi(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Pe(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Wi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Bi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Bi(t){let e,s;return e=new wr({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Ed(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y;s=new dt({props:{text:"Publisher Details"}});let w=t[0]&&qi(t);_=new yt({props:{title:"Books",icon:"journal"}});const S=[Pd,Cd],k=[];function D($,T){return $[1]?0:1}return p=D(t),b=k[p]=S[p](t),{c(){e=h("section"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),o=h("img"),a=v(),w&&w.c(),u=v(),m=h("section"),x(_.$$.fragment),g=v(),b.c(),d(o,"id","img-cover"),d(o,"class","border p-3"),Xe(o.src,l=Rd)||d(o,"src",l),d(o,"alt","publisher"),d(o,"height","300"),d(o,"width","300"),pt(o,"object-fit","contain"),d(i,"id","publisher-cover"),d(i,"class","d-flex justify-content-center my-1"),d(n,"class","d-md-flex d-block"),d(e,"class","container"),d(m,"class","container")},m($,T){E($,e,T),L(s,e,null),f(e,r),f(e,n),f(n,i),f(i,o),f(n,a),w&&w.m(n,null),E($,u,T),E($,m,T),L(_,m,null),f(m,g),k[p].m(m,null),y=!0},p($,[T]){$[0]?w?w.p($,T):(w=qi($),w.c(),w.m(n,null)):w&&(w.d(1),w=null);let R=p;p=D($),p===R?k[p].p($,T):(De(),M(k[R],1,1,()=>{k[R]=null}),Me(),b=k[p],b?b.p($,T):(b=k[p]=S[p]($),b.c()),O(b,1),b.m(m,null))},i($){y||(O(s.$$.fragment,$),$&&(c||Ie(()=>{c=Ve(e,ze,{duration:500}),c.start()})),O(_.$$.fragment,$),O(b),y=!0)},o($){M(s.$$.fragment,$),M(_.$$.fragment,$),M(b),y=!1},d($){$&&(P(e),P(u),P(m)),Y(s),w&&w.d(),Y(_),k[p].d()}}}let Rd="./default-profile.jpg";function jd(t,e,s){let{params:r}=e,n=r.publisherID,i,o;async function l(){const{data:a,error:c}=await ne.from("publisher").select().eq("publisher_id",n);console.log(a),s(0,i=a[0]);const{data:u,error:m}=await ne.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,o=u)}return Ds(l),t.$$set=a=>{"params"in a&&s(2,r=a.params)},[i,o,r]}class Go extends $e{constructor(e){super(),ke(this,e,jd,Ed,ye,{params:2})}}function Ad(t){let e,s,r,n,i,o,l,a,c,u;return{c(){e=h("div"),s=h("div"),r=h("i"),i=v(),o=h("div"),l=h("h5"),a=h("a"),c=se(t[0]),d(r,"class",n="bi bi-"+t[2]),d(s,"class","d-flex justify-content-center"),pt(s,"font-size","3em"),d(a,"class","stretched-link svelte-1vxezln"),d(a,"href",u="./#/"+t[1]),d(l,"class","card-title text-center my-2"),d(o,"class","card-body p-1"),d(e,"class","card col-md-2 col-5 border-1 py-2 svelte-1vxezln")},m(m,_){E(m,e,_),f(e,s),f(s,r),f(e,i),f(e,o),f(o,l),f(l,a),f(a,c)},p(m,[_]){_&4&&n!==(n="bi bi-"+m[2])&&d(r,"class",n),_&1&&le(c,m[0]),_&2&&u!==(u="./#/"+m[1])&&d(a,"href",u)},i:N,o:N,d(m){m&&P(e)}}}function Id(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=o=>{"name"in o&&s(0,r=o.name),"link"in o&&s(1,n=o.link),"icon"in o&&s(2,i=o.icon)},[r,n,i]}class ct extends $e{constructor(e){super(),ke(this,e,Id,Ad,ye,{name:0,link:1,icon:2})}}function Ld(t){let e,s,r,n,i;return s=new ct({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new ct({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),x(s.$$.fragment),r=v(),x(n.$$.fragment),d(e,"class","row justify-content-center gap-4")},m(o,l){E(o,e,l),L(s,e,null),f(e,r),L(n,e,null),i=!0},p:N,i(o){i||(O(s.$$.fragment,o),O(n.$$.fragment,o),i=!0)},o(o){M(s.$$.fragment,o),M(n.$$.fragment,o),i=!1},d(o){o&&P(e),Y(s),Y(n)}}}function Yd(t){let e,s,r,n,i,o,l,a,c;return s=new ct({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new ct({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new ct({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new ct({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),x(s.$$.fragment),r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),l=v(),x(a.$$.fragment),d(e,"class","row justify-content-center gap-5")},m(u,m){E(u,e,m),L(s,e,null),f(e,r),L(n,e,null),f(e,i),L(o,e,null),f(e,l),L(a,e,null),c=!0},p:N,i(u){c||(O(s.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(s.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(s),Y(n),Y(o),Y(a)}}}function Nd(t){let e,s,r,n,i,o,l,a,c;return s=new ct({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new ct({props:{name:"Students Report",link:"",icon:"person-fill"}}),o=new ct({props:{name:"Payments Report",link:"",icon:"cash"}}),a=new ct({props:{name:"Transactions Report",link:"",icon:"arrow-left-right"}}),{c(){e=h("div"),x(s.$$.fragment),r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),l=v(),x(a.$$.fragment),d(e,"class","row justify-content-center gap-5 mb-5")},m(u,m){E(u,e,m),L(s,e,null),f(e,r),L(n,e,null),f(e,i),L(o,e,null),f(e,l),L(a,e,null),c=!0},p:N,i(u){c||(O(s.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(s.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(s),Y(n),Y(o),Y(a)}}}function xd(t){let e,s,r,n,i,o,l,a;return s=new yt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Ld]},$$scope:{ctx:t}}}),n=new yt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Yd]},$$scope:{ctx:t}}}),o=new yt({props:{title:"Reports",icon:"receipt",$$slots:{default:[Nd]},$$scope:{ctx:t}}}),{c(){e=h("main"),x(s.$$.fragment),r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),d(e,"class","container")},m(c,u){E(c,e,u),L(s,e,null),f(e,r),L(n,e,null),f(e,i),L(o,e,null),a=!0},p(c,[u]){const m={};u&1&&(m.$$scope={dirty:u,ctx:c}),s.$set(m);const _={};u&1&&(_.$$scope={dirty:u,ctx:c}),n.$set(_);const g={};u&1&&(g.$$scope={dirty:u,ctx:c}),o.$set(g)},i(c){a||(O(s.$$.fragment,c),O(n.$$.fragment,c),O(o.$$.fragment,c),c&&(l||Ie(()=>{l=Ve(e,ze,{duration:500}),l.start()})),a=!0)},o(c){M(s.$$.fragment,c),M(n.$$.fragment,c),M(o.$$.fragment,c),a=!1},d(c){c&&P(e),Y(s),Y(n),Y(o)}}}class Ud extends $e{constructor(e){super(),ke(this,e,null,xd,ye,{})}}function Vi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function zi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Gi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Ji(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T;return{c(){e=h("div"),s=h("div"),s.textContent="Category:",r=v(),n=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",c=v(),u=h("div"),u.textContent="Sort by:",m=v(),_=h("div"),g=h("select"),p=h("option"),p.textContent="Total",b=h("option"),b.textContent="Available",y=h("option"),y.textContent="Reserved",w=h("option"),w.textContent="Borrowed",S=v(),k=h("div"),D=h("select"),$=h("option"),$.textContent="Ascending",T=h("option"),T.textContent="Descending",o.__value="all",J(o,o.__value),l.__value="tech",J(l,l.__value),a.__value="all",J(a,a.__value),d(i,"name","category"),d(i,"class","form-select"),p.__value="",J(p,p.__value),b.__value="",J(b,b.__value),y.__value="",J(y,y.__value),w.__value="",J(w,w.__value),d(g,"name","filter"),d(g,"class","form-select"),$.__value="",J($,$.__value),T.__value="",J(T,T.__value),d(D,"name","order"),d(D,"class","form-select"),d(e,"class","d-flex justify-content-end align-items-center gap-2")},m(R,I){E(R,e,I),f(e,s),f(e,r),f(e,n),f(n,i),f(i,o),f(i,l),f(i,a),f(e,c),f(e,u),f(e,m),f(e,_),f(_,g),f(g,p),f(g,b),f(g,y),f(g,w),f(e,S),f(e,k),f(k,D),f(D,$),f(D,T)},d(R){R&&P(e)}}}function Fd(t){let e,s;return e=new At({}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:N,i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Hd(t){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',d(e,"class","d-flex justify-content-center mt-5")},m(s,r){E(s,e,r)},p:N,i:N,o:N,d(s){s&&P(e)}}}function Wd(t){let e,s,r=Pe(Object.entries(t[2].publisher)),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ki(Vi(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=qe()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),s=!0},p(o,l){if(l&4){r=Pe(Object.entries(o[2].publisher));let a;for(a=0;a<r.length;a+=1){const c=Vi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ki(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function qd(t){let e,s,r=Pe(Object.entries(t[2].author)),n=[];for(let o=0;o<r.length;o+=1)n[o]=Zi(zi(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=qe()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),s=!0},p(o,l){if(l&4){r=Pe(Object.entries(o[2].author));let a;for(a=0;a<r.length;a+=1){const c=zi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Zi(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Bd(t){let e,s,r=Pe(Object.entries(t[2].books)),n=[];for(let o=0;o<r.length;o+=1)n[o]=Qi(Gi(t,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=qe()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),s=!0},p(o,l){if(l&4){r=Pe(Object.entries(o[2].books));let a;for(a=0;a<r.length;a+=1){const c=Gi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Qi(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(De(),a=r.length;a<n.length;a+=1)i(a);Me()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)O(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);s=!1},d(o){o&&P(e),Je(n,o)}}}function Ki(t){let e,s;return e=new Bo({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Zi(t){let e,s;return e=new qo({props:{id:t[14].author_id,name:t[14].name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Qi(t){let e,s;return e=new wr({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Vd(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q;s=new dt({props:{text:"Library Holdings"}});let Z=t[3]&&t[3].value=="books"&&Ji();const B=[Bd,qd,Wd,Hd,Fd],V=[];function j(A,H){return A[2].books.length>0?0:A[2].author.length>0?1:A[2].publisher.length>0?2:A[0]?4:3}return D=j(t),$=V[D]=B[D](t),{c(){e=h("main"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",c=h("option"),c.textContent="Publisher",u=v(),m=h("div"),_=h("input"),g=v(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',b=v(),Z&&Z.c(),y=v(),w=h("hr"),S=v(),k=h("div"),$.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),d(o,"name","searchtype"),d(o,"class","form-select"),d(i,"class","col-auto col-md-2 p-0 pe-md-4"),d(_,"class","form-control form-control-lg"),d(_,"type","search"),d(_,"placeholder","Search"),d(_,"name","Search"),d(m,"class","col-6 col-md-6 p-0"),d(p,"class","btn btn-lg btn-success col-auto col-md-1"),d(p,"type","submit"),d(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),d(k,"class","row"),d(e,"class","container")},m(A,H){E(A,e,H),L(s,e,null),f(e,r),f(e,n),f(n,i),f(i,o),f(o,l),f(o,a),f(o,c),t[5](o),f(n,u),f(n,m),f(m,_),J(_,t[1]),f(n,g),f(n,p),f(e,b),Z&&Z.m(e,null),f(e,y),f(e,w),f(e,S),f(e,k),V[D].m(k,null),R=!0,I||(q=[z(o,"change",t[4]),z(_,"input",t[6]),z(_,"keyup",t[7]),z(p,"click",t[4])],I=!0)},p(A,[H]){H&2&&_.value!==A[1]&&J(_,A[1]),A[3]&&A[3].value=="books"?Z||(Z=Ji(),Z.c(),Z.m(e,y)):Z&&(Z.d(1),Z=null);let C=D;D=j(A),D===C?V[D].p(A,H):(De(),M(V[C],1,1,()=>{V[C]=null}),Me(),$=V[D],$?$.p(A,H):($=V[D]=B[D](A),$.c()),O($,1),$.m(k,null))},i(A){R||(O(s.$$.fragment,A),O($),A&&(T||Ie(()=>{T=Ve(e,ze,{duration:500}),T.start()})),R=!0)},o(A){M(s.$$.fragment,A),M($),R=!1},d(A){A&&P(e),Y(s),t[5](null),Z&&Z.d(),V[D].d(),I=!1,Se(q)}}}function zd(t,e,s){let r;cn(t,cl,y=>s(9,r=y));let n=!0;function i(){switch(r){case"/search/author":s(3,m.value="author",m);break;case"/search/publisher":s(3,m.value="publisher",m);break;default:s(3,m.value="books",m)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},m;async function _(){s(0,n=!0),a=m.value,console.log(a);const{data:y,error:w}=await ne.from(a).select(o[a]).ilike(l[a],`%${c}%`);w&&console.log(w),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[a]=y,u),s(2,u),s(0,n=!1),console.log(n,u)}Ds(i),Ds(_);function g(y){as[y?"unshift":"push"](()=>{m=y,s(3,m)})}function p(){c=this.value,s(1,c)}return[n,c,u,m,_,g,p,y=>y.key==="Enter"&&_()]}class rs extends $e{constructor(e){super(),ke(this,e,zd,Vd,ye,{})}}function Gd(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b;return{c(){e=h("div"),s=h("h2"),s.textContent="Register",r=v(),n=h("form"),i=h("div"),i.innerHTML='<div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><ion-icon name="id-card"></ion-icon></span> <input type="text" id="sID" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="sID" class="svelte-m59xae">Student ID</label></div> <div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><ion-icon name="person-circle"></ion-icon></span> <input type="text" id="fname" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="fname" class="svelte-m59xae">First Name</label></div> <div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><ion-icon name="person-circle"></ion-icon></span> <input type="text" id="lname" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="lname" class="svelte-m59xae">Last Name</label></div>',o=v(),l=h("div"),l.innerHTML='<div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><ion-icon name="call"></ion-icon></span> <input type="tel" id="contact" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="contact" class="svelte-m59xae">Contact</label></div> <div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><ion-icon name="location"></ion-icon></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="address" class="svelte-m59xae">Address</label></div> <div class="input-box svelte-m59xae"><span class="icon svelte-m59xae"><i class="bi bi-envelope"></i></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-m59xae"/> <label for="address" class="svelte-m59xae">Email</label></div>',a=v(),c=h("button"),c.textContent="Proceed",u=v(),m=h("a"),m.textContent="Back",d(s,"class","svelte-m59xae"),d(i,"class","col-12 col-sm-6"),d(l,"class","col-12 col-sm-6"),d(c,"type","submit"),d(c,"class","bton w-50 svelte-m59xae"),d(c,"name","hidden"),d(c,"id","Proceed"),d(n,"action","#"),d(n,"id","form"),d(n,"autocomplete","off"),d(n,"method","post"),d(n,"class","row justify-content-center"),d(m,"href","./#/"),d(m,"class","mt-2 svelte-m59xae"),d(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-m59xae"),d(e,"style","height")},m(y,w){E(y,e,w),f(e,s),f(e,r),f(e,n),f(n,i),f(n,o),f(n,l),f(n,a),f(n,c),f(e,u),f(e,m),g=!0,p||(b=[z(c,"click",Xd),z(m,"click",t[13])],p=!0)},p:N,i(y){g||(y&&Ie(()=>{g&&(_||(_=ls(e,ds,{duration:600,y:500},!0)),_.run(1))}),g=!0)},o(y){y&&(_||(_=ls(e,ds,{duration:600,y:500},!1)),_.run(0)),g=!1},d(y){y&&P(e),y&&_&&_.end(),p=!1,Se(b)}}}function Jd(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C;return{c(){e=h("div"),s=h("h2"),s.textContent="Registration",r=v(),n=h("form"),i=h("div"),i.innerHTML='<span class="icon svelte-m59xae"><i class="bi bi-person"></i></span> <input type="text" id="registerUsername" required="" autocomplete="off" class="svelte-m59xae"/> <label for="registerUsername" class="svelte-m59xae">Username</label>',o=v(),l=h("div"),a=h("span"),c=h("a"),c.innerHTML='<i class="bi bi-eye"></i>',u=v(),m=h("input"),_=v(),g=h("label"),g.textContent="Password",p=v(),b=h("div"),y=h("span"),w=h("a"),w.innerHTML='<i class="bi bi-eye"></i>',S=v(),k=h("input"),D=v(),$=h("label"),$.textContent="Confirm Password",T=v(),R=h("button"),R.textContent="Next",I=v(),q=h("div"),Z=h("p"),B=se("Already have an account? "),V=h("a"),V.textContent="Login",d(s,"class","svelte-m59xae"),d(i,"class","input-box svelte-m59xae"),d(c,"href","./#/"),d(c,"class","svelte-m59xae"),d(a,"class","icon svelte-m59xae"),d(a,"id","showPass2"),d(m,"type","password"),d(m,"id","registerPass"),m.required=!0,d(m,"autocomplete","off"),d(m,"class","svelte-m59xae"),d(g,"for","registerPass"),d(g,"class","svelte-m59xae"),d(l,"class","input-box svelte-m59xae"),d(w,"href","./#/"),d(w,"class","svelte-m59xae"),d(y,"class","icon svelte-m59xae"),d(y,"id","showPass3"),d(k,"type","password"),d(k,"id","registerConfirm"),k.required=!0,d(k,"autocomplete","off"),d(k,"class","svelte-m59xae"),d($,"for","registerConfirm"),d($,"class","svelte-m59xae"),d(b,"class","input-box svelte-m59xae"),d(R,"type","submit"),d(R,"class","bton svelte-m59xae"),d(R,"id","registerBtn"),d(V,"href","./#/"),d(V,"class","login-link svelte-m59xae"),d(q,"class","login-register svelte-m59xae"),d(n,"action","#"),d(e,"class","form-box register svelte-m59xae")},m(U,te){E(U,e,te),f(e,s),f(e,r),f(e,n),f(n,i),f(n,o),f(n,l),f(l,a),f(a,c),f(l,u),f(l,m),f(l,_),f(l,g),f(n,p),f(n,b),f(b,y),f(y,w),f(b,S),f(b,k),f(b,D),f(b,$),f(n,T),f(n,R),f(n,I),f(n,q),f(q,Z),f(Z,B),f(Z,V),A=!0,H||(C=[z(c,"click",er(Zd)),z(w,"click",er(Qd)),z(R,"click",t[12]),z(V,"click",t[7])],H=!0)},p:N,i(U){A||(U&&Ie(()=>{A&&(j||(j=ls(e,ds,{duration:600,y:500},!0)),j.run(1))}),A=!0)},o(U){U&&(j||(j=ls(e,ds,{duration:600,y:500},!1)),j.run(0)),A=!1},d(U){U&&P(e),U&&j&&j.end(),H=!1,Se(C)}}}function Kd(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C,U,te,G,K,Q,me;const ue=[Jd,Gd],ae=[];function Oe(ge,de){return ge[0]?1:0}return V=Oe(t),j=ae[V]=ue[V](t),{c(){e=h("main"),s=h("div"),r=h("div"),n=h("h2"),n.textContent="Login",i=v(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',c=v(),u=h("input"),m=v(),_=h("label"),_.textContent="Username",g=v(),p=h("div"),b=h("span"),b.innerHTML='<i class="bi bi-eye"></i>',y=v(),w=h("input"),S=v(),k=h("label"),k.textContent="Password",D=v(),$=h("button"),$.textContent="Login",T=v(),R=h("div"),I=h("p"),q=se("Don't have an account? "),Z=h("a"),Z.textContent="Register",B=v(),j.c(),H=v(),C=h("div"),U=h("button"),U.textContent="Client",te=v(),G=h("button"),G.textContent="Staff",d(n,"class","svelte-m59xae"),d(a,"class","icon svelte-m59xae"),d(u,"type","text"),d(u,"id","usernameLogin"),u.required=!0,d(u,"autocomplete","off"),d(u,"class","svelte-m59xae"),d(_,"for","usernameLogin"),d(_,"class","svelte-m59xae"),d(l,"class","input-box svelte-m59xae"),d(b,"class","icon svelte-m59xae"),d(w,"type","password"),d(w,"id","passwordLogin"),w.required=!0,d(w,"autocomplete","off"),d(w,"class","svelte-m59xae"),d(k,"for","passwordLogin"),d(k,"class","svelte-m59xae"),d(p,"class","input-box svelte-m59xae"),d($,"type","submit"),d($,"class","bton svelte-m59xae"),d($,"id","loginBton"),d(Z,"href","./#/"),d(Z,"class","register-link svelte-m59xae"),d(R,"class","login-register svelte-m59xae"),d(o,"id","form"),d(r,"class","form-box login svelte-m59xae"),d(s,"class",A="wrapper "+t[1]+" active-popup "+t[4]+" svelte-m59xae"),d(U,"class","m-2 btn btn-primary btn-lg"),d(G,"class","m-2 btn btn-danger btn-lg"),d(C,"class","d-none"),d(e,"class","svelte-m59xae")},m(ge,de){E(ge,e,de),f(e,s),f(s,r),f(r,n),f(r,i),f(r,o),f(o,l),f(l,a),f(l,c),f(l,u),J(u,t[2]),f(l,m),f(l,_),f(o,g),f(o,p),f(p,b),f(p,y),f(p,w),J(w,t[3]),f(p,S),f(p,k),f(o,D),f(o,$),f(o,T),f(o,R),f(R,I),f(I,q),f(I,Z),f(s,B),ae[V].m(s,null),f(e,H),f(e,C),f(C,U),f(C,te),f(C,G),Q||(me=[z(u,"input",t[10]),z(w,"input",t[11]),z($,"click",t[8]),z(Z,"click",t[7]),z(o,"submit",er(t[8])),z(U,"click",t[14]),z(G,"click",t[15])],Q=!0)},p(ge,[de]){de&4&&u.value!==ge[2]&&J(u,ge[2]),de&8&&w.value!==ge[3]&&J(w,ge[3]);let ie=V;V=Oe(ge),V===ie?ae[V].p(ge,de):(De(),M(ae[ie],1,1,()=>{ae[ie]=null}),Me(),j=ae[V],j?j.p(ge,de):(j=ae[V]=ue[V](ge),j.c()),O(j,1),j.m(s,null)),de&18&&A!==(A="wrapper "+ge[1]+" active-popup "+ge[4]+" svelte-m59xae")&&d(s,"class",A)},i(ge){O(j),ge&&(K||Ie(()=>{K=Ve(e,ze,{duration:500}),K.start()}))},o(ge){M(j)},d(ge){ge&&P(e),ae[V].d(),Q=!1,Se(me)}}}const Zd=()=>{},Qd=()=>{},Xd=()=>{};function ef(t,e,s){let r;document.querySelector("body").setAttribute("data-bs-theme","dark"),dl("/");function n(k){jt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",k)}function i(k){jt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",k)}let o=!0,l="";function a(){s(9,o=!o)}let c,u;async function m(){const{data:k,error:D}=await ne.from("user_level").select("account_type, user_id").eq("username",c).eq("password",u).single();if(D){console.error(D);return}k.account_type=="student"?n(k.user_id):k.account_type=="staff"?i(k.user_id):console.error(k)}let _=!1;function g(){c=this.value,s(2,c)}function p(){u=this.value,s(3,u)}const b=()=>{s(0,_=!_)},y=()=>s(0,_=!_),w=()=>n("263690"),S=()=>i("153827");return t.$$.update=()=>{t.$$.dirty&512&&s(1,l=o?"":"active"),t.$$.dirty&513&&s(4,r=_&&!o?"moreinfo":"")},[_,l,c,u,r,n,i,a,m,o,g,p,b,y,w,S]}class tf extends $e{constructor(e){super(),ke(this,e,ef,Kd,ye,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Jo;function F(){return Jo.apply(null,arguments)}function sf(t){Jo=t}function it(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ft(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $n(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(be(t,e))return!1;return!0}function Be(t){return t===void 0}function St(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Ls(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ko(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function Pt(t,e){for(var s in e)be(e,s)&&(t[s]=e[s]);return be(e,"toString")&&(t.toString=e.toString),be(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ft(t,e,s,r){return va(t,e,s,r,!0).utc()}function rf(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function oe(t){return t._pf==null&&(t._pf=rf()),t._pf}var Xr;Array.prototype.some?Xr=Array.prototype.some:Xr=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function Sn(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=oe(t),s=Xr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function yr(t){var e=ft(NaN);return t!=null?Pt(oe(e),t):oe(e).userInvalidated=!0,e}var Xi=F.momentProperties=[],Ur=!1;function On(t,e){var s,r,n,i=Xi.length;if(Be(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Be(e._i)||(t._i=e._i),Be(e._f)||(t._f=e._f),Be(e._l)||(t._l=e._l),Be(e._strict)||(t._strict=e._strict),Be(e._tzm)||(t._tzm=e._tzm),Be(e._isUTC)||(t._isUTC=e._isUTC),Be(e._offset)||(t._offset=e._offset),Be(e._pf)||(t._pf=oe(e)),Be(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=Xi[s],n=e[r],Be(n)||(t[r]=n);return t}function Ys(t){On(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ur===!1&&(Ur=!0,F.updateOffset(this),Ur=!1)}function ot(t){return t instanceof Ys||t!=null&&t._isAMomentObject!=null}function Zo(t){F.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function et(t,e){var s=!0;return Pt(function(){if(F.deprecationHandler!=null&&F.deprecationHandler(null,t),s){var r=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])be(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}Zo(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var eo={};function Qo(t,e){F.deprecationHandler!=null&&F.deprecationHandler(t,e),eo[t]||(Zo(e),eo[t]=!0)}F.suppressDeprecationWarnings=!1;F.deprecationHandler=null;function ht(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function nf(t){var e,s;for(s in t)be(t,s)&&(e=t[s],ht(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(t,e){var s=Pt({},t),r;for(r in e)be(e,r)&&(Ft(t[r])&&Ft(e[r])?(s[r]={},Pt(s[r],t[r]),Pt(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)be(t,r)&&!be(e,r)&&Ft(t[r])&&(s[r]=Pt({},s[r]));return s}function Tn(t){t!=null&&this.set(t)}var tn;Object.keys?tn=Object.keys:tn=function(t){var e,s=[];for(e in t)be(t,e)&&s.push(e);return s};var of={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function af(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return ht(r)?r.call(e,s):r}function ut(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var Dn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,qs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fr={},ns={};function ee(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(ns[t]=n),e&&(ns[e[0]]=function(){return ut(n.apply(this,arguments),e[1],e[2])}),s&&(ns[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function lf(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function cf(t){var e=t.match(Dn),s,r;for(s=0,r=e.length;s<r;s++)ns[e[s]]?e[s]=ns[e[s]]:e[s]=lf(e[s]);return function(n){var i="",o;for(o=0;o<r;o++)i+=ht(e[o])?e[o].call(n,t):e[o];return i}}function Ks(t,e){return t.isValid()?(e=Xo(e,t.localeData()),Fr[e]=Fr[e]||cf(e),Fr[e](t)):t.localeData().invalidDate()}function Xo(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(qs.lastIndex=0;s>=0&&qs.test(t);)t=t.replace(qs,r),qs.lastIndex=0,s-=1;return t}var uf={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function df(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(Dn).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var ff="Invalid date";function hf(){return this._invalidDate}var mf="%d",_f=/\d{1,2}/;function pf(t){return this._ordinal.replace("%d",t)}var gf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function bf(t,e,s,r){var n=this._relativeTime[s];return ht(n)?n(t,e,s,r):n.replace(/%d/i,t)}function vf(t,e){var s=this._relativeTime[t>0?"future":"past"];return ht(s)?s(e):s.replace(/%s/i,e)}var to={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function tt(t){return typeof t=="string"?to[t]||to[t.toLowerCase()]:void 0}function Mn(t){var e={},s,r;for(r in t)be(t,r)&&(s=tt(r),s&&(e[s]=t[r]));return e}var wf={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function yf(t){var e=[],s;for(s in t)be(t,s)&&e.push({unit:s,priority:wf[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var ea=/\d/,Ke=/\d\d/,ta=/\d{3}/,Cn=/\d{4}/,kr=/[+-]?\d{6}/,Re=/\d\d?/,sa=/\d\d\d\d?/,ra=/\d\d\d\d\d\d?/,$r=/\d{1,3}/,Pn=/\d{1,4}/,Sr=/[+-]?\d{1,6}/,hs=/\d+/,Or=/[+-]?\d+/,kf=/Z|[+-]\d\d:?\d\d/gi,Tr=/Z|[+-]\d\d(?::?\d\d)?/gi,$f=/[+-]?\d+(\.\d{1,3})?/,Ns=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ms=/^[1-9]\d?/,En=/^([1-9]\d|\d)/,ar;ar={};function X(t,e,s){ar[t]=ht(e)?e:function(r,n){return r&&s?s:e}}function Sf(t,e){return be(ar,t)?ar[t](e._strict,e._locale):new RegExp(Of(t))}function Of(t){return kt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function kt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Qe(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function fe(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=Qe(e)),s}var sn={};function Te(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),St(e)&&(r=function(i,o){o[e]=fe(i)}),n=t.length,s=0;s<n;s++)sn[t[s]]=r}function xs(t,e){Te(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function Tf(t,e,s){e!=null&&be(sn,t)&&sn[t](e,s._a,s,t)}function Dr(t){return t%4===0&&t%100!==0||t%400===0}var Fe=0,vt=1,lt=2,Ne=3,nt=4,wt=5,Ut=6,Df=7,Mf=8;ee("Y",0,0,function(){var t=this.year();return t<=9999?ut(t,4):"+"+t});ee(0,["YY",2],0,function(){return this.year()%100});ee(0,["YYYY",4],0,"year");ee(0,["YYYYY",5],0,"year");ee(0,["YYYYYY",6,!0],0,"year");X("Y",Or);X("YY",Re,Ke);X("YYYY",Pn,Cn);X("YYYYY",Sr,kr);X("YYYYYY",Sr,kr);Te(["YYYYY","YYYYYY"],Fe);Te("YYYY",function(t,e){e[Fe]=t.length===2?F.parseTwoDigitYear(t):fe(t)});Te("YY",function(t,e){e[Fe]=F.parseTwoDigitYear(t)});Te("Y",function(t,e){e[Fe]=parseInt(t,10)});function Ss(t){return Dr(t)?366:365}F.parseTwoDigitYear=function(t){return fe(t)+(fe(t)>68?1900:2e3)};var na=_s("FullYear",!0);function Cf(){return Dr(this.year())}function _s(t,e){return function(s){return s!=null?(ia(this,t,s),F.updateOffset(this,e),this):Cs(this,t)}}function Cs(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function ia(t,e,s){var r,n,i,o,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,o=t.month(),l=t.date(),l=l===29&&o===1&&!Dr(i)?28:l,n?r.setUTCFullYear(i,o,l):r.setFullYear(i,o,l)}}function Pf(t){return t=tt(t),ht(this[t])?this[t]():this}function Ef(t,e){if(typeof t=="object"){t=Mn(t);var s=yf(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=tt(t),ht(this[t]))return this[t](e);return this}function Rf(t,e){return(t%e+e)%e}var Le;Array.prototype.indexOf?Le=Array.prototype.indexOf:Le=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Rn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=Rf(e,12);return t+=(e-s)/12,s===1?Dr(t)?29:28:31-s%7%2}ee("M",["MM",2],"Mo",function(){return this.month()+1});ee("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});ee("MMMM",0,0,function(t){return this.localeData().months(this,t)});X("M",Re,ms);X("MM",Re,Ke);X("MMM",function(t,e){return e.monthsShortRegex(t)});X("MMMM",function(t,e){return e.monthsRegex(t)});Te(["M","MM"],function(t,e){e[vt]=fe(t)-1});Te(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[vt]=n:oe(s).invalidMonth=t});var jf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),oa="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),aa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Af=Ns,If=Ns;function Lf(t,e){return t?it(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||aa).test(e)?"format":"standalone"][t.month()]:it(this._months)?this._months:this._months.standalone}function Yf(t,e){return t?it(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[aa.test(e)?"format":"standalone"][t.month()]:it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Nf(t,e,s){var r,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=ft([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=Le.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Le.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Le.call(this._shortMonthsParse,o),n!==-1?n:(n=Le.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Le.call(this._longMonthsParse,o),n!==-1?n:(n=Le.call(this._shortMonthsParse,o),n!==-1?n:null))}function xf(t,e,s){var r,n,i;if(this._monthsParseExact)return Nf.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=ft([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function la(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=fe(e);else if(e=t.localeData().monthsParse(e),!St(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,Rn(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function ca(t){return t!=null?(la(this,t),F.updateOffset(this,!0),this):Cs(this,"Month")}function Uf(){return Rn(this.year(),this.month())}function Ff(t){return this._monthsParseExact?(be(this,"_monthsRegex")||ua.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(be(this,"_monthsShortRegex")||(this._monthsShortRegex=Af),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Hf(t){return this._monthsParseExact?(be(this,"_monthsRegex")||ua.call(this),t?this._monthsStrictRegex:this._monthsRegex):(be(this,"_monthsRegex")||(this._monthsRegex=If),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ua(){function t(a,c){return c.length-a.length}var e=[],s=[],r=[],n,i,o,l;for(n=0;n<12;n++)i=ft([2e3,n]),o=kt(this.monthsShort(i,"")),l=kt(this.months(i,"")),e.push(o),s.push(l),r.push(l),r.push(o);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Wf(t,e,s,r,n,i,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,o),l}function Ps(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function lr(t,e,s){var r=7+e-s,n=(7+Ps(t,0,r).getUTCDay()-e)%7;return-n+r-1}function da(t,e,s,r,n){var i=(7+s-r)%7,o=lr(t,r,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=t-1,c=Ss(a)+l):l>Ss(t)?(a=t+1,c=l-Ss(t)):(a=t,c=l),{year:a,dayOfYear:c}}function Es(t,e,s){var r=lr(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,o;return n<1?(o=t.year()-1,i=n+$t(o,e,s)):n>$t(t.year(),e,s)?(i=n-$t(t.year(),e,s),o=t.year()+1):(o=t.year(),i=n),{week:i,year:o}}function $t(t,e,s){var r=lr(t,e,s),n=lr(t+1,e,s);return(Ss(t)-r+n)/7}ee("w",["ww",2],"wo","week");ee("W",["WW",2],"Wo","isoWeek");X("w",Re,ms);X("ww",Re,Ke);X("W",Re,ms);X("WW",Re,Ke);xs(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=fe(t)});function qf(t){return Es(t,this._week.dow,this._week.doy).week}var Bf={dow:0,doy:6};function Vf(){return this._week.dow}function zf(){return this._week.doy}function Gf(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Jf(t){var e=Es(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}ee("d",0,"do","day");ee("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});ee("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});ee("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});ee("e",0,0,"weekday");ee("E",0,0,"isoWeekday");X("d",Re);X("e",Re);X("E",Re);X("dd",function(t,e){return e.weekdaysMinRegex(t)});X("ddd",function(t,e){return e.weekdaysShortRegex(t)});X("dddd",function(t,e){return e.weekdaysRegex(t)});xs(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:oe(s).invalidWeekday=t});xs(["d","e","E"],function(t,e,s,r){e[r]=fe(t)});function Kf(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Zf(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function jn(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Qf="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),fa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xf="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),eh=Ns,th=Ns,sh=Ns;function rh(t,e){var s=it(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?jn(s,this._week.dow):t?s[t.day()]:s}function nh(t){return t===!0?jn(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function ih(t){return t===!0?jn(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function oh(t,e,s){var r,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=ft([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=Le.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Le.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Le.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Le.call(this._weekdaysParse,o),n!==-1||(n=Le.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Le.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Le.call(this._shortWeekdaysParse,o),n!==-1||(n=Le.call(this._weekdaysParse,o),n!==-1)?n:(n=Le.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Le.call(this._minWeekdaysParse,o),n!==-1||(n=Le.call(this._weekdaysParse,o),n!==-1)?n:(n=Le.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function ah(t,e,s){var r,n,i;if(this._weekdaysParseExact)return oh.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=ft([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function lh(t){if(!this.isValid())return t!=null?this:NaN;var e=Cs(this,"Day");return t!=null?(t=Kf(t,this.localeData()),this.add(t-e,"d")):e}function ch(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function uh(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Zf(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function dh(t){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(be(this,"_weekdaysRegex")||(this._weekdaysRegex=eh),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function fh(t){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(be(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=th),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function hh(t){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(be(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=sh),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function An(){function t(u,m){return m.length-u.length}var e=[],s=[],r=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ft([2e3,1]).day(i),l=kt(this.weekdaysMin(o,"")),a=kt(this.weekdaysShort(o,"")),c=kt(this.weekdays(o,"")),e.push(l),s.push(a),r.push(c),n.push(l),n.push(a),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function In(){return this.hours()%12||12}function mh(){return this.hours()||24}ee("H",["HH",2],0,"hour");ee("h",["hh",2],0,In);ee("k",["kk",2],0,mh);ee("hmm",0,0,function(){return""+In.apply(this)+ut(this.minutes(),2)});ee("hmmss",0,0,function(){return""+In.apply(this)+ut(this.minutes(),2)+ut(this.seconds(),2)});ee("Hmm",0,0,function(){return""+this.hours()+ut(this.minutes(),2)});ee("Hmmss",0,0,function(){return""+this.hours()+ut(this.minutes(),2)+ut(this.seconds(),2)});function ha(t,e){ee(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ha("a",!0);ha("A",!1);function ma(t,e){return e._meridiemParse}X("a",ma);X("A",ma);X("H",Re,En);X("h",Re,ms);X("k",Re,ms);X("HH",Re,Ke);X("hh",Re,Ke);X("kk",Re,Ke);X("hmm",sa);X("hmmss",ra);X("Hmm",sa);X("Hmmss",ra);Te(["H","HH"],Ne);Te(["k","kk"],function(t,e,s){var r=fe(t);e[Ne]=r===24?0:r});Te(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});Te(["h","hh"],function(t,e,s){e[Ne]=fe(t),oe(s).bigHour=!0});Te("hmm",function(t,e,s){var r=t.length-2;e[Ne]=fe(t.substr(0,r)),e[nt]=fe(t.substr(r)),oe(s).bigHour=!0});Te("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ne]=fe(t.substr(0,r)),e[nt]=fe(t.substr(r,2)),e[wt]=fe(t.substr(n)),oe(s).bigHour=!0});Te("Hmm",function(t,e,s){var r=t.length-2;e[Ne]=fe(t.substr(0,r)),e[nt]=fe(t.substr(r))});Te("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ne]=fe(t.substr(0,r)),e[nt]=fe(t.substr(r,2)),e[wt]=fe(t.substr(n))});function _h(t){return(t+"").toLowerCase().charAt(0)==="p"}var ph=/[ap]\.?m?\.?/i,gh=_s("Hours",!0);function bh(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var _a={calendar:of,longDateFormat:uf,invalidDate:ff,ordinal:mf,dayOfMonthOrdinalParse:_f,relativeTime:gf,months:jf,monthsShort:oa,week:Bf,weekdays:Qf,weekdaysMin:Xf,weekdaysShort:fa,meridiemParse:ph},je={},bs={},Rs;function vh(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function so(t){return t&&t.toLowerCase().replace("_","-")}function wh(t){for(var e=0,s,r,n,i;e<t.length;){for(i=so(t[e]).split("-"),s=i.length,r=so(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=Mr(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&vh(i,r)>=s-1)break;s--}e++}return Rs}function yh(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Mr(t){var e=null,s;if(je[t]===void 0&&typeof Xs<"u"&&Xs&&Xs.exports&&yh(t))try{e=Rs._abbr,s=require,s("./locale/"+t),Rt(e)}catch{je[t]=null}return je[t]}function Rt(t,e){var s;return t&&(Be(e)?s=Ot(t):s=Ln(t,e),s?Rs=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Rs._abbr}function Ln(t,e){if(e!==null){var s,r=_a;if(e.abbr=t,je[t]!=null)Qo("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=je[t]._config;else if(e.parentLocale!=null)if(je[e.parentLocale]!=null)r=je[e.parentLocale]._config;else if(s=Mr(e.parentLocale),s!=null)r=s._config;else return bs[e.parentLocale]||(bs[e.parentLocale]=[]),bs[e.parentLocale].push({name:t,config:e}),null;return je[t]=new Tn(en(r,e)),bs[t]&&bs[t].forEach(function(n){Ln(n.name,n.config)}),Rt(t),je[t]}else return delete je[t],null}function kh(t,e){if(e!=null){var s,r,n=_a;je[t]!=null&&je[t].parentLocale!=null?je[t].set(en(je[t]._config,e)):(r=Mr(t),r!=null&&(n=r._config),e=en(n,e),r==null&&(e.abbr=t),s=new Tn(e),s.parentLocale=je[t],je[t]=s),Rt(t)}else je[t]!=null&&(je[t].parentLocale!=null?(je[t]=je[t].parentLocale,t===Rt()&&Rt(t)):je[t]!=null&&delete je[t]);return je[t]}function Ot(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Rs;if(!it(t)){if(e=Mr(t),e)return e;t=[t]}return wh(t)}function $h(){return tn(je)}function Yn(t){var e,s=t._a;return s&&oe(t).overflow===-2&&(e=s[vt]<0||s[vt]>11?vt:s[lt]<1||s[lt]>Rn(s[Fe],s[vt])?lt:s[Ne]<0||s[Ne]>24||s[Ne]===24&&(s[nt]!==0||s[wt]!==0||s[Ut]!==0)?Ne:s[nt]<0||s[nt]>59?nt:s[wt]<0||s[wt]>59?wt:s[Ut]<0||s[Ut]>999?Ut:-1,oe(t)._overflowDayOfYear&&(e<Fe||e>lt)&&(e=lt),oe(t)._overflowWeeks&&e===-1&&(e=Df),oe(t)._overflowWeekday&&e===-1&&(e=Mf),oe(t).overflow=e),t}var Sh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oh=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Th=/Z|[+-]\d\d(?::?\d\d)?/,Bs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Hr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dh=/^\/?Date\((-?\d+)/i,Mh=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ch={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function pa(t){var e,s,r=t._i,n=Sh.exec(r)||Oh.exec(r),i,o,l,a,c=Bs.length,u=Hr.length;if(n){for(oe(t).iso=!0,e=0,s=c;e<s;e++)if(Bs[e][1].exec(n[1])){o=Bs[e][0],i=Bs[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(Hr[e][1].exec(n[3])){l=(n[2]||" ")+Hr[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(Th.exec(n[4]))a="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(a||""),xn(t)}else t._isValid=!1}function Ph(t,e,s,r,n,i){var o=[Eh(t),oa.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function Eh(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Rh(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jh(t,e,s){if(t){var r=fa.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return oe(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function Ah(t,e,s){if(t)return Ch[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function ga(t){var e=Mh.exec(Rh(t._i)),s;if(e){if(s=Ph(e[4],e[3],e[2],e[5],e[6],e[7]),!jh(e[1],s,t))return;t._a=s,t._tzm=Ah(e[8],e[9],e[10]),t._d=Ps.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),oe(t).rfc2822=!0}else t._isValid=!1}function Ih(t){var e=Dh.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(pa(t),t._isValid===!1)delete t._isValid;else return;if(ga(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:F.createFromInputFallback(t)}F.createFromInputFallback=et("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Qt(t,e,s){return t??e??s}function Lh(t){var e=new Date(F.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Nn(t){var e,s,r=[],n,i,o;if(!t._d){for(n=Lh(t),t._w&&t._a[lt]==null&&t._a[vt]==null&&Yh(t),t._dayOfYear!=null&&(o=Qt(t._a[Fe],n[Fe]),(t._dayOfYear>Ss(o)||t._dayOfYear===0)&&(oe(t)._overflowDayOfYear=!0),s=Ps(o,0,t._dayOfYear),t._a[vt]=s.getUTCMonth(),t._a[lt]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ne]===24&&t._a[nt]===0&&t._a[wt]===0&&t._a[Ut]===0&&(t._nextDay=!0,t._a[Ne]=0),t._d=(t._useUTC?Ps:Wf).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ne]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(oe(t).weekdayMismatch=!0)}}function Yh(t){var e,s,r,n,i,o,l,a,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,s=Qt(e.GG,t._a[Fe],Es(Ee(),1,4).year),r=Qt(e.W,1),n=Qt(e.E,1),(n<1||n>7)&&(a=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Es(Ee(),i,o),s=Qt(e.gg,t._a[Fe],c.year),r=Qt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),r<1||r>$t(s,i,o)?oe(t)._overflowWeeks=!0:a!=null?oe(t)._overflowWeekday=!0:(l=da(s,r,n,i,o),t._a[Fe]=l.year,t._dayOfYear=l.dayOfYear)}F.ISO_8601=function(){};F.RFC_2822=function(){};function xn(t){if(t._f===F.ISO_8601){pa(t);return}if(t._f===F.RFC_2822){ga(t);return}t._a=[],oe(t).empty=!0;var e=""+t._i,s,r,n,i,o,l=e.length,a=0,c,u;for(n=Xo(t._f,t._locale).match(Dn)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(Sf(i,t))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&oe(t).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),a+=r.length),ns[i]?(r?oe(t).empty=!1:oe(t).unusedTokens.push(i),Tf(i,r,t)):t._strict&&!r&&oe(t).unusedTokens.push(i);oe(t).charsLeftOver=l-a,e.length>0&&oe(t).unusedInput.push(e),t._a[Ne]<=12&&oe(t).bigHour===!0&&t._a[Ne]>0&&(oe(t).bigHour=void 0),oe(t).parsedDateParts=t._a.slice(0),oe(t).meridiem=t._meridiem,t._a[Ne]=Nh(t._locale,t._a[Ne],t._meridiem),c=oe(t).era,c!==null&&(t._a[Fe]=t._locale.erasConvertYear(c,t._a[Fe])),Nn(t),Yn(t)}function Nh(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function xh(t){var e,s,r,n,i,o,l=!1,a=t._f.length;if(a===0){oe(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=On({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],xn(e),Sn(e)&&(o=!0),i+=oe(e).charsLeftOver,i+=oe(e).unusedTokens.length*10,oe(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||o)&&(r=i,s=e,o&&(l=!0));Pt(t,s||e)}function Uh(t){if(!t._d){var e=Mn(t._i),s=e.day===void 0?e.date:e.day;t._a=Ko([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),Nn(t)}}function Fh(t){var e=new Ys(Yn(ba(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ba(t){var e=t._i,s=t._f;return t._locale=t._locale||Ot(t._l),e===null||s===void 0&&e===""?yr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ot(e)?new Ys(Yn(e)):(Ls(e)?t._d=e:it(s)?xh(t):s?xn(t):Hh(t),Sn(t)||(t._d=null),t))}function Hh(t){var e=t._i;Be(e)?t._d=new Date(F.now()):Ls(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Ih(t):it(e)?(t._a=Ko(e.slice(0),function(s){return parseInt(s,10)}),Nn(t)):Ft(e)?Uh(t):St(e)?t._d=new Date(e):F.createFromInputFallback(t)}function va(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Ft(t)&&$n(t)||it(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,Fh(i)}function Ee(t,e,s,r){return va(t,e,s,r,!1)}var Wh=et("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:yr()}),qh=et("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:yr()});function wa(t,e){var s,r;if(e.length===1&&it(e[0])&&(e=e[0]),!e.length)return Ee();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function Bh(){var t=[].slice.call(arguments,0);return wa("isBefore",t)}function Vh(){var t=[].slice.call(arguments,0);return wa("isAfter",t)}var zh=function(){return Date.now?Date.now():+new Date},vs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Gh(t){var e,s=!1,r,n=vs.length;for(e in t)if(be(t,e)&&!(Le.call(vs,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[vs[r]]){if(s)return!1;parseFloat(t[vs[r]])!==fe(t[vs[r]])&&(s=!0)}return!0}function Jh(){return this._isValid}function Kh(){return at(NaN)}function Cr(t){var e=Mn(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Gh(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=Ot(),this._bubble()}function Zs(t){return t instanceof Cr}function rn(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Zh(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,o;for(o=0;o<r;o++)fe(t[o])!==fe(e[o])&&i++;return i+n}function ya(t,e){ee(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+ut(~~(s/60),2)+e+ut(~~s%60,2)})}ya("Z",":");ya("ZZ","");X("Z",Tr);X("ZZ",Tr);Te(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Un(Tr,t)});var Qh=/([\+\-]|\d\d)/gi;function Un(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(Qh)||["-",0,0],i=+(n[1]*60)+fe(n[2]),i===0?0:n[0]==="+"?i:-i)}function Fn(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(ot(t)||Ls(t)?t.valueOf():Ee(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),F.updateOffset(s,!1),s):Ee(t).local()}function nn(t){return-Math.round(t._d.getTimezoneOffset())}F.updateOffset=function(){};function Xh(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Un(Tr,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=nn(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?Sa(this,at(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,F.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:nn(this)}function em(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function tm(t){return this.utcOffset(0,t)}function sm(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(nn(this),"m")),this}function rm(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Un(kf,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function nm(t){return this.isValid()?(t=t?Ee(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function im(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function om(){if(!Be(this._isDSTShifted))return this._isDSTShifted;var t={},e;return On(t,this),t=ba(t),t._a?(e=t._isUTC?ft(t._a):Ee(t._a),this._isDSTShifted=this.isValid()&&Zh(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function am(){return this.isValid()?!this._isUTC:!1}function lm(){return this.isValid()?this._isUTC:!1}function ka(){return this.isValid()?this._isUTC&&this._offset===0:!1}var cm=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,um=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function at(t,e){var s=t,r=null,n,i,o;return Zs(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:St(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=cm.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:fe(r[lt])*n,h:fe(r[Ne])*n,m:fe(r[nt])*n,s:fe(r[wt])*n,ms:fe(rn(r[Ut]*1e3))*n}):(r=um.exec(t))?(n=r[1]==="-"?-1:1,s={y:Yt(r[2],n),M:Yt(r[3],n),w:Yt(r[4],n),d:Yt(r[5],n),h:Yt(r[6],n),m:Yt(r[7],n),s:Yt(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(o=dm(Ee(s.from),Ee(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),i=new Cr(s),Zs(t)&&be(t,"_locale")&&(i._locale=t._locale),Zs(t)&&be(t,"_isValid")&&(i._isValid=t._isValid),i}at.fn=Cr.prototype;at.invalid=Kh;function Yt(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function ro(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function dm(t,e){var s;return t.isValid()&&e.isValid()?(e=Fn(e,t),t.isBefore(e)?s=ro(t,e):(s=ro(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function $a(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(Qo(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=at(s,r),Sa(this,n,t),this}}function Sa(t,e,s,r){var n=e._milliseconds,i=rn(e._days),o=rn(e._months);t.isValid()&&(r=r??!0,o&&la(t,Cs(t,"Month")+o*s),i&&ia(t,"Date",Cs(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&F.updateOffset(t,i||o))}var fm=$a(1,"add"),hm=$a(-1,"subtract");function Oa(t){return typeof t=="string"||t instanceof String}function mm(t){return ot(t)||Ls(t)||Oa(t)||St(t)||pm(t)||_m(t)||t===null||t===void 0}function _m(t){var e=Ft(t)&&!$n(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=r.length;for(n=0;n<o;n+=1)i=r[n],s=s||be(t,i);return e&&s}function pm(t){var e=it(t),s=!1;return e&&(s=t.filter(function(r){return!St(r)&&Oa(t)}).length===0),e&&s}function gm(t){var e=Ft(t)&&!$n(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||be(t,i);return e&&s}function bm(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function vm(t,e){arguments.length===1&&(arguments[0]?mm(arguments[0])?(t=arguments[0],e=void 0):gm(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||Ee(),r=Fn(s,this).startOf("day"),n=F.calendarFormat(this,r)||"sameElse",i=e&&(ht(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,Ee(s)))}function wm(){return new Ys(this)}function ym(t,e){var s=ot(t)?t:Ee(t);return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function km(t,e){var s=ot(t)?t:Ee(t);return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function $m(t,e,s,r){var n=ot(t)?t:Ee(t),i=ot(e)?e:Ee(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function Sm(t,e){var s=ot(t)?t:Ee(t),r;return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Om(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Tm(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Dm(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=Fn(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=tt(e),e){case"year":i=Qs(this,r)/12;break;case"month":i=Qs(this,r);break;case"quarter":i=Qs(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:Qe(i)}function Qs(t,e){if(t.date()<e.date())return-Qs(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}F.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";F.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Mm(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Cm(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Ks(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ht(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ks(s,"Z")):Ks(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Pm(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function Em(t){t||(t=this.isUtc()?F.defaultFormatUtc:F.defaultFormat);var e=Ks(this,t);return this.localeData().postformat(e)}function Rm(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Ee(t).isValid())?at({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function jm(t){return this.from(Ee(),t)}function Am(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Ee(t).isValid())?at({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Im(t){return this.to(Ee(),t)}function Ta(t){var e;return t===void 0?this._locale._abbr:(e=Ot(t),e!=null&&(this._locale=e),this)}var Da=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Ma(){return this._locale}var cr=1e3,is=60*cr,ur=60*is,Ca=(365*400+97)*24*ur;function os(t,e){return(t%e+e)%e}function Pa(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-Ca:new Date(t,e,s).valueOf()}function Ea(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-Ca:Date.UTC(t,e,s)}function Lm(t){var e,s;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ea:Pa,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=os(e+(this._isUTC?0:this.utcOffset()*is),ur);break;case"minute":e=this._d.valueOf(),e-=os(e,is);break;case"second":e=this._d.valueOf(),e-=os(e,cr);break}return this._d.setTime(e),F.updateOffset(this,!0),this}function Ym(t){var e,s;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ea:Pa,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ur-os(e+(this._isUTC?0:this.utcOffset()*is),ur)-1;break;case"minute":e=this._d.valueOf(),e+=is-os(e,is)-1;break;case"second":e=this._d.valueOf(),e+=cr-os(e,cr)-1;break}return this._d.setTime(e),F.updateOffset(this,!0),this}function Nm(){return this._d.valueOf()-(this._offset||0)*6e4}function xm(){return Math.floor(this.valueOf()/1e3)}function Um(){return new Date(this.valueOf())}function Fm(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Hm(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Wm(){return this.isValid()?this.toISOString():null}function qm(){return Sn(this)}function Bm(){return Pt({},oe(this))}function Vm(){return oe(this).overflow}function zm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ee("N",0,0,"eraAbbr");ee("NN",0,0,"eraAbbr");ee("NNN",0,0,"eraAbbr");ee("NNNN",0,0,"eraName");ee("NNNNN",0,0,"eraNarrow");ee("y",["y",1],"yo","eraYear");ee("y",["yy",2],0,"eraYear");ee("y",["yyy",3],0,"eraYear");ee("y",["yyyy",4],0,"eraYear");X("N",Hn);X("NN",Hn);X("NNN",Hn);X("NNNN",n_);X("NNNNN",i_);Te(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?oe(s).era=n:oe(s).invalidEra=t});X("y",hs);X("yy",hs);X("yyy",hs);X("yyyy",hs);X("yo",o_);Te(["y","yy","yyy","yyyy"],Fe);Te(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[Fe]=s._locale.eraYearOrdinalParse(t,n):e[Fe]=parseInt(t,10)});function Gm(t,e){var s,r,n,i=this._eras||Ot("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=F(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=F(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function Jm(t,e,s){var r,n,i=this.eras(),o,l,a;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(o=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),a=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(o===t)return i[r];break;case"NNNNN":if(a===t)return i[r];break}else if([o,l,a].indexOf(t)>=0)return i[r]}function Km(t,e){var s=t.since<=t.until?1:-1;return e===void 0?F(t.since).year():F(t.since).year()+(e-t.offset)*s}function Zm(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function Qm(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function Xm(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function e_(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-F(n[t].since).year())*s+n[t].offset;return this.year()}function t_(t){return be(this,"_erasNameRegex")||Wn.call(this),t?this._erasNameRegex:this._erasRegex}function s_(t){return be(this,"_erasAbbrRegex")||Wn.call(this),t?this._erasAbbrRegex:this._erasRegex}function r_(t){return be(this,"_erasNarrowRegex")||Wn.call(this),t?this._erasNarrowRegex:this._erasRegex}function Hn(t,e){return e.erasAbbrRegex(t)}function n_(t,e){return e.erasNameRegex(t)}function i_(t,e){return e.erasNarrowRegex(t)}function o_(t,e){return e._eraYearOrdinalRegex||hs}function Wn(){var t=[],e=[],s=[],r=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=kt(c[n].name),l=kt(c[n].abbr),a=kt(c[n].narrow),e.push(o),t.push(l),s.push(a),r.push(o),r.push(l),r.push(a);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}ee(0,["gg",2],0,function(){return this.weekYear()%100});ee(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pr(t,e){ee(0,[t,t.length],0,e)}Pr("gggg","weekYear");Pr("ggggg","weekYear");Pr("GGGG","isoWeekYear");Pr("GGGGG","isoWeekYear");X("G",Or);X("g",Or);X("GG",Re,Ke);X("gg",Re,Ke);X("GGGG",Pn,Cn);X("gggg",Pn,Cn);X("GGGGG",Sr,kr);X("ggggg",Sr,kr);xs(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=fe(t)});xs(["gg","GG"],function(t,e,s,r){e[r]=F.parseTwoDigitYear(t)});function a_(t){return Ra.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function l_(t){return Ra.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function c_(){return $t(this.year(),1,4)}function u_(){return $t(this.isoWeekYear(),1,4)}function d_(){var t=this.localeData()._week;return $t(this.year(),t.dow,t.doy)}function f_(){var t=this.localeData()._week;return $t(this.weekYear(),t.dow,t.doy)}function Ra(t,e,s,r,n){var i;return t==null?Es(this,r,n).year:(i=$t(t,r,n),e>i&&(e=i),h_.call(this,t,e,s,r,n))}function h_(t,e,s,r,n){var i=da(t,e,s,r,n),o=Ps(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ee("Q",0,"Qo","quarter");X("Q",ea);Te("Q",function(t,e){e[vt]=(fe(t)-1)*3});function m_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}ee("D",["DD",2],"Do","date");X("D",Re,ms);X("DD",Re,Ke);X("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Te(["D","DD"],lt);Te("Do",function(t,e){e[lt]=fe(t.match(Re)[0])});var ja=_s("Date",!0);ee("DDD",["DDDD",3],"DDDo","dayOfYear");X("DDD",$r);X("DDDD",ta);Te(["DDD","DDDD"],function(t,e,s){s._dayOfYear=fe(t)});function __(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}ee("m",["mm",2],0,"minute");X("m",Re,En);X("mm",Re,Ke);Te(["m","mm"],nt);var p_=_s("Minutes",!1);ee("s",["ss",2],0,"second");X("s",Re,En);X("ss",Re,Ke);Te(["s","ss"],wt);var g_=_s("Seconds",!1);ee("S",0,0,function(){return~~(this.millisecond()/100)});ee(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ee(0,["SSS",3],0,"millisecond");ee(0,["SSSS",4],0,function(){return this.millisecond()*10});ee(0,["SSSSS",5],0,function(){return this.millisecond()*100});ee(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ee(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ee(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ee(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});X("S",$r,ea);X("SS",$r,Ke);X("SSS",$r,ta);var Et,Aa;for(Et="SSSS";Et.length<=9;Et+="S")X(Et,hs);function b_(t,e){e[Ut]=fe(("0."+t)*1e3)}for(Et="S";Et.length<=9;Et+="S")Te(Et,b_);Aa=_s("Milliseconds",!1);ee("z",0,0,"zoneAbbr");ee("zz",0,0,"zoneName");function v_(){return this._isUTC?"UTC":""}function w_(){return this._isUTC?"Coordinated Universal Time":""}var W=Ys.prototype;W.add=fm;W.calendar=vm;W.clone=wm;W.diff=Dm;W.endOf=Ym;W.format=Em;W.from=Rm;W.fromNow=jm;W.to=Am;W.toNow=Im;W.get=Pf;W.invalidAt=Vm;W.isAfter=ym;W.isBefore=km;W.isBetween=$m;W.isSame=Sm;W.isSameOrAfter=Om;W.isSameOrBefore=Tm;W.isValid=qm;W.lang=Da;W.locale=Ta;W.localeData=Ma;W.max=qh;W.min=Wh;W.parsingFlags=Bm;W.set=Ef;W.startOf=Lm;W.subtract=hm;W.toArray=Fm;W.toObject=Hm;W.toDate=Um;W.toISOString=Cm;W.inspect=Pm;typeof Symbol<"u"&&Symbol.for!=null&&(W[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});W.toJSON=Wm;W.toString=Mm;W.unix=xm;W.valueOf=Nm;W.creationData=zm;W.eraName=Zm;W.eraNarrow=Qm;W.eraAbbr=Xm;W.eraYear=e_;W.year=na;W.isLeapYear=Cf;W.weekYear=a_;W.isoWeekYear=l_;W.quarter=W.quarters=m_;W.month=ca;W.daysInMonth=Uf;W.week=W.weeks=Gf;W.isoWeek=W.isoWeeks=Jf;W.weeksInYear=d_;W.weeksInWeekYear=f_;W.isoWeeksInYear=c_;W.isoWeeksInISOWeekYear=u_;W.date=ja;W.day=W.days=lh;W.weekday=ch;W.isoWeekday=uh;W.dayOfYear=__;W.hour=W.hours=gh;W.minute=W.minutes=p_;W.second=W.seconds=g_;W.millisecond=W.milliseconds=Aa;W.utcOffset=Xh;W.utc=tm;W.local=sm;W.parseZone=rm;W.hasAlignedHourOffset=nm;W.isDST=im;W.isLocal=am;W.isUtcOffset=lm;W.isUtc=ka;W.isUTC=ka;W.zoneAbbr=v_;W.zoneName=w_;W.dates=et("dates accessor is deprecated. Use date instead.",ja);W.months=et("months accessor is deprecated. Use month instead",ca);W.years=et("years accessor is deprecated. Use year instead",na);W.zone=et("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",em);W.isDSTShifted=et("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",om);function y_(t){return Ee(t*1e3)}function k_(){return Ee.apply(null,arguments).parseZone()}function Ia(t){return t}var ve=Tn.prototype;ve.calendar=af;ve.longDateFormat=df;ve.invalidDate=hf;ve.ordinal=pf;ve.preparse=Ia;ve.postformat=Ia;ve.relativeTime=bf;ve.pastFuture=vf;ve.set=nf;ve.eras=Gm;ve.erasParse=Jm;ve.erasConvertYear=Km;ve.erasAbbrRegex=s_;ve.erasNameRegex=t_;ve.erasNarrowRegex=r_;ve.months=Lf;ve.monthsShort=Yf;ve.monthsParse=xf;ve.monthsRegex=Hf;ve.monthsShortRegex=Ff;ve.week=qf;ve.firstDayOfYear=zf;ve.firstDayOfWeek=Vf;ve.weekdays=rh;ve.weekdaysMin=ih;ve.weekdaysShort=nh;ve.weekdaysParse=ah;ve.weekdaysRegex=dh;ve.weekdaysShortRegex=fh;ve.weekdaysMinRegex=hh;ve.isPM=_h;ve.meridiem=bh;function dr(t,e,s,r){var n=Ot(),i=ft().set(r,e);return n[s](i,t)}function La(t,e,s){if(St(t)&&(e=t,t=void 0),t=t||"",e!=null)return dr(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=dr(t,r,s,"month");return n}function qn(t,e,s,r){typeof t=="boolean"?(St(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,St(e)&&(s=e,e=void 0),e=e||"");var n=Ot(),i=t?n._week.dow:0,o,l=[];if(s!=null)return dr(e,(s+i)%7,r,"day");for(o=0;o<7;o++)l[o]=dr(e,(o+i)%7,r,"day");return l}function $_(t,e){return La(t,e,"months")}function S_(t,e){return La(t,e,"monthsShort")}function O_(t,e,s){return qn(t,e,s,"weekdays")}function T_(t,e,s){return qn(t,e,s,"weekdaysShort")}function D_(t,e,s){return qn(t,e,s,"weekdaysMin")}Rt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=fe(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});F.lang=et("moment.lang is deprecated. Use moment.locale instead.",Rt);F.langData=et("moment.langData is deprecated. Use moment.localeData instead.",Ot);var mt=Math.abs;function M_(){var t=this._data;return this._milliseconds=mt(this._milliseconds),this._days=mt(this._days),this._months=mt(this._months),t.milliseconds=mt(t.milliseconds),t.seconds=mt(t.seconds),t.minutes=mt(t.minutes),t.hours=mt(t.hours),t.months=mt(t.months),t.years=mt(t.years),this}function Ya(t,e,s,r){var n=at(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function C_(t,e){return Ya(this,t,e,1)}function P_(t,e){return Ya(this,t,e,-1)}function no(t){return t<0?Math.floor(t):Math.ceil(t)}function E_(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,o,l,a;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=no(on(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=Qe(t/1e3),r.seconds=n%60,i=Qe(n/60),r.minutes=i%60,o=Qe(i/60),r.hours=o%24,e+=Qe(o/24),a=Qe(Na(e)),s+=a,e-=no(on(a)),l=Qe(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function Na(t){return t*4800/146097}function on(t){return t*146097/4800}function R_(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=tt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+Na(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(on(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function Tt(t){return function(){return this.as(t)}}var xa=Tt("ms"),j_=Tt("s"),A_=Tt("m"),I_=Tt("h"),L_=Tt("d"),Y_=Tt("w"),N_=Tt("M"),x_=Tt("Q"),U_=Tt("y"),F_=xa;function H_(){return at(this)}function W_(t){return t=tt(t),this.isValid()?this[t+"s"]():NaN}function Wt(t){return function(){return this.isValid()?this._data[t]:NaN}}var q_=Wt("milliseconds"),B_=Wt("seconds"),V_=Wt("minutes"),z_=Wt("hours"),G_=Wt("days"),J_=Wt("months"),K_=Wt("years");function Z_(){return Qe(this.days()/7)}var _t=Math.round,Xt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Q_(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function X_(t,e,s,r){var n=at(t).abs(),i=_t(n.as("s")),o=_t(n.as("m")),l=_t(n.as("h")),a=_t(n.as("d")),c=_t(n.as("M")),u=_t(n.as("w")),m=_t(n.as("y")),_=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||o<=1&&["m"]||o<s.m&&["mm",o]||l<=1&&["h"]||l<s.h&&["hh",l]||a<=1&&["d"]||a<s.d&&["dd",a];return s.w!=null&&(_=_||u<=1&&["w"]||u<s.w&&["ww",u]),_=_||c<=1&&["M"]||c<s.M&&["MM",c]||m<=1&&["y"]||["yy",m],_[2]=e,_[3]=+t>0,_[4]=r,Q_.apply(null,_)}function ep(t){return t===void 0?_t:typeof t=="function"?(_t=t,!0):!1}function tp(t,e){return Xt[t]===void 0?!1:e===void 0?Xt[t]:(Xt[t]=e,t==="s"&&(Xt.ss=e-1),!0)}function sp(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Xt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Xt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=X_(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Wr=Math.abs;function Jt(t){return(t>0)-(t<0)||+t}function Er(){if(!this.isValid())return this.localeData().invalidDate();var t=Wr(this._milliseconds)/1e3,e=Wr(this._days),s=Wr(this._months),r,n,i,o,l=this.asSeconds(),a,c,u,m;return l?(r=Qe(t/60),n=Qe(r/60),t%=60,r%=60,i=Qe(s/12),s%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=Jt(this._months)!==Jt(l)?"-":"",u=Jt(this._days)!==Jt(l)?"-":"",m=Jt(this._milliseconds)!==Jt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?m+n+"H":"")+(r?m+r+"M":"")+(t?m+o+"S":"")):"P0D"}var _e=Cr.prototype;_e.isValid=Jh;_e.abs=M_;_e.add=C_;_e.subtract=P_;_e.as=R_;_e.asMilliseconds=xa;_e.asSeconds=j_;_e.asMinutes=A_;_e.asHours=I_;_e.asDays=L_;_e.asWeeks=Y_;_e.asMonths=N_;_e.asQuarters=x_;_e.asYears=U_;_e.valueOf=F_;_e._bubble=E_;_e.clone=H_;_e.get=W_;_e.milliseconds=q_;_e.seconds=B_;_e.minutes=V_;_e.hours=z_;_e.days=G_;_e.weeks=Z_;_e.months=J_;_e.years=K_;_e.humanize=sp;_e.toISOString=Er;_e.toString=Er;_e.toJSON=Er;_e.locale=Ta;_e.localeData=Ma;_e.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Er);_e.lang=Da;ee("X",0,0,"unix");ee("x",0,0,"valueOf");X("x",Or);X("X",$f);Te("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});Te("x",function(t,e,s){s._d=new Date(fe(t))});//! moment.js
F.version="2.30.1";sf(Ee);F.fn=W;F.min=Bh;F.max=Vh;F.now=zh;F.utc=ft;F.unix=y_;F.months=$_;F.isDate=Ls;F.locale=Rt;F.invalid=yr;F.duration=at;F.isMoment=ot;F.weekdays=O_;F.parseZone=k_;F.localeData=Ot;F.isDuration=Zs;F.monthsShort=S_;F.weekdaysMin=D_;F.defineLocale=Ln;F.updateLocale=kh;F.locales=$h;F.weekdaysShort=T_;F.normalizeUnits=tt;F.relativeTimeRounding=ep;F.relativeTimeThreshold=tp;F.calendarFormat=bm;F.prototype=W;F.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function rp(t){let e,s,r,n,i,o,l,a,c,u,m,_;const g=t[4].default,p=fr(g,t,t[3],null);return{c(){e=h("div"),s=h("label"),r=se(t[0]),n=v(),i=h("div"),p&&p.c(),o=v(),l=h("div"),a=h("button"),c=se(t[2]),d(s,"class","col-sm-4 col-md-3 col-form-label"),d(s,"for",t[1]),d(i,"class","col-sm-5 col-md-6 col-9"),d(a,"class","w-100 btn btn-outline-primary"),d(l,"class","col-sm-3 col-md-3 col-auto"),d(e,"class","mb-4 row justify-content-center")},m(b,y){E(b,e,y),f(e,s),f(s,r),f(e,n),f(e,i),p&&p.m(i,null),f(e,o),f(e,l),f(l,a),f(a,c),u=!0,m||(_=z(a,"click",t[5]),m=!0)},p(b,[y]){(!u||y&1)&&le(r,b[0]),(!u||y&2)&&d(s,"for",b[1]),p&&p.p&&(!u||y&8)&&mr(p,g,b,b[3],u?hr(g,b[3],y,null):_r(b[3]),null),(!u||y&4)&&le(c,b[2])},i(b){u||(O(p,b),u=!0)},o(b){M(p,b),u=!1},d(b){b&&P(e),p&&p.d(b),m=!1,_()}}}function np(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){nr.call(this,t,c)}return t.$$set=c=>{"label"in c&&s(0,i=c.label),"id"in c&&s(1,o=c.id),"button"in c&&s(2,l=c.button),"$$scope"in c&&s(3,n=c.$$scope)},[i,o,l,n,r,a]}class ip extends $e{constructor(e){super(),ke(this,e,np,rp,ye,{label:0,id:1,button:2})}}function op(t){let e,s,r,n,i,o,l,a;return{c(){e=h("div"),s=h("div"),r=h("b"),n=se(t[0]),i=se(":"),o=v(),l=h("div"),a=se(t[1]),d(s,"class","col-sm-4 col-md-4"),d(l,"class","col-sm-8 col-md-8"),d(e,"class","mb-2 row")},m(c,u){E(c,e,u),f(e,s),f(s,r),f(r,n),f(r,i),f(e,o),f(e,l),f(l,a)},p(c,[u]){u&1&&le(n,c[0]),u&2&&le(a,c[1])},i:N,o:N,d(c){c&&P(e)}}}function ap(t,e,s){let{key:r}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&s(0,r=i.key),"value"in i&&s(1,n=i.value)},[r,n]}class We extends $e{constructor(e){super(),ke(this,e,ap,op,ye,{key:0,value:1})}}function lp(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.textContent="Cannot Find Reservation",d(e,"class",s="form-control "+t[9]),d(e,"type","number"),d(e,"id","reserve"),d(e,"placeholder","e.g 300xxx"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[4]),E(l,r,a),E(l,n,a),i||(o=[z(e,"input",t[18]),z(e,"keyup",t[19])],i=!0)},p(l,a){a[0]&512&&s!==(s="form-control "+l[9])&&d(e,"class",s),a[0]&16&&pr(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(P(e),P(r),P(n)),i=!1,Se(o)}}}function cp(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.textContent="Cannot Find Student",d(e,"class",s="form-control "+t[10]),d(e,"type","text"),d(e,"id","stud-id"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[5]),E(l,r,a),E(l,n,a),i||(o=[z(e,"input",t[20]),z(e,"keyup",t[21])],i=!0)},p(l,a){a[0]&1024&&s!==(s="form-control "+l[10])&&d(e,"class",s),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(P(e),P(r),P(n)),i=!1,Se(o)}}}function up(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.textContent="Cannot Find Book",d(e,"class",s="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-barcode"),d(e,"placeholder","e.g 1000xxx"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[6]),E(l,r,a),E(l,n,a),i||(o=[z(e,"input",t[22]),z(e,"keyup",t[23])],i=!0)},p(l,a){a[0]&2048&&s!==(s="form-control "+l[11])&&d(e,"class",s),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(P(e),P(r),P(n)),i=!1,Se(o)}}}function io(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D;return n=new We({props:{key:"Borrow ID",value:t[3]}}),o=new We({props:{key:"Name",value:t[7]}}),a=new We({props:{key:"Book Title",value:t[8]+" ("+t[6]+")"}}),u=new We({props:{key:"Staff Name",value:"Francis James E. Salles ("+t[14]+")"}}),_=new We({props:{key:"Borrow Date",value:F(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new We({props:{key:"Return Due",value:F(t[1]).format("MMMM DD, YYYY")+" ("+t[12]+" days)"}}),{c(){e=h("div"),s=h("h3"),s.textContent="Borrow Preview",r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),x(_.$$.fragment),g=v(),x(p.$$.fragment),b=v(),y=h("div"),w=h("button"),w.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',d(s,"class","py-4 text-center"),d(w,"class","btn btn-secondary"),d(y,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m($,T){E($,e,T),f(e,s),f(e,r),L(n,e,null),f(e,i),L(o,e,null),f(e,l),L(a,e,null),f(e,c),L(u,e,null),f(e,m),L(_,e,null),f(e,g),L(p,e,null),f(e,b),f(e,y),f(y,w),S=!0,k||(D=z(w,"click",t[17]),k=!0)},p($,T){const R={};T[0]&8&&(R.value=$[3]),n.$set(R);const I={};T[0]&128&&(I.value=$[7]),o.$set(I);const q={};T[0]&320&&(q.value=$[8]+" ("+$[6]+")"),a.$set(q);const Z={};T[0]&1&&(Z.value=F($[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(Z);const B={};T[0]&4098&&(B.value=F($[1]).format("MMMM DD, YYYY")+" ("+$[12]+" days)"),p.$set(B)},i($){S||(O(n.$$.fragment,$),O(o.$$.fragment,$),O(a.$$.fragment,$),O(u.$$.fragment,$),O(_.$$.fragment,$),O(p.$$.fragment,$),S=!0)},o($){M(n.$$.fragment,$),M(o.$$.fragment,$),M(a.$$.fragment,$),M(u.$$.fragment,$),M(_.$$.fragment,$),M(p.$$.fragment,$),S=!1},d($){$&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),Y(p),k=!1,D()}}}function dp(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C,U,te,G,K,Q,me,ue,ae,Oe,ge;s=new dt({props:{text:"Borrow Book"}}),o=new ip({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[lp]},$$scope:{ctx:t}}}),o.$on("click",t[16]),u=new Ae({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[cp]},$$scope:{ctx:t}}}),_=new Ae({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[up]},$$scope:{ctx:t}}});let de=t[2]&&io(t);return{c(){e=h("main"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),x(o.$$.fragment),l=v(),a=h("hr"),c=v(),x(u.$$.fragment),m=v(),x(_.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Borrow Date:",y=v(),w=h("div"),S=h("input"),D=v(),$=h("div"),T=h("button"),T.textContent="Today",R=v(),I=h("div"),q=h("label"),q.textContent="Return Due:",Z=v(),B=h("div"),V=h("input"),A=v(),H=h("div"),C=h("button"),C.textContent=`~${an} Days`,U=v(),te=h("div"),G=h("button"),G.innerHTML='<i class="bi bi-receipt"></i> Borrow',K=v(),Q=h("a"),Q.innerHTML='<i class="bi bi-x-circle"></i> Cancel',me=v(),de&&de.c(),d(a,"class","mb-4"),d(b,"class","col-sm-4 col-md-3 col-form-label"),d(b,"for","borrow-date"),d(S,"class","form-control"),d(S,"type","datetime-local"),d(S,"id","borrow-date"),d(S,"max",k=F(t[1]).format("YYYY-MM-DD HH:mm")),d(w,"class","col-sm-5 col-md-6 col-7"),d(T,"class","w-100 btn btn-outline-primary"),d($,"class","col-sm-3 col-md-3 col-auto"),d(p,"class","mb-4 row justify-content-center"),d(q,"class","col-sm-4 col-md-3 col-form-label"),d(q,"for","return-date"),d(V,"class","form-control"),d(V,"type","date"),d(V,"id","return-date"),d(V,"min",j=F(t[0]).format("YYYY-MM-DD")),d(B,"class","col-sm-5 col-md-6 col-7"),d(C,"class","w-100 btn btn-outline-primary"),d(H,"class","col-sm-3 col-md-3 col-auto"),d(I,"class","mb-4 row justify-content-center"),d(G,"class","btn btn-success"),d(Q,"href","./#/"),d(Q,"class","btn btn-danger"),d(te,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(ie,we){E(ie,e,we),L(s,e,null),f(e,r),f(e,n),f(n,i),L(o,i,null),f(i,l),f(i,a),f(i,c),L(u,i,null),f(i,m),L(_,i,null),f(i,g),f(i,p),f(p,b),f(p,y),f(p,w),f(w,S),J(S,t[0]),f(p,D),f(p,$),f($,T),f(i,R),f(i,I),f(I,q),f(I,Z),f(I,B),f(B,V),J(V,t[1]),f(I,A),f(I,H),f(H,C),f(i,U),f(i,te),f(te,G),f(te,K),f(te,Q),f(n,me),de&&de.m(n,null),ae=!0,Oe||(ge=[z(S,"input",t[24]),z(T,"click",t[25]),z(V,"input",t[26]),z(C,"click",t[27]),z(G,"click",t[28])],Oe=!0)},p(ie,we){const xe={};we[0]&528|we[1]&2&&(xe.$$scope={dirty:we,ctx:ie}),o.$set(xe);const pe={};we[0]&1056|we[1]&2&&(pe.$$scope={dirty:we,ctx:ie}),u.$set(pe);const re={};we[0]&2112|we[1]&2&&(re.$$scope={dirty:we,ctx:ie}),_.$set(re),(!ae||we[0]&2&&k!==(k=F(ie[1]).format("YYYY-MM-DD HH:mm")))&&d(S,"max",k),we[0]&1&&J(S,ie[0]),(!ae||we[0]&1&&j!==(j=F(ie[0]).format("YYYY-MM-DD")))&&d(V,"min",j),we[0]&2&&J(V,ie[1]),ie[2]?de?(de.p(ie,we),we[0]&4&&O(de,1)):(de=io(ie),de.c(),O(de,1),de.m(n,null)):de&&(De(),M(de,1,1,()=>{de=null}),Me())},i(ie){ae||(O(s.$$.fragment,ie),O(o.$$.fragment,ie),O(u.$$.fragment,ie),O(_.$$.fragment,ie),O(de),ie&&(ue||Ie(()=>{ue=Ve(e,ze,{duration:500}),ue.start()})),ae=!0)},o(ie){M(s.$$.fragment,ie),M(o.$$.fragment,ie),M(u.$$.fragment,ie),M(_.$$.fragment,ie),M(de),ae=!1},d(ie){ie&&P(e),Y(s),Y(o),Y(u),Y(_),de&&de.d(),Oe=!1,Se(ge)}}}const an=14;function oo(){return"400"+Math.floor(Math.random()*9e3)}function fp(t,e,s){let r,n;cn(t,Po,G=>s(29,n=G));const i=F().format("YYYY-MM-DD HH:mm");let o=i,l=F(i).add(an,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,m,_,g;const p=new URLSearchParams(n);m=p.get("reserve_id")||"",g=p.get("barcode")||"";let b,y,w,S,k;async function D(){const{data:G,error:K}=await ne.from("account_details").select("fname, lname").eq("user_id",_).single();K?(s(10,S="is-invalid"),console.error(K)):s(7,b=`${G.fname} ${G.lname}`);const{data:Q,error:me}=await ne.from("library_holdings").select("books(title)").eq("barcode",g).single();me||!Q?(s(11,k="is-invalid"),console.error(me)):s(8,y=Q.books.title),(!me||!K)&&(s(3,u=await R()),s(2,c=!c))}async function $(){const{data:G,error:K}=await ne.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();K||!G?(s(9,w="is-invalid"),console.error(K)):(s(5,_=G.stud_id),s(6,g=G.library_holdings.barcode),D())}async function T(){const{data:G,error:K}=await ne.from("library_holdings").select("holding_id").eq("barcode",g).single();K&&console.error(K);const Q=F(o).format("YYYY-MM-DDTHH:MMZ"),me=F(l).format("YYYY-MM-DDTHH:MMZ"),{error:ue}=await ne.from("book_borrow").insert({borrow_id:u,stud_id:_,holding_id:G.holding_id,staff_id:a,borrow_date:Q,due_date:me});if(ue){console.error(ue);return}const{data:ae,error:Oe}=await ne.from("book_reservation").update({staff_id:a,release_date:Q,active:!1}).eq("active",!0).eq("holding_id",G.holding_id).select();if(console.log("updated Rows:",ae),Oe){console.error(Oe);return}const{error:ge}=await ne.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",G.holding_id);ge&&console.error(ge)}async function R(){let G=oo();const{data:K,error:Q}=await ne.from("book_borrow").select().eq("borrow_id",G);return console.log(K),K.length!=0&&(G=oo(),console.log("exists")),console.log(G),G}function I(){m=pr(this.value),s(4,m)}const q=()=>s(9,w="");function Z(){_=this.value,s(5,_)}const B=()=>s(10,S="");function V(){g=this.value,s(6,g)}const j=()=>s(11,k="");function A(){o=this.value,s(0,o)}const H=()=>s(0,o=i);function C(){l=this.value,s(1,l)}const U=()=>s(1,l=F(o).add(an,"days").format("YYYY-MM-DD")),te=()=>{D()};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(12,r=F(l).diff(F(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,m,_,g,b,y,w,S,k,r,i,a,D,$,T,I,q,Z,B,V,j,A,H,C,U,te]}class hp extends $e{constructor(e){super(),ke(this,e,fp,dp,ye,{},null,[-1,-1])}}function mp(t){let e,s,r,n,i,o;return{c(){e=h("input"),r=v(),n=h("div"),n.textContent="Borrow ID not found.",d(e,"class",s="form-control "+t[3]),d(e,"type","text"),d(e,"id","book-id"),d(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,t[2]),E(l,r,a),E(l,n,a),i||(o=[z(e,"keyup",t[18]),z(e,"input",t[19])],i=!0)},p(l,a){a&8&&s!==(s="form-control "+l[3])&&d(e,"class",s),a&4&&e.value!==l[2]&&J(e,l[2])},d(l){l&&(P(e),P(r),P(n)),i=!1,Se(o)}}}function _p(t){let e,s,r,n,i,o,l;return{c(){e=h("select"),s=h("option"),s.textContent="New",r=h("option"),r.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",s.__value="New",J(s,s.__value),r.__value="Good",J(r,r.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),d(e,"class","form-select"),d(e,"id","book-condition"),t[11]===void 0&&Ie(()=>t[20].call(e))},m(a,c){E(a,e,c),f(e,s),f(e,r),f(e,n),f(e,i),Xn(e,t[11],!0),o||(l=z(e,"change",t[20]),o=!0)},p(a,c){c&2048&&Xn(e,a[11])},d(a){a&&P(e),o=!1,l()}}}function pp(t){let e,s,r;return{c(){e=h("textarea"),d(e,"class","form-control"),d(e,"rows","3"),d(e,"id","book-note")},m(n,i){E(n,e,i),J(e,t[10]),s||(r=z(e,"input",t[21]),s=!0)},p(n,i){i&1024&&J(e,n[10])},d(n){n&&P(e),s=!1,r()}}}function ao(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V;n=new We({props:{key:"Borrow ID",value:t[2]}}),o=new We({props:{key:"Return ID",value:t[5]}}),a=new We({props:{key:"Name",value:t[9]+" ("+t[8]+")"}}),u=new We({props:{key:"Book Title",value:t[6]+" ("+t[7]+")"}}),_=new We({props:{key:"Condition",value:t[11]}});let j=t[10]&&lo(t);b=new We({props:{key:"Received by",value:"Francis James E. Salles ("+t[15]+")"}}),w=new We({props:{key:"Return Due",value:F(t[1]).format("MMMM DD, YYYY")}}),k=new We({props:{key:"Return Date",value:F(t[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(t[13]>0?`+${t[13]}`:t[13])+" days)"}});let A=t[13]<0&&co(t),H=t[13]<0&&uo();return{c(){e=h("div"),s=h("h3"),s.textContent="Return Preview",r=v(),x(n.$$.fragment),i=v(),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),x(_.$$.fragment),g=v(),j&&j.c(),p=v(),x(b.$$.fragment),y=v(),x(w.$$.fragment),S=v(),x(k.$$.fragment),D=v(),A&&A.c(),$=v(),T=h("div"),R=h("button"),R.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',I=v(),H&&H.c(),d(s,"class","py-4 text-center"),d(R,"class","btn btn-success"),d(T,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(C,U){E(C,e,U),f(e,s),f(e,r),L(n,e,null),f(e,i),L(o,e,null),f(e,l),L(a,e,null),f(e,c),L(u,e,null),f(e,m),L(_,e,null),f(e,g),j&&j.m(e,null),f(e,p),L(b,e,null),f(e,y),L(w,e,null),f(e,S),L(k,e,null),f(e,D),A&&A.m(e,null),f(e,$),f(e,T),f(T,R),f(T,I),H&&H.m(T,null),Z=!0,B||(V=z(R,"click",t[17]),B=!0)},p(C,U){const te={};U&4&&(te.value=C[2]),n.$set(te);const G={};U&32&&(G.value=C[5]),o.$set(G);const K={};U&768&&(K.value=C[9]+" ("+C[8]+")"),a.$set(K);const Q={};U&192&&(Q.value=C[6]+" ("+C[7]+")"),u.$set(Q);const me={};U&2048&&(me.value=C[11]),_.$set(me),C[10]?j?(j.p(C,U),U&1024&&O(j,1)):(j=lo(C),j.c(),O(j,1),j.m(e,p)):j&&(De(),M(j,1,1,()=>{j=null}),Me());const ue={};U&2&&(ue.value=F(C[1]).format("MMMM DD, YYYY")),w.$set(ue);const ae={};U&8193&&(ae.value=F(C[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(C[13]>0?`+${C[13]}`:C[13])+" days)"),k.$set(ae),C[13]<0?A?A.p(C,U):(A=co(C),A.c(),A.m(e,$)):A&&(A.d(1),A=null),C[13]<0?H||(H=uo(),H.c(),H.m(T,null)):H&&(H.d(1),H=null)},i(C){Z||(O(n.$$.fragment,C),O(o.$$.fragment,C),O(a.$$.fragment,C),O(u.$$.fragment,C),O(_.$$.fragment,C),O(j),O(b.$$.fragment,C),O(w.$$.fragment,C),O(k.$$.fragment,C),C&&Ie(()=>{Z&&(q||(q=ls(e,ds,{duration:400,y:-60},!0)),q.run(1))}),Z=!0)},o(C){M(n.$$.fragment,C),M(o.$$.fragment,C),M(a.$$.fragment,C),M(u.$$.fragment,C),M(_.$$.fragment,C),M(j),M(b.$$.fragment,C),M(w.$$.fragment,C),M(k.$$.fragment,C),C&&(q||(q=ls(e,ds,{duration:400,y:-60},!1)),q.run(0)),Z=!1},d(C){C&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),j&&j.d(),Y(b),Y(w),Y(k),A&&A.d(),H&&H.d(),C&&q&&q.end(),B=!1,V()}}}function lo(t){let e,s;return e=new We({props:{key:"Return Note",value:t[10]}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&1024&&(i.value=r[10]),e.$set(i)},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function co(t){let e,s,r,n,i=t[13]*-50+"",o,l;return{c(){e=h("div"),s=h("div"),s.innerHTML="<b>Late Return Fee:</b>",r=v(),n=h("div"),o=se(i),l=se(" pesos"),d(s,"class","col-sm-4 col-md-4"),d(n,"class","col-sm-8 col-md-8"),d(e,"class","mb-2 row")},m(a,c){E(a,e,c),f(e,s),f(e,r),f(e,n),f(n,o),f(n,l)},p(a,c){c&8192&&i!==(i=a[13]*-50+"")&&le(o,i)},d(a){a&&P(e)}}}function uo(t){let e,s,r;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay',d(e,"class","btn btn-danger"),d(e,"data-bs-toggle","modal"),d(e,"data-bs-target","#payModal")},m(n,i){E(n,e,i),s||(r=z(e,"click",yp),s=!0)},d(n){n&&P(e),s=!1,r()}}}function gp(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","ref")},m(n,i){E(n,e,i),J(e,t[12]),s||(r=z(e,"input",t[24]),s=!0)},p(n,i){i&4096&&e.value!==n[12]&&J(e,n[12])},d(n){n&&P(e),s=!1,r()}}}function bp(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","ref")},m(n,i){E(n,e,i),J(e,t[12]),s||(r=z(e,"input",t[25]),s=!0)},p(n,i){i&4096&&e.value!==n[12]&&J(e,n[12])},d(n){n&&P(e),s=!1,r()}}}function vp(t){let e,s,r,n,i;return s=new Ae({props:{label:"Ref No.",id:"ref",$$slots:{default:[gp]},$$scope:{ctx:t}}}),n=new Ae({props:{label:"Ref No.",id:"ref",$$slots:{default:[bp]},$$scope:{ctx:t}}}),{c(){e=h("div"),x(s.$$.fragment),r=v(),x(n.$$.fragment),d(e,"class","container row ")},m(o,l){E(o,e,l),L(s,e,null),f(e,r),L(n,e,null),i=!0},p(o,l){const a={};l&1073745920&&(a.$$scope={dirty:l,ctx:o}),s.$set(a);const c={};l&1073745920&&(c.$$scope={dirty:l,ctx:o}),n.$set(c)},i(o){i||(O(s.$$.fragment,o),O(n.$$.fragment,o),i=!0)},o(o){M(s.$$.fragment,o),M(n.$$.fragment,o),i=!1},d(o){o&&P(e),Y(s),Y(n)}}}function wp(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H,C,U,te;s=new dt({props:{text:"Return Book"}}),o=new Ae({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[mp]},$$scope:{ctx:t}}}),a=new Ae({props:{label:"Condition:",id:"book-condition",$$slots:{default:[_p]},$$scope:{ctx:t}}}),u=new Ae({props:{label:"Note:",id:"book-note",$$slots:{default:[pp]},$$scope:{ctx:t}}});let G=t[4]&&ao(t);return A=new Lu({props:{title:"Process Payment",id:"payModal",pButton:"Done",$$slots:{default:[vp]},$$scope:{ctx:t}}}),A.$on("click",t[26]),{c(){e=h("main"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),_=h("div"),g=h("label"),g.textContent="Return Time:",p=v(),b=h("div"),y=h("input"),w=v(),S=h("div"),k=h("button"),k.textContent="Now",D=v(),$=h("div"),T=h("button"),R=h("i"),I=se(" Preview"),Z=v(),B=h("a"),B.innerHTML='<i class="bi bi-x-circle"></i> Cancel',V=v(),G&&G.c(),j=v(),x(A.$$.fragment),d(g,"class","col-sm-4 col-md-3 col-form-label"),d(g,"for","return-time"),d(y,"class","form-control"),d(y,"type","datetime-local"),d(y,"id","return-time"),d(b,"class","col-sm-5 col-md-6 col-7"),d(k,"class","w-100 btn btn-outline-primary"),d(S,"class","col-sm-3 col-md-3 col-auto"),d(_,"class","mb-4 row justify-content-center"),d(R,"class","bi bi-receipt"),d(T,"class",q="btn btn-"+(t[4]?"secondary":"success")),d(B,"href","./#/"),d(B,"class","btn btn-danger"),d($,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-sm-4"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(K,Q){E(K,e,Q),L(s,e,null),f(e,r),f(e,n),f(n,i),L(o,i,null),f(i,l),L(a,i,null),f(i,c),L(u,i,null),f(i,m),f(i,_),f(_,g),f(_,p),f(_,b),f(b,y),J(y,t[0]),f(_,w),f(_,S),f(S,k),f(i,D),f(i,$),f($,T),f(T,R),f(T,I),f($,Z),f($,B),f(n,V),G&&G.m(n,null),f(e,j),L(A,e,null),C=!0,U||(te=[z(y,"input",t[22]),z(k,"click",t[23]),z(T,"click",t[16])],U=!0)},p(K,[Q]){const me={};Q&1073741836&&(me.$$scope={dirty:Q,ctx:K}),o.$set(me);const ue={};Q&1073743872&&(ue.$$scope={dirty:Q,ctx:K}),a.$set(ue);const ae={};Q&1073742848&&(ae.$$scope={dirty:Q,ctx:K}),u.$set(ae),Q&1&&J(y,K[0]),(!C||Q&16&&q!==(q="btn btn-"+(K[4]?"secondary":"success")))&&d(T,"class",q),K[4]?G?(G.p(K,Q),Q&16&&O(G,1)):(G=ao(K),G.c(),O(G,1),G.m(n,null)):G&&(De(),M(G,1,1,()=>{G=null}),Me());const Oe={};Q&1073745920&&(Oe.$$scope={dirty:Q,ctx:K}),A.$set(Oe)},i(K){C||(O(s.$$.fragment,K),O(o.$$.fragment,K),O(a.$$.fragment,K),O(u.$$.fragment,K),O(G),O(A.$$.fragment,K),K&&(H||Ie(()=>{H=Ve(e,ze,{duration:500}),H.start()})),C=!0)},o(K){M(s.$$.fragment,K),M(o.$$.fragment,K),M(a.$$.fragment,K),M(u.$$.fragment,K),M(G),M(A.$$.fragment,K),C=!1},d(K){K&&P(e),Y(s),Y(o),Y(a),Y(u),G&&G.d(),Y(A),U=!1,Se(te)}}}function fo(){return"500"+Math.floor(Math.random()*9e3)}const yp=()=>{};function kp(t,e,s){let r,n;cn(t,Po,U=>s(27,n=U));let i=F().format("YYYY-MM-DD HH:mm"),o=i,l="";const a=localStorage.getItem("user_id");let c,u="";c=new URLSearchParams(n).get("borrow_id")||"";let _=!1,g,p,b,y,w,S,k;async function D(){const{data:U,error:te}=await ne.from("book_borrow").select().eq("borrow_id",c).eq("active",!0).maybeSingle();if(!U){s(3,u="is-invalid");return}const{data:G,error:K}=await ne.rpc("getborrowinfo",{borrowid:c});console.error(K),console.table(G);let Q=G[0];s(9,w=`${Q.fname} ${Q.lname}`),s(8,y=Q.stud_id),s(6,p=Q.title),s(7,b=Q.barcode),s(1,l=Q.due_date),s(5,g=await T()),s(4,_=!0)}async function $(){const{data:U,error:te}=await ne.from("book_return").insert({return_id:await T(),borrow_id:c,staff_id:a,note:S,return_date:F(o).format("YYYY-MM-DDTHH:MMZ"),condition:k}).select();if(te){console.error(te);return}console.table(U);const{data:G,error:K}=await ne.from("library_holdings").update({status:"Available",condition:k}).eq("barcode",b).select(),{data:Q,error:me}=await ne.from("book_borrow").update({active:!1}).eq("borrow_id",c).select();if(K||me){console.error(K),console.error(me);return}console.log(G,Q)}async function T(){let U=fo();const{data:te,error:G}=await ne.from("book_return").select().eq("return_id",U);return console.log(te),te.length!=0&&(U=fo(),console.log("exists")),console.log(U),U}let R="200";const I=()=>s(3,u="");function q(){c=this.value,s(2,c)}function Z(){k=Ga(this),s(11,k)}function B(){S=this.value,s(10,S)}function V(){o=this.value,s(0,o)}const j=()=>s(0,o=i);function A(){R=this.value,s(12,R)}function H(){R=this.value,s(12,R)}const C=()=>console.log("Paid",R);return t.$$.update=()=>{t.$$.dirty&3&&s(13,r=F(o).diff(F(l),"days")*-1)},[o,l,c,u,_,g,p,b,y,w,S,k,R,r,i,a,D,$,I,q,Z,B,V,j,A,H,C]}class $p extends $e{constructor(e){super(),ke(this,e,kp,wp,ye,{})}}function Sp(t){let e,s,r,n;return{c(){e=h("input"),d(e,"class",s="form-control "+t[7]),d(e,"type","text"),d(e,"id","author-name")},m(i,o){E(i,e,o),J(e,t[4]),r||(n=[z(e,"input",t[11]),z(e,"keyup",t[12])],r=!0)},p(i,o){o&128&&s!==(s="form-control "+i[7])&&d(e,"class",s),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),r=!1,Se(n)}}}function Op(t){let e,s,r,n;return{c(){e=h("textarea"),d(e,"class",s="form-control "+t[8]),d(e,"id","author-bio"),d(e,"rows","4")},m(i,o){E(i,e,o),J(e,t[5]),r||(n=[z(e,"input",t[13]),z(e,"keyup",t[14])],r=!0)},p(i,o){o&256&&s!==(s="form-control "+i[8])&&d(e,"class",s),o&32&&J(e,i[5])},d(i){i&&P(e),r=!1,Se(n)}}}function Tp(t){let e,s,r,n;return{c(){e=h("input"),d(e,"type","text"),d(e,"id","author-link"),d(e,"class",s="form-control "+t[9])},m(i,o){E(i,e,o),J(e,t[6]),r||(n=[z(e,"input",t[15]),z(e,"keyup",t[16])],r=!0)},p(i,o){o&512&&s!==(s="form-control "+i[9])&&d(e,"class",s),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),r=!1,Se(n)}}}function Dp(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","author-pic"),d(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),s||(r=z(e,"change",t[17]),s=!0)},p:N,d(n){n&&P(e),t[18](null),s=!1,r()}}}function Mp(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H;return s=new dt({props:{text:"Add Author"}}),o=new Ae({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Sp]},$$scope:{ctx:t}}}),a=new Ae({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Op]},$$scope:{ctx:t}}}),u=new Ae({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Tp]},$$scope:{ctx:t}}}),_=new Ae({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Dp]},$$scope:{ctx:t}}}),{c(){e=h("section"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),x(_.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Preview:",y=v(),w=h("div"),S=h("img"),D=v(),$=h("button"),$.textContent="Remove",R=v(),I=h("div"),q=h("button"),q.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',Z=v(),B=h("a"),B.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(S.src,k=t[3])||d(S,"src",k),d(S,"alt","Preview"),d(S,"id","cover-preview"),d(S,"height","150"),d($,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",T="my-3 row "+t[2]),d(q,"class","btn btn-success"),d(B,"href","./#/"),d(I,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(C,U){E(C,e,U),L(s,e,null),f(e,r),f(e,n),f(n,i),L(o,i,null),f(i,l),L(a,i,null),f(i,c),L(u,i,null),f(i,m),L(_,i,null),f(i,g),f(i,p),f(p,b),f(p,y),f(p,w),f(w,S),f(w,D),f(w,$),f(i,R),f(i,I),f(I,q),f(I,Z),f(I,B),j=!0,A||(H=[z($,"click",t[19]),z(q,"click",t[10])],A=!0)},p(C,[U]){const te={};U&1048720&&(te.$$scope={dirty:U,ctx:C}),o.$set(te);const G={};U&1048864&&(G.$$scope={dirty:U,ctx:C}),a.$set(G);const K={};U&1049152&&(K.$$scope={dirty:U,ctx:C}),u.$set(K);const Q={};U&1048579&&(Q.$$scope={dirty:U,ctx:C}),_.$set(Q),(!j||U&8&&!Xe(S.src,k=C[3]))&&d(S,"src",k),(!j||U&4&&T!==(T="my-3 row "+C[2]))&&d(p,"class",T)},i(C){j||(O(s.$$.fragment,C),O(o.$$.fragment,C),O(a.$$.fragment,C),O(u.$$.fragment,C),O(_.$$.fragment,C),C&&(V||Ie(()=>{V=Ve(e,ze,{duration:500}),V.start()})),j=!0)},o(C){M(s.$$.fragment,C),M(o.$$.fragment,C),M(a.$$.fragment,C),M(u.$$.fragment,C),M(_.$$.fragment,C),j=!1},d(C){C&&P(e),Y(s),Y(o),Y(a),Y(u),Y(_),A=!1,Se(H)}}}function Cp(t,e,s){let r,n,i="d-none",o,l,a,c,u,m,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,m=a?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function y(){a=this.value,s(5,a)}const w=()=>s(8,m="");function S(){c=this.value,s(6,c)}const k=()=>s(9,_="");function D(){r=this.files,s(0,r)}function $(R){as[R?"unshift":"push"](()=>{n=R,s(1,n)})}const T=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const R=URL.createObjectURL(r[0]);s(3,o=R)}else s(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T]}class Pp extends $e{constructor(e){super(),ke(this,e,Cp,Mp,ye,{})}}function Ep(t){let e,s,r,n;return{c(){e=h("input"),d(e,"class",s="form-control "+t[7]),d(e,"type","text"),d(e,"id","publisher-name")},m(i,o){E(i,e,o),J(e,t[4]),r||(n=[z(e,"input",t[11]),z(e,"keyup",t[12])],r=!0)},p(i,o){o&128&&s!==(s="form-control "+i[7])&&d(e,"class",s),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),r=!1,Se(n)}}}function Rp(t){let e,s,r,n;return{c(){e=h("textarea"),d(e,"class",s="form-control "+t[8]),d(e,"id","publisher-description"),d(e,"rows","4")},m(i,o){E(i,e,o),J(e,t[5]),r||(n=[z(e,"input",t[13]),z(e,"keyup",t[14])],r=!0)},p(i,o){o&256&&s!==(s="form-control "+i[8])&&d(e,"class",s),o&32&&J(e,i[5])},d(i){i&&P(e),r=!1,Se(n)}}}function jp(t){let e,s,r,n;return{c(){e=h("input"),d(e,"type","text"),d(e,"id","publisher-link"),d(e,"class",s="form-control "+t[9])},m(i,o){E(i,e,o),J(e,t[6]),r||(n=[z(e,"input",t[15]),z(e,"keyup",t[16])],r=!0)},p(i,o){o&512&&s!==(s="form-control "+i[9])&&d(e,"class",s),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),r=!1,Se(n)}}}function Ap(t){let e,s,r;return{c(){e=h("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","publisher-pic"),d(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),s||(r=z(e,"change",t[17]),s=!0)},p:N,d(n){n&&P(e),t[18](null),s=!1,r()}}}function Ip(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j,A,H;return s=new dt({props:{text:"Add Publisher"}}),o=new Ae({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Ep]},$$scope:{ctx:t}}}),a=new Ae({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[Rp]},$$scope:{ctx:t}}}),u=new Ae({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[jp]},$$scope:{ctx:t}}}),_=new Ae({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[Ap]},$$scope:{ctx:t}}}),{c(){e=h("section"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),x(o.$$.fragment),l=v(),x(a.$$.fragment),c=v(),x(u.$$.fragment),m=v(),x(_.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Preview:",y=v(),w=h("div"),S=h("img"),D=v(),$=h("button"),$.textContent="Remove",R=v(),I=h("div"),q=h("button"),q.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',Z=v(),B=h("a"),B.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(S.src,k=t[3])||d(S,"src",k),d(S,"alt","Preview"),d(S,"id","cover-preview"),d(S,"height","150"),d($,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",T="my-3 row "+t[2]),d(q,"class","btn btn-success"),d(B,"href","./#/"),d(I,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(C,U){E(C,e,U),L(s,e,null),f(e,r),f(e,n),f(n,i),L(o,i,null),f(i,l),L(a,i,null),f(i,c),L(u,i,null),f(i,m),L(_,i,null),f(i,g),f(i,p),f(p,b),f(p,y),f(p,w),f(w,S),f(w,D),f(w,$),f(i,R),f(i,I),f(I,q),f(I,Z),f(I,B),j=!0,A||(H=[z($,"click",t[19]),z(q,"click",t[10])],A=!0)},p(C,[U]){const te={};U&1048720&&(te.$$scope={dirty:U,ctx:C}),o.$set(te);const G={};U&1048864&&(G.$$scope={dirty:U,ctx:C}),a.$set(G);const K={};U&1049152&&(K.$$scope={dirty:U,ctx:C}),u.$set(K);const Q={};U&1048579&&(Q.$$scope={dirty:U,ctx:C}),_.$set(Q),(!j||U&8&&!Xe(S.src,k=C[3]))&&d(S,"src",k),(!j||U&4&&T!==(T="my-3 row "+C[2]))&&d(p,"class",T)},i(C){j||(O(s.$$.fragment,C),O(o.$$.fragment,C),O(a.$$.fragment,C),O(u.$$.fragment,C),O(_.$$.fragment,C),C&&(V||Ie(()=>{V=Ve(e,ze,{duration:500}),V.start()})),j=!0)},o(C){M(s.$$.fragment,C),M(o.$$.fragment,C),M(a.$$.fragment,C),M(u.$$.fragment,C),M(_.$$.fragment,C),j=!1},d(C){C&&P(e),Y(s),Y(o),Y(a),Y(u),Y(_),A=!1,Se(H)}}}function Lp(t,e,s){let r,n,i="d-none",o,l,a,c,u,m,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,m=a?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function y(){a=this.value,s(5,a)}const w=()=>s(8,m="");function S(){c=this.value,s(6,c)}const k=()=>s(9,_="");function D(){r=this.files,s(0,r)}function $(R){as[R?"unshift":"push"](()=>{n=R,s(1,n)})}const T=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const R=URL.createObjectURL(r[0]);s(3,o=R)}else s(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T]}class Yp extends $e{constructor(e){super(),ke(this,e,Lp,Ip,ye,{})}}function ho(t,e,s){const r=t.slice();return r[1]=e[s][0],r[2]=e[s][1],r}function Np(t){return{c:N,m:N,p:N,d:N}}function xp(t){let e,s=Pe(Object.entries(t[0])),r=[];for(let n=0;n<s.length;n+=1)r[n]=mo(ho(t,s,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=qe()},m(n,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,i);E(n,e,i)},p(n,i){if(i&0){s=Pe(Object.entries(n[0]));let o;for(o=0;o<s.length;o+=1){const l=ho(n,s,o);r[o]?r[o].p(l,i):(r[o]=mo(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&P(e),Je(r,n)}}}function mo(t){let e,s,r,n,i,o,l,a,c,u,m,_,g;return{c(){e=h("tr"),s=h("td"),s.textContent=`${t[2].isbn}`,r=v(),n=h("td"),n.textContent=`${t[2].title}`,i=v(),o=h("td"),o.textContent=`${t[2].available}`,l=v(),a=h("td"),a.textContent=`${t[2].reserved}`,c=v(),u=h("td"),u.textContent=`${t[2].borrowed}`,m=v(),_=h("td"),_.textContent=`${t[2].total}`,g=v(),d(s,"class","d-none d-sm-table-cell"),d(_,"class","fw-bold")},m(p,b){E(p,e,b),f(e,s),f(e,r),f(e,n),f(e,i),f(e,o),f(e,l),f(e,a),f(e,c),f(e,u),f(e,m),f(e,_),f(e,g)},p:N,d(p){p&&P(e)}}}function Up(t){return{c:N,m:N,p:N,d:N}}function Fp(t){let e,s,r,n,i,o,l,a,c,u,m,_,g,p,b,y,w,S,k,D,$,T,R,I,q,Z,B,V,j;s=new dt({props:{text:"Books Report"}});let A={ctx:t,current:null,token:null,hasCatch:!1,pending:Up,then:xp,catch:Np,value:0};return zs(Hp(),A),{c(){e=h("main"),x(s.$$.fragment),r=v(),n=h("div"),i=h("div"),i.textContent="Filters:",o=v(),l=h("div"),a=h("select"),c=h("option"),c.textContent="Total",u=h("option"),u.textContent="Available",m=h("option"),m.textContent="Reserved",_=h("option"),_.textContent="Borrowed",g=v(),p=h("div"),b=h("select"),y=h("option"),y.textContent="Ascending",w=h("option"),w.textContent="Descending",S=v(),k=h("form"),k.innerHTML='<input type="text" placeholder="Search title..." name="search" class="form-control"/> <button type="submit" class="btn btn-outline-success"><i class="bi bi-search"></i></button>',D=v(),$=h("div"),T=h("table"),R=h("thead"),R.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-none d-sm-table-cell">ISBN</th> <th class="py-3 col-5">Book Title</th> <th class="py-3 col-1 text-bg-success">Available</th> <th class="py-3 col-1 text-bg-secondary">Reserved</th> <th class="py-3 col-1 text-bg-danger">Borrowed</th> <th class="py-3 col-1 text-bg-primary">Total</th></tr>',I=v(),q=h("tbody"),A.block.c(),c.__value="",J(c,c.__value),u.__value="",J(u,u.__value),m.__value="",J(m,m.__value),_.__value="",J(_,_.__value),d(a,"name","filter"),d(a,"class","form-select"),y.__value="",J(y,y.__value),w.__value="",J(w,w.__value),d(b,"name","order"),d(b,"class","form-select"),d(k,"class","d-flex ms-3"),d(n,"class","d-flex justify-content-end align-items-center gap-2 mb-3"),d(T,"class","table table-bordered table-striped table-hover text-center align-middle"),d($,"class","table-responsive"),d(e,"class","container")},m(H,C){E(H,e,C),L(s,e,null),f(e,r),f(e,n),f(n,i),f(n,o),f(n,l),f(l,a),f(a,c),f(a,u),f(a,m),f(a,_),f(n,g),f(n,p),f(p,b),f(b,y),f(b,w),f(n,S),f(n,k),f(e,D),f(e,$),f($,T),f(T,R),f(T,I),f(T,q),A.block.m(q,A.anchor=null),A.mount=()=>q,A.anchor=null,B=!0,V||(j=z(k,"submit",er(Wp)),V=!0)},p(H,[C]){t=H,Gs(A,t,C)},i(H){B||(O(s.$$.fragment,H),H&&(Z||Ie(()=>{Z=Ve(e,ze,{duration:500}),Z.start()})),B=!0)},o(H){M(s.$$.fragment,H),B=!1},d(H){H&&P(e),Y(s),A.block.d(),A.token=null,A=null,V=!1,j()}}}async function Hp(){return{1:{},2:{}}}const Wp=()=>{};class qp extends $e{constructor(e){super(),ke(this,e,null,Fp,ye,{})}}function Bp(t){let e,s;return e=new mn({props:{routes:{"*":tf}}}),{c(){x(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},i(r){s||(O(e.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Vp(t){let e,s,r,n;return e=new Wo({}),r=new mn({props:{routes:{"/":Ud,"/book/:bookID":Vo,"/author/:authorID":zo,"/publisher/:publisherID":Go,"/search":rs,"/search/author":rs,"/search/publisher":rs,"/add-book":pd,"/add-author":Pp,"/add-publisher":Yp,"/borrow":hp,"/return":$p,"/book-report":qp,"*":kn}}}),{c(){x(e.$$.fragment),s=v(),x(r.$$.fragment)},m(i,o){L(e,i,o),E(i,s,o),L(r,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(r.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(r.$$.fragment,i),n=!1},d(i){i&&P(s),Y(e,i),Y(r,i)}}}function zp(t){let e,s,r,n;return e=new Wo({}),r=new mn({props:{routes:{"/":Eu,"/book/:bookID":Vo,"/author/:authorID":zo,"/publisher/:publisherID":Go,"/search":rs,"/search/author":rs,"/search/publisher":rs,"*":kn}}}),{c(){x(e.$$.fragment),s=v(),x(r.$$.fragment)},m(i,o){L(e,i,o),E(i,s,o),L(r,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(r.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(r.$$.fragment,i),n=!1},d(i){i&&P(s),Y(e,i),Y(r,i)}}}function Gp(t){let e,s,r,n;const i=[zp,Vp,Bp],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=qe()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(De(),M(o[u],1,1,()=>{o[u]=null}),Me(),s=o[e],s||(s=o[e]=i[e](a),s.c()),O(s,1),s.m(r.parentNode,r))},i(a){n||(O(s),n=!0)},o(a){M(s),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Jp(t,e,s){let r;return jt.subscribe(n=>{s(0,r=n)}),[r]}class Kp extends $e{constructor(e){super(),ke(this,e,Jp,Gp,ye,{})}}new Kp({target:document.getElementById("app")})});export default Zp();
