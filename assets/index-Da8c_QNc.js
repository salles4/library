var Ha=Object.defineProperty;var Fa=(r,e,t)=>e in r?Ha(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var qa=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var tn=(r,e,t)=>(Fa(r,typeof e!="symbol"?e+"":e,t),t);var Xg=qa((t0,ys)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function x(){}const An=r=>r;function Kr(r,e){for(const t in e)r[t]=e[t];return r}function Ba(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function pl(r){return r()}function wi(){return Object.create(null)}function ge(r){r.forEach(pl)}function rs(r){return typeof r=="function"}function ye(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let cs;function Ne(r,e){return r===e?!0:(cs||(cs=document.createElement("a")),cs.href=e,r===cs.href)}function Wa(r){return Object.keys(r).length===0}function _l(r,...e){if(r==null){for(const s of e)s(void 0);return x}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rr(r,e,t){r.$$.on_destroy.push(_l(e,t))}function As(r,e,t,s){if(r){const n=bl(r,e,t,s);return r[0](n)}}function bl(r,e,t,s){return r[1]&&s?Kr(t.ctx.slice(),r[1](s(e))):t.ctx}function Is(r,e,t,s){if(r[2]&&s){const n=r[2](s(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function Ls(r,e,t,s,n,i){if(n){const o=bl(e,t,s,i);r.p(o,n)}}function Ys(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function yi(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}const gl=typeof window<"u";let vl=gl?()=>window.performance.now():()=>Date.now(),In=gl?r=>requestAnimationFrame(r):x;const $r=new Set;function wl(r){$r.forEach(e=>{e.c(r)||($r.delete(e),e.f())}),$r.size!==0&&In(wl)}function yl(r){let e;return $r.size===0&&In(wl),{promise:new Promise(t=>{$r.add(e={c:r,f:t})}),abort(){$r.delete(e)}}}function c(r,e){r.appendChild(e)}function kl(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function Va(r){const e=h("style");return e.textContent="/* empty */",za(kl(r),e),e.sheet}function za(r,e){return c(r.head||r,e),e.sheet}function P(r,e,t){r.insertBefore(e,t||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function Xe(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function h(r){return document.createElement(r)}function X(r){return document.createTextNode(r)}function g(){return X(" ")}function Ze(){return X("")}function U(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function gt(r){return function(e){return e.preventDefault(),r.call(this,e)}}function u(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function er(r){return r===""?null:+r}function Ga(r){return Array.from(r.childNodes)}function le(r,e){e=""+e,r.data!==e&&(r.data=e)}function J(r,e){r.value=e??""}function Ge(r,e,t,s){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function ks(r,e,t){for(let s=0;s<r.options.length;s+=1){const n=r.options[s];if(n.__value===e){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function ki(r){const e=r.querySelector(":checked");return e&&e.__value}function $l(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}function $s(r,e){return new r(e)}const Ss=new Map;let Ds=0;function Ja(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Ka(r,e){const t={stylesheet:Va(e),rules:{}};return Ss.set(r,t),t}function bn(r,e,t,s,n,i,o,l=0){const a=16.666/s;let f=`{
`;for(let y=0;y<=1;y+=a){const w=e+(t-e)*i(y);f+=y*100+`%{${o(w,1-w)}}
`}const d=f+`100% {${o(t,1-t)}}
}`,m=`__svelte_${Ja(d)}_${l}`,p=kl(r),{stylesheet:v,rules:_}=Ss.get(p)||Ka(p,r);_[m]||(_[m]=!0,v.insertRule(`@keyframes ${m} ${d}`,v.cssRules.length));const b=r.style.animation||"";return r.style.animation=`${b?`${b}, `:""}${m} ${s}ms linear ${n}ms 1 both`,Ds+=1,m}function gn(r,e){const t=(r.style.animation||"").split(", "),s=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=t.length-s.length;n&&(r.style.animation=s.join(", "),Ds-=n,Ds||Za())}function Za(){In(()=>{Ds||(Ss.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&M(e)}),Ss.clear())})}let Zr;function At(r){Zr=r}function ss(){if(!Zr)throw new Error("Function called outside component initialization");return Zr}function vt(r){ss().$$.on_mount.push(r)}function Qa(r){ss().$$.after_update.push(r)}function Xa(r){ss().$$.on_destroy.push(r)}function Sl(){const r=ss();return(e,t,{cancelable:s=!1}={})=>{const n=r.$$.callbacks[e];if(n){const i=$l(e,t,{cancelable:s});return n.slice().forEach(o=>{o.call(r,i)}),!i.defaultPrevented}return!0}}function Ts(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const vr=[],ft=[];let Sr=[];const $i=[],Dl=Promise.resolve();let vn=!1;function Tl(){vn||(vn=!0,Dl.then(Yn))}function Ln(){return Tl(),Dl}function Ee(r){Sr.push(r)}const rn=new Set;let hr=0;function Yn(){if(hr!==0)return;const r=Zr;do{try{for(;hr<vr.length;){const e=vr[hr];hr++,At(e),xa(e.$$)}}catch(e){throw vr.length=0,hr=0,e}for(At(null),vr.length=0,hr=0;ft.length;)ft.pop()();for(let e=0;e<Sr.length;e+=1){const t=Sr[e];rn.has(t)||(rn.add(t),t())}Sr.length=0}while(vr.length);for(;$i.length;)$i.pop()();vn=!1,rn.clear(),At(r)}function xa(r){if(r.fragment!==null){r.update(),ge(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Ee)}}function eu(r){const e=[],t=[];Sr.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Sr=e}let Hr;function Ol(){return Hr||(Hr=Promise.resolve(),Hr.then(()=>{Hr=null})),Hr}function Vr(r,e,t){r.dispatchEvent($l(`${e?"intro":"outro"}${t}`))}const _s=new Set;let It;function Le(){It={r:0,c:[],p:It}}function Ye(){It.r||ge(It.c),It=It.p}function j(r,e){r&&r.i&&(_s.delete(r),r.i(e))}function R(r,e,t,s){if(r&&r.o){if(_s.has(r))return;_s.add(r),It.c.push(()=>{_s.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}const Cl={duration:0};function Je(r,e,t){const s={direction:"in"};let n=e(r,t,s),i=!1,o,l,a=0;function f(){o&&gn(r,o)}function d(){const{delay:p=0,duration:v=300,easing:_=An,tick:b=x,css:y}=n||Cl;y&&(o=bn(r,0,1,v,p,_,y,a++)),b(0,1);const w=vl()+p,T=w+v;l&&l.abort(),i=!0,Ee(()=>Vr(r,!0,"start")),l=yl(D=>{if(i){if(D>=T)return b(1,0),Vr(r,!0,"end"),f(),i=!1;if(D>=w){const $=_((D-w)/v);b($,1-$)}}return i})}let m=!1;return{start(){m||(m=!0,gn(r),rs(n)?(n=n(s),Ol().then(d)):d())},invalidate(){m=!1},end(){i&&(f(),i=!1)}}}function Tt(r,e,t,s){let i=e(r,t,{direction:"both"}),o=s?0:1,l=null,a=null,f=null,d;function m(){f&&gn(r,f)}function p(_,b){const y=_.b-o;return b*=Math.abs(y),{a:o,b:_.b,d:y,duration:b,start:_.start,end:_.start+b,group:_.group}}function v(_){const{delay:b=0,duration:y=300,easing:w=An,tick:T=x,css:D}=i||Cl,$={start:vl()+b,b:_};_||($.group=It,It.r+=1),"inert"in r&&(_?d!==void 0&&(r.inert=d):(d=r.inert,r.inert=!0)),l||a?a=$:(D&&(m(),f=bn(r,o,_,y,b,w,D)),_&&T(0,1),l=p($,y),Ee(()=>Vr(r,_,"start")),yl(S=>{if(a&&S>a.start&&(l=p(a,y),a=null,Vr(r,l.b,"start"),D&&(m(),f=bn(r,o,l.b,l.duration,0,w,i.css))),l){if(S>=l.end)T(o=l.b,1-o),Vr(r,l.b,"end"),a||(l.b?m():--l.group.r||ge(l.group.c)),l=null;else if(S>=l.start){const k=S-l.start;o=l.a+l.d*w(k/l.duration),T(o,1-o)}}return!!(l||a)}))}return{run(_){rs(i)?Ol().then(()=>{i=i({direction:_?"in":"out"}),v(_)}):v(_)},end(){m(),l=a=null}}}function sn(r,e){const t=e.token={};function s(n,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const f=n&&(e.current=n)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((m,p)=>{p!==i&&m&&(Le(),R(m,1,1,()=>{e.blocks[p]===m&&(e.blocks[p]=null)}),Ye())}):e.block.d(1),f.c(),j(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[i]=f),d&&Yn()}if(Ba(r)){const n=ss();if(r.then(i=>{At(n),s(e.then,1,e.value,i),At(null)},i=>{if(At(n),s(e.catch,2,e.error,i),At(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,r),!0;e.resolved=r}}function nn(r,e,t){const s=e.slice(),{resolved:n}=r;r.current===r.then&&(s[r.value]=n),r.current===r.catch&&(s[r.error]=n),r.block.p(s,t)}function Te(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Os(r,e){const t={},s={},n={$$scope:1};let i=r.length;for(;i--;){const o=r[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(t[a]=l[a],n[a]=1);r[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in t||(t[o]=void 0);return t}function Cs(r){return typeof r=="object"&&r!==null?r:{}}function Q(r){r&&r.c()}function K(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),Ee(()=>{const i=r.$$.on_mount.map(pl).filter(rs);r.$$.on_destroy?r.$$.on_destroy.push(...i):ge(i),r.$$.on_mount=[]}),n.forEach(Ee)}function Z(r,e){const t=r.$$;t.fragment!==null&&(eu(t.after_update),ge(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function tu(r,e){r.$$.dirty[0]===-1&&(vr.push(r),Tl(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Se(r,e,t,s,n,i,o=null,l=[-1]){const a=Zr;At(r);const f=r.$$={fragment:null,ctx:[],props:i,update:x,not_equal:n,bound:wi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:wi(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(r,e.props||{},(m,p,...v)=>{const _=v.length?v[0]:p;return f.ctx&&n(f.ctx[m],f.ctx[m]=_)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](_),d&&tu(r,m)),p}):[],f.update(),d=!0,ge(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const m=Ga(e.target);f.fragment&&f.fragment.l(m),m.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&j(r.$$.fragment),K(r,e.target,e.anchor),Yn()}At(a)}class De{constructor(){tn(this,"$$");tn(this,"$$set")}$destroy(){Z(this,1),this.$destroy=x}$on(e,t){if(!rs(t))return x;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Wa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ru="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ru);const mr=[];function Ml(r,e){return{subscribe:Ns(r,e).subscribe}}function Ns(r,e=x){let t;const s=new Set;function n(l){if(ye(r,l)&&(r=l,t)){const a=!mr.length;for(const f of s)f[1](),mr.push(f,r);if(a){for(let f=0;f<mr.length;f+=2)mr[f][0](mr[f+1]);mr.length=0}}}function i(l){n(l(r))}function o(l,a=x){const f=[l,a];return s.add(f),s.size===1&&(t=e(n,i)||x),l(r),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:o}}function Pl(r,e,t){const s=!Array.isArray(r),n=s?[r]:r;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Ml(t,(o,l)=>{let a=!1;const f=[];let d=0,m=x;const p=()=>{if(d)return;m();const _=e(s?f[0]:f,o,l);i?o(_):m=rs(_)?_:x},v=n.map((_,b)=>_l(_,y=>{f[b]=y,d&=~(1<<b),a&&p()},()=>{d|=1<<b}));return a=!0,p(),function(){ge(v),m(),a=!1}})}const xt=Ns(localStorage.getItem("accType")),bs=Ns(localStorage.getItem("user_id"));window.addEventListener("storage",function(r){let e;bs.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(xt.set(""),bs.set("")):(bs.set(localStorage.getItem("user_id")),xt.set(localStorage.getItem("accType"))))});function su(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,s,n,i,o=[],l="",a=r.split("/");for(a[0]||a.shift();n=a.shift();)t=n[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function nu(r){let e,t,s;const n=[r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<n.length;d+=1)f=Kr(f,n[d]);return a!==void 0&&a&4&&(f=Kr(f,Os(n,[Cs(l[2])]))),{props:f}}return i&&(e=$s(i,o(r)),e.$on("routeEvent",r[7])),{c(){e&&Q(e.$$.fragment),t=Ze()},m(l,a){e&&K(e,l,a),P(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Le();const f=e;R(f.$$.fragment,1,0,()=>{Z(f,1)}),Ye()}i?(e=$s(i,o(l,a)),e.$on("routeEvent",l[7]),Q(e.$$.fragment),j(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&4?Os(n,[Cs(l[2])]):{};e.$set(f)}},i(l){s||(e&&j(e.$$.fragment,l),s=!0)},o(l){e&&R(e.$$.fragment,l),s=!1},d(l){l&&M(t),e&&Z(e,l)}}}function iu(r){let e,t,s;const n=[{params:r[1]},r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<n.length;d+=1)f=Kr(f,n[d]);return a!==void 0&&a&6&&(f=Kr(f,Os(n,[a&2&&{params:l[1]},a&4&&Cs(l[2])]))),{props:f}}return i&&(e=$s(i,o(r)),e.$on("routeEvent",r[6])),{c(){e&&Q(e.$$.fragment),t=Ze()},m(l,a){e&&K(e,l,a),P(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Le();const f=e;R(f.$$.fragment,1,0,()=>{Z(f,1)}),Ye()}i?(e=$s(i,o(l,a)),e.$on("routeEvent",l[6]),Q(e.$$.fragment),j(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&6?Os(n,[a&2&&{params:l[1]},a&4&&Cs(l[2])]):{};e.$set(f)}},i(l){s||(e&&j(e.$$.fragment,l),s=!0)},o(l){e&&R(e.$$.fragment,l),s=!1},d(l){l&&M(t),e&&Z(e,l)}}}function ou(r){let e,t,s,n;const i=[iu,nu],o=[];function l(a,f){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,[f]){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Si(){const r=window.location.href.indexOf("#/");let e=r>-1?window.location.href.substr(r+1):"/";const t=e.indexOf("?");let s="";return t>-1&&(s=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:s}}const Nn=Ml(null,function(e){e(Si());const t=()=>{e(Si())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),lu=Pl(Nn,r=>r.location),ns=Pl(Nn,r=>r.querystring),Di=Ns(void 0);async function Pr(){await Ln(),window.history.back()}async function Ft(r){if(!r||r.length<1||r.charAt(0)!="/"&&r.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ln();const e=(r.charAt(0)=="#"?"":"#")+r;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function au(r){r?window.scrollTo(r.__svelte_spa_router_scrollX,r.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function uu(r,e,t){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(S,k){if(!k||typeof k!="function"&&(typeof k!="object"||k._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:O,keys:C}=su(S);this.path=S,typeof k=="object"&&k._sveltesparouter===!0?(this.component=k.component,this.conditions=k.conditions||[],this.userData=k.userData,this.props=k.props||{}):(this.component=()=>Promise.resolve(k),this.conditions=[],this.props={}),this._pattern=O,this._keys=C}match(S){if(n){if(typeof n=="string")if(S.startsWith(n))S=S.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const I=S.match(n);if(I&&I[0])S=S.substr(I[0].length)||"/";else return null}}const k=this._pattern.exec(S);if(k===null)return null;if(this._keys===!1)return k;const O={};let C=0;for(;C<this._keys.length;){try{O[this._keys[C]]=decodeURIComponent(k[C+1]||"")||null}catch{O[this._keys[C]]=null}C++}return O}async checkConditions(S){for(let k=0;k<this.conditions.length;k++)if(!await this.conditions[k](S))return!1;return!0}}const l=[];s instanceof Map?s.forEach(($,S)=>{l.push(new o(S,$))}):Object.keys(s).forEach($=>{l.push(new o($,s[$]))});let a=null,f=null,d={};const m=Sl();async function p($,S){await Ln(),m($,S)}let v=null,_=null;i&&(_=$=>{$.state&&($.state.__svelte_spa_router_scrollY||$.state.__svelte_spa_router_scrollX)?v=$.state:v=null},window.addEventListener("popstate",_),Qa(()=>{au(v)}));let b=null,y=null;const w=Nn.subscribe(async $=>{b=$;let S=0;for(;S<l.length;){const k=l[S].match($.location);if(!k){S++;continue}const O={route:l[S].path,location:$.location,querystring:$.querystring,userData:l[S].userData,params:k&&typeof k=="object"&&Object.keys(k).length?k:null};if(!await l[S].checkConditions(O)){t(0,a=null),y=null,p("conditionsFailed",O);return}p("routeLoading",Object.assign({},O));const C=l[S].component;if(y!=C){C.loading?(t(0,a=C.loading),y=C,t(1,f=C.loadingParams),t(2,d={}),p("routeLoaded",Object.assign({},O,{component:a,name:a.name,params:f}))):(t(0,a=null),y=null);const I=await C();if($!=b)return;t(0,a=I&&I.default||I),y=C}k&&typeof k=="object"&&Object.keys(k).length?t(1,f=k):t(1,f=null),t(2,d=l[S].props),p("routeLoaded",Object.assign({},O,{component:a,name:a.name,params:f})).then(()=>{Di.set(f)});return}t(0,a=null),y=null,Di.set(void 0)});Xa(()=>{w(),_&&window.removeEventListener("popstate",_)});function T($){Ts.call(this,r,$)}function D($){Ts.call(this,r,$)}return r.$$set=$=>{"routes"in $&&t(3,s=$.routes),"prefix"in $&&t(4,n=$.prefix),"restoreScrollState"in $&&t(5,i=$.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,f,d,s,n,i,T,D]}class Un extends De{constructor(e){super(),Se(this,e,uu,ou,ye,{routes:3,prefix:4,restoreScrollState:5})}}const cu="modulepreload",fu=function(r){return"/library/"+r},Ti={},jr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(t.map(l=>{if(l=fu(l),l in Ti)return;Ti[l]=!0;const a=l.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":cu,a||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},du=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>jr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Hn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class hu extends Hn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mu extends Hn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pu extends Hn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(wn||(wn={}));var _u=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class bu{constructor(e,{headers:t={},customFetch:s,region:n=wn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=du(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return _u(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let f;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(_=>{throw new hu(_)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new mu(d);if(!d.ok)throw new pu(d);let p=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield d.json():p==="application/octet-stream"?v=yield d.blob():p==="text/event-stream"?v=d:p==="multipart/form-data"?v=yield d.formData():v=yield d.text(),{data:v,error:null}}catch(n){return{data:null,error:n}}})}}var gu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Er=gu();const vu=Er.fetch,Fn=Er.fetch.bind(Er),jl=Er.Headers,wu=Er.Request,yu=Er.Response,is=Object.freeze(Object.defineProperty({__proto__:null,Headers:jl,Request:wu,Response:yu,default:Fn,fetch:vu},Symbol.toStringTag,{value:"Module"}));class ku extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class $u{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let f=null,d=null,m=null,p=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(f={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,p=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{f=JSON.parse(b),Array.isArray(f)&&i.status===404&&(d=[],f=null,p=200,v="OK")}catch{i.status===404&&b===""?(p=204,v="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((a=f==null?void 0:f.details)===null||a===void 0)&&a.includes("0 rows"))&&(f=null,p=200,v="OK"),f&&this.shouldThrowOnError)throw new ku(f)}return{error:f,data:d,count:m,status:p,statusText:v}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class Su extends $u{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${f}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class wr extends Su{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Du{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new wr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new wr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(a.length>0){const f=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new wr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new wr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new wr({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Tu="1.15.2",Ou={"X-Client-Info":`postgrest-js/${Tu}`};class qn{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ou),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Du(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{l.searchParams.append(d,m)})):(o="POST",a=t);const f=Object.assign({},this.headers);return i&&(f.Prefer=`count=${i}`),new wr({method:o,url:l,headers:f,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Cu="2.9.5",Mu={"X-Client-Info":`realtime-js/${Cu}`},Pu="1.0.0",El=1e4,ju=1e3;var Dr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Dr||(Dr={}));var ot;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ot||(ot={}));var _t;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(_t||(_t={}));var yn;(function(r){r.websocket="websocket"})(yn||(yn={}));var lr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(lr||(lr={}));class Rl{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Eu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:f}}}class on{constructor(e,t,s={},n=El){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Oi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Oi||(Oi={}));class zr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=zr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=zr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(f,d)=>{o[f]||(a[f]=d)}),this.map(o,(f,d)=>{const m=i[f];if(m){const p=d.map(y=>y.presence_ref),v=m.map(y=>y.presence_ref),_=d.filter(y=>v.indexOf(y.presence_ref)<0),b=m.filter(y=>p.indexOf(y.presence_ref)<0);_.length>0&&(l[f]=_),b.length>0&&(a[f]=b)}else l[f]=d}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var f;const d=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(a),d.length>0){const m=e[l].map(v=>v.presence_ref),p=d.filter(v=>m.indexOf(v.presence_ref)<0);e[l].unshift(...p)}s(l,d,a)}),this.map(o,(l,a)=>{let f=e[l];if(!f)return;const d=a.map(m=>m.presence_ref);f=f.filter(m=>d.indexOf(m.presence_ref)<0),e[l]=f,n(l,f,a),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Fe||(Fe={}));const Ci=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ru(o,r,e,n),i),{})},Ru=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?Al(i,o):kn(o)},Al=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Yu(e,t)}switch(r){case Fe.bool:return Au(e);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return Iu(e);case Fe.json:case Fe.jsonb:return Lu(e);case Fe.timestamp:return Nu(e);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return kn(e);default:return kn(e)}},kn=r=>r,Au=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Iu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Lu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Yu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Al(e,l))}return r},Nu=r=>typeof r=="string"?r.replace(" ","T"):r;var Mi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Mi||(Mi={}));var Pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(Pi||(Pi={}));var ji;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ji||(ji={}));class Bn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new on(this,_t.join,this.params,this.timeout),this.rejoinTimer=new Rl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_t.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new zr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(f=>e&&e("CHANNEL_ERROR",f)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:f})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),f===void 0){e&&e("SUBSCRIBED");return}else{const m=this.bindings.postgres_changes,p=(d=m==null?void 0:m.length)!==null&&d!==void 0?d:0,v=[];for(let _=0;_<p;_++){const b=m[_],{filter:{event:y,schema:w,table:T,filter:D}}=b,$=f&&f[_];if($&&$.event===y&&$.schema===w&&$.table===T&&$.filter===D)v.push(Object.assign(Object.assign({},b),{id:$.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e("SUBSCRIBED");return}}).receive("error",f=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_t.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new on(this,_t.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new on(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:f,join:d}=_t;if(s&&[l,a,f,d].indexOf(o)>=0&&s!==this._joinRef())return;let p=this._onMessage(o,t,s);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var _,b,y;return((_=v.filter)===null||_===void 0?void 0:_.event)==="*"||((y=(b=v.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(v=>v.callback(p,s)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var _,b,y,w,T,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const $=v.id,S=(_=v.filter)===null||_===void 0?void 0:_.event;return $&&((b=t.ids)===null||b===void 0?void 0:b.includes($))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const $=(T=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return $==="*"||$===((D=t==null?void 0:t.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:b,table:y,commit_timestamp:w,type:T,errors:D}=_;p=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:w,eventType:T,new:{},old:{},errors:D}),this._getPayloadRecords(_))}v.callback(p,s)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Bn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_t.close,{},e)}_onError(e){this._on(_t.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ci(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ci(e.columns,e.old_record)),t}}const Uu=()=>{},Hu=typeof WebSocket<"u";class Fu{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Mu,this.params={},this.timeout=El,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Uu,this.conn=null,this.sendBuffer=[],this.serializer=new Eu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>jr(()=>Promise.resolve().then(()=>is),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${yn.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Hu){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new qu(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),jr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Dr.connecting:return lr.Connecting;case Dr.open:return lr.Open;case Dr.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}channel(e,t={config:{}}){const s=new Bn(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(_t.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pu}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(_t.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ju,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class qu{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Dr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Wn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Bu extends Wn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ei extends Wn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Wu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const Il=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>jr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Vu=()=>Wu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jr(()=>Promise.resolve().then(()=>is),void 0)).Response:Response});var Ar=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const ln=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),zu=(r,e)=>Ar(void 0,void 0,void 0,function*(){const t=yield Vu();r instanceof t?r.json().then(s=>{e(new Bu(ln(s),r.status||500))}).catch(s=>{e(new Ei(ln(s),s))}):e(new Ei(ln(r),r))}),Gu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function Us(r,e,t,s,n,i){return Ar(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Gu(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>zu(a,l))})})}function $n(r,e,t,s){return Ar(this,void 0,void 0,function*(){return Us(r,"GET",e,t,s)})}function Jt(r,e,t,s,n){return Ar(this,void 0,void 0,function*(){return Us(r,"POST",e,s,n,t)})}function Ju(r,e,t,s,n){return Ar(this,void 0,void 0,function*(){return Us(r,"PUT",e,s,n,t)})}function Ll(r,e,t,s,n){return Ar(this,void 0,void 0,function*(){return Us(r,"DELETE",e,s,n,t)})}var ut=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const Ku={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ri={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zu{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Il(n)}uploadOrUpdate(e,t,s,n){return ut(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ri),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),f=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield d.json();return d.ok?{data:{path:a,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return ut(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const f=Object.assign({upsert:Ri.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",f.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",f.cacheControl)):(a=s,d["cache-control"]=`max-age=${f.cacheControl}`,d["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),p=yield m.json();return m.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return ut(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Jt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new Wn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}update(e,t,s){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return ut(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}copy(e,t){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield Jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Jt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return ut(this,void 0,void 0,function*(){try{const n=yield Jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,t){return ut(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield $n(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let f=n.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${f}`)}}}remove(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}list(e,t,s){return ut(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ku),t),{prefix:e||""});return{data:yield Jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Qu="2.5.5",Xu={"X-Client-Info":`storage-js/${Qu}`};var pr=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class xu{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Xu),t),this.fetch=Il(s)}listBuckets(){return pr(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return pr(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return pr(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return pr(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pr(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pr(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}}class ec extends xu{constructor(e,t={},s){super(e,t,s)}from(e){return new Zu(this.url,this.headers,e,this.fetch)}}const tc="2.43.2";let Wr="";typeof Deno<"u"?Wr="deno":typeof document<"u"?Wr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wr="react-native":Wr="node";const rc={"X-Client-Info":`supabase-js-${Wr}/${tc}`},sc={headers:rc},nc={schema:"public"},ic={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oc={};var lc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const ac=r=>{let e;return r?e=r:typeof fetch>"u"?e=Fn:e=fetch,(...t)=>e(...t)},uc=()=>typeof Headers>"u"?jl:Headers,cc=(r,e,t)=>{const s=ac(t),n=uc();return(i,o)=>lc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:r;let f=new n(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",r),f.has("Authorization")||f.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:f}))})};function fc(r){return r.replace(/\/$/,"")}function dc(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:o,auth:l,realtime:a,global:f}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},f),i)}}const Yl="2.64.2",hc="http://localhost:9999",mc="supabase.auth.token",pc={"X-Client-Info":`gotrue-js/${Yl}`},Ai=10,Sn="X-Supabase-Api-Version",Nl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function _c(r){return Math.round(Date.now()/1e3)+r}function bc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const pt=()=>typeof document<"u",sr={tested:!1,writable:!1},Gr=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function an(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ul=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>jr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},gc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Hl=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},fs=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},un=async(r,e)=>{await r.removeItem(e)};function vc(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,o,l,a,f,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)o=e.indexOf(r.charAt(d++)),l=e.indexOf(r.charAt(d++)),a=e.indexOf(r.charAt(d++)),f=e.indexOf(r.charAt(d++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|f,t=t+String.fromCharCode(s),a!=64&&n!=0&&(t=t+String.fromCharCode(n)),f!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Hs{constructor(){this.promise=new Hs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Hs.promiseConstructor=Promise;function Ii(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(vc(s))}async function wc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function yc(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function kc(r){return("0"+r.toString(16)).substr(-2)}function $c(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,kc).join("")}async function Sc(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Dc(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Sc(r);return Dc(t)}async function _r(r,e,t=!1){const s=$c();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Hl(r,`${e}-code-verifier`,n);const i=await Tc(s);return[i,s===i?"plain":"s256"]}const Oc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cc(r){const e=r.headers.get(Sn);if(!e||!e.match(Oc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Vn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Oe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Mc extends Vn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Pc(r){return Oe(r)&&r.name==="AuthApiError"}class Fl extends Vn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cr extends Vn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class nr extends cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cn extends cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ds extends cr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hs extends cr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Li extends cr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dn extends cr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function fn(r){return Oe(r)&&r.name==="AuthRetryableFetchError"}class Yi extends cr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var jc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const or=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ec=[502,503,504];async function Ni(r){var e;if(!gc(r))throw new Dn(or(r),0);if(Ec.includes(r.status))throw new Dn(or(r),r.status);let t;try{t=await r.json()}catch(i){throw new Fl(or(i),i)}let s;const n=Cc(r);if(n&&n.getTime()>=Nl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Yi(or(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yi(or(t),r.status,t.weak_password.reasons);throw new Mc(or(t),r.status||500,s)}const Rc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function Me(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Sn]||(i[Sn]=Nl["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Ac(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Ac(r,e,t,s,n,i){const o=Rc(e,s,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(a){throw console.error(a),new Dn(or(a),0)}if(l.ok||await Ni(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await Ni(a)}}function Gt(r){var e;let t=null;Nc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=_c(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Ui(r){const e=Gt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Kt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ic(r){return{data:r,error:null}}function Lc(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=jc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Yc(r){return r}function Nc(r){return r.access_token&&r.refresh_token&&r.expires_in}var Uc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Hc{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ul(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Kt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Uc(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Lc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,l,a;try{const f={nextPage:null,lastPage:0,total:0},d=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Yc});if(d.error)throw d.error;const m=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return v.length>0&&(v.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(_.split(";")[1].split("=")[1]);f[`${y}Page`]=b}),f.total=parseInt(p)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Oe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Kt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Kt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}const Fc={getItem:r=>Gr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Gr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Gr()&&globalThis.localStorage.removeItem(r)}};function Hi(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function qc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const br={debug:!!(globalThis&&Gr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ql extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bc extends ql{}async function Wc(r,e,t){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Bc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(br.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}qc();const Vc={url:hc,storageKey:mc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Fr=30*1e3,Fi=3;async function qi(r,e,t){return await t()}class Qr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qr.nextInstanceID,Qr.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Vc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Hc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ul(n.fetch),this.lock=n.lock||qi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:pt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Wc:this.lock=qi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Gr()?this.storage=Fc:(this.memoryStorage={},this.storage=Hi(this.memoryStorage)):(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=pt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Oe(e)?{error:e}:{error:new Fl("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{await this._removeSession();const i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Gt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:d,password:m,options:p}=e;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await _r(this.storage,this.storageKey)),i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:m,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:v,code_challenge_method:_},xform:Gt})}else if("phone"in e){const{phone:d,password:m,options:p}=e;i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Gt})}else throw new ds("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else throw new ds("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new cn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await fs(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/"),{data:i,error:o}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Gt});return await un(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new cn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,l=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Gt}),{data:a,error:f}=l;return f?{data:{user:null,session:null},error:f}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new cn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:f})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let f=null,d=null;this.flowType==="pkce"&&([f,d]=await _r(this.storage,this.storageKey));const{error:m}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:f,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:a}=e,{data:f,error:d}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:d}}throw new ds("You must provide either an email or phone number.")}catch(l){if(Oe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Gt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,f=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(n){if(Oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await _r(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ic})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new nr;const{error:n}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ds("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,f,d){return!o&&f==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,f,d)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kt}):await this._useSession(async t=>{var s,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new nr;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await _r(this.storage,this.storageKey));const{data:f,error:d}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Kt});if(d)throw d;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Ii(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nr;const t=Date.now()/1e3;let s=t,n=!0,i=null;const o=Ii(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new nr;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!pt())throw new hs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Li("Not a valid PKCE flow url.");const t=an(window.location.href);if(e){if(!t.code)throw new Li("No code detected.");const{data:T,error:D}=await this._exchangeCodeForSession(t.code);if(D)throw D;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:T.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new hs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:f}=t;if(!i||!l||!o||!f)throw new hs("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let p=d+m;a&&(p=parseInt(a));const v=p-d;v*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const _=p-m;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,p,d);const{data:b,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:p,refresh_token:o,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(t){if(Oe(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=an(window.location.href);return!!(pt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=an(window.location.href),t=await fs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Pc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await un(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=bc(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await _r(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,f,d;const{data:m,error:p}=i;if(p)throw p;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return pt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Oe(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await yc(async n=>(n>0&&await wc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&fn(i)&&Date.now()+o-s<Fr})}catch(s){if(this._debug(t,"error",s),Oe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),pt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await fs(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+Ai;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ai}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fn(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Hs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),Oe(i)){const o={session:null,error:i};return fn(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Hl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await un(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Fr}ms, refresh threshold is ${Fi} ticks`),n<=Fi&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ql)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await _r(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}Qr.nextInstanceID=0;const zc=Qr;class Gc extends zc{constructor(e){super(e)}}var Jc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(m){o(m)}}function a(d){try{f(s.throw(d))}catch(m){o(m)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class Kc{constructor(e,t,s){var n,i,o,l,a,f,d,m;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const p=fc(e);this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,this.functionsUrl=`${p}/functions/v1`;const v=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_={db:nc,realtime:oc,auth:Object.assign(Object.assign({},ic),{storageKey:v}),global:sc},b=dc(s??{},_);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(f=b.global)===null||f===void 0?void 0:f.fetch),this.fetch=cc(t,this._getAccessToken.bind(this),(d=b.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new qn(`${p}/rest/v1`,{headers:this.headers,schema:(m=b.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new bu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ec(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Jc(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,f){var d;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gc({url:this.authUrl,headers:Object.assign(Object.assign({},m),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:f,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new Fu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zc=(r,e,t)=>new Kc(r,e,t),ee=Zc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function Bi(r){let e,t,s,n;return{c(){e=X(`|\r
          `),t=h("a"),t.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',s=g(),n=h("a"),n.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',u(t,"class","nav-link svelte-w9uiv3"),u(t,"href","./#/borrow"),u(n,"class","nav-link svelte-w9uiv3"),u(n,"href","./#/return")},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),P(i,n,o)},d(i){i&&(M(e),M(t),M(s),M(n))}}}function Qc(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F=r[0]=="staff"&&Bi();return{c(){e=h("nav"),t=h("div"),s=h("a"),s.innerHTML=`<i class="bi bi-book"></i>
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-xl-inline d-none">CTADVDBL Project</small>`,n=g(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=g(),l=h("div"),a=h("div"),f=h("a"),f.innerHTML='<i class="bi bi-house-door"></i> Home',d=g(),m=h("a"),m.innerHTML='<i class="bi bi-journal"></i> Books',p=g(),v=h("a"),v.innerHTML='<i class="bi bi-person"></i> Authors',_=g(),b=h("a"),b.innerHTML='<i class="bi bi-building"></i> Publishers',y=g(),F&&F.c(),w=X(`\r
        | \r
        `),T=h("li"),D=h("a"),$=h("i"),S=g(),k=X(r[1]),O=g(),C=h("ul"),I=h("li"),N=h("a"),L=h("span"),B=X("  "),Y=X(r[2]),W=g(),H=h("li"),H.innerHTML='<hr class="dropdown-divider"/>',q=g(),V=h("li"),G=h("a"),G.innerHTML='<i class="bi bi-door-open-fill"></i> Log Out',u(s,"class","navbar-brand m-0 px-2 svelte-w9uiv3"),u(s,"href","./#/"),u(i,"class","navbar-toggler"),u(i,"type","button"),u(i,"data-bs-toggle","collapse"),u(i,"data-bs-target","#navbarContent"),u(f,"class","nav-link svelte-w9uiv3"),u(f,"href","./#/"),u(m,"class","nav-link svelte-w9uiv3"),u(m,"href","./#/search"),u(v,"class","nav-link svelte-w9uiv3"),u(v,"href","./#/search/author"),u(b,"class","nav-link svelte-w9uiv3"),u(b,"href","./#/search/publisher"),u($,"class","bi bi-person-fill"),u(D,"class","nav-link dropdown-toggle svelte-w9uiv3"),u(D,"href","#"),u(D,"role","button"),u(D,"data-bs-toggle","dropdown"),u(D,"aria-expanded","false"),u(L,"class",A="bi bi-"+r[3]+" svelte-w9uiv3"),u(N,"class","dropdown-item svelte-w9uiv3"),u(N,"href","./#/"),u(G,"class","dropdown-item text-danger svelte-w9uiv3"),u(G,"href","./#/"),u(C,"class","dropdown-menu"),u(T,"class","nav-item dropdown"),u(a,"class","navbar-nav ms-auto text-center align-items-center svelte-w9uiv3"),u(l,"class","collapse navbar-collapse"),u(l,"id","navbarContent"),u(t,"class","container px-4 fw-semibold"),u(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow d-print-none")},m(z,ue){P(z,e,ue),c(e,t),c(t,s),c(t,n),c(t,i),c(t,o),c(t,l),c(l,a),c(a,f),c(a,d),c(a,m),c(a,p),c(a,v),c(a,_),c(a,b),c(a,y),F&&F.m(a,null),c(a,w),c(a,T),c(T,D),c(D,$),c(D,S),c(D,k),c(T,O),c(T,C),c(C,I),c(I,N),c(N,L),c(N,B),c(N,Y),c(C,W),c(C,H),c(C,q),c(C,V),c(V,G),re||(E=[U(N,"click",gt(r[4])),U(G,"click",r[5])],re=!0)},p(z,[ue]){z[0]=="staff"?F||(F=Bi(),F.c(),F.m(a,w)):F&&(F.d(1),F=null),ue&2&&le(k,z[1]),ue&8&&A!==(A="bi bi-"+z[3]+" svelte-w9uiv3")&&u(L,"class",A),ue&4&&le(Y,z[2])},i:x,o:x,d(z){z&&M(e),F&&F.d(),re=!1,ge(E)}}}function Xc(r,e,t){let s,n,i,o=localStorage.getItem("user_id");xt.subscribe(p=>t(0,i=p)),a();let l="";async function a(){const{data:p,error:v}=await ee.from("account_details").select("lname").eq("user_id",o).single();v&&console.error(v),console.log(o,p),t(1,l=p.lname)}let f=localStorage.getItem("theme")||"light";function d(){t(6,f=f=="light"?"dark":"light"),localStorage.setItem("theme",f)}async function m(){if(i=="client"){const{error:p}=await ee.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,stud_id:o});p&&console.error(p)}else{const{error:p}=await ee.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,staff_id:o});p&&console.error(p)}xt.set(""),bs.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return r.$$.update=()=>{r.$$.dirty&64&&document.querySelector("body").setAttribute("data-bs-theme",f),r.$$.dirty&64&&t(3,s=f=="dark"?"brightness-high-fill":"moon-stars-fill"),r.$$.dirty&64&&t(2,n=f=="dark"?"Light Theme":"Dark Theme")},[i,l,n,s,d,m,f]}class Bl extends De{constructor(e){super(),Se(this,e,Xc,Qc,ye,{})}}function xc(r){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,s){P(t,e,s)},p:x,i:x,o:x,d(t){t&&M(e)}}}class ef extends De{constructor(e){super(),Se(this,e,null,xc,ye,{})}}function tf(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[0]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[4]),s=!0)},p(i,o){o&1&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[0]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function rf(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function sf(r){let e,t,s,n,i,o,l,a,f,d,m,p;function v(y,w){return y[3]?rf:tf}let _=v(r),b=_(r);return{c(){e=h("div"),b.c(),t=g(),s=h("div"),n=h("h5"),i=h("a"),o=X(r[1]),a=g(),f=h("small"),d=h("i"),m=g(),p=X(r[2]),u(i,"class","stretched-link svelte-1a99e4f"),u(i,"href",l="./#/book/"+r[0]),u(n,"class","card-title"),u(d,"class","bi bi-person"),u(f,"class","card-text"),u(s,"class","card-body"),u(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(y,w){P(y,e,w),b.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o),c(s,a),c(s,f),c(f,d),c(f,m),c(f,p)},p(y,[w]){_===(_=v(y))&&b?b.p(y,w):(b.d(1),b=_(y),b&&(b.c(),b.m(e,t))),w&2&&le(o,y[1]),w&1&&l!==(l="./#/book/"+y[0])&&u(i,"href",l),w&4&&le(p,y[2])},i:x,o:x,d(y){y&&M(e),b.d()}}}function nf(r,e,t){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=!1;const l=()=>t(3,o=!0);return r.$$set=a=>{"id"in a&&t(0,s=a.id),"title"in a&&t(1,n=a.title),"author"in a&&t(2,i=a.author)},[s,n,i,o,l]}class Fs extends De{constructor(e){super(),Se(this,e,nf,sf,ye,{id:0,title:1,author:2})}}function Wi(r){let e,t,s,n,i,o,l;return{c(){e=h("div"),t=h("a"),s=h("button"),n=X(r[3]),i=g(),o=h("i"),u(o,"class","bi bi-arrow-right"),u(s,"class","btn btn-outline-primary btn-sm"),u(t,"href",l="./#/"+r[2]),u(e,"class","align-middle align-self-center")},m(a,f){P(a,e,f),c(e,t),c(t,s),c(s,n),c(s,i),c(s,o)},p(a,f){f&8&&le(n,a[3]),f&4&&l!==(l="./#/"+a[2])&&u(t,"href",l)},d(a){a&&M(e)}}}function of(r){let e,t,s,n,i,o,l,a,f,d,m=r[2]!==""&&Wi(r);const p=r[5].default,v=As(p,r,r[4],null);return{c(){e=h("section"),t=h("div"),s=h("h4"),n=h("i"),o=g(),l=X(r[0]),a=g(),m&&m.c(),f=g(),v&&v.c(),u(n,"class",i="bi bi-"+r[1]),u(s,"class","my-3"),u(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(_,b){P(_,e,b),c(e,t),c(t,s),c(s,n),c(s,o),c(s,l),c(t,a),m&&m.m(t,null),c(e,f),v&&v.m(e,null),d=!0},p(_,[b]){(!d||b&2&&i!==(i="bi bi-"+_[1]))&&u(n,"class",i),(!d||b&1)&&le(l,_[0]),_[2]!==""?m?m.p(_,b):(m=Wi(_),m.c(),m.m(t,null)):m&&(m.d(1),m=null),v&&v.p&&(!d||b&16)&&Ls(v,p,_,_[4],d?Is(p,_[4],b,null):Ys(_[4]),null)},i(_){d||(j(v,_),d=!0)},o(_){R(v,_),d=!1},d(_){_&&M(e),m&&m.d(),v&&v.d(_)}}}function lf(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return r.$$set=f=>{"title"in f&&t(0,i=f.title),"icon"in f&&t(1,o=f.icon),"link"in f&&t(2,l=f.link),"linkText"in f&&t(3,a=f.linkText),"$$scope"in f&&t(4,n=f.$$scope)},[i,o,l,a,n,s]}class Dt extends De{constructor(e){super(),Se(this,e,lf,of,ye,{title:0,icon:1,link:2,linkText:3})}}function af(r){const e=r-1;return e*e*e+1}function Ke(r,{delay:e=0,duration:t=400,easing:s=An}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*n}`}}function Ot(r,{delay:e=0,duration:t=400,easing:s=af,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(r),a=+l.opacity,f=l.transform==="none"?"":l.transform,d=a*(1-o),[m,p]=yi(n),[v,_]=yi(i);return{delay:e,duration:t,easing:s,css:(b,y)=>`
			transform: ${f} translate(${(1-b)*m}${p}, ${(1-b)*v}${_});
			opacity: ${a-d*y}`}}function uf(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',u(e,"class","d-flex justify-content-center")},m(t,s){P(t,e,s)},p:x,i:x,o:x,d(t){t&&M(e)}}}class tr extends De{constructor(e){super(),Se(this,e,null,uf,ye,{})}}function cf(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+r[1]+".jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[3]),s=!0)},p(i,o){o&2&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+i[1]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function ff(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function df(r){let e,t,s,n,i,o,l;function a(m,p){return m[2]?ff:cf}let f=a(r),d=f(r);return{c(){e=h("div"),d.c(),t=g(),s=h("div"),n=h("h6"),i=h("a"),o=X(r[0]),u(i,"class","stretched-link svelte-1rzxrzv"),u(i,"href",l="./#/author/"+r[1]),u(n,"class","card-title text-center"),u(s,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(m,p){P(m,e,p),d.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o)},p(m,[p]){f===(f=a(m))&&d?d.p(m,p):(d.d(1),d=f(m),d&&(d.c(),d.m(e,t))),p&1&&le(o,m[0]),p&2&&l!==(l="./#/author/"+m[1])&&u(i,"href",l)},i:x,o:x,d(m){m&&M(e),d.d()}}}function hf(r,e,t){let{name:s}=e,{id:n}=e,i=!1;const o=()=>t(2,i=!0);return r.$$set=l=>{"name"in l&&t(0,s=l.name),"id"in l&&t(1,n=l.id)},[s,n,i,o]}class Wl extends De{constructor(e){super(),Se(this,e,hf,df,ye,{name:0,id:1})}}function mf(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+r[1]+".jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[3]),s=!0)},p(i,o){o&2&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+i[1]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function pf(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./default-profile.jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function _f(r){let e,t,s,n,i,o,l;function a(m,p){return m[2]?pf:mf}let f=a(r),d=f(r);return{c(){e=h("div"),d.c(),t=g(),s=h("div"),n=h("h6"),i=h("a"),o=X(r[0]),u(i,"class","stretched-link svelte-1rzxrzv"),u(i,"href",l="./#/publisher/"+r[1]),u(n,"class","card-title text-center"),u(s,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(m,p){P(m,e,p),d.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o)},p(m,[p]){f===(f=a(m))&&d?d.p(m,p):(d.d(1),d=f(m),d&&(d.c(),d.m(e,t))),p&1&&le(o,m[0]),p&2&&l!==(l="./#/publisher/"+m[1])&&u(i,"href",l)},i:x,o:x,d(m){m&&M(e),d.d()}}}function bf(r,e,t){let{name:s}=e,{id:n}=e,i=!1;const o=()=>t(2,i=!0);return r.$$set=l=>{"name"in l&&t(0,s=l.name),"id"in l&&t(1,n=l.id)},[s,n,i,o]}class Vl extends De{constructor(e){super(),Se(this,e,bf,_f,ye,{name:0,id:1})}}function gf(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),s=h("h2"),s.textContent="Error",n=g(),i=h("p"),o=X(r[0]),l=X(": "),a=X(r[1]),f=g(),d=h("a"),d.textContent="Reload",u(d,"href","./#/"),u(d,"class","fw-bold"),u(t,"class","text-center"),u(e,"class","d-flex align-items-center justify-content-center my-3")},m(m,p){P(m,e,p),c(e,t),c(t,s),c(t,n),c(t,i),c(i,o),c(i,l),c(i,a),c(t,f),c(t,d)},p(m,[p]){p&1&&le(o,m[0]),p&2&&le(a,m[1])},i:x,o:x,d(m){m&&M(e)}}}function vf(r,e,t){let{code:s="err"}=e,{message:n}=e;return r.$$set=i=>{"code"in i&&t(0,s=i.code),"message"in i&&t(1,n=i.message)},[s,n]}let qs=class extends De{constructor(e){super(),Se(this,e,vf,gf,ye,{code:0,message:1})}};function wf(r){let e,t,s,n,i,o,l,a,f,d,m;return{c(){e=h("div"),t=h("div"),s=h("h5"),n=h("a"),i=X(r[1]),l=g(),a=h("div"),f=h("span"),d=X(r[2]),u(n,"class","stretched-link svelte-9p7s9b"),u(n,"href",o="./#/book/"+r[0]),u(s,"class","card-title"),u(f,"class",m="badge rounded-pill text-bg-"+r[3]+" svelte-9p7s9b"),u(t,"class","card-body"),u(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(p,v){P(p,e,v),c(e,t),c(t,s),c(s,n),c(n,i),c(t,l),c(t,a),c(a,f),c(f,d)},p(p,[v]){v&2&&le(i,p[1]),v&1&&o!==(o="./#/book/"+p[0])&&u(n,"href",o),v&4&&le(d,p[2]),v&8&&m!==(m="badge rounded-pill text-bg-"+p[3]+" svelte-9p7s9b")&&u(f,"class",m)},i:x,o:x,d(p){p&&M(e)}}}function yf(r,e,t){let{id:s=0}=e,{title:n}=e,{label:i}=e,{color:o}=e;return r.$$set=l=>{"id"in l&&t(0,s=l.id),"title"in l&&t(1,n=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[s,n,i,o]}class kf extends De{constructor(e){super(),Se(this,e,yf,wf,ye,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var zl;function te(){return zl.apply(null,arguments)}function $f(r){zl=r}function wt(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function ur(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function Re(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function zn(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(Re(r,e))return!1;return!0}function nt(r){return r===void 0}function qt(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function os(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function Gl(r,e){var t=[],s,n=r.length;for(s=0;s<n;++s)t.push(e(r[s],s));return t}function Zt(r,e){for(var t in e)Re(e,t)&&(r[t]=e[t]);return Re(e,"toString")&&(r.toString=e.toString),Re(e,"valueOf")&&(r.valueOf=e.valueOf),r}function Mt(r,e,t,s){return _a(r,e,t,s,!0).utc()}function Sf(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function we(r){return r._pf==null&&(r._pf=Sf()),r._pf}var Tn;Array.prototype.some?Tn=Array.prototype.some:Tn=function(r){var e=Object(this),t=e.length>>>0,s;for(s=0;s<t;s++)if(s in e&&r.call(this,e[s],s,e))return!0;return!1};function Gn(r){var e=null,t=!1,s=r._d&&!isNaN(r._d.getTime());if(s&&(e=we(r),t=Tn.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=s;else return s;return r._isValid}function Bs(r){var e=Mt(NaN);return r!=null?Zt(we(e),r):we(e).userInvalidated=!0,e}var Vi=te.momentProperties=[],dn=!1;function Jn(r,e){var t,s,n,i=Vi.length;if(nt(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),nt(e._i)||(r._i=e._i),nt(e._f)||(r._f=e._f),nt(e._l)||(r._l=e._l),nt(e._strict)||(r._strict=e._strict),nt(e._tzm)||(r._tzm=e._tzm),nt(e._isUTC)||(r._isUTC=e._isUTC),nt(e._offset)||(r._offset=e._offset),nt(e._pf)||(r._pf=we(e)),nt(e._locale)||(r._locale=e._locale),i>0)for(t=0;t<i;t++)s=Vi[t],n=e[s],nt(n)||(r[s]=n);return r}function ls(r){Jn(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),dn===!1&&(dn=!0,te.updateOffset(this),dn=!1)}function yt(r){return r instanceof ls||r!=null&&r._isAMomentObject!=null}function Jl(r){te.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function dt(r,e){var t=!0;return Zt(function(){if(te.deprecationHandler!=null&&te.deprecationHandler(null,r),t){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])Re(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}Jl(r+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var zi={};function Kl(r,e){te.deprecationHandler!=null&&te.deprecationHandler(r,e),zi[r]||(Jl(e),zi[r]=!0)}te.suppressDeprecationWarnings=!1;te.deprecationHandler=null;function Pt(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function Df(r){var e,t;for(t in r)Re(r,t)&&(e=r[t],Pt(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function On(r,e){var t=Zt({},r),s;for(s in e)Re(e,s)&&(ur(r[s])&&ur(e[s])?(t[s]={},Zt(t[s],r[s]),Zt(t[s],e[s])):e[s]!=null?t[s]=e[s]:delete t[s]);for(s in r)Re(r,s)&&!Re(e,s)&&ur(r[s])&&(t[s]=Zt({},t[s]));return t}function Kn(r){r!=null&&this.set(r)}var Cn;Object.keys?Cn=Object.keys:Cn=function(r){var e,t=[];for(e in r)Re(r,e)&&t.push(e);return t};var Tf={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Of(r,e,t){var s=this._calendar[r]||this._calendar.sameElse;return Pt(s)?s.call(e,t):s}function Ct(r,e,t){var s=""+Math.abs(r),n=e-s.length,i=r>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var Zn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ms=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hn={},Tr={};function be(r,e,t,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),r&&(Tr[r]=n),e&&(Tr[e[0]]=function(){return Ct(n.apply(this,arguments),e[1],e[2])}),t&&(Tr[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),r)})}function Cf(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Mf(r){var e=r.match(Zn),t,s;for(t=0,s=e.length;t<s;t++)Tr[e[t]]?e[t]=Tr[e[t]]:e[t]=Cf(e[t]);return function(n){var i="",o;for(o=0;o<s;o++)i+=Pt(e[o])?e[o].call(n,r):e[o];return i}}function gs(r,e){return r.isValid()?(e=Zl(e,r.localeData()),hn[e]=hn[e]||Mf(e),hn[e](r)):r.localeData().invalidDate()}function Zl(r,e){var t=5;function s(n){return e.longDateFormat(n)||n}for(ms.lastIndex=0;t>=0&&ms.test(r);)r=r.replace(ms,s),ms.lastIndex=0,t-=1;return r}var Pf={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function jf(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(Zn).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[r])}var Ef="Invalid date";function Rf(){return this._invalidDate}var Af="%d",If=/\d{1,2}/;function Lf(r){return this._ordinal.replace("%d",r)}var Yf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Nf(r,e,t,s){var n=this._relativeTime[t];return Pt(n)?n(r,e,t,s):n.replace(/%d/i,r)}function Uf(r,e){var t=this._relativeTime[r>0?"future":"past"];return Pt(t)?t(e):t.replace(/%s/i,e)}var Gi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ht(r){return typeof r=="string"?Gi[r]||Gi[r.toLowerCase()]:void 0}function Qn(r){var e={},t,s;for(s in r)Re(r,s)&&(t=ht(s),t&&(e[t]=r[s]));return e}var Hf={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ff(r){var e=[],t;for(t in r)Re(r,t)&&e.push({unit:t,priority:Hf[t]});return e.sort(function(s,n){return s.priority-n.priority}),e}var Ql=/\d/,lt=/\d\d/,Xl=/\d{3}/,Xn=/\d{4}/,Ws=/[+-]?\d{6}/,Be=/\d\d?/,xl=/\d\d\d\d?/,ea=/\d\d\d\d\d\d?/,Vs=/\d{1,3}/,xn=/\d{1,4}/,zs=/[+-]?\d{1,6}/,Ir=/\d+/,Gs=/[+-]?\d+/,qf=/Z|[+-]\d\d:?\d\d/gi,Js=/Z|[+-]\d\d(?::?\d\d)?/gi,Bf=/[+-]?\d+(\.\d{1,3})?/,as=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Lr=/^[1-9]\d?/,ei=/^([1-9]\d|\d)/,Ms;Ms={};function he(r,e,t){Ms[r]=Pt(e)?e:function(s,n){return s&&t?t:e}}function Wf(r,e){return Re(Ms,r)?Ms[r](e._strict,e._locale):new RegExp(Vf(r))}function Vf(r){return Ut(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,n,i){return t||s||n||i}))}function Ut(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ct(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function Ce(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=ct(e)),t}var Mn={};function Ue(r,e){var t,s=e,n;for(typeof r=="string"&&(r=[r]),qt(e)&&(s=function(i,o){o[e]=Ce(i)}),n=r.length,t=0;t<n;t++)Mn[r[t]]=s}function us(r,e){Ue(r,function(t,s,n,i){n._w=n._w||{},e(t,n._w,n,i)})}function zf(r,e,t){e!=null&&Re(Mn,r)&&Mn[r](e,t._a,t,r)}function Ks(r){return r%4===0&&r%100!==0||r%400===0}var et=0,Lt=1,St=2,Qe=3,bt=4,Yt=5,ar=6,Gf=7,Jf=8;be("Y",0,0,function(){var r=this.year();return r<=9999?Ct(r,4):"+"+r});be(0,["YY",2],0,function(){return this.year()%100});be(0,["YYYY",4],0,"year");be(0,["YYYYY",5],0,"year");be(0,["YYYYYY",6,!0],0,"year");he("Y",Gs);he("YY",Be,lt);he("YYYY",xn,Xn);he("YYYYY",zs,Ws);he("YYYYYY",zs,Ws);Ue(["YYYYY","YYYYYY"],et);Ue("YYYY",function(r,e){e[et]=r.length===2?te.parseTwoDigitYear(r):Ce(r)});Ue("YY",function(r,e){e[et]=te.parseTwoDigitYear(r)});Ue("Y",function(r,e){e[et]=parseInt(r,10)});function Jr(r){return Ks(r)?366:365}te.parseTwoDigitYear=function(r){return Ce(r)+(Ce(r)>68?1900:2e3)};var ta=Yr("FullYear",!0);function Kf(){return Ks(this.year())}function Yr(r,e){return function(t){return t!=null?(ra(this,r,t),te.updateOffset(this,e),this):Xr(this,r)}}function Xr(r,e){if(!r.isValid())return NaN;var t=r._d,s=r._isUTC;switch(e){case"Milliseconds":return s?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return s?t.getUTCSeconds():t.getSeconds();case"Minutes":return s?t.getUTCMinutes():t.getMinutes();case"Hours":return s?t.getUTCHours():t.getHours();case"Date":return s?t.getUTCDate():t.getDate();case"Day":return s?t.getUTCDay():t.getDay();case"Month":return s?t.getUTCMonth():t.getMonth();case"FullYear":return s?t.getUTCFullYear():t.getFullYear();default:return NaN}}function ra(r,e,t){var s,n,i,o,l;if(!(!r.isValid()||isNaN(t))){switch(s=r._d,n=r._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(t):s.setMilliseconds(t));case"Seconds":return void(n?s.setUTCSeconds(t):s.setSeconds(t));case"Minutes":return void(n?s.setUTCMinutes(t):s.setMinutes(t));case"Hours":return void(n?s.setUTCHours(t):s.setHours(t));case"Date":return void(n?s.setUTCDate(t):s.setDate(t));case"FullYear":break;default:return}i=t,o=r.month(),l=r.date(),l=l===29&&o===1&&!Ks(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function Zf(r){return r=ht(r),Pt(this[r])?this[r]():this}function Qf(r,e){if(typeof r=="object"){r=Qn(r);var t=Ff(r),s,n=t.length;for(s=0;s<n;s++)this[t[s].unit](r[t[s].unit])}else if(r=ht(r),Pt(this[r]))return this[r](e);return this}function Xf(r,e){return(r%e+e)%e}var ze;Array.prototype.indexOf?ze=Array.prototype.indexOf:ze=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function ti(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=Xf(e,12);return r+=(e-t)/12,t===1?Ks(r)?29:28:31-t%7%2}be("M",["MM",2],"Mo",function(){return this.month()+1});be("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)});be("MMMM",0,0,function(r){return this.localeData().months(this,r)});he("M",Be,Lr);he("MM",Be,lt);he("MMM",function(r,e){return e.monthsShortRegex(r)});he("MMMM",function(r,e){return e.monthsRegex(r)});Ue(["M","MM"],function(r,e){e[Lt]=Ce(r)-1});Ue(["MMM","MMMM"],function(r,e,t,s){var n=t._locale.monthsParse(r,s,t._strict);n!=null?e[Lt]=n:we(t).invalidMonth=r});var xf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),sa="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),na=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ed=as,td=as;function rd(r,e){return r?wt(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||na).test(e)?"format":"standalone"][r.month()]:wt(this._months)?this._months:this._months.standalone}function sd(r,e){return r?wt(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[na.test(e)?"format":"standalone"][r.month()]:wt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function nd(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=Mt([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(n=ze.call(this._shortMonthsParse,o),n!==-1?n:null):(n=ze.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=ze.call(this._shortMonthsParse,o),n!==-1?n:(n=ze.call(this._longMonthsParse,o),n!==-1?n:null)):(n=ze.call(this._longMonthsParse,o),n!==-1?n:(n=ze.call(this._shortMonthsParse,o),n!==-1?n:null))}function id(r,e,t){var s,n,i;if(this._monthsParseExact)return nd.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=Mt([2e3,s]),t&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[s].test(r))return s;if(t&&e==="MMM"&&this._shortMonthsParse[s].test(r))return s;if(!t&&this._monthsParse[s].test(r))return s}}function ia(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=Ce(e);else if(e=r.localeData().monthsParse(e),!qt(e))return r}var t=e,s=r.date();return s=s<29?s:Math.min(s,ti(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,s):r._d.setMonth(t,s),r}function oa(r){return r!=null?(ia(this,r),te.updateOffset(this,!0),this):Xr(this,"Month")}function od(){return ti(this.year(),this.month())}function ld(r){return this._monthsParseExact?(Re(this,"_monthsRegex")||la.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(Re(this,"_monthsShortRegex")||(this._monthsShortRegex=ed),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function ad(r){return this._monthsParseExact?(Re(this,"_monthsRegex")||la.call(this),r?this._monthsStrictRegex:this._monthsRegex):(Re(this,"_monthsRegex")||(this._monthsRegex=td),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function la(){function r(a,f){return f.length-a.length}var e=[],t=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=Mt([2e3,n]),o=Ut(this.monthsShort(i,"")),l=Ut(this.months(i,"")),e.push(o),t.push(l),s.push(l),s.push(o);e.sort(r),t.sort(r),s.sort(r),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ud(r,e,t,s,n,i,o){var l;return r<100&&r>=0?(l=new Date(r+400,e,t,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(r)):l=new Date(r,e,t,s,n,i,o),l}function xr(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ps(r,e,t){var s=7+e-t,n=(7+xr(r,0,s).getUTCDay()-e)%7;return-n+s-1}function aa(r,e,t,s,n){var i=(7+t-s)%7,o=Ps(r,s,n),l=1+7*(e-1)+i+o,a,f;return l<=0?(a=r-1,f=Jr(a)+l):l>Jr(r)?(a=r+1,f=l-Jr(r)):(a=r,f=l),{year:a,dayOfYear:f}}function es(r,e,t){var s=Ps(r.year(),e,t),n=Math.floor((r.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=r.year()-1,i=n+Ht(o,e,t)):n>Ht(r.year(),e,t)?(i=n-Ht(r.year(),e,t),o=r.year()+1):(o=r.year(),i=n),{week:i,year:o}}function Ht(r,e,t){var s=Ps(r,e,t),n=Ps(r+1,e,t);return(Jr(r)-s+n)/7}be("w",["ww",2],"wo","week");be("W",["WW",2],"Wo","isoWeek");he("w",Be,Lr);he("ww",Be,lt);he("W",Be,Lr);he("WW",Be,lt);us(["w","ww","W","WW"],function(r,e,t,s){e[s.substr(0,1)]=Ce(r)});function cd(r){return es(r,this._week.dow,this._week.doy).week}var fd={dow:0,doy:6};function dd(){return this._week.dow}function hd(){return this._week.doy}function md(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function pd(r){var e=es(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}be("d",0,"do","day");be("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)});be("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)});be("dddd",0,0,function(r){return this.localeData().weekdays(this,r)});be("e",0,0,"weekday");be("E",0,0,"isoWeekday");he("d",Be);he("e",Be);he("E",Be);he("dd",function(r,e){return e.weekdaysMinRegex(r)});he("ddd",function(r,e){return e.weekdaysShortRegex(r)});he("dddd",function(r,e){return e.weekdaysRegex(r)});us(["dd","ddd","dddd"],function(r,e,t,s){var n=t._locale.weekdaysParse(r,s,t._strict);n!=null?e.d=n:we(t).invalidWeekday=r});us(["d","e","E"],function(r,e,t,s){e[s]=Ce(r)});function _d(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function bd(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function ri(r,e){return r.slice(e,7).concat(r.slice(0,e))}var gd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ua="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wd=as,yd=as,kd=as;function $d(r,e){var t=wt(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?ri(t,this._week.dow):r?t[r.day()]:t}function Sd(r){return r===!0?ri(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function Dd(r){return r===!0?ri(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function Td(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=Mt([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(n=ze.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=ze.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=ze.call(this._weekdaysParse,o),n!==-1||(n=ze.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=ze.call(this._shortWeekdaysParse,o),n!==-1||(n=ze.call(this._weekdaysParse,o),n!==-1)?n:(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=ze.call(this._minWeekdaysParse,o),n!==-1||(n=ze.call(this._weekdaysParse,o),n!==-1)?n:(n=ze.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Od(r,e,t){var s,n,i;if(this._weekdaysParseExact)return Td.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=Mt([2e3,1]).day(s),t&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[s].test(r))return s;if(t&&e==="ddd"&&this._shortWeekdaysParse[s].test(r))return s;if(t&&e==="dd"&&this._minWeekdaysParse[s].test(r))return s;if(!t&&this._weekdaysParse[s].test(r))return s}}function Cd(r){if(!this.isValid())return r!=null?this:NaN;var e=Xr(this,"Day");return r!=null?(r=_d(r,this.localeData()),this.add(r-e,"d")):e}function Md(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function Pd(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=bd(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function jd(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(Re(this,"_weekdaysRegex")||(this._weekdaysRegex=wd),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ed(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Re(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=yd),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Rd(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Re(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kd),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function si(){function r(d,m){return m.length-d.length}var e=[],t=[],s=[],n=[],i,o,l,a,f;for(i=0;i<7;i++)o=Mt([2e3,1]).day(i),l=Ut(this.weekdaysMin(o,"")),a=Ut(this.weekdaysShort(o,"")),f=Ut(this.weekdays(o,"")),e.push(l),t.push(a),s.push(f),n.push(l),n.push(a),n.push(f);e.sort(r),t.sort(r),s.sort(r),n.sort(r),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ni(){return this.hours()%12||12}function Ad(){return this.hours()||24}be("H",["HH",2],0,"hour");be("h",["hh",2],0,ni);be("k",["kk",2],0,Ad);be("hmm",0,0,function(){return""+ni.apply(this)+Ct(this.minutes(),2)});be("hmmss",0,0,function(){return""+ni.apply(this)+Ct(this.minutes(),2)+Ct(this.seconds(),2)});be("Hmm",0,0,function(){return""+this.hours()+Ct(this.minutes(),2)});be("Hmmss",0,0,function(){return""+this.hours()+Ct(this.minutes(),2)+Ct(this.seconds(),2)});function ca(r,e){be(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ca("a",!0);ca("A",!1);function fa(r,e){return e._meridiemParse}he("a",fa);he("A",fa);he("H",Be,ei);he("h",Be,Lr);he("k",Be,Lr);he("HH",Be,lt);he("hh",Be,lt);he("kk",Be,lt);he("hmm",xl);he("hmmss",ea);he("Hmm",xl);he("Hmmss",ea);Ue(["H","HH"],Qe);Ue(["k","kk"],function(r,e,t){var s=Ce(r);e[Qe]=s===24?0:s});Ue(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r});Ue(["h","hh"],function(r,e,t){e[Qe]=Ce(r),we(t).bigHour=!0});Ue("hmm",function(r,e,t){var s=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[bt]=Ce(r.substr(s)),we(t).bigHour=!0});Ue("hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[bt]=Ce(r.substr(s,2)),e[Yt]=Ce(r.substr(n)),we(t).bigHour=!0});Ue("Hmm",function(r,e,t){var s=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[bt]=Ce(r.substr(s))});Ue("Hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[bt]=Ce(r.substr(s,2)),e[Yt]=Ce(r.substr(n))});function Id(r){return(r+"").toLowerCase().charAt(0)==="p"}var Ld=/[ap]\.?m?\.?/i,Yd=Yr("Hours",!0);function Nd(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var da={calendar:Tf,longDateFormat:Pf,invalidDate:Ef,ordinal:Af,dayOfMonthOrdinalParse:If,relativeTime:Yf,months:xf,monthsShort:sa,week:fd,weekdays:gd,weekdaysMin:vd,weekdaysShort:ua,meridiemParse:Ld},We={},qr={},ts;function Ud(r,e){var t,s=Math.min(r.length,e.length);for(t=0;t<s;t+=1)if(r[t]!==e[t])return t;return s}function Ji(r){return r&&r.toLowerCase().replace("_","-")}function Hd(r){for(var e=0,t,s,n,i;e<r.length;){for(i=Ji(r[e]).split("-"),t=i.length,s=Ji(r[e+1]),s=s?s.split("-"):null;t>0;){if(n=Zs(i.slice(0,t).join("-")),n)return n;if(s&&s.length>=t&&Ud(i,s)>=t-1)break;t--}e++}return ts}function Fd(r){return!!(r&&r.match("^[^/\\\\]*$"))}function Zs(r){var e=null,t;if(We[r]===void 0&&typeof ys<"u"&&ys&&ys.exports&&Fd(r))try{e=ts._abbr,t=require,t("./locale/"+r),Xt(e)}catch{We[r]=null}return We[r]}function Xt(r,e){var t;return r&&(nt(e)?t=Bt(r):t=ii(r,e),t?ts=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),ts._abbr}function ii(r,e){if(e!==null){var t,s=da;if(e.abbr=r,We[r]!=null)Kl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=We[r]._config;else if(e.parentLocale!=null)if(We[e.parentLocale]!=null)s=We[e.parentLocale]._config;else if(t=Zs(e.parentLocale),t!=null)s=t._config;else return qr[e.parentLocale]||(qr[e.parentLocale]=[]),qr[e.parentLocale].push({name:r,config:e}),null;return We[r]=new Kn(On(s,e)),qr[r]&&qr[r].forEach(function(n){ii(n.name,n.config)}),Xt(r),We[r]}else return delete We[r],null}function qd(r,e){if(e!=null){var t,s,n=da;We[r]!=null&&We[r].parentLocale!=null?We[r].set(On(We[r]._config,e)):(s=Zs(r),s!=null&&(n=s._config),e=On(n,e),s==null&&(e.abbr=r),t=new Kn(e),t.parentLocale=We[r],We[r]=t),Xt(r)}else We[r]!=null&&(We[r].parentLocale!=null?(We[r]=We[r].parentLocale,r===Xt()&&Xt(r)):We[r]!=null&&delete We[r]);return We[r]}function Bt(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return ts;if(!wt(r)){if(e=Zs(r),e)return e;r=[r]}return Hd(r)}function Bd(){return Cn(We)}function oi(r){var e,t=r._a;return t&&we(r).overflow===-2&&(e=t[Lt]<0||t[Lt]>11?Lt:t[St]<1||t[St]>ti(t[et],t[Lt])?St:t[Qe]<0||t[Qe]>24||t[Qe]===24&&(t[bt]!==0||t[Yt]!==0||t[ar]!==0)?Qe:t[bt]<0||t[bt]>59?bt:t[Yt]<0||t[Yt]>59?Yt:t[ar]<0||t[ar]>999?ar:-1,we(r)._overflowDayOfYear&&(e<et||e>St)&&(e=St),we(r)._overflowWeeks&&e===-1&&(e=Gf),we(r)._overflowWeekday&&e===-1&&(e=Jf),we(r).overflow=e),r}var Wd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zd=/Z|[+-]\d\d(?::?\d\d)?/,ps=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],mn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Gd=/^\/?Date\((-?\d+)/i,Jd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Kd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ha(r){var e,t,s=r._i,n=Wd.exec(s)||Vd.exec(s),i,o,l,a,f=ps.length,d=mn.length;if(n){for(we(r).iso=!0,e=0,t=f;e<t;e++)if(ps[e][1].exec(n[1])){o=ps[e][0],i=ps[e][2]!==!1;break}if(o==null){r._isValid=!1;return}if(n[3]){for(e=0,t=d;e<t;e++)if(mn[e][1].exec(n[3])){l=(n[2]||" ")+mn[e][0];break}if(l==null){r._isValid=!1;return}}if(!i&&l!=null){r._isValid=!1;return}if(n[4])if(zd.exec(n[4]))a="Z";else{r._isValid=!1;return}r._f=o+(l||"")+(a||""),ai(r)}else r._isValid=!1}function Zd(r,e,t,s,n,i){var o=[Qd(r),sa.indexOf(e),parseInt(t,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function Qd(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function Xd(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xd(r,e,t){if(r){var s=ua.indexOf(r),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return we(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function eh(r,e,t){if(r)return Kd[r];if(e)return 0;var s=parseInt(t,10),n=s%100,i=(s-n)/100;return i*60+n}function ma(r){var e=Jd.exec(Xd(r._i)),t;if(e){if(t=Zd(e[4],e[3],e[2],e[5],e[6],e[7]),!xd(e[1],t,r))return;r._a=t,r._tzm=eh(e[8],e[9],e[10]),r._d=xr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),we(r).rfc2822=!0}else r._isValid=!1}function th(r){var e=Gd.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(ha(r),r._isValid===!1)delete r._isValid;else return;if(ma(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:te.createFromInputFallback(r)}te.createFromInputFallback=dt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function yr(r,e,t){return r??e??t}function rh(r){var e=new Date(te.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function li(r){var e,t,s=[],n,i,o;if(!r._d){for(n=rh(r),r._w&&r._a[St]==null&&r._a[Lt]==null&&sh(r),r._dayOfYear!=null&&(o=yr(r._a[et],n[et]),(r._dayOfYear>Jr(o)||r._dayOfYear===0)&&(we(r)._overflowDayOfYear=!0),t=xr(o,0,r._dayOfYear),r._a[Lt]=t.getUTCMonth(),r._a[St]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=s[e]=n[e];for(;e<7;e++)r._a[e]=s[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[Qe]===24&&r._a[bt]===0&&r._a[Yt]===0&&r._a[ar]===0&&(r._nextDay=!0,r._a[Qe]=0),r._d=(r._useUTC?xr:ud).apply(null,s),i=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[Qe]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==i&&(we(r).weekdayMismatch=!0)}}function sh(r){var e,t,s,n,i,o,l,a,f;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=yr(e.GG,r._a[et],es(qe(),1,4).year),s=yr(e.W,1),n=yr(e.E,1),(n<1||n>7)&&(a=!0)):(i=r._locale._week.dow,o=r._locale._week.doy,f=es(qe(),i,o),t=yr(e.gg,r._a[et],f.year),s=yr(e.w,f.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>Ht(t,i,o)?we(r)._overflowWeeks=!0:a!=null?we(r)._overflowWeekday=!0:(l=aa(t,s,n,i,o),r._a[et]=l.year,r._dayOfYear=l.dayOfYear)}te.ISO_8601=function(){};te.RFC_2822=function(){};function ai(r){if(r._f===te.ISO_8601){ha(r);return}if(r._f===te.RFC_2822){ma(r);return}r._a=[],we(r).empty=!0;var e=""+r._i,t,s,n,i,o,l=e.length,a=0,f,d;for(n=Zl(r._f,r._locale).match(Zn)||[],d=n.length,t=0;t<d;t++)i=n[t],s=(e.match(Wf(i,r))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&we(r).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),Tr[i]?(s?we(r).empty=!1:we(r).unusedTokens.push(i),zf(i,s,r)):r._strict&&!s&&we(r).unusedTokens.push(i);we(r).charsLeftOver=l-a,e.length>0&&we(r).unusedInput.push(e),r._a[Qe]<=12&&we(r).bigHour===!0&&r._a[Qe]>0&&(we(r).bigHour=void 0),we(r).parsedDateParts=r._a.slice(0),we(r).meridiem=r._meridiem,r._a[Qe]=nh(r._locale,r._a[Qe],r._meridiem),f=we(r).era,f!==null&&(r._a[et]=r._locale.erasConvertYear(f,r._a[et])),li(r),oi(r)}function nh(r,e,t){var s;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(s=r.isPM(t),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function ih(r){var e,t,s,n,i,o,l=!1,a=r._f.length;if(a===0){we(r).invalidFormat=!0,r._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=Jn({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[n],ai(e),Gn(e)&&(o=!0),i+=we(e).charsLeftOver,i+=we(e).unusedTokens.length*10,we(e).score=i,l?i<s&&(s=i,t=e):(s==null||i<s||o)&&(s=i,t=e,o&&(l=!0));Zt(r,t||e)}function oh(r){if(!r._d){var e=Qn(r._i),t=e.day===void 0?e.date:e.day;r._a=Gl([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),li(r)}}function lh(r){var e=new ls(oi(pa(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function pa(r){var e=r._i,t=r._f;return r._locale=r._locale||Bt(r._l),e===null||t===void 0&&e===""?Bs({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),yt(e)?new ls(oi(e)):(os(e)?r._d=e:wt(t)?ih(r):t?ai(r):ah(r),Gn(r)||(r._d=null),r))}function ah(r){var e=r._i;nt(e)?r._d=new Date(te.now()):os(e)?r._d=new Date(e.valueOf()):typeof e=="string"?th(r):wt(e)?(r._a=Gl(e.slice(0),function(t){return parseInt(t,10)}),li(r)):ur(e)?oh(r):qt(e)?r._d=new Date(e):te.createFromInputFallback(r)}function _a(r,e,t,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(t===!0||t===!1)&&(s=t,t=void 0),(ur(r)&&zn(r)||wt(r)&&r.length===0)&&(r=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=t,i._i=r,i._f=e,i._strict=s,lh(i)}function qe(r,e,t,s){return _a(r,e,t,s,!1)}var uh=dt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=qe.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:Bs()}),ch=dt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=qe.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:Bs()});function ba(r,e){var t,s;if(e.length===1&&wt(e[0])&&(e=e[0]),!e.length)return qe();for(t=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][r](t))&&(t=e[s]);return t}function fh(){var r=[].slice.call(arguments,0);return ba("isBefore",r)}function dh(){var r=[].slice.call(arguments,0);return ba("isAfter",r)}var hh=function(){return Date.now?Date.now():+new Date},Br=["year","quarter","month","week","day","hour","minute","second","millisecond"];function mh(r){var e,t=!1,s,n=Br.length;for(e in r)if(Re(r,e)&&!(ze.call(Br,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(s=0;s<n;++s)if(r[Br[s]]){if(t)return!1;parseFloat(r[Br[s]])!==Ce(r[Br[s]])&&(t=!0)}return!0}function ph(){return this._isValid}function _h(){return kt(NaN)}function Qs(r){var e=Qn(r),t=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,f=e.second||0,d=e.millisecond||0;this._isValid=mh(e),this._milliseconds=+d+f*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+t*12,this._data={},this._locale=Bt(),this._bubble()}function vs(r){return r instanceof Qs}function Pn(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function bh(r,e,t){var s=Math.min(r.length,e.length),n=Math.abs(r.length-e.length),i=0,o;for(o=0;o<s;o++)Ce(r[o])!==Ce(e[o])&&i++;return i+n}function ga(r,e){be(r,0,0,function(){var t=this.utcOffset(),s="+";return t<0&&(t=-t,s="-"),s+Ct(~~(t/60),2)+e+Ct(~~t%60,2)})}ga("Z",":");ga("ZZ","");he("Z",Js);he("ZZ",Js);Ue(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=ui(Js,r)});var gh=/([\+\-]|\d\d)/gi;function ui(r,e){var t=(e||"").match(r),s,n,i;return t===null?null:(s=t[t.length-1]||[],n=(s+"").match(gh)||["-",0,0],i=+(n[1]*60)+Ce(n[2]),i===0?0:n[0]==="+"?i:-i)}function ci(r,e){var t,s;return e._isUTC?(t=e.clone(),s=(yt(r)||os(r)?r.valueOf():qe(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+s),te.updateOffset(t,!1),t):qe(r).local()}function jn(r){return-Math.round(r._d.getTimezoneOffset())}te.updateOffset=function(){};function vh(r,e,t){var s=this._offset||0,n;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=ui(Js,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(n=jn(this)),this._offset=r,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==r&&(!e||this._changeInProgress?ya(this,kt(r-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,te.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:jn(this)}function wh(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function yh(r){return this.utcOffset(0,r)}function kh(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(jn(this),"m")),this}function $h(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=ui(qf,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function Sh(r){return this.isValid()?(r=r?qe(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function Dh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Th(){if(!nt(this._isDSTShifted))return this._isDSTShifted;var r={},e;return Jn(r,this),r=pa(r),r._a?(e=r._isUTC?Mt(r._a):qe(r._a),this._isDSTShifted=this.isValid()&&bh(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Oh(){return this.isValid()?!this._isUTC:!1}function Ch(){return this.isValid()?this._isUTC:!1}function va(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Mh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ph=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function kt(r,e){var t=r,s=null,n,i,o;return vs(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:qt(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(s=Mh.exec(r))?(n=s[1]==="-"?-1:1,t={y:0,d:Ce(s[St])*n,h:Ce(s[Qe])*n,m:Ce(s[bt])*n,s:Ce(s[Yt])*n,ms:Ce(Pn(s[ar]*1e3))*n}):(s=Ph.exec(r))?(n=s[1]==="-"?-1:1,t={y:ir(s[2],n),M:ir(s[3],n),w:ir(s[4],n),d:ir(s[5],n),h:ir(s[6],n),m:ir(s[7],n),s:ir(s[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=jh(qe(t.from),qe(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Qs(t),vs(r)&&Re(r,"_locale")&&(i._locale=r._locale),vs(r)&&Re(r,"_isValid")&&(i._isValid=r._isValid),i}kt.fn=Qs.prototype;kt.invalid=_h;function ir(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function Ki(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function jh(r,e){var t;return r.isValid()&&e.isValid()?(e=ci(e,r),r.isBefore(e)?t=Ki(r,e):(t=Ki(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function wa(r,e){return function(t,s){var n,i;return s!==null&&!isNaN(+s)&&(Kl(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=s,s=i),n=kt(t,s),ya(this,n,r),this}}function ya(r,e,t,s){var n=e._milliseconds,i=Pn(e._days),o=Pn(e._months);r.isValid()&&(s=s??!0,o&&ia(r,Xr(r,"Month")+o*t),i&&ra(r,"Date",Xr(r,"Date")+i*t),n&&r._d.setTime(r._d.valueOf()+n*t),s&&te.updateOffset(r,i||o))}var Eh=wa(1,"add"),Rh=wa(-1,"subtract");function ka(r){return typeof r=="string"||r instanceof String}function Ah(r){return yt(r)||os(r)||ka(r)||qt(r)||Lh(r)||Ih(r)||r===null||r===void 0}function Ih(r){var e=ur(r)&&!zn(r),t=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],t=t||Re(r,i);return e&&t}function Lh(r){var e=wt(r),t=!1;return e&&(t=r.filter(function(s){return!qt(s)&&ka(r)}).length===0),e&&t}function Yh(r){var e=ur(r)&&!zn(r),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],t=t||Re(r,i);return e&&t}function Nh(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Uh(r,e){arguments.length===1&&(arguments[0]?Ah(arguments[0])?(r=arguments[0],e=void 0):Yh(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||qe(),s=ci(t,this).startOf("day"),n=te.calendarFormat(this,s)||"sameElse",i=e&&(Pt(e[n])?e[n].call(this,t):e[n]);return this.format(i||this.localeData().calendar(n,this,qe(t)))}function Hh(){return new ls(this)}function Fh(r,e){var t=yt(r)?r:qe(r);return this.isValid()&&t.isValid()?(e=ht(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function qh(r,e){var t=yt(r)?r:qe(r);return this.isValid()&&t.isValid()?(e=ht(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Bh(r,e,t,s){var n=yt(r)?r:qe(r),i=yt(e)?e:qe(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(s[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function Wh(r,e){var t=yt(r)?r:qe(r),s;return this.isValid()&&t.isValid()?(e=ht(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(s=t.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function Vh(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function zh(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function Gh(r,e,t){var s,n,i;if(!this.isValid())return NaN;if(s=ci(r,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=ht(e),e){case"year":i=ws(this,s)/12;break;case"month":i=ws(this,s);break;case"quarter":i=ws(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return t?i:ct(i)}function ws(r,e){if(r.date()<e.date())return-ws(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),s=r.clone().add(t,"months"),n,i;return e-s<0?(n=r.clone().add(t-1,"months"),i=(e-s)/(s-n)):(n=r.clone().add(t+1,"months"),i=(e-s)/(n-s)),-(t+i)||0}te.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";te.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Jh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Kh(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?gs(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Pt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",gs(t,"Z")):gs(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Zh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,s,n,i;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+s+n+i)}function Qh(r){r||(r=this.isUtc()?te.defaultFormatUtc:te.defaultFormat);var e=gs(this,r);return this.localeData().postformat(e)}function Xh(r,e){return this.isValid()&&(yt(r)&&r.isValid()||qe(r).isValid())?kt({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function xh(r){return this.from(qe(),r)}function em(r,e){return this.isValid()&&(yt(r)&&r.isValid()||qe(r).isValid())?kt({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function tm(r){return this.to(qe(),r)}function $a(r){var e;return r===void 0?this._locale._abbr:(e=Bt(r),e!=null&&(this._locale=e),this)}var Sa=dt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function Da(){return this._locale}var js=1e3,Or=60*js,Es=60*Or,Ta=(365*400+97)*24*Es;function Cr(r,e){return(r%e+e)%e}function Oa(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-Ta:new Date(r,e,t).valueOf()}function Ca(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-Ta:Date.UTC(r,e,t)}function rm(r){var e,t;if(r=ht(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Ca:Oa,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Cr(e+(this._isUTC?0:this.utcOffset()*Or),Es);break;case"minute":e=this._d.valueOf(),e-=Cr(e,Or);break;case"second":e=this._d.valueOf(),e-=Cr(e,js);break}return this._d.setTime(e),te.updateOffset(this,!0),this}function sm(r){var e,t;if(r=ht(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Ca:Oa,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Es-Cr(e+(this._isUTC?0:this.utcOffset()*Or),Es)-1;break;case"minute":e=this._d.valueOf(),e+=Or-Cr(e,Or)-1;break;case"second":e=this._d.valueOf(),e+=js-Cr(e,js)-1;break}return this._d.setTime(e),te.updateOffset(this,!0),this}function nm(){return this._d.valueOf()-(this._offset||0)*6e4}function im(){return Math.floor(this.valueOf()/1e3)}function om(){return new Date(this.valueOf())}function lm(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function am(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function um(){return this.isValid()?this.toISOString():null}function cm(){return Gn(this)}function fm(){return Zt({},we(this))}function dm(){return we(this).overflow}function hm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}be("N",0,0,"eraAbbr");be("NN",0,0,"eraAbbr");be("NNN",0,0,"eraAbbr");be("NNNN",0,0,"eraName");be("NNNNN",0,0,"eraNarrow");be("y",["y",1],"yo","eraYear");be("y",["yy",2],0,"eraYear");be("y",["yyy",3],0,"eraYear");be("y",["yyyy",4],0,"eraYear");he("N",fi);he("NN",fi);he("NNN",fi);he("NNNN",Sm);he("NNNNN",Dm);Ue(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,s){var n=t._locale.erasParse(r,s,t._strict);n?we(t).era=n:we(t).invalidEra=r});he("y",Ir);he("yy",Ir);he("yyy",Ir);he("yyyy",Ir);he("yo",Tm);Ue(["y","yy","yyy","yyyy"],et);Ue(["yo"],function(r,e,t,s){var n;t._locale._eraYearOrdinalRegex&&(n=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[et]=t._locale.eraYearOrdinalParse(r,n):e[et]=parseInt(r,10)});function mm(r,e){var t,s,n,i=this._eras||Bt("en")._eras;for(t=0,s=i.length;t<s;++t){switch(typeof i[t].since){case"string":n=te(i[t].since).startOf("day"),i[t].since=n.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":n=te(i[t].until).startOf("day").valueOf(),i[t].until=n.valueOf();break}}return i}function pm(r,e,t){var s,n,i=this.eras(),o,l,a;for(r=r.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===r)return i[s];break;case"NNNN":if(o===r)return i[s];break;case"NNNNN":if(a===r)return i[s];break}else if([o,l,a].indexOf(r)>=0)return i[s]}function _m(r,e){var t=r.since<=r.until?1:-1;return e===void 0?te(r.since).year():te(r.since).year()+(e-r.offset)*t}function bm(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].name;return""}function gm(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].narrow;return""}function vm(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].abbr;return""}function wm(){var r,e,t,s,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=n[r].since<=n[r].until?1:-1,s=this.clone().startOf("day").valueOf(),n[r].since<=s&&s<=n[r].until||n[r].until<=s&&s<=n[r].since)return(this.year()-te(n[r].since).year())*t+n[r].offset;return this.year()}function ym(r){return Re(this,"_erasNameRegex")||di.call(this),r?this._erasNameRegex:this._erasRegex}function km(r){return Re(this,"_erasAbbrRegex")||di.call(this),r?this._erasAbbrRegex:this._erasRegex}function $m(r){return Re(this,"_erasNarrowRegex")||di.call(this),r?this._erasNarrowRegex:this._erasRegex}function fi(r,e){return e.erasAbbrRegex(r)}function Sm(r,e){return e.erasNameRegex(r)}function Dm(r,e){return e.erasNarrowRegex(r)}function Tm(r,e){return e._eraYearOrdinalRegex||Ir}function di(){var r=[],e=[],t=[],s=[],n,i,o,l,a,f=this.eras();for(n=0,i=f.length;n<i;++n)o=Ut(f[n].name),l=Ut(f[n].abbr),a=Ut(f[n].narrow),e.push(o),r.push(l),t.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}be(0,["gg",2],0,function(){return this.weekYear()%100});be(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Xs(r,e){be(0,[r,r.length],0,e)}Xs("gggg","weekYear");Xs("ggggg","weekYear");Xs("GGGG","isoWeekYear");Xs("GGGGG","isoWeekYear");he("G",Gs);he("g",Gs);he("GG",Be,lt);he("gg",Be,lt);he("GGGG",xn,Xn);he("gggg",xn,Xn);he("GGGGG",zs,Ws);he("ggggg",zs,Ws);us(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,s){e[s.substr(0,2)]=Ce(r)});us(["gg","GG"],function(r,e,t,s){e[s]=te.parseTwoDigitYear(r)});function Om(r){return Ma.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Cm(r){return Ma.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function Mm(){return Ht(this.year(),1,4)}function Pm(){return Ht(this.isoWeekYear(),1,4)}function jm(){var r=this.localeData()._week;return Ht(this.year(),r.dow,r.doy)}function Em(){var r=this.localeData()._week;return Ht(this.weekYear(),r.dow,r.doy)}function Ma(r,e,t,s,n){var i;return r==null?es(this,s,n).year:(i=Ht(r,s,n),e>i&&(e=i),Rm.call(this,r,e,t,s,n))}function Rm(r,e,t,s,n){var i=aa(r,e,t,s,n),o=xr(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}be("Q",0,"Qo","quarter");he("Q",Ql);Ue("Q",function(r,e){e[Lt]=(Ce(r)-1)*3});function Am(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}be("D",["DD",2],"Do","date");he("D",Be,Lr);he("DD",Be,lt);he("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ue(["D","DD"],St);Ue("Do",function(r,e){e[St]=Ce(r.match(Be)[0])});var Pa=Yr("Date",!0);be("DDD",["DDDD",3],"DDDo","dayOfYear");he("DDD",Vs);he("DDDD",Xl);Ue(["DDD","DDDD"],function(r,e,t){t._dayOfYear=Ce(r)});function Im(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}be("m",["mm",2],0,"minute");he("m",Be,ei);he("mm",Be,lt);Ue(["m","mm"],bt);var Lm=Yr("Minutes",!1);be("s",["ss",2],0,"second");he("s",Be,ei);he("ss",Be,lt);Ue(["s","ss"],Yt);var Ym=Yr("Seconds",!1);be("S",0,0,function(){return~~(this.millisecond()/100)});be(0,["SS",2],0,function(){return~~(this.millisecond()/10)});be(0,["SSS",3],0,"millisecond");be(0,["SSSS",4],0,function(){return this.millisecond()*10});be(0,["SSSSS",5],0,function(){return this.millisecond()*100});be(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});be(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});be(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});be(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});he("S",Vs,Ql);he("SS",Vs,lt);he("SSS",Vs,Xl);var Qt,ja;for(Qt="SSSS";Qt.length<=9;Qt+="S")he(Qt,Ir);function Nm(r,e){e[ar]=Ce(("0."+r)*1e3)}for(Qt="S";Qt.length<=9;Qt+="S")Ue(Qt,Nm);ja=Yr("Milliseconds",!1);be("z",0,0,"zoneAbbr");be("zz",0,0,"zoneName");function Um(){return this._isUTC?"UTC":""}function Hm(){return this._isUTC?"Coordinated Universal Time":""}var oe=ls.prototype;oe.add=Eh;oe.calendar=Uh;oe.clone=Hh;oe.diff=Gh;oe.endOf=sm;oe.format=Qh;oe.from=Xh;oe.fromNow=xh;oe.to=em;oe.toNow=tm;oe.get=Zf;oe.invalidAt=dm;oe.isAfter=Fh;oe.isBefore=qh;oe.isBetween=Bh;oe.isSame=Wh;oe.isSameOrAfter=Vh;oe.isSameOrBefore=zh;oe.isValid=cm;oe.lang=Sa;oe.locale=$a;oe.localeData=Da;oe.max=ch;oe.min=uh;oe.parsingFlags=fm;oe.set=Qf;oe.startOf=rm;oe.subtract=Rh;oe.toArray=lm;oe.toObject=am;oe.toDate=om;oe.toISOString=Kh;oe.inspect=Zh;typeof Symbol<"u"&&Symbol.for!=null&&(oe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});oe.toJSON=um;oe.toString=Jh;oe.unix=im;oe.valueOf=nm;oe.creationData=hm;oe.eraName=bm;oe.eraNarrow=gm;oe.eraAbbr=vm;oe.eraYear=wm;oe.year=ta;oe.isLeapYear=Kf;oe.weekYear=Om;oe.isoWeekYear=Cm;oe.quarter=oe.quarters=Am;oe.month=oa;oe.daysInMonth=od;oe.week=oe.weeks=md;oe.isoWeek=oe.isoWeeks=pd;oe.weeksInYear=jm;oe.weeksInWeekYear=Em;oe.isoWeeksInYear=Mm;oe.isoWeeksInISOWeekYear=Pm;oe.date=Pa;oe.day=oe.days=Cd;oe.weekday=Md;oe.isoWeekday=Pd;oe.dayOfYear=Im;oe.hour=oe.hours=Yd;oe.minute=oe.minutes=Lm;oe.second=oe.seconds=Ym;oe.millisecond=oe.milliseconds=ja;oe.utcOffset=vh;oe.utc=yh;oe.local=kh;oe.parseZone=$h;oe.hasAlignedHourOffset=Sh;oe.isDST=Dh;oe.isLocal=Oh;oe.isUtcOffset=Ch;oe.isUtc=va;oe.isUTC=va;oe.zoneAbbr=Um;oe.zoneName=Hm;oe.dates=dt("dates accessor is deprecated. Use date instead.",Pa);oe.months=dt("months accessor is deprecated. Use month instead",oa);oe.years=dt("years accessor is deprecated. Use year instead",ta);oe.zone=dt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",wh);oe.isDSTShifted=dt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Th);function Fm(r){return qe(r*1e3)}function qm(){return qe.apply(null,arguments).parseZone()}function Ea(r){return r}var Ae=Kn.prototype;Ae.calendar=Of;Ae.longDateFormat=jf;Ae.invalidDate=Rf;Ae.ordinal=Lf;Ae.preparse=Ea;Ae.postformat=Ea;Ae.relativeTime=Nf;Ae.pastFuture=Uf;Ae.set=Df;Ae.eras=mm;Ae.erasParse=pm;Ae.erasConvertYear=_m;Ae.erasAbbrRegex=km;Ae.erasNameRegex=ym;Ae.erasNarrowRegex=$m;Ae.months=rd;Ae.monthsShort=sd;Ae.monthsParse=id;Ae.monthsRegex=ad;Ae.monthsShortRegex=ld;Ae.week=cd;Ae.firstDayOfYear=hd;Ae.firstDayOfWeek=dd;Ae.weekdays=$d;Ae.weekdaysMin=Dd;Ae.weekdaysShort=Sd;Ae.weekdaysParse=Od;Ae.weekdaysRegex=jd;Ae.weekdaysShortRegex=Ed;Ae.weekdaysMinRegex=Rd;Ae.isPM=Id;Ae.meridiem=Nd;function Rs(r,e,t,s){var n=Bt(),i=Mt().set(s,e);return n[t](i,r)}function Ra(r,e,t){if(qt(r)&&(e=r,r=void 0),r=r||"",e!=null)return Rs(r,e,t,"month");var s,n=[];for(s=0;s<12;s++)n[s]=Rs(r,s,t,"month");return n}function hi(r,e,t,s){typeof r=="boolean"?(qt(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,qt(e)&&(t=e,e=void 0),e=e||"");var n=Bt(),i=r?n._week.dow:0,o,l=[];if(t!=null)return Rs(e,(t+i)%7,s,"day");for(o=0;o<7;o++)l[o]=Rs(e,(o+i)%7,s,"day");return l}function Bm(r,e){return Ra(r,e,"months")}function Wm(r,e){return Ra(r,e,"monthsShort")}function Vm(r,e,t){return hi(r,e,t,"weekdays")}function zm(r,e,t){return hi(r,e,t,"weekdaysShort")}function Gm(r,e,t){return hi(r,e,t,"weekdaysMin")}Xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=Ce(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}});te.lang=dt("moment.lang is deprecated. Use moment.locale instead.",Xt);te.langData=dt("moment.langData is deprecated. Use moment.localeData instead.",Bt);var Et=Math.abs;function Jm(){var r=this._data;return this._milliseconds=Et(this._milliseconds),this._days=Et(this._days),this._months=Et(this._months),r.milliseconds=Et(r.milliseconds),r.seconds=Et(r.seconds),r.minutes=Et(r.minutes),r.hours=Et(r.hours),r.months=Et(r.months),r.years=Et(r.years),this}function Aa(r,e,t,s){var n=kt(e,t);return r._milliseconds+=s*n._milliseconds,r._days+=s*n._days,r._months+=s*n._months,r._bubble()}function Km(r,e){return Aa(this,r,e,1)}function Zm(r,e){return Aa(this,r,e,-1)}function Zi(r){return r<0?Math.floor(r):Math.ceil(r)}function Qm(){var r=this._milliseconds,e=this._days,t=this._months,s=this._data,n,i,o,l,a;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=Zi(En(t)+e)*864e5,e=0,t=0),s.milliseconds=r%1e3,n=ct(r/1e3),s.seconds=n%60,i=ct(n/60),s.minutes=i%60,o=ct(i/60),s.hours=o%24,e+=ct(o/24),a=ct(Ia(e)),t+=a,e-=Zi(En(a)),l=ct(t/12),t%=12,s.days=e,s.months=t,s.years=l,this}function Ia(r){return r*4800/146097}function En(r){return r*146097/4800}function Xm(r){if(!this.isValid())return NaN;var e,t,s=this._milliseconds;if(r=ht(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+s/864e5,t=this._months+Ia(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(En(this._months)),r){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+r)}}function Wt(r){return function(){return this.as(r)}}var La=Wt("ms"),xm=Wt("s"),ep=Wt("m"),tp=Wt("h"),rp=Wt("d"),sp=Wt("w"),np=Wt("M"),ip=Wt("Q"),op=Wt("y"),lp=La;function ap(){return kt(this)}function up(r){return r=ht(r),this.isValid()?this[r+"s"]():NaN}function fr(r){return function(){return this.isValid()?this._data[r]:NaN}}var cp=fr("milliseconds"),fp=fr("seconds"),dp=fr("minutes"),hp=fr("hours"),mp=fr("days"),pp=fr("months"),_p=fr("years");function bp(){return ct(this.days()/7)}var Rt=Math.round,kr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function gp(r,e,t,s,n){return n.relativeTime(e||1,!!t,r,s)}function vp(r,e,t,s){var n=kt(r).abs(),i=Rt(n.as("s")),o=Rt(n.as("m")),l=Rt(n.as("h")),a=Rt(n.as("d")),f=Rt(n.as("M")),d=Rt(n.as("w")),m=Rt(n.as("y")),p=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(p=p||d<=1&&["w"]||d<t.w&&["ww",d]),p=p||f<=1&&["M"]||f<t.M&&["MM",f]||m<=1&&["y"]||["yy",m],p[2]=e,p[3]=+r>0,p[4]=s,gp.apply(null,p)}function wp(r){return r===void 0?Rt:typeof r=="function"?(Rt=r,!0):!1}function yp(r,e){return kr[r]===void 0?!1:e===void 0?kr[r]:(kr[r]=e,r==="s"&&(kr.ss=e-1),!0)}function kp(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,s=kr,n,i;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(s=Object.assign({},kr,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=vp(this,!t,s,n),t&&(i=n.pastFuture(+this,i)),n.postformat(i)}var pn=Math.abs;function gr(r){return(r>0)-(r<0)||+r}function xs(){if(!this.isValid())return this.localeData().invalidDate();var r=pn(this._milliseconds)/1e3,e=pn(this._days),t=pn(this._months),s,n,i,o,l=this.asSeconds(),a,f,d,m;return l?(s=ct(r/60),n=ct(s/60),r%=60,s%=60,i=ct(t/12),t%=12,o=r?r.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",f=gr(this._months)!==gr(l)?"-":"",d=gr(this._days)!==gr(l)?"-":"",m=gr(this._milliseconds)!==gr(l)?"-":"",a+"P"+(i?f+i+"Y":"")+(t?f+t+"M":"")+(e?d+e+"D":"")+(n||s||r?"T":"")+(n?m+n+"H":"")+(s?m+s+"M":"")+(r?m+o+"S":"")):"P0D"}var je=Qs.prototype;je.isValid=ph;je.abs=Jm;je.add=Km;je.subtract=Zm;je.as=Xm;je.asMilliseconds=La;je.asSeconds=xm;je.asMinutes=ep;je.asHours=tp;je.asDays=rp;je.asWeeks=sp;je.asMonths=np;je.asQuarters=ip;je.asYears=op;je.valueOf=lp;je._bubble=Qm;je.clone=ap;je.get=up;je.milliseconds=cp;je.seconds=fp;je.minutes=dp;je.hours=hp;je.days=mp;je.weeks=bp;je.months=pp;je.years=_p;je.humanize=kp;je.toISOString=xs;je.toString=xs;je.toJSON=xs;je.locale=$a;je.localeData=Da;je.toIsoString=dt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xs);je.lang=Sa;be("X",0,0,"unix");be("x",0,0,"valueOf");he("x",Gs);he("X",Bf);Ue("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)});Ue("x",function(r,e,t){t._d=new Date(Ce(r))});//! moment.js
te.version="2.30.1";$f(qe);te.fn=oe;te.min=fh;te.max=dh;te.now=hh;te.utc=Mt;te.unix=Fm;te.months=Bm;te.isDate=os;te.locale=Xt;te.invalid=Bs;te.duration=kt;te.isMoment=yt;te.weekdays=Vm;te.parseZone=qm;te.localeData=Bt;te.isDuration=vs;te.monthsShort=Wm;te.weekdaysMin=Gm;te.defineLocale=ii;te.updateLocale=qd;te.locales=Bd;te.weekdaysShort=zm;te.normalizeUnits=ht;te.relativeTimeRounding=wp;te.relativeTimeThreshold=yp;te.calendarFormat=Nh;te.prototype=oe;te.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Qi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function Xi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[17]=e[t][1],s}function xi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[20]=e[t][1],s}function eo(r,e,t){const s=r.slice();return s[13]=e[t][0],s[23]=e[t][1],s}function $p(r){let e,t;return e=new qs({props:{message:r[7]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&128&&(i.message=s[7]),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Sp(r){let e,t;return e=new Dt({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function to(r){let e,t;return e=new kf({props:{id:r[23].book_id,title:r[23].title,label:r[23].status=="Borrowed"?`Due: ${te(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:r[23].status=="Borrowed"?"danger":"secondary"}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&8&&(i.id=s[23].book_id),n&8&&(i.title=s[23].title),n&8&&(i.label=s[23].status=="Borrowed"?`Due: ${te(s[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),n&8&&(i.color=s[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Dp(r){let e,t,s=Te(Object.entries(r[3])),n=[];for(let o=0;o<s.length;o+=1)n[o]=to(eo(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-center justify-content-md-start")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&8){s=Te(Object.entries(o[3]));let a;for(a=0;a<s.length;a+=1){const f=eo(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=to(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function Tp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Op(r){let e,t;return e=new qs({props:{message:r[4]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Cp(r){let e,t,s=Te(Object.entries(r[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ro(xi(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&1){s=Te(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const f=xi(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=ro(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function ro(r){let e,t;return e=new Fs({props:{title:r[20].title,id:r[20].book_id,author:r[20].author}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&1&&(i.title=s[20].title),n&1&&(i.id=s[20].book_id),n&1&&(i.author=s[20].author),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Mp(r){let e,t,s,n;const i=[Cp,Op,Tp],o=[];function l(a,f){return a[0]?0:a[4]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Pp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function jp(r){let e,t;return e=new qs({props:{message:r[5]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ep(r){let e,t,s=Te(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=so(Xi(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Te(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const f=Xi(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=so(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function so(r){let e,t;return e=new Wl({props:{id:r[17].author_id,name:r[17].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.id=s[17].author_id),n&2&&(i.name=s[17].name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Rp(r){let e,t,s,n;const i=[Ep,jp,Pp],o=[];function l(a,f){return a[1]?0:a[5]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Ap(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ip(r){let e,t;return e=new qs({props:{message:r[6]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&64&&(i.message=s[6]),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Lp(r){let e,t,s=Te(Object.entries(r[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=no(Qi(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const f=Qi(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=no(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function no(r){let e,t;return e=new Vl({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Yp(r){let e,t,s,n;const i=[Lp,Ip,Ap],o=[];function l(a,f){return a[2]?0:a[6]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Np(r){let e,t,s,n,i,o,l,a,f,d,m,p,v;t=new ef({});const _=[Sp,$p],b=[];function y(w,T){return w[3]&&w[3].length!=0?0:w[7]?1:-1}return~(n=y(r))&&(i=b[n]=_[n](r)),l=new Dt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Mp]},$$scope:{ctx:r}}}),f=new Dt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Rp]},$$scope:{ctx:r}}}),m=new Dt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Yp]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),s=g(),i&&i.c(),o=g(),Q(l.$$.fragment),a=g(),Q(f.$$.fragment),d=g(),Q(m.$$.fragment),u(e,"class","container mb-5")},m(w,T){P(w,e,T),K(t,e,null),c(e,s),~n&&b[n].m(e,null),c(e,o),K(l,e,null),c(e,a),K(f,e,null),c(e,d),K(m,e,null),v=!0},p(w,[T]){let D=n;n=y(w),n===D?~n&&b[n].p(w,T):(i&&(Le(),R(b[D],1,1,()=>{b[D]=null}),Ye()),~n?(i=b[n],i?i.p(w,T):(i=b[n]=_[n](w),i.c()),j(i,1),i.m(e,o)):i=null);const $={};T&67108881&&($.$$scope={dirty:T,ctx:w}),l.$set($);const S={};T&67108898&&(S.$$scope={dirty:T,ctx:w}),f.$set(S);const k={};T&67108932&&(k.$$scope={dirty:T,ctx:w}),m.$set(k)},i(w){v||(j(t.$$.fragment,w),j(i),j(l.$$.fragment,w),j(f.$$.fragment,w),j(m.$$.fragment,w),w&&(p||Ee(()=>{p=Je(e,Ke,{duration:500}),p.start()})),v=!0)},o(w){R(t.$$.fragment,w),R(i),R(l.$$.fragment,w),R(f.$$.fragment,w),R(m.$$.fragment,w),v=!1},d(w){w&&M(e),Z(t),~n&&b[n].d(),Z(l),Z(f),Z(m)}}}function Up(r,e,t){const s=localStorage.getItem("user_id")||"";let n,i,o,l,a,f,d,m;async function p(){const{data:y,error:w}=await ee.rpc("get_books");t(0,n=y),t(4,a=w?w.message:"")}async function v(){const{data:y,error:w}=await ee.rpc("get_authors");t(1,i=y),t(5,f=w?w.message:"")}async function _(){const{data:y,error:w}=await ee.rpc("get_publishers");t(2,o=y),t(6,d=w||"")}async function b(){const{data:y,error:w}=await ee.rpc("get_inventory",{loggedid:s});t(3,l=y),console.log(l),t(7,m=w||"")}return p(),v(),_(),b(),[n,i,o,l,a,f,d,m]}class Hp extends De{constructor(e){super(),Se(this,e,Up,Np,ye,{})}}function io(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-printer"></i> Print',u(e,"class","btn btn-outline-primary btn-sm col-1")},m(n,i){P(n,e,i),t||(s=U(e,"click",r[3]),t=!0)},p:x,d(n){n&&M(e),t=!1,s()}}}function Fp(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S=r[1]&&io(r);return{c(){e=h("div"),t=h("div"),s=h("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',n=g(),i=h("div"),o=h("h4"),l=X(r[0]),a=g(),S&&S.c(),f=g(),d=h("div"),m=h("h1"),m.innerHTML=`<b><i class="bi bi-book"></i>
      Zenodotus</b>`,p=g(),v=h("h6"),v.textContent="CTADVDBL Project",_=g(),b=h("h4"),y=X(r[0]),w=g(),T=h("small"),T.textContent=`Printed by: Staff #${localStorage.getItem("user_id")}`,u(s,"class","btn"),Ge(s,"font-size","1.5em"),u(o,"class","my-auto"),u(t,"class","d-flex align-items-center"),u(e,"class","d-flex border-bottom border-1 my-3 align-items-center d-print-none justify-content-between"),u(m,"class","m-0"),u(b,"class","mb-0"),u(d,"class","justify-content-center align-items-center d-none d-print-flex flex-column mt-3")},m(k,O){P(k,e,O),c(e,t),c(t,s),c(t,n),c(t,i),c(i,o),c(o,l),c(e,a),S&&S.m(e,null),P(k,f,O),P(k,d,O),c(d,m),c(d,p),c(d,v),c(d,_),c(d,b),c(b,y),c(d,w),c(d,T),D||($=U(s,"click",r[2]),D=!0)},p(k,[O]){O&1&&le(l,k[0]),k[1]?S?S.p(k,O):(S=io(k),S.c(),S.m(e,null)):S&&(S.d(1),S=null),O&1&&le(y,k[0])},i:x,o:x,d(k){k&&(M(e),M(f),M(d)),S&&S.d(),D=!1,$()}}}function qp(r,e,t){let{text:s}=e,{print:n=!1}=e;const i=()=>Pr(),o=()=>window.print();return r.$$set=l=>{"text"in l&&t(0,s=l.text),"print"in l&&t(1,n=l.print)},[s,n,i,o]}class tt extends De{constructor(e){super(),Se(this,e,qp,Fp,ye,{text:0,print:1})}}function Bp(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$;const S=r[5].default,k=As(S,r,r[4],null);return{c(){e=h("div"),t=h("div"),s=h("div"),n=h("div"),i=h("h1"),o=X(r[0]),l=g(),a=h("button"),f=g(),d=h("div"),k&&k.c(),m=g(),p=h("div"),v=h("button"),_=X(r[3]),b=g(),y=h("button"),w=X(r[2]),u(i,"class","modal-title fs-5"),u(i,"id","exampleModalLabel"),u(a,"type","button"),u(a,"class","btn-close"),u(a,"data-bs-dismiss","modal"),u(a,"aria-label","Close"),u(n,"class","modal-header"),u(d,"class","modal-body"),u(v,"type","button"),u(v,"class","btn btn-secondary"),u(v,"data-bs-dismiss","modal"),u(y,"type","button"),u(y,"class","btn btn-primary"),u(y,"data-bs-dismiss","modal"),u(p,"class","modal-footer"),u(s,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id",r[1]),u(e,"tabindex","-1"),u(e,"aria-hidden","true")},m(O,C){P(O,e,C),c(e,t),c(t,s),c(s,n),c(n,i),c(i,o),c(n,l),c(n,a),c(s,f),c(s,d),k&&k.m(d,null),c(s,m),c(s,p),c(p,v),c(v,_),c(p,b),c(p,y),c(y,w),T=!0,D||($=U(y,"click",r[6]),D=!0)},p(O,[C]){(!T||C&1)&&le(o,O[0]),k&&k.p&&(!T||C&16)&&Ls(k,S,O,O[4],T?Is(S,O[4],C,null):Ys(O[4]),null),(!T||C&8)&&le(_,O[3]),(!T||C&4)&&le(w,O[2]),(!T||C&2)&&u(e,"id",O[1])},i(O){T||(j(k,O),T=!0)},o(O){R(k,O),T=!1},d(O){O&&M(e),k&&k.d(O),D=!1,$()}}}function Wp(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function f(d){Ts.call(this,r,d)}return r.$$set=d=>{"title"in d&&t(0,i=d.title),"id"in d&&t(1,o=d.id),"pButton"in d&&t(2,l=d.pButton),"sButton"in d&&t(3,a=d.sButton),"$$scope"in d&&t(4,n=d.$$scope)},[i,o,l,a,n,s,f]}class Vp extends De{constructor(e){super(),Se(this,e,Wp,Bp,ye,{title:0,id:1,pButton:2,sButton:3})}}function zp(r){let e,t,s;return{c(){e=h("div"),t=h("div"),t.innerHTML=`<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try
        again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>`,u(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","70vh"),u(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","100vh")},m(n,i){P(n,e,i),c(e,t)},p:x,i(n){n&&(s||Ee(()=>{s=Je(t,Ke,{duration:500}),s.start()}))},o:x,d(n){n&&M(e)}}}class mi extends De{constructor(e){super(),Se(this,e,null,zp,ye,{})}}function Gp(r){let e,t,s,n,i,o;const l=r[3].default,a=As(l,r,r[2],null);return{c(){e=h("div"),t=h("label"),s=X(r[0]),n=g(),i=h("div"),a&&a.c(),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",r[1]),u(i,"class","col-sm-8 col-md-9"),u(e,"class","mb-4 row")},m(f,d){P(f,e,d),c(e,t),c(t,s),c(e,n),c(e,i),a&&a.m(i,null),o=!0},p(f,[d]){(!o||d&1)&&le(s,f[0]),(!o||d&2)&&u(t,"for",f[1]),a&&a.p&&(!o||d&4)&&Ls(a,l,f,f[2],o?Is(l,f[2],d,null):Ys(f[2]),null)},i(f){o||(j(a,f),o=!0)},o(f){R(a,f),o=!1},d(f){f&&M(e),a&&a.d(f)}}}function Jp(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return r.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,n=l.$$scope)},[i,o,n,s]}class $e extends De{constructor(e){super(),Se(this,e,Jp,Gp,ye,{label:0,id:1})}}function Kp(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue;return{c(){e=h("div"),t=h("div"),s=h("h1"),s.textContent="Book Deletion",n=g(),i=h("div"),i.innerHTML='<p class="my-0">This action will delete all records of this book in the database including book details, library holdings, and reports.</p> <div class="text-secondary">If you want to hide the book from students, you can make the book <b>private</b></div>',o=g(),l=h("div"),a=X("Please enter your password and name of the book "),f=h("b"),d=X('"'),m=X(r[0]),p=X('"'),v=X(" to confirm deletion."),_=g(),b=h("div"),y=h("label"),y.textContent="Password:",w=g(),T=h("div"),D=h("input"),S=g(),k=h("div"),k.textContent="Wrong Password",O=g(),C=h("div"),I=h("label"),I.textContent="Book Name:",N=g(),L=h("div"),A=h("input"),Y=g(),W=h("div"),W.textContent="Book Name does not match",H=g(),q=h("div"),V=h("button"),V.textContent="Confirm",G=g(),re=h("button"),re.textContent="Cancel",u(s,"class","text-danger"),u(i,"class","text-center mb-4"),u(l,"class","mb-4"),u(y,"class","col-4 col-form-label"),u(y,"for","password"),u(D,"class",$="form-control "+r[3]),u(D,"type","password"),u(D,"id","password"),u(k,"class","invalid-feedback"),u(T,"class","col-8 "),u(b,"class","mb-4 row col-4"),u(I,"class","col-4 col-form-label"),u(I,"for","bookname"),u(A,"class",B="form-control "+r[4]),u(A,"type","text"),u(A,"id","bookname"),u(W,"class","invalid-feedback"),u(L,"class","col-8 "),u(C,"class","mb-4 row col-4"),u(V,"class","btn btn-danger"),u(re,"class","btn btn-outline-success"),u(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","90vh"),u(e,"class","position-fixed top-50 start-50 translate-middle z-2 hid"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","102vh"),Ge(e,"padding","0")},m(se,fe){P(se,e,fe),c(e,t),c(t,s),c(t,n),c(t,i),c(t,o),c(t,l),c(l,a),c(l,f),c(f,d),c(f,m),c(f,p),c(l,v),c(t,_),c(t,b),c(b,y),c(b,w),c(b,T),c(T,D),J(D,r[1]),c(T,S),c(T,k),c(t,O),c(t,C),c(C,I),c(C,N),c(C,L),c(L,A),J(A,r[2]),c(L,Y),c(L,W),c(t,H),c(t,q),c(q,V),c(q,G),c(q,re),F=!0,z||(ue=[U(D,"keyup",r[8]),U(D,"input",r[9]),U(A,"keyup",r[10]),U(A,"input",r[11]),U(V,"click",r[6]),U(re,"click",r[12])],z=!0)},p(se,[fe]){(!F||fe&1)&&le(m,se[0]),(!F||fe&8&&$!==($="form-control "+se[3]))&&u(D,"class",$),fe&2&&D.value!==se[1]&&J(D,se[1]),(!F||fe&16&&B!==(B="form-control "+se[4]))&&u(A,"class",B),fe&4&&A.value!==se[2]&&J(A,se[2])},i(se){F||(se&&Ee(()=>{F&&(E||(E=Tt(e,Ot,{duration:400,y:-900},!0)),E.run(1))}),F=!0)},o(se){se&&(E||(E=Tt(e,Ot,{duration:400,y:-900},!1)),E.run(0)),F=!1},d(se){se&&M(e),se&&E&&E.end(),z=!1,ge(ue)}}}function Zp(r,e,t){let{bookTitle:s}=e,{bookID:n}=e;const i=Sl();let o,l,a,f;async function d(){l!=s&&t(4,f="is-invalid");const{data:y,error:w}=await ee.from("user_level").select("user_id").eq("user_id",localStorage.getItem("user_id")).eq("password",o).single();if(w&&(console.error(w),t(3,a="is-invalid")),a||f)return;const{error:T}=await ee.rpc("delete_book",{id:n});if(T)console.error(T),alert(`Failed to delete: ${T.message}`);else{const{error:D}=await ee.from("reports").insert({report_type:"Delete",report_details:`All data of ${s} have been deleted`,staff_id:localStorage.getItem("user_id")});D&&console.error(D),alert(`Successfully deleted all data of ${s}`),Ft("#/")}}const m=()=>t(3,a="");function p(){o=this.value,t(1,o)}const v=()=>t(4,f="");function _(){l=this.value,t(2,l)}const b=()=>i("cancel");return r.$$set=y=>{"bookTitle"in y&&t(0,s=y.bookTitle),"bookID"in y&&t(7,n=y.bookID)},[s,o,l,a,f,i,d,n,m,p,v,_,b]}class Qp extends De{constructor(e){super(),Se(this,e,Zp,Kp,ye,{bookTitle:0,bookID:7})}}function oo(r,e,t){const s=r.slice();return s[34]=e[t][0],s[35]=e[t][1],s}function lo(r,e,t){const s=r.slice();return s[34]=e[t][0],s[38]=e[t][1],s}function ao(r){let e,t;return e=new mi({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Xp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function xp(r){let e,t,s,n,i,o=r[3].isbn+"",l,a,f,d,m,p,v=r[3].title+"",_,b,y,w,T=r[3].description+"",D,$,S,k,O,C,I=r[3].author.name+"",N,L,A,B,Y,W,H,q=r[3].publisher.name+"",V,G,re,E,F,z,ue,se,fe,de,me=r[3].shelf_number+"",Pe;function pe(ve,ke){return ve[10]?t_:e_}let ne=pe(r),ce=ne(r),_e=r[1]=="client"&&uo(r),ae=r[1]=="staff"&&co(r),ie=r[4]&&fo(r);return{c(){e=h("div"),t=h("div"),ce.c(),s=g(),n=h("small"),i=X("ISBN: "),l=X(o),a=g(),_e&&_e.c(),f=g(),d=h("div"),m=h("div"),p=h("h1"),_=X(v),b=g(),ae&&ae.c(),y=g(),w=h("p"),D=X(T),$=g(),S=h("p"),k=h("b"),k.textContent="Author:",O=g(),C=h("a"),N=X(I),A=g(),B=h("p"),Y=h("b"),Y.textContent="Publisher:",W=g(),H=h("a"),V=X(q),re=g(),E=h("p"),F=h("b"),F.textContent="Category:",z=g(),ie&&ie.c(),ue=g(),se=h("p"),fe=h("b"),fe.textContent="Shelf No.:",de=g(),Pe=X(me),u(n,"class","text-secondary"),u(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),u(p,"id","book-title"),u(p,"class","flex-fill"),u(m,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(w,"id","book-description"),u(C,"href",L="./#/author/"+r[3].author.author_id),u(H,"href",G="./#/publisher/"+r[3].publisher.publisher_id),u(d,"id","details-container"),u(d,"class","container mt-md-0 mt-3"),u(e,"class","d-md-flex d-block")},m(ve,ke){P(ve,e,ke),c(e,t),ce.m(t,null),c(t,s),c(t,n),c(n,i),c(n,l),c(t,a),_e&&_e.m(t,null),c(e,f),c(e,d),c(d,m),c(m,p),c(p,_),c(m,b),ae&&ae.m(m,null),c(d,y),c(d,w),c(w,D),c(d,$),c(d,S),c(S,k),c(S,O),c(S,C),c(C,N),c(d,A),c(d,B),c(B,Y),c(B,W),c(B,H),c(H,V),c(d,re),c(d,E),c(E,F),c(E,z),ie&&ie.m(E,null),c(d,ue),c(d,se),c(se,fe),c(se,de),c(se,Pe)},p(ve,ke){ne===(ne=pe(ve))&&ce?ce.p(ve,ke):(ce.d(1),ce=ne(ve),ce&&(ce.c(),ce.m(t,s))),ke[0]&8&&o!==(o=ve[3].isbn+"")&&le(l,o),ve[1]=="client"?_e?_e.p(ve,ke):(_e=uo(ve),_e.c(),_e.m(t,null)):_e&&(_e.d(1),_e=null),ke[0]&8&&v!==(v=ve[3].title+"")&&le(_,v),ve[1]=="staff"?ae?ae.p(ve,ke):(ae=co(ve),ae.c(),ae.m(m,null)):ae&&(ae.d(1),ae=null),ke[0]&8&&T!==(T=ve[3].description+"")&&le(D,T),ke[0]&8&&I!==(I=ve[3].author.name+"")&&le(N,I),ke[0]&8&&L!==(L="./#/author/"+ve[3].author.author_id)&&u(C,"href",L),ke[0]&8&&q!==(q=ve[3].publisher.name+"")&&le(V,q),ke[0]&8&&G!==(G="./#/publisher/"+ve[3].publisher.publisher_id)&&u(H,"href",G),ve[4]?ie?ie.p(ve,ke):(ie=fo(ve),ie.c(),ie.m(E,null)):ie&&(ie.d(1),ie=null),ke[0]&8&&me!==(me=ve[3].shelf_number+"")&&le(Pe,me)},i:x,o:x,d(ve){ve&&M(e),ce.d(),_e&&_e.d(),ae&&ae.d(),ie&&ie.d()}}}function e_(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[3].book_id+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[23]),s=!0)},p(i,o){o[0]&8&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[3].book_id+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function t_(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function uo(r){let e;function t(i,o){return i[7]?i_:i[0]?n_:i[8]==0?s_:r_}let s=t(r),n=s(r);return{c(){n.c(),e=Ze()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&M(e),n.d(i)}}}function r_(r){let e,t,s,n;return{c(){e=h("button"),t=X("Reserve"),e.disabled=r[12],u(e,"class","btn btn-primary w-50")},m(i,o){P(i,e,o),c(e,t),s||(n=U(e,"click",r[16]),s=!0)},p(i,o){o[0]&4096&&(e.disabled=i[12])},d(i){i&&M(e),s=!1,n()}}}function s_(r){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,u(e,"class","btn btn-secondary w-50")},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function n_(r){let e,t,s,n,i,o,l;return{c(){e=h("button"),t=h("i"),s=g(),n=X(r[13]),u(t,"class","bi bi-x-circle"),u(e,"class",i="btn "+r[9]+" w-75")},m(a,f){P(a,e,f),c(e,t),c(e,s),c(e,n),o||(l=[U(e,"mouseenter",r[24]),U(e,"mouseleave",r[25]),U(e,"click",r[17])],o=!0)},p(a,f){f[0]&8192&&le(n,a[13]),f[0]&512&&i!==(i="btn "+a[9]+" w-75")&&u(e,"class",i)},d(a){a&&M(e),o=!1,ge(l)}}}function i_(r){let e,t,s,n;return{c(){e=h("button"),t=X("Borrowed (#"),s=X(r[7]),n=X(")"),u(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){P(i,e,o),c(e,t),c(e,s),c(e,n)},p(i,o){o[0]&128&&le(s,i[7])},d(i){i&&M(e)}}}function co(r){let e,t,s,n,i,o,l,a,f,d;function m(_,b){if(_[3].storage_type=="public")return l_;if(_[3].storage_type=="private")return o_}let p=m(r),v=p&&p(r);return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',n=g(),i=h("span"),i.textContent="|",o=g(),v&&v.c(),l=g(),a=h("button"),a.innerHTML='<i class="bi bi-trash3-fill"></i> <div class="d-none d-sm-inline"></div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-book?id="+r[14]),u(i,"class","mx-2"),u(a,"class","btn btn-outline-danger"),u(a,"title","Delete Permanently"),u(e,"class","d-print-none")},m(_,b){P(_,e,b),c(e,t),c(t,s),c(e,n),c(e,i),c(e,o),v&&v.m(e,null),c(e,l),c(e,a),f||(d=U(a,"click",r[19]),f=!0)},p(_,b){p===(p=m(_))&&v?v.p(_,b):(v&&v.d(1),v=p&&p(_),v&&(v.c(),v.m(e,l)))},d(_){_&&M(e),v&&v.d(),f=!1,d()}}}function o_(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-lock-fill"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to public")},m(n,i){P(n,e,i),t||(s=U(e,"click",r[20]),t=!0)},p:x,d(n){n&&M(e),t=!1,s()}}}function l_(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-globe-americas"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to private")},m(n,i){P(n,e,i),t||(s=U(e,"click",r[21]),t=!0)},p:x,d(n){n&&M(e),t=!1,s()}}}function fo(r){let e,t=Te(Object.entries(r[4])),s=[];for(let n=0;n<t.length;n+=1)s[n]=ho(lo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ze()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i[0]&16){t=Te(Object.entries(n[4]));let o;for(o=0;o<t.length;o+=1){const l=lo(n,t,o);s[o]?s[o].p(l,i):(s[o]=ho(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function ho(r){let e,t=r[38].category.name+"",s,n;return{c(){e=h("a"),s=X(t),n=X(`\r
                 `),u(e,"href","./#/")},m(i,o){P(i,e,o),c(e,s),P(i,n,o)},p(i,o){o[0]&16&&t!==(t=i[38].category.name+"")&&le(s,t)},d(i){i&&(M(e),M(n))}}}function mo(r){let e,t;return e=new Dt({props:{title:"Status",icon:"journal",$$slots:{default:[c_]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&96|n[1]&1024&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function po(r){let e;function t(i,o){return i[6].length<=0?u_:a_}let s=t(r),n=s(r);return{c(){n.c(),e=Ze()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&M(e),n.d(i)}}}function a_(r){let e,t,s,n,i=Te(Object.entries(r[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=_o(oo(r,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=g(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();u(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(n,null)},p(l,a){if(a[0]&64){i=Te(Object.entries(l[6]));let f;for(f=0;f<i.length;f+=1){const d=oo(l,i,f);o[f]?o[f].p(d,a):(o[f]=_o(d),o[f].c(),o[f].m(n,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&M(e),Xe(o,l)}}}function u_(r){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",u(e,"class","text-center my-5")},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function _o(r){let e,t,s=r[35].barcode+"",n,i,o,l=r[35].status!="Available"?`${r[35].fname} ${r[35].lname}`:"--",a,f,d,m=r[35].status+"",p,v,_=r[35].status=="Reserved"?`(${r[35].reservation_id})`:r[35].status=="Borrowed"?`(${r[35].borrow_id})`:"",b,y,w,T,D,$,S=r[35].status=="Borrowed"?"Return":"Borrow",k,O,C,I,N;return{c(){e=h("tr"),t=h("td"),n=X(s),i=g(),o=h("td"),a=X(l),f=g(),d=h("td"),p=X(m),v=g(),b=X(_),w=g(),T=h("td"),D=h("a"),$=h("small"),k=X(S),O=g(),C=h("i"),N=g(),u(d,"class",y=r[35].status=="Available"?"text-bg-success":r[35].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),u(C,"class","bi bi-box-arrow-up-right"),u(D,"href",I=r[35].status=="Available"?`./#/borrow?barcode=${r[35].barcode}`:r[35].status=="Reserved"?`./#/borrow?reserve_id=${r[35].reservation_id}`:`./#/return?borrow_id=${r[35].borrow_id}`),u(D,"class","btn btn-outline-primary btn-sm")},m(L,A){P(L,e,A),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,p),c(d,v),c(d,b),c(e,w),c(e,T),c(T,D),c(D,$),c($,k),c($,O),c($,C),c(e,N)},p(L,A){A[0]&64&&s!==(s=L[35].barcode+"")&&le(n,s),A[0]&64&&l!==(l=L[35].status!="Available"?`${L[35].fname} ${L[35].lname}`:"--")&&le(a,l),A[0]&64&&m!==(m=L[35].status+"")&&le(p,m),A[0]&64&&_!==(_=L[35].status=="Reserved"?`(${L[35].reservation_id})`:L[35].status=="Borrowed"?`(${L[35].borrow_id})`:"")&&le(b,_),A[0]&64&&y!==(y=L[35].status=="Available"?"text-bg-success":L[35].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&u(d,"class",y),A[0]&64&&S!==(S=L[35].status=="Borrowed"?"Return":"Borrow")&&le(k,S),A[0]&64&&I!==(I=L[35].status=="Available"?`./#/borrow?barcode=${L[35].barcode}`:L[35].status=="Reserved"?`./#/borrow?reserve_id=${L[35].reservation_id}`:`./#/return?borrow_id=${L[35].borrow_id}`)&&u(D,"href",I)},d(L){L&&M(e)}}}function c_(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_=r[6]&&po(r);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",s=g(),n=h("div"),i=h("input"),o=g(),l=h("button"),l.textContent="Generate",a=g(),f=h("button"),f.textContent="Add",d=g(),_&&_.c(),m=Ze(),u(t,"for","copy"),u(t,"class","form=control col-auto"),u(i,"type","text"),u(i,"class","form-control"),u(i,"id","copy"),u(i,"placeholder","Barcode Number"),u(n,"class","col-4"),u(l,"class","btn btn-outline-primary col-1"),u(f,"class","btn btn-primary col-1"),u(e,"class","row justify-content-center align-items-center my-3 gap-2")},m(b,y){P(b,e,y),c(e,t),c(e,s),c(e,n),c(n,i),J(i,r[5]),c(e,o),c(e,l),c(e,a),c(e,f),P(b,d,y),_&&_.m(b,y),P(b,m,y),p||(v=[U(i,"input",r[26]),U(l,"click",r[18]),U(f,"click",r[15])],p=!0)},p(b,y){y[0]&32&&i.value!==b[5]&&J(i,b[5]),b[6]?_?_.p(b,y):(_=po(b),_.c(),_.m(m.parentNode,m)):_&&(_.d(1),_=null)},d(b){b&&(M(e),M(d),M(m)),_&&_.d(b),p=!1,ge(v)}}}function bo(r){let e,t;return e=new Qp({props:{bookID:r[14],bookTitle:r[3].title}}),e.$on("cancel",r[19]),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&8&&(i.bookTitle=s[3].title),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function f_(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b=r[2]&&ao();n=new tt({props:{text:"Book Details"}});const y=[xp,Xp],w=[];function T(S,k){return S[3]?0:1}o=T(r),l=w[o]=y[o](r);let D=r[1]=="staff"&&mo(r),$=r[11]&&bo(r);return{c(){e=h("main"),b&&b.c(),t=g(),s=h("section"),Q(n.$$.fragment),i=g(),l.c(),a=g(),D&&D.c(),f=g(),d=h("div"),p=g(),$&&$.c(),v=Ze(),u(d,"class","my-5"),u(e,"class","container")},m(S,k){P(S,e,k),b&&b.m(e,null),c(e,t),c(e,s),K(n,s,null),c(s,i),w[o].m(s,null),c(e,a),D&&D.m(e,null),c(e,f),c(e,d),P(S,p,k),$&&$.m(S,k),P(S,v,k),_=!0},p(S,k){S[2]?b?k[0]&4&&j(b,1):(b=ao(),b.c(),j(b,1),b.m(e,t)):b&&(Le(),R(b,1,1,()=>{b=null}),Ye());let O=o;o=T(S),o===O?w[o].p(S,k):(Le(),R(w[O],1,1,()=>{w[O]=null}),Ye(),l=w[o],l?l.p(S,k):(l=w[o]=y[o](S),l.c()),j(l,1),l.m(s,null)),S[1]=="staff"?D?(D.p(S,k),k[0]&2&&j(D,1)):(D=mo(S),D.c(),j(D,1),D.m(e,f)):D&&(Le(),R(D,1,1,()=>{D=null}),Ye()),S[11]?$?($.p(S,k),k[0]&2048&&j($,1)):($=bo(S),$.c(),j($,1),$.m(v.parentNode,v)):$&&(Le(),R($,1,1,()=>{$=null}),Ye())},i(S){_||(j(b),j(n.$$.fragment,S),j(l),j(D),S&&(m||Ee(()=>{m=Je(e,Ke,{duration:500}),m.start()})),j($),_=!0)},o(S){R(b),R(n.$$.fragment,S),R(l),R(D),R($),_=!1},d(S){S&&(M(e),M(p),M(v)),b&&b.d(),Z(n),w[o].d(),D&&D.d(),$&&$.d(S)}}}function go(){return 3e6+Math.floor(Math.random()*9e3)}function vo(){return"1000"+Math.floor(Math.random()*9e3)}function d_(r,e,t){let s,n;xt.subscribe(E=>t(1,n=E));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,f,d;async function m(){const{data:E,error:F}=await ee.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(E[0]),t(3,f=E[0]),E.length==0&&t(2,a=!0),n=="client"&&f.storage_type=="private"&&Ft("/invalid-link");const{data:z,error:ue}=await ee.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",z),ue&&console.error(ue),z.length==0?(t(4,d={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",d)):t(4,d=z)}vt(m);let p="";async function v(){const{data:E,error:F}=await ee.rpc("get_holdings",{bookid:l});F&&console.error(F),console.table(E),t(6,b=E)}async function _(){if(!p.startsWith("1000")||p.length!=8||isNaN(Number(p))){alert("Invalid format");return}const{data:E}=await ee.from("library_holdings").select().eq("barcode",p);if(E.length!=0)return;const{error:F}=await ee.from("library_holdings").insert({book_id:l,barcode:p});if(F){console.error(F),alert(F.message);return}t(5,p="")}let b;n=="staff"&&(v(),ee.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},v).subscribe());let y,w,T=0,D="btn-secondary";n=="client"&&(k(),w||($(),S()),ee.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},()=>{t(7,w=""),k(),w||($(),S())}).subscribe());async function $(){const{data:E,error:F}=await ee.rpc("isreserved",{bookid:l,studid:i});t(0,y=E)}async function S(){const{data:E,error:F}=await ee.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,T=E.length)}async function k(){const{data:E,error:F}=await ee.rpc("isborrowed",{bookid:l,studid:i});t(7,w=E)}async function O(){t(12,H=!0);const{data:E,error:F}=await ee.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(F){console.error(F),t(12,H=!1);return}const{error:z}=await ee.from("book_reservation").insert({reservation_id:await I(),stud_id:i,holding_id:E.holding_id});if(z){console.error(z),t(12,H=!1);return}const{data:ue,error:se}=await ee.from("library_holdings").update({status:"Reserved"}).eq("barcode",E.barcode).select("holding_id").single();if(se){console.error(se),t(12,H=!1);return}t(12,H=!1),$()}async function C(){const{data:E,error:F}=await ee.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:z}=await ee.from("library_holdings").update({status:"Available"}).eq("holding_id",E.holding_id);!F||!z||(console.error(F),console.error(z))}async function I(){let E=go();const{data:F,error:z}=await ee.from("book_reservation").select().eq("reservation_id",E);return console.log(F),F.length!=0&&(E=go(),console.log("exists")),console.log(E),E}async function N(){let E=vo();const{data:F,error:z}=await ee.from("book_borrow").select().eq("borrow_id",E);console.log(F),F.length!=0&&(E=vo(),console.log("exists")),t(5,p=E)}let L=!1,A=!1;function B(){t(11,A=!A)}async function Y(){const{data:E,error:F}=await ee.from("books").update({storage_type:"public"}).eq("book_id",l);if(F){alert(F);return}t(3,f.storage_type="public",f),t(3,f)}async function W(){const{data:E,error:F}=await ee.from("books").update({storage_type:"private"}).eq("book_id",l);if(F){alert(F);return}t(3,f.storage_type="private",f),t(3,f)}let H=!1;const q=()=>t(10,L=!0),V=()=>{t(13,s="Cancel Reservation"),t(9,D="btn-danger")},G=()=>{t(13,s=`Reserved (#${y})`),t(9,D="btn-secondary")};function re(){p=this.value,t(5,p)}return r.$$set=E=>{"params"in E&&t(22,o=E.params)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(13,s=`Reserved (${y})`)},[y,n,a,f,d,p,b,w,T,D,L,A,H,s,l,_,O,C,N,B,Y,W,o,q,V,G,re]}class Ya extends De{constructor(e){super(),Se(this,e,d_,f_,ye,{params:22},null,[-1,-1])}}function wo(r,e,t){const s=r.slice();return s[35]=e[t][0],s[36]=e[t][1],s}function yo(r,e,t){const s=r.slice();return s[35]=e[t][0],s[40]=e[t][1],s}function ko(r,e,t){const s=r.slice();return s[35]=e[t][0],s[44]=e[t][1],s}function h_(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[4]),t||(s=U(e,"input",r[18]),t=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&M(e),t=!1,s()}}}function m_(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[5]),t||(s=U(e,"input",r[19]),t=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&M(e),t=!1,s()}}}function p_(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[21](e),t||(s=U(e,"change",r[20]),t=!0)},p:x,d(n){n&&M(e),r[21](null),t=!1,s()}}}function __(r){let e,t,s,n,i,o,l,a;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=g(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+r[11]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){P(f,e,d),J(e,r[6]),P(f,s,d),P(f,n,d),P(f,i,d),P(f,o,d),l||(a=[U(e,"input",r[23]),U(e,"keyup",r[24])],l=!0)},p(f,d){d[0]&2048&&t!==(t="form-control "+f[11])&&u(e,"class",t),d[0]&64&&e.value!==f[6]&&J(e,f[6])},d(f){f&&(M(e),M(s),M(n),M(i),M(o)),l=!1,ge(a)}}}function b_(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+r[12]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[7]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[25]),U(e,"keyup",r[26])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&u(e,"class",t),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function g_(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+r[13]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[8]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[27]),U(e,"keyup",r[28])],i=!0)},p(l,a){a[0]&8192&&t!==(t="form-control "+l[13])&&u(e,"class",t),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function v_(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),u(e,"min","0"),u(e,"max","6"),e.required=!0},m(n,i){P(n,e,i),J(e,r[9]),t||(s=U(e,"input",r[29]),t=!0)},p(n,i){i[0]&512&&er(e.value)!==n[9]&&J(e,n[9])},d(n){n&&M(e),t=!1,s()}}}function w_(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[10]),t||(s=U(e,"input",r[30]),t=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&M(e),t=!1,s()}}}function y_(r){return{c:x,m:x,p:x,d:x}}function k_(r){let e,t=Te(Object.entries(r[43])),s=[];for(let n=0;n<t.length;n+=1)s[n]=$o(ko(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","authors")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){t=Te(Object.entries(n[43]));let o;for(o=0;o<t.length;o+=1){const l=ko(n,t,o);s[o]?s[o].p(l,i):(s[o]=$o(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function $o(r){let e;return{c(){e=h("option"),e.__value=r[44].name,J(e,e.__value)},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function $_(r){return{c:x,m:x,p:x,d:x}}function S_(r){return{c:x,m:x,p:x,d:x}}function D_(r){let e,t=Te(Object.entries(r[39])),s=[];for(let n=0;n<t.length;n+=1)s[n]=So(yo(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","publishers")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){t=Te(Object.entries(n[39]));let o;for(o=0;o<t.length;o+=1){const l=yo(n,t,o);s[o]?s[o].p(l,i):(s[o]=So(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function So(r){let e;return{c(){e=h("option"),e.__value=r[40].name,J(e,e.__value)},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function T_(r){return{c:x,m:x,p:x,d:x}}function O_(r){return{c:x,m:x,p:x,d:x}}function C_(r){let e,t=Te(Object.entries(r[34])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Do(wo(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","categories")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){t=Te(Object.entries(n[34]));let o;for(o=0;o<t.length;o+=1){const l=wo(n,t,o);s[o]?s[o].p(l,i):(s[o]=Do(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function Do(r){let e;return{c(){e=h("option"),e.__value=r[36].name,J(e,e.__value)},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function M_(r){return{c:x,m:x,p:x,d:x}}function P_(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me,Pe,pe;t=new tt({props:{text:"Add Book"}}),l=new $e({props:{label:"Book Title:",id:"book-name",$$slots:{default:[h_]},$$scope:{ctx:r}}}),f=new $e({props:{label:"Book Description:",id:"book-description",$$slots:{default:[m_]},$$scope:{ctx:r}}}),m=new $e({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[p_]},$$scope:{ctx:r}}}),C=new $e({props:{label:"Category:",id:"book-category",$$slots:{default:[__]},$$scope:{ctx:r}}}),N=new $e({props:{label:"Author: ",id:"book-author",$$slots:{default:[b_]},$$scope:{ctx:r}}}),A=new $e({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[g_]},$$scope:{ctx:r}}}),Y=new $e({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[v_]},$$scope:{ctx:r}}}),H=new $e({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[w_]},$$scope:{ctx:r}}});let ne={ctx:r,current:null,token:null,hasCatch:!1,pending:$_,then:k_,catch:y_,value:43};sn(r[15](),ne);let ce={ctx:r,current:null,token:null,hasCatch:!1,pending:T_,then:D_,catch:S_,value:39};sn(r[16](),ce);let _e={ctx:r,current:null,token:null,hasCatch:!1,pending:M_,then:C_,catch:O_,value:34};return sn(r[17](),_e),{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=g(),Q(f.$$.fragment),d=g(),Q(m.$$.fragment),p=g(),v=h("div"),_=h("label"),_.textContent="Preview:",b=g(),y=h("div"),w=h("img"),D=g(),$=h("button"),$.textContent="Remove",k=g(),O=h("div"),Q(C.$$.fragment),I=g(),Q(N.$$.fragment),L=g(),Q(A.$$.fragment),B=g(),Q(Y.$$.fragment),W=g(),Q(H.$$.fragment),q=g(),V=h("div"),G=h("button"),G.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',re=g(),E=h("button"),E.innerHTML='<i class="bi bi-plus-circle"></i> Reset',F=g(),z=h("a"),z.innerHTML='<button class="btn btn-danger" type="button"><i class="bi bi-x-circle"></i> Cancel</button>',ue=g(),ne.block.c(),se=g(),ce.block.c(),fe=g(),_e.block.c(),u(_,"for","cover-preview"),u(_,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(w.src,T=r[3])||u(w,"src",T),u(w,"alt","Preview"),u(w,"id","cover-preview"),u(w,"height","150"),u($,"class","btn btn-sm btn-danger"),u(y,"class","col-sm-8 col-md-9"),u(y,"id","preview-div"),u(v,"class",S="my-3 row "+r[2]),u(o,"class","col-sm-12 col-lg-6"),u(O,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(G,"class","btn btn-success"),u(G,"type","submit"),u(E,"class","btn btn-secondary"),u(E,"type","reset"),u(z,"href","./#/"),u(V,"class","my-3"),u(e,"class","my-1 container")},m(ae,ie){P(ae,e,ie),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),K(l,o,null),c(o,a),K(f,o,null),c(o,d),K(m,o,null),c(o,p),c(o,v),c(v,_),c(v,b),c(v,y),c(y,w),c(y,D),c(y,$),c(i,k),c(i,O),K(C,O,null),c(O,I),K(N,O,null),c(O,L),K(A,O,null),c(O,B),K(Y,O,null),c(O,W),K(H,O,null),c(n,q),c(n,V),c(V,G),c(V,re),c(V,E),c(V,F),c(V,z),c(e,ue),ne.block.m(e,ne.anchor=null),ne.mount=()=>e,ne.anchor=se,c(e,se),ce.block.m(e,ce.anchor=null),ce.mount=()=>e,ce.anchor=fe,c(e,fe),_e.block.m(e,_e.anchor=null),_e.mount=()=>e,_e.anchor=null,me=!0,Pe||(pe=[U($,"click",r[22]),U(E,"click",r[31]),U(n,"submit",gt(r[14]))],Pe=!0)},p(ae,ie){r=ae;const ve={};ie[0]&16|ie[1]&65536&&(ve.$$scope={dirty:ie,ctx:r}),l.$set(ve);const ke={};ie[0]&32|ie[1]&65536&&(ke.$$scope={dirty:ie,ctx:r}),f.$set(ke);const rr={};ie[0]&3|ie[1]&65536&&(rr.$$scope={dirty:ie,ctx:r}),m.$set(rr),(!me||ie[0]&8&&!Ne(w.src,T=r[3]))&&u(w,"src",T),(!me||ie[0]&4&&S!==(S="my-3 row "+r[2]))&&u(v,"class",S);const $t={};ie[0]&2112|ie[1]&65536&&($t.$$scope={dirty:ie,ctx:r}),C.$set($t);const Ie={};ie[0]&4224|ie[1]&65536&&(Ie.$$scope={dirty:ie,ctx:r}),N.$set(Ie);const Ve={};ie[0]&8448|ie[1]&65536&&(Ve.$$scope={dirty:ie,ctx:r}),A.$set(Ve);const it={};ie[0]&512|ie[1]&65536&&(it.$$scope={dirty:ie,ctx:r}),Y.$set(it);const Vt={};ie[0]&1024|ie[1]&65536&&(Vt.$$scope={dirty:ie,ctx:r}),H.$set(Vt),nn(ne,r,ie),nn(ce,r,ie),nn(_e,r,ie)},i(ae){me||(j(t.$$.fragment,ae),j(l.$$.fragment,ae),j(f.$$.fragment,ae),j(m.$$.fragment,ae),j(C.$$.fragment,ae),j(N.$$.fragment,ae),j(A.$$.fragment,ae),j(Y.$$.fragment,ae),j(H.$$.fragment,ae),ae&&(de||Ee(()=>{de=Je(e,Ke,{duration:500}),de.start()})),me=!0)},o(ae){R(t.$$.fragment,ae),R(l.$$.fragment,ae),R(f.$$.fragment,ae),R(m.$$.fragment,ae),R(C.$$.fragment,ae),R(N.$$.fragment,ae),R(A.$$.fragment,ae),R(Y.$$.fragment,ae),R(H.$$.fragment,ae),me=!1},d(ae){ae&&M(e),Z(t),Z(l),Z(f),Z(m),Z(C),Z(N),Z(A),Z(Y),Z(H),ne.block.d(),ne.token=null,ne=null,ce.block.d(),ce.token=null,ce=null,_e.block.d(),_e.token=null,_e=null,Pe=!1,ge(pe)}}}function j_(r,e,t){let s,n,i="d-none",o,l,a,f="",d,m,p,v,_=[],b,y,w;async function T(){const{data:E,error:F}=await ee.from("author").select("author_id").eq("name",d).single(),{data:z,error:ue}=await ee.from("publisher").select("publisher_id").eq("name",m).single();let se=!0;if((F||!E)&&(t(12,y="is-invalid"),se=!1),(ue||!z)&&(t(13,w="is-invalid"),se=!1),!await D()){if(_.length!=0)return;t(11,b="is-invalid"),se=!1}if(!se)return;const{data:fe,error:de}=await ee.from("books").insert({title:l,description:a,author_id:E.author_id,publisher_id:z.publisher_id,shelf_number:p,isbn:v}).select("book_id").single();if(de){console.error(de),alert(de.message);return}let me=!0;for(const Pe in _){const{data:pe,error:ne}=await ee.from("books_category").insert({book_id:fe.book_id,category_id:_[Pe]});ne&&(console.error(ne),me=!1)}if(alert(`Successfully Added ${l}!`),me||alert("Had problem while adding categories, Update book later"),s&&s[0]){const{data:Pe,error:pe}=await ee.storage.from("books").upload(`${fe.book_id}.jpg`,s[0]);pe&&console.error(pe)}Pr()}async function D(){if(f=="")return!1;let E=!0,F=[],z=f.split(",").map(ue=>ue.trim());for(const ue of z){const{data:se,error:fe}=await ee.from("category").select("category_id").eq("name",ue).single();fe?(E=!1,console.error(fe)):F.push(se.category_id),console.log(E)}return console.log(z,F),_=E?F:[],console.log(E,_),E}async function $(){const{data:E,error:F}=await ee.from("author").select("name").order("name",{ascending:!0});return E}async function S(){const{data:E,error:F}=await ee.from("publisher").select("name").order("name",{ascending:!0});return E}async function k(){const{data:E,error:F}=await ee.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return E}function O(){l=this.value,t(4,l)}function C(){a=this.value,t(5,a)}function I(){s=this.files,t(0,s)}function N(E){ft[E?"unshift":"push"](()=>{n=E,t(1,n)})}const L=()=>{t(1,n.value="",n),t(0,s="")};function A(){f=this.value,t(6,f)}const B=()=>t(11,b="");function Y(){d=this.value,t(7,d)}const W=()=>t(12,y="");function H(){m=this.value,t(8,m)}const q=()=>t(13,w="");function V(){p=er(this.value),t(9,p)}function G(){v=this.value,t(10,v)}const re=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(s&&s[0]){t(2,i="");const E=URL.createObjectURL(s[0]);t(3,o=E)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,m,p,v,b,y,w,T,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re]}class E_ extends De{constructor(e){super(),Se(this,e,j_,P_,ye,{},null,[-1,-1])}}function To(r,e,t){const s=r.slice();return s[8]=e[t][0],s[9]=e[t][1],s}function R_(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+r[4]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[6]),s=!0)},p:x,d(i){i&&M(e),s=!1,n()}}}function A_(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function I_(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function L_(r){let e,t,s,n=r[1].name+"",i,o,l,a,f,d,m,p,v,_=r[1].link+"",b,y,w=r[3]=="staff"&&Y_(r);function T(S,k){return S[1].bio==null?U_:N_}let D=T(r),$=D(r);return{c(){e=h("div"),t=h("div"),s=h("h1"),i=X(n),o=g(),w&&w.c(),l=g(),a=h("p"),$.c(),f=g(),d=h("p"),m=h("b"),m.textContent="Website:",p=g(),v=h("a"),b=X(_),u(s,"class","mb-2 pb-2"),u(t,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(a,"class",""),u(v,"href",y=r[1].link),u(e,"class","container")},m(S,k){P(S,e,k),c(e,t),c(t,s),c(s,i),c(t,o),w&&w.m(t,null),c(e,l),c(e,a),$.m(a,null),c(e,f),c(e,d),c(d,m),c(d,p),c(d,v),c(v,b)},p(S,k){k&2&&n!==(n=S[1].name+"")&&le(i,n),S[3]=="staff"&&w.p(S,k),D===(D=T(S))&&$?$.p(S,k):($.d(1),$=D(S),$&&($.c(),$.m(a,null))),k&2&&_!==(_=S[1].link+"")&&le(b,_),k&2&&y!==(y=S[1].link)&&u(v,"href",y)},i:x,o:x,d(S){S&&M(e),w&&w.d(),$.d()}}}function Y_(r){let e,t,s;return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-author?id="+r[4]),u(e,"class","d-print-none")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p:x,d(n){n&&M(e)}}}function N_(r){let e=r[1].bio+"",t;return{c(){t=X(e)},m(s,n){P(s,t,n)},p(s,n){n&2&&e!==(e=s[1].bio+"")&&le(t,e)},d(s){s&&M(t)}}}function U_(r){let e;return{c(){e=h("span"),e.textContent="No Bio",u(e,"class","text-secondary")},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function H_(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function F_(r){let e,t,s=Te(Object.entries(r[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Oo(To(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const f=To(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=Oo(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function Oo(r){let e,t;return e=new Fs({props:{title:r[9].title,id:r[9].book_id,author:r[9].publisher.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.title=s[9].title),n&4&&(i.id=s[9].book_id),n&4&&(i.author=s[9].publisher.name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function q_(r){let e,t,s,n;const i=[F_,H_],o=[];function l(a,f){return a[2]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function B_(r){let e,t,s,n,i,o,l,a,f,d,m,p,v;s=new tt({props:{text:"Author Details"}});function _($,S){return $[0]?A_:R_}let b=_(r),y=b(r);const w=[L_,I_],T=[];function D($,S){return $[1]?0:1}return a=D(r),f=T[a]=w[a](r),m=new Dt({props:{title:"Books",icon:"journal",$$slots:{default:[q_]},$$scope:{ctx:r}}}),{c(){e=h("main"),t=h("section"),Q(s.$$.fragment),n=g(),i=h("div"),o=h("div"),y.c(),l=g(),f.c(),d=g(),Q(m.$$.fragment),u(o,"class","d-flex justify-content-center my-1"),u(i,"class","d-md-flex d-block"),u(e,"class","container")},m($,S){P($,e,S),c(e,t),K(s,t,null),c(t,n),c(t,i),c(i,o),y.m(o,null),c(i,l),T[a].m(i,null),c(e,d),K(m,e,null),v=!0},p($,[S]){b===(b=_($))&&y?y.p($,S):(y.d(1),y=b($),y&&(y.c(),y.m(o,null)));let k=a;a=D($),a===k?T[a].p($,S):(Le(),R(T[k],1,1,()=>{T[k]=null}),Ye(),f=T[a],f?f.p($,S):(f=T[a]=w[a]($),f.c()),j(f,1),f.m(i,null));const O={};S&4100&&(O.$$scope={dirty:S,ctx:$}),m.$set(O)},i($){v||(j(s.$$.fragment,$),j(f),j(m.$$.fragment,$),$&&(p||Ee(()=>{p=Je(e,Ke,{duration:500}),p.start()})),v=!0)},o($){R(s.$$.fragment,$),R(f),R(m.$$.fragment,$),v=!1},d($){$&&M(e),Z(s),y.d(),T[a].d(),Z(m)}}}function W_(r,e,t){let s=localStorage.getItem("accType"),{params:n}=e,i=n.authorID,o=!1,l,a;async function f(){const{data:m,error:p}=await ee.from("author").select().eq("author_id",i);console.log(m),t(1,l=m[0]);const{data:v,error:_}=await ee.from("books").select("book_id, title, publisher(name)").eq("author_id",i);console.log(v),t(2,a=v)}vt(f);const d=()=>t(0,o=!0);return r.$$set=m=>{"params"in m&&t(5,n=m.params)},[o,l,a,s,i,n,d]}class Na extends De{constructor(e){super(),Se(this,e,W_,B_,ye,{params:5})}}function Co(r,e,t){const s=r.slice();return s[8]=e[t][0],s[9]=e[t][1],s}function V_(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+r[4]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=U(e,"error",r[6]),s=!0)},p:x,d(i){i&&M(e),s=!1,n()}}}function z_(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:x,d(s){s&&M(e)}}}function Mo(r){let e,t,s,n=r[0].name+"",i,o,l,a,f,d,m,p,v,_=r[0].link+"",b,y,w=r[3]=="staff"&&G_(r);function T(S,k){return S[0].description?J_:K_}let D=T(r),$=D(r);return{c(){e=h("div"),t=h("div"),s=h("h1"),i=X(n),o=g(),w&&w.c(),l=g(),a=h("p"),$.c(),f=g(),d=h("p"),m=h("b"),m.textContent="Website:",p=g(),v=h("a"),b=X(_),u(s,"class","mb-2 pb-2"),u(t,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(a,"class",""),u(v,"href",y=r[0].link),u(v,"id","publisher-website"),u(e,"class","container")},m(S,k){P(S,e,k),c(e,t),c(t,s),c(s,i),c(t,o),w&&w.m(t,null),c(e,l),c(e,a),$.m(a,null),c(e,f),c(e,d),c(d,m),c(d,p),c(d,v),c(v,b)},p(S,k){k&1&&n!==(n=S[0].name+"")&&le(i,n),S[3]=="staff"&&w.p(S,k),D===(D=T(S))&&$?$.p(S,k):($.d(1),$=D(S),$&&($.c(),$.m(a,null))),k&1&&_!==(_=S[0].link+"")&&le(b,_),k&1&&y!==(y=S[0].link)&&u(v,"href",y)},d(S){S&&M(e),w&&w.d(),$.d()}}}function G_(r){let e,t,s;return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-publisher?id="+r[4]),u(e,"class","d-print-none")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p:x,d(n){n&&M(e)}}}function J_(r){let e=r[0].description+"",t;return{c(){t=X(e)},m(s,n){P(s,t,n)},p(s,n){n&1&&e!==(e=s[0].description+"")&&le(t,e)},d(s){s&&M(t)}}}function K_(r){let e;return{c(){e=h("span"),e.textContent="No Description",u(e,"class","text-secondary")},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function Z_(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Q_(r){let e,t,s=Te(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Po(Co(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Te(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const f=Co(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=Po(f),n[a].c(),j(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function Po(r){let e,t;return e=new Fs({props:{title:r[9].title,id:r[9].book_id,author:r[9].author.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.title=s[9].title),n&2&&(i.id=s[9].book_id),n&2&&(i.author=s[9].author.name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function X_(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_;t=new tt({props:{text:"Publisher Details"}});function b(k,O){return k[2]?z_:V_}let y=b(r),w=y(r),T=r[0]&&Mo(r);d=new Dt({props:{title:"Books",icon:"journal"}});const D=[Q_,Z_],$=[];function S(k,O){return k[1]?0:1}return p=S(r),v=$[p]=D[p](r),{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),w.c(),o=g(),T&&T.c(),a=g(),f=h("section"),Q(d.$$.fragment),m=g(),v.c(),u(i,"id","publisher-cover"),u(i,"class","d-flex justify-content-center my-1"),u(n,"class","d-md-flex d-block"),u(e,"class","container"),u(f,"class","container")},m(k,O){P(k,e,O),K(t,e,null),c(e,s),c(e,n),c(n,i),w.m(i,null),c(n,o),T&&T.m(n,null),P(k,a,O),P(k,f,O),K(d,f,null),c(f,m),$[p].m(f,null),_=!0},p(k,[O]){y===(y=b(k))&&w?w.p(k,O):(w.d(1),w=y(k),w&&(w.c(),w.m(i,null))),k[0]?T?T.p(k,O):(T=Mo(k),T.c(),T.m(n,null)):T&&(T.d(1),T=null);let C=p;p=S(k),p===C?$[p].p(k,O):(Le(),R($[C],1,1,()=>{$[C]=null}),Ye(),v=$[p],v?v.p(k,O):(v=$[p]=D[p](k),v.c()),j(v,1),v.m(f,null))},i(k){_||(j(t.$$.fragment,k),k&&(l||Ee(()=>{l=Je(e,Ke,{duration:500}),l.start()})),j(d.$$.fragment,k),j(v),_=!0)},o(k){R(t.$$.fragment,k),R(d.$$.fragment,k),R(v),_=!1},d(k){k&&(M(e),M(a),M(f)),Z(t),w.d(),T&&T.d(),Z(d),$[p].d()}}}function x_(r,e,t){let s=localStorage.getItem("accType"),{params:n}=e,i=n.publisherID,o,l;async function a(){const{data:m,error:p}=await ee.from("publisher").select().eq("publisher_id",i);console.log(m),t(0,o=m[0]);const{data:v,error:_}=await ee.from("books").select("book_id, title, author(name)").eq("publisher_id",i);console.log(v),t(1,l=v)}vt(a);let f=!1;const d=()=>t(2,f=!0);return r.$$set=m=>{"params"in m&&t(5,n=m.params)},[o,l,f,s,i,n,d]}class Ua extends De{constructor(e){super(),Se(this,e,x_,X_,ye,{params:5})}}function eb(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),s=h("i"),i=g(),o=h("div"),l=h("h5"),a=h("a"),f=X(r[0]),u(s,"class",n="bi bi-"+r[2]),u(t,"class","d-flex justify-content-center"),Ge(t,"font-size","3em"),u(a,"class","stretched-link svelte-1vxezln"),u(a,"href",d="./#/"+r[1]),u(l,"class","card-title text-center my-2"),u(o,"class","card-body p-1"),u(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(m,p){P(m,e,p),c(e,t),c(t,s),c(e,i),c(e,o),c(o,l),c(l,a),c(a,f)},p(m,[p]){p&4&&n!==(n="bi bi-"+m[2])&&u(s,"class",n),p&1&&le(f,m[0]),p&2&&d!==(d="./#/"+m[1])&&u(a,"href",d)},i:x,o:x,d(m){m&&M(e)}}}function tb(r,e,t){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return r.$$set=o=>{"name"in o&&t(0,s=o.name),"link"in o&&t(1,n=o.link),"icon"in o&&t(2,i=o.icon)},[s,n,i]}class Nt extends De{constructor(e){super(),Se(this,e,tb,eb,ye,{name:0,link:1,icon:2})}}function rb(r){let e,t,s,n,i;return t=new Nt({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new Nt({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),Q(t.$$.fragment),s=g(),Q(n.$$.fragment),u(e,"class","row justify-content-center gap-4")},m(o,l){P(o,e,l),K(t,e,null),c(e,s),K(n,e,null),i=!0},p:x,i(o){i||(j(t.$$.fragment,o),j(n.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(n.$$.fragment,o),i=!1},d(o){o&&M(e),Z(t),Z(n)}}}function sb(r){let e,t,s,n,i,o,l;return t=new Nt({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new Nt({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new Nt({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),{c(){e=h("div"),Q(t.$$.fragment),s=g(),Q(n.$$.fragment),i=g(),Q(o.$$.fragment),u(e,"class","row justify-content-center gap-5")},m(a,f){P(a,e,f),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),l=!0},p:x,i(a){l||(j(t.$$.fragment,a),j(n.$$.fragment,a),j(o.$$.fragment,a),l=!0)},o(a){R(t.$$.fragment,a),R(n.$$.fragment,a),R(o.$$.fragment,a),l=!1},d(a){a&&M(e),Z(t),Z(n),Z(o)}}}function nb(r){let e,t,s,n,i,o,l,a,f;return t=new Nt({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new Nt({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new Nt({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new Nt({props:{name:"System Log",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),Q(t.$$.fragment),s=g(),Q(n.$$.fragment),i=g(),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),u(e,"class","row justify-content-center gap-5 mb-5")},m(d,m){P(d,e,m),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),f=!0},p:x,i(d){f||(j(t.$$.fragment,d),j(n.$$.fragment,d),j(o.$$.fragment,d),j(a.$$.fragment,d),f=!0)},o(d){R(t.$$.fragment,d),R(n.$$.fragment,d),R(o.$$.fragment,d),R(a.$$.fragment,d),f=!1},d(d){d&&M(e),Z(t),Z(n),Z(o),Z(a)}}}function ib(r){let e,t,s,n,i,o,l,a;return t=new Dt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[rb]},$$scope:{ctx:r}}}),n=new Dt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[sb]},$$scope:{ctx:r}}}),o=new Dt({props:{title:"Reports",icon:"receipt",$$slots:{default:[nb]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),s=g(),Q(n.$$.fragment),i=g(),Q(o.$$.fragment),u(e,"class","container")},m(f,d){P(f,e,d),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),a=!0},p(f,[d]){const m={};d&1&&(m.$$scope={dirty:d,ctx:f}),t.$set(m);const p={};d&1&&(p.$$scope={dirty:d,ctx:f}),n.$set(p);const v={};d&1&&(v.$$scope={dirty:d,ctx:f}),o.$set(v)},i(f){a||(j(t.$$.fragment,f),j(n.$$.fragment,f),j(o.$$.fragment,f),f&&(l||Ee(()=>{l=Je(e,Ke,{duration:500}),l.start()})),a=!0)},o(f){R(t.$$.fragment,f),R(n.$$.fragment,f),R(o.$$.fragment,f),a=!1},d(f){f&&M(e),Z(t),Z(n),Z(o)}}}class ob extends De{constructor(e){super(),Se(this,e,null,ib,ye,{})}}function jo(r,e,t){const s=r.slice();return s[16]=e[t][0],s[17]=e[t][1],s}function Eo(r,e,t){const s=r.slice();return s[16]=e[t][0],s[17]=e[t][1],s}function Ro(r,e,t){const s=r.slice();return s[16]=e[t][0],s[17]=e[t][1],s}function lb(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:x,i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function ab(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',u(e,"class","d-flex justify-content-center mt-5")},m(t,s){P(t,e,s)},p:x,i:x,o:x,d(t){t&&M(e)}}}function ub(r){let e,t,s=Te(Object.entries(r[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ao(jo(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const f=jo(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=Ao(f),n[a].c(),j(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function cb(r){let e,t,s=Te(Object.entries(r[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Io(Eo(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const f=Eo(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=Io(f),n[a].c(),j(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function fb(r){let e,t,s=Te(Object.entries(r[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Lo(Ro(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const f=Ro(o,s,a);n[a]?(n[a].p(f,l),j(n[a],1)):(n[a]=Lo(f),n[a].c(),j(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)j(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&M(e),Xe(n,o)}}}function Ao(r){let e,t;return e=new Vl({props:{id:r[17].publisher_id,name:r[17].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[17].publisher_id),n&4&&(i.name=s[17].name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Io(r){let e,t;return e=new Wl({props:{id:r[17].author_id,name:r[17].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[17].author_id),n&4&&(i.name=s[17].name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Lo(r){let e,t;return e=new Fs({props:{title:r[17].title,id:r[17].book_id,author:r[17].author.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.title=s[17].title),n&4&&(i.id=s[17].book_id),n&4&&(i.author=s[17].author.name),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function db(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C;t=new tt({props:{text:"Library Holdings"}});const I=[fb,cb,ub,ab,lb],N=[];function L(A,B){return A[2].books.length>0?0:A[2].author.length>0?1:A[2].publisher.length>0?2:A[0]?4:3}return D=L(r),$=N[D]=I[D](r),{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",f=h("option"),f.textContent="Publisher",d=g(),m=h("div"),p=h("input"),v=g(),_=h("button"),_.innerHTML='<i class="bi bi-search"></i>',b=g(),y=h("hr"),w=g(),T=h("div"),$.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),f.__value="publisher",J(f,f.__value),u(o,"name","searchtype"),u(o,"class","form-select"),u(i,"class","col-auto col-md-2 p-0 pe-md-4"),u(p,"class","form-control form-control-lg"),u(p,"type","search"),u(p,"placeholder","Search"),u(p,"name","Search"),u(m,"class","col-6 col-md-6 p-0"),u(_,"class","btn btn-lg btn-success col-auto col-md-1"),u(_,"type","submit"),u(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),u(T,"class","row"),u(e,"class","container")},m(A,B){P(A,e,B),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),c(o,l),c(o,a),c(o,f),r[5](o),c(n,d),c(n,m),c(m,p),J(p,r[1]),c(n,v),c(n,_),c(e,b),c(e,y),c(e,w),c(e,T),N[D].m(T,null),k=!0,O||(C=[U(o,"change",r[4]),U(p,"input",r[6]),U(p,"keyup",r[7]),U(_,"click",r[4])],O=!0)},p(A,[B]){B&2&&p.value!==A[1]&&J(p,A[1]);let Y=D;D=L(A),D===Y?N[D].p(A,B):(Le(),R(N[Y],1,1,()=>{N[Y]=null}),Ye(),$=N[D],$?$.p(A,B):($=N[D]=I[D](A),$.c()),j($,1),$.m(T,null))},i(A){k||(j(t.$$.fragment,A),j($),A&&(S||Ee(()=>{S=Je(e,Ke,{duration:500}),S.start()})),k=!0)},o(A){R(t.$$.fragment,A),R($),k=!1},d(A){A&&M(e),Z(t),r[5](null),N[D].d(),O=!1,ge(C)}}}function hb(r,e,t){let s;Rr(r,lu,w=>t(10,s=w));let n=!0;function i(){switch(s){case"/search/author":t(3,m.value="author",m);break;case"/search/publisher":t(3,m.value="publisher",m);break;default:t(3,m.value="books",m)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",f="",d={books:[],author:[],publisher:[]},m;async function p(){t(0,n=!0),a=m.value,console.log(a);const{data:w,error:T}=await ee.from(a).select(o[a]).ilike(l[a],`%${f}%`);T&&console.log(T),t(2,d.books=[],d),t(2,d.author=[],d),t(2,d.publisher=[],d),t(2,d[a]=w,d),t(2,d),t(0,n=!1),console.log(n,d)}async function v(){const{data:w,error:T}=await ee.rpc("getcategories");T&&console.error(T)}vt(i),vt(p),vt(v);function _(w){ft[w?"unshift":"push"](()=>{m=w,t(3,m)})}function b(){f=this.value,t(1,f)}return[n,f,d,m,p,_,b,w=>w.key==="Enter"&&p()]}class Mr extends De{constructor(e){super(),Se(this,e,hb,db,ye,{})}}function Yo(r){let e,t;return{c(){e=h("div"),t=X(r[6]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(s,n){P(s,e,n),c(e,t)},p(s,n){n[0]&64&&le(t,s[6])},d(s){s&&M(e)}}}function mb(r){let e;return{c(){e=X("Log In")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function pb(r){let e;return{c(){e=h("div"),u(e,"class","spinner-border spinner-border-sm"),u(e,"role","status")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function _b(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me,Pe,pe,ne,ce,_e,ae,ie,ve,ke,rr,$t,Ie,Ve,it,Vt,at,pi,Nr,_i,jt,bi,gi,dr,zt,Ur,en,vi,st=r[8]&&No(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",s=g(),n=h("form"),st&&st.c(),i=g(),o=h("div"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person-bounding-box"></i>',f=g(),d=h("input"),m=g(),p=h("label"),p.textContent="Student ID",v=g(),_=h("div"),b=h("span"),b.innerHTML='<i class="bi bi-person-vcard-fill"></i>',y=g(),w=h("input"),T=g(),D=h("label"),D.textContent="First Name",$=g(),S=h("div"),k=h("span"),k.innerHTML='<i class="bi bi-person-vcard-fill"></i>',O=g(),C=h("input"),I=g(),N=h("label"),N.textContent="Last Name",L=g(),A=h("div"),B=h("span"),B.innerHTML='<i class="bi bi-envelope"></i>',Y=g(),W=h("input"),H=g(),q=h("label"),q.textContent="Email",V=g(),G=h("div"),re=h("div"),E=h("span"),E.innerHTML='<i class="bi bi-telephone-fill"></i>',F=g(),z=h("input"),ue=g(),se=h("label"),se.textContent="Contact",fe=g(),de=h("div"),me=h("span"),me.innerHTML='<i class="bi bi-geo-alt-fill"></i>',Pe=g(),pe=h("input"),ne=g(),ce=h("label"),ce.textContent="Address",_e=g(),ae=h("div"),ie=h("span"),ie.innerHTML='<i class="bi bi-calendar"></i>',ve=g(),ke=h("input"),rr=g(),$t=h("label"),$t.textContent="Year Level",Ie=g(),Ve=h("div"),it=h("span"),it.innerHTML='<i class="bi bi-mortarboard-fill"></i>',Vt=g(),at=h("input"),pi=g(),Nr=h("label"),Nr.textContent="Course",_i=g(),jt=h("button"),bi=X("Proceed"),gi=g(),dr=h("a"),dr.textContent="Back",u(t,"class","svelte-1h623o7"),u(a,"class","icon svelte-1h623o7"),u(d,"type","text"),u(d,"id","sID"),u(d,"name","hidden"),d.required=!0,u(d,"minlength","6"),u(d,"maxlength","6"),u(d,"autocomplete","off"),u(d,"class","svelte-1h623o7"),u(p,"for","sID"),u(p,"class","svelte-1h623o7"),u(l,"class","input-box svelte-1h623o7"),u(b,"class","icon svelte-1h623o7"),u(w,"type","text"),u(w,"id","fname"),u(w,"name","hidden"),w.required=!0,u(w,"autocomplete","off"),u(w,"class","svelte-1h623o7"),u(D,"for","fname"),u(D,"class","svelte-1h623o7"),u(_,"class","input-box svelte-1h623o7"),u(k,"class","icon svelte-1h623o7"),u(C,"type","text"),u(C,"id","lname"),u(C,"name","hidden"),C.required=!0,u(C,"autocomplete","off"),u(C,"class","svelte-1h623o7"),u(N,"for","lname"),u(N,"class","svelte-1h623o7"),u(S,"class","input-box svelte-1h623o7"),u(B,"class","icon svelte-1h623o7"),u(W,"type","email"),u(W,"id","email"),u(W,"name","hidden"),W.required=!0,u(W,"autocomplete","off"),u(W,"class","svelte-1h623o7"),u(q,"for","email"),u(q,"class","svelte-1h623o7"),u(A,"class","input-box svelte-1h623o7"),u(o,"class","col-12 col-sm-6"),u(E,"class","icon svelte-1h623o7"),u(z,"type","tel"),u(z,"id","contact"),u(z,"name","hidden"),u(z,"minlength","11"),u(z,"maxlength","11"),z.required=!0,u(z,"autocomplete","off"),u(z,"class","svelte-1h623o7"),u(se,"for","contact"),u(se,"class","svelte-1h623o7"),u(re,"class","input-box svelte-1h623o7"),u(me,"class","icon svelte-1h623o7"),u(pe,"type","text"),u(pe,"id","address"),u(pe,"name","hidden"),pe.required=!0,u(pe,"autocomplete","off"),u(pe,"class","svelte-1h623o7"),u(ce,"for","address"),u(ce,"class","svelte-1h623o7"),u(de,"class","input-box svelte-1h623o7"),u(ie,"class","icon svelte-1h623o7"),u(ke,"type","number"),u(ke,"id","yearLevel"),u(ke,"name","hidden"),u(ke,"max","4"),u(ke,"min","1"),ke.required=!0,u(ke,"autocomplete","off"),u(ke,"class","svelte-1h623o7"),u($t,"for","yearLevel"),u($t,"class","svelte-1h623o7"),u(ae,"class","input-box svelte-1h623o7"),u(it,"class","icon svelte-1h623o7"),u(at,"type","text"),u(at,"id","course"),u(at,"name","hidden"),at.required=!0,u(at,"autocomplete","off"),u(at,"class","svelte-1h623o7"),u(Nr,"for","course"),u(Nr,"class","svelte-1h623o7"),u(Ve,"class","input-box svelte-1h623o7"),u(G,"class","col-12 col-sm-6"),u(jt,"type","submit"),u(jt,"class","bton w-50 svelte-1h623o7"),u(jt,"name","hidden"),u(jt,"id","Proceed"),jt.disabled=vb,u(n,"class","row justify-content-center"),u(dr,"href","./#/"),u(dr,"class","mt-2 svelte-1h623o7"),u(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1h623o7"),u(e,"style","height")},m(He,mt){P(He,e,mt),c(e,t),c(e,s),c(e,n),st&&st.m(n,null),c(n,i),c(n,o),c(o,l),c(l,a),c(l,f),c(l,d),J(d,r[12]),c(l,m),c(l,p),c(o,v),c(o,_),c(_,b),c(_,y),c(_,w),J(w,r[13]),c(_,T),c(_,D),c(o,$),c(o,S),c(S,k),c(S,O),c(S,C),J(C,r[14]),c(S,I),c(S,N),c(o,L),c(o,A),c(A,B),c(A,Y),c(A,W),J(W,r[17]),c(A,H),c(A,q),c(n,V),c(n,G),c(G,re),c(re,E),c(re,F),c(re,z),J(z,r[15]),c(re,ue),c(re,se),c(G,fe),c(G,de),c(de,me),c(de,Pe),c(de,pe),J(pe,r[16]),c(de,ne),c(de,ce),c(G,_e),c(G,ae),c(ae,ie),c(ae,ve),c(ae,ke),J(ke,r[18]),c(ae,rr),c(ae,$t),c(G,Ie),c(G,Ve),c(Ve,it),c(Ve,Vt),c(Ve,at),J(at,r[19]),c(Ve,pi),c(Ve,Nr),c(n,_i),c(n,jt),c(jt,bi),c(e,gi),c(e,dr),Ur=!0,en||(vi=[U(d,"input",r[41]),U(w,"input",r[42]),U(C,"input",r[43]),U(W,"input",r[44]),U(z,"input",r[45]),U(pe,"input",r[46]),U(ke,"input",r[47]),U(at,"input",r[48]),U(jt,"click",wb),U(n,"submit",gt(r[29])),U(dr,"click",r[49])],en=!0)},p(He,mt){He[8]?st?st.p(He,mt):(st=No(He),st.c(),st.m(n,i)):st&&(st.d(1),st=null),mt[0]&4096&&d.value!==He[12]&&J(d,He[12]),mt[0]&8192&&w.value!==He[13]&&J(w,He[13]),mt[0]&16384&&C.value!==He[14]&&J(C,He[14]),mt[0]&131072&&W.value!==He[17]&&J(W,He[17]),mt[0]&32768&&J(z,He[15]),mt[0]&65536&&pe.value!==He[16]&&J(pe,He[16]),mt[0]&262144&&er(ke.value)!==He[18]&&J(ke,He[18]),mt[0]&524288&&at.value!==He[19]&&J(at,He[19])},i(He){Ur||(He&&Ee(()=>{Ur&&(zt||(zt=Tt(e,Ot,{duration:600,y:500},!0)),zt.run(1))}),Ur=!0)},o(He){He&&(zt||(zt=Tt(e,Ot,{duration:600,y:500},!1)),zt.run(0)),Ur=!1},d(He){He&&M(e),st&&st.d(),He&&zt&&zt.end(),en=!1,ge(vi)}}}function bb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me,Pe,pe=r[7]&&Uo(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",s=g(),pe&&pe.c(),n=g(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=g(),f=h("input"),d=g(),m=h("label"),m.textContent="Username",p=g(),v=h("div"),_=h("span"),b=h("a"),y=h("i"),T=g(),D=h("input"),S=g(),k=h("label"),k.textContent="Password",O=g(),C=h("div"),I=h("span"),N=h("a"),L=h("i"),B=g(),Y=h("input"),H=g(),q=h("label"),q.textContent="Confirm Password",V=g(),G=h("button"),re=X("Next"),E=g(),F=h("div"),z=h("p"),ue=X("Already have an account? "),se=h("a"),se.textContent="Login",u(t,"class","svelte-1h623o7"),u(l,"class","icon svelte-1h623o7"),u(f,"type","text"),u(f,"id","registerUsername"),f.required=!0,u(f,"autocomplete","off"),u(f,"class","svelte-1h623o7"),u(m,"for","registerUsername"),u(m,"class","svelte-1h623o7"),u(o,"class","input-box svelte-1h623o7"),u(y,"class",w="bi bi-"+(r[21]?"eye-slash":"eye")),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u(_,"class","icon svelte-1h623o7"),u(_,"id","showPass2"),u(D,"minlength","6"),u(D,"type",$=r[21]?"text":"password"),u(D,"id","registerPass"),D.required=!0,u(D,"autocomplete","off"),u(D,"maxlength","16"),u(D,"class","svelte-1h623o7"),u(k,"for","registerPass"),u(k,"class","svelte-1h623o7"),u(v,"class","input-box svelte-1h623o7"),u(L,"class",A="bi bi-"+(r[22]?"eye-slash":"eye")),u(N,"href","./#/"),u(N,"class","svelte-1h623o7"),u(I,"class","icon svelte-1h623o7"),u(I,"id","showPass3"),u(Y,"type",W=r[22]?"text":"password"),u(Y,"id","registerConfirm"),Y.required=!0,u(Y,"autocomplete","off"),u(Y,"class","svelte-1h623o7"),u(q,"for","registerConfirm"),u(q,"class","svelte-1h623o7"),u(C,"class","input-box svelte-1h623o7"),G.disabled=r[2],u(G,"type","submit"),u(G,"class","bton svelte-1h623o7"),u(G,"id","registerBtn"),u(se,"href","./#/"),u(se,"class","login-link svelte-1h623o7"),u(F,"class","login-register svelte-1h623o7"),u(e,"class","form-box register svelte-1h623o7")},m(ne,ce){P(ne,e,ce),c(e,t),c(e,s),pe&&pe.m(e,null),c(e,n),c(e,i),c(i,o),c(o,l),c(o,a),c(o,f),J(f,r[9]),c(o,d),c(o,m),c(i,p),c(i,v),c(v,_),c(_,b),c(b,y),c(v,T),c(v,D),c(v,S),c(v,k),c(i,O),c(i,C),c(C,I),c(I,N),c(N,L),c(C,B),c(C,Y),c(C,H),c(C,q),c(i,V),c(i,G),c(G,re),c(i,E),c(i,F),c(F,z),c(z,ue),c(z,se),de=!0,me||(Pe=[U(f,"keyup",r[35]),U(f,"input",r[36]),U(b,"click",gt(r[37])),U(D,"keyup",r[38]),U(N,"click",gt(r[39])),U(Y,"keyup",r[40]),U(se,"click",r[26]),U(i,"submit",gt(r[28]))],me=!0)},p(ne,ce){ne[7]?pe?pe.p(ne,ce):(pe=Uo(ne),pe.c(),pe.m(e,n)):pe&&(pe.d(1),pe=null),ce[0]&512&&f.value!==ne[9]&&J(f,ne[9]),(!de||ce[0]&2097152&&w!==(w="bi bi-"+(ne[21]?"eye-slash":"eye")))&&u(y,"class",w),(!de||ce[0]&2097152&&$!==($=ne[21]?"text":"password"))&&u(D,"type",$),(!de||ce[0]&4194304&&A!==(A="bi bi-"+(ne[22]?"eye-slash":"eye")))&&u(L,"class",A),(!de||ce[0]&4194304&&W!==(W=ne[22]?"text":"password"))&&u(Y,"type",W),(!de||ce[0]&4)&&(G.disabled=ne[2])},i(ne){de||(ne&&Ee(()=>{de&&(fe||(fe=Tt(e,Ot,{duration:600,y:500},!0)),fe.run(1))}),de=!0)},o(ne){ne&&(fe||(fe=Tt(e,Ot,{duration:600,y:500},!1)),fe.run(0)),de=!1},d(ne){ne&&M(e),pe&&pe.d(),ne&&fe&&fe.end(),me=!1,ge(Pe)}}}function No(r){let e,t,s;return{c(){e=h("div"),t=h("div"),s=X(r[8]),u(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1h623o7"),u(e,"class","d-flex justify-content-center")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p(n,i){i[0]&256&&le(s,n[8])},d(n){n&&M(e)}}}function Uo(r){let e,t;return{c(){e=h("div"),t=X(r[7]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(s,n){P(s,e,n),c(e,t)},p(s,n){n[0]&128&&le(t,s[7])},d(s){s&&M(e)}}}function gb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me=r[6]&&Yo(r);function Pe(ie,ve){return ie[1]?pb:mb}let pe=Pe(r),ne=pe(r);const ce=[bb,_b],_e=[];function ae(ie,ve){return ie[0]?1:0}return q=ae(r),V=_e[q]=ce[q](r),{c(){e=h("main"),t=h("div"),s=h("div"),n=h("h2"),n.textContent="Login",i=g(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',f=g(),d=h("input"),m=g(),p=h("label"),p.textContent="Username",v=g(),_=h("div"),b=h("a"),y=h("span"),w=h("i"),D=g(),$=h("input"),k=g(),O=h("label"),O.textContent="Password",C=g(),me&&me.c(),I=g(),N=h("button"),ne.c(),L=g(),A=h("div"),B=h("p"),Y=X("Don't have an account? "),W=h("a"),W.textContent="Register",H=g(),V.c(),re=g(),E=h("div"),F=h("button"),F.textContent="Client",z=g(),ue=h("button"),ue.textContent="Staff",u(n,"class","svelte-1h623o7"),u(a,"class","icon svelte-1h623o7"),u(d,"type","text"),u(d,"id","usernameLogin"),d.required=!0,u(d,"autocomplete","off"),u(d,"class","svelte-1h623o7"),u(p,"for","usernameLogin"),u(p,"class","svelte-1h623o7"),u(l,"class","input-box svelte-1h623o7"),u(w,"class",T="bi bi-"+(r[20]?"eye-slash":"eye")),u(y,"class","icon svelte-1h623o7"),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u($,"minlength","6"),u($,"maxlength","12"),u($,"type",S=r[20]?"text":"password"),u($,"id","passwordLogin"),$.required=!0,u($,"autocomplete","off"),u($,"class","svelte-1h623o7"),u(O,"for","passwordLogin"),u(O,"class","svelte-1h623o7"),u(_,"class","input-box svelte-1h623o7"),N.disabled=r[1],u(N,"type","submit"),u(N,"class","bton svelte-1h623o7"),u(N,"id","loginBton"),u(W,"href","./#/"),u(W,"class","register-link svelte-1h623o7"),u(A,"class","login-register svelte-1h623o7"),u(o,"id","form"),u(s,"class","form-box login svelte-1h623o7"),u(t,"class",G="wrapper "+r[3]+" active-popup "+r[23]+" svelte-1h623o7"),u(F,"class","m-2 btn btn-primary btn-lg"),u(ue,"class","m-2 btn btn-danger btn-lg"),u(E,"class","d-none"),Ge(e,"background","url('./login-bg.jpg') no-repeat"),Ge(e,"background-size","cover"),Ge(e,"background-position","center"),Ge(e,"background-position-y","5%"),u(e,"class","svelte-1h623o7")},m(ie,ve){P(ie,e,ve),c(e,t),c(t,s),c(s,n),c(s,i),c(s,o),c(o,l),c(l,a),c(l,f),c(l,d),J(d,r[4]),c(l,m),c(l,p),c(o,v),c(o,_),c(_,b),c(b,y),c(y,w),c(_,D),c(_,$),c(_,k),c(_,O),c(o,C),me&&me.m(o,null),c(o,I),c(o,N),ne.m(N,null),c(o,L),c(o,A),c(A,B),c(B,Y),c(B,W),c(t,H),_e[q].m(t,null),c(e,re),c(e,E),c(E,F),c(E,z),c(E,ue),fe||(de=[U(d,"input",r[31]),U(d,"keyup",r[32]),U(b,"click",gt(r[33])),U($,"input",r[34]),U(W,"click",r[26]),U(o,"submit",gt(r[27])),U(F,"click",r[50]),U(ue,"click",r[51])],fe=!0)},p(ie,ve){ve[0]&16&&d.value!==ie[4]&&J(d,ie[4]),ve[0]&1048576&&T!==(T="bi bi-"+(ie[20]?"eye-slash":"eye"))&&u(w,"class",T),ve[0]&1048576&&S!==(S=ie[20]?"text":"password")&&u($,"type",S),ie[6]?me?me.p(ie,ve):(me=Yo(ie),me.c(),me.m(o,I)):me&&(me.d(1),me=null),pe!==(pe=Pe(ie))&&(ne.d(1),ne=pe(ie),ne&&(ne.c(),ne.m(N,null))),ve[0]&2&&(N.disabled=ie[1]);let ke=q;q=ae(ie),q===ke?_e[q].p(ie,ve):(Le(),R(_e[ke],1,1,()=>{_e[ke]=null}),Ye(),V=_e[q],V?V.p(ie,ve):(V=_e[q]=ce[q](ie),V.c()),j(V,1),V.m(t,null)),ve[0]&8388616&&G!==(G="wrapper "+ie[3]+" active-popup "+ie[23]+" svelte-1h623o7")&&u(t,"class",G)},i(ie){j(V),ie&&(se||Ee(()=>{se=Je(e,Ke,{duration:500}),se.start()}))},o(ie){R(V)},d(ie){ie&&M(e),me&&me.d(),ne.d(),_e[q].d(),fe=!1,ge(de)}}}let vb=!1;function _n(r){return r.target.value}const wb=()=>{};function yb(r,e,t){let s;document.querySelector("body").setAttribute("data-bs-theme","dark"),Ft("/");async function n(Ie){const{error:Ve}=await ee.from("reports").insert({report_type:"Log In",report_details:`${m} logged in`,staff_id:Ie});Ve&&console.error(Ve),xt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",Ie)}async function i(Ie){const{error:Ve}=await ee.from("reports").insert({report_type:"Log In",report_details:`${m} logged in`,staff_id:Ie});Ve&&console.error(Ve),xt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",Ie)}let o=!1,l=!1,a=!0,f="";function d(){t(30,a=!a)}let m,p;async function v(){console.log("CLicked"),t(1,o=!0);const{data:Ie,error:Ve}=await ee.from("user_level").select("account_type, user_id").eq("username",m).eq("password",p).maybeSingle();if(t(1,o=!1),Ve){console.error(Ve);return}if(!Ie&&await b(m)){t(6,y="Wrong password.");return}else if(!Ie){t(6,y="User does not exist.");return}Ie.account_type=="student"?n(Ie.user_id):Ie.account_type=="staff"?i(Ie.user_id):console.error(Ie)}let _=!1;async function b(Ie){const{data:Ve,error:it}=await ee.from("user_level").select().eq("username",Ie);return it&&console.error(it),Ve.length>0}let y,w,T,D,$,S,k,O,C,I,N,L,A,B;async function Y(){t(2,l=!0);let Ie=await b(D);if(t(2,l=!1),Ie){t(7,w="Username already exists.");return}else if($!=S){t(7,w="Password does not match.");return}t(0,_=!_)}async function W(){const{data:Ie,error:Ve}=await ee.from("user_level").select().eq("user_id",k);if(Ie.length!=0){t(8,T="Student ID already exists");return}const{error:it}=await ee.rpc("register_student",{userinput:D,passinput:$,idinput:k,fnameinput:O,lnameinput:C,addressinput:N,contactinput:I,emailinput:L,yearinput:A,courseinput:B});if(it){console.error(it);return}const{error:Vt}=await ee.from("reports").insert({report_type:"Register",report_details:`${O} created new account with id #${k}`,stud_id:k});Vt&&console.error(Vt),alert("Successfully created an account! Logging in..."),n(k)}let H=!1,q=!1,V=!1;function G(){m=this.value,t(4,m)}const re=()=>t(6,y=""),E=()=>t(20,H=!H),F=Ie=>{t(6,y=""),t(5,p=_n(Ie))},z=()=>t(7,w="");function ue(){D=this.value,t(9,D)}const se=()=>t(21,q=!q),fe=Ie=>{t(7,w=""),t(10,$=_n(Ie))},de=()=>t(22,V=!V),me=Ie=>{t(7,w=""),t(11,S=_n(Ie))};function Pe(){k=this.value,t(12,k)}function pe(){O=this.value,t(13,O)}function ne(){C=this.value,t(14,C)}function ce(){L=this.value,t(17,L)}function _e(){I=this.value,t(15,I)}function ae(){N=this.value,t(16,N)}function ie(){A=er(this.value),t(18,A)}function ve(){B=this.value,t(19,B)}const ke=()=>t(0,_=!_),rr=()=>n("263690"),$t=()=>i("153827");return r.$$.update=()=>{r.$$.dirty[0]&1073741824&&t(3,f=a?"":"active"),r.$$.dirty[0]&1073741825&&t(23,s=_&&!a?"moreinfo":"")},[_,o,l,f,m,p,y,w,T,D,$,S,k,O,C,I,N,L,A,B,H,q,V,s,n,i,d,v,Y,W,a,G,re,E,F,z,ue,se,fe,de,me,Pe,pe,ne,ce,_e,ae,ie,ve,ke,rr,$t]}class kb extends De{constructor(e){super(),Se(this,e,yb,gb,ye,{},null,[-1,-1])}}function $b(r){let e,t,s,n,i,o,l,a,f,d,m,p;const v=r[4].default,_=As(v,r,r[3],null);return{c(){e=h("div"),t=h("label"),s=X(r[0]),n=g(),i=h("div"),_&&_.c(),o=g(),l=h("div"),a=h("button"),f=X(r[2]),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",r[1]),u(i,"class","col-sm-5 col-md-6 col-9"),u(a,"class","w-100 btn btn-outline-primary"),u(l,"class","col-sm-3 col-md-3 col-auto"),u(e,"class","mb-4 row justify-content-center")},m(b,y){P(b,e,y),c(e,t),c(t,s),c(e,n),c(e,i),_&&_.m(i,null),c(e,o),c(e,l),c(l,a),c(a,f),d=!0,m||(p=U(a,"click",r[5]),m=!0)},p(b,[y]){(!d||y&1)&&le(s,b[0]),(!d||y&2)&&u(t,"for",b[1]),_&&_.p&&(!d||y&8)&&Ls(_,v,b,b[3],d?Is(v,b[3],y,null):Ys(b[3]),null),(!d||y&4)&&le(f,b[2])},i(b){d||(j(_,b),d=!0)},o(b){R(_,b),d=!1},d(b){b&&M(e),_&&_.d(b),m=!1,p()}}}function Sb(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(f){Ts.call(this,r,f)}return r.$$set=f=>{"label"in f&&t(0,i=f.label),"id"in f&&t(1,o=f.id),"button"in f&&t(2,l=f.button),"$$scope"in f&&t(3,n=f.$$scope)},[i,o,l,n,s,a]}class Db extends De{constructor(e){super(),Se(this,e,Sb,$b,ye,{label:0,id:1,button:2})}}function Tb(r){let e,t,s,n,i,o,l,a;return{c(){e=h("div"),t=h("div"),s=h("b"),n=X(r[0]),i=X(":"),o=g(),l=h("div"),a=X(r[1]),u(t,"class","col-sm-4 col-md-4"),u(l,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(f,d){P(f,e,d),c(e,t),c(t,s),c(s,n),c(s,i),c(e,o),c(e,l),c(l,a)},p(f,[d]){d&1&&le(n,f[0]),d&2&&le(a,f[1])},i:x,o:x,d(f){f&&M(e)}}}function Ob(r,e,t){let{key:s}=e,{value:n}=e;return r.$$set=i=>{"key"in i&&t(0,s=i.key),"value"in i&&t(1,n=i.value)},[s,n]}class rt extends De{constructor(e){super(),Se(this,e,Ob,Tb,ye,{key:0,value:1})}}function Cb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Cannot Find Reservation",u(e,"class",t="form-control "+r[10]),u(e,"type","number"),u(e,"id","reserve"),u(e,"placeholder","e.g 300xxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[19]),U(e,"keyup",r[20])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&32&&er(e.value)!==l[5]&&J(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Mb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Cannot Find Student",u(e,"class",t="form-control "+r[11]),u(e,"type","text"),u(e,"id","stud-id"),u(e,"placeholder","e.g 2xxxxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[6]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[22]),U(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Pb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Cannot Find Book",u(e,"class",t="form-control "+r[12]),u(e,"type","text"),u(e,"id","book-barcode"),u(e,"placeholder","e.g 1000xxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[7]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[24]),U(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Ho(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S;return n=new rt({props:{key:"Borrow ID",value:r[4]}}),o=new rt({props:{key:"Name",value:r[8]}}),a=new rt({props:{key:"Book Title",value:r[9]+" ("+r[7]+")"}}),d=new rt({props:{key:"Staff Name",value:r[2]+" ("+r[15]+")"}}),p=new rt({props:{key:"Borrow Date",value:te(r[0]).format("MMMM DD, YYYY - hh:mm a")}}),_=new rt({props:{key:"Return Due",value:te(r[1]).format("MMMM DD, YYYY")+" ("+r[13]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",s=g(),Q(n.$$.fragment),i=g(),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),Q(_.$$.fragment),b=g(),y=h("div"),w=h("button"),w.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',u(t,"class","py-4 text-center"),u(w,"class","btn btn-success"),u(y,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(k,O){P(k,e,O),c(e,t),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),c(e,f),K(d,e,null),c(e,m),K(p,e,null),c(e,v),K(_,e,null),c(e,b),c(e,y),c(y,w),D=!0,$||(S=U(w,"click",r[18]),$=!0)},p(k,O){const C={};O[0]&16&&(C.value=k[4]),n.$set(C);const I={};O[0]&256&&(I.value=k[8]),o.$set(I);const N={};O[0]&640&&(N.value=k[9]+" ("+k[7]+")"),a.$set(N);const L={};O[0]&4&&(L.value=k[2]+" ("+k[15]+")"),d.$set(L);const A={};O[0]&1&&(A.value=te(k[0]).format("MMMM DD, YYYY - hh:mm a")),p.$set(A);const B={};O[0]&8194&&(B.value=te(k[1]).format("MMMM DD, YYYY")+" ("+k[13]+" days)"),_.$set(B)},i(k){D||(j(n.$$.fragment,k),j(o.$$.fragment,k),j(a.$$.fragment,k),j(d.$$.fragment,k),j(p.$$.fragment,k),j(_.$$.fragment,k),k&&Ee(()=>{D&&(T||(T=Tt(e,Ot,{duration:400,y:-60},!0)),T.run(1))}),D=!0)},o(k){R(n.$$.fragment,k),R(o.$$.fragment,k),R(a.$$.fragment,k),R(d.$$.fragment,k),R(p.$$.fragment,k),R(_.$$.fragment,k),k&&(T||(T=Tt(e,Ot,{duration:400,y:-60},!1)),T.run(0)),D=!1},d(k){k&&M(e),Z(n),Z(o),Z(a),Z(d),Z(p),Z(_),k&&T&&T.end(),$=!1,S()}}}function jb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me,Pe;t=new tt({props:{text:"Borrow Book"}}),o=new Db({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Cb]},$$scope:{ctx:r}}}),o.$on("click",r[21]),d=new $e({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Mb]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Pb]},$$scope:{ctx:r}}});let pe=r[3]&&Ho(r);return{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),a=h("hr"),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),_=h("div"),b=h("label"),b.textContent="Borrow Date:",y=g(),w=h("div"),T=h("input"),$=g(),S=h("div"),k=h("button"),k.textContent="Today",O=g(),C=h("div"),I=h("label"),I.textContent="Return Due:",N=g(),L=h("div"),A=h("input"),Y=g(),W=h("div"),H=h("button"),H.textContent=`~${Rn} Days`,q=g(),V=h("div"),G=h("button"),re=h("i"),E=X(" Borrow"),z=g(),ue=h("a"),ue.innerHTML='<i class="bi bi-x-circle"></i> Cancel',se=g(),pe&&pe.c(),u(a,"class","mb-4"),u(b,"class","col-sm-4 col-md-3 col-form-label"),u(b,"for","borrow-date"),u(T,"class","form-control"),u(T,"type","datetime-local"),u(T,"id","borrow-date"),u(T,"max",D=te(r[1]).format("YYYY-MM-DD HH:mm")),u(w,"class","col-sm-5 col-md-6 col-7"),u(k,"class","w-100 btn btn-outline-primary"),u(S,"class","col-sm-3 col-md-3 col-auto"),u(_,"class","mb-4 row justify-content-center"),u(I,"class","col-sm-4 col-md-3 col-form-label"),u(I,"for","return-date"),u(A,"class","form-control"),u(A,"type","date"),u(A,"id","return-date"),u(A,"min",B=te(r[0]).format("YYYY-MM-DD")),u(L,"class","col-sm-5 col-md-6 col-7"),u(H,"class","w-100 btn btn-outline-primary"),u(W,"class","col-sm-3 col-md-3 col-auto"),u(C,"class","mb-4 row justify-content-center"),u(re,"class","bi bi-receipt"),u(G,"class",F="btn btn-"+(r[3]?"secondary":"success")),u(ue,"href","./#/"),u(ue,"class","btn btn-danger"),u(V,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),u(n,"class","row justify-content-around"),u(e,"class","container")},m(ne,ce){P(ne,e,ce),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),c(i,a),c(i,f),K(d,i,null),c(i,m),K(p,i,null),c(i,v),c(i,_),c(_,b),c(_,y),c(_,w),c(w,T),J(T,r[0]),c(_,$),c(_,S),c(S,k),c(i,O),c(i,C),c(C,I),c(C,N),c(C,L),c(L,A),J(A,r[1]),c(C,Y),c(C,W),c(W,H),c(i,q),c(i,V),c(V,G),c(G,re),c(G,E),c(V,z),c(V,ue),c(n,se),pe&&pe.m(n,null),de=!0,me||(Pe=[U(T,"input",r[26]),U(k,"click",r[27]),U(A,"input",r[28]),U(H,"click",r[29]),U(G,"click",r[30])],me=!0)},p(ne,ce){const _e={};ce[0]&1064|ce[1]&8&&(_e.$$scope={dirty:ce,ctx:ne}),o.$set(_e);const ae={};ce[0]&2120|ce[1]&8&&(ae.$$scope={dirty:ce,ctx:ne}),d.$set(ae);const ie={};ce[0]&4232|ce[1]&8&&(ie.$$scope={dirty:ce,ctx:ne}),p.$set(ie),(!de||ce[0]&2&&D!==(D=te(ne[1]).format("YYYY-MM-DD HH:mm")))&&u(T,"max",D),ce[0]&1&&J(T,ne[0]),(!de||ce[0]&1&&B!==(B=te(ne[0]).format("YYYY-MM-DD")))&&u(A,"min",B),ce[0]&2&&J(A,ne[1]),(!de||ce[0]&8&&F!==(F="btn btn-"+(ne[3]?"secondary":"success")))&&u(G,"class",F),ne[3]?pe?(pe.p(ne,ce),ce[0]&8&&j(pe,1)):(pe=Ho(ne),pe.c(),j(pe,1),pe.m(n,null)):pe&&(Le(),R(pe,1,1,()=>{pe=null}),Ye())},i(ne){de||(j(t.$$.fragment,ne),j(o.$$.fragment,ne),j(d.$$.fragment,ne),j(p.$$.fragment,ne),j(pe),ne&&(fe||Ee(()=>{fe=Je(e,Ke,{duration:500}),fe.start()})),de=!0)},o(ne){R(t.$$.fragment,ne),R(o.$$.fragment,ne),R(d.$$.fragment,ne),R(p.$$.fragment,ne),R(pe),de=!1},d(ne){ne&&M(e),Z(t),Z(o),Z(d),Z(p),pe&&pe.d(),me=!1,ge(Pe)}}}const Rn=14;function Fo(){return"400"+Math.floor(Math.random()*9e3)}function Eb(r,e,t){let s,n;Rr(r,ns,E=>t(31,n=E));const i=te().format("YYYY-MM-DD HH:mm");let o=i,l=te(i).add(Rn,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let f,d=!1,m,p,v,_;const b=new URLSearchParams(n);p=b.get("reserve_id")||"",_=b.get("barcode")||"";let y,w,T,D,$;async function S(){d&&t(3,d=!1);const{data:E,error:F}=await ee.from("account_details").select("fname, lname").eq("user_id",v).single();F?(t(11,D="is-invalid"),console.error(F)):t(8,y=`${E.fname} ${E.lname}`);const{data:z,error:ue}=await ee.from("account_details").select("fname, lname").eq("user_id",a).single();ue?console.error(ue):t(2,f=`${z.fname} ${z.lname}`);const{data:se,error:fe}=await ee.from("library_holdings").select("books(title)").eq("barcode",_).single();fe||!se?(t(12,$="is-invalid"),console.error(fe)):t(9,w=se.books.title),(!fe||!F)&&(t(4,m=await C()),t(3,d=!0))}async function k(){const{data:E,error:F}=await ee.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",p).eq("active",!0).single();F||!E?(t(10,T="is-invalid"),console.error(F)):(t(6,v=E.stud_id),t(7,_=E.library_holdings.barcode),S())}async function O(){const{data:E,error:F}=await ee.from("library_holdings").select("holding_id").eq("barcode",_).single();F&&console.error(F);const z=te(o).format("YYYY-MM-DDTHH:MMZ"),ue=te(l).format("YYYY-MM-DDTHH:MMZ"),{error:se}=await ee.from("book_borrow").insert({borrow_id:m,stud_id:v,holding_id:E.holding_id,staff_id:a,borrow_date:z,due_date:ue});if(se){console.error(se);return}const{data:fe,error:de}=await ee.from("book_reservation").update({staff_id:a,release_date:z,active:!1}).eq("active",!0).eq("holding_id",E.holding_id).select();if(console.log("updated Rows:",fe),de){console.error(de);return}const{error:me}=await ee.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",E.holding_id);if(me){console.error(me);return}const{error:Pe}=await ee.from("reports").insert({report_type:"Borrow Book",report_details:`"${w}" borrowed`,holding_id:E.holding_id,staff_id:a,stud_id:v});Pe&&console.error(Pe),alert(`${y} successfully borrowed ${w}!`),t(3,d=!1),t(5,p=""),t(6,v=""),t(7,_="")}async function C(){let E=Fo();const{data:F,error:z}=await ee.from("book_borrow").select().eq("borrow_id",E);return console.log(F),F.length!=0&&(E=Fo(),console.log("exists")),console.log(E),E}function I(){p=er(this.value),t(5,p)}const N=()=>t(10,T=""),L=()=>{d||k()};function A(){v=this.value,t(6,v)}const B=()=>t(11,D="");function Y(){_=this.value,t(7,_)}const W=()=>t(12,$="");function H(){o=this.value,t(0,o)}const q=()=>t(0,o=i);function V(){l=this.value,t(1,l)}const G=()=>t(1,l=te(o).add(Rn,"days").format("YYYY-MM-DD")),re=()=>{S()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(13,s=te(l).diff(te(o).format("YYYY-MM-DD"),"days"))},[o,l,f,d,m,p,v,_,y,w,T,D,$,s,i,a,S,k,O,I,N,L,A,B,Y,W,H,q,V,G,re]}class Rb extends De{constructor(e){super(),Se(this,e,Eb,jb,ye,{},null,[-1,-1])}}function Ab(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Borrow ID not found.",u(e,"class",t="form-control "+r[4]),e.disabled=r[5],u(e,"type","text"),u(e,"id","book-id"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[3]),P(l,s,a),P(l,n,a),i||(o=[U(e,"keyup",r[21]),U(e,"input",r[22])],i=!0)},p(l,a){a[0]&16&&t!==(t="form-control "+l[4])&&u(e,"class",t),a[0]&32&&(e.disabled=l[5]),a[0]&8&&e.value!==l[3]&&J(e,l[3])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Ib(r){let e,t,s,n,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",s=h("option"),s.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",J(t,t.__value),s.__value="Good",J(s,s.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),u(e,"class","form-select"),u(e,"id","book-condition"),r[12]===void 0&&Ee(()=>r[23].call(e))},m(a,f){P(a,e,f),c(e,t),c(e,s),c(e,n),c(e,i),ks(e,r[12],!0),o||(l=U(e,"change",r[23]),o=!0)},p(a,f){f[0]&4096&&ks(e,a[12])},d(a){a&&M(e),o=!1,l()}}}function Lb(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"rows","3"),u(e,"id","book-note")},m(n,i){P(n,e,i),J(e,r[11]),t||(s=U(e,"input",r[24]),t=!0)},p(n,i){i[0]&2048&&J(e,n[11])},d(n){n&&M(e),t=!1,s()}}}function qo(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C;n=new rt({props:{key:"Borrow ID",value:r[3]}}),o=new rt({props:{key:"Return ID",value:r[6]}}),a=new rt({props:{key:"Name",value:r[10]+" ("+r[9]+")"}}),d=new rt({props:{key:"Book Title",value:r[7]+" ("+r[8]+")"}}),p=new rt({props:{key:"Condition",value:r[12]}});let I=r[11]&&Bo(r);b=new rt({props:{key:"Received by",value:"Francis James E. Salles ("+r[17]+")"}}),w=new rt({props:{key:"Return Due",value:te(r[1]).format("MMMM DD, YYYY")}}),D=new rt({props:{key:"Return Date",value:te(r[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(r[2]>0?`+${r[2]}`:r[2])+" days)"}});let N=r[2]<0&&Wo(r);function L(Y,W){return Y[2]>=0?Nb:Yb}let A=L(r),B=A(r);return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",s=g(),Q(n.$$.fragment),i=g(),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),I&&I.c(),_=g(),Q(b.$$.fragment),y=g(),Q(w.$$.fragment),T=g(),Q(D.$$.fragment),$=g(),N&&N.c(),S=g(),k=h("div"),B.c(),u(t,"class","py-4 text-center"),u(k,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(Y,W){P(Y,e,W),c(e,t),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),c(e,f),K(d,e,null),c(e,m),K(p,e,null),c(e,v),I&&I.m(e,null),c(e,_),K(b,e,null),c(e,y),K(w,e,null),c(e,T),K(D,e,null),c(e,$),N&&N.m(e,null),c(e,S),c(e,k),B.m(k,null),C=!0},p(Y,W){const H={};W[0]&8&&(H.value=Y[3]),n.$set(H);const q={};W[0]&64&&(q.value=Y[6]),o.$set(q);const V={};W[0]&1536&&(V.value=Y[10]+" ("+Y[9]+")"),a.$set(V);const G={};W[0]&384&&(G.value=Y[7]+" ("+Y[8]+")"),d.$set(G);const re={};W[0]&4096&&(re.value=Y[12]),p.$set(re),Y[11]?I?(I.p(Y,W),W[0]&2048&&j(I,1)):(I=Bo(Y),I.c(),j(I,1),I.m(e,_)):I&&(Le(),R(I,1,1,()=>{I=null}),Ye());const E={};W[0]&2&&(E.value=te(Y[1]).format("MMMM DD, YYYY")),w.$set(E);const F={};W[0]&5&&(F.value=te(Y[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(Y[2]>0?`+${Y[2]}`:Y[2])+" days)"),D.$set(F),Y[2]<0?N?N.p(Y,W):(N=Wo(Y),N.c(),N.m(e,S)):N&&(N.d(1),N=null),A===(A=L(Y))&&B?B.p(Y,W):(B.d(1),B=A(Y),B&&(B.c(),B.m(k,null)))},i(Y){C||(j(n.$$.fragment,Y),j(o.$$.fragment,Y),j(a.$$.fragment,Y),j(d.$$.fragment,Y),j(p.$$.fragment,Y),j(I),j(b.$$.fragment,Y),j(w.$$.fragment,Y),j(D.$$.fragment,Y),Y&&Ee(()=>{C&&(O||(O=Tt(e,Ot,{duration:400,y:-60},!0)),O.run(1))}),C=!0)},o(Y){R(n.$$.fragment,Y),R(o.$$.fragment,Y),R(a.$$.fragment,Y),R(d.$$.fragment,Y),R(p.$$.fragment,Y),R(I),R(b.$$.fragment,Y),R(w.$$.fragment,Y),R(D.$$.fragment,Y),Y&&(O||(O=Tt(e,Ot,{duration:400,y:-60},!1)),O.run(0)),C=!1},d(Y){Y&&M(e),Z(n),Z(o),Z(a),Z(d),Z(p),I&&I.d(),Z(b),Z(w),Z(D),N&&N.d(),B.d(),Y&&O&&O.end()}}}function Bo(r){let e,t;return e=new rt({props:{key:"Return Note",value:r[11]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&2048&&(i.value=s[11]),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Wo(r){let e,t,s,n,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",s=g(),n=h("div"),i=X(r[15]),o=X(" pesos"),u(t,"class","col-sm-4 col-md-4"),u(n,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n),c(n,i),c(n,o)},p(l,a){a[0]&32768&&le(i,l[15])},d(l){l&&M(e)}}}function Yb(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay and Return Book',u(e,"class","btn btn-danger"),u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#payModal")},m(t,s){P(t,e,s)},p:x,d(t){t&&M(e)}}}function Nb(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',u(e,"class","btn btn-success")},m(n,i){P(n,e,i),t||(s=U(e,"click",r[19]),t=!0)},p:x,d(n){n&&M(e),t=!1,s()}}}function Ub(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","ref")},m(n,i){P(n,e,i),J(e,r[13]),t||(s=U(e,"input",r[27]),t=!0)},p(n,i){i[0]&8192&&e.value!==n[13]&&J(e,n[13])},d(n){n&&M(e),t=!1,s()}}}function Hb(r){let e,t,s,n,i,o;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",s=h("option"),s.textContent="GCash",n=h("option"),n.textContent="Bank Transfer",t.__value="cash",J(t,t.__value),s.__value="GCash",J(s,s.__value),n.__value="bank",J(n,n.__value),u(e,"name","payment_method"),u(e,"class","form-select"),u(e,"id","payment_method"),r[14]===void 0&&Ee(()=>r[28].call(e))},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n),ks(e,r[14],!0),i||(o=U(e,"change",r[28]),i=!0)},p(l,a){a[0]&16384&&ks(e,l[14])},d(l){l&&M(e),i=!1,o()}}}function Fb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v;return d=new $e({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Ub]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[Hb]},$$scope:{ctx:r}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",s=g(),n=h("h1"),i=X("₱"),o=X(r[15]),l=g(),a=h("hr"),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),u(n,"class","text-center"),u(a,"class","my-4"),u(e,"class","container row")},m(_,b){P(_,e,b),c(e,t),c(e,s),c(e,n),c(n,i),c(n,o),c(e,l),c(e,a),c(e,f),K(d,e,null),c(e,m),K(p,e,null),v=!0},p(_,b){(!v||b[0]&32768)&&le(o,_[15]);const y={};b[0]&8192|b[1]&8&&(y.$$scope={dirty:b,ctx:_}),d.$set(y);const w={};b[0]&16384|b[1]&8&&(w.$$scope={dirty:b,ctx:_}),p.$set(w)},i(_){v||(j(d.$$.fragment,_),j(p.$$.fragment,_),v=!0)},o(_){R(d.$$.fragment,_),R(p.$$.fragment,_),v=!1},d(_){_&&M(e),Z(d),Z(p)}}}function qb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V;t=new tt({props:{text:"Return Book"}}),o=new $e({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Ab]},$$scope:{ctx:r}}}),a=new $e({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Ib]},$$scope:{ctx:r}}}),d=new $e({props:{label:"Note:",id:"book-note",$$slots:{default:[Lb]},$$scope:{ctx:r}}});let G=r[5]&&qo(r);return Y=new Vp({props:{title:"Process Payment",id:"payModal",pButton:"Return and Pay",$$slots:{default:[Fb]},$$scope:{ctx:r}}}),Y.$on("click",r[29]),{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),p=h("div"),v=h("label"),v.textContent="Return Time:",_=g(),b=h("div"),y=h("input"),w=g(),T=h("div"),D=h("button"),D.textContent="Now",$=g(),S=h("div"),k=h("button"),O=h("i"),C=X(" Preview"),N=g(),L=h("a"),L.innerHTML='<i class="bi bi-x-circle"></i> Cancel',A=g(),G&&G.c(),B=g(),Q(Y.$$.fragment),u(v,"class","col-sm-4 col-md-3 col-form-label"),u(v,"for","return-time"),u(y,"class","form-control"),u(y,"type","datetime-local"),u(y,"id","return-time"),u(b,"class","col-sm-5 col-md-6 col-7"),u(D,"class","w-100 btn btn-outline-primary"),u(T,"class","col-sm-3 col-md-3 col-auto"),u(p,"class","mb-4 row justify-content-center"),u(O,"class","bi bi-receipt"),u(k,"class",I="btn btn-"+(r[5]?"secondary":"success")),u(L,"href","./#/"),u(L,"class","btn btn-danger"),u(S,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-sm-4"),u(n,"class","row justify-content-around"),u(e,"class","container")},m(re,E){P(re,e,E),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,m),c(i,p),c(p,v),c(p,_),c(p,b),c(b,y),J(y,r[0]),c(p,w),c(p,T),c(T,D),c(i,$),c(i,S),c(S,k),c(k,O),c(k,C),c(S,N),c(S,L),c(n,A),G&&G.m(n,null),c(e,B),K(Y,e,null),H=!0,q||(V=[U(y,"input",r[25]),U(D,"click",r[26]),U(k,"click",r[18])],q=!0)},p(re,E){const F={};E[0]&56|E[1]&8&&(F.$$scope={dirty:E,ctx:re}),o.$set(F);const z={};E[0]&4096|E[1]&8&&(z.$$scope={dirty:E,ctx:re}),a.$set(z);const ue={};E[0]&2048|E[1]&8&&(ue.$$scope={dirty:E,ctx:re}),d.$set(ue),E[0]&1&&J(y,re[0]),(!H||E[0]&32&&I!==(I="btn btn-"+(re[5]?"secondary":"success")))&&u(k,"class",I),re[5]?G?(G.p(re,E),E[0]&32&&j(G,1)):(G=qo(re),G.c(),j(G,1),G.m(n,null)):G&&(Le(),R(G,1,1,()=>{G=null}),Ye());const se={};E[0]&57344|E[1]&8&&(se.$$scope={dirty:E,ctx:re}),Y.$set(se)},i(re){H||(j(t.$$.fragment,re),j(o.$$.fragment,re),j(a.$$.fragment,re),j(d.$$.fragment,re),j(G),j(Y.$$.fragment,re),re&&(W||Ee(()=>{W=Je(e,Ke,{duration:500}),W.start()})),H=!0)},o(re){R(t.$$.fragment,re),R(o.$$.fragment,re),R(a.$$.fragment,re),R(d.$$.fragment,re),R(G),R(Y.$$.fragment,re),H=!1},d(re){re&&M(e),Z(t),Z(o),Z(a),Z(d),G&&G.d(),Z(Y),q=!1,ge(V)}}}function Vo(){return"500"+Math.floor(Math.random()*9e3)}function Bb(r,e,t){let s,n,i;Rr(r,ns,E=>t(31,i=E));let o=te().format("YYYY-MM-DD HH:mm"),l=o,a="";const f=localStorage.getItem("user_id");let d,m="";d=new URLSearchParams(i).get("borrow_id")||"";let v=!1,_,b,y,w,T,D="",$;async function S(){if(v){t(5,v=!1);return}const{data:E,error:F}=await ee.from("book_borrow").select().eq("borrow_id",d).eq("active",!0).maybeSingle();if(!E){t(4,m="is-invalid");return}const{data:z,error:ue}=await ee.rpc("getborrowinfo",{borrowid:d});ue&&console.error(ue),console.table(z);let se=z[0];t(10,T=`${se.fname} ${se.lname}`),t(9,w=se.stud_id),t(7,b=se.title),t(8,y=se.barcode),t(1,a=se.due_date),t(6,_=await L()),t(5,v=!0)}async function k(){const{data:E,error:F}=await ee.from("book_return").insert({return_id:_,borrow_id:d,staff_id:f,note:D,return_date:te(l).format("YYYY-MM-DDTHH:MMZ"),condition:$}).select();if(F)return console.error(F),!1;const{data:z,error:ue}=await ee.from("book_borrow").update({active:!1}).eq("borrow_id",d).select();console.table(E);const{data:se,error:fe}=await ee.from("library_holdings").update({status:"Available",condition:$}).eq("barcode",y).select();if(fe||ue)return console.error(fe),console.error(ue),!1;const{error:de}=await ee.from("reports").insert({report_type:"Book Return",report_details:`"${b}" returned with ${s>0?`+${s}`:s} days on due`,payment_id:I,return_id:_,staff_id:f,stud_id:w});return de&&console.error(de),alert(`Successfully Returned ${b}(${y})`),t(5,v=!1),t(3,d=""),I=null,!0}let O="",C,I=null;async function N(){if(O.trim()==""){alert("Please enter Reference Number");return}if(!await k())return;const{data:E,error:F}=await ee.from("payments").insert({return_id:_,ref_num:O,amount:n,method:C}).select("payment_id").single();I=E.payment_id,F&&(console.error(F),alert("Payment Failed"))}async function L(){let E=Vo();const{data:F,error:z}=await ee.from("book_return").select().eq("return_id",E);return console.log(F),F.length!=0&&(E=Vo(),console.log("exists")),console.log(E),E}const A=()=>t(4,m="");function B(){d=this.value,t(3,d)}function Y(){$=ki(this),t(12,$)}function W(){D=this.value,t(11,D)}function H(){l=this.value,t(0,l)}const q=()=>t(0,l=o);function V(){O=this.value,t(13,O)}function G(){C=ki(this),t(14,C)}const re=()=>{N()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(2,s=te(l).diff(te(a),"days")*-1),r.$$.dirty[0]&4&&t(15,n=s*-50)},[l,a,s,d,m,v,_,b,y,w,T,D,$,O,C,n,o,f,S,k,N,A,B,Y,W,H,q,V,G,re]}class Wb extends De{constructor(e){super(),Se(this,e,Bb,qb,ye,{},null,[-1,-1])}}function Vb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Author Name is Required",u(e,"class",t="form-control "+r[7]),u(e,"type","text"),u(e,"id","author-name"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[4]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[11]),U(e,"keyup",r[12])],i=!0)},p(l,a){a&128&&t!==(t="form-control "+l[7])&&u(e,"class",t),a&16&&e.value!==l[4]&&J(e,l[4])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function zb(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[8]),u(e,"id","author-bio"),u(e,"rows","4")},m(i,o){P(i,e,o),J(e,r[5]),s||(n=[U(e,"input",r[13]),U(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&J(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function Gb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Author Link is Required",u(e,"type","text"),u(e,"id","author-link"),u(e,"class",t="form-control "+r[9]),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[6]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[15]),U(e,"keyup",r[16])],i=!0)},p(l,a){a&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Jb(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","author-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[18](e),t||(s=U(e,"change",r[17]),t=!0)},p:x,d(n){n&&M(e),r[18](null),t=!1,s()}}}function Kb(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W;return t=new tt({props:{text:"Add Author"}}),o=new $e({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Vb]},$$scope:{ctx:r}}}),a=new $e({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[zb]},$$scope:{ctx:r}}}),d=new $e({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Gb]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Jb]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),_=h("div"),b=h("label"),b.textContent="Preview:",y=g(),w=h("div"),T=h("img"),$=g(),S=h("button"),S.textContent="Remove",O=g(),C=h("div"),I=h("button"),I.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',N=g(),L=h("a"),L.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(T.src,D=r[3])||u(T,"src",D),u(T,"alt","Preview"),u(T,"id","cover-preview"),u(T,"height","150"),u(S,"class","btn btn-sm btn-danger"),u(w,"class","col-sm-8 col-md-9"),u(w,"id","preview-div"),u(_,"class",k="my-3 row "+r[2]),u(I,"class","btn btn-success"),u(L,"href","./#/"),u(C,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(H,q){P(H,e,q),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,m),K(p,i,null),c(i,v),c(i,_),c(_,b),c(_,y),c(_,w),c(w,T),c(w,$),c(w,S),c(i,O),c(i,C),c(C,I),c(C,N),c(C,L),B=!0,Y||(W=[U(S,"click",r[19]),U(I,"click",r[10])],Y=!0)},p(H,[q]){const V={};q&1048720&&(V.$$scope={dirty:q,ctx:H}),o.$set(V);const G={};q&1048864&&(G.$$scope={dirty:q,ctx:H}),a.$set(G);const re={};q&1049152&&(re.$$scope={dirty:q,ctx:H}),d.$set(re);const E={};q&1048579&&(E.$$scope={dirty:q,ctx:H}),p.$set(E),(!B||q&8&&!Ne(T.src,D=H[3]))&&u(T,"src",D),(!B||q&4&&k!==(k="my-3 row "+H[2]))&&u(_,"class",k)},i(H){B||(j(t.$$.fragment,H),j(o.$$.fragment,H),j(a.$$.fragment,H),j(d.$$.fragment,H),j(p.$$.fragment,H),H&&(A||Ee(()=>{A=Je(e,Ke,{duration:500}),A.start()})),B=!0)},o(H){R(t.$$.fragment,H),R(o.$$.fragment,H),R(a.$$.fragment,H),R(d.$$.fragment,H),R(p.$$.fragment,H),B=!1},d(H){H&&M(e),Z(t),Z(o),Z(a),Z(d),Z(p),Y=!1,ge(W)}}}function Zb(r,e,t){let s,n,i="d-none",o,l,a="",f,d,m,p;async function v(){if(t(7,d=l?"":"is-invalid"),t(9,p=f?"":"is-invalid"),console.log(d,m,p),d||m||p)return;const{data:O,error:C}=await ee.from("author").insert({name:l,bio:a,link:f}).select("author_id").single();if(C){console.error(C);return}if(s&&s[0]){const{data:N,error:L}=await ee.storage.from("author").upload(`${O.author_id}.jpg`,s[0]);L&&console.error(L)}alert("Successfully Added!"),t(4,l=""),t(5,a=""),t(6,f=""),t(1,n.value="",n),t(0,s="");const{error:I}=await ee.from("reports").insert({report_type:"Add Author",report_details:`Added ${l}`,staff_id:localStorage.getItem("user_id")});I&&console.error(I)}function _(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const w=()=>t(8,m="");function T(){f=this.value,t(6,f)}const D=()=>t(9,p="");function $(){s=this.files,t(0,s)}function S(O){ft[O?"unshift":"push"](()=>{n=O,t(1,n)})}const k=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const O=URL.createObjectURL(s[0]);t(3,o=O)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k]}class Qb extends De{constructor(e){super(),Se(this,e,Zb,Kb,ye,{})}}function Xb(r){let e,t,s,n;return{c(){e=h("input"),u(e,"class",t="form-control "+r[7]),u(e,"type","text"),u(e,"id","publisher-name")},m(i,o){P(i,e,o),J(e,r[4]),s||(n=[U(e,"input",r[11]),U(e,"keyup",r[12])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function xb(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[8]),u(e,"id","publisher-description"),u(e,"rows","4")},m(i,o){P(i,e,o),J(e,r[5]),s||(n=[U(e,"input",r[13]),U(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&J(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function eg(r){let e,t,s,n;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","publisher-link"),u(e,"class",t="form-control "+r[9])},m(i,o){P(i,e,o),J(e,r[6]),s||(n=[U(e,"input",r[15]),U(e,"keyup",r[16])],s=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&u(e,"class",t),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&M(e),s=!1,ge(n)}}}function tg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","publisher-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[18](e),t||(s=U(e,"change",r[17]),t=!0)},p:x,d(n){n&&M(e),r[18](null),t=!1,s()}}}function rg(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W;return t=new tt({props:{text:"Add Publisher"}}),o=new $e({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Xb]},$$scope:{ctx:r}}}),a=new $e({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[xb]},$$scope:{ctx:r}}}),d=new $e({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[eg]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[tg]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),_=h("div"),b=h("label"),b.textContent="Preview:",y=g(),w=h("div"),T=h("img"),$=g(),S=h("button"),S.textContent="Remove",O=g(),C=h("div"),I=h("button"),I.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',N=g(),L=h("a"),L.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(T.src,D=r[3])||u(T,"src",D),u(T,"alt","Preview"),u(T,"id","cover-preview"),u(T,"height","150"),u(S,"class","btn btn-sm btn-danger"),u(w,"class","col-sm-8 col-md-9"),u(w,"id","preview-div"),u(_,"class",k="my-3 row "+r[2]),u(I,"class","btn btn-success"),u(L,"href","./#/"),u(C,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(H,q){P(H,e,q),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,m),K(p,i,null),c(i,v),c(i,_),c(_,b),c(_,y),c(_,w),c(w,T),c(w,$),c(w,S),c(i,O),c(i,C),c(C,I),c(C,N),c(C,L),B=!0,Y||(W=[U(S,"click",r[19]),U(I,"click",r[10])],Y=!0)},p(H,[q]){const V={};q&1048720&&(V.$$scope={dirty:q,ctx:H}),o.$set(V);const G={};q&1048864&&(G.$$scope={dirty:q,ctx:H}),a.$set(G);const re={};q&1049152&&(re.$$scope={dirty:q,ctx:H}),d.$set(re);const E={};q&1048579&&(E.$$scope={dirty:q,ctx:H}),p.$set(E),(!B||q&8&&!Ne(T.src,D=H[3]))&&u(T,"src",D),(!B||q&4&&k!==(k="my-3 row "+H[2]))&&u(_,"class",k)},i(H){B||(j(t.$$.fragment,H),j(o.$$.fragment,H),j(a.$$.fragment,H),j(d.$$.fragment,H),j(p.$$.fragment,H),H&&(A||Ee(()=>{A=Je(e,Ke,{duration:500}),A.start()})),B=!0)},o(H){R(t.$$.fragment,H),R(o.$$.fragment,H),R(a.$$.fragment,H),R(d.$$.fragment,H),R(p.$$.fragment,H),B=!1},d(H){H&&M(e),Z(t),Z(o),Z(a),Z(d),Z(p),Y=!1,ge(W)}}}function sg(r,e,t){let s,n,i="d-none",o,l,a,f,d,m,p;async function v(){if(t(7,d=l?"":"is-invalid"),t(9,p=f?"":"is-invalid"),console.log(d,m,p),d||m||p)return;const{data:O,error:C}=await ee.from("publisher").insert({name:l,description:a,link:f}).select("publisher_id").single();if(C&&console.error(C),s&&s[0]){const{data:I,error:N}=await ee.storage.from("publisher").upload(`${O.publisher_id}.jpg`,s[0]);N&&console.error(N)}alert("Successfully Added"),t(4,l=""),t(5,a=""),t(6,f=""),t(1,n.value="",n),t(0,s="")}function _(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const w=()=>t(8,m="");function T(){f=this.value,t(6,f)}const D=()=>t(9,p="");function $(){s=this.files,t(0,s)}function S(O){ft[O?"unshift":"push"](()=>{n=O,t(1,n)})}const k=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const O=URL.createObjectURL(s[0]);t(3,o=O)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k]}class ng extends De{constructor(e){super(),Se(this,e,sg,rg,ye,{})}}function zo(r,e,t){const s=r.slice();return s[12]=e[t][0],s[13]=e[t][1],s}function Go(r){let e,t,s,n,i=r[6].bookscount+"",o,l,a,f,d,m,p=r[6].holdingscount+"",v,_,b,y,w,T,D=r[6].lowest+"",$,S,k,O,C,I,N=r[6].highest+"",L;return{c(){e=h("div"),t=h("div"),t.textContent="# of Books",s=g(),n=h("h1"),o=X(i),l=g(),a=h("div"),f=h("div"),f.textContent="# of Library Holdings",d=g(),m=h("h1"),v=X(p),_=g(),b=h("div"),y=h("div"),y.textContent="Lowest Book Copies",w=g(),T=h("h1"),$=X(D),S=g(),k=h("div"),O=h("div"),O.textContent="Highest Borrowing Activity",C=g(),I=h("h1"),L=X(N)},m(A,B){P(A,e,B),c(e,t),c(e,s),c(e,n),c(n,o),P(A,l,B),P(A,a,B),c(a,f),c(a,d),c(a,m),c(m,v),P(A,_,B),P(A,b,B),c(b,y),c(b,w),c(b,T),c(T,$),P(A,S,B),P(A,k,B),c(k,O),c(k,C),c(k,I),c(I,L)},p(A,B){B&64&&i!==(i=A[6].bookscount+"")&&le(o,i),B&64&&p!==(p=A[6].holdingscount+"")&&le(v,p),B&64&&D!==(D=A[6].lowest+"")&&le($,D),B&64&&N!==(N=A[6].highest+"")&&le(L,N)},d(A){A&&(M(e),M(l),M(a),M(_),M(b),M(S),M(k))}}}function Jo(r){let e,t,s,n;return{c(){e=h("b"),e.textContent="Search Query:",t=g(),s=h("span"),n=X(r[3])},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),c(s,n)},p(i,o){o&8&&le(n,i[3])},d(i){i&&(M(e),M(t),M(s))}}}function Ko(r){let e,t=Te(Object.entries(r[0])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Zo(zo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ze()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Te(Object.entries(n[0]));let o;for(o=0;o<t.length;o+=1){const l=zo(n,t,o);s[o]?s[o].p(l,i):(s[o]=Zo(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function Zo(r){let e,t,s=r[13].isbn+"",n,i,o,l=r[13].title+"",a,f,d,m=r[13].available+"",p,v,_,b=r[13].reserved+"",y,w,T,D=r[13].borrowed+"",$,S,k,O=r[13].total+"",C,I;return{c(){e=h("tr"),t=h("td"),n=X(s),i=g(),o=h("td"),a=X(l),f=g(),d=h("td"),p=X(m),v=g(),_=h("td"),y=X(b),w=g(),T=h("td"),$=X(D),S=g(),k=h("td"),C=X(O),I=g(),u(t,"class","d-md-table-cell  svelte-1cmatm3"),u(o,"class","svelte-1cmatm3"),u(d,"class","svelte-1cmatm3"),u(_,"class","svelte-1cmatm3"),u(T,"class","svelte-1cmatm3"),u(k,"class","fw-bold svelte-1cmatm3")},m(N,L){P(N,e,L),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,p),c(e,v),c(e,_),c(_,y),c(e,w),c(e,T),c(T,$),c(e,S),c(e,k),c(k,C),c(e,I)},p(N,L){L&1&&s!==(s=N[13].isbn+"")&&le(n,s),L&1&&l!==(l=N[13].title+"")&&le(a,l),L&1&&m!==(m=N[13].available+"")&&le(p,m),L&1&&b!==(b=N[13].reserved+"")&&le(y,b),L&1&&D!==(D=N[13].borrowed+"")&&le($,D),L&1&&O!==(O=N[13].total+"")&&le(C,O)},d(N){N&&M(e)}}}function ig(r){let e,t,s,n,i,o,l,a,f,d,m,p,v=r[5].toUpperCase()+"",_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F,z,ue,se,fe,de,me,Pe,pe;t=new tt({props:{text:"Books Report",print:!0}});let ne=r[6]&&Go(r),ce=r[3]&&Jo(r),_e=r[0]&&Ko(r);return{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),ne&&ne.c(),i=g(),o=h("div"),l=h("b"),l.textContent="Sorted by:",a=g(),f=h("span"),d=X(r[2]),m=g(),p=h("i"),_=X(v),b=g(),ce&&ce.c(),y=g(),w=h("div"),T=h("div"),T.textContent="Sort by:",D=g(),$=h("div"),S=h("select"),k=h("option"),k.textContent="Title",O=h("option"),O.textContent="Total",C=h("option"),C.textContent="Available",I=h("option"),I.textContent="Reserved",N=h("option"),N.textContent="Borrowed",L=g(),A=h("div"),B=h("select"),Y=h("option"),Y.textContent="Ascending",W=h("option"),W.textContent="Descending",H=g(),q=h("form"),V=h("input"),G=g(),re=h("button"),re.innerHTML='<i class="bi bi-search"></i>',E=g(),F=h("div"),z=h("table"),ue=h("thead"),ue.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-md-table-cell svelte-1cmatm3">ISBN</th> <th class="py-3 col-5 svelte-1cmatm3">Book Title</th> <th class="py-3 col-1 text-bg-success svelte-1cmatm3">Available</th> <th class="py-3 col-1 text-bg-secondary svelte-1cmatm3">Reserved</th> <th class="py-3 col-1 text-bg-danger svelte-1cmatm3">Borrowed</th> <th class="py-3 col-1 text-bg-primary svelte-1cmatm3">Total</th></tr>',se=g(),fe=h("tbody"),_e&&_e.c(),u(n,"class","d-flex justify-content-center gap-5 my-3"),u(o,"class","d-none d-print-flex align-items-center gap-2 my-3"),k.__value="Title",J(k,k.__value),O.__value="Total",J(O,O.__value),C.__value="Available",J(C,C.__value),I.__value="Reserved",J(I,I.__value),N.__value="Borrowed",J(N,N.__value),u(S,"name","filter"),u(S,"class","form-select"),Y.__value="asc",J(Y,Y.__value),W.__value="desc",J(W,W.__value),u(B,"name","order"),u(B,"class","form-select"),u(V,"type","text"),u(V,"placeholder","Search title..."),u(V,"name","search"),u(V,"class","form-control"),u(re,"type","submit"),u(re,"class","btn btn-outline-success"),u(q,"class","d-flex ms-3"),u(w,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(z,"class","table table-bordered table-striped table-hover text-center align-middle"),u(F,"class",""),u(e,"class","container")},m(ae,ie){P(ae,e,ie),K(t,e,null),c(e,s),c(e,n),ne&&ne.m(n,null),c(e,i),c(e,o),c(o,l),c(o,a),c(o,f),c(f,d),c(f,m),c(f,p),c(p,_),c(o,b),ce&&ce.m(o,null),c(e,y),c(e,w),c(w,T),c(w,D),c(w,$),c($,S),c(S,k),c(S,O),c(S,C),c(S,I),c(S,N),r[8](S),c(w,L),c(w,A),c(A,B),c(B,Y),c(B,W),r[9](B),c(w,H),c(w,q),c(q,V),J(V,r[3]),c(q,G),c(q,re),c(e,E),c(e,F),c(F,z),c(z,ue),c(z,se),c(z,fe),_e&&_e.m(fe,null),me=!0,Pe||(pe=[U(S,"change",r[7]),U(B,"change",r[7]),U(V,"input",r[10]),U(re,"click",r[7]),U(q,"submit",gt(og))],Pe=!0)},p(ae,[ie]){ae[6]?ne?ne.p(ae,ie):(ne=Go(ae),ne.c(),ne.m(n,null)):ne&&(ne.d(1),ne=null),(!me||ie&4)&&le(d,ae[2]),(!me||ie&32)&&v!==(v=ae[5].toUpperCase()+"")&&le(_,v),ae[3]?ce?ce.p(ae,ie):(ce=Jo(ae),ce.c(),ce.m(o,null)):ce&&(ce.d(1),ce=null),ie&8&&V.value!==ae[3]&&J(V,ae[3]),ae[0]?_e?_e.p(ae,ie):(_e=Ko(ae),_e.c(),_e.m(fe,null)):_e&&(_e.d(1),_e=null)},i(ae){me||(j(t.$$.fragment,ae),ae&&(de||Ee(()=>{de=Je(e,Ke,{duration:500}),de.start()})),me=!0)},o(ae){R(t.$$.fragment,ae),me=!1},d(ae){ae&&M(e),Z(t),ne&&ne.d(),ce&&ce.d(),r[8](null),r[9](null),_e&&_e.d(),Pe=!1,ge(pe)}}}const og=()=>{};function lg(r,e,t){let s,n,i="total",o="",l,a="asc",f;async function d(){t(2,i=n.value),t(5,a=l.value);const{data:b,error:y}=await ee.rpc("getbooksreport",{sortby:i,search:o});if(y){console.error(y);return}a=="asc"&&b.sort((w,T)=>w[i.toLowerCase()]-T[i.toLowerCase()]),i=="Title"&&a=="asc"&&b.sort(function(w,T){let D=w.title.toUpperCase(),$=T.title.toUpperCase();return D<$?-1:D>$?1:0}),i=="Title"&&a=="desc"&&b.sort(function(w,T){let D=w.title.toUpperCase(),$=T.title.toUpperCase();return D>$?-1:D<$?1:0}),t(0,s=b)}vt(d),vt(m);async function m(){const{data:b,error:y}=await ee.rpc("booksummary").single();y&&console.error(y),t(6,f=b)}function p(b){ft[b?"unshift":"push"](()=>{n=b,t(1,n)})}function v(b){ft[b?"unshift":"push"](()=>{l=b,t(4,l)})}function _(){o=this.value,t(3,o)}return[s,n,i,o,l,a,f,d,p,v,_]}class ag extends De{constructor(e){super(),Se(this,e,lg,ig,ye,{})}}function Qo(r,e,t){const s=r.slice();return s[3]=e[t],s}function Xo(r){let e,t,s,n,i,o=r[1].total+"",l,a,f,d,m,p,v=r[1].count+"",_,b,y,w,T,D,$,S=r[1].average+"",k,O,C,I,N,L,A,B=r[1].highest+"",Y;return{c(){e=h("div"),t=h("div"),t.textContent="Overall Total Payment",s=g(),n=h("h1"),i=X("₱"),l=X(o),a=g(),f=h("div"),d=h("div"),d.textContent="Total Late Returns",m=g(),p=h("h1"),_=X(v),b=g(),y=h("div"),w=h("div"),w.textContent="Average Payment",T=g(),D=h("h1"),$=X("₱"),k=X(S),O=g(),C=h("div"),I=h("div"),I.textContent="Highest Payment",N=g(),L=h("h1"),A=X("₱"),Y=X(B)},m(W,H){P(W,e,H),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),P(W,a,H),P(W,f,H),c(f,d),c(f,m),c(f,p),c(p,_),P(W,b,H),P(W,y,H),c(y,w),c(y,T),c(y,D),c(D,$),c(D,k),P(W,O,H),P(W,C,H),c(C,I),c(C,N),c(C,L),c(L,A),c(L,Y)},p(W,H){H&2&&o!==(o=W[1].total+"")&&le(l,o),H&2&&v!==(v=W[1].count+"")&&le(_,v),H&2&&S!==(S=W[1].average+"")&&le(k,S),H&2&&B!==(B=W[1].highest+"")&&le(Y,B)},d(W){W&&(M(e),M(a),M(f),M(b),M(y),M(O),M(C))}}}function xo(r){let e,t=Te(r[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=el(Qo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ze()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Te(n[0]);let o;for(o=0;o<t.length;o+=1){const l=Qo(n,t,o);s[o]?s[o].p(l,i):(s[o]=el(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function el(r){let e,t,s=r[3].ref_num+"",n,i,o,l=r[3].fname+"",a,f,d=r[3].lname+"",m,p,v,_,b=r[3].amount+"",y,w,T,D=r[3].amount/50+"",$,S;return{c(){e=h("tr"),t=h("td"),n=X(s),i=g(),o=h("td"),a=X(l),f=g(),m=X(d),p=g(),v=h("td"),_=X("₱"),y=X(b),w=g(),T=h("td"),$=X(D),S=g()},m(k,O){P(k,e,O),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(o,f),c(o,m),c(e,p),c(e,v),c(v,_),c(v,y),c(e,w),c(e,T),c(T,$),c(e,S)},p(k,O){O&1&&s!==(s=k[3].ref_num+"")&&le(n,s),O&1&&l!==(l=k[3].fname+"")&&le(a,l),O&1&&d!==(d=k[3].lname+"")&&le(m,d),O&1&&b!==(b=k[3].amount+"")&&le(y,b),O&1&&D!==(D=k[3].amount/50+"")&&le($,D)},d(k){k&&M(e)}}}function ug(r){let e,t,s,n,i,o,l,a,f,d,m;t=new tt({props:{text:"Payments Report",print:!0}});let p=r[1]&&Xo(r),v=r[0]&&xo(r);return{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),p&&p.c(),i=g(),o=h("table"),l=h("thead"),l.innerHTML='<tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr>',a=g(),f=h("tbody"),v&&v.c(),u(n,"class","d-flex justify-content-center gap-5 my-3"),u(o,"class","table table-bordered table-striped text-center"),u(e,"class","container")},m(_,b){P(_,e,b),K(t,e,null),c(e,s),c(e,n),p&&p.m(n,null),c(e,i),c(e,o),c(o,l),c(o,a),c(o,f),v&&v.m(f,null),m=!0},p(_,[b]){_[1]?p?p.p(_,b):(p=Xo(_),p.c(),p.m(n,null)):p&&(p.d(1),p=null),_[0]?v?v.p(_,b):(v=xo(_),v.c(),v.m(f,null)):v&&(v.d(1),v=null)},i(_){m||(j(t.$$.fragment,_),_&&(d||Ee(()=>{d=Je(e,Ke,{duration:500}),d.start()})),m=!0)},o(_){R(t.$$.fragment,_),m=!1},d(_){_&&M(e),Z(t),p&&p.d(),v&&v.d()}}}function cg(r,e,t){let s,n;async function i(){const{data:o,error:l}=await ee.rpc("getpayments");l&&console.error(l),t(0,s=o);const{data:a,error:f}=await ee.rpc("paymentreport").single();f&&console.error(f),t(1,n=a)}return vt(i),[s,n]}class fg extends De{constructor(e){super(),Se(this,e,cg,ug,ye,{})}}function tl(r,e,t){const s=r.slice();return s[5]=e[t],s}function rl(r){let e,t=Te(r[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=nl(tl(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ze()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Te(n[0]);let o;for(o=0;o<t.length;o+=1){const l=tl(n,t,o);s[o]?s[o].p(l,i):(s[o]=nl(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function sl(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-trash-fill"></i>',u(e,"class","btn btn-sm btn-outline-danger")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function nl(r){let e,t,s=(r[5].bb_stud_id||r[5].br_stud_id)+"",n,i,o,l=r[5].fname+"",a,f,d=r[5].lname+"",m,p,v,_,b=r[5].title+"",y,w,T,D,$=r[5].status+"",S,k,O,C=te(r[5].date_reserved||r[5].due_date).format("MM-DD-YYYY")+"",I,N,L,A,B,Y,W,H,q,V,G,re,E=r[5].status=="Reserved"&&sl();return{c(){e=h("tr"),t=h("td"),n=X(s),i=g(),o=h("td"),a=X(l),f=g(),m=X(d),p=g(),v=h("td"),_=h("a"),y=X(b),T=g(),D=h("td"),S=X($),k=g(),O=h("td"),I=X(C),N=g(),L=h("td"),A=h("a"),B=h("button"),B.innerHTML='<i class="bi bi-envelope-fill"></i>',W=g(),H=h("a"),q=h("button"),q.innerHTML='<i class="bi bi-telephone-fill"></i>',G=g(),E&&E.c(),re=g(),u(_,"href",w="./#/book/"+r[5].book_id),u(B,"class","btn btn-sm btn-outline-primary"),u(A,"href",Y="mailto:"+r[5].email),u(q,"class","btn btn-sm btn-outline-success"),u(H,"href",V="tel:"+r[5].contact),u(L,"class","d-print-none")},m(F,z){P(F,e,z),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(o,f),c(o,m),c(e,p),c(e,v),c(v,_),c(_,y),c(e,T),c(e,D),c(D,S),c(e,k),c(e,O),c(O,I),c(e,N),c(e,L),c(L,A),c(A,B),c(L,W),c(L,H),c(H,q),c(L,G),E&&E.m(L,null),c(e,re)},p(F,z){z&1&&s!==(s=(F[5].bb_stud_id||F[5].br_stud_id)+"")&&le(n,s),z&1&&l!==(l=F[5].fname+"")&&le(a,l),z&1&&d!==(d=F[5].lname+"")&&le(m,d),z&1&&b!==(b=F[5].title+"")&&le(y,b),z&1&&w!==(w="./#/book/"+F[5].book_id)&&u(_,"href",w),z&1&&$!==($=F[5].status+"")&&le(S,$),z&1&&C!==(C=te(F[5].date_reserved||F[5].due_date).format("MM-DD-YYYY")+"")&&le(I,C),z&1&&Y!==(Y="mailto:"+F[5].email)&&u(A,"href",Y),z&1&&V!==(V="tel:"+F[5].contact)&&u(H,"href",V),F[5].status=="Reserved"?E||(E=sl(),E.c(),E.m(L,null)):E&&(E.d(1),E=null)},d(F){F&&M(e),E&&E.d()}}}function dg(r){let e,t,s,n,i,o,l,a,f;t=new tt({props:{text:"Student Inventory Report",print:!0}});let d=r[0]&&rl(r);return{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("table"),i=h("thead"),i.innerHTML='<tr class="align-middle"><th>Student ID</th> <th>Student Name</th> <th>Book</th> <th>Status</th> <th>Due Date</th> <th class="d-print-none">Actions</th></tr>',o=g(),l=h("tbody"),d&&d.c(),u(n,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(m,p){P(m,e,p),K(t,e,null),c(e,s),c(e,n),c(n,i),c(n,o),c(n,l),d&&d.m(l,null),f=!0},p(m,[p]){m[0]?d?d.p(m,p):(d=rl(m),d.c(),d.m(l,null)):d&&(d.d(1),d=null)},i(m){f||(j(t.$$.fragment,m),m&&(a||Ee(()=>{a=Je(e,Ke,{duration:500}),a.start()})),f=!0)},o(m){R(t.$$.fragment,m),f=!1},d(m){m&&M(e),Z(t),d&&d.d()}}}function hg(r,e,t){let s;async function n(){const{data:i,error:o}=await ee.rpc("getstudentreport");o&&console.error(o),t(0,s=i),console.log(i)}return n(),[s]}class mg extends De{constructor(e){super(),Se(this,e,hg,dg,ye,{})}}function il(r,e,t){const s=r.slice();return s[11]=e[t][0],s[12]=e[t][1],s}function ol(r,e,t){const s=r.slice();return s[11]=e[t][0],s[12]=e[t][1],s}function ll(r){let e,t,s,n;return{c(){e=h("b"),e.textContent="Search Query:",t=g(),s=h("span"),n=X(r[4])},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),c(s,n)},p(i,o){o&16&&le(n,i[4])},d(i){i&&(M(e),M(t),M(s))}}}function al(r){let e,t,s,n,i=Te(Object.entries(r[1])),o=[];for(let l=0;l<i.length;l+=1)o[l]=ul(ol(r,i,l));return{c(){e=h("select"),t=h("option"),t.textContent="All";for(let l=0;l<o.length;l+=1)o[l].c();t.__value="all",J(t,t.__value),u(e,"name","filter"),u(e,"class","form-select")},m(l,a){P(l,e,a),c(e,t);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);r[6](e),s||(n=U(e,"change",r[7]),s=!0)},p(l,a){if(a&2){i=Te(Object.entries(l[1]));let f;for(f=0;f<i.length;f+=1){const d=ol(l,i,f);o[f]?o[f].p(d,a):(o[f]=ul(d),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&M(e),Xe(o,l),r[6](null),s=!1,n()}}}function ul(r){let e,t=r[12].report_type+"",s,n;return{c(){e=h("option"),s=X(t),e.__value=n=r[12].report_type,J(e,e.__value)},m(i,o){P(i,e,o),c(e,s)},p(i,o){o&2&&t!==(t=i[12].report_type+"")&&le(s,t),o&2&&n!==(n=i[12].report_type)&&(e.__value=n,J(e,e.__value))},d(i){i&&M(e)}}}function cl(r){let e,t=Te(Object.entries(r[0])),s=[];for(let n=0;n<t.length;n+=1)s[n]=fl(il(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ze()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Te(Object.entries(n[0]));let o;for(o=0;o<t.length;o+=1){const l=il(n,t,o);s[o]?s[o].p(l,i):(s[o]=fl(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),Xe(s,n)}}}function fl(r){let e,t,s=te(r[12].report_time).format("MM-DD-YYYY hh:mm a")+"",n,i,o,l=(r[12].staffname||"--")+"",a,f,d,m=(r[12].studentname||"--")+"",p,v,_,b=r[12].report_type+"",y,w,T,D,$=r[12].report_details+"",S,k;return{c(){e=h("tr"),t=h("td"),n=X(s),i=g(),o=h("td"),a=X(l),f=g(),d=h("td"),p=X(m),v=g(),_=h("td"),y=X(b),w=g(),T=h("td"),D=h("small"),S=X($),k=g(),u(T,"class","fs-6")},m(O,C){P(O,e,C),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,p),c(e,v),c(e,_),c(_,y),c(e,w),c(e,T),c(T,D),c(D,S),c(e,k)},p(O,C){C&1&&s!==(s=te(O[12].report_time).format("MM-DD-YYYY hh:mm a")+"")&&le(n,s),C&1&&l!==(l=(O[12].staffname||"--")+"")&&le(a,l),C&1&&m!==(m=(O[12].studentname||"--")+"")&&le(p,m),C&1&&b!==(b=O[12].report_type+"")&&le(y,b),C&1&&$!==($=O[12].report_details+"")&&le(S,$)},d(O){O&&M(e)}}}function pg(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B;t=new tt({props:{text:"System Log",print:!0}});let Y=r[4]&&ll(r),W=r[1]&&al(r),H=r[0]&&cl(r);return{c(){e=h("main"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("b"),i.textContent="Filter:",o=g(),l=h("span"),a=X(r[3]),f=g(),Y&&Y.c(),d=g(),m=h("div"),p=h("div"),p.textContent="Transaction:",v=g(),_=h("div"),W&&W.c(),b=g(),y=h("form"),w=h("input"),T=g(),D=h("button"),D.innerHTML='<i class="bi bi-search"></i>',$=g(),S=h("div"),k=h("table"),O=h("thead"),O.innerHTML="<tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr>",C=g(),I=h("tbody"),H&&H.c(),u(n,"class","d-none d-print-flex align-items-center gap-2 my-3"),u(w,"type","text"),u(w,"placeholder","Search Details..."),u(w,"name","search"),u(w,"class","form-control"),u(D,"type","submit"),u(D,"class","btn btn-outline-success"),u(y,"class","d-flex ms-3"),u(m,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(k,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(q,V){P(q,e,V),K(t,e,null),c(e,s),c(e,n),c(n,i),c(n,o),c(n,l),c(l,a),c(n,f),Y&&Y.m(n,null),c(e,d),c(e,m),c(m,p),c(m,v),c(m,_),W&&W.m(_,null),c(m,b),c(m,y),c(y,w),J(w,r[4]),c(y,T),c(y,D),c(e,$),c(e,S),c(S,k),c(k,O),c(k,C),c(k,I),H&&H.m(I,null),L=!0,A||(B=[U(w,"input",r[8]),U(y,"submit",gt(r[9]))],A=!0)},p(q,[V]){(!L||V&8)&&le(a,q[3]),q[4]?Y?Y.p(q,V):(Y=ll(q),Y.c(),Y.m(n,null)):Y&&(Y.d(1),Y=null),q[1]?W?W.p(q,V):(W=al(q),W.c(),W.m(_,null)):W&&(W.d(1),W=null),V&16&&w.value!==q[4]&&J(w,q[4]),q[0]?H?H.p(q,V):(H=cl(q),H.c(),H.m(I,null)):H&&(H.d(1),H=null)},i(q){L||(j(t.$$.fragment,q),q&&(N||Ee(()=>{N=Je(e,Ke,{duration:500}),N.start()})),L=!0)},o(q){R(t.$$.fragment,q),L=!1},d(q){q&&M(e),Z(t),Y&&Y.d(),W&&W.d(),H&&H.d(),A=!1,ge(B)}}}function _g(r,e,t){let s,n,i={value:"all"},o,l="";async function a(){t(3,o=i.value);const{data:_,error:b}=await ee.rpc("getreports",{filter:o,search:l});b&&console.error(b),t(0,s=_)}async function f(){const{data:_,error:b}=await ee.rpc("getreporttypes");b&&console.error(b),t(1,n=_)}vt(a),vt(f);function d(_){ft[_?"unshift":"push"](()=>{i=_,t(2,i),t(1,n)})}const m=()=>a();function p(){l=this.value,t(4,l)}return[s,n,i,o,l,a,d,m,p,()=>a()]}class bg extends De{constructor(e){super(),Se(this,e,_g,pg,ye,{})}}function gg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[1]),t||(s=U(e,"input",r[14]),t=!0)},p(n,i){i[0]&2&&e.value!==n[1]&&J(e,n[1])},d(n){n&&M(e),t=!1,s()}}}function vg(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off")},m(n,i){P(n,e,i),J(e,r[2]),t||(s=U(e,"input",r[15]),t=!0)},p(n,i){i[0]&4&&J(e,n[2])},d(n){n&&M(e),t=!1,s()}}}function wg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=U(e,"change",r[16]),t=!0)},p:x,d(n){n&&M(e),r[17](null),t=!1,s()}}}function dl(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=g(),n=h("div"),i=h("img"),l=g(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[12])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(m,p){P(m,e,p),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[U(i,"error",r[18]),U(a,"click",r[19])],f=!0)},p(m,p){p[0]&4096&&!Ne(i.src,o=m[12])&&u(i,"src",o)},d(m){m&&M(e),f=!1,ge(d)}}}function yg(r){let e,t,s,n,i,o,l,a;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=g(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+r[8]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){P(f,e,d),J(e,r[3]),P(f,s,d),P(f,n,d),P(f,i,d),P(f,o,d),l||(a=[U(e,"input",r[20]),U(e,"keyup",r[21])],l=!0)},p(f,d){d[0]&256&&t!==(t="form-control "+f[8])&&u(e,"class",t),d[0]&8&&e.value!==f[3]&&J(e,f[3])},d(f){f&&(M(e),M(s),M(n),M(i),M(o)),l=!1,ge(a)}}}function kg(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+r[9]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[4]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[22]),U(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a[0]&16&&e.value!==l[4]&&J(e,l[4])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function $g(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+r[10]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[24]),U(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Sg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[6]),t||(s=U(e,"input",r[26]),t=!0)},p(n,i){i[0]&64&&er(e.value)!==n[6]&&J(e,n[6])},d(n){n&&M(e),t=!1,s()}}}function Dg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),J(e,r[7]),t||(s=U(e,"input",r[27]),t=!0)},p(n,i){i[0]&128&&e.value!==n[7]&&J(e,n[7])},d(n){n&&M(e),t=!1,s()}}}function Tg(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k,O,C,I,N,L,A,B,Y,W,H;t=new tt({props:{text:"Update Book"}}),l=new $e({props:{label:"Book Title:",id:"book-name",$$slots:{default:[gg]},$$scope:{ctx:r}}}),f=new $e({props:{label:"Book Description:",id:"book-description",$$slots:{default:[vg]},$$scope:{ctx:r}}}),m=new $e({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[wg]},$$scope:{ctx:r}}});let q=r[12]&&dl(r);return b=new $e({props:{label:"Category:",id:"book-category",$$slots:{default:[yg]},$$scope:{ctx:r}}}),w=new $e({props:{label:"Author: ",id:"book-author",$$slots:{default:[kg]},$$scope:{ctx:r}}}),D=new $e({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[$g]},$$scope:{ctx:r}}}),S=new $e({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Sg]},$$scope:{ctx:r}}}),O=new $e({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Dg]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=g(),Q(f.$$.fragment),d=g(),Q(m.$$.fragment),p=g(),q&&q.c(),v=g(),_=h("div"),Q(b.$$.fragment),y=g(),Q(w.$$.fragment),T=g(),Q(D.$$.fragment),$=g(),Q(S.$$.fragment),k=g(),Q(O.$$.fragment),C=g(),I=h("div"),N=h("button"),N.innerHTML='<i class="bi bi-arrow-clockwise"></i> Update Book',L=g(),A=h("button"),A.innerHTML='<i class="bi bi-x-circle"></i> Cancel',u(o,"class","col-sm-12 col-lg-6"),u(_,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(N,"class","btn btn-success"),u(N,"type","submit"),u(A,"class","btn btn-danger"),u(A,"type","button"),u(I,"class","my-3"),u(e,"class","my-1 container")},m(V,G){P(V,e,G),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),K(l,o,null),c(o,a),K(f,o,null),c(o,d),K(m,o,null),c(o,p),q&&q.m(o,null),c(i,v),c(i,_),K(b,_,null),c(_,y),K(w,_,null),c(_,T),K(D,_,null),c(_,$),K(S,_,null),c(_,k),K(O,_,null),c(n,C),c(n,I),c(I,N),c(I,L),c(I,A),Y=!0,W||(H=[U(A,"click",r[28]),U(n,"submit",gt(r[13]))],W=!0)},p(V,G){const re={};G[0]&2|G[1]&64&&(re.$$scope={dirty:G,ctx:V}),l.$set(re);const E={};G[0]&4|G[1]&64&&(E.$$scope={dirty:G,ctx:V}),f.$set(E);const F={};G[0]&2049|G[1]&64&&(F.$$scope={dirty:G,ctx:V}),m.$set(F),V[12]?q?q.p(V,G):(q=dl(V),q.c(),q.m(o,null)):q&&(q.d(1),q=null);const z={};G[0]&264|G[1]&64&&(z.$$scope={dirty:G,ctx:V}),b.$set(z);const ue={};G[0]&528|G[1]&64&&(ue.$$scope={dirty:G,ctx:V}),w.$set(ue);const se={};G[0]&1056|G[1]&64&&(se.$$scope={dirty:G,ctx:V}),D.$set(se);const fe={};G[0]&64|G[1]&64&&(fe.$$scope={dirty:G,ctx:V}),S.$set(fe);const de={};G[0]&128|G[1]&64&&(de.$$scope={dirty:G,ctx:V}),O.$set(de)},i(V){Y||(j(t.$$.fragment,V),j(l.$$.fragment,V),j(f.$$.fragment,V),j(m.$$.fragment,V),j(b.$$.fragment,V),j(w.$$.fragment,V),j(D.$$.fragment,V),j(S.$$.fragment,V),j(O.$$.fragment,V),V&&(B||Ee(()=>{B=Je(e,Ke,{duration:500}),B.start()})),Y=!0)},o(V){R(t.$$.fragment,V),R(l.$$.fragment,V),R(f.$$.fragment,V),R(m.$$.fragment,V),R(b.$$.fragment,V),R(w.$$.fragment,V),R(D.$$.fragment,V),R(S.$$.fragment,V),R(O.$$.fragment,V),Y=!1},d(V){V&&M(e),Z(t),Z(l),Z(f),Z(m),q&&q.d(),Z(b),Z(w),Z(D),Z(S),Z(O),W=!1,ge(H)}}}function Og(r,e,t){let s;Rr(r,ns,z=>t(31,s=z));const i=new URLSearchParams(s).get("id");i?$():Ft("#/invalid-link");let o,l,a,f,d,m,p,v,_,b,y,w,T,D=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/${i}.jpg`;async function $(){const{data:z,error:ue}=await ee.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i).single();if(ue){console.error(ue),Ft("#/invalid-link");return}const{data:se,error:fe}=await ee.from("books_category").select("category(name)").eq("book_id",i);console.log(se);let de=[];for(const me in se)de.push(se[me].category.name);t(3,a=de.join(", ")),t(1,o=z.title),t(2,l=z.description),t(4,f=z.author.name),t(5,d=z.publisher.name),t(6,m=z.shelf_number),t(7,p=z.isbn)}async function S(){if(!await k())return;const{error:z}=await ee.rpc("updatebook",{bookid:i,titlevalue:o,descriptionvalue:l,author_name:f,publisher_name:d,shelf_numbervalue:m,isbnvalue:p});if(w&&w[0]){const{data:de,error:me}=await ee.storage.from("books").upload(`${i}.jpg`,w[0],{upsert:!0});me&&console.error(me)}else if(D!=""){const{data:de,error:me}=await ee.storage.from("books").remove([`${i}.jpg`]);me&&console.error(me)}if(z){console.error(z),alert(z.details),alert(z.hint);return}alert("Succesfully Updated");const{error:ue}=await ee.from("books_category").delete().eq("book_id",i);ue&&console.error(ue);let se=!0;for(const de in v){console.log(de);const{data:me,error:Pe}=await ee.from("books_category").insert({book_id:i,category_id:v[de]});Pe&&(console.error(Pe),se=!1)}se||alert("Had problem while pushing categories, Update book later");const{error:fe}=await ee.from("reports").insert({report_type:"Update Book",report_details:`Changed Details of ${o}`,book_id:i,staff_id:localStorage.getItem("user_id")});fe&&console.error(fe),Pr()}async function k(){const{data:z,error:ue}=await ee.from("author").select("author_id").eq("name",f).single(),{data:se,error:fe}=await ee.from("publisher").select("publisher_id").eq("name",d).single();let de=!0;if((ue||!z)&&(t(9,b="is-invalid"),de=!1),(fe||!se)&&(t(10,y="is-invalid"),de=!1),!await O()){if(v.length!=0)return;t(8,_="is-invalid"),de=!1}return de}async function O(){if(a=="")return!1;let z=!0,ue=[],se=a.split(",").map(fe=>fe.trim());console.log(se);for(const fe of se){console.log(fe);const{data:de,error:me}=await ee.from("category").select("category_id").eq("name",fe).single();me?(z=!1,console.error(me)):ue.push(de.category_id),console.log(z)}return console.log(se,ue),v=z?ue:[],console.log(z,v),z}function C(){o=this.value,t(1,o)}function I(){l=this.value,t(2,l)}function N(){w=this.files,t(0,w)}function L(z){ft[z?"unshift":"push"](()=>{T=z,t(11,T)})}const A=()=>t(12,D=""),B=()=>{t(11,T.value="",T),t(0,w=""),t(12,D="")};function Y(){a=this.value,t(3,a)}const W=()=>t(8,_="");function H(){f=this.value,t(4,f)}const q=()=>t(9,b="");function V(){d=this.value,t(5,d)}const G=()=>t(10,y="");function re(){m=er(this.value),t(6,m)}function E(){p=this.value,t(7,p)}const F=()=>Pr();return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(w&&w[0]){console.log(w);const z=URL.createObjectURL(w[0]);t(12,D=z)}else console.log(w)},[w,o,l,a,f,d,m,p,_,b,y,T,D,S,C,I,N,L,A,B,Y,W,H,q,V,G,re,E,F]}class Cg extends De{constructor(e){super(),Se(this,e,Og,Tg,ye,{},null,[-1,-1])}}function Mg(r){let e,t;return{c(){e=h("main"),e.innerHTML='<div id="cont" class="svelte-1j22uuw"><div id="left" class="svelte-1j22uuw"><table class="svelte-1j22uuw"><tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Student ID:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">First Name:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Last Name:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Email:</td> <td class="input svelte-1j22uuw">asd</td></tr></table></div> <div id="right" class="svelte-1j22uuw"><table class="svelte-1j22uuw"><tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Contact:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Address:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Year Level:</td> <td class="input svelte-1j22uuw">asd</td></tr> <tr class="svelte-1j22uuw"><td class="info svelte-1j22uuw">Course:</td> <td class="input svelte-1j22uuw">asd</td></tr></table></div></div> <div class="container1 svelte-1j22uuw"></div>',u(e,"class","container svelte-1j22uuw")},m(s,n){P(s,e,n)},p:x,i(s){s&&(t||Ee(()=>{t=Je(e,Ke,{duration:500}),t.start()}))},o:x,d(s){s&&M(e)}}}function Pg(r){return localStorage.getItem("accType"),[]}class jg extends De{constructor(e){super(),Se(this,e,Pg,Mg,ye,{})}}function Eg(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Author Name is Required",u(e,"class",t="form-control "+r[6]),u(e,"type","text"),u(e,"id","author-name"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[3]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[10]),U(e,"keyup",r[11])],i=!0)},p(l,a){a&64&&t!==(t="form-control "+l[6])&&u(e,"class",t),a&8&&e.value!==l[3]&&J(e,l[3])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Rg(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[7]),u(e,"id","author-bio"),u(e,"rows","4")},m(i,o){P(i,e,o),J(e,r[4]),s||(n=[U(e,"input",r[12]),U(e,"keyup",r[13])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&J(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function Ag(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=g(),n=h("div"),n.textContent="Author Link is Required",u(e,"type","text"),u(e,"id","author-link"),u(e,"class",t="form-control "+r[8]),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[U(e,"input",r[14]),U(e,"keyup",r[15])],i=!0)},p(l,a){a&256&&t!==(t="form-control "+l[8])&&u(e,"class",t),a&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Ig(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","author-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=U(e,"change",r[16]),t=!0)},p:x,d(n){n&&M(e),r[17](null),t=!1,s()}}}function hl(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=g(),n=h("div"),i=h("img"),l=g(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[2])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(m,p){P(m,e,p),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[U(i,"error",r[18]),U(a,"click",r[19])],f=!0)},p(m,p){p&4&&!Ne(i.src,o=m[2])&&u(i,"src",o)},d(m){m&&M(e),f=!1,ge(d)}}}function Lg(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k;t=new tt({props:{text:"Update Author"}}),o=new $e({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Eg]},$$scope:{ctx:r}}}),a=new $e({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Rg]},$$scope:{ctx:r}}}),d=new $e({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Ag]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Ig]},$$scope:{ctx:r}}});let O=r[2]&&hl(r);return{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),O&&O.c(),_=g(),b=h("div"),y=h("button"),y.innerHTML='<i class="bi bi-plus-circle"></i> Update Author',w=g(),T=h("a"),T.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(y,"class","btn btn-success"),u(T,"href","./#/"),u(b,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(C,I){P(C,e,I),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,m),K(p,i,null),c(i,v),O&&O.m(i,null),c(i,_),c(i,b),c(b,y),c(b,w),c(b,T),$=!0,S||(k=U(y,"click",r[9]),S=!0)},p(C,[I]){const N={};I&33554504&&(N.$$scope={dirty:I,ctx:C}),o.$set(N);const L={};I&33554576&&(L.$$scope={dirty:I,ctx:C}),a.$set(L);const A={};I&33554720&&(A.$$scope={dirty:I,ctx:C}),d.$set(A);const B={};I&33554435&&(B.$$scope={dirty:I,ctx:C}),p.$set(B),C[2]?O?O.p(C,I):(O=hl(C),O.c(),O.m(i,_)):O&&(O.d(1),O=null)},i(C){$||(j(t.$$.fragment,C),j(o.$$.fragment,C),j(a.$$.fragment,C),j(d.$$.fragment,C),j(p.$$.fragment,C),C&&(D||Ee(()=>{D=Je(e,Ke,{duration:500}),D.start()})),$=!0)},o(C){R(t.$$.fragment,C),R(o.$$.fragment,C),R(a.$$.fragment,C),R(d.$$.fragment,C),R(p.$$.fragment,C),$=!1},d(C){C&&M(e),Z(t),Z(o),Z(a),Z(d),Z(p),O&&O.d(),S=!1,k()}}}function Yg(r,e,t){let s;Rr(r,ns,L=>t(21,s=L));const i=new URLSearchParams(s).get("id");i?b():Ft("#/invalid-link");let o,l,a=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/${i}.jpg`,f,d="",m,p,v,_;async function b(){const{data:L,error:A}=await ee.from("author").select("name, bio, link").eq("author_id",i).single();if(A){console.error(A),Ft("#/invalid-link");return}t(3,f=L.name),t(4,d=L.bio),t(5,m=L.link)}async function y(){if(t(6,p=f?"":"is-invalid"),t(8,_=m?"":"is-invalid"),console.log(p,v,_),p||_)return;const{data:L,error:A}=await ee.from("author").update({name:f,bio:d,link:m}).eq("author_id",i).select("author_id").single();if(A){console.error(A);return}if(o&&o[0]){const{data:Y,error:W}=await ee.storage.from("author").upload(`${i}.jpg`,o[0],{upsert:!0});W&&console.error(W)}else if(a!=""){const{data:Y,error:W}=await ee.storage.from("author").remove([`${i}.jpg`]);W&&console.error(W)}const{error:B}=await ee.from("reports").insert({report_type:"Update Author",report_details:`Updated ${f}`,staff_id:localStorage.getItem("user_id")});B&&console.error(B),alert("Successfully Updated!"),Pr()}function w(){f=this.value,t(3,f)}const T=()=>t(6,p="");function D(){d=this.value,t(4,d)}const $=()=>t(7,v="");function S(){m=this.value,t(5,m)}const k=()=>t(8,_="");function O(){o=this.files,t(0,o)}function C(L){ft[L?"unshift":"push"](()=>{l=L,t(1,l)})}const I=()=>t(2,a=""),N=()=>{t(1,l.value="",l),t(0,o=""),t(2,a="")};return r.$$.update=()=>{if(r.$$.dirty&1&&o&&o[0]){console.log(o);const L=URL.createObjectURL(o[0]);t(2,a=L)}},[o,l,a,f,d,m,p,v,_,y,w,T,D,$,S,k,O,C,I,N]}class Ng extends De{constructor(e){super(),Se(this,e,Yg,Lg,ye,{})}}function Ug(r){let e,t,s,n;return{c(){e=h("input"),u(e,"class",t="form-control "+r[6]),u(e,"type","text"),u(e,"id","publisher-name")},m(i,o){P(i,e,o),J(e,r[3]),s||(n=[U(e,"input",r[10]),U(e,"keyup",r[11])],s=!0)},p(i,o){o&64&&t!==(t="form-control "+i[6])&&u(e,"class",t),o&8&&e.value!==i[3]&&J(e,i[3])},d(i){i&&M(e),s=!1,ge(n)}}}function Hg(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[7]),u(e,"id","publisher-description"),u(e,"rows","4")},m(i,o){P(i,e,o),J(e,r[4]),s||(n=[U(e,"input",r[12]),U(e,"keyup",r[13])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&J(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function Fg(r){let e,t,s,n;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","publisher-link"),u(e,"class",t="form-control "+r[8])},m(i,o){P(i,e,o),J(e,r[5]),s||(n=[U(e,"input",r[14]),U(e,"keyup",r[15])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&e.value!==i[5]&&J(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function qg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","publisher-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=U(e,"change",r[16]),t=!0)},p:x,d(n){n&&M(e),r[17](null),t=!1,s()}}}function ml(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=g(),n=h("div"),i=h("img"),l=g(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[2])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(m,p){P(m,e,p),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[U(i,"error",r[18]),U(a,"click",r[19])],f=!0)},p(m,p){p&4&&!Ne(i.src,o=m[2])&&u(i,"src",o)},d(m){m&&M(e),f=!1,ge(d)}}}function Bg(r){let e,t,s,n,i,o,l,a,f,d,m,p,v,_,b,y,w,T,D,$,S,k;t=new tt({props:{text:"Add Publisher"}}),o=new $e({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Ug]},$$scope:{ctx:r}}}),a=new $e({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[Hg]},$$scope:{ctx:r}}}),d=new $e({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Fg]},$$scope:{ctx:r}}}),p=new $e({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[qg]},$$scope:{ctx:r}}});let O=r[2]&&ml(r);return{c(){e=h("section"),Q(t.$$.fragment),s=g(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=g(),Q(a.$$.fragment),f=g(),Q(d.$$.fragment),m=g(),Q(p.$$.fragment),v=g(),O&&O.c(),_=g(),b=h("div"),y=h("button"),y.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',w=g(),T=h("a"),T.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(y,"class","btn btn-success"),u(T,"href","./#/"),u(b,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(C,I){P(C,e,I),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,m),K(p,i,null),c(i,v),O&&O.m(i,null),c(i,_),c(i,b),c(b,y),c(b,w),c(b,T),$=!0,S||(k=U(y,"click",r[9]),S=!0)},p(C,[I]){const N={};I&33554504&&(N.$$scope={dirty:I,ctx:C}),o.$set(N);const L={};I&33554576&&(L.$$scope={dirty:I,ctx:C}),a.$set(L);const A={};I&33554720&&(A.$$scope={dirty:I,ctx:C}),d.$set(A);const B={};I&33554435&&(B.$$scope={dirty:I,ctx:C}),p.$set(B),C[2]?O?O.p(C,I):(O=ml(C),O.c(),O.m(i,_)):O&&(O.d(1),O=null)},i(C){$||(j(t.$$.fragment,C),j(o.$$.fragment,C),j(a.$$.fragment,C),j(d.$$.fragment,C),j(p.$$.fragment,C),C&&(D||Ee(()=>{D=Je(e,Ke,{duration:500}),D.start()})),$=!0)},o(C){R(t.$$.fragment,C),R(o.$$.fragment,C),R(a.$$.fragment,C),R(d.$$.fragment,C),R(p.$$.fragment,C),$=!1},d(C){C&&M(e),Z(t),Z(o),Z(a),Z(d),Z(p),O&&O.d(),S=!1,k()}}}function Wg(r,e,t){let s;Rr(r,ns,L=>t(21,s=L));const i=new URLSearchParams(s).get("id");i?b():Ft("#/invalid-link");let o,l,a=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/${i}.jpg`,f,d,m,p,v,_;async function b(){const{data:L,error:A}=await ee.from("publisher").select("name, description, link").eq("publisher_id",i).single();if(A){console.error(A),Ft("#/invalid-link");return}t(3,f=L.name),t(4,d=L.description),t(5,m=L.link)}async function y(){if(t(6,p=f?"":"is-invalid"),t(8,_=m?"":"is-invalid"),console.log(p,_),p||_)return;const{data:L,error:A}=await ee.from("publisher").update({name:f,description:d,link:m}).eq("publisher_id",i).select("publisher_id").single();if(A){console.error(A);return}if(o&&o[0]){const{data:Y,error:W}=await ee.storage.from("publisher").upload(`${i}.jpg`,o[0],{upsert:!0});W&&console.error(W)}else if(a!=""){const{data:Y,error:W}=await ee.storage.from("publisher").remove([`${i}.jpg`]);W&&console.error(W)}const{error:B}=await ee.from("reports").insert({report_type:"Update Publisher",report_details:`Updated ${f}`,staff_id:localStorage.getItem("user_id")});B&&console.error(B),alert("Successfully Updated!"),Pr()}function w(){f=this.value,t(3,f)}const T=()=>t(6,p="");function D(){d=this.value,t(4,d)}const $=()=>t(7,v="");function S(){m=this.value,t(5,m)}const k=()=>t(8,_="");function O(){o=this.files,t(0,o)}function C(L){ft[L?"unshift":"push"](()=>{l=L,t(1,l)})}const I=()=>t(2,a=""),N=()=>{t(1,l.value="",l),t(0,o=""),t(2,a="")};return r.$$.update=()=>{if(r.$$.dirty&1&&o&&o[0]){console.log(o);const L=URL.createObjectURL(o[0]);t(2,a=L)}},[o,l,a,f,d,m,p,v,_,y,w,T,D,$,S,k,O,C,I,N]}class Vg extends De{constructor(e){super(),Se(this,e,Wg,Bg,ye,{})}}function zg(r){let e,t;return e=new Un({props:{routes:{"*":kb}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Gg(r){let e,t,s,n;return e=new Bl({}),s=new Un({props:{routes:{"/":ob,"/book/:bookID":Ya,"/author/:authorID":Na,"/publisher/:publisherID":Ua,"/search":Mr,"/search/author":Mr,"/search/publisher":Mr,"/add-book":E_,"/add-author":Qb,"/add-publisher":ng,"/borrow":Rb,"/return":Wb,"/book-report":ag,"/payment-report":fg,"/student-report":mg,"/reports":bg,"/update-book":Cg,"/update-author":Ng,"/update-publisher":Vg,"*":mi}}}),{c(){Q(e.$$.fragment),t=g(),Q(s.$$.fragment)},m(i,o){K(e,i,o),P(i,t,o),K(s,i,o),n=!0},i(i){n||(j(e.$$.fragment,i),j(s.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),R(s.$$.fragment,i),n=!1},d(i){i&&M(t),Z(e,i),Z(s,i)}}}function Jg(r){let e,t,s,n;return e=new Bl({}),s=new Un({props:{routes:{"/":Hp,"/book/:bookID":Ya,"/author/:authorID":Na,"/publisher/:publisherID":Ua,"/search":Mr,"/search/author":Mr,"/search/publisher":Mr,"/profile":jg,"*":mi}}}),{c(){Q(e.$$.fragment),t=g(),Q(s.$$.fragment)},m(i,o){K(e,i,o),P(i,t,o),K(s,i,o),n=!0},i(i){n||(j(e.$$.fragment,i),j(s.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),R(s.$$.fragment,i),n=!1},d(i){i&&M(t),Z(e,i),Z(s,i)}}}function Kg(r){let e,t,s,n;const i=[Jg,Gg,zg],o=[];function l(a,f){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Ze()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,[f]){let d=e;e=l(a),e!==d&&(Le(),R(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t||(t=o[e]=i[e](a),t.c()),j(t,1),t.m(s.parentNode,s))},i(a){n||(j(t),n=!0)},o(a){R(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Zg(r,e,t){let s;return xt.subscribe(n=>{t(0,s=n)}),[s]}class Qg extends De{constructor(e){super(),Se(this,e,Zg,Kg,ye,{})}}new Qg({target:document.getElementById("app")})});export default Xg();
