var Ga=Object.defineProperty;var Ja=(r,e,t)=>e in r?Ga(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ka=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Rs=(r,e,t)=>(Ja(r,typeof e!="symbol"?e+"":e,t),t);var yg=Ka(($g,Xr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function U(){}const ln=r=>r;function Or(r,e){for(const t in e)r[t]=e[t];return r}function Za(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function $o(r){return r()}function Zn(){return Object.create(null)}function De(r){r.forEach($o)}function jr(r){return typeof r=="function"}function pe(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let Fr;function Xe(r,e){return r===e?!0:(Fr||(Fr=document.createElement("a")),Fr.href=e,r===Fr.href)}function Qa(r){return Object.keys(r).length===0}function So(r,...e){if(r==null){for(const s of e)s(void 0);return U}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function cn(r,e,t){r.$$.on_destroy.push(So(e,t))}function ds(r,e,t,s){if(r){const n=Oo(r,e,t,s);return r[0](n)}}function Oo(r,e,t,s){return r[1]&&s?Or(t.ctx.slice(),r[1](s(e))):t.ctx}function fs(r,e,t,s){if(r[2]&&s){const n=r[2](s(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function hs(r,e,t,s,n,i){if(n){const o=Oo(e,t,s,i);r.p(o,n)}}function ms(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function Qn(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}const To=typeof window<"u";let Do=To?()=>window.performance.now():()=>Date.now(),un=To?r=>requestAnimationFrame(r):U;const Xt=new Set;function Mo(r){Xt.forEach(e=>{e.c(r)||(Xt.delete(e),e.f())}),Xt.size!==0&&un(Mo)}function Co(r){let e;return Xt.size===0&&un(Mo),{promise:new Promise(t=>{Xt.add(e={c:r,f:t})}),abort(){Xt.delete(e)}}}function d(r,e){r.appendChild(e)}function Po(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function Xa(r){const e=h("style");return e.textContent="/* empty */",el(Po(r),e),e.sheet}function el(r,e){return d(r.head||r,e),e.sheet}function E(r,e,t){r.insertBefore(e,t||null)}function P(r){r.parentNode&&r.parentNode.removeChild(r)}function Ve(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function h(r){return document.createElement(r)}function se(r){return document.createTextNode(r)}function y(){return se(" ")}function We(){return se("")}function G(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function er(r){return function(e){return e.preventDefault(),r.call(this,e)}}function f(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function _s(r){return r===""?null:+r}function tl(r){return Array.from(r.childNodes)}function le(r,e){e=""+e,r.data!==e&&(r.data=e)}function J(r,e){r.value=e??""}function pt(r,e,t,s){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function Xn(r,e,t){for(let s=0;s<r.options.length;s+=1){const n=r.options[s];if(n.__value===e){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function rl(r){const e=r.querySelector(":checked");return e&&e.__value}function Eo(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}function es(r,e){return new r(e)}const ts=new Map;let rs=0;function sl(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function nl(r,e){const t={stylesheet:Xa(e),rules:{}};return ts.set(r,t),t}function Bs(r,e,t,s,n,i,o,l=0){const a=16.666/s;let c=`{
`;for(let w=0;w<=1;w+=a){const b=e+(t-e)*i(w);c+=w*100+`%{${o(b,1-b)}}
`}const u=c+`100% {${o(t,1-t)}}
}`,m=`__svelte_${sl(u)}_${l}`,_=Po(r),{stylesheet:g,rules:p}=ts.get(_)||nl(_,r);p[m]||(p[m]=!0,g.insertRule(`@keyframes ${m} ${u}`,g.cssRules.length));const v=r.style.animation||"";return r.style.animation=`${v?`${v}, `:""}${m} ${s}ms linear ${n}ms 1 both`,rs+=1,m}function qs(r,e){const t=(r.style.animation||"").split(", "),s=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=t.length-s.length;n&&(r.style.animation=s.join(", "),rs-=n,rs||il())}function il(){un(()=>{rs||(ts.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&P(e)}),ts.clear())})}let Tr;function gt(r){Tr=r}function Ar(){if(!Tr)throw new Error("Function called outside component initialization");return Tr}function Dr(r){Ar().$$.on_mount.push(r)}function ol(r){Ar().$$.after_update.push(r)}function al(r){Ar().$$.on_destroy.push(r)}function ll(){const r=Ar();return(e,t,{cancelable:s=!1}={})=>{const n=r.$$.callbacks[e];if(n){const i=Eo(e,t,{cancelable:s});return n.slice().forEach(o=>{o.call(r,i)}),!i.defaultPrevented}return!0}}function ss(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const Jt=[],ar=[];let tr=[];const ei=[],Ro=Promise.resolve();let Vs=!1;function jo(){Vs||(Vs=!0,Ro.then(fn))}function dn(){return jo(),Ro}function Ee(r){tr.push(r)}const js=new Set;let Wt=0;function fn(){if(Wt!==0)return;const r=Tr;do{try{for(;Wt<Jt.length;){const e=Jt[Wt];Wt++,gt(e),cl(e.$$)}}catch(e){throw Jt.length=0,Wt=0,e}for(gt(null),Jt.length=0,Wt=0;ar.length;)ar.pop()();for(let e=0;e<tr.length;e+=1){const t=tr[e];js.has(t)||(js.add(t),t())}tr.length=0}while(Jt.length);for(;ei.length;)ei.pop()();Vs=!1,js.clear(),gt(r)}function cl(r){if(r.fragment!==null){r.update(),De(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Ee)}}function ul(r){const e=[],t=[];tr.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),tr=e}let pr;function Ao(){return pr||(pr=Promise.resolve(),pr.then(()=>{pr=null})),pr}function wr(r,e,t){r.dispatchEvent(Eo(`${e?"intro":"outro"}${t}`))}const Vr=new Set;let bt;function Oe(){bt={r:0,c:[],p:bt}}function Te(){bt.r||De(bt.c),bt=bt.p}function O(r,e){r&&r.i&&(Vr.delete(r),r.i(e))}function M(r,e,t,s){if(r&&r.o){if(Vr.has(r))return;Vr.add(r),bt.c.push(()=>{Vr.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}const Io={duration:0};function Ue(r,e,t){const s={direction:"in"};let n=e(r,t,s),i=!1,o,l,a=0;function c(){o&&qs(r,o)}function u(){const{delay:_=0,duration:g=300,easing:p=ln,tick:v=U,css:w}=n||Io;w&&(o=Bs(r,0,1,g,_,p,w,a++)),v(0,1);const b=Do()+_,k=b+g;l&&l.abort(),i=!0,Ee(()=>wr(r,!0,"start")),l=Co($=>{if(i){if($>=k)return v(1,0),wr(r,!0,"end"),c(),i=!1;if($>=b){const C=p(($-b)/g);v(C,1-C)}}return i})}let m=!1;return{start(){m||(m=!0,qs(r),jr(n)?(n=n(s),Ao().then(u)):u())},invalidate(){m=!1},end(){i&&(c(),i=!1)}}}function lr(r,e,t,s){let i=e(r,t,{direction:"both"}),o=s?0:1,l=null,a=null,c=null,u;function m(){c&&qs(r,c)}function _(p,v){const w=p.b-o;return v*=Math.abs(w),{a:o,b:p.b,d:w,duration:v,start:p.start,end:p.start+v,group:p.group}}function g(p){const{delay:v=0,duration:w=300,easing:b=ln,tick:k=U,css:$}=i||Io,C={start:Do()+v,b:p};p||(C.group=bt,bt.r+=1),"inert"in r&&(p?u!==void 0&&(r.inert=u):(u=r.inert,r.inert=!0)),l||a?a=C:($&&(m(),c=Bs(r,o,p,w,v,b,$)),p&&k(0,1),l=_(C,w),Ee(()=>wr(r,p,"start")),Co(S=>{if(a&&S>a.start&&(l=_(a,w),a=null,wr(r,l.b,"start"),$&&(m(),c=Bs(r,o,l.b,l.duration,0,b,i.css))),l){if(S>=l.end)k(o=l.b,1-o),wr(r,l.b,"end"),a||(l.b?m():--l.group.r||De(l.group.c)),l=null;else if(S>=l.start){const T=S-l.start;o=l.a+l.d*b(T/l.duration),k(o,1-o)}}return!!(l||a)}))}return{run(p){jr(i)?Ao().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){m(),l=a=null}}}function zr(r,e){const t=e.token={};function s(n,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((m,_)=>{_!==i&&m&&(Oe(),M(m,1,1,()=>{e.blocks[_]===m&&(e.blocks[_]=null)}),Te())}):e.block.d(1),c.c(),O(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&fn()}if(Za(r)){const n=Ar();if(r.then(i=>{gt(n),s(e.then,1,e.value,i),gt(null)},i=>{if(gt(n),s(e.catch,2,e.error,i),gt(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,r),!0;e.resolved=r}}function Gr(r,e,t){const s=e.slice(),{resolved:n}=r;r.current===r.then&&(s[r.value]=n),r.current===r.catch&&(s[r.error]=n),r.block.p(s,t)}function Se(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function ns(r,e){const t={},s={},n={$$scope:1};let i=r.length;for(;i--;){const o=r[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(t[a]=l[a],n[a]=1);r[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in t||(t[o]=void 0);return t}function is(r){return typeof r=="object"&&r!==null?r:{}}function N(r){r&&r.c()}function L(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),Ee(()=>{const i=r.$$.on_mount.map($o).filter(jr);r.$$.on_destroy?r.$$.on_destroy.push(...i):De(i),r.$$.on_mount=[]}),n.forEach(Ee)}function Y(r,e){const t=r.$$;t.fragment!==null&&(ul(t.after_update),De(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function dl(r,e){r.$$.dirty[0]===-1&&(Jt.push(r),jo(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ge(r,e,t,s,n,i,o=null,l=[-1]){const a=Tr;gt(r);const c=r.$$={fragment:null,ctx:[],props:i,update:U,not_equal:n,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(r,e.props||{},(m,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[m],c.ctx[m]=p)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](p),u&&dl(r,m)),_}):[],c.update(),u=!0,De(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const m=tl(e.target);c.fragment&&c.fragment.l(m),m.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&O(r.$$.fragment),L(r,e.target,e.anchor),fn()}gt(a)}class be{constructor(){Rs(this,"$$");Rs(this,"$$set")}$destroy(){Y(this,1),this.$destroy=U}$on(e,t){if(!jr(t))return U;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Qa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fl);const Bt=[];function Lo(r,e){return{subscribe:ps(r,e).subscribe}}function ps(r,e=U){let t;const s=new Set;function n(l){if(pe(r,l)&&(r=l,t)){const a=!Bt.length;for(const c of s)c[1](),Bt.push(c,r);if(a){for(let c=0;c<Bt.length;c+=2)Bt[c][0](Bt[c+1]);Bt.length=0}}}function i(l){n(l(r))}function o(l,a=U){const c=[l,a];return s.add(c),s.size===1&&(t=e(n,i)||U),l(r),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:o}}function Yo(r,e,t){const s=!Array.isArray(r),n=s?[r]:r;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Lo(t,(o,l)=>{let a=!1;const c=[];let u=0,m=U;const _=()=>{if(u)return;m();const p=e(s?c[0]:c,o,l);i?o(p):m=jr(p)?p:U},g=n.map((p,v)=>So(p,w=>{c[v]=w,u&=~(1<<v),a&&_()},()=>{u|=1<<v}));return a=!0,_(),function(){De(g),m(),a=!1}})}const Rt=ps(localStorage.getItem("accType")),Jr=ps(localStorage.getItem("user_id"));window.addEventListener("storage",function(r){let e;Jr.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Rt.set(""),Jr.set("")):(Jr.set(localStorage.getItem("user_id")),Rt.set(localStorage.getItem("accType"))))});function hl(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,s,n,i,o=[],l="",a=r.split("/");for(a[0]||a.shift();n=a.shift();)t=n[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function ml(r){let e,t,s;const n=[r[2]];var i=r[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Or(c,n[u]);return a!==void 0&&a&4&&(c=Or(c,ns(n,[is(l[2])]))),{props:c}}return i&&(e=es(i,o(r)),e.$on("routeEvent",r[7])),{c(){e&&N(e.$$.fragment),t=We()},m(l,a){e&&L(e,l,a),E(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=es(i,o(l,a)),e.$on("routeEvent",l[7]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(i){const c=a&4?ns(n,[is(l[2])]):{};e.$set(c)}},i(l){s||(e&&O(e.$$.fragment,l),s=!0)},o(l){e&&M(e.$$.fragment,l),s=!1},d(l){l&&P(t),e&&Y(e,l)}}}function _l(r){let e,t,s;const n=[{params:r[1]},r[2]];var i=r[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Or(c,n[u]);return a!==void 0&&a&6&&(c=Or(c,ns(n,[a&2&&{params:l[1]},a&4&&is(l[2])]))),{props:c}}return i&&(e=es(i,o(r)),e.$on("routeEvent",r[6])),{c(){e&&N(e.$$.fragment),t=We()},m(l,a){e&&L(e,l,a),E(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=es(i,o(l,a)),e.$on("routeEvent",l[6]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(i){const c=a&6?ns(n,[a&2&&{params:l[1]},a&4&&is(l[2])]):{};e.$set(c)}},i(l){s||(e&&O(e.$$.fragment,l),s=!0)},o(l){e&&M(e.$$.fragment,l),s=!1},d(l){l&&P(t),e&&Y(e,l)}}}function pl(r){let e,t,s,n;const i=[_l,ml],o=[];function l(a,c){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function ti(){const r=window.location.href.indexOf("#/");let e=r>-1?window.location.href.substr(r+1):"/";const t=e.indexOf("?");let s="";return t>-1&&(s=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:s}}const hn=Lo(null,function(e){e(ti());const t=()=>{e(ti())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),gl=Yo(hn,r=>r.location),No=Yo(hn,r=>r.querystring),ri=ps(void 0);async function bl(){await dn(),window.history.back()}async function vl(r){if(r.length<1||r.charAt(0)!="/"&&r.indexOf("#/")!==0)throw Error("Invalid parameter location");await dn();const e=(r.charAt(0)=="#"?"":"#")+r;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function yl(r){r?window.scrollTo(r.__svelte_spa_router_scrollX,r.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function wl(r,e,t){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(S,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:A}=hl(S);this.path=S,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=j,this._keys=A}match(S){if(n){if(typeof n=="string")if(S.startsWith(n))S=S.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const F=S.match(n);if(F&&F[0])S=S.substr(F[0].length)||"/";else return null}}const T=this._pattern.exec(S);if(T===null)return null;if(this._keys===!1)return T;const j={};let A=0;for(;A<this._keys.length;){try{j[this._keys[A]]=decodeURIComponent(T[A+1]||"")||null}catch{j[this._keys[A]]=null}A++}return j}async checkConditions(S){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](S))return!1;return!0}}const l=[];s instanceof Map?s.forEach((C,S)=>{l.push(new o(S,C))}):Object.keys(s).forEach(C=>{l.push(new o(C,s[C]))});let a=null,c=null,u={};const m=ll();async function _(C,S){await dn(),m(C,S)}let g=null,p=null;i&&(p=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?g=C.state:g=null},window.addEventListener("popstate",p),ol(()=>{yl(g)}));let v=null,w=null;const b=hn.subscribe(async C=>{v=C;let S=0;for(;S<l.length;){const T=l[S].match(C.location);if(!T){S++;continue}const j={route:l[S].path,location:C.location,querystring:C.querystring,userData:l[S].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await l[S].checkConditions(j)){t(0,a=null),w=null,_("conditionsFailed",j);return}_("routeLoading",Object.assign({},j));const A=l[S].component;if(w!=A){A.loading?(t(0,a=A.loading),w=A,t(1,c=A.loadingParams),t(2,u={}),_("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:c}))):(t(0,a=null),w=null);const F=await A();if(C!=v)return;t(0,a=F&&F.default||F),w=A}T&&typeof T=="object"&&Object.keys(T).length?t(1,c=T):t(1,c=null),t(2,u=l[S].props),_("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:c})).then(()=>{ri.set(c)});return}t(0,a=null),w=null,ri.set(void 0)});al(()=>{b(),p&&window.removeEventListener("popstate",p)});function k(C){ss.call(this,r,C)}function $(C){ss.call(this,r,C)}return r.$$set=C=>{"routes"in C&&t(3,s=C.routes),"prefix"in C&&t(4,n=C.prefix),"restoreScrollState"in C&&t(5,i=C.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,s,n,i,k,$]}class mn extends be{constructor(e){super(),ge(this,e,wl,pl,pe,{routes:3,prefix:4,restoreScrollState:5})}}const kl="modulepreload",$l=function(r){return"/library/"+r},si={},cr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(t.map(l=>{if(l=$l(l),l in si)return;si[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":kl,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((m,_)=>{u.addEventListener("load",m),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Sl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class _n extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ol extends _n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tl extends _n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dl extends _n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zs;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(zs||(zs={}));var Ml=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};class Cl{constructor(e,{headers:t={},customFetch:s,region:n=zs.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Sl(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Ml(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new Ol(p)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new Tl(u);if(!u.ok)throw new Dl(u);let _=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var Pl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ur=Pl();const El=ur.fetch,pn=ur.fetch.bind(ur),Uo=ur.Headers,Rl=ur.Request,jl=ur.Response,Ir=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uo,Request:Rl,Response:jl,default:pn,fetch:El},Symbol.toStringTag,{value:"Module"}));class Al extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Il{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,m=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&v===""?(_=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new Al(c)}return{error:c,data:u,count:m,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class Ll extends Il{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Kt extends Ll{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Yl{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Kt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Kt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Nl="1.15.2",Ul={"X-Client-Info":`postgrest-js/${Nl}`};class gn{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ul),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Yl(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",a=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Kt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Fl="2.9.5",xl={"X-Client-Info":`realtime-js/${Fl}`},Hl="1.0.0",Fo=1e4,Wl=1e3;var rr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(rr||(rr={}));var Ge;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ge||(Ge={}));var st;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(st||(st={}));var Gs;(function(r){r.websocket="websocket"})(Gs||(Gs={}));var Nt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Nt||(Nt={}));class xo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Bl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class As{constructor(e,t,s={},n=Fo){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ni;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ni||(ni={}));class kr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=kr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=kr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const m=i[c];if(m){const _=u.map(w=>w.presence_ref),g=m.map(w=>w.presence_ref),p=u.filter(w=>g.indexOf(w.presence_ref)<0),v=m.filter(w=>_.indexOf(w.presence_ref)<0);p.length>0&&(l[c]=p),v.length>0&&(a[c]=v)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const m=e[l].map(g=>g.presence_ref),_=u.filter(g=>m.indexOf(g.presence_ref)<0);e[l].unshift(..._)}s(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(m=>m.presence_ref);c=c.filter(m=>u.indexOf(m.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Pe||(Pe={}));const ii=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=ql(o,r,e,n),i),{})},ql=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?Ho(i,o):Js(o)},Ho=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Jl(e,t)}switch(r){case Pe.bool:return Vl(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return zl(e);case Pe.json:case Pe.jsonb:return Gl(e);case Pe.timestamp:return Kl(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Js(e);default:return Js(e)}},Js=r=>r,Vl=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},zl=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Gl=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Jl=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ho(e,l))}return r},Kl=r=>typeof r=="string"?r.replace(" ","T"):r;var oi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(oi||(oi={}));var ai;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(ai||(ai={}));var li;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class bn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new As(this,st.join,this.params,this.timeout),this.rejoinTimer=new xo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new kr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const m=this.bindings.postgres_changes,_=(u=m==null?void 0:m.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const v=m[p],{filter:{event:w,schema:b,table:k,filter:$}}=v,C=c&&c[p];if(C&&C.event===w&&C.schema===b&&C.table===k&&C.filter===$)g.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new As(this,st.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new As(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=st;if(s&&[l,a,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let _=this._onMessage(o,t,s);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,v,w;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(v=g.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(_,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,v,w,b,k,$;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,S=(p=g.filter)===null||p===void 0?void 0:p.event;return C&&((v=t.ids)===null||v===void 0?void 0:v.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(k=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return C==="*"||C===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:v,table:w,commit_timestamp:b,type:k,errors:$}=p;_=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:b,eventType:k,new:{},old:{},errors:$}),this._getPayloadRecords(p))}g.callback(_,s)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&bn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(st.close,{},e)}_onError(e){this._on(st.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ii(e.columns,e.old_record)),t}}const Zl=()=>{},Ql=typeof WebSocket<"u";class Xl{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=xl,this.params={},this.timeout=Fo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Zl,this.conn=null,this.sendBuffer=[],this.serializer=new Bl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Gs.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ql){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ec(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),cr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rr.connecting:return Nt.Connecting;case rr.open:return Nt.Open;case rr.closing:return Nt.Closing;default:return Nt.Closed}}isConnected(){return this.connectionState()===Nt.Open}channel(e,t={config:{}}){const s=new bn(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(st.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Hl}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(st.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Wl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ec{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class tc extends vn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ci extends vn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var rc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};const Wo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},sc=()=>rc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cr(()=>Promise.resolve().then(()=>Ir),void 0)).Response:Response});var fr=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};const Is=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),nc=(r,e)=>fr(void 0,void 0,void 0,function*(){const t=yield sc();r instanceof t?r.json().then(s=>{e(new tc(Is(s),r.status||500))}).catch(s=>{e(new ci(Is(s),s))}):e(new ci(Is(r),r))}),ic=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function gs(r,e,t,s,n,i){return fr(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,ic(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>nc(a,l))})})}function Ks(r,e,t,s){return fr(this,void 0,void 0,function*(){return gs(r,"GET",e,t,s)})}function Dt(r,e,t,s,n){return fr(this,void 0,void 0,function*(){return gs(r,"POST",e,s,n,t)})}function oc(r,e,t,s,n){return fr(this,void 0,void 0,function*(){return gs(r,"PUT",e,s,n,t)})}function Bo(r,e,t,s,n){return fr(this,void 0,void 0,function*(){return gs(r,"DELETE",e,s,n,t)})}var Ze=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};const ac={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ui={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Wo(n)}uploadOrUpdate(e,t,s,n){return Ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ui),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield u.json();return u.ok?{data:{path:a,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const c=Object.assign({upsert:ui.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",c.cacheControl)):(a=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),_=yield m.json();return m.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Ze(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Dt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new vn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}update(e,t,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}copy(e,t){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Dt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Ze(this,void 0,void 0,function*(){try{const n=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,t){return Ze(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ks(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${c}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Bo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ac),t),{prefix:e||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cc="2.5.5",uc={"X-Client-Info":`storage-js/${cc}`};var qt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};class dc{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},uc),t),this.fetch=Wo(s)}listBuckets(){return qt(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return qt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return qt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Bo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}}class fc extends dc{constructor(e,t={},s){super(e,t,s)}from(e){return new lc(this.url,this.headers,e,this.fetch)}}const hc="2.43.2";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const mc={"X-Client-Info":`supabase-js-${yr}/${hc}`},_c={headers:mc},pc={schema:"public"},gc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bc={};var vc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};const yc=r=>{let e;return r?e=r:typeof fetch>"u"?e=pn:e=fetch,(...t)=>e(...t)},wc=()=>typeof Headers>"u"?Uo:Headers,kc=(r,e,t)=>{const s=yc(t),n=wc();return(i,o)=>vc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:r;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};function $c(r){return r.replace(/\/$/,"")}function Sc(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const qo="2.64.2",Oc="http://localhost:9999",Tc="supabase.auth.token",Dc={"X-Client-Info":`gotrue-js/${qo}`},di=10,Zs="X-Supabase-Api-Version",Vo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Mc(r){return Math.round(Date.now()/1e3)+r}function Cc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const rt=()=>typeof document<"u",At={tested:!1,writable:!1},$r=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(At.tested)return At.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),At.tested=!0,At.writable=!0}catch{At.tested=!0,At.writable=!1}return At.writable};function Ls(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const zo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>cr(()=>Promise.resolve().then(()=>Ir),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Pc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Go=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},xr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ys=async(r,e)=>{await r.removeItem(e)};function Ec(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,o,l,a,c,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)o=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),a=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,t=t+String.fromCharCode(s),a!=64&&n!=0&&(t=t+String.fromCharCode(n)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class bs{constructor(){this.promise=new bs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bs.promiseConstructor=Promise;function fi(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Ec(s))}async function Rc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function jc(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Ac(r){return("0"+r.toString(16)).substr(-2)}function Ic(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Ac).join("")}async function Lc(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Yc(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Lc(r);return Yc(t)}async function Vt(r,e,t=!1){const s=Ic();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Go(r,`${e}-code-verifier`,n);const i=await Nc(s);return[i,s===i?"plain":"s256"]}const Uc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fc(r){const e=r.headers.get(Zs);if(!e||!e.match(Uc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class yn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function he(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class xc extends yn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Hc(r){return he(r)&&r.name==="AuthApiError"}class Jo extends yn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xt extends yn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class It extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ns extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hr extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wr extends xt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hi extends xt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qs extends xt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Us(r){return he(r)&&r.name==="AuthRetryableFetchError"}class mi extends xt{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var Wc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Yt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Bc=[502,503,504];async function _i(r){var e;if(!Pc(r))throw new Qs(Yt(r),0);if(Bc.includes(r.status))throw new Qs(Yt(r),r.status);let t;try{t=await r.json()}catch(i){throw new Jo(Yt(i),i)}let s;const n=Fc(r);if(n&&n.getTime()>=Vo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new mi(Yt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mi(Yt(t),r.status,t.weak_password.reasons);throw new xc(Yt(t),r.status||500,s)}const qc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function _e(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Zs]||(i[Zs]=Vo["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Vc(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Vc(r,e,t,s,n,i){const o=qc(e,s,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(a){throw console.error(a),new Qs(Yt(a),0)}if(l.ok||await _i(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await _i(a)}}function Tt(r){var e;let t=null;Kc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Mc(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function pi(r){const e=Tt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Mt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function zc(r){return{data:r,error:null}}function Gc(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=Wc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Jc(r){return r}function Kc(r){return r.access_token&&r.refresh_token&&r.expires_in}var Zc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Qc{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=zo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Zc(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Gc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(he(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mt})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Jc});if(u.error)throw u.error;const m=await u.json(),_=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);c[`${w}Page`]=v}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mt})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Mt})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(he(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}}const Xc={getItem:r=>$r()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{$r()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{$r()&&globalThis.localStorage.removeItem(r)}};function gi(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function eu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zt={debug:!!(globalThis&&$r()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ko extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tu extends Ko{}async function ru(r,e,t){zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),zt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new tu(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(zt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}eu();const su={url:Oc,storageKey:Tc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},gr=30*1e3,bi=3;async function vi(r,e,t){return await t()}class Mr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mr.nextInstanceID,Mr.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},su),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Qc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=zo(n.fetch),this.lock=n.lock||vi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:rt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ru:this.lock=vi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:$r()?this.storage=Xc:(this.memoryStorage={},this.storage=gi(this.memoryStorage)):(this.memoryStorage={},this.storage=gi(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=rt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return he(e)?{error:e}:{error:new Jo("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{await this._removeSession();const i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Tt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:m,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Vt(this.storage,this.storageKey)),i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:m,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:Tt})}else if("phone"in e){const{phone:u,password:m,options:_}=e;i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Tt})}else throw new Hr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else throw new Hr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ns}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await xr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/"),{data:i,error:o}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Tt});return await Ys(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ns}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Tt}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ns}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Vt(this.storage,this.storageKey));const{error:m}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Hr("You must provide either an email or phone number.")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Tt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Vt(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:zc})}catch(i){if(he(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new It;const{error:n}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await _e(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await _e(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Hr("You must provide either an email or phone number and a type")}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mt}):await this._useSession(async t=>{var s,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Mt})})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new It;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Vt(this.storage,this.storageKey));const{data:c,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Mt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return fi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new It;const t=Date.now()/1e3;let s=t,n=!0,i=null;const o=fi(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(he(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new It;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!rt())throw new Wr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Wr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new hi("Not a valid PKCE flow url.");const t=Ls(window.location.href);if(e){if(!t.code)throw new hi("No code detected.");const{data:k,error:$}=await this._exchangeCodeForSession(t.code);if($)throw $;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:k.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Wr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=t;if(!i||!l||!o||!c)throw new Wr("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let _=u+m;a&&(_=parseInt(a));const g=_-u;g*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const p=_-m;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const b={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:_,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(t){if(he(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Ls(window.location.href);return!!(rt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Ls(window.location.href),t=await xr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Hc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Cc(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Vt(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(he(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:m,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return rt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(he(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await jc(async n=>(n>0&&await Rc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Us(i)&&Date.now()+o-s<gr})}catch(s){if(this._debug(t,"error",s),he(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),rt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await xr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+di;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${di}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Us(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new bs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new It;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),he(i)){const o={session:null,error:i};return Us(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Go(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${gr}ms, refresh threshold is ${bi} ticks`),n<=bi&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ko)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Vt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(he(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(he(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Mr.nextInstanceID=0;const nu=Mr;class iu extends nu{constructor(e){super(e)}}var ou=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(m){o(m)}}function a(u){try{c(s.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(r,e||[])).next())})};class au{constructor(e,t,s){var n,i,o,l,a,c,u,m;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const _=$c(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:pc,realtime:bc,auth:Object.assign(Object.assign({},gc),{storageKey:g}),global:_c},v=Sc(s??{},p);this.storageKey=(i=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=kc(t,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new gn(`${_}/rest/v1`,{headers:this.headers,schema:(m=v.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Cl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ou(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iu({url:this.authUrl,headers:Object.assign(Object.assign({},m),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Xl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lu=(r,e,t)=>new au(r,e,t),ae=lu("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function yi(r){let e,t,s;return{c(){e=h("a"),e.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',t=y(),s=h("a"),s.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',f(e,"class","nav-link svelte-ecrr7r"),f(e,"href","./#/borrow"),f(s,"class","nav-link svelte-ecrr7r"),f(s,"href","./#/return")},m(n,i){E(n,e,i),E(n,t,i),E(n,s,i)},d(n){n&&(P(e),P(t),P(s))}}}function cu(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te,x,q,X,ye,oe=r[0]=="staff"&&yi();return{c(){e=h("nav"),t=h("div"),s=h("a"),s.innerHTML=`<i class="bi bi-book"></i> 
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=y(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=y(),l=h("div"),a=h("div"),c=h("a"),c.innerHTML='<i class="bi bi-house-door"></i> Home',u=y(),m=h("a"),m.innerHTML='<i class="bi bi-journal"></i> Books',_=y(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=y(),v=h("a"),v.innerHTML='<i class="bi bi-building"></i> Publishers',w=y(),oe&&oe.c(),b=y(),k=h("li"),$=h("a"),C=h("i"),S=y(),T=se(r[1]),j=y(),A=h("ul"),F=h("li"),F.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Profile</a>',Z=y(),H=h("li"),H.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Settings</a>',K=y(),B=h("li"),B.innerHTML='<hr class="dropdown-divider"/>',R=y(),I=h("li"),D=h("a"),D.textContent="Log Out",z=y(),te=h("button"),x=h("span"),f(s,"class","navbar-brand m-0 px-2 svelte-ecrr7r"),f(s,"href","./#/"),f(i,"class","navbar-toggler"),f(i,"type","button"),f(i,"data-bs-toggle","collapse"),f(i,"data-bs-target","#navbarContent"),f(c,"class","nav-link svelte-ecrr7r"),f(c,"href","./#/"),f(m,"class","nav-link svelte-ecrr7r"),f(m,"href","./#/search"),f(g,"class","nav-link svelte-ecrr7r"),f(g,"href","./#/search/author"),f(v,"class","nav-link svelte-ecrr7r"),f(v,"href","./#/search/publisher"),f(C,"class","bi bi-person-fill"),f($,"class","nav-link dropdown-toggle svelte-ecrr7r"),f($,"href","#"),f($,"role","button"),f($,"data-bs-toggle","dropdown"),f($,"aria-expanded","false"),f(D,"class","dropdown-item text-danger svelte-ecrr7r"),f(D,"href","./#/"),f(A,"class","dropdown-menu"),f(k,"class","nav-item dropdown"),f(x,"class",q="bi bi-"+r[2]+" svelte-ecrr7r"),f(te,"title","Switch theme"),f(te,"class","px-1 border-0 bg-transparent nav-link svelte-ecrr7r"),f(a,"class","navbar-nav ms-auto text-center svelte-ecrr7r"),f(l,"class","collapse navbar-collapse"),f(l,"id","navbarContent"),f(t,"class","container px-4 fw-semibold"),f(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow svelte-ecrr7r")},m(re,fe){E(re,e,fe),d(e,t),d(t,s),d(t,n),d(t,i),d(t,o),d(t,l),d(l,a),d(a,c),d(a,u),d(a,m),d(a,_),d(a,g),d(a,p),d(a,v),d(a,w),oe&&oe.m(a,null),d(a,b),d(a,k),d(k,$),d($,C),d($,S),d($,T),d(k,j),d(k,A),d(A,F),d(A,Z),d(A,H),d(A,K),d(A,B),d(A,R),d(A,I),d(I,D),d(a,z),d(a,te),d(te,x),X||(ye=[G(D,"click",r[4]),G(te,"click",r[3])],X=!0)},p(re,[fe]){re[0]=="staff"?oe||(oe=yi(),oe.c(),oe.m(a,b)):oe&&(oe.d(1),oe=null),fe&2&&le(T,re[1]),fe&4&&q!==(q="bi bi-"+re[2]+" svelte-ecrr7r")&&f(x,"class",q)},i:U,o:U,d(re){re&&P(e),oe&&oe.d(),X=!1,De(ye)}}}function uu(r,e,t){let s,n,i=localStorage.getItem("user_id");Rt.subscribe(m=>t(0,n=m)),l();let o="";async function l(){const{data:m,error:_}=await ae.from("account_details").select("lname").eq("user_id",i).single();_&&console.error(_),console.log(i,m),t(1,o=m.lname)}let a=localStorage.getItem("theme")||"light";function c(){t(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){Rt.set(""),Jr.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return r.$$.update=()=>{r.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),r.$$.dirty&32&&t(2,s=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,s,c,u,a]}class Zo extends be{constructor(e){super(),ge(this,e,uu,cu,pe,{})}}function du(r){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,s){E(t,e,s)},p:U,i:U,o:U,d(t){t&&P(e)}}}class fu extends be{constructor(e){super(),ge(this,e,null,du,pe,{})}}function hu(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p;return{c(){e=h("div"),t=h("img"),n=y(),i=h("div"),o=h("h5"),l=h("a"),a=se(r[1]),u=y(),m=h("small"),_=h("i"),g=y(),p=se(r[2]),Xe(t.src,s=r[3])||f(t,"src",s),f(t,"alt","book cover"),f(t,"class","svelte-1a99e4f"),f(l,"class","stretched-link svelte-1a99e4f"),f(l,"href",c="./#/book/"+r[0]),f(o,"class","card-title"),f(_,"class","bi bi-person"),f(m,"class","card-text"),f(i,"class","card-body"),f(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(v,w){E(v,e,w),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a),d(i,u),d(i,m),d(m,_),d(m,g),d(m,p)},p(v,[w]){w&2&&le(a,v[1]),w&1&&c!==(c="./#/book/"+v[0])&&f(l,"href",c),w&4&&le(p,v[2])},i:U,o:U,d(v){v&&P(e)}}}function mu(r,e,t){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=s>4?"./book-cover.png":`./${s}.jpg`;return r.$$set=l=>{"id"in l&&t(0,s=l.id),"title"in l&&t(1,n=l.title),"author"in l&&t(2,i=l.author)},[s,n,i,o]}class vs extends be{constructor(e){super(),ge(this,e,mu,hu,pe,{id:0,title:1,author:2})}}function wi(r){let e,t,s,n,i,o,l;return{c(){e=h("div"),t=h("a"),s=h("button"),n=se(r[3]),i=y(),o=h("i"),f(o,"class","bi bi-arrow-right"),f(s,"class","btn btn-outline-primary btn-sm"),f(t,"href",l="./#/"+r[2]),f(e,"class","align-middle align-self-center")},m(a,c){E(a,e,c),d(e,t),d(t,s),d(s,n),d(s,i),d(s,o)},p(a,c){c&8&&le(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&f(t,"href",l)},d(a){a&&P(e)}}}function _u(r){let e,t,s,n,i,o,l,a,c,u,m=r[2]!==""&&wi(r);const _=r[5].default,g=ds(_,r,r[4],null);return{c(){e=h("section"),t=h("div"),s=h("h4"),n=h("i"),o=y(),l=se(r[0]),a=y(),m&&m.c(),c=y(),g&&g.c(),f(n,"class",i="bi bi-"+r[1]),f(s,"class","my-3"),f(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,v){E(p,e,v),d(e,t),d(t,s),d(s,n),d(s,o),d(s,l),d(t,a),m&&m.m(t,null),d(e,c),g&&g.m(e,null),u=!0},p(p,[v]){(!u||v&2&&i!==(i="bi bi-"+p[1]))&&f(n,"class",i),(!u||v&1)&&le(l,p[0]),p[2]!==""?m?m.p(p,v):(m=wi(p),m.c(),m.m(t,null)):m&&(m.d(1),m=null),g&&g.p&&(!u||v&16)&&hs(g,_,p,p[4],u?fs(_,p[4],v,null):ms(p[4]),null)},i(p){u||(O(g,p),u=!0)},o(p){M(g,p),u=!1},d(p){p&&P(e),m&&m.d(),g&&g.d(p)}}}function pu(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return r.$$set=c=>{"title"in c&&t(0,i=c.title),"icon"in c&&t(1,o=c.icon),"link"in c&&t(2,l=c.link),"linkText"in c&&t(3,a=c.linkText),"$$scope"in c&&t(4,n=c.$$scope)},[i,o,l,a,n,s]}class ut extends be{constructor(e){super(),ge(this,e,pu,_u,pe,{title:0,icon:1,link:2,linkText:3})}}function gu(r){const e=r-1;return e*e*e+1}function Fe(r,{delay:e=0,duration:t=400,easing:s=ln}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*n}`}}function dr(r,{delay:e=0,duration:t=400,easing:s=gu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(r),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[m,_]=Qn(n),[g,p]=Qn(i);return{delay:e,duration:t,easing:s,css:(v,w)=>`
			transform: ${c} translate(${(1-v)*m}${_}, ${(1-v)*g}${p});
			opacity: ${a-u*w}`}}function bu(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',f(e,"class","d-flex justify-content-center")},m(t,s){E(t,e,s)},p:U,i:U,o:U,d(t){t&&P(e)}}}class jt extends be{constructor(e){super(),ge(this,e,null,bu,pe,{})}}function vu(r){let e,t,s,n,i,o,l,a,c;return{c(){e=h("div"),t=h("img"),n=y(),i=h("div"),o=h("h6"),l=h("a"),a=se(r[0]),f(t,"class","object-fit-contain rounded my-2"),f(t,"height","150"),Xe(t.src,s="./default-profile.jpg")||f(t,"src",s),f(t,"alt","author"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/author/"+r[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/author/"+u[1])&&f(l,"href",c)},i:U,o:U,d(u){u&&P(e)}}}function yu(r,e,t){let{name:s}=e,{id:n}=e;return r.$$set=i=>{"name"in i&&t(0,s=i.name),"id"in i&&t(1,n=i.id)},[s,n]}class Qo extends be{constructor(e){super(),ge(this,e,yu,vu,pe,{name:0,id:1})}}function wu(r){let e,t,s,n,i,o,l,a,c;return{c(){e=h("div"),t=h("img"),n=y(),i=h("div"),o=h("h6"),l=h("a"),a=se(r[0]),f(t,"class","object-fit-contain rounded my-2"),f(t,"height","150"),Xe(t.src,s="./default-profile.jpg")||f(t,"src",s),f(t,"alt","publisher"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/publisher/"+r[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/publisher/"+u[1])&&f(l,"href",c)},i:U,o:U,d(u){u&&P(e)}}}function ku(r,e,t){let{name:s}=e,{id:n}=e;return r.$$set=i=>{"name"in i&&t(0,s=i.name),"id"in i&&t(1,n=i.id)},[s,n]}class Xo extends be{constructor(e){super(),ge(this,e,ku,wu,pe,{name:0,id:1})}}function $u(r){let e,t,s,n,i,o,l,a,c,u;return{c(){e=h("div"),t=h("div"),s=h("h2"),s.textContent="Error",n=y(),i=h("p"),o=se(r[0]),l=se(": "),a=se(r[1]),c=y(),u=h("a"),u.textContent="Reload",f(u,"href","./#/"),f(u,"class","fw-bold"),f(t,"class","text-center"),f(e,"class","d-flex align-items-center justify-content-center my-3")},m(m,_){E(m,e,_),d(e,t),d(t,s),d(t,n),d(t,i),d(i,o),d(i,l),d(i,a),d(t,c),d(t,u)},p(m,[_]){_&1&&le(o,m[0]),_&2&&le(a,m[1])},i:U,o:U,d(m){m&&P(e)}}}function Su(r,e,t){let{code:s="err"}=e,{message:n}=e;return r.$$set=i=>{"code"in i&&t(0,s=i.code),"message"in i&&t(1,n=i.message)},[s,n]}let ys=class extends be{constructor(e){super(),ge(this,e,Su,$u,pe,{code:0,message:1})}};function Ou(r){let e,t,s,n,i,o,l,a,c,u,m;return{c(){e=h("div"),t=h("div"),s=h("h5"),n=h("a"),i=se(r[1]),l=y(),a=h("div"),c=h("span"),u=se(r[2]),f(n,"class","stretched-link svelte-9p7s9b"),f(n,"href",o="./#/book/"+r[0]),f(s,"class","card-title"),f(c,"class",m="badge rounded-pill text-bg-"+r[3]+" svelte-9p7s9b"),f(t,"class","card-body"),f(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(_,g){E(_,e,g),d(e,t),d(t,s),d(s,n),d(n,i),d(t,l),d(t,a),d(a,c),d(c,u)},p(_,[g]){g&2&&le(i,_[1]),g&1&&o!==(o="./#/book/"+_[0])&&f(n,"href",o),g&4&&le(u,_[2]),g&8&&m!==(m="badge rounded-pill text-bg-"+_[3]+" svelte-9p7s9b")&&f(c,"class",m)},i:U,o:U,d(_){_&&P(e)}}}function Tu(r,e,t){let{id:s=0}=e,{title:n}=e,{label:i}=e,{color:o}=e;return r.$$set=l=>{"id"in l&&t(0,s=l.id),"title"in l&&t(1,n=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[s,n,i,o]}class Du extends be{constructor(e){super(),ge(this,e,Tu,Ou,pe,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ea;function W(){return ea.apply(null,arguments)}function Mu(r){ea=r}function it(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function Ft(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function ke(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function wn(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(ke(r,e))return!1;return!0}function ze(r){return r===void 0}function $t(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function Lr(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function ta(r,e){var t=[],s,n=r.length;for(s=0;s<n;++s)t.push(e(r[s],s));return t}function Ct(r,e){for(var t in e)ke(e,t)&&(r[t]=e[t]);return ke(e,"toString")&&(r.toString=e.toString),ke(e,"valueOf")&&(r.valueOf=e.valueOf),r}function ft(r,e,t,s){return Sa(r,e,t,s,!0).utc()}function Cu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function de(r){return r._pf==null&&(r._pf=Cu()),r._pf}var Xs;Array.prototype.some?Xs=Array.prototype.some:Xs=function(r){var e=Object(this),t=e.length>>>0,s;for(s=0;s<t;s++)if(s in e&&r.call(this,e[s],s,e))return!0;return!1};function kn(r){var e=null,t=!1,s=r._d&&!isNaN(r._d.getTime());if(s&&(e=de(r),t=Xs.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=s;else return s;return r._isValid}function ws(r){var e=ft(NaN);return r!=null?Ct(de(e),r):de(e).userInvalidated=!0,e}var ki=W.momentProperties=[],Fs=!1;function $n(r,e){var t,s,n,i=ki.length;if(ze(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),ze(e._i)||(r._i=e._i),ze(e._f)||(r._f=e._f),ze(e._l)||(r._l=e._l),ze(e._strict)||(r._strict=e._strict),ze(e._tzm)||(r._tzm=e._tzm),ze(e._isUTC)||(r._isUTC=e._isUTC),ze(e._offset)||(r._offset=e._offset),ze(e._pf)||(r._pf=de(e)),ze(e._locale)||(r._locale=e._locale),i>0)for(t=0;t<i;t++)s=ki[t],n=e[s],ze(n)||(r[s]=n);return r}function Yr(r){$n(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Fs===!1&&(Fs=!0,W.updateOffset(this),Fs=!1)}function ot(r){return r instanceof Yr||r!=null&&r._isAMomentObject!=null}function ra(r){W.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function et(r,e){var t=!0;return Ct(function(){if(W.deprecationHandler!=null&&W.deprecationHandler(null,r),t){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])ke(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}ra(r+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var $i={};function sa(r,e){W.deprecationHandler!=null&&W.deprecationHandler(r,e),$i[r]||(ra(e),$i[r]=!0)}W.suppressDeprecationWarnings=!1;W.deprecationHandler=null;function ht(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function Pu(r){var e,t;for(t in r)ke(r,t)&&(e=r[t],ht(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(r,e){var t=Ct({},r),s;for(s in e)ke(e,s)&&(Ft(r[s])&&Ft(e[s])?(t[s]={},Ct(t[s],r[s]),Ct(t[s],e[s])):e[s]!=null?t[s]=e[s]:delete t[s]);for(s in r)ke(r,s)&&!ke(e,s)&&Ft(r[s])&&(t[s]=Ct({},t[s]));return t}function Sn(r){r!=null&&this.set(r)}var tn;Object.keys?tn=Object.keys:tn=function(r){var e,t=[];for(e in r)ke(r,e)&&t.push(e);return t};var Eu={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ru(r,e,t){var s=this._calendar[r]||this._calendar.sameElse;return ht(s)?s.call(e,t):s}function dt(r,e,t){var s=""+Math.abs(r),n=e-s.length,i=r>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var On=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Br=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xs={},sr={};function ne(r,e,t,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),r&&(sr[r]=n),e&&(sr[e[0]]=function(){return dt(n.apply(this,arguments),e[1],e[2])}),t&&(sr[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),r)})}function ju(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Au(r){var e=r.match(On),t,s;for(t=0,s=e.length;t<s;t++)sr[e[t]]?e[t]=sr[e[t]]:e[t]=ju(e[t]);return function(n){var i="",o;for(o=0;o<s;o++)i+=ht(e[o])?e[o].call(n,r):e[o];return i}}function Kr(r,e){return r.isValid()?(e=na(e,r.localeData()),xs[e]=xs[e]||Au(e),xs[e](r)):r.localeData().invalidDate()}function na(r,e){var t=5;function s(n){return e.longDateFormat(n)||n}for(Br.lastIndex=0;t>=0&&Br.test(r);)r=r.replace(Br,s),Br.lastIndex=0,t-=1;return r}var Iu={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Lu(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(On).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[r])}var Yu="Invalid date";function Nu(){return this._invalidDate}var Uu="%d",Fu=/\d{1,2}/;function xu(r){return this._ordinal.replace("%d",r)}var Hu={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Wu(r,e,t,s){var n=this._relativeTime[t];return ht(n)?n(r,e,t,s):n.replace(/%d/i,r)}function Bu(r,e){var t=this._relativeTime[r>0?"future":"past"];return ht(t)?t(e):t.replace(/%s/i,e)}var Si={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function tt(r){return typeof r=="string"?Si[r]||Si[r.toLowerCase()]:void 0}function Tn(r){var e={},t,s;for(s in r)ke(r,s)&&(t=tt(s),t&&(e[t]=r[s]));return e}var qu={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Vu(r){var e=[],t;for(t in r)ke(r,t)&&e.push({unit:t,priority:qu[t]});return e.sort(function(s,n){return s.priority-n.priority}),e}var ia=/\d/,Je=/\d\d/,oa=/\d{3}/,Dn=/\d{4}/,ks=/[+-]?\d{6}/,je=/\d\d?/,aa=/\d\d\d\d?/,la=/\d\d\d\d\d\d?/,$s=/\d{1,3}/,Mn=/\d{1,4}/,Ss=/[+-]?\d{1,6}/,hr=/\d+/,Os=/[+-]?\d+/,zu=/Z|[+-]\d\d:?\d\d/gi,Ts=/Z|[+-]\d\d(?::?\d\d)?/gi,Gu=/[+-]?\d+(\.\d{1,3})?/,Nr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,mr=/^[1-9]\d?/,Cn=/^([1-9]\d|\d)/,os;os={};function Q(r,e,t){os[r]=ht(e)?e:function(s,n){return s&&t?t:e}}function Ju(r,e){return ke(os,r)?os[r](e._strict,e._locale):new RegExp(Ku(r))}function Ku(r){return wt(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,n,i){return t||s||n||i}))}function wt(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Qe(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function me(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=Qe(e)),t}var rn={};function Me(r,e){var t,s=e,n;for(typeof r=="string"&&(r=[r]),$t(e)&&(s=function(i,o){o[e]=me(i)}),n=r.length,t=0;t<n;t++)rn[r[t]]=s}function Ur(r,e){Me(r,function(t,s,n,i){n._w=n._w||{},e(t,n._w,n,i)})}function Zu(r,e,t){e!=null&&ke(rn,r)&&rn[r](e,t._a,t,r)}function Ds(r){return r%4===0&&r%100!==0||r%400===0}var He=0,vt=1,lt=2,Ne=3,nt=4,yt=5,Ut=6,Qu=7,Xu=8;ne("Y",0,0,function(){var r=this.year();return r<=9999?dt(r,4):"+"+r});ne(0,["YY",2],0,function(){return this.year()%100});ne(0,["YYYY",4],0,"year");ne(0,["YYYYY",5],0,"year");ne(0,["YYYYYY",6,!0],0,"year");Q("Y",Os);Q("YY",je,Je);Q("YYYY",Mn,Dn);Q("YYYYY",Ss,ks);Q("YYYYYY",Ss,ks);Me(["YYYYY","YYYYYY"],He);Me("YYYY",function(r,e){e[He]=r.length===2?W.parseTwoDigitYear(r):me(r)});Me("YY",function(r,e){e[He]=W.parseTwoDigitYear(r)});Me("Y",function(r,e){e[He]=parseInt(r,10)});function Sr(r){return Ds(r)?366:365}W.parseTwoDigitYear=function(r){return me(r)+(me(r)>68?1900:2e3)};var ca=_r("FullYear",!0);function ed(){return Ds(this.year())}function _r(r,e){return function(t){return t!=null?(ua(this,r,t),W.updateOffset(this,e),this):Cr(this,r)}}function Cr(r,e){if(!r.isValid())return NaN;var t=r._d,s=r._isUTC;switch(e){case"Milliseconds":return s?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return s?t.getUTCSeconds():t.getSeconds();case"Minutes":return s?t.getUTCMinutes():t.getMinutes();case"Hours":return s?t.getUTCHours():t.getHours();case"Date":return s?t.getUTCDate():t.getDate();case"Day":return s?t.getUTCDay():t.getDay();case"Month":return s?t.getUTCMonth():t.getMonth();case"FullYear":return s?t.getUTCFullYear():t.getFullYear();default:return NaN}}function ua(r,e,t){var s,n,i,o,l;if(!(!r.isValid()||isNaN(t))){switch(s=r._d,n=r._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(t):s.setMilliseconds(t));case"Seconds":return void(n?s.setUTCSeconds(t):s.setSeconds(t));case"Minutes":return void(n?s.setUTCMinutes(t):s.setMinutes(t));case"Hours":return void(n?s.setUTCHours(t):s.setHours(t));case"Date":return void(n?s.setUTCDate(t):s.setDate(t));case"FullYear":break;default:return}i=t,o=r.month(),l=r.date(),l=l===29&&o===1&&!Ds(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function td(r){return r=tt(r),ht(this[r])?this[r]():this}function rd(r,e){if(typeof r=="object"){r=Tn(r);var t=Vu(r),s,n=t.length;for(s=0;s<n;s++)this[t[s].unit](r[t[s].unit])}else if(r=tt(r),ht(this[r]))return this[r](e);return this}function sd(r,e){return(r%e+e)%e}var Ye;Array.prototype.indexOf?Ye=Array.prototype.indexOf:Ye=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function Pn(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=sd(e,12);return r+=(e-t)/12,t===1?Ds(r)?29:28:31-t%7%2}ne("M",["MM",2],"Mo",function(){return this.month()+1});ne("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)});ne("MMMM",0,0,function(r){return this.localeData().months(this,r)});Q("M",je,mr);Q("MM",je,Je);Q("MMM",function(r,e){return e.monthsShortRegex(r)});Q("MMMM",function(r,e){return e.monthsRegex(r)});Me(["M","MM"],function(r,e){e[vt]=me(r)-1});Me(["MMM","MMMM"],function(r,e,t,s){var n=t._locale.monthsParse(r,s,t._strict);n!=null?e[vt]=n:de(t).invalidMonth=r});var nd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),da="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,id=Nr,od=Nr;function ad(r,e){return r?it(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||fa).test(e)?"format":"standalone"][r.month()]:it(this._months)?this._months:this._months.standalone}function ld(r,e){return r?it(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[fa.test(e)?"format":"standalone"][r.month()]:it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function cd(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=ft([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null))}function ud(r,e,t){var s,n,i;if(this._monthsParseExact)return cd.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=ft([2e3,s]),t&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[s].test(r))return s;if(t&&e==="MMM"&&this._shortMonthsParse[s].test(r))return s;if(!t&&this._monthsParse[s].test(r))return s}}function ha(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=me(e);else if(e=r.localeData().monthsParse(e),!$t(e))return r}var t=e,s=r.date();return s=s<29?s:Math.min(s,Pn(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,s):r._d.setMonth(t,s),r}function ma(r){return r!=null?(ha(this,r),W.updateOffset(this,!0),this):Cr(this,"Month")}function dd(){return Pn(this.year(),this.month())}function fd(r){return this._monthsParseExact?(ke(this,"_monthsRegex")||_a.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(ke(this,"_monthsShortRegex")||(this._monthsShortRegex=id),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function hd(r){return this._monthsParseExact?(ke(this,"_monthsRegex")||_a.call(this),r?this._monthsStrictRegex:this._monthsRegex):(ke(this,"_monthsRegex")||(this._monthsRegex=od),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function _a(){function r(a,c){return c.length-a.length}var e=[],t=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=ft([2e3,n]),o=wt(this.monthsShort(i,"")),l=wt(this.months(i,"")),e.push(o),t.push(l),s.push(l),s.push(o);e.sort(r),t.sort(r),s.sort(r),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function md(r,e,t,s,n,i,o){var l;return r<100&&r>=0?(l=new Date(r+400,e,t,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(r)):l=new Date(r,e,t,s,n,i,o),l}function Pr(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function as(r,e,t){var s=7+e-t,n=(7+Pr(r,0,s).getUTCDay()-e)%7;return-n+s-1}function pa(r,e,t,s,n){var i=(7+t-s)%7,o=as(r,s,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=r-1,c=Sr(a)+l):l>Sr(r)?(a=r+1,c=l-Sr(r)):(a=r,c=l),{year:a,dayOfYear:c}}function Er(r,e,t){var s=as(r.year(),e,t),n=Math.floor((r.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=r.year()-1,i=n+kt(o,e,t)):n>kt(r.year(),e,t)?(i=n-kt(r.year(),e,t),o=r.year()+1):(o=r.year(),i=n),{week:i,year:o}}function kt(r,e,t){var s=as(r,e,t),n=as(r+1,e,t);return(Sr(r)-s+n)/7}ne("w",["ww",2],"wo","week");ne("W",["WW",2],"Wo","isoWeek");Q("w",je,mr);Q("ww",je,Je);Q("W",je,mr);Q("WW",je,Je);Ur(["w","ww","W","WW"],function(r,e,t,s){e[s.substr(0,1)]=me(r)});function _d(r){return Er(r,this._week.dow,this._week.doy).week}var pd={dow:0,doy:6};function gd(){return this._week.dow}function bd(){return this._week.doy}function vd(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function yd(r){var e=Er(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}ne("d",0,"do","day");ne("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)});ne("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)});ne("dddd",0,0,function(r){return this.localeData().weekdays(this,r)});ne("e",0,0,"weekday");ne("E",0,0,"isoWeekday");Q("d",je);Q("e",je);Q("E",je);Q("dd",function(r,e){return e.weekdaysMinRegex(r)});Q("ddd",function(r,e){return e.weekdaysShortRegex(r)});Q("dddd",function(r,e){return e.weekdaysRegex(r)});Ur(["dd","ddd","dddd"],function(r,e,t,s){var n=t._locale.weekdaysParse(r,s,t._strict);n!=null?e.d=n:de(t).invalidWeekday=r});Ur(["d","e","E"],function(r,e,t,s){e[s]=me(r)});function wd(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function kd(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function En(r,e){return r.slice(e,7).concat(r.slice(0,e))}var $d="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ga="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Od=Nr,Td=Nr,Dd=Nr;function Md(r,e){var t=it(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?En(t,this._week.dow):r?t[r.day()]:t}function Cd(r){return r===!0?En(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function Pd(r){return r===!0?En(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function Ed(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=ft([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1||(n=Ye.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ye.call(this._minWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Rd(r,e,t){var s,n,i;if(this._weekdaysParseExact)return Ed.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=ft([2e3,1]).day(s),t&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[s].test(r))return s;if(t&&e==="ddd"&&this._shortWeekdaysParse[s].test(r))return s;if(t&&e==="dd"&&this._minWeekdaysParse[s].test(r))return s;if(!t&&this._weekdaysParse[s].test(r))return s}}function jd(r){if(!this.isValid())return r!=null?this:NaN;var e=Cr(this,"Day");return r!=null?(r=wd(r,this.localeData()),this.add(r-e,"d")):e}function Ad(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function Id(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=kd(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Ld(r){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(ke(this,"_weekdaysRegex")||(this._weekdaysRegex=Od),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yd(r){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ke(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Td),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Nd(r){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ke(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Dd),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Rn(){function r(u,m){return m.length-u.length}var e=[],t=[],s=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ft([2e3,1]).day(i),l=wt(this.weekdaysMin(o,"")),a=wt(this.weekdaysShort(o,"")),c=wt(this.weekdays(o,"")),e.push(l),t.push(a),s.push(c),n.push(l),n.push(a),n.push(c);e.sort(r),t.sort(r),s.sort(r),n.sort(r),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function jn(){return this.hours()%12||12}function Ud(){return this.hours()||24}ne("H",["HH",2],0,"hour");ne("h",["hh",2],0,jn);ne("k",["kk",2],0,Ud);ne("hmm",0,0,function(){return""+jn.apply(this)+dt(this.minutes(),2)});ne("hmmss",0,0,function(){return""+jn.apply(this)+dt(this.minutes(),2)+dt(this.seconds(),2)});ne("Hmm",0,0,function(){return""+this.hours()+dt(this.minutes(),2)});ne("Hmmss",0,0,function(){return""+this.hours()+dt(this.minutes(),2)+dt(this.seconds(),2)});function ba(r,e){ne(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ba("a",!0);ba("A",!1);function va(r,e){return e._meridiemParse}Q("a",va);Q("A",va);Q("H",je,Cn);Q("h",je,mr);Q("k",je,mr);Q("HH",je,Je);Q("hh",je,Je);Q("kk",je,Je);Q("hmm",aa);Q("hmmss",la);Q("Hmm",aa);Q("Hmmss",la);Me(["H","HH"],Ne);Me(["k","kk"],function(r,e,t){var s=me(r);e[Ne]=s===24?0:s});Me(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r});Me(["h","hh"],function(r,e,t){e[Ne]=me(r),de(t).bigHour=!0});Me("hmm",function(r,e,t){var s=r.length-2;e[Ne]=me(r.substr(0,s)),e[nt]=me(r.substr(s)),de(t).bigHour=!0});Me("hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Ne]=me(r.substr(0,s)),e[nt]=me(r.substr(s,2)),e[yt]=me(r.substr(n)),de(t).bigHour=!0});Me("Hmm",function(r,e,t){var s=r.length-2;e[Ne]=me(r.substr(0,s)),e[nt]=me(r.substr(s))});Me("Hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Ne]=me(r.substr(0,s)),e[nt]=me(r.substr(s,2)),e[yt]=me(r.substr(n))});function Fd(r){return(r+"").toLowerCase().charAt(0)==="p"}var xd=/[ap]\.?m?\.?/i,Hd=_r("Hours",!0);function Wd(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var ya={calendar:Eu,longDateFormat:Iu,invalidDate:Yu,ordinal:Uu,dayOfMonthOrdinalParse:Fu,relativeTime:Hu,months:nd,monthsShort:da,week:pd,weekdays:$d,weekdaysMin:Sd,weekdaysShort:ga,meridiemParse:xd},Ae={},br={},Rr;function Bd(r,e){var t,s=Math.min(r.length,e.length);for(t=0;t<s;t+=1)if(r[t]!==e[t])return t;return s}function Oi(r){return r&&r.toLowerCase().replace("_","-")}function qd(r){for(var e=0,t,s,n,i;e<r.length;){for(i=Oi(r[e]).split("-"),t=i.length,s=Oi(r[e+1]),s=s?s.split("-"):null;t>0;){if(n=Ms(i.slice(0,t).join("-")),n)return n;if(s&&s.length>=t&&Bd(i,s)>=t-1)break;t--}e++}return Rr}function Vd(r){return!!(r&&r.match("^[^/\\\\]*$"))}function Ms(r){var e=null,t;if(Ae[r]===void 0&&typeof Xr<"u"&&Xr&&Xr.exports&&Vd(r))try{e=Rr._abbr,t=require,t("./locale/"+r),Et(e)}catch{Ae[r]=null}return Ae[r]}function Et(r,e){var t;return r&&(ze(e)?t=St(r):t=An(r,e),t?Rr=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),Rr._abbr}function An(r,e){if(e!==null){var t,s=ya;if(e.abbr=r,Ae[r]!=null)sa("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Ae[r]._config;else if(e.parentLocale!=null)if(Ae[e.parentLocale]!=null)s=Ae[e.parentLocale]._config;else if(t=Ms(e.parentLocale),t!=null)s=t._config;else return br[e.parentLocale]||(br[e.parentLocale]=[]),br[e.parentLocale].push({name:r,config:e}),null;return Ae[r]=new Sn(en(s,e)),br[r]&&br[r].forEach(function(n){An(n.name,n.config)}),Et(r),Ae[r]}else return delete Ae[r],null}function zd(r,e){if(e!=null){var t,s,n=ya;Ae[r]!=null&&Ae[r].parentLocale!=null?Ae[r].set(en(Ae[r]._config,e)):(s=Ms(r),s!=null&&(n=s._config),e=en(n,e),s==null&&(e.abbr=r),t=new Sn(e),t.parentLocale=Ae[r],Ae[r]=t),Et(r)}else Ae[r]!=null&&(Ae[r].parentLocale!=null?(Ae[r]=Ae[r].parentLocale,r===Et()&&Et(r)):Ae[r]!=null&&delete Ae[r]);return Ae[r]}function St(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return Rr;if(!it(r)){if(e=Ms(r),e)return e;r=[r]}return qd(r)}function Gd(){return tn(Ae)}function In(r){var e,t=r._a;return t&&de(r).overflow===-2&&(e=t[vt]<0||t[vt]>11?vt:t[lt]<1||t[lt]>Pn(t[He],t[vt])?lt:t[Ne]<0||t[Ne]>24||t[Ne]===24&&(t[nt]!==0||t[yt]!==0||t[Ut]!==0)?Ne:t[nt]<0||t[nt]>59?nt:t[yt]<0||t[yt]>59?yt:t[Ut]<0||t[Ut]>999?Ut:-1,de(r)._overflowDayOfYear&&(e<He||e>lt)&&(e=lt),de(r)._overflowWeeks&&e===-1&&(e=Qu),de(r)._overflowWeekday&&e===-1&&(e=Xu),de(r).overflow=e),r}var Jd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zd=/Z|[+-]\d\d(?::?\d\d)?/,qr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Hs=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qd=/^\/?Date\((-?\d+)/i,Xd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ef={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function wa(r){var e,t,s=r._i,n=Jd.exec(s)||Kd.exec(s),i,o,l,a,c=qr.length,u=Hs.length;if(n){for(de(r).iso=!0,e=0,t=c;e<t;e++)if(qr[e][1].exec(n[1])){o=qr[e][0],i=qr[e][2]!==!1;break}if(o==null){r._isValid=!1;return}if(n[3]){for(e=0,t=u;e<t;e++)if(Hs[e][1].exec(n[3])){l=(n[2]||" ")+Hs[e][0];break}if(l==null){r._isValid=!1;return}}if(!i&&l!=null){r._isValid=!1;return}if(n[4])if(Zd.exec(n[4]))a="Z";else{r._isValid=!1;return}r._f=o+(l||"")+(a||""),Yn(r)}else r._isValid=!1}function tf(r,e,t,s,n,i){var o=[rf(r),da.indexOf(e),parseInt(t,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function rf(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function sf(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nf(r,e,t){if(r){var s=ga.indexOf(r),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return de(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function of(r,e,t){if(r)return ef[r];if(e)return 0;var s=parseInt(t,10),n=s%100,i=(s-n)/100;return i*60+n}function ka(r){var e=Xd.exec(sf(r._i)),t;if(e){if(t=tf(e[4],e[3],e[2],e[5],e[6],e[7]),!nf(e[1],t,r))return;r._a=t,r._tzm=of(e[8],e[9],e[10]),r._d=Pr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),de(r).rfc2822=!0}else r._isValid=!1}function af(r){var e=Qd.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(wa(r),r._isValid===!1)delete r._isValid;else return;if(ka(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:W.createFromInputFallback(r)}W.createFromInputFallback=et("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function Zt(r,e,t){return r??e??t}function lf(r){var e=new Date(W.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ln(r){var e,t,s=[],n,i,o;if(!r._d){for(n=lf(r),r._w&&r._a[lt]==null&&r._a[vt]==null&&cf(r),r._dayOfYear!=null&&(o=Zt(r._a[He],n[He]),(r._dayOfYear>Sr(o)||r._dayOfYear===0)&&(de(r)._overflowDayOfYear=!0),t=Pr(o,0,r._dayOfYear),r._a[vt]=t.getUTCMonth(),r._a[lt]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=s[e]=n[e];for(;e<7;e++)r._a[e]=s[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[Ne]===24&&r._a[nt]===0&&r._a[yt]===0&&r._a[Ut]===0&&(r._nextDay=!0,r._a[Ne]=0),r._d=(r._useUTC?Pr:md).apply(null,s),i=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[Ne]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==i&&(de(r).weekdayMismatch=!0)}}function cf(r){var e,t,s,n,i,o,l,a,c;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=Zt(e.GG,r._a[He],Er(Re(),1,4).year),s=Zt(e.W,1),n=Zt(e.E,1),(n<1||n>7)&&(a=!0)):(i=r._locale._week.dow,o=r._locale._week.doy,c=Er(Re(),i,o),t=Zt(e.gg,r._a[He],c.year),s=Zt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>kt(t,i,o)?de(r)._overflowWeeks=!0:a!=null?de(r)._overflowWeekday=!0:(l=pa(t,s,n,i,o),r._a[He]=l.year,r._dayOfYear=l.dayOfYear)}W.ISO_8601=function(){};W.RFC_2822=function(){};function Yn(r){if(r._f===W.ISO_8601){wa(r);return}if(r._f===W.RFC_2822){ka(r);return}r._a=[],de(r).empty=!0;var e=""+r._i,t,s,n,i,o,l=e.length,a=0,c,u;for(n=na(r._f,r._locale).match(On)||[],u=n.length,t=0;t<u;t++)i=n[t],s=(e.match(Ju(i,r))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&de(r).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),sr[i]?(s?de(r).empty=!1:de(r).unusedTokens.push(i),Zu(i,s,r)):r._strict&&!s&&de(r).unusedTokens.push(i);de(r).charsLeftOver=l-a,e.length>0&&de(r).unusedInput.push(e),r._a[Ne]<=12&&de(r).bigHour===!0&&r._a[Ne]>0&&(de(r).bigHour=void 0),de(r).parsedDateParts=r._a.slice(0),de(r).meridiem=r._meridiem,r._a[Ne]=uf(r._locale,r._a[Ne],r._meridiem),c=de(r).era,c!==null&&(r._a[He]=r._locale.erasConvertYear(c,r._a[He])),Ln(r),In(r)}function uf(r,e,t){var s;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(s=r.isPM(t),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function df(r){var e,t,s,n,i,o,l=!1,a=r._f.length;if(a===0){de(r).invalidFormat=!0,r._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=$n({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[n],Yn(e),kn(e)&&(o=!0),i+=de(e).charsLeftOver,i+=de(e).unusedTokens.length*10,de(e).score=i,l?i<s&&(s=i,t=e):(s==null||i<s||o)&&(s=i,t=e,o&&(l=!0));Ct(r,t||e)}function ff(r){if(!r._d){var e=Tn(r._i),t=e.day===void 0?e.date:e.day;r._a=ta([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),Ln(r)}}function hf(r){var e=new Yr(In($a(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function $a(r){var e=r._i,t=r._f;return r._locale=r._locale||St(r._l),e===null||t===void 0&&e===""?ws({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),ot(e)?new Yr(In(e)):(Lr(e)?r._d=e:it(t)?df(r):t?Yn(r):mf(r),kn(r)||(r._d=null),r))}function mf(r){var e=r._i;ze(e)?r._d=new Date(W.now()):Lr(e)?r._d=new Date(e.valueOf()):typeof e=="string"?af(r):it(e)?(r._a=ta(e.slice(0),function(t){return parseInt(t,10)}),Ln(r)):Ft(e)?ff(r):$t(e)?r._d=new Date(e):W.createFromInputFallback(r)}function Sa(r,e,t,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(t===!0||t===!1)&&(s=t,t=void 0),(Ft(r)&&wn(r)||it(r)&&r.length===0)&&(r=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=t,i._i=r,i._f=e,i._strict=s,hf(i)}function Re(r,e,t,s){return Sa(r,e,t,s,!1)}var _f=et("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Re.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:ws()}),pf=et("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Re.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:ws()});function Oa(r,e){var t,s;if(e.length===1&&it(e[0])&&(e=e[0]),!e.length)return Re();for(t=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][r](t))&&(t=e[s]);return t}function gf(){var r=[].slice.call(arguments,0);return Oa("isBefore",r)}function bf(){var r=[].slice.call(arguments,0);return Oa("isAfter",r)}var vf=function(){return Date.now?Date.now():+new Date},vr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function yf(r){var e,t=!1,s,n=vr.length;for(e in r)if(ke(r,e)&&!(Ye.call(vr,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(s=0;s<n;++s)if(r[vr[s]]){if(t)return!1;parseFloat(r[vr[s]])!==me(r[vr[s]])&&(t=!0)}return!0}function wf(){return this._isValid}function kf(){return at(NaN)}function Cs(r){var e=Tn(r),t=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=yf(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+t*12,this._data={},this._locale=St(),this._bubble()}function Zr(r){return r instanceof Cs}function sn(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function $f(r,e,t){var s=Math.min(r.length,e.length),n=Math.abs(r.length-e.length),i=0,o;for(o=0;o<s;o++)me(r[o])!==me(e[o])&&i++;return i+n}function Ta(r,e){ne(r,0,0,function(){var t=this.utcOffset(),s="+";return t<0&&(t=-t,s="-"),s+dt(~~(t/60),2)+e+dt(~~t%60,2)})}Ta("Z",":");Ta("ZZ","");Q("Z",Ts);Q("ZZ",Ts);Me(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=Nn(Ts,r)});var Sf=/([\+\-]|\d\d)/gi;function Nn(r,e){var t=(e||"").match(r),s,n,i;return t===null?null:(s=t[t.length-1]||[],n=(s+"").match(Sf)||["-",0,0],i=+(n[1]*60)+me(n[2]),i===0?0:n[0]==="+"?i:-i)}function Un(r,e){var t,s;return e._isUTC?(t=e.clone(),s=(ot(r)||Lr(r)?r.valueOf():Re(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+s),W.updateOffset(t,!1),t):Re(r).local()}function nn(r){return-Math.round(r._d.getTimezoneOffset())}W.updateOffset=function(){};function Of(r,e,t){var s=this._offset||0,n;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=Nn(Ts,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(n=nn(this)),this._offset=r,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==r&&(!e||this._changeInProgress?Ca(this,at(r-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,W.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:nn(this)}function Tf(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function Df(r){return this.utcOffset(0,r)}function Mf(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(nn(this),"m")),this}function Cf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=Nn(zu,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function Pf(r){return this.isValid()?(r=r?Re(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function Ef(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rf(){if(!ze(this._isDSTShifted))return this._isDSTShifted;var r={},e;return $n(r,this),r=$a(r),r._a?(e=r._isUTC?ft(r._a):Re(r._a),this._isDSTShifted=this.isValid()&&$f(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function jf(){return this.isValid()?!this._isUTC:!1}function Af(){return this.isValid()?this._isUTC:!1}function Da(){return this.isValid()?this._isUTC&&this._offset===0:!1}var If=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function at(r,e){var t=r,s=null,n,i,o;return Zr(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:$t(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(s=If.exec(r))?(n=s[1]==="-"?-1:1,t={y:0,d:me(s[lt])*n,h:me(s[Ne])*n,m:me(s[nt])*n,s:me(s[yt])*n,ms:me(sn(s[Ut]*1e3))*n}):(s=Lf.exec(r))?(n=s[1]==="-"?-1:1,t={y:Lt(s[2],n),M:Lt(s[3],n),w:Lt(s[4],n),d:Lt(s[5],n),h:Lt(s[6],n),m:Lt(s[7],n),s:Lt(s[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=Yf(Re(t.from),Re(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Cs(t),Zr(r)&&ke(r,"_locale")&&(i._locale=r._locale),Zr(r)&&ke(r,"_isValid")&&(i._isValid=r._isValid),i}at.fn=Cs.prototype;at.invalid=kf;function Lt(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function Ti(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function Yf(r,e){var t;return r.isValid()&&e.isValid()?(e=Un(e,r),r.isBefore(e)?t=Ti(r,e):(t=Ti(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Ma(r,e){return function(t,s){var n,i;return s!==null&&!isNaN(+s)&&(sa(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=s,s=i),n=at(t,s),Ca(this,n,r),this}}function Ca(r,e,t,s){var n=e._milliseconds,i=sn(e._days),o=sn(e._months);r.isValid()&&(s=s??!0,o&&ha(r,Cr(r,"Month")+o*t),i&&ua(r,"Date",Cr(r,"Date")+i*t),n&&r._d.setTime(r._d.valueOf()+n*t),s&&W.updateOffset(r,i||o))}var Nf=Ma(1,"add"),Uf=Ma(-1,"subtract");function Pa(r){return typeof r=="string"||r instanceof String}function Ff(r){return ot(r)||Lr(r)||Pa(r)||$t(r)||Hf(r)||xf(r)||r===null||r===void 0}function xf(r){var e=Ft(r)&&!wn(r),t=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],t=t||ke(r,i);return e&&t}function Hf(r){var e=it(r),t=!1;return e&&(t=r.filter(function(s){return!$t(s)&&Pa(r)}).length===0),e&&t}function Wf(r){var e=Ft(r)&&!wn(r),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],t=t||ke(r,i);return e&&t}function Bf(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function qf(r,e){arguments.length===1&&(arguments[0]?Ff(arguments[0])?(r=arguments[0],e=void 0):Wf(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||Re(),s=Un(t,this).startOf("day"),n=W.calendarFormat(this,s)||"sameElse",i=e&&(ht(e[n])?e[n].call(this,t):e[n]);return this.format(i||this.localeData().calendar(n,this,Re(t)))}function Vf(){return new Yr(this)}function zf(r,e){var t=ot(r)?r:Re(r);return this.isValid()&&t.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Gf(r,e){var t=ot(r)?r:Re(r);return this.isValid()&&t.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Jf(r,e,t,s){var n=ot(r)?r:Re(r),i=ot(e)?e:Re(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(s[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function Kf(r,e){var t=ot(r)?r:Re(r),s;return this.isValid()&&t.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(s=t.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function Zf(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function Qf(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function Xf(r,e,t){var s,n,i;if(!this.isValid())return NaN;if(s=Un(r,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=tt(e),e){case"year":i=Qr(this,s)/12;break;case"month":i=Qr(this,s);break;case"quarter":i=Qr(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return t?i:Qe(i)}function Qr(r,e){if(r.date()<e.date())return-Qr(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),s=r.clone().add(t,"months"),n,i;return e-s<0?(n=r.clone().add(t-1,"months"),i=(e-s)/(s-n)):(n=r.clone().add(t+1,"months"),i=(e-s)/(n-s)),-(t+i)||0}W.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";W.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function eh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function th(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Kr(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ht(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Kr(t,"Z")):Kr(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function rh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,s,n,i;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+s+n+i)}function sh(r){r||(r=this.isUtc()?W.defaultFormatUtc:W.defaultFormat);var e=Kr(this,r);return this.localeData().postformat(e)}function nh(r,e){return this.isValid()&&(ot(r)&&r.isValid()||Re(r).isValid())?at({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ih(r){return this.from(Re(),r)}function oh(r,e){return this.isValid()&&(ot(r)&&r.isValid()||Re(r).isValid())?at({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ah(r){return this.to(Re(),r)}function Ea(r){var e;return r===void 0?this._locale._abbr:(e=St(r),e!=null&&(this._locale=e),this)}var Ra=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function ja(){return this._locale}var ls=1e3,nr=60*ls,cs=60*nr,Aa=(365*400+97)*24*cs;function ir(r,e){return(r%e+e)%e}function Ia(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-Aa:new Date(r,e,t).valueOf()}function La(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-Aa:Date.UTC(r,e,t)}function lh(r){var e,t;if(r=tt(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?La:Ia,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ir(e+(this._isUTC?0:this.utcOffset()*nr),cs);break;case"minute":e=this._d.valueOf(),e-=ir(e,nr);break;case"second":e=this._d.valueOf(),e-=ir(e,ls);break}return this._d.setTime(e),W.updateOffset(this,!0),this}function ch(r){var e,t;if(r=tt(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?La:Ia,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cs-ir(e+(this._isUTC?0:this.utcOffset()*nr),cs)-1;break;case"minute":e=this._d.valueOf(),e+=nr-ir(e,nr)-1;break;case"second":e=this._d.valueOf(),e+=ls-ir(e,ls)-1;break}return this._d.setTime(e),W.updateOffset(this,!0),this}function uh(){return this._d.valueOf()-(this._offset||0)*6e4}function dh(){return Math.floor(this.valueOf()/1e3)}function fh(){return new Date(this.valueOf())}function hh(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function mh(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function _h(){return this.isValid()?this.toISOString():null}function ph(){return kn(this)}function gh(){return Ct({},de(this))}function bh(){return de(this).overflow}function vh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ne("N",0,0,"eraAbbr");ne("NN",0,0,"eraAbbr");ne("NNN",0,0,"eraAbbr");ne("NNNN",0,0,"eraName");ne("NNNNN",0,0,"eraNarrow");ne("y",["y",1],"yo","eraYear");ne("y",["yy",2],0,"eraYear");ne("y",["yyy",3],0,"eraYear");ne("y",["yyyy",4],0,"eraYear");Q("N",Fn);Q("NN",Fn);Q("NNN",Fn);Q("NNNN",Ph);Q("NNNNN",Eh);Me(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,s){var n=t._locale.erasParse(r,s,t._strict);n?de(t).era=n:de(t).invalidEra=r});Q("y",hr);Q("yy",hr);Q("yyy",hr);Q("yyyy",hr);Q("yo",Rh);Me(["y","yy","yyy","yyyy"],He);Me(["yo"],function(r,e,t,s){var n;t._locale._eraYearOrdinalRegex&&(n=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[He]=t._locale.eraYearOrdinalParse(r,n):e[He]=parseInt(r,10)});function yh(r,e){var t,s,n,i=this._eras||St("en")._eras;for(t=0,s=i.length;t<s;++t){switch(typeof i[t].since){case"string":n=W(i[t].since).startOf("day"),i[t].since=n.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":n=W(i[t].until).startOf("day").valueOf(),i[t].until=n.valueOf();break}}return i}function wh(r,e,t){var s,n,i=this.eras(),o,l,a;for(r=r.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===r)return i[s];break;case"NNNN":if(o===r)return i[s];break;case"NNNNN":if(a===r)return i[s];break}else if([o,l,a].indexOf(r)>=0)return i[s]}function kh(r,e){var t=r.since<=r.until?1:-1;return e===void 0?W(r.since).year():W(r.since).year()+(e-r.offset)*t}function $h(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].name;return""}function Sh(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].narrow;return""}function Oh(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].abbr;return""}function Th(){var r,e,t,s,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=n[r].since<=n[r].until?1:-1,s=this.clone().startOf("day").valueOf(),n[r].since<=s&&s<=n[r].until||n[r].until<=s&&s<=n[r].since)return(this.year()-W(n[r].since).year())*t+n[r].offset;return this.year()}function Dh(r){return ke(this,"_erasNameRegex")||xn.call(this),r?this._erasNameRegex:this._erasRegex}function Mh(r){return ke(this,"_erasAbbrRegex")||xn.call(this),r?this._erasAbbrRegex:this._erasRegex}function Ch(r){return ke(this,"_erasNarrowRegex")||xn.call(this),r?this._erasNarrowRegex:this._erasRegex}function Fn(r,e){return e.erasAbbrRegex(r)}function Ph(r,e){return e.erasNameRegex(r)}function Eh(r,e){return e.erasNarrowRegex(r)}function Rh(r,e){return e._eraYearOrdinalRegex||hr}function xn(){var r=[],e=[],t=[],s=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=wt(c[n].name),l=wt(c[n].abbr),a=wt(c[n].narrow),e.push(o),r.push(l),t.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ne(0,["gg",2],0,function(){return this.weekYear()%100});ne(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ps(r,e){ne(0,[r,r.length],0,e)}Ps("gggg","weekYear");Ps("ggggg","weekYear");Ps("GGGG","isoWeekYear");Ps("GGGGG","isoWeekYear");Q("G",Os);Q("g",Os);Q("GG",je,Je);Q("gg",je,Je);Q("GGGG",Mn,Dn);Q("gggg",Mn,Dn);Q("GGGGG",Ss,ks);Q("ggggg",Ss,ks);Ur(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,s){e[s.substr(0,2)]=me(r)});Ur(["gg","GG"],function(r,e,t,s){e[s]=W.parseTwoDigitYear(r)});function jh(r){return Ya.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ah(r){return Ya.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function Ih(){return kt(this.year(),1,4)}function Lh(){return kt(this.isoWeekYear(),1,4)}function Yh(){var r=this.localeData()._week;return kt(this.year(),r.dow,r.doy)}function Nh(){var r=this.localeData()._week;return kt(this.weekYear(),r.dow,r.doy)}function Ya(r,e,t,s,n){var i;return r==null?Er(this,s,n).year:(i=kt(r,s,n),e>i&&(e=i),Uh.call(this,r,e,t,s,n))}function Uh(r,e,t,s,n){var i=pa(r,e,t,s,n),o=Pr(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ne("Q",0,"Qo","quarter");Q("Q",ia);Me("Q",function(r,e){e[vt]=(me(r)-1)*3});function Fh(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}ne("D",["DD",2],"Do","date");Q("D",je,mr);Q("DD",je,Je);Q("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Me(["D","DD"],lt);Me("Do",function(r,e){e[lt]=me(r.match(je)[0])});var Na=_r("Date",!0);ne("DDD",["DDDD",3],"DDDo","dayOfYear");Q("DDD",$s);Q("DDDD",oa);Me(["DDD","DDDD"],function(r,e,t){t._dayOfYear=me(r)});function xh(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}ne("m",["mm",2],0,"minute");Q("m",je,Cn);Q("mm",je,Je);Me(["m","mm"],nt);var Hh=_r("Minutes",!1);ne("s",["ss",2],0,"second");Q("s",je,Cn);Q("ss",je,Je);Me(["s","ss"],yt);var Wh=_r("Seconds",!1);ne("S",0,0,function(){return~~(this.millisecond()/100)});ne(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ne(0,["SSS",3],0,"millisecond");ne(0,["SSSS",4],0,function(){return this.millisecond()*10});ne(0,["SSSSS",5],0,function(){return this.millisecond()*100});ne(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ne(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ne(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ne(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Q("S",$s,ia);Q("SS",$s,Je);Q("SSS",$s,oa);var Pt,Ua;for(Pt="SSSS";Pt.length<=9;Pt+="S")Q(Pt,hr);function Bh(r,e){e[Ut]=me(("0."+r)*1e3)}for(Pt="S";Pt.length<=9;Pt+="S")Me(Pt,Bh);Ua=_r("Milliseconds",!1);ne("z",0,0,"zoneAbbr");ne("zz",0,0,"zoneName");function qh(){return this._isUTC?"UTC":""}function Vh(){return this._isUTC?"Coordinated Universal Time":""}var V=Yr.prototype;V.add=Nf;V.calendar=qf;V.clone=Vf;V.diff=Xf;V.endOf=ch;V.format=sh;V.from=nh;V.fromNow=ih;V.to=oh;V.toNow=ah;V.get=td;V.invalidAt=bh;V.isAfter=zf;V.isBefore=Gf;V.isBetween=Jf;V.isSame=Kf;V.isSameOrAfter=Zf;V.isSameOrBefore=Qf;V.isValid=ph;V.lang=Ra;V.locale=Ea;V.localeData=ja;V.max=pf;V.min=_f;V.parsingFlags=gh;V.set=rd;V.startOf=lh;V.subtract=Uf;V.toArray=hh;V.toObject=mh;V.toDate=fh;V.toISOString=th;V.inspect=rh;typeof Symbol<"u"&&Symbol.for!=null&&(V[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});V.toJSON=_h;V.toString=eh;V.unix=dh;V.valueOf=uh;V.creationData=vh;V.eraName=$h;V.eraNarrow=Sh;V.eraAbbr=Oh;V.eraYear=Th;V.year=ca;V.isLeapYear=ed;V.weekYear=jh;V.isoWeekYear=Ah;V.quarter=V.quarters=Fh;V.month=ma;V.daysInMonth=dd;V.week=V.weeks=vd;V.isoWeek=V.isoWeeks=yd;V.weeksInYear=Yh;V.weeksInWeekYear=Nh;V.isoWeeksInYear=Ih;V.isoWeeksInISOWeekYear=Lh;V.date=Na;V.day=V.days=jd;V.weekday=Ad;V.isoWeekday=Id;V.dayOfYear=xh;V.hour=V.hours=Hd;V.minute=V.minutes=Hh;V.second=V.seconds=Wh;V.millisecond=V.milliseconds=Ua;V.utcOffset=Of;V.utc=Df;V.local=Mf;V.parseZone=Cf;V.hasAlignedHourOffset=Pf;V.isDST=Ef;V.isLocal=jf;V.isUtcOffset=Af;V.isUtc=Da;V.isUTC=Da;V.zoneAbbr=qh;V.zoneName=Vh;V.dates=et("dates accessor is deprecated. Use date instead.",Na);V.months=et("months accessor is deprecated. Use month instead",ma);V.years=et("years accessor is deprecated. Use year instead",ca);V.zone=et("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Tf);V.isDSTShifted=et("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rf);function zh(r){return Re(r*1e3)}function Gh(){return Re.apply(null,arguments).parseZone()}function Fa(r){return r}var $e=Sn.prototype;$e.calendar=Ru;$e.longDateFormat=Lu;$e.invalidDate=Nu;$e.ordinal=xu;$e.preparse=Fa;$e.postformat=Fa;$e.relativeTime=Wu;$e.pastFuture=Bu;$e.set=Pu;$e.eras=yh;$e.erasParse=wh;$e.erasConvertYear=kh;$e.erasAbbrRegex=Mh;$e.erasNameRegex=Dh;$e.erasNarrowRegex=Ch;$e.months=ad;$e.monthsShort=ld;$e.monthsParse=ud;$e.monthsRegex=hd;$e.monthsShortRegex=fd;$e.week=_d;$e.firstDayOfYear=bd;$e.firstDayOfWeek=gd;$e.weekdays=Md;$e.weekdaysMin=Pd;$e.weekdaysShort=Cd;$e.weekdaysParse=Rd;$e.weekdaysRegex=Ld;$e.weekdaysShortRegex=Yd;$e.weekdaysMinRegex=Nd;$e.isPM=Fd;$e.meridiem=Wd;function us(r,e,t,s){var n=St(),i=ft().set(s,e);return n[t](i,r)}function xa(r,e,t){if($t(r)&&(e=r,r=void 0),r=r||"",e!=null)return us(r,e,t,"month");var s,n=[];for(s=0;s<12;s++)n[s]=us(r,s,t,"month");return n}function Hn(r,e,t,s){typeof r=="boolean"?($t(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,$t(e)&&(t=e,e=void 0),e=e||"");var n=St(),i=r?n._week.dow:0,o,l=[];if(t!=null)return us(e,(t+i)%7,s,"day");for(o=0;o<7;o++)l[o]=us(e,(o+i)%7,s,"day");return l}function Jh(r,e){return xa(r,e,"months")}function Kh(r,e){return xa(r,e,"monthsShort")}function Zh(r,e,t){return Hn(r,e,t,"weekdays")}function Qh(r,e,t){return Hn(r,e,t,"weekdaysShort")}function Xh(r,e,t){return Hn(r,e,t,"weekdaysMin")}Et("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=me(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}});W.lang=et("moment.lang is deprecated. Use moment.locale instead.",Et);W.langData=et("moment.langData is deprecated. Use moment.localeData instead.",St);var mt=Math.abs;function em(){var r=this._data;return this._milliseconds=mt(this._milliseconds),this._days=mt(this._days),this._months=mt(this._months),r.milliseconds=mt(r.milliseconds),r.seconds=mt(r.seconds),r.minutes=mt(r.minutes),r.hours=mt(r.hours),r.months=mt(r.months),r.years=mt(r.years),this}function Ha(r,e,t,s){var n=at(e,t);return r._milliseconds+=s*n._milliseconds,r._days+=s*n._days,r._months+=s*n._months,r._bubble()}function tm(r,e){return Ha(this,r,e,1)}function rm(r,e){return Ha(this,r,e,-1)}function Di(r){return r<0?Math.floor(r):Math.ceil(r)}function sm(){var r=this._milliseconds,e=this._days,t=this._months,s=this._data,n,i,o,l,a;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=Di(on(t)+e)*864e5,e=0,t=0),s.milliseconds=r%1e3,n=Qe(r/1e3),s.seconds=n%60,i=Qe(n/60),s.minutes=i%60,o=Qe(i/60),s.hours=o%24,e+=Qe(o/24),a=Qe(Wa(e)),t+=a,e-=Di(on(a)),l=Qe(t/12),t%=12,s.days=e,s.months=t,s.years=l,this}function Wa(r){return r*4800/146097}function on(r){return r*146097/4800}function nm(r){if(!this.isValid())return NaN;var e,t,s=this._milliseconds;if(r=tt(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+s/864e5,t=this._months+Wa(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(on(this._months)),r){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+r)}}function Ot(r){return function(){return this.as(r)}}var Ba=Ot("ms"),im=Ot("s"),om=Ot("m"),am=Ot("h"),lm=Ot("d"),cm=Ot("w"),um=Ot("M"),dm=Ot("Q"),fm=Ot("y"),hm=Ba;function mm(){return at(this)}function _m(r){return r=tt(r),this.isValid()?this[r+"s"]():NaN}function Ht(r){return function(){return this.isValid()?this._data[r]:NaN}}var pm=Ht("milliseconds"),gm=Ht("seconds"),bm=Ht("minutes"),vm=Ht("hours"),ym=Ht("days"),wm=Ht("months"),km=Ht("years");function $m(){return Qe(this.days()/7)}var _t=Math.round,Qt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Sm(r,e,t,s,n){return n.relativeTime(e||1,!!t,r,s)}function Om(r,e,t,s){var n=at(r).abs(),i=_t(n.as("s")),o=_t(n.as("m")),l=_t(n.as("h")),a=_t(n.as("d")),c=_t(n.as("M")),u=_t(n.as("w")),m=_t(n.as("y")),_=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(_=_||u<=1&&["w"]||u<t.w&&["ww",u]),_=_||c<=1&&["M"]||c<t.M&&["MM",c]||m<=1&&["y"]||["yy",m],_[2]=e,_[3]=+r>0,_[4]=s,Sm.apply(null,_)}function Tm(r){return r===void 0?_t:typeof r=="function"?(_t=r,!0):!1}function Dm(r,e){return Qt[r]===void 0?!1:e===void 0?Qt[r]:(Qt[r]=e,r==="s"&&(Qt.ss=e-1),!0)}function Mm(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,s=Qt,n,i;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(s=Object.assign({},Qt,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=Om(this,!t,s,n),t&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Ws=Math.abs;function Gt(r){return(r>0)-(r<0)||+r}function Es(){if(!this.isValid())return this.localeData().invalidDate();var r=Ws(this._milliseconds)/1e3,e=Ws(this._days),t=Ws(this._months),s,n,i,o,l=this.asSeconds(),a,c,u,m;return l?(s=Qe(r/60),n=Qe(s/60),r%=60,s%=60,i=Qe(t/12),t%=12,o=r?r.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=Gt(this._months)!==Gt(l)?"-":"",u=Gt(this._days)!==Gt(l)?"-":"",m=Gt(this._milliseconds)!==Gt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(n||s||r?"T":"")+(n?m+n+"H":"")+(s?m+s+"M":"")+(r?m+o+"S":"")):"P0D"}var ve=Cs.prototype;ve.isValid=wf;ve.abs=em;ve.add=tm;ve.subtract=rm;ve.as=nm;ve.asMilliseconds=Ba;ve.asSeconds=im;ve.asMinutes=om;ve.asHours=am;ve.asDays=lm;ve.asWeeks=cm;ve.asMonths=um;ve.asQuarters=dm;ve.asYears=fm;ve.valueOf=hm;ve._bubble=sm;ve.clone=mm;ve.get=_m;ve.milliseconds=pm;ve.seconds=gm;ve.minutes=bm;ve.hours=vm;ve.days=ym;ve.weeks=$m;ve.months=wm;ve.years=km;ve.humanize=Mm;ve.toISOString=Es;ve.toString=Es;ve.toJSON=Es;ve.locale=Ea;ve.localeData=ja;ve.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Es);ve.lang=Ra;ne("X",0,0,"unix");ne("x",0,0,"valueOf");Q("x",Os);Q("X",Gu);Me("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)});Me("x",function(r,e,t){t._d=new Date(me(r))});//! moment.js
W.version="2.30.1";Mu(Re);W.fn=V;W.min=gf;W.max=bf;W.now=vf;W.utc=ft;W.unix=zh;W.months=Jh;W.isDate=Lr;W.locale=Et;W.invalid=ws;W.duration=at;W.isMoment=ot;W.weekdays=Zh;W.parseZone=Gh;W.localeData=St;W.isDuration=Zr;W.monthsShort=Kh;W.weekdaysMin=Xh;W.defineLocale=An;W.updateLocale=zd;W.locales=Gd;W.weekdaysShort=Qh;W.normalizeUnits=tt;W.relativeTimeRounding=Tm;W.relativeTimeThreshold=Dm;W.calendarFormat=Bf;W.prototype=V;W.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Mi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function Ci(r,e,t){const s=r.slice();return s[13]=e[t][0],s[17]=e[t][1],s}function Pi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[20]=e[t][1],s}function Ei(r,e,t){const s=r.slice();return s[13]=e[t][0],s[23]=e[t][1],s}function Cm(r){let e,t;return e=new ys({props:{message:r[7]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&128&&(i.message=s[7]),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Pm(r){let e,t;return e=new ut({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[Em]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Ri(r){let e,t;return e=new Du({props:{id:r[23].book_id,title:r[23].title,label:r[23].status=="Borrowed"?`Due: ${W(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:r[23].status=="Borrowed"?"danger":"secondary"}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&8&&(i.id=s[23].book_id),n&8&&(i.title=s[23].title),n&8&&(i.label=s[23].status=="Borrowed"?`Due: ${W(s[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),n&8&&(i.color=s[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Em(r){let e,t,s=Se(Object.entries(r[3])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ri(Ei(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-center justify-content-md-start")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&8){s=Se(Object.entries(o[3]));let a;for(a=0;a<s.length;a+=1){const c=Ei(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ri(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function Rm(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function jm(r){let e,t;return e=new ys({props:{message:r[4]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Am(r){let e,t,s=Se(Object.entries(r[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ji(Pi(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&1){s=Se(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const c=Pi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ji(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function ji(r){let e,t;return e=new vs({props:{title:r[20].title,id:r[20].book_id,author:r[20].author}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&1&&(i.title=s[20].title),n&1&&(i.id=s[20].book_id),n&1&&(i.author=s[20].author),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Im(r){let e,t,s,n;const i=[Am,jm,Rm],o=[];function l(a,c){return a[0]?0:a[4]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function Lm(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Ym(r){let e,t;return e=new ys({props:{message:r[5]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Nm(r){let e,t,s=Se(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ai(Ci(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Se(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Ci(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ai(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function Ai(r){let e,t;return e=new Qo({props:{id:r[17].author_id,name:r[17].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.id=s[17].author_id),n&2&&(i.name=s[17].name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Um(r){let e,t,s,n;const i=[Nm,Ym,Lm],o=[];function l(a,c){return a[1]?0:a[5]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function Fm(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function xm(r){let e,t;return e=new ys({props:{message:r[6]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&64&&(i.message=s[6]),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Hm(r){let e,t,s=Se(Object.entries(r[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ii(Mi(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const c=Mi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ii(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function Ii(r){let e,t;return e=new Xo({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Wm(r){let e,t,s,n;const i=[Hm,xm,Fm],o=[];function l(a,c){return a[2]?0:a[6]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function Bm(r){let e,t,s,n,i,o,l,a,c,u,m,_,g;t=new fu({});const p=[Pm,Cm],v=[];function w(b,k){return b[3]&&b[3].length!=0?0:b[7]?1:-1}return~(n=w(r))&&(i=v[n]=p[n](r)),l=new ut({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Im]},$$scope:{ctx:r}}}),c=new ut({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Um]},$$scope:{ctx:r}}}),m=new ut({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Wm]},$$scope:{ctx:r}}}),{c(){e=h("main"),N(t.$$.fragment),s=y(),i&&i.c(),o=y(),N(l.$$.fragment),a=y(),N(c.$$.fragment),u=y(),N(m.$$.fragment),f(e,"class","container mb-5")},m(b,k){E(b,e,k),L(t,e,null),d(e,s),~n&&v[n].m(e,null),d(e,o),L(l,e,null),d(e,a),L(c,e,null),d(e,u),L(m,e,null),g=!0},p(b,[k]){let $=n;n=w(b),n===$?~n&&v[n].p(b,k):(i&&(Oe(),M(v[$],1,1,()=>{v[$]=null}),Te()),~n?(i=v[n],i?i.p(b,k):(i=v[n]=p[n](b),i.c()),O(i,1),i.m(e,o)):i=null);const C={};k&67108881&&(C.$$scope={dirty:k,ctx:b}),l.$set(C);const S={};k&67108898&&(S.$$scope={dirty:k,ctx:b}),c.$set(S);const T={};k&67108932&&(T.$$scope={dirty:k,ctx:b}),m.$set(T)},i(b){g||(O(t.$$.fragment,b),O(i),O(l.$$.fragment,b),O(c.$$.fragment,b),O(m.$$.fragment,b),b&&(_||Ee(()=>{_=Ue(e,Fe,{duration:500}),_.start()})),g=!0)},o(b){M(t.$$.fragment,b),M(i),M(l.$$.fragment,b),M(c.$$.fragment,b),M(m.$$.fragment,b),g=!1},d(b){b&&P(e),Y(t),~n&&v[n].d(),Y(l),Y(c),Y(m)}}}function qm(r,e,t){const s=localStorage.getItem("user_id")||"";let n,i,o,l,a,c,u,m;async function _(){const{data:w,error:b}=await ae.rpc("get_books");t(0,n=w),t(4,a=b?b.message:"")}async function g(){const{data:w,error:b}=await ae.rpc("get_authors");t(1,i=w),t(5,c=b?b.message:"")}async function p(){const{data:w,error:b}=await ae.rpc("get_publishers");t(2,o=w),t(6,u=b||"")}async function v(){const{data:w,error:b}=await ae.rpc("get_inventory",{loggedid:s});t(3,l=w),console.log(l),t(7,m=b||"")}return _(),g(),p(),v(),[n,i,o,l,a,c,u,m]}class Vm extends be{constructor(e){super(),ge(this,e,qm,Bm,pe,{})}}function zm(r){let e,t,s,n,i,o,l,a;return{c(){e=h("div"),t=h("button"),t.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=y(),n=h("div"),i=h("h4"),o=se(r[0]),f(t,"class","btn"),pt(t,"font-size","1.5em"),f(i,"class","my-auto"),f(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){E(c,e,u),d(e,t),d(e,s),d(e,n),d(n,i),d(i,o),l||(a=G(t,"click",r[1]),l=!0)},p(c,[u]){u&1&&le(o,c[0])},i:U,o:U,d(c){c&&P(e),l=!1,a()}}}function Gm(r,e,t){let{text:s}=e;const n=()=>bl();return r.$$set=i=>{"text"in i&&t(0,s=i.text)},[s,n]}class Ke extends be{constructor(e){super(),ge(this,e,Gm,zm,pe,{text:0})}}function Jm(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C;const S=r[5].default,T=ds(S,r,r[4],null);return{c(){e=h("div"),t=h("div"),s=h("div"),n=h("div"),i=h("h1"),o=se(r[0]),l=y(),a=h("button"),c=y(),u=h("div"),T&&T.c(),m=y(),_=h("div"),g=h("button"),p=se(r[3]),v=y(),w=h("button"),b=se(r[2]),f(i,"class","modal-title fs-5"),f(i,"id","exampleModalLabel"),f(a,"type","button"),f(a,"class","btn-close"),f(a,"data-bs-dismiss","modal"),f(a,"aria-label","Close"),f(n,"class","modal-header"),f(u,"class","modal-body"),f(g,"type","button"),f(g,"class","btn btn-secondary"),f(g,"data-bs-dismiss","modal"),f(w,"type","button"),f(w,"class","btn btn-primary"),f(w,"data-bs-dismiss","modal"),f(_,"class","modal-footer"),f(s,"class","modal-content"),f(t,"class","modal-dialog"),f(e,"class","modal fade"),f(e,"id",r[1]),f(e,"tabindex","-1"),f(e,"aria-hidden","true")},m(j,A){E(j,e,A),d(e,t),d(t,s),d(s,n),d(n,i),d(i,o),d(n,l),d(n,a),d(s,c),d(s,u),T&&T.m(u,null),d(s,m),d(s,_),d(_,g),d(g,p),d(_,v),d(_,w),d(w,b),k=!0,$||(C=G(w,"click",r[6]),$=!0)},p(j,[A]){(!k||A&1)&&le(o,j[0]),T&&T.p&&(!k||A&16)&&hs(T,S,j,j[4],k?fs(S,j[4],A,null):ms(j[4]),null),(!k||A&8)&&le(p,j[3]),(!k||A&4)&&le(b,j[2]),(!k||A&2)&&f(e,"id",j[1])},i(j){k||(O(T,j),k=!0)},o(j){M(T,j),k=!1},d(j){j&&P(e),T&&T.d(j),$=!1,C()}}}function Km(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function c(u){ss.call(this,r,u)}return r.$$set=u=>{"title"in u&&t(0,i=u.title),"id"in u&&t(1,o=u.id),"pButton"in u&&t(2,l=u.pButton),"sButton"in u&&t(3,a=u.sButton),"$$scope"in u&&t(4,n=u.$$scope)},[i,o,l,a,n,s,c]}class Zm extends be{constructor(e){super(),ge(this,e,Km,Jm,pe,{title:0,id:1,pButton:2,sButton:3})}}function Qm(r){let e,t,s;return{c(){e=h("div"),t=h("div"),t.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',f(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),pt(t,"height","70vh"),f(e,"class","position-absolute top-50 start-50 translate-middle z-2"),pt(e,"background-color","var(--bs-body-bg)"),pt(e,"width","100vw"),pt(e,"height","100vh")},m(n,i){E(n,e,i),d(e,t)},p:U,i(n){n&&(s||Ee(()=>{s=Ue(t,Fe,{duration:500}),s.start()}))},o:U,d(n){n&&P(e)}}}class Wn extends be{constructor(e){super(),ge(this,e,null,Qm,pe,{})}}function Li(r,e,t){const s=r.slice();return s[27]=e[t][0],s[28]=e[t][1],s}function Yi(r,e,t){const s=r.slice();return s[27]=e[t][0],s[31]=e[t][1],s}function Ni(r){let e,t;return e=new Wn({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Xm(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function e_(r){let e,t,s,n,i,o,l,a=r[3].isbn+"",c,u,m,_,g,p=r[3].title+"",v,w,b,k=r[3].description+"",$,C,S,T,j,A,F=r[3].author.name+"",Z,H,K,B,R,I,D,z=r[3].publisher.name+"",te,x,q,X,ye,oe,re,fe,Le,Ce,ee=r[3].shelf_number+"",ue,we=r[1]=="client"&&Ui(r),ce=r[4]&&Fi(r);return{c(){e=h("div"),t=h("div"),s=h("img"),i=y(),o=h("small"),l=se("ISBN: "),c=se(a),u=y(),we&&we.c(),m=y(),_=h("div"),g=h("h1"),v=se(p),w=y(),b=h("p"),$=se(k),C=y(),S=h("p"),T=h("b"),T.textContent="Author:",j=y(),A=h("a"),Z=se(F),K=y(),B=h("p"),R=h("b"),R.textContent="Publisher:",I=y(),D=h("a"),te=se(z),q=y(),X=h("p"),ye=h("b"),ye.textContent="Category:",oe=y(),ce&&ce.c(),re=y(),fe=h("p"),Le=h("b"),Le.textContent="Shelf No.:",Ce=y(),ue=se(ee),f(s,"id","img-cover"),f(s,"class","border p-3"),Xe(s.src,n=r[14])||f(s,"src",n),f(s,"alt","book cover"),f(s,"height","300"),f(s,"width","300"),pt(s,"object-fit","contain"),f(o,"class","text-secondary"),f(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),f(g,"id","book-title"),f(g,"class","mb-2 pb-2"),f(b,"id","book-description"),f(A,"href",H="./#/author/"+r[3].author.author_id),f(D,"href",x="./#/publisher/"+r[3].publisher.publisher_id),f(_,"id","details-container"),f(_,"class","container mt-md-0 mt-3"),f(e,"class","d-md-flex d-block")},m(ie,Be){E(ie,e,Be),d(e,t),d(t,s),d(t,i),d(t,o),d(o,l),d(o,c),d(t,u),we&&we.m(t,null),d(e,m),d(e,_),d(_,g),d(g,v),d(_,w),d(_,b),d(b,$),d(_,C),d(_,S),d(S,T),d(S,j),d(S,A),d(A,Z),d(_,K),d(_,B),d(B,R),d(B,I),d(B,D),d(D,te),d(_,q),d(_,X),d(X,ye),d(X,oe),ce&&ce.m(X,null),d(_,re),d(_,fe),d(fe,Le),d(fe,Ce),d(fe,ue)},p(ie,Be){Be[0]&8&&a!==(a=ie[3].isbn+"")&&le(c,a),ie[1]=="client"?we?we.p(ie,Be):(we=Ui(ie),we.c(),we.m(t,null)):we&&(we.d(1),we=null),Be[0]&8&&p!==(p=ie[3].title+"")&&le(v,p),Be[0]&8&&k!==(k=ie[3].description+"")&&le($,k),Be[0]&8&&F!==(F=ie[3].author.name+"")&&le(Z,F),Be[0]&8&&H!==(H="./#/author/"+ie[3].author.author_id)&&f(A,"href",H),Be[0]&8&&z!==(z=ie[3].publisher.name+"")&&le(te,z),Be[0]&8&&x!==(x="./#/publisher/"+ie[3].publisher.publisher_id)&&f(D,"href",x),ie[4]?ce?ce.p(ie,Be):(ce=Fi(ie),ce.c(),ce.m(X,null)):ce&&(ce.d(1),ce=null),Be[0]&8&&ee!==(ee=ie[3].shelf_number+"")&&le(ue,ee)},i:U,o:U,d(ie){ie&&P(e),we&&we.d(),ce&&ce.d()}}}function Ui(r){let e;function t(i,o){return i[7]?n_:i[0]?s_:i[8]==0?r_:t_}let s=t(r),n=s(r);return{c(){n.c(),e=We()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function t_(r){let e,t,s;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,f(e,"class","btn btn-primary w-50")},m(n,i){E(n,e,i),t||(s=G(e,"click",r[12]),t=!0)},p:U,d(n){n&&P(e),t=!1,s()}}}function r_(r){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,f(e,"class","btn btn-secondary w-50")},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function s_(r){let e,t,s,n,i,o,l;return{c(){e=h("button"),t=h("i"),s=y(),n=se(r[10]),f(t,"class","bi bi-x-circle"),f(e,"class",i="btn "+r[9]+" w-75")},m(a,c){E(a,e,c),d(e,t),d(e,s),d(e,n),o||(l=[G(e,"mouseenter",r[16]),G(e,"mouseleave",r[17]),G(e,"click",r[13])],o=!0)},p(a,c){c[0]&1024&&le(n,a[10]),c[0]&512&&i!==(i="btn "+a[9]+" w-75")&&f(e,"class",i)},d(a){a&&P(e),o=!1,De(l)}}}function n_(r){let e,t,s,n;return{c(){e=h("button"),t=se("Borrowed (#"),s=se(r[7]),n=se(")"),f(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){E(i,e,o),d(e,t),d(e,s),d(e,n)},p(i,o){o[0]&128&&le(s,i[7])},d(i){i&&P(e)}}}function Fi(r){let e,t=Se(Object.entries(r[4])),s=[];for(let n=0;n<t.length;n+=1)s[n]=xi(Yi(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=We()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);E(n,e,i)},p(n,i){if(i[0]&16){t=Se(Object.entries(n[4]));let o;for(o=0;o<t.length;o+=1){const l=Yi(n,t,o);s[o]?s[o].p(l,i):(s[o]=xi(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&P(e),Ve(s,n)}}}function xi(r){let e,t=r[31].category.name+"",s,n;return{c(){e=h("a"),s=se(t),n=se(`\r
              `),f(e,"href","./#/")},m(i,o){E(i,e,o),d(e,s),E(i,n,o)},p(i,o){o[0]&16&&t!==(t=i[31].category.name+"")&&le(s,t)},d(i){i&&(P(e),P(n))}}}function Hi(r){let e,t;return e=new ut({props:{title:"Status",icon:"journal",$$slots:{default:[a_]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[0]&96|n[1]&8&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Wi(r){let e;function t(i,o){return i[6].length<=0?o_:i_}let s=t(r),n=s(r);return{c(){n.c(),e=We()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function i_(r){let e,t,s,n,i=Se(Object.entries(r[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Bi(Li(r,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=y(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();f(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){E(l,e,a),d(e,t),d(e,s),d(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a[0]&64){i=Se(Object.entries(l[6]));let c;for(c=0;c<i.length;c+=1){const u=Li(l,i,c);o[c]?o[c].p(u,a):(o[c]=Bi(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&P(e),Ve(o,l)}}}function o_(r){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",f(e,"class","text-center my-5")},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function Bi(r){let e,t,s=r[28].barcode+"",n,i,o,l=r[28].status!="Available"?`${r[28].fname} ${r[28].lname}`:"--",a,c,u,m=r[28].status+"",_,g,p=r[28].reservation_id?`(${r[28].reservation_id})`:r[28].borrow_id?`(${r[28].borrow_id})`:"",v,w,b,k,$,C,S=r[28].status=="Borrowed"?"Return":"Borrow",T,j,A,F,Z;return{c(){e=h("tr"),t=h("td"),n=se(s),i=y(),o=h("td"),a=se(l),c=y(),u=h("td"),_=se(m),g=y(),v=se(p),b=y(),k=h("td"),$=h("a"),C=h("small"),T=se(S),j=y(),A=h("i"),Z=y(),f(u,"class",w=r[28].status=="Available"?"text-bg-success":r[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),f(A,"class","bi bi-box-arrow-up-right"),f($,"href",F=r[28].status=="Available"?`./#/borrow?barcode=${r[28].barcode}`:r[28].status=="Reserved"?`./#/borrow?reserve_id=${r[28].reservation_id}`:`./#/return?borrow_id=${r[28].borrow_id}`),f($,"class","btn btn-outline-primary btn-sm")},m(H,K){E(H,e,K),d(e,t),d(t,n),d(e,i),d(e,o),d(o,a),d(e,c),d(e,u),d(u,_),d(u,g),d(u,v),d(e,b),d(e,k),d(k,$),d($,C),d(C,T),d(C,j),d(C,A),d(e,Z)},p(H,K){K[0]&64&&s!==(s=H[28].barcode+"")&&le(n,s),K[0]&64&&l!==(l=H[28].status!="Available"?`${H[28].fname} ${H[28].lname}`:"--")&&le(a,l),K[0]&64&&m!==(m=H[28].status+"")&&le(_,m),K[0]&64&&p!==(p=H[28].reservation_id?`(${H[28].reservation_id})`:H[28].borrow_id?`(${H[28].borrow_id})`:"")&&le(v,p),K[0]&64&&w!==(w=H[28].status=="Available"?"text-bg-success":H[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&f(u,"class",w),K[0]&64&&S!==(S=H[28].status=="Borrowed"?"Return":"Borrow")&&le(T,S),K[0]&64&&F!==(F=H[28].status=="Available"?`./#/borrow?barcode=${H[28].barcode}`:H[28].status=="Reserved"?`./#/borrow?reserve_id=${H[28].reservation_id}`:`./#/return?borrow_id=${H[28].borrow_id}`)&&f($,"href",F)},d(H){H&&P(e)}}}function a_(r){let e,t,s,n,i,o,l,a,c,u,m,_=r[6]&&Wi(r);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",s=y(),n=h("div"),i=h("input"),o=y(),l=h("button"),l.textContent="Add",a=y(),_&&_.c(),c=We(),f(t,"for","copy"),f(t,"class","form=control col-auto"),f(i,"type","text"),f(i,"class","form-control"),f(i,"id","copy"),f(i,"placeholder","Barcode Number"),f(n,"class","col-4"),f(l,"class","btn btn-primary col-2"),f(e,"class","row justify-content-center align-items-center my-3")},m(g,p){E(g,e,p),d(e,t),d(e,s),d(e,n),d(n,i),J(i,r[5]),d(e,o),d(e,l),E(g,a,p),_&&_.m(g,p),E(g,c,p),u||(m=[G(i,"input",r[18]),G(l,"click",r[11])],u=!0)},p(g,p){p[0]&32&&i.value!==g[5]&&J(i,g[5]),g[6]?_?_.p(g,p):(_=Wi(g),_.c(),_.m(c.parentNode,c)):_&&(_.d(1),_=null)},d(g){g&&(P(e),P(a),P(c)),_&&_.d(g),u=!1,De(m)}}}function l_(r){let e,t,s,n,i,o,l,a,c,u,m,_,g=r[2]&&Ni();n=new Ke({props:{text:"Book Details"}});const p=[e_,Xm],v=[];function w(k,$){return k[3]?0:1}o=w(r),l=v[o]=p[o](r);let b=r[1]=="staff"&&Hi(r);return{c(){e=h("main"),g&&g.c(),t=y(),s=h("section"),N(n.$$.fragment),i=y(),l.c(),a=y(),b&&b.c(),c=y(),u=h("div"),f(u,"class","my-5"),f(e,"class","container")},m(k,$){E(k,e,$),g&&g.m(e,null),d(e,t),d(e,s),L(n,s,null),d(s,i),v[o].m(s,null),d(e,a),b&&b.m(e,null),d(e,c),d(e,u),_=!0},p(k,$){k[2]?g?$[0]&4&&O(g,1):(g=Ni(),g.c(),O(g,1),g.m(e,t)):g&&(Oe(),M(g,1,1,()=>{g=null}),Te());let C=o;o=w(k),o===C?v[o].p(k,$):(Oe(),M(v[C],1,1,()=>{v[C]=null}),Te(),l=v[o],l?l.p(k,$):(l=v[o]=p[o](k),l.c()),O(l,1),l.m(s,null)),k[1]=="staff"?b?(b.p(k,$),$[0]&2&&O(b,1)):(b=Hi(k),b.c(),O(b,1),b.m(e,c)):b&&(Oe(),M(b,1,1,()=>{b=null}),Te())},i(k){_||(O(g),O(n.$$.fragment,k),O(l),O(b),k&&(m||Ee(()=>{m=Ue(e,Fe,{duration:500}),m.start()})),_=!0)},o(k){M(g),M(n.$$.fragment,k),M(l),M(b),_=!1},d(k){k&&P(e),g&&g.d(),Y(n),v[o].d(),b&&b.d()}}}function qi(){return 3e6+Math.floor(Math.random()*9e3)}function c_(r,e,t){let s,n;Rt.subscribe(R=>t(1,n=R));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,c,u;async function m(){const{data:R,error:I}=await ae.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(R[0]),t(3,c=R[0]),R.length==0&&t(2,a=!0);const{data:D,error:z}=await ae.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",D),z&&console.error(z),D.length==0?(t(4,u={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",u)):t(4,u=D)}Dr(m);let _;async function g(){const{data:R,error:I}=await ae.rpc("get_holdings",{bookid:l});I&&console.error(I),console.table(R),t(6,v=R)}async function p(){const{data:R}=await ae.from("library_holdings").select().eq("barcode",_);R.length==0&&await ae.from("library_holdings").insert({book_id:l,barcode:_})}let v;n=="staff"&&(g(),ae.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},g).subscribe());let w,b,k=0,$="btn-secondary";n=="client"&&(T(),b||(C(),S()));async function C(){const{data:R,error:I}=await ae.rpc("isreserved",{bookid:l,studid:i});t(0,w=R)}async function S(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,k=R.length)}async function T(){const{data:R,error:I}=await ae.rpc("isborrowed",{bookid:l,studid:i});t(7,b=R)}async function j(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(I){console.error(I);return}const{error:D}=await ae.from("book_reservation").insert({reservation_id:await F(),stud_id:i,holding_id:R.holding_id});if(D){console.error(D);return}const{data:z,error:te}=await ae.from("library_holdings").update({status:"Reserved"}).eq("barcode",R.barcode).select("holding_id").single();if(te){console.error(te);return}C()}async function A(){const{data:R,error:I}=await ae.from("book_reservation").update({active:!1}).eq("reservation_id",w).select().single(),{error:D}=await ae.from("library_holdings").update({status:"Available"}).eq("holding_id",R.holding_id);!I||!D?(C(),S()):(console.error(I),console.error(D))}async function F(){let R=qi();const{data:I,error:D}=await ae.from("book_reservation").select().eq("reservation_id",R);return console.log(I),I.length!=0&&(R=qi(),console.log("exists")),console.log(R),R}let Z=l>4?"./book-cover.png":`./${l}.jpg`;const H=()=>{t(10,s="Cancel Reservation"),t(9,$="btn-danger")},K=()=>{t(10,s=`Reserved (#${w})`),t(9,$="btn-secondary")};function B(){_=this.value,t(5,_)}return r.$$set=R=>{"params"in R&&t(15,o=R.params)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(10,s=`Reserved (${w})`)},[w,n,a,c,u,_,v,b,k,$,s,p,j,A,Z,o,H,K,B]}class qa extends be{constructor(e){super(),ge(this,e,c_,l_,pe,{params:15},null,[-1,-1])}}function u_(r){let e,t,s,n,i,o;const l=r[3].default,a=ds(l,r,r[2],null);return{c(){e=h("div"),t=h("label"),s=se(r[0]),n=y(),i=h("div"),a&&a.c(),f(t,"class","col-sm-4 col-md-3 col-form-label"),f(t,"for",r[1]),f(i,"class","col-sm-8 col-md-9"),f(e,"class","mb-4 row")},m(c,u){E(c,e,u),d(e,t),d(t,s),d(e,n),d(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&le(s,c[0]),(!o||u&2)&&f(t,"for",c[1]),a&&a.p&&(!o||u&4)&&hs(a,l,c,c[2],o?fs(l,c[2],u,null):ms(c[2]),null)},i(c){o||(O(a,c),o=!0)},o(c){M(a,c),o=!1},d(c){c&&P(e),a&&a.d(c)}}}function d_(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return r.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,n=l.$$scope)},[i,o,n,s]}class Ie extends be{constructor(e){super(),ge(this,e,d_,u_,pe,{label:0,id:1})}}function Vi(r,e,t){const s=r.slice();return s[29]=e[t][0],s[30]=e[t][1],s}function zi(r,e,t){const s=r.slice();return s[29]=e[t][0],s[34]=e[t][1],s}function Gi(r,e,t){const s=r.slice();return s[29]=e[t][0],s[38]=e[t][1],s}function f_(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-name"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,r[4]),t||(s=G(e,"input",r[18]),t=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&P(e),t=!1,s()}}}function h_(r){let e,t,s;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"id","book-description"),f(e,"rows","6"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,r[5]),t||(s=G(e,"input",r[19]),t=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&P(e),t=!1,s()}}}function m_(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","book-cover"),f(e,"accept","image/*")},m(n,i){E(n,e,i),r[21](e),t||(s=G(e,"change",r[20]),t=!0)},p:U,d(n){n&&P(e),r[21](null),t=!1,s()}}}function __(r){let e,t,s,n,i;return{c(){e=h("input"),t=y(),s=h("div"),s.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","categories"),f(e,"class","form-control "+r[13]),f(e,"type","text"),f(e,"id","book-category"),f(e,"autocomplete","off"),f(s,"class","invalid-feedback")},m(o,l){E(o,e,l),J(e,r[6]),E(o,t,l),E(o,s,l),n||(i=G(e,"input",r[23]),n=!0)},p(o,l){l[0]&64&&e.value!==o[6]&&J(e,o[6])},d(o){o&&(P(e),P(t),P(s)),n=!1,i()}}}function p_(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","authors"),f(e,"class",t="form-control "+r[11]),f(e,"type","text"),f(e,"id","book-author"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[7]),E(l,s,a),E(l,n,a),i||(o=G(e,"input",r[24]),i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&f(e,"class",t),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(P(e),P(s),P(n)),i=!1,o()}}}function g_(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","publishers"),f(e,"class",t="form-control "+r[12]),f(e,"type","text"),f(e,"id","book-publisher"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[8]),E(l,s,a),E(l,n,a),i||(o=G(e,"input",r[25]),i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&f(e,"class",t),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(P(e),P(s),P(n)),i=!1,o()}}}function b_(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","number"),f(e,"id","book-shelf"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,r[9]),t||(s=G(e,"input",r[26]),t=!0)},p(n,i){i[0]&512&&_s(e.value)!==n[9]&&J(e,n[9])},d(n){n&&P(e),t=!1,s()}}}function v_(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-isbn"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,r[10]),t||(s=G(e,"input",r[27]),t=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&P(e),t=!1,s()}}}function y_(r){return{c:U,m:U,p:U,d:U}}function w_(r){let e,t=Se(Object.entries(r[37])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ji(Gi(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","authors")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){t=Se(Object.entries(n[37]));let o;for(o=0;o<t.length;o+=1){const l=Gi(n,t,o);s[o]?s[o].p(l,i):(s[o]=Ji(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&P(e),Ve(s,n)}}}function Ji(r){let e;return{c(){e=h("option"),e.__value=r[38].name,J(e,e.__value)},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function k_(r){return{c:U,m:U,p:U,d:U}}function $_(r){return{c:U,m:U,p:U,d:U}}function S_(r){let e,t=Se(Object.entries(r[33])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ki(zi(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","publishers")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){t=Se(Object.entries(n[33]));let o;for(o=0;o<t.length;o+=1){const l=zi(n,t,o);s[o]?s[o].p(l,i):(s[o]=Ki(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&P(e),Ve(s,n)}}}function Ki(r){let e;return{c(){e=h("option"),e.__value=r[34].name,J(e,e.__value)},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function O_(r){return{c:U,m:U,p:U,d:U}}function T_(r){return{c:U,m:U,p:U,d:U}}function D_(r){let e,t=Se(Object.entries(r[28])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Zi(Vi(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();f(e,"id","categories")},m(n,i){E(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){t=Se(Object.entries(n[28]));let o;for(o=0;o<t.length;o+=1){const l=Vi(n,t,o);s[o]?s[o].p(l,i):(s[o]=Zi(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&P(e),Ve(s,n)}}}function Zi(r){let e;return{c(){e=h("option"),e.__value=r[30].name,J(e,e.__value)},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function M_(r){return{c:U,m:U,p:U,d:U}}function C_(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te,x,q,X,ye,oe,re,fe,Le,Ce;t=new Ke({props:{text:"Add Book"}}),o=new Ie({props:{label:"Book Title:",id:"book-name",$$slots:{default:[f_]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Book Description:",id:"book-description",$$slots:{default:[h_]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[m_]},$$scope:{ctx:r}}}),j=new Ie({props:{label:"Category:",id:"book-category",$$slots:{default:[__]},$$scope:{ctx:r}}}),F=new Ie({props:{label:"Author: ",id:"book-author",$$slots:{default:[p_]},$$scope:{ctx:r}}}),H=new Ie({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[g_]},$$scope:{ctx:r}}}),B=new Ie({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[b_]},$$scope:{ctx:r}}}),I=new Ie({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[v_]},$$scope:{ctx:r}}});let ee={ctx:r,current:null,token:null,hasCatch:!1,pending:k_,then:w_,catch:y_,value:37};zr(r[15](),ee);let ue={ctx:r,current:null,token:null,hasCatch:!1,pending:O_,then:S_,catch:$_,value:33};zr(r[16](),ue);let we={ctx:r,current:null,token:null,hasCatch:!1,pending:M_,then:D_,catch:T_,value:28};return zr(r[17](),we),{c(){e=h("section"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),_=h("div"),g=h("label"),g.textContent="Preview:",p=y(),v=h("div"),w=h("img"),k=y(),$=h("button"),$.textContent="Remove",S=y(),T=h("div"),N(j.$$.fragment),A=y(),N(F.$$.fragment),Z=y(),N(H.$$.fragment),K=y(),N(B.$$.fragment),R=y(),N(I.$$.fragment),D=y(),z=h("div"),te=h("button"),te.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',x=y(),q=h("a"),q.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',X=y(),ee.block.c(),ye=y(),ue.block.c(),oe=y(),we.block.c(),f(g,"for","cover-preview"),f(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(w.src,b=r[3])||f(w,"src",b),f(w,"alt","Preview"),f(w,"id","cover-preview"),f(w,"height","150"),f($,"class","btn btn-sm btn-danger"),f(v,"class","col-sm-8 col-md-9"),f(v,"id","preview-div"),f(_,"class",C="my-3 row "+r[2]),f(i,"class","col-sm-12 col-lg-6"),f(T,"class","col-sm-12 col-lg-6"),f(n,"class","row justify-content-center"),f(te,"class","btn btn-success"),f(q,"href","./#/"),f(z,"class","my-3"),f(e,"class","my-1 container")},m(ce,ie){E(ce,e,ie),L(t,e,null),d(e,s),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),d(i,_),d(_,g),d(_,p),d(_,v),d(v,w),d(v,k),d(v,$),d(n,S),d(n,T),L(j,T,null),d(T,A),L(F,T,null),d(T,Z),L(H,T,null),d(T,K),L(B,T,null),d(T,R),L(I,T,null),d(e,D),d(e,z),d(z,te),d(z,x),d(z,q),d(e,X),ee.block.m(e,ee.anchor=null),ee.mount=()=>e,ee.anchor=ye,d(e,ye),ue.block.m(e,ue.anchor=null),ue.mount=()=>e,ue.anchor=oe,d(e,oe),we.block.m(e,we.anchor=null),we.mount=()=>e,we.anchor=null,fe=!0,Le||(Ce=[G($,"click",r[22]),G(te,"click",r[14])],Le=!0)},p(ce,ie){r=ce;const Be={};ie[0]&16|ie[1]&1024&&(Be.$$scope={dirty:ie,ctx:r}),o.$set(Be);const Bn={};ie[0]&32|ie[1]&1024&&(Bn.$$scope={dirty:ie,ctx:r}),a.$set(Bn);const qn={};ie[0]&3|ie[1]&1024&&(qn.$$scope={dirty:ie,ctx:r}),u.$set(qn),(!fe||ie[0]&8&&!Xe(w.src,b=r[3]))&&f(w,"src",b),(!fe||ie[0]&4&&C!==(C="my-3 row "+r[2]))&&f(_,"class",C);const Vn={};ie[0]&64|ie[1]&1024&&(Vn.$$scope={dirty:ie,ctx:r}),j.$set(Vn);const zn={};ie[0]&2176|ie[1]&1024&&(zn.$$scope={dirty:ie,ctx:r}),F.$set(zn);const Gn={};ie[0]&4352|ie[1]&1024&&(Gn.$$scope={dirty:ie,ctx:r}),H.$set(Gn);const Jn={};ie[0]&512|ie[1]&1024&&(Jn.$$scope={dirty:ie,ctx:r}),B.$set(Jn);const Kn={};ie[0]&1024|ie[1]&1024&&(Kn.$$scope={dirty:ie,ctx:r}),I.$set(Kn),Gr(ee,r,ie),Gr(ue,r,ie),Gr(we,r,ie)},i(ce){fe||(O(t.$$.fragment,ce),O(o.$$.fragment,ce),O(a.$$.fragment,ce),O(u.$$.fragment,ce),O(j.$$.fragment,ce),O(F.$$.fragment,ce),O(H.$$.fragment,ce),O(B.$$.fragment,ce),O(I.$$.fragment,ce),ce&&(re||Ee(()=>{re=Ue(e,Fe,{duration:500}),re.start()})),fe=!0)},o(ce){M(t.$$.fragment,ce),M(o.$$.fragment,ce),M(a.$$.fragment,ce),M(u.$$.fragment,ce),M(j.$$.fragment,ce),M(F.$$.fragment,ce),M(H.$$.fragment,ce),M(B.$$.fragment,ce),M(I.$$.fragment,ce),fe=!1},d(ce){ce&&P(e),Y(t),Y(o),Y(a),Y(u),Y(j),Y(F),Y(H),Y(B),Y(I),ee.block.d(),ee.token=null,ee=null,ue.block.d(),ue.token=null,ue=null,we.block.d(),we.token=null,we=null,Le=!1,De(Ce)}}}function P_(r,e,t){let s,n,i="d-none",o,l,a,c,u,m,_,g,p,v,w;async function b(){const{data:I,error:D}=await ae.from("author").select("author_id").eq("name",u).single(),{data:z,error:te}=await ae.from("publisher").select("publisher_id").eq("name",m).single();let x=!0;if((D||!I)&&(t(11,v="is-invalid"),x=!1),(te||!z)&&(t(12,w="is-invalid"),x=!1),!x)return;const{error:q}=await ae.from("books").insert({title:l,description:a,author_id:I.author_id,publisher_id:z.publisher_id,shelf_number:_,isbn:g});q?console.error(q):alert(`Successfully Added ${l}!`)}async function k(){const{data:I,error:D}=await ae.from("author").select("name").order("name",{ascending:!0});return I}async function $(){const{data:I,error:D}=await ae.from("publisher").select("name").order("name",{ascending:!0});return I}async function C(){const{data:I,error:D}=await ae.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return I}function S(){l=this.value,t(4,l)}function T(){a=this.value,t(5,a)}function j(){s=this.files,t(0,s)}function A(I){ar[I?"unshift":"push"](()=>{n=I,t(1,n)})}const F=()=>{t(1,n.value="",n),t(0,s="")};function Z(){c=this.value,t(6,c)}function H(){u=this.value,t(7,u)}function K(){m=this.value,t(8,m)}function B(){_=_s(this.value),t(9,_)}function R(){g=this.value,t(10,g)}return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(s&&s[0]){console.log(s),t(2,i="");const I=URL.createObjectURL(s[0]);t(3,o=I)}else console.log(s),t(2,i="d-none")},[s,n,i,o,l,a,c,u,m,_,g,v,w,p,b,k,$,C,S,T,j,A,F,Z,H,K,B,R]}class E_ extends be{constructor(e){super(),ge(this,e,P_,C_,pe,{},null,[-1,-1])}}function Qi(r,e,t){const s=r.slice();return s[5]=e[t][0],s[6]=e[t][1],s}function R_(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function j_(r){let e,t,s=r[0].name+"",n,i,o,l,a,c,u,m,_=r[0].email+"",g,p;function v(k,$){return k[0].bio==null?I_:A_}let w=v(r),b=w(r);return{c(){e=h("div"),t=h("h1"),n=se(s),i=y(),o=h("p"),b.c(),l=y(),a=h("p"),c=h("b"),c.textContent="Website:",u=y(),m=h("a"),g=se(_),f(t,"class","mb-2 pb-2"),f(o,"class",""),f(m,"href",p="mailto:"+r[0].email),f(e,"class","container")},m(k,$){E(k,e,$),d(e,t),d(t,n),d(e,i),d(e,o),b.m(o,null),d(e,l),d(e,a),d(a,c),d(a,u),d(a,m),d(m,g)},p(k,$){$&1&&s!==(s=k[0].name+"")&&le(n,s),w===(w=v(k))&&b?b.p(k,$):(b.d(1),b=w(k),b&&(b.c(),b.m(o,null))),$&1&&_!==(_=k[0].email+"")&&le(g,_),$&1&&p!==(p="mailto:"+k[0].email)&&f(m,"href",p)},i:U,o:U,d(k){k&&P(e),b.d()}}}function A_(r){let e=r[0].bio+"",t;return{c(){t=se(e)},m(s,n){E(s,t,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&le(t,e)},d(s){s&&P(t)}}}function I_(r){let e;return{c(){e=h("span"),e.textContent="No Description",f(e,"class","text-secondary")},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function L_(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Y_(r){let e,t,s=Se(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Xi(Qi(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Se(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Qi(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Xi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function Xi(r){let e,t;return e=new vs({props:{title:r[6].title,id:r[6].book_id,author:r[6].publisher.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].publisher.name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function N_(r){let e,t,s,n;const i=[Y_,L_],o=[];function l(a,c){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function U_(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v;s=new Ke({props:{text:"Author Details"}});const w=[j_,R_],b=[];function k($,C){return $[0]?0:1}return u=k(r),m=b[u]=w[u](r),g=new ut({props:{title:"Books",icon:"journal",$$slots:{default:[N_]},$$scope:{ctx:r}}}),{c(){e=h("main"),t=h("section"),N(s.$$.fragment),n=y(),i=h("div"),o=h("div"),l=h("img"),c=y(),m.c(),_=y(),N(g.$$.fragment),f(l,"class","border p-3"),Xe(l.src,a=F_)||f(l,"src",a),f(l,"alt","author"),f(l,"height","300"),f(l,"width","300"),pt(l,"object-fit","contain"),f(o,"class","d-flex justify-content-center my-1"),f(i,"class","d-md-flex d-block"),f(e,"class","container")},m($,C){E($,e,C),d(e,t),L(s,t,null),d(t,n),d(t,i),d(i,o),d(o,l),d(i,c),b[u].m(i,null),d(e,_),L(g,e,null),v=!0},p($,[C]){let S=u;u=k($),u===S?b[u].p($,C):(Oe(),M(b[S],1,1,()=>{b[S]=null}),Te(),m=b[u],m?m.p($,C):(m=b[u]=w[u]($),m.c()),O(m,1),m.m(i,null));const T={};C&514&&(T.$$scope={dirty:C,ctx:$}),g.$set(T)},i($){v||(O(s.$$.fragment,$),O(m),O(g.$$.fragment,$),$&&(p||Ee(()=>{p=Ue(e,Fe,{duration:500}),p.start()})),v=!0)},o($){M(s.$$.fragment,$),M(m),M(g.$$.fragment,$),v=!1},d($){$&&P(e),Y(s),b[u].d(),Y(g)}}}let F_="./default-profile.jpg";function x_(r,e,t){let{params:s}=e,n=s.authorID,i,o;async function l(){const{data:a,error:c}=await ae.from("author").select().eq("author_id",n);console.log(a),t(0,i=a[0]);const{data:u,error:m}=await ae.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),t(1,o=u)}return Dr(l),r.$$set=a=>{"params"in a&&t(2,s=a.params)},[i,o,s]}class Va extends be{constructor(e){super(),ge(this,e,x_,U_,pe,{params:2})}}function eo(r,e,t){const s=r.slice();return s[5]=e[t][0],s[6]=e[t][1],s}function to(r){let e,t,s=r[0].name+"",n,i,o,l,a,c,u,m,_=r[0].email+"",g,p;function v(k,$){return k[0].bio==null?W_:H_}let w=v(r),b=w(r);return{c(){e=h("div"),t=h("h1"),n=se(s),i=y(),o=h("p"),b.c(),l=y(),a=h("p"),c=h("b"),c.textContent="Website:",u=y(),m=h("a"),g=se(_),f(t,"class","mb-2 pb-2"),f(o,"class",""),f(m,"href",p="https://"+r[0].email),f(m,"id","publisher-website"),f(e,"class","container")},m(k,$){E(k,e,$),d(e,t),d(t,n),d(e,i),d(e,o),b.m(o,null),d(e,l),d(e,a),d(a,c),d(a,u),d(a,m),d(m,g)},p(k,$){$&1&&s!==(s=k[0].name+"")&&le(n,s),w===(w=v(k))&&b?b.p(k,$):(b.d(1),b=w(k),b&&(b.c(),b.m(o,null))),$&1&&_!==(_=k[0].email+"")&&le(g,_),$&1&&p!==(p="https://"+k[0].email)&&f(m,"href",p)},d(k){k&&P(e),b.d()}}}function H_(r){let e=r[0].bio+"",t;return{c(){t=se(e)},m(s,n){E(s,t,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&le(t,e)},d(s){s&&P(t)}}}function W_(r){let e;return{c(){e=h("span"),e.textContent="No Description",f(e,"class","text-secondary")},m(t,s){E(t,e,s)},p:U,d(t){t&&P(e)}}}function B_(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function q_(r){let e,t,s=Se(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ro(eo(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Se(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=eo(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ro(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function ro(r){let e,t;return e=new vs({props:{title:r[6].title,id:r[6].book_id,author:r[6].author.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].author.name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function V_(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w;t=new Ke({props:{text:"Publisher Details"}});let b=r[0]&&to(r);_=new ut({props:{title:"Books",icon:"journal"}});const k=[q_,B_],$=[];function C(S,T){return S[1]?0:1}return p=C(r),v=$[p]=k[p](r),{c(){e=h("section"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),o=h("img"),a=y(),b&&b.c(),u=y(),m=h("section"),N(_.$$.fragment),g=y(),v.c(),f(o,"id","img-cover"),f(o,"class","border p-3"),Xe(o.src,l=z_)||f(o,"src",l),f(o,"alt","publisher"),f(o,"height","300"),f(o,"width","300"),pt(o,"object-fit","contain"),f(i,"id","publisher-cover"),f(i,"class","d-flex justify-content-center my-1"),f(n,"class","d-md-flex d-block"),f(e,"class","container"),f(m,"class","container")},m(S,T){E(S,e,T),L(t,e,null),d(e,s),d(e,n),d(n,i),d(i,o),d(n,a),b&&b.m(n,null),E(S,u,T),E(S,m,T),L(_,m,null),d(m,g),$[p].m(m,null),w=!0},p(S,[T]){S[0]?b?b.p(S,T):(b=to(S),b.c(),b.m(n,null)):b&&(b.d(1),b=null);let j=p;p=C(S),p===j?$[p].p(S,T):(Oe(),M($[j],1,1,()=>{$[j]=null}),Te(),v=$[p],v?v.p(S,T):(v=$[p]=k[p](S),v.c()),O(v,1),v.m(m,null))},i(S){w||(O(t.$$.fragment,S),S&&(c||Ee(()=>{c=Ue(e,Fe,{duration:500}),c.start()})),O(_.$$.fragment,S),O(v),w=!0)},o(S){M(t.$$.fragment,S),M(_.$$.fragment,S),M(v),w=!1},d(S){S&&(P(e),P(u),P(m)),Y(t),b&&b.d(),Y(_),$[p].d()}}}let z_="./default-profile.jpg";function G_(r,e,t){let{params:s}=e,n=s.publisherID,i,o;async function l(){const{data:a,error:c}=await ae.from("publisher").select().eq("publisher_id",n);console.log(a),t(0,i=a[0]);const{data:u,error:m}=await ae.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),t(1,o=u)}return Dr(l),r.$$set=a=>{"params"in a&&t(2,s=a.params)},[i,o,s]}class za extends be{constructor(e){super(),ge(this,e,G_,V_,pe,{params:2})}}function J_(r){let e,t,s,n,i,o,l,a,c,u;return{c(){e=h("div"),t=h("div"),s=h("i"),i=y(),o=h("div"),l=h("h5"),a=h("a"),c=se(r[0]),f(s,"class",n="bi bi-"+r[2]),f(t,"class","d-flex justify-content-center"),pt(t,"font-size","3em"),f(a,"class","stretched-link svelte-1vxezln"),f(a,"href",u="./#/"+r[1]),f(l,"class","card-title text-center my-2"),f(o,"class","card-body p-1"),f(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(m,_){E(m,e,_),d(e,t),d(t,s),d(e,i),d(e,o),d(o,l),d(l,a),d(a,c)},p(m,[_]){_&4&&n!==(n="bi bi-"+m[2])&&f(s,"class",n),_&1&&le(c,m[0]),_&2&&u!==(u="./#/"+m[1])&&f(a,"href",u)},i:U,o:U,d(m){m&&P(e)}}}function K_(r,e,t){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return r.$$set=o=>{"name"in o&&t(0,s=o.name),"link"in o&&t(1,n=o.link),"icon"in o&&t(2,i=o.icon)},[s,n,i]}class ct extends be{constructor(e){super(),ge(this,e,K_,J_,pe,{name:0,link:1,icon:2})}}function Z_(r){let e,t,s,n,i;return t=new ct({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new ct({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),N(t.$$.fragment),s=y(),N(n.$$.fragment),f(e,"class","row justify-content-center gap-4")},m(o,l){E(o,e,l),L(t,e,null),d(e,s),L(n,e,null),i=!0},p:U,i(o){i||(O(t.$$.fragment,o),O(n.$$.fragment,o),i=!0)},o(o){M(t.$$.fragment,o),M(n.$$.fragment,o),i=!1},d(o){o&&P(e),Y(t),Y(n)}}}function Q_(r){let e,t,s,n,i,o,l,a,c;return t=new ct({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new ct({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new ct({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new ct({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),N(t.$$.fragment),s=y(),N(n.$$.fragment),i=y(),N(o.$$.fragment),l=y(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5")},m(u,m){E(u,e,m),L(t,e,null),d(e,s),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),c=!0},p:U,i(u){c||(O(t.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(t.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(t),Y(n),Y(o),Y(a)}}}function X_(r){let e,t,s,n,i,o,l,a,c;return t=new ct({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new ct({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new ct({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new ct({props:{name:"Transactions Report",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),N(t.$$.fragment),s=y(),N(n.$$.fragment),i=y(),N(o.$$.fragment),l=y(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5 mb-5")},m(u,m){E(u,e,m),L(t,e,null),d(e,s),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),c=!0},p:U,i(u){c||(O(t.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(t.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(t),Y(n),Y(o),Y(a)}}}function ep(r){let e,t,s,n,i,o,l,a;return t=new ut({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Z_]},$$scope:{ctx:r}}}),n=new ut({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Q_]},$$scope:{ctx:r}}}),o=new ut({props:{title:"Reports",icon:"receipt",$$slots:{default:[X_]},$$scope:{ctx:r}}}),{c(){e=h("main"),N(t.$$.fragment),s=y(),N(n.$$.fragment),i=y(),N(o.$$.fragment),f(e,"class","container")},m(c,u){E(c,e,u),L(t,e,null),d(e,s),L(n,e,null),d(e,i),L(o,e,null),a=!0},p(c,[u]){const m={};u&1&&(m.$$scope={dirty:u,ctx:c}),t.$set(m);const _={};u&1&&(_.$$scope={dirty:u,ctx:c}),n.$set(_);const g={};u&1&&(g.$$scope={dirty:u,ctx:c}),o.$set(g)},i(c){a||(O(t.$$.fragment,c),O(n.$$.fragment,c),O(o.$$.fragment,c),c&&(l||Ee(()=>{l=Ue(e,Fe,{duration:500}),l.start()})),a=!0)},o(c){M(t.$$.fragment,c),M(n.$$.fragment,c),M(o.$$.fragment,c),a=!1},d(c){c&&P(e),Y(t),Y(n),Y(o)}}}class tp extends be{constructor(e){super(),ge(this,e,null,ep,pe,{})}}function so(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function no(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function io(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function oo(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T;return{c(){e=h("div"),t=h("div"),t.textContent="Category:",s=y(),n=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",c=y(),u=h("div"),u.textContent="Sort by:",m=y(),_=h("div"),g=h("select"),p=h("option"),p.textContent="Total",v=h("option"),v.textContent="Available",w=h("option"),w.textContent="Reserved",b=h("option"),b.textContent="Borrowed",k=y(),$=h("div"),C=h("select"),S=h("option"),S.textContent="Ascending",T=h("option"),T.textContent="Descending",o.__value="all",J(o,o.__value),l.__value="tech",J(l,l.__value),a.__value="all",J(a,a.__value),f(i,"name","category"),f(i,"class","form-select"),p.__value="",J(p,p.__value),v.__value="",J(v,v.__value),w.__value="",J(w,w.__value),b.__value="",J(b,b.__value),f(g,"name","filter"),f(g,"class","form-select"),S.__value="",J(S,S.__value),T.__value="",J(T,T.__value),f(C,"name","order"),f(C,"class","form-select"),f(e,"class","d-flex justify-content-end align-items-center gap-2")},m(j,A){E(j,e,A),d(e,t),d(e,s),d(e,n),d(n,i),d(i,o),d(i,l),d(i,a),d(e,c),d(e,u),d(e,m),d(e,_),d(_,g),d(g,p),d(g,v),d(g,w),d(g,b),d(e,k),d(e,$),d($,C),d(C,S),d(C,T)},d(j){j&&P(e)}}}function rp(r){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p:U,i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function sp(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',f(e,"class","d-flex justify-content-center mt-5")},m(t,s){E(t,e,s)},p:U,i:U,o:U,d(t){t&&P(e)}}}function np(r){let e,t,s=Se(Object.entries(r[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=ao(so(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const c=so(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ao(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function ip(r){let e,t,s=Se(Object.entries(r[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=lo(no(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const c=no(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=lo(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function op(r){let e,t,s=Se(Object.entries(r[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=co(io(r,s,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=We()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const c=io(o,s,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=co(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=s.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),Ve(n,o)}}}function ao(r){let e,t;return e=new Xo({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function lo(r){let e,t;return e=new Qo({props:{id:r[14].author_id,name:r[14].name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].author_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function co(r){let e,t;return e=new vs({props:{title:r[14].title,id:r[14].book_id,author:r[14].author.name}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.title=s[14].title),n&4&&(i.id=s[14].book_id),n&4&&(i.author=s[14].author.name),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function ap(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F;t=new Ke({props:{text:"Library Holdings"}});let Z=r[3]&&r[3].value=="books"&&oo();const H=[op,ip,np,sp,rp],K=[];function B(R,I){return R[2].books.length>0?0:R[2].author.length>0?1:R[2].publisher.length>0?2:R[0]?4:3}return C=B(r),S=K[C]=H[C](r),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",c=h("option"),c.textContent="Publisher",u=y(),m=h("div"),_=h("input"),g=y(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',v=y(),Z&&Z.c(),w=y(),b=h("hr"),k=y(),$=h("div"),S.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),f(o,"name","searchtype"),f(o,"class","form-select"),f(i,"class","col-auto col-md-2 p-0 pe-md-4"),f(_,"class","form-control form-control-lg"),f(_,"type","search"),f(_,"placeholder","Search"),f(_,"name","Search"),f(m,"class","col-6 col-md-6 p-0"),f(p,"class","btn btn-lg btn-success col-auto col-md-1"),f(p,"type","submit"),f(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),f($,"class","row"),f(e,"class","container")},m(R,I){E(R,e,I),L(t,e,null),d(e,s),d(e,n),d(n,i),d(i,o),d(o,l),d(o,a),d(o,c),r[5](o),d(n,u),d(n,m),d(m,_),J(_,r[1]),d(n,g),d(n,p),d(e,v),Z&&Z.m(e,null),d(e,w),d(e,b),d(e,k),d(e,$),K[C].m($,null),j=!0,A||(F=[G(o,"change",r[4]),G(_,"input",r[6]),G(_,"keyup",r[7]),G(p,"click",r[4])],A=!0)},p(R,[I]){I&2&&_.value!==R[1]&&J(_,R[1]),R[3]&&R[3].value=="books"?Z||(Z=oo(),Z.c(),Z.m(e,w)):Z&&(Z.d(1),Z=null);let D=C;C=B(R),C===D?K[C].p(R,I):(Oe(),M(K[D],1,1,()=>{K[D]=null}),Te(),S=K[C],S?S.p(R,I):(S=K[C]=H[C](R),S.c()),O(S,1),S.m($,null))},i(R){j||(O(t.$$.fragment,R),O(S),R&&(T||Ee(()=>{T=Ue(e,Fe,{duration:500}),T.start()})),j=!0)},o(R){M(t.$$.fragment,R),M(S),j=!1},d(R){R&&P(e),Y(t),r[5](null),Z&&Z.d(),K[C].d(),A=!1,De(F)}}}function lp(r,e,t){let s;cn(r,gl,w=>t(9,s=w));let n=!0;function i(){switch(s){case"/search/author":t(3,m.value="author",m);break;case"/search/publisher":t(3,m.value="publisher",m);break;default:t(3,m.value="books",m)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},m;async function _(){t(0,n=!0),a=m.value,console.log(a);const{data:w,error:b}=await ae.from(a).select(o[a]).ilike(l[a],`%${c}%`);b&&console.log(b),t(2,u.books=[],u),t(2,u.author=[],u),t(2,u.publisher=[],u),t(2,u[a]=w,u),t(2,u),t(0,n=!1),console.log(n,u)}Dr(i),Dr(_);function g(w){ar[w?"unshift":"push"](()=>{m=w,t(3,m)})}function p(){c=this.value,t(1,c)}return[n,c,u,m,_,g,p,w=>w.key==="Enter"&&_()]}class or extends be{constructor(e){super(),ge(this,e,lp,ap,pe,{})}}function uo(r){let e,t;return{c(){e=h("div"),t=se(r[4]),f(e,"class","alert alert-danger p-1 text-center svelte-19yamth")},m(s,n){E(s,e,n),d(e,t)},p(s,n){n[0]&16&&le(t,s[4])},d(s){s&&P(e)}}}function cp(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b=r[6]&&fo(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",s=y(),n=h("form"),b&&b.c(),i=y(),o=h("div"),o.innerHTML='<div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-person-bounding-box"></i></span> <input type="text" id="sID" name="hidden" required="" minlength="6" maxlength="6" autocomplete="off" class="svelte-19yamth"/> <label for="sID" class="svelte-19yamth">Student ID</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="fname" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="fname" class="svelte-19yamth">First Name</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="lname" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="lname" class="svelte-19yamth">Last Name</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-envelope"></i></span> <input type="email" id="email" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="email" class="svelte-19yamth">Email</label></div>',l=y(),a=h("div"),a.innerHTML='<div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-telephone-fill"></i></span> <input type="tel" id="contact" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="contact" class="svelte-19yamth">Contact</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-geo-alt-fill"></i></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="address" class="svelte-19yamth">Address</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-envelope"></i></span> <input type="number" id="yearLevel" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="yearLevel" class="svelte-19yamth">Year Level</label></div> <div class="input-box svelte-19yamth"><span class="icon svelte-19yamth"><i class="bi bi-envelope"></i></span> <input type="text" id="course" name="hidden" required="" autocomplete="off" class="svelte-19yamth"/> <label for="course" class="svelte-19yamth">Course</label></div>',c=y(),u=h("button"),u.textContent="Proceed",m=y(),_=h("a"),_.textContent="Back",f(t,"class","svelte-19yamth"),f(o,"class","col-12 col-sm-6"),f(a,"class","col-12 col-sm-6"),f(u,"type","submit"),f(u,"class","bton w-50 svelte-19yamth"),f(u,"name","hidden"),f(u,"id","Proceed"),f(n,"class","row justify-content-center"),f(_,"href","./#/"),f(_,"class","mt-2 svelte-19yamth"),f(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-19yamth"),f(e,"style","height")},m(k,$){E(k,e,$),d(e,t),d(e,s),d(e,n),b&&b.m(n,null),d(n,i),d(n,o),d(n,l),d(n,a),d(n,c),d(n,u),d(e,m),d(e,_),p=!0,v||(w=[G(u,"click",mp),G(n,"submit",er(r[16])),G(_,"click",r[27])],v=!0)},p(k,$){k[6]?b?b.p(k,$):(b=fo(k),b.c(),b.m(n,i)):b&&(b.d(1),b=null)},i(k){p||(k&&Ee(()=>{p&&(g||(g=lr(e,dr,{duration:600,y:500},!0)),g.run(1))}),p=!0)},o(k){k&&(g||(g=lr(e,dr,{duration:600,y:500},!1)),g.run(0)),p=!1},d(k){k&&P(e),b&&b.d(),k&&g&&g.end(),v=!1,De(w)}}}function up(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te,x,q,X,ye,oe=r[5]&&ho(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",s=y(),oe&&oe.c(),n=y(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=y(),c=h("input"),u=y(),m=h("label"),m.textContent="Username",_=y(),g=h("div"),p=h("span"),v=h("a"),v.innerHTML='<i class="bi bi-eye"></i>',w=y(),b=h("input"),k=y(),$=h("label"),$.textContent="Password",C=y(),S=h("div"),T=h("span"),j=h("a"),j.innerHTML='<i class="bi bi-eye"></i>',A=y(),F=h("input"),Z=y(),H=h("label"),H.textContent="Confirm Password",K=y(),B=h("button"),B.textContent="Next",R=y(),I=h("div"),D=h("p"),z=se("Already have an account? "),te=h("a"),te.textContent="Login",f(t,"class","svelte-19yamth"),f(l,"class","icon svelte-19yamth"),f(c,"type","text"),f(c,"id","registerUsername"),c.required=!0,f(c,"autocomplete","off"),f(c,"class","svelte-19yamth"),f(m,"for","registerUsername"),f(m,"class","svelte-19yamth"),f(o,"class","input-box svelte-19yamth"),f(v,"href","./#/"),f(v,"class","svelte-19yamth"),f(p,"class","icon svelte-19yamth"),f(p,"id","showPass2"),f(b,"type","password"),f(b,"id","registerPass"),b.required=!0,f(b,"autocomplete","off"),f(b,"minlength","6"),f(b,"class","svelte-19yamth"),f($,"for","registerPass"),f($,"class","svelte-19yamth"),f(g,"class","input-box svelte-19yamth"),f(j,"href","./#/"),f(j,"class","svelte-19yamth"),f(T,"class","icon svelte-19yamth"),f(T,"id","showPass3"),f(F,"type","password"),f(F,"id","registerConfirm"),F.required=!0,f(F,"autocomplete","off"),f(F,"minlength","6"),f(F,"class","svelte-19yamth"),f(H,"for","registerConfirm"),f(H,"class","svelte-19yamth"),f(S,"class","input-box svelte-19yamth"),f(B,"type","submit"),f(B,"class","bton svelte-19yamth"),f(B,"id","registerBtn"),f(te,"href","./#/"),f(te,"class","login-link svelte-19yamth"),f(I,"class","login-register svelte-19yamth"),f(e,"class","form-box register svelte-19yamth")},m(re,fe){E(re,e,fe),d(e,t),d(e,s),oe&&oe.m(e,null),d(e,n),d(e,i),d(i,o),d(o,l),d(o,a),d(o,c),J(c,r[7]),d(o,u),d(o,m),d(i,_),d(i,g),d(g,p),d(p,v),d(g,w),d(g,b),J(b,r[8]),d(g,k),d(g,$),d(i,C),d(i,S),d(S,T),d(T,j),d(S,A),d(S,F),J(F,r[9]),d(S,Z),d(S,H),d(i,K),d(i,B),d(i,R),d(i,I),d(I,D),d(D,z),d(D,te),q=!0,X||(ye=[G(c,"keyup",r[21]),G(c,"input",r[22]),G(v,"click",er(fp)),G(b,"keyup",r[23]),G(b,"input",r[24]),G(j,"click",er(hp)),G(F,"keyup",r[25]),G(F,"input",r[26]),G(te,"click",r[13]),G(i,"submit",er(r[15]))],X=!0)},p(re,fe){re[5]?oe?oe.p(re,fe):(oe=ho(re),oe.c(),oe.m(e,n)):oe&&(oe.d(1),oe=null),fe[0]&128&&c.value!==re[7]&&J(c,re[7]),fe[0]&256&&b.value!==re[8]&&J(b,re[8]),fe[0]&512&&F.value!==re[9]&&J(F,re[9])},i(re){q||(re&&Ee(()=>{q&&(x||(x=lr(e,dr,{duration:600,y:500},!0)),x.run(1))}),q=!0)},o(re){re&&(x||(x=lr(e,dr,{duration:600,y:500},!1)),x.run(0)),q=!1},d(re){re&&P(e),oe&&oe.d(),re&&x&&x.end(),X=!1,De(ye)}}}function fo(r){let e,t,s;return{c(){e=h("div"),t=h("div"),s=se(r[6]),f(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-19yamth"),f(e,"class","d-flex justify-content-center")},m(n,i){E(n,e,i),d(e,t),d(t,s)},p(n,i){i[0]&64&&le(s,n[6])},d(n){n&&P(e)}}}function ho(r){let e,t;return{c(){e=h("div"),t=se(r[5]),f(e,"class","alert alert-danger p-1 text-center svelte-19yamth")},m(s,n){E(s,e,n),d(e,t)},p(s,n){n[0]&32&&le(t,s[5])},d(s){s&&P(e)}}}function dp(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te,x,q,X,ye,oe,re=r[4]&&uo(r);const fe=[up,cp],Le=[];function Ce(ee,ue){return ee[0]?1:0}return B=Ce(r),R=Le[B]=fe[B](r),{c(){e=h("main"),t=h("div"),s=h("div"),n=h("h2"),n.textContent="Login",i=y(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',c=y(),u=h("input"),m=y(),_=h("label"),_.textContent="Username",g=y(),p=h("div"),v=h("span"),v.innerHTML='<i class="bi bi-eye"></i>',w=y(),b=h("input"),k=y(),$=h("label"),$.textContent="Password",C=y(),re&&re.c(),S=y(),T=h("button"),T.textContent="Login",j=y(),A=h("div"),F=h("p"),Z=se("Don't have an account? "),H=h("a"),H.textContent="Register",K=y(),R.c(),D=y(),z=h("div"),te=h("button"),te.textContent="Client",x=y(),q=h("button"),q.textContent="Staff",f(n,"class","svelte-19yamth"),f(a,"class","icon svelte-19yamth"),f(u,"type","text"),f(u,"id","usernameLogin"),u.required=!0,f(u,"autocomplete","off"),f(u,"class","svelte-19yamth"),f(_,"for","usernameLogin"),f(_,"class","svelte-19yamth"),f(l,"class","input-box svelte-19yamth"),f(v,"class","icon svelte-19yamth"),f(b,"minlength","6"),f(b,"maxlength","12"),f(b,"type","password"),f(b,"id","passwordLogin"),b.required=!0,f(b,"autocomplete","off"),f(b,"class","svelte-19yamth"),f($,"for","passwordLogin"),f($,"class","svelte-19yamth"),f(p,"class","input-box svelte-19yamth"),f(T,"type","submit"),f(T,"class","bton svelte-19yamth"),f(T,"id","loginBton"),f(H,"href","./#/"),f(H,"class","register-link svelte-19yamth"),f(A,"class","login-register svelte-19yamth"),f(o,"id","form"),f(s,"class","form-box login svelte-19yamth"),f(t,"class",I="wrapper "+r[1]+" active-popup "+r[10]+" svelte-19yamth"),f(te,"class","m-2 btn btn-primary btn-lg"),f(q,"class","m-2 btn btn-danger btn-lg"),f(z,"class","d-none"),f(e,"class","svelte-19yamth")},m(ee,ue){E(ee,e,ue),d(e,t),d(t,s),d(s,n),d(s,i),d(s,o),d(o,l),d(l,a),d(l,c),d(l,u),J(u,r[2]),d(l,m),d(l,_),d(o,g),d(o,p),d(p,v),d(p,w),d(p,b),J(b,r[3]),d(p,k),d(p,$),d(o,C),re&&re.m(o,null),d(o,S),d(o,T),d(o,j),d(o,A),d(A,F),d(F,Z),d(F,H),d(t,K),Le[B].m(t,null),d(e,D),d(e,z),d(z,te),d(z,x),d(z,q),ye||(oe=[G(u,"input",r[18]),G(b,"keyup",r[19]),G(b,"input",r[20]),G(H,"click",r[13]),G(o,"submit",er(r[14])),G(te,"click",r[28]),G(q,"click",r[29])],ye=!0)},p(ee,ue){ue[0]&4&&u.value!==ee[2]&&J(u,ee[2]),ue[0]&8&&b.value!==ee[3]&&J(b,ee[3]),ee[4]?re?re.p(ee,ue):(re=uo(ee),re.c(),re.m(o,S)):re&&(re.d(1),re=null);let we=B;B=Ce(ee),B===we?Le[B].p(ee,ue):(Oe(),M(Le[we],1,1,()=>{Le[we]=null}),Te(),R=Le[B],R?R.p(ee,ue):(R=Le[B]=fe[B](ee),R.c()),O(R,1),R.m(t,null)),ue[0]&1026&&I!==(I="wrapper "+ee[1]+" active-popup "+ee[10]+" svelte-19yamth")&&f(t,"class",I)},i(ee){O(R),ee&&(X||Ee(()=>{X=Ue(e,Fe,{duration:500}),X.start()}))},o(ee){M(R)},d(ee){ee&&P(e),re&&re.d(),Le[B].d(),ye=!1,De(oe)}}}const fp=()=>{},hp=()=>{},mp=()=>{};function _p(r,e,t){let s;document.querySelector("body").setAttribute("data-bs-theme","dark"),vl("/");function n(x){Rt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",x)}function i(x){Rt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",x)}let o=!0,l="";function a(){t(17,o=!o)}let c,u;async function m(){const{data:x,error:q}=await ae.from("user_level").select("account_type, user_id").eq("username",c).eq("password",u).maybeSingle();if(q){console.error(q);return}if(!x&&await g(c)){t(4,p="Wrong password.");return}else if(!x){t(4,p="User does not exist.");return}x.account_type=="student"?n(x.user_id):x.account_type=="staff"?i(x.user_id):console.error(x)}let _=!1;async function g(x){const{data:q,error:X}=await ae.from("user_level").select().eq("username",x);return X&&console.error(X),q.length>0}let p,v,w,b,k,$,C;async function S(){if(await g(b)){t(5,v="Username already exists.");return}else if(k!=$){t(5,v="Password does not match.");return}t(0,_=!_)}async function T(){const{data:x,error:q}=await ae.from("user_level").select().eq("username",C);if(x.length==0){t(6,w="Student ID already exists");return}}function j(){c=this.value,t(2,c)}const A=()=>t(4,p="");function F(){u=this.value,t(3,u)}const Z=()=>t(5,v="");function H(){b=this.value,t(7,b)}const K=()=>t(5,v="");function B(){k=this.value,t(8,k)}const R=()=>t(5,v="");function I(){$=this.value,t(9,$)}const D=()=>t(0,_=!_),z=()=>n("263690"),te=()=>i("153827");return r.$$.update=()=>{r.$$.dirty[0]&131072&&t(1,l=o?"":"active"),r.$$.dirty[0]&131073&&t(10,s=_&&!o?"moreinfo":"")},[_,l,c,u,p,v,w,b,k,$,s,n,i,a,m,S,T,o,j,A,F,Z,H,K,B,R,I,D,z,te]}class pp extends be{constructor(e){super(),ge(this,e,_p,dp,pe,{},null,[-1,-1])}}function gp(r){let e,t,s,n,i,o,l,a,c,u,m,_;const g=r[4].default,p=ds(g,r,r[3],null);return{c(){e=h("div"),t=h("label"),s=se(r[0]),n=y(),i=h("div"),p&&p.c(),o=y(),l=h("div"),a=h("button"),c=se(r[2]),f(t,"class","col-sm-4 col-md-3 col-form-label"),f(t,"for",r[1]),f(i,"class","col-sm-5 col-md-6 col-9"),f(a,"class","w-100 btn btn-outline-primary"),f(l,"class","col-sm-3 col-md-3 col-auto"),f(e,"class","mb-4 row justify-content-center")},m(v,w){E(v,e,w),d(e,t),d(t,s),d(e,n),d(e,i),p&&p.m(i,null),d(e,o),d(e,l),d(l,a),d(a,c),u=!0,m||(_=G(a,"click",r[5]),m=!0)},p(v,[w]){(!u||w&1)&&le(s,v[0]),(!u||w&2)&&f(t,"for",v[1]),p&&p.p&&(!u||w&8)&&hs(p,g,v,v[3],u?fs(g,v[3],w,null):ms(v[3]),null),(!u||w&4)&&le(c,v[2])},i(v){u||(O(p,v),u=!0)},o(v){M(p,v),u=!1},d(v){v&&P(e),p&&p.d(v),m=!1,_()}}}function bp(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){ss.call(this,r,c)}return r.$$set=c=>{"label"in c&&t(0,i=c.label),"id"in c&&t(1,o=c.id),"button"in c&&t(2,l=c.button),"$$scope"in c&&t(3,n=c.$$scope)},[i,o,l,n,s,a]}class vp extends be{constructor(e){super(),ge(this,e,bp,gp,pe,{label:0,id:1,button:2})}}function yp(r){let e,t,s,n,i,o,l,a;return{c(){e=h("div"),t=h("div"),s=h("b"),n=se(r[0]),i=se(":"),o=y(),l=h("div"),a=se(r[1]),f(t,"class","col-sm-4 col-md-4"),f(l,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(c,u){E(c,e,u),d(e,t),d(t,s),d(s,n),d(s,i),d(e,o),d(e,l),d(l,a)},p(c,[u]){u&1&&le(n,c[0]),u&2&&le(a,c[1])},i:U,o:U,d(c){c&&P(e)}}}function wp(r,e,t){let{key:s}=e,{value:n}=e;return r.$$set=i=>{"key"in i&&t(0,s=i.key),"value"in i&&t(1,n=i.value)},[s,n]}class qe extends be{constructor(e){super(),ge(this,e,wp,yp,pe,{key:0,value:1})}}function kp(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.textContent="Cannot Find Reservation",f(e,"class",t="form-control "+r[9]),f(e,"type","number"),f(e,"id","reserve"),f(e,"placeholder","e.g 300xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[4]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",r[18]),G(e,"keyup",r[19])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&f(e,"class",t),a[0]&16&&_s(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function $p(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.textContent="Cannot Find Student",f(e,"class",t="form-control "+r[10]),f(e,"type","text"),f(e,"id","stud-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[5]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",r[20]),G(e,"keyup",r[21])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&f(e,"class",t),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function Sp(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.textContent="Cannot Find Book",f(e,"class",t="form-control "+r[11]),f(e,"type","text"),f(e,"id","book-barcode"),f(e,"placeholder","e.g 1000xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[6]),E(l,s,a),E(l,n,a),i||(o=[G(e,"input",r[22]),G(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&f(e,"class",t),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function mo(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C;return n=new qe({props:{key:"Borrow ID",value:r[3]}}),o=new qe({props:{key:"Name",value:r[7]}}),a=new qe({props:{key:"Book Title",value:r[8]+" ("+r[6]+")"}}),u=new qe({props:{key:"Staff Name",value:"Francis James E. Salles ("+r[14]+")"}}),_=new qe({props:{key:"Borrow Date",value:W(r[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new qe({props:{key:"Return Due",value:W(r[1]).format("MMMM DD, YYYY")+" ("+r[12]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",s=y(),N(n.$$.fragment),i=y(),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),g=y(),N(p.$$.fragment),v=y(),w=h("div"),b=h("button"),b.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',f(t,"class","py-4 text-center"),f(b,"class","btn btn-secondary"),f(w,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(S,T){E(S,e,T),d(e,t),d(e,s),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),d(e,c),L(u,e,null),d(e,m),L(_,e,null),d(e,g),L(p,e,null),d(e,v),d(e,w),d(w,b),k=!0,$||(C=G(b,"click",r[17]),$=!0)},p(S,T){const j={};T[0]&8&&(j.value=S[3]),n.$set(j);const A={};T[0]&128&&(A.value=S[7]),o.$set(A);const F={};T[0]&320&&(F.value=S[8]+" ("+S[6]+")"),a.$set(F);const Z={};T[0]&1&&(Z.value=W(S[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(Z);const H={};T[0]&4098&&(H.value=W(S[1]).format("MMMM DD, YYYY")+" ("+S[12]+" days)"),p.$set(H)},i(S){k||(O(n.$$.fragment,S),O(o.$$.fragment,S),O(a.$$.fragment,S),O(u.$$.fragment,S),O(_.$$.fragment,S),O(p.$$.fragment,S),k=!0)},o(S){M(n.$$.fragment,S),M(o.$$.fragment,S),M(a.$$.fragment,S),M(u.$$.fragment,S),M(_.$$.fragment,S),M(p.$$.fragment,S),k=!1},d(S){S&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),Y(p),$=!1,C()}}}function Op(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te,x,q,X,ye,oe,re,fe,Le;t=new Ke({props:{text:"Borrow Book"}}),o=new vp({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[kp]},$$scope:{ctx:r}}}),o.$on("click",r[16]),u=new Ie({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[$p]},$$scope:{ctx:r}}}),_=new Ie({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Sp]},$$scope:{ctx:r}}});let Ce=r[2]&&mo(r);return{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),N(o.$$.fragment),l=y(),a=h("hr"),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),g=y(),p=h("div"),v=h("label"),v.textContent="Borrow Date:",w=y(),b=h("div"),k=h("input"),C=y(),S=h("div"),T=h("button"),T.textContent="Today",j=y(),A=h("div"),F=h("label"),F.textContent="Return Due:",Z=y(),H=h("div"),K=h("input"),R=y(),I=h("div"),D=h("button"),D.textContent=`~${an} Days`,z=y(),te=h("div"),x=h("button"),x.innerHTML='<i class="bi bi-receipt"></i> Borrow',q=y(),X=h("a"),X.innerHTML='<i class="bi bi-x-circle"></i> Cancel',ye=y(),Ce&&Ce.c(),f(a,"class","mb-4"),f(v,"class","col-sm-4 col-md-3 col-form-label"),f(v,"for","borrow-date"),f(k,"class","form-control"),f(k,"type","datetime-local"),f(k,"id","borrow-date"),f(k,"max",$=W(r[1]).format("YYYY-MM-DD HH:mm")),f(b,"class","col-sm-5 col-md-6 col-7"),f(T,"class","w-100 btn btn-outline-primary"),f(S,"class","col-sm-3 col-md-3 col-auto"),f(p,"class","mb-4 row justify-content-center"),f(F,"class","col-sm-4 col-md-3 col-form-label"),f(F,"for","return-date"),f(K,"class","form-control"),f(K,"type","date"),f(K,"id","return-date"),f(K,"min",B=W(r[0]).format("YYYY-MM-DD")),f(H,"class","col-sm-5 col-md-6 col-7"),f(D,"class","w-100 btn btn-outline-primary"),f(I,"class","col-sm-3 col-md-3 col-auto"),f(A,"class","mb-4 row justify-content-center"),f(x,"class","btn btn-success"),f(X,"href","./#/"),f(X,"class","btn btn-danger"),f(te,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(ee,ue){E(ee,e,ue),L(t,e,null),d(e,s),d(e,n),d(n,i),L(o,i,null),d(i,l),d(i,a),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,w),d(p,b),d(b,k),J(k,r[0]),d(p,C),d(p,S),d(S,T),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),d(H,K),J(K,r[1]),d(A,R),d(A,I),d(I,D),d(i,z),d(i,te),d(te,x),d(te,q),d(te,X),d(n,ye),Ce&&Ce.m(n,null),re=!0,fe||(Le=[G(k,"input",r[24]),G(T,"click",r[25]),G(K,"input",r[26]),G(D,"click",r[27]),G(x,"click",r[28])],fe=!0)},p(ee,ue){const we={};ue[0]&528|ue[1]&2&&(we.$$scope={dirty:ue,ctx:ee}),o.$set(we);const ce={};ue[0]&1056|ue[1]&2&&(ce.$$scope={dirty:ue,ctx:ee}),u.$set(ce);const ie={};ue[0]&2112|ue[1]&2&&(ie.$$scope={dirty:ue,ctx:ee}),_.$set(ie),(!re||ue[0]&2&&$!==($=W(ee[1]).format("YYYY-MM-DD HH:mm")))&&f(k,"max",$),ue[0]&1&&J(k,ee[0]),(!re||ue[0]&1&&B!==(B=W(ee[0]).format("YYYY-MM-DD")))&&f(K,"min",B),ue[0]&2&&J(K,ee[1]),ee[2]?Ce?(Ce.p(ee,ue),ue[0]&4&&O(Ce,1)):(Ce=mo(ee),Ce.c(),O(Ce,1),Ce.m(n,null)):Ce&&(Oe(),M(Ce,1,1,()=>{Ce=null}),Te())},i(ee){re||(O(t.$$.fragment,ee),O(o.$$.fragment,ee),O(u.$$.fragment,ee),O(_.$$.fragment,ee),O(Ce),ee&&(oe||Ee(()=>{oe=Ue(e,Fe,{duration:500}),oe.start()})),re=!0)},o(ee){M(t.$$.fragment,ee),M(o.$$.fragment,ee),M(u.$$.fragment,ee),M(_.$$.fragment,ee),M(Ce),re=!1},d(ee){ee&&P(e),Y(t),Y(o),Y(u),Y(_),Ce&&Ce.d(),fe=!1,De(Le)}}}const an=14;function _o(){return"400"+Math.floor(Math.random()*9e3)}function Tp(r,e,t){let s,n;cn(r,No,x=>t(29,n=x));const i=W().format("YYYY-MM-DD HH:mm");let o=i,l=W(i).add(an,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,m,_,g;const p=new URLSearchParams(n);m=p.get("reserve_id")||"",g=p.get("barcode")||"";let v,w,b,k,$;async function C(){const{data:x,error:q}=await ae.from("account_details").select("fname, lname").eq("user_id",_).single();q?(t(10,k="is-invalid"),console.error(q)):t(7,v=`${x.fname} ${x.lname}`);const{data:X,error:ye}=await ae.from("library_holdings").select("books(title)").eq("barcode",g).single();ye||!X?(t(11,$="is-invalid"),console.error(ye)):t(8,w=X.books.title),(!ye||!q)&&(t(3,u=await j()),t(2,c=!c))}async function S(){const{data:x,error:q}=await ae.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();q||!x?(t(9,b="is-invalid"),console.error(q)):(t(5,_=x.stud_id),t(6,g=x.library_holdings.barcode),C())}async function T(){const{data:x,error:q}=await ae.from("library_holdings").select("holding_id").eq("barcode",g).single();q&&console.error(q);const X=W(o).format("YYYY-MM-DDTHH:MMZ"),ye=W(l).format("YYYY-MM-DDTHH:MMZ"),{error:oe}=await ae.from("book_borrow").insert({borrow_id:u,stud_id:_,holding_id:x.holding_id,staff_id:a,borrow_date:X,due_date:ye});if(oe){console.error(oe);return}const{data:re,error:fe}=await ae.from("book_reservation").update({staff_id:a,release_date:X,active:!1}).eq("active",!0).eq("holding_id",x.holding_id).select();if(console.log("updated Rows:",re),fe){console.error(fe);return}const{error:Le}=await ae.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",x.holding_id);Le&&console.error(Le)}async function j(){let x=_o();const{data:q,error:X}=await ae.from("book_borrow").select().eq("borrow_id",x);return console.log(q),q.length!=0&&(x=_o(),console.log("exists")),console.log(x),x}function A(){m=_s(this.value),t(4,m)}const F=()=>t(9,b="");function Z(){_=this.value,t(5,_)}const H=()=>t(10,k="");function K(){g=this.value,t(6,g)}const B=()=>t(11,$="");function R(){o=this.value,t(0,o)}const I=()=>t(0,o=i);function D(){l=this.value,t(1,l)}const z=()=>t(1,l=W(o).add(an,"days").format("YYYY-MM-DD")),te=()=>{C()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(12,s=W(l).diff(W(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,m,_,g,v,w,b,k,$,s,i,a,C,S,T,A,F,Z,H,K,B,R,I,D,z,te]}class Dp extends be{constructor(e){super(),ge(this,e,Tp,Op,pe,{},null,[-1,-1])}}function Mp(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=y(),n=h("div"),n.textContent="Borrow ID not found.",f(e,"class",t="form-control "+r[4]),f(e,"type","text"),f(e,"id","book-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,r[3]),E(l,s,a),E(l,n,a),i||(o=[G(e,"keyup",r[19]),G(e,"input",r[20])],i=!0)},p(l,a){a&16&&t!==(t="form-control "+l[4])&&f(e,"class",t),a&8&&e.value!==l[3]&&J(e,l[3])},d(l){l&&(P(e),P(s),P(n)),i=!1,De(o)}}}function Cp(r){let e,t,s,n,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",s=h("option"),s.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",J(t,t.__value),s.__value="Good",J(s,s.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),f(e,"class","form-select"),f(e,"id","book-condition"),r[12]===void 0&&Ee(()=>r[21].call(e))},m(a,c){E(a,e,c),d(e,t),d(e,s),d(e,n),d(e,i),Xn(e,r[12],!0),o||(l=G(e,"change",r[21]),o=!0)},p(a,c){c&4096&&Xn(e,a[12])},d(a){a&&P(e),o=!1,l()}}}function Pp(r){let e,t,s;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"rows","3"),f(e,"id","book-note")},m(n,i){E(n,e,i),J(e,r[11]),t||(s=G(e,"input",r[22]),t=!0)},p(n,i){i&2048&&J(e,n[11])},d(n){n&&P(e),t=!1,s()}}}function po(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K;n=new qe({props:{key:"Borrow ID",value:r[3]}}),o=new qe({props:{key:"Return ID",value:r[6]}}),a=new qe({props:{key:"Name",value:r[10]+" ("+r[9]+")"}}),u=new qe({props:{key:"Book Title",value:r[7]+" ("+r[8]+")"}}),_=new qe({props:{key:"Condition",value:r[12]}});let B=r[11]&&go(r);v=new qe({props:{key:"Received by",value:"Francis James E. Salles ("+r[16]+")"}}),b=new qe({props:{key:"Return Due",value:W(r[1]).format("MMMM DD, YYYY")}}),$=new qe({props:{key:"Return Date",value:W(r[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(r[2]>0?`+${r[2]}`:r[2])+" days)"}});let R=r[2]<0&&bo(r),I=r[2]<0&&vo();return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",s=y(),N(n.$$.fragment),i=y(),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),g=y(),B&&B.c(),p=y(),N(v.$$.fragment),w=y(),N(b.$$.fragment),k=y(),N($.$$.fragment),C=y(),R&&R.c(),S=y(),T=h("div"),j=h("button"),j.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',A=y(),I&&I.c(),f(t,"class","py-4 text-center"),f(j,"class","btn btn-success"),f(T,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(D,z){E(D,e,z),d(e,t),d(e,s),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),d(e,c),L(u,e,null),d(e,m),L(_,e,null),d(e,g),B&&B.m(e,null),d(e,p),L(v,e,null),d(e,w),L(b,e,null),d(e,k),L($,e,null),d(e,C),R&&R.m(e,null),d(e,S),d(e,T),d(T,j),d(T,A),I&&I.m(T,null),Z=!0,H||(K=G(j,"click",r[18]),H=!0)},p(D,z){const te={};z&8&&(te.value=D[3]),n.$set(te);const x={};z&64&&(x.value=D[6]),o.$set(x);const q={};z&1536&&(q.value=D[10]+" ("+D[9]+")"),a.$set(q);const X={};z&384&&(X.value=D[7]+" ("+D[8]+")"),u.$set(X);const ye={};z&4096&&(ye.value=D[12]),_.$set(ye),D[11]?B?(B.p(D,z),z&2048&&O(B,1)):(B=go(D),B.c(),O(B,1),B.m(e,p)):B&&(Oe(),M(B,1,1,()=>{B=null}),Te());const oe={};z&2&&(oe.value=W(D[1]).format("MMMM DD, YYYY")),b.$set(oe);const re={};z&5&&(re.value=W(D[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(D[2]>0?`+${D[2]}`:D[2])+" days)"),$.$set(re),D[2]<0?R?R.p(D,z):(R=bo(D),R.c(),R.m(e,S)):R&&(R.d(1),R=null),D[2]<0?I||(I=vo(),I.c(),I.m(T,null)):I&&(I.d(1),I=null)},i(D){Z||(O(n.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),O(B),O(v.$$.fragment,D),O(b.$$.fragment,D),O($.$$.fragment,D),D&&Ee(()=>{Z&&(F||(F=lr(e,dr,{duration:400,y:-60},!0)),F.run(1))}),Z=!0)},o(D){M(n.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),M(B),M(v.$$.fragment,D),M(b.$$.fragment,D),M($.$$.fragment,D),D&&(F||(F=lr(e,dr,{duration:400,y:-60},!1)),F.run(0)),Z=!1},d(D){D&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),B&&B.d(),Y(v),Y(b),Y($),R&&R.d(),I&&I.d(),D&&F&&F.end(),H=!1,K()}}}function go(r){let e,t;return e=new qe({props:{key:"Return Note",value:r[11]}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&2048&&(i.value=s[11]),e.$set(i)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function bo(r){let e,t,s,n,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",s=y(),n=h("div"),i=se(r[14]),o=se(" pesos"),f(t,"class","col-sm-4 col-md-4"),f(n,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(l,a){E(l,e,a),d(e,t),d(e,s),d(e,n),d(n,i),d(n,o)},p(l,a){a&16384&&le(i,l[14])},d(l){l&&P(e)}}}function vo(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay',f(e,"class","btn btn-danger"),f(e,"data-bs-toggle","modal"),f(e,"data-bs-target","#payModal")},m(n,i){E(n,e,i),t||(s=G(e,"click",Ip),t=!0)},d(n){n&&P(e),t=!1,s()}}}function Ep(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","ref")},m(n,i){E(n,e,i),J(e,r[13]),t||(s=G(e,"input",r[25]),t=!0)},p(n,i){i&8192&&e.value!==n[13]&&J(e,n[13])},d(n){n&&P(e),t=!1,s()}}}function Rp(r){let e,t,s,n;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",s=h("option"),s.textContent="GCash",n=h("option"),n.textContent="Bank Transfer",t.__value="cash",J(t,t.__value),s.__value="GCash",J(s,s.__value),n.__value="bank",J(n,n.__value),f(e,"name","payment_method"),f(e,"class","form-select"),f(e,"id","payment_method")},m(i,o){E(i,e,o),d(e,t),d(e,s),d(e,n)},p:U,d(i){i&&P(e)}}}function jp(r){let e,t,s,n,i,o,l,a,c,u,m,_,g;return u=new Ie({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Ep]},$$scope:{ctx:r}}}),_=new Ie({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[Rp]},$$scope:{ctx:r}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",s=y(),n=h("h1"),i=se(""),o=se(r[14]),l=y(),a=h("hr"),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),f(n,"class","text-center"),f(a,"class","my-4"),f(e,"class","container row")},m(p,v){E(p,e,v),d(e,t),d(e,s),d(e,n),d(n,i),d(n,o),d(e,l),d(e,a),d(e,c),L(u,e,null),d(e,m),L(_,e,null),g=!0},p(p,v){(!g||v&16384)&&le(o,p[14]);const w={};v&536879104&&(w.$$scope={dirty:v,ctx:p}),u.$set(w);const b={};v&536870912&&(b.$$scope={dirty:v,ctx:p}),_.$set(b)},i(p){g||(O(u.$$.fragment,p),O(_.$$.fragment,p),g=!0)},o(p){M(u.$$.fragment,p),M(_.$$.fragment,p),g=!1},d(p){p&&P(e),Y(u),Y(_)}}}function Ap(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I,D,z,te;t=new Ke({props:{text:"Return Book"}}),o=new Ie({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Mp]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Cp]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Note:",id:"book-note",$$slots:{default:[Pp]},$$scope:{ctx:r}}});let x=r[5]&&po(r);return R=new Zm({props:{title:"Process Payment",id:"payModal",pButton:"Done",$$slots:{default:[jp]},$$scope:{ctx:r}}}),R.$on("click",Lp),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),_=h("div"),g=h("label"),g.textContent="Return Time:",p=y(),v=h("div"),w=h("input"),b=y(),k=h("div"),$=h("button"),$.textContent="Now",C=y(),S=h("div"),T=h("button"),j=h("i"),A=se(" Preview"),Z=y(),H=h("a"),H.innerHTML='<i class="bi bi-x-circle"></i> Cancel',K=y(),x&&x.c(),B=y(),N(R.$$.fragment),f(g,"class","col-sm-4 col-md-3 col-form-label"),f(g,"for","return-time"),f(w,"class","form-control"),f(w,"type","datetime-local"),f(w,"id","return-time"),f(v,"class","col-sm-5 col-md-6 col-7"),f($,"class","w-100 btn btn-outline-primary"),f(k,"class","col-sm-3 col-md-3 col-auto"),f(_,"class","mb-4 row justify-content-center"),f(j,"class","bi bi-receipt"),f(T,"class",F="btn btn-"+(r[5]?"secondary":"success")),f(H,"href","./#/"),f(H,"class","btn btn-danger"),f(S,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-sm-4"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(q,X){E(q,e,X),L(t,e,null),d(e,s),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),d(i,_),d(_,g),d(_,p),d(_,v),d(v,w),J(w,r[0]),d(_,b),d(_,k),d(k,$),d(i,C),d(i,S),d(S,T),d(T,j),d(T,A),d(S,Z),d(S,H),d(n,K),x&&x.m(n,null),d(e,B),L(R,e,null),D=!0,z||(te=[G(w,"input",r[23]),G($,"click",r[24]),G(T,"click",r[17])],z=!0)},p(q,[X]){const ye={};X&536870936&&(ye.$$scope={dirty:X,ctx:q}),o.$set(ye);const oe={};X&536875008&&(oe.$$scope={dirty:X,ctx:q}),a.$set(oe);const re={};X&536872960&&(re.$$scope={dirty:X,ctx:q}),u.$set(re),X&1&&J(w,q[0]),(!D||X&32&&F!==(F="btn btn-"+(q[5]?"secondary":"success")))&&f(T,"class",F),q[5]?x?(x.p(q,X),X&32&&O(x,1)):(x=po(q),x.c(),O(x,1),x.m(n,null)):x&&(Oe(),M(x,1,1,()=>{x=null}),Te());const fe={};X&536895488&&(fe.$$scope={dirty:X,ctx:q}),R.$set(fe)},i(q){D||(O(t.$$.fragment,q),O(o.$$.fragment,q),O(a.$$.fragment,q),O(u.$$.fragment,q),O(x),O(R.$$.fragment,q),q&&(I||Ee(()=>{I=Ue(e,Fe,{duration:500}),I.start()})),D=!0)},o(q){M(t.$$.fragment,q),M(o.$$.fragment,q),M(a.$$.fragment,q),M(u.$$.fragment,q),M(x),M(R.$$.fragment,q),D=!1},d(q){q&&P(e),Y(t),Y(o),Y(a),Y(u),x&&x.d(),Y(R),z=!1,De(te)}}}function yo(){return"500"+Math.floor(Math.random()*9e3)}const Ip=()=>{},Lp=()=>{};function Yp(r,e,t){let s,n,i;cn(r,No,D=>t(26,i=D));let o=W().format("YYYY-MM-DD HH:mm"),l=o,a="";const c=localStorage.getItem("user_id");let u,m="";u=new URLSearchParams(i).get("borrow_id")||"";let g=!1,p,v,w,b,k,$,C;async function S(){const{data:D,error:z}=await ae.from("book_borrow").select().eq("borrow_id",u).eq("active",!0).maybeSingle();if(!D){t(4,m="is-invalid");return}const{data:te,error:x}=await ae.rpc("getborrowinfo",{borrowid:u});console.error(x),console.table(te);let q=te[0];t(10,k=`${q.fname} ${q.lname}`),t(9,b=q.stud_id),t(7,v=q.title),t(8,w=q.barcode),t(1,a=q.due_date),t(6,p=await j()),t(5,g=!0)}async function T(){const{data:D,error:z}=await ae.from("book_return").insert({return_id:await j(),borrow_id:u,staff_id:c,note:$,return_date:W(l).format("YYYY-MM-DDTHH:MMZ"),condition:C}).select();if(z){console.error(z);return}console.table(D);const{data:te,error:x}=await ae.from("library_holdings").update({status:"Available",condition:C}).eq("barcode",w).select(),{data:q,error:X}=await ae.from("book_borrow").update({active:!1}).eq("borrow_id",u).select();if(x||X){console.error(x),console.error(X);return}console.log(te,q)}async function j(){let D=yo();const{data:z,error:te}=await ae.from("book_return").select().eq("return_id",D);return console.log(z),z.length!=0&&(D=yo(),console.log("exists")),console.log(D),D}let A;const F=()=>t(4,m="");function Z(){u=this.value,t(3,u)}function H(){C=rl(this),t(12,C)}function K(){$=this.value,t(11,$)}function B(){l=this.value,t(0,l)}const R=()=>t(0,l=o);function I(){A=this.value,t(13,A)}return r.$$.update=()=>{r.$$.dirty&3&&t(2,s=W(l).diff(W(a),"days")*-1),r.$$.dirty&4&&t(14,n=s*-50)},[l,a,s,u,m,g,p,v,w,b,k,$,C,A,n,o,c,S,T,F,Z,H,K,B,R,I]}class Np extends be{constructor(e){super(),ge(this,e,Yp,Ap,pe,{})}}function Up(r){let e,t,s,n;return{c(){e=h("input"),f(e,"class",t="form-control "+r[7]),f(e,"type","text"),f(e,"id","author-name")},m(i,o){E(i,e,o),J(e,r[4]),s||(n=[G(e,"input",r[11]),G(e,"keyup",r[12])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&f(e,"class",t),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),s=!1,De(n)}}}function Fp(r){let e,t,s,n;return{c(){e=h("textarea"),f(e,"class",t="form-control "+r[8]),f(e,"id","author-bio"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,r[5]),s||(n=[G(e,"input",r[13]),G(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&f(e,"class",t),o&32&&J(e,i[5])},d(i){i&&P(e),s=!1,De(n)}}}function xp(r){let e,t,s,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","author-link"),f(e,"class",t="form-control "+r[9])},m(i,o){E(i,e,o),J(e,r[6]),s||(n=[G(e,"input",r[15]),G(e,"keyup",r[16])],s=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&f(e,"class",t),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),s=!1,De(n)}}}function Hp(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","author-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),r[18](e),t||(s=G(e,"change",r[17]),t=!0)},p:U,d(n){n&&P(e),r[18](null),t=!1,s()}}}function Wp(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I;return t=new Ke({props:{text:"Add Author"}}),o=new Ie({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Up]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Fp]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Author Link:",id:"author-link",$$slots:{default:[xp]},$$scope:{ctx:r}}}),_=new Ie({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Hp]},$$scope:{ctx:r}}}),{c(){e=h("section"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),g=y(),p=h("div"),v=h("label"),v.textContent="Preview:",w=y(),b=h("div"),k=h("img"),C=y(),S=h("button"),S.textContent="Remove",j=y(),A=h("div"),F=h("button"),F.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',Z=y(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(k.src,$=r[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+r[2]),f(F,"class","btn btn-success"),f(H,"href","./#/"),f(A,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,z){E(D,e,z),L(t,e,null),d(e,s),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,w),d(p,b),d(b,k),d(b,C),d(b,S),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),B=!0,R||(I=[G(S,"click",r[19]),G(F,"click",r[10])],R=!0)},p(D,[z]){const te={};z&1048720&&(te.$$scope={dirty:z,ctx:D}),o.$set(te);const x={};z&1048864&&(x.$$scope={dirty:z,ctx:D}),a.$set(x);const q={};z&1049152&&(q.$$scope={dirty:z,ctx:D}),u.$set(q);const X={};z&1048579&&(X.$$scope={dirty:z,ctx:D}),_.$set(X),(!B||z&8&&!Xe(k.src,$=D[3]))&&f(k,"src",$),(!B||z&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){B||(O(t.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),B=!0)},o(D){M(t.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),B=!1},d(D){D&&P(e),Y(t),Y(o),Y(a),Y(u),Y(_),R=!1,De(I)}}}function Bp(r,e,t){let s,n,i="d-none",o,l,a,c,u,m,_;async function g(){t(7,u=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,t(4,l)}const v=()=>t(7,u="");function w(){a=this.value,t(5,a)}const b=()=>t(8,m="");function k(){c=this.value,t(6,c)}const $=()=>t(9,_="");function C(){s=this.files,t(0,s)}function S(j){ar[j?"unshift":"push"](()=>{n=j,t(1,n)})}const T=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const j=URL.createObjectURL(s[0]);t(3,o=j)}else t(2,i="d-none")},[s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T]}class qp extends be{constructor(e){super(),ge(this,e,Bp,Wp,pe,{})}}function Vp(r){let e,t,s,n;return{c(){e=h("input"),f(e,"class",t="form-control "+r[7]),f(e,"type","text"),f(e,"id","publisher-name")},m(i,o){E(i,e,o),J(e,r[4]),s||(n=[G(e,"input",r[11]),G(e,"keyup",r[12])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&f(e,"class",t),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),s=!1,De(n)}}}function zp(r){let e,t,s,n;return{c(){e=h("textarea"),f(e,"class",t="form-control "+r[8]),f(e,"id","publisher-description"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,r[5]),s||(n=[G(e,"input",r[13]),G(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&f(e,"class",t),o&32&&J(e,i[5])},d(i){i&&P(e),s=!1,De(n)}}}function Gp(r){let e,t,s,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","publisher-link"),f(e,"class",t="form-control "+r[9])},m(i,o){E(i,e,o),J(e,r[6]),s||(n=[G(e,"input",r[15]),G(e,"keyup",r[16])],s=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&f(e,"class",t),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),s=!1,De(n)}}}function Jp(r){let e,t,s;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","publisher-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),r[18](e),t||(s=G(e,"change",r[17]),t=!0)},p:U,d(n){n&&P(e),r[18](null),t=!1,s()}}}function Kp(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B,R,I;return t=new Ke({props:{text:"Add Publisher"}}),o=new Ie({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Vp]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[zp]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Gp]},$$scope:{ctx:r}}}),_=new Ie({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[Jp]},$$scope:{ctx:r}}}),{c(){e=h("section"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),N(o.$$.fragment),l=y(),N(a.$$.fragment),c=y(),N(u.$$.fragment),m=y(),N(_.$$.fragment),g=y(),p=h("div"),v=h("label"),v.textContent="Preview:",w=y(),b=h("div"),k=h("img"),C=y(),S=h("button"),S.textContent="Remove",j=y(),A=h("div"),F=h("button"),F.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',Z=y(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Xe(k.src,$=r[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+r[2]),f(F,"class","btn btn-success"),f(H,"href","./#/"),f(A,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,z){E(D,e,z),L(t,e,null),d(e,s),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,w),d(p,b),d(b,k),d(b,C),d(b,S),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),B=!0,R||(I=[G(S,"click",r[19]),G(F,"click",r[10])],R=!0)},p(D,[z]){const te={};z&1048720&&(te.$$scope={dirty:z,ctx:D}),o.$set(te);const x={};z&1048864&&(x.$$scope={dirty:z,ctx:D}),a.$set(x);const q={};z&1049152&&(q.$$scope={dirty:z,ctx:D}),u.$set(q);const X={};z&1048579&&(X.$$scope={dirty:z,ctx:D}),_.$set(X),(!B||z&8&&!Xe(k.src,$=D[3]))&&f(k,"src",$),(!B||z&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){B||(O(t.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),B=!0)},o(D){M(t.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),B=!1},d(D){D&&P(e),Y(t),Y(o),Y(a),Y(u),Y(_),R=!1,De(I)}}}function Zp(r,e,t){let s,n,i="d-none",o,l,a,c,u,m,_;async function g(){t(7,u=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,t(4,l)}const v=()=>t(7,u="");function w(){a=this.value,t(5,a)}const b=()=>t(8,m="");function k(){c=this.value,t(6,c)}const $=()=>t(9,_="");function C(){s=this.files,t(0,s)}function S(j){ar[j?"unshift":"push"](()=>{n=j,t(1,n)})}const T=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const j=URL.createObjectURL(s[0]);t(3,o=j)}else t(2,i="d-none")},[s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T]}class Qp extends be{constructor(e){super(),ge(this,e,Zp,Kp,pe,{})}}function wo(r,e,t){const s=r.slice();return s[2]=e[t][0],s[3]=e[t][1],s}function Xp(r){return{c:U,m:U,p:U,d:U}}function eg(r){let e,t=Se(Object.entries(r[1])),s=[];for(let n=0;n<t.length;n+=1)s[n]=ko(wo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=We()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);E(n,e,i)},p(n,i){if(i&1){t=Se(Object.entries(n[1]));let o;for(o=0;o<t.length;o+=1){const l=wo(n,t,o);s[o]?s[o].p(l,i):(s[o]=ko(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&P(e),Ve(s,n)}}}function ko(r){let e,t,s,n,i,o,l,a,c,u,m,_,g;return{c(){e=h("tr"),t=h("td"),t.textContent=`${r[3].isbn}`,s=y(),n=h("td"),n.textContent=`${r[3].title}`,i=y(),o=h("td"),o.textContent=`${r[3].available}`,l=y(),a=h("td"),a.textContent=`${r[3].reserved}`,c=y(),u=h("td"),u.textContent=`${r[3].borrowed}`,m=y(),_=h("td"),_.textContent=`${r[3].total}`,g=y(),f(t,"class","d-none d-sm-table-cell"),f(_,"class","fw-bold")},m(p,v){E(p,e,v),d(e,t),d(e,s),d(e,n),d(e,i),d(e,o),d(e,l),d(e,a),d(e,c),d(e,u),d(e,m),d(e,_),d(e,g)},p:U,d(p){p&&P(e)}}}function tg(r){return{c:U,m:U,p:U,d:U}}function rg(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b,k,$,C,S,T,j,A,F,Z,H,K,B;t=new Ke({props:{text:"Books Report"}});let R={ctx:r,current:null,token:null,hasCatch:!1,pending:tg,then:eg,catch:Xp,value:1};return zr(r[0](),R),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),i.textContent="Filters:",o=y(),l=h("div"),a=h("select"),c=h("option"),c.textContent="Total",u=h("option"),u.textContent="Available",m=h("option"),m.textContent="Reserved",_=h("option"),_.textContent="Borrowed",g=y(),p=h("div"),v=h("select"),w=h("option"),w.textContent="Ascending",b=h("option"),b.textContent="Descending",k=y(),$=h("form"),$.innerHTML='<input type="text" placeholder="Search title..." name="search" class="form-control"/> <button type="submit" class="btn btn-outline-success"><i class="bi bi-search"></i></button>',C=y(),S=h("div"),T=h("table"),j=h("thead"),j.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-none d-sm-table-cell">ISBN</th> <th class="py-3 col-5">Book Title</th> <th class="py-3 col-1 text-bg-success">Available</th> <th class="py-3 col-1 text-bg-secondary">Reserved</th> <th class="py-3 col-1 text-bg-danger">Borrowed</th> <th class="py-3 col-1 text-bg-primary">Total</th></tr>',A=y(),F=h("tbody"),R.block.c(),c.__value="",J(c,c.__value),u.__value="",J(u,u.__value),m.__value="",J(m,m.__value),_.__value="",J(_,_.__value),f(a,"name","filter"),f(a,"class","form-select"),w.__value="",J(w,w.__value),b.__value="",J(b,b.__value),f(v,"name","order"),f(v,"class","form-select"),f($,"class","d-flex ms-3"),f(n,"class","d-flex justify-content-end align-items-center gap-2 mb-3"),f(T,"class","table table-bordered table-striped table-hover text-center align-middle"),f(S,"class","table-responsive"),f(e,"class","container")},m(I,D){E(I,e,D),L(t,e,null),d(e,s),d(e,n),d(n,i),d(n,o),d(n,l),d(l,a),d(a,c),d(a,u),d(a,m),d(a,_),d(n,g),d(n,p),d(p,v),d(v,w),d(v,b),d(n,k),d(n,$),d(e,C),d(e,S),d(S,T),d(T,j),d(T,A),d(T,F),R.block.m(F,R.anchor=null),R.mount=()=>F,R.anchor=null,H=!0,K||(B=G($,"submit",er(sg)),K=!0)},p(I,[D]){r=I,Gr(R,r,D)},i(I){H||(O(t.$$.fragment,I),I&&(Z||Ee(()=>{Z=Ue(e,Fe,{duration:500}),Z.start()})),H=!0)},o(I){M(t.$$.fragment,I),H=!1},d(I){I&&P(e),Y(t),R.block.d(),R.token=null,R=null,K=!1,B()}}}const sg=()=>{};function ng(r){async function e(){const{data:t,error:s}=await ae.rpc("getbooksreport");if(s){console.error(s);return}return console.table(t),t}return[e]}class ig extends be{constructor(e){super(),ge(this,e,ng,rg,pe,{})}}function og(r){let e,t,s,n,i,o,l,a,c,u,m,_,g,p,v,w,b;return t=new Ke({props:{text:"Payments Report"}}),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("div"),i=h("div"),o=h("div"),o.textContent="Overall Total Payment",l=y(),a=h("h1"),a.textContent=`${ag}`,c=y(),u=h("div"),m=h("div"),m.textContent="Total Late Returns",_=y(),g=h("h1"),g.textContent=`${lg}`,p=y(),v=h("table"),v.innerHTML='<thead><tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr></thead> <tbody><tr><td>091238120</td> <td>Francis James E. Salles</td> <td>200</td> <td>4</td></tr></tbody>',f(n,"class","d-flex justify-content-center gap-5 my-3"),f(v,"class","table table-bordered table-striped text-center"),f(e,"class","container")},m(k,$){E(k,e,$),L(t,e,null),d(e,s),d(e,n),d(n,i),d(i,o),d(i,l),d(i,a),d(n,c),d(n,u),d(u,m),d(u,_),d(u,g),d(e,p),d(e,v),b=!0},p:U,i(k){b||(O(t.$$.fragment,k),k&&(w||Ee(()=>{w=Ue(e,Fe,{duration:500}),w.start()})),b=!0)},o(k){M(t.$$.fragment,k),b=!1},d(k){k&&P(e),Y(t)}}}let ag=200,lg=27;class cg extends be{constructor(e){super(),ge(this,e,null,og,pe,{})}}function ug(r){let e,t,s,n,i,o;return t=new Ke({props:{text:"Student Inventory Report"}}),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("table"),n.innerHTML="<thead><tr><th>Student ID</th> <th>Student Name</th> <th>Reserved</th> <th>Borrowed</th></tr></thead> <tbody><tr><td>263690</td> <td>Francis James Salles</td> <td>2</td> <td>4</td></tr></tbody>",f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(l,a){E(l,e,a),L(t,e,null),d(e,s),d(e,n),o=!0},p:U,i(l){o||(O(t.$$.fragment,l),l&&(i||Ee(()=>{i=Ue(e,Fe,{duration:500}),i.start()})),o=!0)},o(l){M(t.$$.fragment,l),o=!1},d(l){l&&P(e),Y(t)}}}class dg extends be{constructor(e){super(),ge(this,e,null,ug,pe,{})}}function fg(r){let e,t,s,n,i,o;return t=new Ke({props:{text:"Transaction Report"}}),{c(){e=h("main"),N(t.$$.fragment),s=y(),n=h("table"),n.innerHTML="<thead><tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr></thead> <tbody><tr><td>06/09/2024/ 10:18am</td> <td>Francis James Salles</td> <td>Some Student Name</td> <td>Borrowed</td> <td>Name borrowed &quot;Book title&quot;</td></tr></tbody>",f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(l,a){E(l,e,a),L(t,e,null),d(e,s),d(e,n),o=!0},p:U,i(l){o||(O(t.$$.fragment,l),l&&(i||Ee(()=>{i=Ue(e,Fe,{duration:500}),i.start()})),o=!0)},o(l){M(t.$$.fragment,l),o=!1},d(l){l&&P(e),Y(t)}}}class hg extends be{constructor(e){super(),ge(this,e,null,fg,pe,{})}}function mg(r){let e,t;return e=new mn({props:{routes:{"*":pp}}}),{c(){N(e.$$.fragment)},m(s,n){L(e,s,n),t=!0},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function _g(r){let e,t,s,n;return e=new Zo({}),s=new mn({props:{routes:{"/":tp,"/book/:bookID":qa,"/author/:authorID":Va,"/publisher/:publisherID":za,"/search":or,"/search/author":or,"/search/publisher":or,"/add-book":E_,"/add-author":qp,"/add-publisher":Qp,"/borrow":Dp,"/return":Np,"/book-report":ig,"/payment-report":cg,"/student-report":dg,"/reports":hg,"*":Wn}}}),{c(){N(e.$$.fragment),t=y(),N(s.$$.fragment)},m(i,o){L(e,i,o),E(i,t,o),L(s,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(s.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(s.$$.fragment,i),n=!1},d(i){i&&P(t),Y(e,i),Y(s,i)}}}function pg(r){let e,t,s,n;return e=new Zo({}),s=new mn({props:{routes:{"/":Vm,"/book/:bookID":qa,"/author/:authorID":Va,"/publisher/:publisherID":za,"/search":or,"/search/author":or,"/search/publisher":or,"*":Wn}}}),{c(){N(e.$$.fragment),t=y(),N(s.$$.fragment)},m(i,o){L(e,i,o),E(i,t,o),L(s,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(s.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(s.$$.fragment,i),n=!1},d(i){i&&P(t),Y(e,i),Y(s,i)}}}function gg(r){let e,t,s,n;const i=[pg,_g,mg],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=We()},m(a,c){o[e].m(a,c),E(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t||(t=o[e]=i[e](a),t.c()),O(t,1),t.m(s.parentNode,s))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(s),o[e].d(a)}}}function bg(r,e,t){let s;return Rt.subscribe(n=>{t(0,s=n)}),[s]}class vg extends be{constructor(e){super(),ge(this,e,bg,gg,pe,{})}}new vg({target:document.getElementById("app")})});export default yg();
