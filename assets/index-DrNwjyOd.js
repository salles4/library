var Aa=Object.defineProperty;var Ia=(t,e,r)=>e in t?Aa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ya=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ms=(t,e,r)=>(Ia(t,typeof e!="symbol"?e+"":e,r),r);var Lp=Ya((xp,ts)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function j(){}const nn=t=>t;function Er(t,e){for(const r in e)t[r]=e[r];return t}function La(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function lo(t){return t()}function zn(){return Object.create(null)}function ke(t){t.forEach(lo)}function Nr(t){return typeof t=="function"}function be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Br;function et(t,e){return t===e?!0:(Br||(Br=document.createElement("a")),Br.href=e,t===Br.href)}function Na(t){return Object.keys(t).length===0}function co(t,...e){if(t==null){for(const s of e)s(void 0);return j}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function uo(t,e,r){t.$$.on_destroy.push(co(e,r))}function on(t,e,r,s){if(t){const n=ho(t,e,r,s);return t[0](n)}}function ho(t,e,r,s){return t[1]&&s?Er(r.ctx.slice(),t[1](s(e))):r.ctx}function an(t,e,r,s){if(t[2]&&s){const n=t[2](s(r));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function ln(t,e,r,s,n,i){if(n){const o=ho(e,r,s,i);t.p(o,n)}}function cn(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let s=0;s<r;s++)e[s]=-1;return e}return-1}function Gn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const fo=typeof window<"u";let mo=fo?()=>window.performance.now():()=>Date.now(),un=fo?t=>requestAnimationFrame(t):j;const rr=new Set;function _o(t){rr.forEach(e=>{e.c(t)||(rr.delete(e),e.f())}),rr.size!==0&&un(_o)}function po(t){let e;return rr.size===0&&un(_o),{promise:new Promise(r=>{rr.add(e={c:t,f:r})}),abort(){rr.delete(e)}}}function h(t,e){t.appendChild(e)}function go(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ua(t){const e=_("style");return e.textContent="/* empty */",xa(go(t),e),e.sheet}function xa(t,e){return h(t.head||t,e),e.sheet}function P(t,e,r){t.insertBefore(e,r||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Ke(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function _(t){return document.createElement(t)}function ie(t){return document.createTextNode(t)}function w(){return ie(" ")}function Ve(){return ie("")}function q(t,e,r,s){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r,s)}function Fa(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function hs(t){return t===""?null:+t}function Ha(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function pt(t,e,r,s){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,"")}function Jn(t,e,r){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Wa(t){const e=t.querySelector(":checked");return e&&e.__value}function bo(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function rs(t,e){return new t(e)}const ss=new Map;let ns=0;function qa(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function Ba(t,e){const r={stylesheet:Ua(e),rules:{}};return ss.set(t,r),r}function xs(t,e,r,s,n,i,o,l=0){const a=16.666/s;let c=`{
`;for(let y=0;y<=1;y+=a){const v=e+(r-e)*i(y);c+=y*100+`%{${o(v,1-v)}}
`}const u=c+`100% {${o(r,1-r)}}
}`,f=`__svelte_${qa(u)}_${l}`,m=go(t),{stylesheet:g,rules:p}=ss.get(m)||Ba(m,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${s}ms linear ${n}ms 1 both`,ns+=1,f}function Fs(t,e){const r=(t.style.animation||"").split(", "),s=r.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=r.length-s.length;n&&(t.style.animation=s.join(", "),ns-=n,ns||Va())}function Va(){un(()=>{ns||(ss.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),ss.clear())})}let Pr;function gt(t){Pr=t}function Ur(){if(!Pr)throw new Error("Function called outside component initialization");return Pr}function jr(t){Ur().$$.on_mount.push(t)}function za(t){Ur().$$.after_update.push(t)}function Ga(t){Ur().$$.on_destroy.push(t)}function Ja(){const t=Ur();return(e,r,{cancelable:s=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=bo(e,r,{cancelable:s});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Hs(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(s=>s.call(this,e))}const Qt=[],dr=[];let sr=[];const Kn=[],vo=Promise.resolve();let Ws=!1;function wo(){Ws||(Ws=!0,vo.then(hn))}function dn(){return wo(),vo}function Le(t){sr.push(t)}const Cs=new Set;let Vt=0;function hn(){if(Vt!==0)return;const t=Pr;do{try{for(;Vt<Qt.length;){const e=Qt[Vt];Vt++,gt(e),Ka(e.$$)}}catch(e){throw Qt.length=0,Vt=0,e}for(gt(null),Qt.length=0,Vt=0;dr.length;)dr.pop()();for(let e=0;e<sr.length;e+=1){const r=sr[e];Cs.has(r)||(Cs.add(r),r())}sr.length=0}while(Qt.length);for(;Kn.length;)Kn.pop()();Ws=!1,Cs.clear(),gt(t)}function Ka(t){if(t.fragment!==null){t.update(),ke(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Za(t){const e=[],r=[];sr.forEach(s=>t.indexOf(s)===-1?e.push(s):r.push(s)),r.forEach(s=>s()),sr=e}let vr;function yo(){return vr||(vr=Promise.resolve(),vr.then(()=>{vr=null})),vr}function Sr(t,e,r){t.dispatchEvent(bo(`${e?"intro":"outro"}${r}`))}const Zr=new Set;let bt;function Se(){bt={r:0,c:[],p:bt}}function Oe(){bt.r||ke(bt.c),bt=bt.p}function S(t,e){t&&t.i&&(Zr.delete(t),t.i(e))}function T(t,e,r,s){if(t&&t.o){if(Zr.has(t))return;Zr.add(t),bt.c.push(()=>{Zr.delete(t),s&&(r&&t.d(1),s())}),t.o(e)}else s&&s()}const ko={duration:0};function ze(t,e,r){const s={direction:"in"};let n=e(t,r,s),i=!1,o,l,a=0;function c(){o&&Fs(t,o)}function u(){const{delay:m=0,duration:g=300,easing:p=nn,tick:b=j,css:y}=n||ko;y&&(o=xs(t,0,1,g,m,p,y,a++)),b(0,1);const v=mo()+m,$=v+g;l&&l.abort(),i=!0,Le(()=>Sr(t,!0,"start")),l=po(O=>{if(i){if(O>=$)return b(1,0),Sr(t,!0,"end"),c(),i=!1;if(O>=v){const C=p((O-v)/g);b(C,1-C)}}return i})}let f=!1;return{start(){f||(f=!0,Fs(t),Nr(n)?(n=n(s),yo().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Zn(t,e,r,s){let i=e(t,r,{direction:"both"}),o=s?0:1,l=null,a=null,c=null,u;function f(){c&&Fs(t,c)}function m(p,b){const y=p.b-o;return b*=Math.abs(y),{a:o,b:p.b,d:y,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:y=300,easing:v=nn,tick:$=j,css:O}=i||ko,C={start:mo()+b,b:p};p||(C.group=bt,bt.r+=1),"inert"in t&&(p?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),l||a?a=C:(O&&(f(),c=xs(t,o,p,y,b,v,O)),p&&$(0,1),l=m(C,y),Le(()=>Sr(t,p,"start")),po(k=>{if(a&&k>a.start&&(l=m(a,y),a=null,Sr(t,l.b,"start"),O&&(f(),c=xs(t,o,l.b,l.duration,0,v,i.css))),l){if(k>=l.end)$(o=l.b,1-o),Sr(t,l.b,"end"),a||(l.b?f():--l.group.r||ke(l.group.c)),l=null;else if(k>=l.start){const D=k-l.start;o=l.a+l.d*v(D/l.duration),$(o,1-o)}}return!!(l||a)}))}return{run(p){Nr(i)?yo().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){f(),l=a=null}}}function Or(t,e){const r=e.token={};function s(n,i,o,l){if(e.token!==r)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,m)=>{m!==i&&f&&(Se(),T(f,1,1,()=>{e.blocks[m]===f&&(e.blocks[m]=null)}),Oe())}):e.block.d(1),c.c(),S(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&hn()}if(La(t)){const n=Ur();if(t.then(i=>{gt(n),s(e.then,1,e.value,i),gt(null)},i=>{if(gt(n),s(e.catch,2,e.error,i),gt(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}}function Tr(t,e,r){const s=e.slice(),{resolved:n}=t;t.current===t.then&&(s[t.value]=n),t.current===t.catch&&(s[t.error]=n),t.block.p(s,r)}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function is(t,e){const r={},s={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(r[a]=l[a],n[a]=1);t[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in r||(r[o]=void 0);return r}function os(t){return typeof t=="object"&&t!==null?t:{}}function L(t){t&&t.c()}function I(t,e,r){const{fragment:s,after_update:n}=t.$$;s&&s.m(e,r),Le(()=>{const i=t.$$.on_mount.map(lo).filter(Nr);t.$$.on_destroy?t.$$.on_destroy.push(...i):ke(i),t.$$.on_mount=[]}),n.forEach(Le)}function Y(t,e){const r=t.$$;r.fragment!==null&&(Za(r.after_update),ke(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Qa(t,e){t.$$.dirty[0]===-1&&(Qt.push(t),wo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,r,s,n,i,o=null,l=[-1]){const a=Pr;gt(t);const c=t.$$={fragment:null,ctx:[],props:i,update:j,not_equal:n,bound:zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=r?r(t,e.props||{},(f,m,...g)=>{const p=g.length?g[0]:m;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&Qa(t,f)),m}):[],c.update(),u=!0,ke(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const f=Ha(e.target);c.fragment&&c.fragment.l(f),f.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&S(t.$$.fragment),I(t,e.target,e.anchor),hn()}gt(a)}class we{constructor(){Ms(this,"$$");Ms(this,"$$set")}$destroy(){Y(this,1),this.$destroy=j}$on(e,r){if(!Nr(r))return j;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(r),()=>{const n=s.indexOf(r);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Na(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xa);const zt=[];function $o(t,e){return{subscribe:fs(t,e).subscribe}}function fs(t,e=j){let r;const s=new Set;function n(l){if(be(t,l)&&(t=l,r)){const a=!zt.length;for(const c of s)c[1](),zt.push(c,t);if(a){for(let c=0;c<zt.length;c+=2)zt[c][0](zt[c+1]);zt.length=0}}}function i(l){n(l(t))}function o(l,a=j){const c=[l,a];return s.add(c),s.size===1&&(r=e(n,i)||j),l(t),()=>{s.delete(c),s.size===0&&r&&(r(),r=null)}}return{set:n,update:i,subscribe:o}}function So(t,e,r){const s=!Array.isArray(t),n=s?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return $o(r,(o,l)=>{let a=!1;const c=[];let u=0,f=j;const m=()=>{if(u)return;f();const p=e(s?c[0]:c,o,l);i?o(p):f=Nr(p)?p:j},g=n.map((p,b)=>co(p,y=>{c[b]=y,u&=~(1<<b),a&&m()},()=>{u|=1<<b}));return a=!0,m(),function(){ke(g),f(),a=!1}})}const At=fs(localStorage.getItem("accType")),nr=fs(localStorage.getItem("user_id"));window.addEventListener("storage",function(t){let e;nr.subscribe(r=>e=r),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(At.set(""),nr.set("")):(nr.set(localStorage.getItem("user_id")),At.set(localStorage.getItem("accType"))))});function el(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,n,i,o=[],l="",a=t.split("/");for(a[0]||a.shift();n=a.shift();)r=n[0],r==="*"?(o.push("wild"),l+="/(.*)"):r===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function tl(t){let e,r,s;const n=[t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Er(c,n[u]);return a!==void 0&&a&4&&(c=Er(c,is(n,[os(l[2])]))),{props:c}}return i&&(e=rs(i,o(t)),e.$on("routeEvent",t[7])),{c(){e&&L(e.$$.fragment),r=Ve()},m(l,a){e&&I(e,l,a),P(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Se();const c=e;T(c.$$.fragment,1,0,()=>{Y(c,1)}),Oe()}i?(e=rs(i,o(l,a)),e.$on("routeEvent",l[7]),L(e.$$.fragment),S(e.$$.fragment,1),I(e,r.parentNode,r)):e=null}else if(i){const c=a&4?is(n,[os(l[2])]):{};e.$set(c)}},i(l){s||(e&&S(e.$$.fragment,l),s=!0)},o(l){e&&T(e.$$.fragment,l),s=!1},d(l){l&&E(r),e&&Y(e,l)}}}function rl(t){let e,r,s;const n=[{params:t[1]},t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Er(c,n[u]);return a!==void 0&&a&6&&(c=Er(c,is(n,[a&2&&{params:l[1]},a&4&&os(l[2])]))),{props:c}}return i&&(e=rs(i,o(t)),e.$on("routeEvent",t[6])),{c(){e&&L(e.$$.fragment),r=Ve()},m(l,a){e&&I(e,l,a),P(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Se();const c=e;T(c.$$.fragment,1,0,()=>{Y(c,1)}),Oe()}i?(e=rs(i,o(l,a)),e.$on("routeEvent",l[6]),L(e.$$.fragment),S(e.$$.fragment,1),I(e,r.parentNode,r)):e=null}else if(i){const c=a&6?is(n,[a&2&&{params:l[1]},a&4&&os(l[2])]):{};e.$set(c)}},i(l){s||(e&&S(e.$$.fragment,l),s=!0)},o(l){e&&T(e.$$.fragment,l),s=!1},d(l){l&&E(r),e&&Y(e,l)}}}function sl(t){let e,r,s,n;const i=[rl,tl],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function Qn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let s="";return r>-1&&(s=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:s}}const fn=$o(null,function(e){e(Qn());const r=()=>{e(Qn())};return window.addEventListener("hashchange",r,!1),function(){window.removeEventListener("hashchange",r,!1)}}),nl=So(fn,t=>t.location),il=So(fn,t=>t.querystring),Xn=fs(void 0);async function ol(){await dn(),window.history.back()}async function al(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await dn();const e=(t.charAt(0)=="#"?"":"#")+t;try{const r={...history.state};delete r.__svelte_spa_router_scrollX,delete r.__svelte_spa_router_scrollY,window.history.replaceState(r,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function ll(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function cl(t,e,r){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(k,D){if(!D||typeof D!="function"&&(typeof D!="object"||D._sveltesparouter!==!0))throw Error("Invalid component object");if(!k||typeof k=="string"&&(k.length<1||k.charAt(0)!="/"&&k.charAt(0)!="*")||typeof k=="object"&&!(k instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:W,keys:x}=el(k);this.path=k,typeof D=="object"&&D._sveltesparouter===!0?(this.component=D.component,this.conditions=D.conditions||[],this.userData=D.userData,this.props=D.props||{}):(this.component=()=>Promise.resolve(D),this.conditions=[],this.props={}),this._pattern=W,this._keys=x}match(k){if(n){if(typeof n=="string")if(k.startsWith(n))k=k.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const B=k.match(n);if(B&&B[0])k=k.substr(B[0].length)||"/";else return null}}const D=this._pattern.exec(k);if(D===null)return null;if(this._keys===!1)return D;const W={};let x=0;for(;x<this._keys.length;){try{W[this._keys[x]]=decodeURIComponent(D[x+1]||"")||null}catch{W[this._keys[x]]=null}x++}return W}async checkConditions(k){for(let D=0;D<this.conditions.length;D++)if(!await this.conditions[D](k))return!1;return!0}}const l=[];s instanceof Map?s.forEach((C,k)=>{l.push(new o(k,C))}):Object.keys(s).forEach(C=>{l.push(new o(C,s[C]))});let a=null,c=null,u={};const f=Ja();async function m(C,k){await dn(),f(C,k)}let g=null,p=null;i&&(p=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?g=C.state:g=null},window.addEventListener("popstate",p),za(()=>{ll(g)}));let b=null,y=null;const v=fn.subscribe(async C=>{b=C;let k=0;for(;k<l.length;){const D=l[k].match(C.location);if(!D){k++;continue}const W={route:l[k].path,location:C.location,querystring:C.querystring,userData:l[k].userData,params:D&&typeof D=="object"&&Object.keys(D).length?D:null};if(!await l[k].checkConditions(W)){r(0,a=null),y=null,m("conditionsFailed",W);return}m("routeLoading",Object.assign({},W));const x=l[k].component;if(y!=x){x.loading?(r(0,a=x.loading),y=x,r(1,c=x.loadingParams),r(2,u={}),m("routeLoaded",Object.assign({},W,{component:a,name:a.name,params:c}))):(r(0,a=null),y=null);const B=await x();if(C!=b)return;r(0,a=B&&B.default||B),y=x}D&&typeof D=="object"&&Object.keys(D).length?r(1,c=D):r(1,c=null),r(2,u=l[k].props),m("routeLoaded",Object.assign({},W,{component:a,name:a.name,params:c})).then(()=>{Xn.set(c)});return}r(0,a=null),y=null,Xn.set(void 0)});Ga(()=>{v(),p&&window.removeEventListener("popstate",p)});function $(C){Hs.call(this,t,C)}function O(C){Hs.call(this,t,C)}return t.$$set=C=>{"routes"in C&&r(3,s=C.routes),"prefix"in C&&r(4,n=C.prefix),"restoreScrollState"in C&&r(5,i=C.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,s,n,i,$,O]}class mn extends we{constructor(e){super(),ve(this,e,cl,sl,be,{routes:3,prefix:4,restoreScrollState:5})}}const ul="modulepreload",dl=function(t){return"/library/"+t},ei={},hr=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(r.map(l=>{if(l=dl(l),l in ei)return;ei[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ul,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},hl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>hr(()=>Promise.resolve().then(()=>xr),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class _n extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class fl extends _n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ml extends _n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _l extends _n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(qs||(qs={}));var pl=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class gl{constructor(e,{headers:r={},customFetch:s,region:n=qs.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=hl(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return pl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:a}=r;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new fl(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new ml(u);if(!u.ok)throw new _l(u);let m=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var bl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fr=bl();const vl=fr.fetch,pn=fr.fetch.bind(fr),Oo=fr.Headers,wl=fr.Request,yl=fr.Response,xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Oo,Request:wl,Response:yl,default:pn,fetch:vl},Symbol.toStringTag,{value:"Module"}));class kl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class $l{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,f=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,g="OK")}catch{i.status===404&&b===""?(m=204,g="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new kl(c)}return{error:c,data:u,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}}class Sl extends $l{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Xt extends Sl{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}}class Ol{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Xt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new Xt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Xt({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Tl="1.15.2",Dl={"X-Client-Info":`postgrest-js/${Tl}`};class gn{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Dl),r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new Ol(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(o="POST",a=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Xt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Ml="2.9.5",Cl={"X-Client-Info":`realtime-js/${Ml}`},El="1.0.0",To=1e4,Pl=1e3;var ir;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ir||(ir={}));var Je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Je||(Je={}));var nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(nt||(nt={}));var Bs;(function(t){t.websocket="websocket"})(Bs||(Bs={}));var xt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xt||(xt={}));class Do{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class jl{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Es{constructor(e,r,s={},n=To){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ti;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ti||(ti={}));class Dr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=Dr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Dr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const m=u.map(y=>y.presence_ref),g=f.map(y=>y.presence_ref),p=u.filter(y=>g.indexOf(y.presence_ref)<0),b=f.filter(y=>m.indexOf(y.presence_ref)<0);p.length>0&&(l[c]=p),b.length>0&&(a[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const f=e[l].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...m)}s(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const ri=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Rl(o,t,e,n),i),{})},Rl=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?Mo(i,o):Vs(o)},Mo=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Ll(e,r)}switch(t){case $e.bool:return Al(e);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return Il(e);case $e.json:case $e.jsonb:return Yl(e);case $e.timestamp:return Nl(e);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Vs(e);default:return Vs(e)}},Vs=t=>t,Al=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Il=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Yl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ll=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Mo(e,l))}return t},Nl=t=>typeof t=="string"?t.replace(" ","T"):t;var si;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(si||(si={}));var ni;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ni||(ni={}));var ii;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ii||(ii={}));class bn{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new Es(this,nt.join,this.params,this.timeout),this.rejoinTimer=new Do(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Dr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,m=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<m;p++){const b=f[p],{filter:{event:y,schema:v,table:$,filter:O}}=b,C=c&&c[p];if(C&&C.event===y&&C.schema===v&&C.table===$&&C.filter===O)g.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Je.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Es(this,nt.leave,{},e);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Es(this,e,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=nt;if(s&&[l,a,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(b=g.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,y,v,$,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return C&&((b=r.ids)===null||b===void 0?void 0:b.includes(C))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=($=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return C==="*"||C===((O=r==null?void 0:r.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:y,commit_timestamp:v,type:$,errors:O}=p;m=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:v,eventType:$,new:{},old:{},errors:O}),this._getPayloadRecords(p))}g.callback(m,s)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&bn.isEqual(n.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nt.close,{},e)}_onError(e){this._on(nt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ri(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ri(e.columns,e.old_record)),r}}const Ul=()=>{},xl=typeof WebSocket<"u";class Fl{constructor(e,r){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Cl,this.params={},this.timeout=To,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ul,this.conn=null,this.sendBuffer=[],this.serializer=new jl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>hr(()=>Promise.resolve().then(()=>xr),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Bs.websocket}`,r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Do(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(xl){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Hl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),hr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ir.connecting:return xt.Connecting;case ir.open:return xt.Open;case ir.closing:return xt.Closing;default:return xt.Closed}}isConnected(){return this.connectionState()===xt.Open}channel(e,r={config:{}}){const s=new bn(`realtime:${e}`,r,this);return this.channels.push(s),s}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(nt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:El}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:n,payload:i,ref:o}=r;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(nt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Hl{constructor(e,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ir.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Wl extends vn{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class oi extends vn{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var ql=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Co=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>hr(()=>Promise.resolve().then(()=>xr),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Bl=()=>ql(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hr(()=>Promise.resolve().then(()=>xr),void 0)).Response:Response});var mr=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Ps=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vl=(t,e)=>mr(void 0,void 0,void 0,function*(){const r=yield Bl();t instanceof r?t.json().then(s=>{e(new Wl(Ps(s),t.status||500))}).catch(s=>{e(new oi(Ps(s),s))}):e(new oi(Ps(t),t))}),zl=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};function ms(t,e,r,s,n,i){return mr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,zl(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Vl(a,l))})})}function zs(t,e,r,s){return mr(this,void 0,void 0,function*(){return ms(t,"GET",e,r,s)})}function Ct(t,e,r,s,n){return mr(this,void 0,void 0,function*(){return ms(t,"POST",e,s,n,r)})}function Gl(t,e,r,s,n){return mr(this,void 0,void 0,function*(){return ms(t,"PUT",e,s,n,r)})}function Eo(t,e,r,s,n){return mr(this,void 0,void 0,function*(){return ms(t,"DELETE",e,s,n,r)})}var Qe=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Jl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ai={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kl{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Co(n)}uploadOrUpdate(e,r,s,n){return Qe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ai),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(r),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield u.json();return u.ok?{data:{path:a,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return Qe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let a;const c=Object.assign({upsert:ai.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",c.cacheControl)):(a=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=yield Ct(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new vn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}update(e,r,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}copy(e,r){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Ct(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,s){return Qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ct(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return Qe(this,void 0,void 0,function*(){try{const n=yield Ct(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,r){return Qe(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield zs(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${c}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}list(e,r,s){return Qe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Jl),r),{prefix:e||""});return{data:yield Ct(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Zl="2.5.5",Ql={"X-Client-Info":`storage-js/${Zl}`};var Gt=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class Xl{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},Ql),r),this.fetch=Co(s)}listBuckets(){return Gt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Gt(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Gt(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Gt(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Gt(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Gt(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}}class ec extends Xl{constructor(e,r={},s){super(e,r,s)}from(e){return new Kl(this.url,this.headers,e,this.fetch)}}const tc="2.43.2";let $r="";typeof Deno<"u"?$r="deno":typeof document<"u"?$r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$r="react-native":$r="node";const rc={"X-Client-Info":`supabase-js-${$r}/${tc}`},sc={headers:rc},nc={schema:"public"},ic={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oc={};var ac=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=pn:e=fetch,(...r)=>e(...r)},cc=()=>typeof Headers>"u"?Oo:Headers,uc=(t,e,r)=>{const s=lc(r),n=cc();return(i,o)=>ac(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};function dc(t){return t.replace(/\/$/,"")}function hc(t,e){const{db:r,auth:s,realtime:n,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const Po="2.64.2",fc="http://localhost:9999",mc="supabase.auth.token",_c={"X-Client-Info":`gotrue-js/${Po}`},li=10,Gs="X-Supabase-Api-Version",jo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function pc(t){return Math.round(Date.now()/1e3)+t}function gc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const st=()=>typeof document<"u",Yt={tested:!1,writable:!1},Mr=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yt.tested)return Yt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yt.tested=!0,Yt.writable=!0}catch{Yt.tested=!0,Yt.writable=!1}return Yt.writable};function js(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ro=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>hr(()=>Promise.resolve().then(()=>xr),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},bc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ao=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Vr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rs=async(t,e)=>{await t.removeItem(e)};function vc(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",s,n,i,o,l,a,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,r=r+String.fromCharCode(s),a!=64&&n!=0&&(r=r+String.fromCharCode(n)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class _s{constructor(){this.promise=new _s.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}_s.promiseConstructor=Promise;function ci(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=r[1];return JSON.parse(vc(s))}async function wc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yc(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function kc(t){return("0"+t.toString(16)).substr(-2)}function $c(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,kc).join("")}async function Sc(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Oc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Sc(t);return Oc(r)}async function Jt(t,e,r=!1){const s=$c();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Ao(t,`${e}-code-verifier`,n);const i=await Tc(s);return[i,s===i?"plain":"s256"]}const Dc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mc(t){const e=t.headers.get(Gs);if(!e||!e.match(Dc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class wn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Cc extends wn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Ec(t){return le(t)&&t.name==="AuthApiError"}class Io extends wn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Wt extends wn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class Lt extends Wt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class As extends Wt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zr extends Wt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gr extends Wt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ui extends Wt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Js extends Wt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Is(t){return le(t)&&t.name==="AuthRetryableFetchError"}class di extends Wt{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}var Pc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const Ut=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jc=[502,503,504];async function hi(t){var e;if(!bc(t))throw new Js(Ut(t),0);if(jc.includes(t.status))throw new Js(Ut(t),t.status);let r;try{r=await t.json()}catch(i){throw new Io(Ut(i),i)}let s;const n=Mc(t);if(n&&n.getTime()>=jo["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new di(Ut(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new di(Ut(r),t.status,r.weak_password.reasons);throw new Cc(Ut(r),t.status||500,s)}const Rc=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function ue(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Gs]||(i[Gs]=jo["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Ac(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Ac(t,e,r,s,n,i){const o=Rc(e,s,n,i);let l;try{l=await t(r,Object.assign({},o))}catch(a){throw console.error(a),new Js(Ut(a),0)}if(l.ok||await hi(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await hi(a)}}function Mt(t){var e;let r=null;Nc(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=pc(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function fi(t){const e=Mt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Et(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ic(t){return{data:t,error:null}}function Yc(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=Pc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Lc(t){return t}function Nc(t){return t.access_token&&t.refresh_token&&t.expires_in}var Uc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class xc{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ro(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Et})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Uc(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Yc,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Et})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Lc});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=b}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(le(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Et})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Et})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Et})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:r,error:s}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}const Fc={getItem:t=>Mr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Mr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Mr()&&globalThis.localStorage.removeItem(t)}};function mi(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Hc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kt={debug:!!(globalThis&&Mr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wc extends Yo{}async function qc(t,e,r){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Wc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}Hc();const Bc={url:fc,storageKey:mc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_c,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},wr=30*1e3,_i=3;async function pi(t,e,r){return await r()}class Rr{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rr.nextInstanceID,Rr.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Bc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new xc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ro(n.fetch),this.lock=n.lock||pi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:st()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qc:this.lock=pi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Mr()?this.storage=Fc:(this.memoryStorage={},this.storage=mi(this.memoryStorage)):(this.memoryStorage={},this.storage=mi(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Po}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=st()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return le(e)?{error:e}:{error:new Io("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{await this._removeSession();const i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Mt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Jt(this.storage,this.storageKey)),i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},xform:Mt})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Mt})}else throw new zr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else throw new zr("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new As}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await Vr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/"),{data:i,error:o}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Mt});return await Rs(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new As}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,l=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Mt}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new As}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jt(this.storage,this.storageKey));const{error:f}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=a==null?void 0:a.data)!==null&&r!==void 0?r:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new zr("You must provide either an email or phone number.")}catch(l){if(le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Mt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jt(this.storage,this.storageKey)),await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ic})}catch(i){if(le(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Lt;const{error:n}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new zr("You must provide either an email or phone number and a type")}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Et}):await this._useSession(async r=>{var s,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Et})})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Lt;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Jt(this.storage,this.storageKey));const{data:c,error:u}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Et});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ci(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lt;const r=Date.now()/1e3;let s=r,n=!0,i=null;const o=ci(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(le(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Lt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!st())throw new Gr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Gr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ui("Not a valid PKCE flow url.");const r=js(window.location.href);if(e){if(!r.code)throw new ui("No code detected.");const{data:$,error:O}=await this._exchangeCodeForSession(r.code);if(O)throw O;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:$.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Gr(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=r;if(!i||!l||!o||!c)throw new Gr("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;a&&(m=parseInt(a));const g=m-u;g*1e3<=wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=m-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,m,u);const{data:b,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:r.type},error:null}}catch(r){if(le(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=js(window.location.href);return!!(st()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=js(window.location.href),r=await Vr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Ec(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=gc(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Jt(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(le(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:f,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return st()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(le(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await yc(async n=>(n>0&&await wc(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Is(i)&&Date.now()+o-s<wr})}catch(s){if(this._debug(r,"error",s),le(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),st()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Vr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+li;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${li}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Is(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new _s;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Lt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),le(i)){const o={session:null,error:i};return Is(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ao(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Rs(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${wr}ms, refresh threshold is ${_i} ticks`),n<=_i&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const{data:l,error:a}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(le(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Rr.nextInstanceID=0;const Vc=Rr;class zc extends Vc{constructor(e){super(e)}}var Gc=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class Jc{constructor(e,r,s){var n,i,o,l,a,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const m=dc(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:nc,realtime:oc,auth:Object.assign(Object.assign({},ic),{storageKey:g}),global:sc},b=hc(s??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=uc(r,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new gn(`${m}/rest/v1`,{headers:this.headers,schema:(f=b.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new gl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ec(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Gc(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zc({url:this.authUrl,headers:Object.assign(Object.assign({},f),a),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Fl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kc=(t,e,r)=>new Jc(t,e,r),re=Kc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function gi(t){let e;return{c(){e=_("a"),e.textContent="Add book",d(e,"class","nav-link svelte-kdejnj"),d(e,"href","./#/add-book")},m(r,s){P(r,e,s)},d(r){r&&E(e)}}}function Zc(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U,R,K,se,Q,ne,ee=t[0]=="staff"&&gi();return{c(){e=_("nav"),r=_("div"),s=_("a"),s.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=w(),i=_("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=w(),l=_("div"),a=_("div"),c=_("a"),c.textContent="Books",u=w(),f=_("a"),f.textContent="Authors",m=w(),g=_("a"),g.textContent="Publishers",p=w(),ee&&ee.c(),b=w(),y=_("li"),v=_("a"),$=_("i"),O=w(),C=ie(t[1]),k=w(),D=_("ul"),W=_("li"),W.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Profile</a>',x=w(),B=_("li"),B.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Settings</a>',G=w(),F=_("li"),F.innerHTML='<hr class="dropdown-divider"/>',M=w(),H=_("li"),z=_("a"),z.textContent="Log Out",U=w(),R=_("button"),K=_("span"),d(s,"class","navbar-brand m-0 px-2 svelte-kdejnj"),d(s,"href","./#/"),d(i,"class","navbar-toggler"),d(i,"type","button"),d(i,"data-bs-toggle","collapse"),d(i,"data-bs-target","#navbarContent"),d(c,"class","nav-link svelte-kdejnj"),d(c,"href","./#/search"),d(f,"class","nav-link svelte-kdejnj"),d(f,"href","./#/search/author"),d(g,"class","nav-link svelte-kdejnj"),d(g,"href","./#/search/publisher"),d($,"class","bi bi-person-fill"),d(v,"class","nav-link dropdown-toggle svelte-kdejnj"),d(v,"href","#"),d(v,"role","button"),d(v,"data-bs-toggle","dropdown"),d(v,"aria-expanded","false"),d(z,"class","dropdown-item text-danger svelte-kdejnj"),d(z,"href","./#/"),d(D,"class","dropdown-menu"),d(y,"class","nav-item dropdown"),d(K,"class",se="bi bi-"+t[2]+" svelte-kdejnj"),d(R,"title","Switch theme"),d(R,"class","px-1 border-0 bg-transparent nav-link svelte-kdejnj"),d(a,"class","navbar-nav ms-auto text-center svelte-kdejnj"),d(l,"class","collapse navbar-collapse"),d(l,"id","navbarContent"),d(r,"class","container px-4 fw-semibold"),d(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(de,Ae){P(de,e,Ae),h(e,r),h(r,s),h(r,n),h(r,i),h(r,o),h(r,l),h(l,a),h(a,c),h(a,u),h(a,f),h(a,m),h(a,g),h(a,p),ee&&ee.m(a,null),h(a,b),h(a,y),h(y,v),h(v,$),h(v,O),h(v,C),h(y,k),h(y,D),h(D,W),h(D,x),h(D,B),h(D,G),h(D,F),h(D,M),h(D,H),h(H,z),h(a,U),h(a,R),h(R,K),Q||(ne=[q(z,"click",t[4]),q(R,"click",t[3])],Q=!0)},p(de,[Ae]){de[0]=="staff"?ee||(ee=gi(),ee.c(),ee.m(a,b)):ee&&(ee.d(1),ee=null),Ae&2&&ge(C,de[1]),Ae&4&&se!==(se="bi bi-"+de[2]+" svelte-kdejnj")&&d(K,"class",se)},i:j,o:j,d(de){de&&E(e),ee&&ee.d(),Q=!1,ke(ne)}}}function Qc(t,e,r){let s,n,i;At.subscribe(f=>r(0,n=f)),nr.subscribe(f=>i=f);let o;async function l(){const{data:f,error:m}=await re.from("account_details").select("lname").eq("user_id",i).single();m&&console.error(m),r(1,o=f.lname)}l();let a=localStorage.getItem("theme")||"light";function c(){r(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){At.set(""),nr.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return t.$$.update=()=>{t.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),t.$$.dirty&32&&r(2,s=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,s,c,u,a]}class Lo extends we{constructor(e){super(),ve(this,e,Qc,Zc,be,{})}}function Xc(t){let e;return{c(){e=_("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(r,s){P(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}class eu extends we{constructor(e){super(),ve(this,e,null,Xc,be,{})}}function tu(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p;return{c(){e=_("div"),r=_("img"),n=w(),i=_("div"),o=_("h5"),l=_("a"),a=ie(t[1]),u=w(),f=_("small"),m=_("i"),g=w(),p=ie(t[2]),et(r.src,s=t[3])||d(r,"src",s),d(r,"alt","book cover"),d(r,"class","svelte-1a99e4f"),d(l,"class","stretched-link svelte-1a99e4f"),d(l,"href",c="./#/book/"+t[0]),d(o,"class","card-title"),d(m,"class","bi bi-person"),d(f,"class","card-text"),d(i,"class","card-body"),d(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(b,y){P(b,e,y),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a),h(i,u),h(i,f),h(f,m),h(f,g),h(f,p)},p(b,[y]){y&2&&ge(a,b[1]),y&1&&c!==(c="./#/book/"+b[0])&&d(l,"href",c),y&4&&ge(p,b[2])},i:j,o:j,d(b){b&&E(e)}}}function ru(t,e,r){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=s>4?"./book-cover.png":`./${s}.jpg`;return t.$$set=l=>{"id"in l&&r(0,s=l.id),"title"in l&&r(1,n=l.title),"author"in l&&r(2,i=l.author)},[s,n,i,o]}class ps extends we{constructor(e){super(),ve(this,e,ru,tu,be,{id:0,title:1,author:2})}}function bi(t){let e,r,s,n,i,o,l;return{c(){e=_("div"),r=_("a"),s=_("button"),n=ie(t[3]),i=w(),o=_("i"),d(o,"class","bi bi-arrow-right"),d(s,"class","btn btn-outline-primary btn-sm"),d(r,"href",l="./#/"+t[2]),d(e,"class","align-middle align-self-center")},m(a,c){P(a,e,c),h(e,r),h(r,s),h(s,n),h(s,i),h(s,o)},p(a,c){c&8&&ge(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&d(r,"href",l)},d(a){a&&E(e)}}}function su(t){let e,r,s,n,i,o,l,a,c,u,f=t[2]!==""&&bi(t);const m=t[5].default,g=on(m,t,t[4],null);return{c(){e=_("section"),r=_("div"),s=_("h4"),n=_("i"),o=w(),l=ie(t[0]),a=w(),f&&f.c(),c=w(),g&&g.c(),d(n,"class",i="bi bi-"+t[1]),d(s,"class","my-3"),d(r,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){P(p,e,b),h(e,r),h(r,s),h(s,n),h(s,o),h(s,l),h(r,a),f&&f.m(r,null),h(e,c),g&&g.m(e,null),u=!0},p(p,[b]){(!u||b&2&&i!==(i="bi bi-"+p[1]))&&d(n,"class",i),(!u||b&1)&&ge(l,p[0]),p[2]!==""?f?f.p(p,b):(f=bi(p),f.c(),f.m(r,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||b&16)&&ln(g,m,p,p[4],u?an(m,p[4],b,null):cn(p[4]),null)},i(p){u||(S(g,p),u=!0)},o(p){T(g,p),u=!1},d(p){p&&E(e),f&&f.d(),g&&g.d(p)}}}function nu(t,e,r){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return t.$$set=c=>{"title"in c&&r(0,i=c.title),"icon"in c&&r(1,o=c.icon),"link"in c&&r(2,l=c.link),"linkText"in c&&r(3,a=c.linkText),"$$scope"in c&&r(4,n=c.$$scope)},[i,o,l,a,n,s]}class yt extends we{constructor(e){super(),ve(this,e,nu,su,be,{title:0,icon:1,link:2,linkText:3})}}function iu(t){const e=t-1;return e*e*e+1}function Ge(t,{delay:e=0,duration:r=400,easing:s=nn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:i=>`opacity: ${i*n}`}}function vi(t,{delay:e=0,duration:r=400,easing:s=iu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[f,m]=Gn(n),[g,p]=Gn(i);return{delay:e,duration:r,easing:s,css:(b,y)=>`
			transform: ${c} translate(${(1-b)*f}${m}, ${(1-b)*g}${p});
			opacity: ${a-u*y}`}}function ou(t){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',d(e,"class","d-flex justify-content-center")},m(r,s){P(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}class It extends we{constructor(e){super(),ve(this,e,null,ou,be,{})}}function au(t){let e,r,s,n,i,o,l,a,c;return{c(){e=_("div"),r=_("img"),n=w(),i=_("div"),o=_("h6"),l=_("a"),a=ie(t[0]),d(r,"class","object-fit-contain rounded my-2"),d(r,"height","150"),et(r.src,s="./default-profile.jpg")||d(r,"src",s),d(r,"alt","author"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/author/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){P(u,e,f),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&d(l,"href",c)},i:j,o:j,d(u){u&&E(e)}}}function lu(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class No extends we{constructor(e){super(),ve(this,e,lu,au,be,{name:0,id:1})}}function cu(t){let e,r,s,n,i,o,l,a,c;return{c(){e=_("div"),r=_("img"),n=w(),i=_("div"),o=_("h6"),l=_("a"),a=ie(t[0]),d(r,"class","object-fit-contain rounded my-2"),d(r,"height","150"),et(r.src,s="./default-profile.jpg")||d(r,"src",s),d(r,"alt","publisher"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/publisher/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){P(u,e,f),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&d(l,"href",c)},i:j,o:j,d(u){u&&E(e)}}}function uu(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class Uo extends we{constructor(e){super(),ve(this,e,uu,cu,be,{name:0,id:1})}}function du(t){let e,r,s,n,i,o,l,a,c,u;return{c(){e=_("div"),r=_("div"),s=_("h2"),s.textContent="Error",n=w(),i=_("p"),o=ie(t[0]),l=ie(": "),a=ie(t[1]),c=w(),u=_("a"),u.textContent="Reload",d(u,"href","./#/"),d(u,"class","fw-bold"),d(r,"class","text-center"),d(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,m){P(f,e,m),h(e,r),h(r,s),h(r,n),h(r,i),h(i,o),h(i,l),h(i,a),h(r,c),h(r,u)},p(f,[m]){m&1&&ge(o,f[0]),m&2&&ge(a,f[1])},i:j,o:j,d(f){f&&E(e)}}}function hu(t,e,r){let{code:s="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&r(0,s=i.code),"message"in i&&r(1,n=i.message)},[s,n]}let yn=class extends we{constructor(e){super(),ve(this,e,hu,du,be,{code:0,message:1})}};function wi(t,e,r){const s=t.slice();return s[9]=e[r][0],s[10]=e[r][1],s}function yi(t,e,r){const s=t.slice();return s[9]=e[r][0],s[13]=e[r][1],s}function ki(t,e,r){const s=t.slice();return s[9]=e[r][0],s[16]=e[r][1],s}function fu(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function mu(t){let e,r;return e=new yn({props:{message:t[3]}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&8&&(i.message=s[3]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function _u(t){let e,r,s=Te(Object.entries(t[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=$i(ki(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&1){s=Te(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const c=ki(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=$i(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function $i(t){let e,r;return e=new ps({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&1&&(i.title=s[16].title),n&1&&(i.id=s[16].book_id),n&1&&(i.author=s[16].author),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function pu(t){let e,r,s,n;const i=[_u,mu,fu],o=[];function l(a,c){return a[0]?0:a[3]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function gu(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function bu(t){let e,r;return e=new yn({props:{message:t[4]}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function vu(t){let e,r,s=Te(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Si(yi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Te(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=yi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Si(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Si(t){let e,r;return e=new No({props:{id:t[13].author_id,name:t[13].name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.id=s[13].author_id),n&2&&(i.name=s[13].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function wu(t){let e,r,s,n;const i=[vu,bu,gu],o=[];function l(a,c){return a[1]?0:a[4]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function yu(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function ku(t){let e,r;return e=new yn({props:{message:t[5]}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function $u(t){let e,r,s=Te(Object.entries(t[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Oi(wi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const c=wi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Oi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Oi(t){let e,r;return e=new Uo({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[10].publisher_id),n&4&&(i.name=s[10].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Su(t){let e,r,s,n;const i=[$u,ku,yu],o=[];function l(a,c){return a[2]?0:a[5]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function Ou(t){let e,r,s,n,i,o,l,a,c,u;return r=new eu({}),n=new yt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[pu]},$$scope:{ctx:t}}}),o=new yt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[wu]},$$scope:{ctx:t}}}),a=new yt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Su]},$$scope:{ctx:t}}}),{c(){e=_("main"),L(r.$$.fragment),s=w(),L(n.$$.fragment),i=w(),L(o.$$.fragment),l=w(),L(a.$$.fragment),d(e,"class","container mb-5")},m(f,m){P(f,e,m),I(r,e,null),h(e,s),I(n,e,null),h(e,i),I(o,e,null),h(e,l),I(a,e,null),u=!0},p(f,[m]){const g={};m&524297&&(g.$$scope={dirty:m,ctx:f}),n.$set(g);const p={};m&524306&&(p.$$scope={dirty:m,ctx:f}),o.$set(p);const b={};m&524324&&(b.$$scope={dirty:m,ctx:f}),a.$set(b)},i(f){u||(S(r.$$.fragment,f),S(n.$$.fragment,f),S(o.$$.fragment,f),S(a.$$.fragment,f),f&&(c||Le(()=>{c=ze(e,Ge,{duration:500}),c.start()})),u=!0)},o(f){T(r.$$.fragment,f),T(n.$$.fragment,f),T(o.$$.fragment,f),T(a.$$.fragment,f),u=!1},d(f){f&&E(e),Y(r),Y(n),Y(o),Y(a)}}}function Tu(t,e,r){let s,n,i,o,l,a;async function c(){const{data:m,error:g}=await re.rpc("get_books");r(0,s=m),r(3,o=g?g.message:"")}async function u(){const{data:m,error:g}=await re.rpc("get_authors");r(1,n=m),r(4,l=g?g.message:"")}async function f(){const{data:m,error:g}=await re.rpc("get_publishers");r(2,i=m),r(5,a=g||"")}return c(),u(),f(),[s,n,i,o,l,a]}class Du extends we{constructor(e){super(),ve(this,e,Tu,Ou,be,{})}}function Mu(t){let e,r,s,n,i,o,l,a;return{c(){e=_("div"),r=_("button"),r.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=w(),n=_("div"),i=_("h4"),o=ie(t[0]),d(r,"class","btn"),pt(r,"font-size","1.5em"),d(i,"class","my-auto"),d(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){P(c,e,u),h(e,r),h(e,s),h(e,n),h(n,i),h(i,o),l||(a=q(r,"click",t[1]),l=!0)},p(c,[u]){u&1&&ge(o,c[0])},i:j,o:j,d(c){c&&E(e),l=!1,a()}}}function Cu(t,e,r){let{text:s}=e;const n=()=>ol();return t.$$set=i=>{"text"in i&&r(0,s=i.text)},[s,n]}class dt extends we{constructor(e){super(),ve(this,e,Cu,Mu,be,{text:0})}}function Eu(t){let e,r,s;return{c(){e=_("div"),r=_("div"),r.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',d(r,"class","d-flex align-items-center justify-content-center flex-column gap-2"),pt(r,"height","70vh"),d(e,"class","position-absolute top-50 start-50 translate-middle z-2"),pt(e,"background-color","var(--bs-body-bg)"),pt(e,"width","100vw"),pt(e,"height","100vh")},m(n,i){P(n,e,i),h(e,r)},p:j,i(n){n&&(s||Le(()=>{s=ze(r,Ge,{duration:500}),s.start()}))},o:j,d(n){n&&E(e)}}}class kn extends we{constructor(e){super(),ve(this,e,null,Eu,be,{})}}function Ti(t,e,r){const s=t.slice();return s[26]=e[r][0],s[27]=e[r][1],s}function Di(t){let e,r;return e=new kn({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Pu(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function ju(t){let e,r,s,n,i,o,l,a=t[3].isbn+"",c,u,f,m,g,p=t[3].title+"",b,y,v,$=t[3].description+"",O,C,k,D,W,x,B=t[3].author.name+"",G,F,M,H,z,U,R,K=t[3].publisher.name+"",se,Q,ne,ee,de,Ae,je=t[3].category.name+"",Re,He,he,te,fe,Ee=t[3].shelf_number+"",ae,X=t[1]=="client"&&Mi(t);return{c(){e=_("div"),r=_("div"),s=_("img"),i=w(),o=_("small"),l=ie("ISBN: "),c=ie(a),u=w(),X&&X.c(),f=w(),m=_("div"),g=_("h1"),b=ie(p),y=w(),v=_("p"),O=ie($),C=w(),k=_("p"),D=_("b"),D.textContent="Author:",W=w(),x=_("a"),G=ie(B),M=w(),H=_("p"),z=_("b"),z.textContent="Publisher:",U=w(),R=_("a"),se=ie(K),ne=w(),ee=_("p"),de=_("b"),de.textContent="Category:",Ae=w(),Re=ie(je),He=w(),he=_("p"),te=_("b"),te.textContent="Shelf No.:",fe=w(),ae=ie(Ee),d(s,"id","img-cover"),d(s,"class","border p-3"),et(s.src,n=t[13])||d(s,"src",n),d(s,"alt","book cover"),d(s,"height","300"),d(s,"width","300"),pt(s,"object-fit","contain"),d(o,"class","text-secondary"),d(r,"class","d-flex flex-column justify-content-center align-items-center gap-2"),d(g,"id","book-title"),d(g,"class","mb-2 pb-2"),d(v,"id","book-description"),d(x,"href",F="./#/author/"+t[3].author.author_id),d(R,"href",Q="./#/publisher/"+t[3].publisher.publisher_id),d(m,"id","details-container"),d(m,"class","container mt-md-0 mt-3"),d(e,"class","d-md-flex d-block")},m(De,Ne){P(De,e,Ne),h(e,r),h(r,s),h(r,i),h(r,o),h(o,l),h(o,c),h(r,u),X&&X.m(r,null),h(e,f),h(e,m),h(m,g),h(g,b),h(m,y),h(m,v),h(v,O),h(m,C),h(m,k),h(k,D),h(k,W),h(k,x),h(x,G),h(m,M),h(m,H),h(H,z),h(H,U),h(H,R),h(R,se),h(m,ne),h(m,ee),h(ee,de),h(ee,Ae),h(ee,Re),h(m,He),h(m,he),h(he,te),h(he,fe),h(he,ae)},p(De,Ne){Ne&8&&a!==(a=De[3].isbn+"")&&ge(c,a),De[1]=="client"?X?X.p(De,Ne):(X=Mi(De),X.c(),X.m(r,null)):X&&(X.d(1),X=null),Ne&8&&p!==(p=De[3].title+"")&&ge(b,p),Ne&8&&$!==($=De[3].description+"")&&ge(O,$),Ne&8&&B!==(B=De[3].author.name+"")&&ge(G,B),Ne&8&&F!==(F="./#/author/"+De[3].author.author_id)&&d(x,"href",F),Ne&8&&K!==(K=De[3].publisher.name+"")&&ge(se,K),Ne&8&&Q!==(Q="./#/publisher/"+De[3].publisher.publisher_id)&&d(R,"href",Q),Ne&8&&je!==(je=De[3].category.name+"")&&ge(Re,je),Ne&8&&Ee!==(Ee=De[3].shelf_number+"")&&ge(ae,Ee)},i:j,o:j,d(De){De&&E(e),X&&X.d()}}}function Mi(t){let e;function r(i,o){return i[5]?Yu:i[0]?Iu:i[6]==0?Au:Ru}let s=r(t),n=s(t);return{c(){n.c(),e=Ve()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){s===(s=r(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&E(e),n.d(i)}}}function Ru(t){let e,r,s;return{c(){e=_("button"),e.textContent="Reserve",e.disabled=!1,d(e,"class","btn btn-primary w-50")},m(n,i){P(n,e,i),r||(s=q(e,"click",t[11]),r=!0)},p:j,d(n){n&&E(e),r=!1,s()}}}function Au(t){let e;return{c(){e=_("button"),e.textContent="Unavailable",e.disabled=!0,d(e,"class","btn btn-secondary w-50")},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function Iu(t){let e,r,s,n,i,o,l;return{c(){e=_("button"),r=_("i"),s=w(),n=ie(t[8]),d(r,"class","bi bi-x-circle"),d(e,"class",i="btn "+t[7]+" w-75")},m(a,c){P(a,e,c),h(e,r),h(e,s),h(e,n),o||(l=[q(e,"mouseenter",t[15]),q(e,"mouseleave",t[16]),q(e,"click",t[12])],o=!0)},p(a,c){c&256&&ge(n,a[8]),c&128&&i!==(i="btn "+a[7]+" w-75")&&d(e,"class",i)},d(a){a&&E(e),o=!1,ke(l)}}}function Yu(t){let e,r,s,n;return{c(){e=_("button"),r=ie("Borrowed (#"),s=ie(t[5]),n=ie(")"),d(e,"class","btn btn-secondary w-75")},m(i,o){P(i,e,o),h(e,r),h(e,s),h(e,n)},p(i,o){o&32&&ge(s,i[5])},d(i){i&&E(e)}}}function Ci(t){let e,r;return e=new yt({props:{title:"Status",icon:"journal",$$slots:{default:[Hu]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&1073741840&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Lu(t){return{c:j,m:j,p:j,d:j}}function Nu(t){let e;function r(i,o){return i[25].length<=0?xu:Uu}let n=r(t)(t);return{c(){n.c(),e=Ve()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){n.p(i,o)},d(i){i&&E(e),n.d(i)}}}function Uu(t){let e,r,s,n,i=Te(Object.entries(t[25])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Ei(Ti(t,i,l));return{c(){e=_("table"),r=_("thead"),r.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=w(),n=_("tbody");for(let l=0;l<o.length;l+=1)o[l].c();d(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){P(l,e,a),h(e,r),h(e,s),h(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a&512){i=Te(Object.entries(l[25]));let c;for(c=0;c<i.length;c+=1){const u=Ti(l,i,c);o[c]?o[c].p(u,a):(o[c]=Ei(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&E(e),Ke(o,l)}}}function xu(t){let e;return{c(){e=_("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",d(e,"class","text-center my-5")},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function Ei(t){let e,r,s,n,i,o,l=t[27].status+"",a,c,u=t[27].reservation_id?`(${t[27].reservation_id})`:t[27].borrow_id?`(${t[27].borrow_id})`:"",f,m,g,p,b,y;return{c(){e=_("tr"),r=_("td"),r.textContent=`${t[27].barcode}`,s=w(),n=_("td"),n.textContent=`${t[27].status!="Available"?`${t[27].fname} ${t[27].lname}`:"--"}`,i=w(),o=_("td"),a=ie(l),c=w(),f=ie(u),m=w(),g=_("td"),p=_("a"),b=_("small"),b.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',y=w(),d(o,"class",t[27].status=="Available"?"text-bg-success":t[27].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),d(p,"href",t[27].status=="Available"?`./#/borrow?barcode=${t[27].barcode}`:t[27].status=="Reserved"?`./#/borrow?reserve_id=${t[27].reservation_id}`:"text-bg-danger"),d(p,"class","btn btn-outline-primary btn-sm")},m(v,$){P(v,e,$),h(e,r),h(e,s),h(e,n),h(e,i),h(e,o),h(o,a),h(o,c),h(o,f),h(e,m),h(e,g),h(g,p),h(p,b),h(e,y)},p:j,d(v){v&&E(e)}}}function Fu(t){return{c:j,m:j,p:j,d:j}}function Hu(t){let e,r,s,n,i,o,l,a,c,u,f={ctx:t,current:null,token:null,hasCatch:!1,pending:Fu,then:Nu,catch:Lu,value:25};return Or(t[9](),f),{c(){f.block.c(),e=w(),r=_("div"),s=_("label"),s.textContent="Add Copy:",n=w(),i=_("div"),o=_("input"),l=w(),a=_("button"),a.textContent="Add",d(s,"for","copy"),d(s,"class","form=control col-auto"),d(o,"type","text"),d(o,"class","form-control"),d(o,"id","copy"),d(o,"placeholder","Barcode Number"),d(i,"class","col-4"),d(a,"class","btn btn-primary col-2"),d(r,"class","row justify-content-center align-items-center")},m(m,g){f.block.m(m,f.anchor=g),f.mount=()=>e.parentNode,f.anchor=e,P(m,e,g),P(m,r,g),h(r,s),h(r,n),h(r,i),h(i,o),J(o,t[4]),h(r,l),h(r,a),c||(u=[q(o,"input",t[17]),q(a,"click",t[10])],c=!0)},p(m,g){t=m,Tr(f,t,g),g&16&&o.value!==t[4]&&J(o,t[4])},d(m){m&&(E(e),E(r)),f.block.d(m),f.token=null,f=null,c=!1,ke(u)}}}function Wu(t){let e,r,s,n,i,o,l,a,c,u,f,m,g=t[2]&&Di();n=new dt({props:{text:"Book Details"}});const p=[ju,Pu],b=[];function y($,O){return $[3]?0:1}o=y(t),l=b[o]=p[o](t);let v=t[1]=="staff"&&Ci(t);return{c(){e=_("main"),g&&g.c(),r=w(),s=_("section"),L(n.$$.fragment),i=w(),l.c(),a=w(),v&&v.c(),c=w(),u=_("div"),d(u,"class","my-5"),d(e,"class","container")},m($,O){P($,e,O),g&&g.m(e,null),h(e,r),h(e,s),I(n,s,null),h(s,i),b[o].m(s,null),h(e,a),v&&v.m(e,null),h(e,c),h(e,u),m=!0},p($,[O]){$[2]?g?O&4&&S(g,1):(g=Di(),g.c(),S(g,1),g.m(e,r)):g&&(Se(),T(g,1,1,()=>{g=null}),Oe());let C=o;o=y($),o===C?b[o].p($,O):(Se(),T(b[C],1,1,()=>{b[C]=null}),Oe(),l=b[o],l?l.p($,O):(l=b[o]=p[o]($),l.c()),S(l,1),l.m(s,null)),$[1]=="staff"?v?(v.p($,O),O&2&&S(v,1)):(v=Ci($),v.c(),S(v,1),v.m(e,c)):v&&(Se(),T(v,1,1,()=>{v=null}),Oe())},i($){m||(S(g),S(n.$$.fragment,$),S(l),S(v),$&&(f||Le(()=>{f=ze(e,Ge,{duration:500}),f.start()})),m=!0)},o($){T(g),T(n.$$.fragment,$),T(l),T(v),m=!1},d($){$&&E(e),g&&g.d(),Y(n),b[o].d(),v&&v.d()}}}function Pi(){return 3e6+Math.floor(Math.random()*9e3)}function qu(t,e,r){let s,n;At.subscribe(M=>r(1,n=M));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,c;async function u(){const{data:M,error:H}=await re.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",l);console.table(M[0]),r(3,c=M[0]),M.length==0&&r(2,a=!0)}jr(u);let f;async function m(){const{data:M,error:H}=await re.rpc("get_holdings",{bookid:l});return H&&console.error(H),console.table(M),M}async function g(){const{data:M}=await re.from("library_holdings").select().eq("barcode",f);M.length==0&&(await re.from("library_holdings").insert({book_id:l,barcode:f}),m())}let p,b,y=0,v="btn-secondary";n=="client"&&(C(),b||($(),O()));async function $(){const{data:M,error:H}=await re.rpc("isreserved",{bookid:l,studid:i});r(0,p=M)}async function O(){const{data:M,error:H}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");r(6,y=M.length)}async function C(){const{data:M,error:H}=await re.rpc("isborrowed",{bookid:l,studid:i});r(5,b=M)}async function k(){const{data:M,error:H}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(H){console.error(H);return}const{error:z}=await re.from("book_reservation").insert({reservation_id:await W(),stud_id:i,holding_id:M.holding_id});if(z){console.error(z);return}const{data:U,error:R}=await re.from("library_holdings").update({status:"Reserved"}).eq("barcode",M.barcode).select("holding_id").single();if(R){console.error(R);return}$()}async function D(){const{data:M,error:H}=await re.from("book_reservation").update({active:!1}).eq("reservation_id",p).select().single(),{error:z}=await re.from("library_holdings").update({status:"Available"}).eq("holding_id",M.holding_id);!H||!z?($(),O()):(console.error(H),console.error(z))}async function W(){let M=Pi();const{data:H,error:z}=await re.from("book_reservation").select().eq("reservation_id",M);return console.log(H),H.length!=0&&(M=Pi(),console.log("exists")),console.log(M),M}let x=l>4?"./book-cover.png":`./${l}.jpg`;const B=()=>{r(8,s="Cancel Reservation"),r(7,v="btn-danger")},G=()=>{r(8,s=`Reserved (#${p})`),r(7,v="btn-secondary")};function F(){f=this.value,r(4,f)}return t.$$set=M=>{"params"in M&&r(14,o=M.params)},t.$$.update=()=>{t.$$.dirty&1&&r(8,s=`Reserved (${p})`)},[p,n,a,c,f,b,y,v,s,m,g,k,D,x,o,B,G,F]}class xo extends we{constructor(e){super(),ve(this,e,qu,Wu,be,{params:14})}}function Bu(t){let e,r,s,n,i,o;const l=t[3].default,a=on(l,t,t[2],null);return{c(){e=_("div"),r=_("label"),s=ie(t[0]),n=w(),i=_("div"),a&&a.c(),d(r,"class","col-sm-4 col-md-3 col-form-label"),d(r,"for",t[1]),d(i,"class","col-sm-8 col-md-9"),d(e,"class","mb-4 row")},m(c,u){P(c,e,u),h(e,r),h(r,s),h(e,n),h(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&ge(s,c[0]),(!o||u&2)&&d(r,"for",c[1]),a&&a.p&&(!o||u&4)&&ln(a,l,c,c[2],o?an(l,c[2],u,null):cn(c[2]),null)},i(c){o||(S(a,c),o=!0)},o(c){T(a,c),o=!1},d(c){c&&E(e),a&&a.d(c)}}}function Vu(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return t.$$set=l=>{"label"in l&&r(0,i=l.label),"id"in l&&r(1,o=l.id),"$$scope"in l&&r(2,n=l.$$scope)},[i,o,n,s]}class Ye extends we{constructor(e){super(),ve(this,e,Vu,Bu,be,{label:0,id:1})}}function ji(t,e,r){const s=t.slice();return s[29]=e[r][0],s[30]=e[r][1],s}function Ri(t,e,r){const s=t.slice();return s[29]=e[r][0],s[34]=e[r][1],s}function Ai(t,e,r){const s=t.slice();return s[29]=e[r][0],s[38]=e[r][1],s}function zu(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-name"),d(e,"autocomplete","off")},m(n,i){P(n,e,i),J(e,t[4]),r||(s=q(e,"input",t[18]),r=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&E(e),r=!1,s()}}}function Gu(t){let e,r,s;return{c(){e=_("textarea"),d(e,"class","form-control"),d(e,"id","book-description"),d(e,"rows","6"),d(e,"autocomplete","off")},m(n,i){P(n,e,i),J(e,t[5]),r||(s=q(e,"input",t[19]),r=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&E(e),r=!1,s()}}}function Ju(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","book-cover"),d(e,"accept","image/*")},m(n,i){P(n,e,i),t[21](e),r||(s=q(e,"change",t[20]),r=!0)},p:j,d(n){n&&E(e),t[21](null),r=!1,s()}}}function Ku(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","categories"),d(e,"class",r="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-category"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[6]),P(l,s,a),P(l,n,a),i||(o=q(e,"input",t[23]),i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&d(e,"class",r),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function Zu(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","authors"),d(e,"class",r="form-control "+t[12]),d(e,"type","text"),d(e,"id","book-author"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[7]),P(l,s,a),P(l,n,a),i||(o=q(e,"input",t[24]),i=!0)},p(l,a){a[0]&4096&&r!==(r="form-control "+l[12])&&d(e,"class",r),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function Qu(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","publishers"),d(e,"class",r="form-control "+t[13]),d(e,"type","text"),d(e,"id","book-publisher"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[8]),P(l,s,a),P(l,n,a),i||(o=q(e,"input",t[25]),i=!0)},p(l,a){a[0]&8192&&r!==(r="form-control "+l[13])&&d(e,"class",r),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function Xu(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","number"),d(e,"id","book-shelf"),d(e,"autocomplete","off")},m(n,i){P(n,e,i),J(e,t[9]),r||(s=q(e,"input",t[26]),r=!0)},p(n,i){i[0]&512&&hs(e.value)!==n[9]&&J(e,n[9])},d(n){n&&E(e),r=!1,s()}}}function ed(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-isbn"),d(e,"autocomplete","off")},m(n,i){P(n,e,i),J(e,t[10]),r||(s=q(e,"input",t[27]),r=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&E(e),r=!1,s()}}}function td(t){return{c:j,m:j,p:j,d:j}}function rd(t){let e,r=Te(Object.entries(t[37])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Ii(Ai(t,r,n));return{c(){e=_("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","authors")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){r=Te(Object.entries(n[37]));let o;for(o=0;o<r.length;o+=1){const l=Ai(n,r,o);s[o]?s[o].p(l,i):(s[o]=Ii(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Ke(s,n)}}}function Ii(t){let e;return{c(){e=_("option"),e.__value=t[38].name,J(e,e.__value)},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function sd(t){return{c:j,m:j,p:j,d:j}}function nd(t){return{c:j,m:j,p:j,d:j}}function id(t){let e,r=Te(Object.entries(t[33])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Yi(Ri(t,r,n));return{c(){e=_("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","publishers")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){r=Te(Object.entries(n[33]));let o;for(o=0;o<r.length;o+=1){const l=Ri(n,r,o);s[o]?s[o].p(l,i):(s[o]=Yi(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Ke(s,n)}}}function Yi(t){let e;return{c(){e=_("option"),e.__value=t[34].name,J(e,e.__value)},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function od(t){return{c:j,m:j,p:j,d:j}}function ad(t){return{c:j,m:j,p:j,d:j}}function ld(t){let e,r=Te(Object.entries(t[28])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Li(ji(t,r,n));return{c(){e=_("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","categories")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){r=Te(Object.entries(n[28]));let o;for(o=0;o<r.length;o+=1){const l=ji(n,r,o);s[o]?s[o].p(l,i):(s[o]=Li(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Ke(s,n)}}}function Li(t){let e;return{c(){e=_("option"),e.__value=t[30].name,J(e,e.__value)},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function cd(t){return{c:j,m:j,p:j,d:j}}function ud(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U,R,K,se,Q,ne,ee,de,Ae,je,Re,He,he;r=new dt({props:{text:"Add Book"}}),o=new Ye({props:{label:"Book Title:",id:"book-name",$$slots:{default:[zu]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Gu]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Ju]},$$scope:{ctx:t}}}),W=new Ye({props:{label:"Category:",id:"book-category",$$slots:{default:[Ku]},$$scope:{ctx:t}}}),B=new Ye({props:{label:"Author: ",id:"book-author",$$slots:{default:[Zu]},$$scope:{ctx:t}}}),F=new Ye({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Qu]},$$scope:{ctx:t}}}),H=new Ye({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Xu]},$$scope:{ctx:t}}}),U=new Ye({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[ed]},$$scope:{ctx:t}}});let te={ctx:t,current:null,token:null,hasCatch:!1,pending:sd,then:rd,catch:td,value:37};Or(t[15](),te);let fe={ctx:t,current:null,token:null,hasCatch:!1,pending:od,then:id,catch:nd,value:33};Or(t[16](),fe);let Ee={ctx:t,current:null,token:null,hasCatch:!1,pending:cd,then:ld,catch:ad,value:28};return Or(t[17](),Ee),{c(){e=_("section"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),m=_("div"),g=_("label"),g.textContent="Preview:",p=w(),b=_("div"),y=_("img"),$=w(),O=_("button"),O.textContent="Remove",k=w(),D=_("div"),L(W.$$.fragment),x=w(),L(B.$$.fragment),G=w(),L(F.$$.fragment),M=w(),L(H.$$.fragment),z=w(),L(U.$$.fragment),R=w(),K=_("div"),se=_("button"),se.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',Q=w(),ne=_("a"),ne.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',ee=w(),te.block.c(),de=w(),fe.block.c(),Ae=w(),Ee.block.c(),d(g,"for","cover-preview"),d(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(y.src,v=t[3])||d(y,"src",v),d(y,"alt","Preview"),d(y,"id","cover-preview"),d(y,"height","150"),d(O,"class","btn btn-sm btn-danger"),d(b,"class","col-sm-8 col-md-9"),d(b,"id","preview-div"),d(m,"class",C="my-3 row "+t[2]),d(i,"class","col-sm-12 col-lg-6"),d(D,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-center"),d(se,"class","btn btn-success"),d(ne,"href","./#/"),d(K,"class","my-3"),d(e,"class","my-1 container")},m(ae,X){P(ae,e,X),I(r,e,null),h(e,s),h(e,n),h(n,i),I(o,i,null),h(i,l),I(a,i,null),h(i,c),I(u,i,null),h(i,f),h(i,m),h(m,g),h(m,p),h(m,b),h(b,y),h(b,$),h(b,O),h(n,k),h(n,D),I(W,D,null),h(D,x),I(B,D,null),h(D,G),I(F,D,null),h(D,M),I(H,D,null),h(D,z),I(U,D,null),h(e,R),h(e,K),h(K,se),h(K,Q),h(K,ne),h(e,ee),te.block.m(e,te.anchor=null),te.mount=()=>e,te.anchor=de,h(e,de),fe.block.m(e,fe.anchor=null),fe.mount=()=>e,fe.anchor=Ae,h(e,Ae),Ee.block.m(e,Ee.anchor=null),Ee.mount=()=>e,Ee.anchor=null,Re=!0,He||(he=[q(O,"click",t[22]),q(se,"click",t[14])],He=!0)},p(ae,X){t=ae;const De={};X[0]&16|X[1]&1024&&(De.$$scope={dirty:X,ctx:t}),o.$set(De);const Ne={};X[0]&32|X[1]&1024&&(Ne.$$scope={dirty:X,ctx:t}),a.$set(Ne);const Bt={};X[0]&3|X[1]&1024&&(Bt.$$scope={dirty:X,ctx:t}),u.$set(Bt),(!Re||X[0]&8&&!et(y.src,v=t[3]))&&d(y,"src",v),(!Re||X[0]&4&&C!==(C="my-3 row "+t[2]))&&d(m,"class",C);const br={};X[0]&2112|X[1]&1024&&(br.$$scope={dirty:X,ctx:t}),W.$set(br);const qe={};X[0]&4224|X[1]&1024&&(qe.$$scope={dirty:X,ctx:t}),B.$set(qe);const Dt={};X[0]&8448|X[1]&1024&&(Dt.$$scope={dirty:X,ctx:t}),F.$set(Dt);const Bn={};X[0]&512|X[1]&1024&&(Bn.$$scope={dirty:X,ctx:t}),H.$set(Bn);const Vn={};X[0]&1024|X[1]&1024&&(Vn.$$scope={dirty:X,ctx:t}),U.$set(Vn),Tr(te,t,X),Tr(fe,t,X),Tr(Ee,t,X)},i(ae){Re||(S(r.$$.fragment,ae),S(o.$$.fragment,ae),S(a.$$.fragment,ae),S(u.$$.fragment,ae),S(W.$$.fragment,ae),S(B.$$.fragment,ae),S(F.$$.fragment,ae),S(H.$$.fragment,ae),S(U.$$.fragment,ae),ae&&(je||Le(()=>{je=ze(e,Ge,{duration:500}),je.start()})),Re=!0)},o(ae){T(r.$$.fragment,ae),T(o.$$.fragment,ae),T(a.$$.fragment,ae),T(u.$$.fragment,ae),T(W.$$.fragment,ae),T(B.$$.fragment,ae),T(F.$$.fragment,ae),T(H.$$.fragment,ae),T(U.$$.fragment,ae),Re=!1},d(ae){ae&&E(e),Y(r),Y(o),Y(a),Y(u),Y(W),Y(B),Y(F),Y(H),Y(U),te.block.d(),te.token=null,te=null,fe.block.d(),fe.token=null,fe=null,Ee.block.d(),Ee.token=null,Ee=null,He=!1,ke(he)}}}function dd(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,m,g,p,b,y;async function v(){const{data:U,error:R}=await re.from("author").select("author_id").eq("name",u).single(),{data:K,error:se}=await re.from("publisher").select("publisher_id").eq("name",f).single(),{data:Q,error:ne}=await re.from("category").select("category_id").eq("name",c).single();let ee=!0;if((R||!U)&&(r(12,b="is-invalid"),ee=!1),(se||!K)&&(r(13,y="is-invalid"),ee=!1),(ne||!Q)&&(r(11,p="is-invalid"),ee=!1),!ee)return;const{error:de}=await re.from("books").insert({title:l,description:a,category_id:Q.category_id,author_id:U.author_id,publisher_id:K.publisher_id,shelf_number:m,isbn:g});de?console.error(de):alert(`Successfully Added ${l}!`)}async function $(){const{data:U,error:R}=await re.from("author").select("name").order("name",{ascending:!0});return U}async function O(){const{data:U,error:R}=await re.from("publisher").select("name").order("name",{ascending:!0});return U}async function C(){const{data:U,error:R}=await re.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return U}function k(){l=this.value,r(4,l)}function D(){a=this.value,r(5,a)}function W(){s=this.files,r(0,s)}function x(U){dr[U?"unshift":"push"](()=>{n=U,r(1,n)})}const B=()=>{r(1,n.value="",n),r(0,s="")};function G(){c=this.value,r(6,c)}function F(){u=this.value,r(7,u)}function M(){f=this.value,r(8,f)}function H(){m=hs(this.value),r(9,m)}function z(){g=this.value,r(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(s&&s[0]){console.log(s),r(2,i="");const U=URL.createObjectURL(s[0]);r(3,o=U)}else console.log(s),r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z]}class hd extends we{constructor(e){super(),ve(this,e,dd,ud,be,{},null,[-1,-1])}}function Ni(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function fd(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function md(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,u,f,m=t[0].email+"",g,p;function b($,O){return $[0].bio==null?pd:_d}let y=b(t),v=y(t);return{c(){e=_("div"),r=_("h1"),n=ie(s),i=w(),o=_("p"),v.c(),l=w(),a=_("p"),c=_("b"),c.textContent="Website:",u=w(),f=_("a"),g=ie(m),d(r,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="mailto:"+t[0].email),d(e,"class","container")},m($,O){P($,e,O),h(e,r),h(r,n),h(e,i),h(e,o),v.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&s!==(s=$[0].name+"")&&ge(n,s),y===(y=b($))&&v?v.p($,O):(v.d(1),v=y($),v&&(v.c(),v.m(o,null))),O&1&&m!==(m=$[0].email+"")&&ge(g,m),O&1&&p!==(p="mailto:"+$[0].email)&&d(f,"href",p)},i:j,o:j,d($){$&&E(e),v.d()}}}function _d(t){let e=t[0].bio+"",r;return{c(){r=ie(e)},m(s,n){P(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&ge(r,e)},d(s){s&&E(r)}}}function pd(t){let e;return{c(){e=_("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function gd(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function bd(t){let e,r,s=Te(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ui(Ni(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Te(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Ni(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Ui(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Ui(t){let e,r;return e=new ps({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].publisher.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function vd(t){let e,r,s,n;const i=[bd,gd],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function wd(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b;s=new dt({props:{text:"Author Details"}});const y=[md,fd],v=[];function $(O,C){return O[0]?0:1}return u=$(t),f=v[u]=y[u](t),g=new yt({props:{title:"Books",icon:"journal",$$slots:{default:[vd]},$$scope:{ctx:t}}}),{c(){e=_("main"),r=_("section"),L(s.$$.fragment),n=w(),i=_("div"),o=_("div"),l=_("img"),c=w(),f.c(),m=w(),L(g.$$.fragment),d(l,"class","border p-3"),et(l.src,a=yd)||d(l,"src",a),d(l,"alt","author"),d(l,"height","300"),d(l,"width","300"),pt(l,"object-fit","contain"),d(o,"class","d-flex justify-content-center my-1"),d(i,"class","d-md-flex d-block"),d(e,"class","container")},m(O,C){P(O,e,C),h(e,r),I(s,r,null),h(r,n),h(r,i),h(i,o),h(o,l),h(i,c),v[u].m(i,null),h(e,m),I(g,e,null),b=!0},p(O,[C]){let k=u;u=$(O),u===k?v[u].p(O,C):(Se(),T(v[k],1,1,()=>{v[k]=null}),Oe(),f=v[u],f?f.p(O,C):(f=v[u]=y[u](O),f.c()),S(f,1),f.m(i,null));const D={};C&514&&(D.$$scope={dirty:C,ctx:O}),g.$set(D)},i(O){b||(S(s.$$.fragment,O),S(f),S(g.$$.fragment,O),O&&(p||Le(()=>{p=ze(e,Ge,{duration:500}),p.start()})),b=!0)},o(O){T(s.$$.fragment,O),T(f),T(g.$$.fragment,O),b=!1},d(O){O&&E(e),Y(s),v[u].d(),Y(g)}}}let yd="./default-profile.jpg";function kd(t,e,r){let{params:s}=e,n=s.authorID,i,o;async function l(){const{data:a,error:c}=await re.from("author").select().eq("author_id",n);console.log(a),r(0,i=a[0]);const{data:u,error:f}=await re.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),r(1,o=u)}return jr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class Fo extends we{constructor(e){super(),ve(this,e,kd,wd,be,{params:2})}}function xi(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function Fi(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,u,f,m=t[0].email+"",g,p;function b($,O){return $[0].bio==null?Sd:$d}let y=b(t),v=y(t);return{c(){e=_("div"),r=_("h1"),n=ie(s),i=w(),o=_("p"),v.c(),l=w(),a=_("p"),c=_("b"),c.textContent="Website:",u=w(),f=_("a"),g=ie(m),d(r,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="https://"+t[0].email),d(f,"id","publisher-website"),d(e,"class","container")},m($,O){P($,e,O),h(e,r),h(r,n),h(e,i),h(e,o),v.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&s!==(s=$[0].name+"")&&ge(n,s),y===(y=b($))&&v?v.p($,O):(v.d(1),v=y($),v&&(v.c(),v.m(o,null))),O&1&&m!==(m=$[0].email+"")&&ge(g,m),O&1&&p!==(p="https://"+$[0].email)&&d(f,"href",p)},d($){$&&E(e),v.d()}}}function $d(t){let e=t[0].bio+"",r;return{c(){r=ie(e)},m(s,n){P(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&ge(r,e)},d(s){s&&E(r)}}}function Sd(t){let e;return{c(){e=_("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(r,s){P(r,e,s)},p:j,d(r){r&&E(e)}}}function Od(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Td(t){let e,r,s=Te(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Hi(xi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Te(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=xi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Hi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Hi(t){let e,r;return e=new ps({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].author.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Dd(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y;r=new dt({props:{text:"Publisher Details"}});let v=t[0]&&Fi(t);m=new yt({props:{title:"Books",icon:"journal"}});const $=[Td,Od],O=[];function C(k,D){return k[1]?0:1}return p=C(t),b=O[p]=$[p](t),{c(){e=_("section"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),o=_("img"),a=w(),v&&v.c(),u=w(),f=_("section"),L(m.$$.fragment),g=w(),b.c(),d(o,"id","img-cover"),d(o,"class","border p-3"),et(o.src,l=Md)||d(o,"src",l),d(o,"alt","publisher"),d(o,"height","300"),d(o,"width","300"),pt(o,"object-fit","contain"),d(i,"id","publisher-cover"),d(i,"class","d-flex justify-content-center my-1"),d(n,"class","d-md-flex d-block"),d(e,"class","container"),d(f,"class","container")},m(k,D){P(k,e,D),I(r,e,null),h(e,s),h(e,n),h(n,i),h(i,o),h(n,a),v&&v.m(n,null),P(k,u,D),P(k,f,D),I(m,f,null),h(f,g),O[p].m(f,null),y=!0},p(k,[D]){k[0]?v?v.p(k,D):(v=Fi(k),v.c(),v.m(n,null)):v&&(v.d(1),v=null);let W=p;p=C(k),p===W?O[p].p(k,D):(Se(),T(O[W],1,1,()=>{O[W]=null}),Oe(),b=O[p],b?b.p(k,D):(b=O[p]=$[p](k),b.c()),S(b,1),b.m(f,null))},i(k){y||(S(r.$$.fragment,k),k&&(c||Le(()=>{c=ze(e,Ge,{duration:500}),c.start()})),S(m.$$.fragment,k),S(b),y=!0)},o(k){T(r.$$.fragment,k),T(m.$$.fragment,k),T(b),y=!1},d(k){k&&(E(e),E(u),E(f)),Y(r),v&&v.d(),Y(m),O[p].d()}}}let Md="./default-profile.jpg";function Cd(t,e,r){let{params:s}=e,n=s.publisherID,i,o;async function l(){const{data:a,error:c}=await re.from("publisher").select().eq("publisher_id",n);console.log(a),r(0,i=a[0]);const{data:u,error:f}=await re.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),r(1,o=u)}return jr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class Ho extends we{constructor(e){super(),ve(this,e,Cd,Dd,be,{params:2})}}function Ed(t){let e,r,s,n,i,o,l,a,c,u;return{c(){e=_("div"),r=_("div"),s=_("i"),i=w(),o=_("div"),l=_("h5"),a=_("a"),c=ie(t[0]),d(s,"class",n="bi bi-"+t[2]),d(r,"class","d-flex justify-content-center"),pt(r,"font-size","3em"),d(a,"class","stretched-link svelte-1vxezln"),d(a,"href",u="./#/"+t[1]),d(l,"class","card-title text-center my-2"),d(o,"class","card-body p-1"),d(e,"class","card col-md-3 col-5 border-1 py-2 svelte-1vxezln")},m(f,m){P(f,e,m),h(e,r),h(r,s),h(e,i),h(e,o),h(o,l),h(l,a),h(a,c)},p(f,[m]){m&4&&n!==(n="bi bi-"+f[2])&&d(s,"class",n),m&1&&ge(c,f[0]),m&2&&u!==(u="./#/"+f[1])&&d(a,"href",u)},i:j,o:j,d(f){f&&E(e)}}}function Pd(t,e,r){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=o=>{"name"in o&&r(0,s=o.name),"link"in o&&r(1,n=o.link),"icon"in o&&r(2,i=o.icon)},[s,n,i]}class or extends we{constructor(e){super(),ve(this,e,Pd,Ed,be,{name:0,link:1,icon:2})}}function jd(t){let e,r,s,n,i;return r=new or({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new or({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=_("div"),L(r.$$.fragment),s=w(),L(n.$$.fragment),d(e,"class","row justify-content-center gap-2")},m(o,l){P(o,e,l),I(r,e,null),h(e,s),I(n,e,null),i=!0},p:j,i(o){i||(S(r.$$.fragment,o),S(n.$$.fragment,o),i=!0)},o(o){T(r.$$.fragment,o),T(n.$$.fragment,o),i=!1},d(o){o&&E(e),Y(r),Y(n)}}}function Rd(t){let e,r,s,n,i,o,l;return r=new or({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new or({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new or({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),{c(){e=_("div"),L(r.$$.fragment),s=w(),L(n.$$.fragment),i=w(),L(o.$$.fragment),d(e,"class","row justify-content-center gap-4")},m(a,c){P(a,e,c),I(r,e,null),h(e,s),I(n,e,null),h(e,i),I(o,e,null),l=!0},p:j,i(a){l||(S(r.$$.fragment,a),S(n.$$.fragment,a),S(o.$$.fragment,a),l=!0)},o(a){T(r.$$.fragment,a),T(n.$$.fragment,a),T(o.$$.fragment,a),l=!1},d(a){a&&E(e),Y(r),Y(n),Y(o)}}}function Ad(t){let e,r,s;return r=new or({props:{name:"Books Data",link:"book-report",icon:"journals"}}),{c(){e=_("div"),L(r.$$.fragment),d(e,"class","row justify-content-center gap-4")},m(n,i){P(n,e,i),I(r,e,null),s=!0},p:j,i(n){s||(S(r.$$.fragment,n),s=!0)},o(n){T(r.$$.fragment,n),s=!1},d(n){n&&E(e),Y(r)}}}function Id(t){let e,r,s,n,i,o,l,a;return r=new yt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[jd]},$$scope:{ctx:t}}}),n=new yt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Rd]},$$scope:{ctx:t}}}),o=new yt({props:{title:"Reports",icon:"receipt",$$slots:{default:[Ad]},$$scope:{ctx:t}}}),{c(){e=_("main"),L(r.$$.fragment),s=w(),L(n.$$.fragment),i=w(),L(o.$$.fragment),d(e,"class","container")},m(c,u){P(c,e,u),I(r,e,null),h(e,s),I(n,e,null),h(e,i),I(o,e,null),a=!0},p(c,[u]){const f={};u&1&&(f.$$scope={dirty:u,ctx:c}),r.$set(f);const m={};u&1&&(m.$$scope={dirty:u,ctx:c}),n.$set(m);const g={};u&1&&(g.$$scope={dirty:u,ctx:c}),o.$set(g)},i(c){a||(S(r.$$.fragment,c),S(n.$$.fragment,c),S(o.$$.fragment,c),c&&(l||Le(()=>{l=ze(e,Ge,{duration:500}),l.start()})),a=!0)},o(c){T(r.$$.fragment,c),T(n.$$.fragment,c),T(o.$$.fragment,c),a=!1},d(c){c&&E(e),Y(r),Y(n),Y(o)}}}class Yd extends we{constructor(e){super(),ve(this,e,null,Id,be,{})}}function Wi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function qi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function Bi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function Ld(t){let e,r;return e=new It({}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Nd(t){let e;return{c(){e=_("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',d(e,"class","d-flex justify-content-center")},m(r,s){P(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}function Ud(t){let e,r,s=Te(Object.entries(t[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Vi(Wi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ve()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),r=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const c=Wi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Vi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function xd(t){let e,r,s=Te(Object.entries(t[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=zi(qi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ve()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),r=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const c=qi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=zi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Fd(t){let e,r,s=Te(Object.entries(t[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Gi(Bi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ve()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),r=!0},p(o,l){if(l&4){s=Te(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const c=Bi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Gi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Se(),a=s.length;a<n.length;a+=1)i(a);Oe()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Ke(n,o)}}}function Vi(t){let e,r;return e=new Uo({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function zi(t){let e,r;return e=new No({props:{id:t[14].author_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].author_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Gi(t){let e,r;return e=new ps({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.title=s[14].title),n&4&&(i.id=s[14].book_id),n&4&&(i.author=s[14].author.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function Hd(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D;r=new dt({props:{text:"Library Holdings"}});const W=[Fd,xd,Ud,Nd,Ld],x=[];function B(G,F){return G[2].books.length>0?0:G[2].author.length>0?1:G[2].publisher.length>0?2:G[0]?4:3}return v=B(t),$=x[v]=W[v](t),{c(){e=_("main"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),o=_("select"),l=_("option"),l.textContent="Books",a=_("option"),a.textContent="Author",c=_("option"),c.textContent="Publisher",u=w(),f=_("div"),m=_("input"),g=w(),p=_("button"),p.innerHTML='<i class="bi bi-search"></i>',b=w(),y=_("div"),$.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),d(o,"name","searchtype"),d(o,"class","form-select"),d(i,"class","col-auto col-md-2 p-0 pe-md-4"),d(m,"class","form-control form-control-lg"),d(m,"type","search"),d(m,"placeholder","Search"),d(m,"name","Search"),d(f,"class","col-6 col-md-6 p-0"),d(p,"class","btn btn-lg btn-success col-auto col-md-1"),d(p,"type","submit"),d(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),d(y,"class","row"),d(e,"class","container")},m(G,F){P(G,e,F),I(r,e,null),h(e,s),h(e,n),h(n,i),h(i,o),h(o,l),h(o,a),h(o,c),t[5](o),h(n,u),h(n,f),h(f,m),J(m,t[1]),h(n,g),h(n,p),h(e,b),h(e,y),x[v].m(y,null),C=!0,k||(D=[q(o,"change",t[4]),q(m,"input",t[6]),q(m,"keyup",t[7]),q(p,"click",t[4])],k=!0)},p(G,[F]){F&2&&m.value!==G[1]&&J(m,G[1]);let M=v;v=B(G),v===M?x[v].p(G,F):(Se(),T(x[M],1,1,()=>{x[M]=null}),Oe(),$=x[v],$?$.p(G,F):($=x[v]=W[v](G),$.c()),S($,1),$.m(y,null))},i(G){C||(S(r.$$.fragment,G),S($),G&&(O||Le(()=>{O=ze(e,Ge,{duration:500}),O.start()})),C=!0)},o(G){T(r.$$.fragment,G),T($),C=!1},d(G){G&&E(e),Y(r),t[5](null),x[v].d(),k=!1,ke(D)}}}function Wd(t,e,r){let s;uo(t,nl,y=>r(9,s=y));let n=!0;function i(){switch(s){case"/search/author":r(3,f.value="author",f);break;case"/search/publisher":r(3,f.value="publisher",f);break;default:r(3,f.value="books",f)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},f;async function m(){r(0,n=!0),a=f.value,console.log(a);const{data:y,error:v}=await re.from(a).select(o[a]).ilike(l[a],`%${c}%`);v&&console.log(v),r(2,u.books=[],u),r(2,u.author=[],u),r(2,u.publisher=[],u),r(2,u[a]=y,u),r(2,u),r(0,n=!1),console.log(n,u)}jr(i),jr(m);function g(y){dr[y?"unshift":"push"](()=>{f=y,r(3,f)})}function p(){c=this.value,r(1,c)}return[n,c,u,f,m,g,p,y=>y.key==="Enter"&&m()]}class ar extends we{constructor(e){super(),ve(this,e,Wd,Hd,be,{})}}function qd(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U,R,K,se,Q,ne,ee,de,Ae,je,Re,He,he,te,fe,Ee,ae,X,De,Ne,Bt,br;return{c(){e=_("main"),r=_("div"),s=_("div"),n=_("h2"),n.textContent="Login",i=w(),o=_("form"),l=_("div"),a=_("span"),a.innerHTML='<ion-icon name="person-circle"></ion-icon>',c=w(),u=_("input"),f=w(),m=_("label"),m.textContent="Username",g=w(),p=_("div"),b=_("span"),b.innerHTML='<ion-icon name="lock-closed"></ion-icon>',y=w(),v=_("input"),$=w(),O=_("label"),O.textContent="Password",C=w(),k=_("button"),k.textContent="Login",D=w(),W=_("div"),x=_("p"),B=ie("Don't have an account? "),G=_("a"),G.textContent="Register",F=w(),M=_("div"),H=_("h2"),H.textContent="Registration",z=w(),U=_("form"),R=_("div"),R.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="person-circle"></ion-icon></span> <input type="text" name="none" id="registerUsername" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerUsername" class="svelte-tapssc">Username</label>',K=w(),se=_("div"),se.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="call"></ion-icon></span> <input type="tel" id="registerNumber" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerNumber" class="svelte-tapssc">Mobile Number</label>',Q=w(),ne=_("div"),ne.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="lock-closed"></ion-icon></span> <input type="password" id="registerPassword" required="" autocomplete="off" name="none" class="svelte-tapssc"/> <label for="registerPassword" class="svelte-tapssc">Password</label>',ee=w(),de=_("button"),de.textContent="Register",Ae=w(),je=_("div"),Re=_("p"),He=ie("Already have an account? "),he=_("a"),he.textContent="Log in",fe=w(),Ee=_("div"),ae=_("button"),ae.textContent="Client",X=w(),De=_("button"),De.textContent="Staff",d(n,"class","svelte-tapssc"),d(a,"class","icon svelte-tapssc"),d(u,"type","text"),d(u,"id","usernameLogin"),u.required=!0,d(u,"autocomplete","off"),d(u,"class","svelte-tapssc"),d(m,"for","usernameLogin"),d(m,"class","svelte-tapssc"),d(l,"class","input-box svelte-tapssc"),d(b,"class","icon svelte-tapssc"),d(v,"type","password"),d(v,"id","passwordLogin"),v.required=!0,d(v,"autocomplete","off"),d(v,"class","svelte-tapssc"),d(O,"for","passwordLogin"),d(O,"class","svelte-tapssc"),d(p,"class","input-box svelte-tapssc"),d(k,"type","submit"),d(k,"class","bton svelte-tapssc"),d(k,"id","loginBton"),d(G,"href","./#/"),d(G,"class","register-link svelte-tapssc"),d(W,"class","login-register svelte-tapssc"),d(o,"id","form"),d(s,"class","form-box login svelte-tapssc"),d(H,"class","svelte-tapssc"),d(R,"class","input-box svelte-tapssc"),d(se,"class","input-box svelte-tapssc"),d(ne,"class","input-box svelte-tapssc"),d(de,"type","submit"),d(de,"class","bton svelte-tapssc"),d(de,"id","registerBtn"),d(he,"href","./#/"),d(he,"class","login-link svelte-tapssc"),d(je,"class","login-register svelte-tapssc"),d(U,"autocomplete","off"),d(M,"class","form-box register svelte-tapssc"),d(r,"class",te="wrapper "+t[0]+" active-popup svelte-tapssc"),d(ae,"class","m-2 btn btn-primary btn-lg"),d(De,"class","m-2 btn btn-danger btn-lg"),d(e,"class","svelte-tapssc")},m(qe,Dt){P(qe,e,Dt),h(e,r),h(r,s),h(s,n),h(s,i),h(s,o),h(o,l),h(l,a),h(l,c),h(l,u),J(u,t[1]),h(l,f),h(l,m),h(o,g),h(o,p),h(p,b),h(p,y),h(p,v),J(v,t[2]),h(p,$),h(p,O),h(o,C),h(o,k),h(o,D),h(o,W),h(W,x),h(x,B),h(x,G),h(r,F),h(r,M),h(M,H),h(M,z),h(M,U),h(U,R),h(U,K),h(U,se),h(U,Q),h(U,ne),h(U,ee),h(U,de),h(U,Ae),h(U,je),h(je,Re),h(Re,He),h(Re,he),h(e,fe),h(e,Ee),h(Ee,ae),h(Ee,X),h(Ee,De),Bt||(br=[q(u,"input",t[8]),q(v,"input",t[9]),q(k,"click",t[6]),q(G,"click",t[5]),q(o,"submit",Fa(t[6])),q(he,"click",t[5]),q(ae,"click",t[10]),q(De,"click",t[11])],Bt=!0)},p(qe,[Dt]){Dt&2&&u.value!==qe[1]&&J(u,qe[1]),Dt&4&&v.value!==qe[2]&&J(v,qe[2]),Dt&1&&te!==(te="wrapper "+qe[0]+" active-popup svelte-tapssc")&&d(r,"class",te)},i(qe){qe&&(Ne||Le(()=>{Ne=ze(e,Ge,{duration:500}),Ne.start()}))},o:j,d(qe){qe&&E(e),Bt=!1,ke(br)}}}function Bd(t,e,r){document.querySelector("body").setAttribute("data-bs-theme","dark"),al("/");function s(b){At.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",b)}function n(b){At.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",b)}let i=!0,o="";function l(){r(7,i=!i)}let a,c;async function u(){const{data:b,error:y}=await re.from("user_level").select("account_type, user_id").eq("username",a).eq("password",c).single();if(y){console.error(y);return}b.account_type=="student"?s(b.user_id):b.account_type=="staff"?n(b.user_id):console.error(b)}function f(){a=this.value,r(1,a)}function m(){c=this.value,r(2,c)}const g=()=>s("263690"),p=()=>n("153827");return t.$$.update=()=>{t.$$.dirty&128&&r(0,o=i?"":"active")},[o,a,c,s,n,l,u,i,f,m,g,p]}class Vd extends we{constructor(e){super(),ve(this,e,Bd,qd,be,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Wo;function A(){return Wo.apply(null,arguments)}function zd(t){Wo=t}function ot(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ht(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function _e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $n(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(_e(t,e))return!1;return!0}function Be(t){return t===void 0}function St(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Fr(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function qo(t,e){var r=[],s,n=t.length;for(s=0;s<n;++s)r.push(e(t[s],s));return r}function Pt(t,e){for(var r in e)_e(e,r)&&(t[r]=e[r]);return _e(e,"toString")&&(t.toString=e.toString),_e(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ht(t,e,r,s){return fa(t,e,r,s,!0).utc()}function Gd(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function oe(t){return t._pf==null&&(t._pf=Gd()),t._pf}var Ks;Array.prototype.some?Ks=Array.prototype.some:Ks=function(t){var e=Object(this),r=e.length>>>0,s;for(s=0;s<r;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function Sn(t){var e=null,r=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=oe(t),r=Ks.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function gs(t){var e=ht(NaN);return t!=null?Pt(oe(e),t):oe(e).userInvalidated=!0,e}var Ji=A.momentProperties=[],Ys=!1;function On(t,e){var r,s,n,i=Ji.length;if(Be(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Be(e._i)||(t._i=e._i),Be(e._f)||(t._f=e._f),Be(e._l)||(t._l=e._l),Be(e._strict)||(t._strict=e._strict),Be(e._tzm)||(t._tzm=e._tzm),Be(e._isUTC)||(t._isUTC=e._isUTC),Be(e._offset)||(t._offset=e._offset),Be(e._pf)||(t._pf=oe(e)),Be(e._locale)||(t._locale=e._locale),i>0)for(r=0;r<i;r++)s=Ji[r],n=e[s],Be(n)||(t[s]=n);return t}function Hr(t){On(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ys===!1&&(Ys=!0,A.updateOffset(this),Ys=!1)}function at(t){return t instanceof Hr||t!=null&&t._isAMomentObject!=null}function Bo(t){A.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function tt(t,e){var r=!0;return Pt(function(){if(A.deprecationHandler!=null&&A.deprecationHandler(null,t),r){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])_e(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}Bo(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return e.apply(this,arguments)},e)}var Ki={};function Vo(t,e){A.deprecationHandler!=null&&A.deprecationHandler(t,e),Ki[t]||(Bo(e),Ki[t]=!0)}A.suppressDeprecationWarnings=!1;A.deprecationHandler=null;function ft(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Jd(t){var e,r;for(r in t)_e(t,r)&&(e=t[r],ft(e)?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Zs(t,e){var r=Pt({},t),s;for(s in e)_e(e,s)&&(Ht(t[s])&&Ht(e[s])?(r[s]={},Pt(r[s],t[s]),Pt(r[s],e[s])):e[s]!=null?r[s]=e[s]:delete r[s]);for(s in t)_e(t,s)&&!_e(e,s)&&Ht(t[s])&&(r[s]=Pt({},r[s]));return r}function Tn(t){t!=null&&this.set(t)}var Qs;Object.keys?Qs=Object.keys:Qs=function(t){var e,r=[];for(e in t)_e(t,e)&&r.push(e);return r};var Kd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Zd(t,e,r){var s=this._calendar[t]||this._calendar.sameElse;return ft(s)?s.call(e,r):s}function ut(t,e,r){var s=""+Math.abs(t),n=e-s.length,i=t>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var Dn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Jr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ls={},lr={};function Z(t,e,r,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),t&&(lr[t]=n),e&&(lr[e[0]]=function(){return ut(n.apply(this,arguments),e[1],e[2])}),r&&(lr[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function Qd(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Xd(t){var e=t.match(Dn),r,s;for(r=0,s=e.length;r<s;r++)lr[e[r]]?e[r]=lr[e[r]]:e[r]=Qd(e[r]);return function(n){var i="",o;for(o=0;o<s;o++)i+=ft(e[o])?e[o].call(n,t):e[o];return i}}function Qr(t,e){return t.isValid()?(e=zo(e,t.localeData()),Ls[e]=Ls[e]||Xd(e),Ls[e](t)):t.localeData().invalidDate()}function zo(t,e){var r=5;function s(n){return e.longDateFormat(n)||n}for(Jr.lastIndex=0;r>=0&&Jr.test(t);)t=t.replace(Jr,s),Jr.lastIndex=0,r-=1;return t}var eh={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function th(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match(Dn).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var rh="Invalid date";function sh(){return this._invalidDate}var nh="%d",ih=/\d{1,2}/;function oh(t){return this._ordinal.replace("%d",t)}var ah={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function lh(t,e,r,s){var n=this._relativeTime[r];return ft(n)?n(t,e,r,s):n.replace(/%d/i,t)}function ch(t,e){var r=this._relativeTime[t>0?"future":"past"];return ft(r)?r(e):r.replace(/%s/i,e)}var Zi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function rt(t){return typeof t=="string"?Zi[t]||Zi[t.toLowerCase()]:void 0}function Mn(t){var e={},r,s;for(s in t)_e(t,s)&&(r=rt(s),r&&(e[r]=t[s]));return e}var uh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function dh(t){var e=[],r;for(r in t)_e(t,r)&&e.push({unit:r,priority:uh[r]});return e.sort(function(s,n){return s.priority-n.priority}),e}var Go=/\d/,Ze=/\d\d/,Jo=/\d{3}/,Cn=/\d{4}/,bs=/[+-]?\d{6}/,Ce=/\d\d?/,Ko=/\d\d\d\d?/,Zo=/\d\d\d\d\d\d?/,vs=/\d{1,3}/,En=/\d{1,4}/,ws=/[+-]?\d{1,6}/,_r=/\d+/,ys=/[+-]?\d+/,hh=/Z|[+-]\d\d:?\d\d/gi,ks=/Z|[+-]\d\d(?::?\d\d)?/gi,fh=/[+-]?\d+(\.\d{1,3})?/,Wr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,pr=/^[1-9]\d?/,Pn=/^([1-9]\d|\d)/,as;as={};function V(t,e,r){as[t]=ft(e)?e:function(s,n){return s&&r?r:e}}function mh(t,e){return _e(as,t)?as[t](e._strict,e._locale):new RegExp(_h(t))}function _h(t){return kt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,r,s,n,i){return r||s||n||i}))}function kt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Xe(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ce(t){var e=+t,r=0;return e!==0&&isFinite(e)&&(r=Xe(e)),r}var Xs={};function ye(t,e){var r,s=e,n;for(typeof t=="string"&&(t=[t]),St(e)&&(s=function(i,o){o[e]=ce(i)}),n=t.length,r=0;r<n;r++)Xs[t[r]]=s}function qr(t,e){ye(t,function(r,s,n,i){n._w=n._w||{},e(r,n._w,n,i)})}function ph(t,e,r){e!=null&&_e(Xs,t)&&Xs[t](e,r._a,r,t)}function $s(t){return t%4===0&&t%100!==0||t%400===0}var Fe=0,vt=1,ct=2,Ue=3,it=4,wt=5,Ft=6,gh=7,bh=8;Z("Y",0,0,function(){var t=this.year();return t<=9999?ut(t,4):"+"+t});Z(0,["YY",2],0,function(){return this.year()%100});Z(0,["YYYY",4],0,"year");Z(0,["YYYYY",5],0,"year");Z(0,["YYYYYY",6,!0],0,"year");V("Y",ys);V("YY",Ce,Ze);V("YYYY",En,Cn);V("YYYYY",ws,bs);V("YYYYYY",ws,bs);ye(["YYYYY","YYYYYY"],Fe);ye("YYYY",function(t,e){e[Fe]=t.length===2?A.parseTwoDigitYear(t):ce(t)});ye("YY",function(t,e){e[Fe]=A.parseTwoDigitYear(t)});ye("Y",function(t,e){e[Fe]=parseInt(t,10)});function Cr(t){return $s(t)?366:365}A.parseTwoDigitYear=function(t){return ce(t)+(ce(t)>68?1900:2e3)};var Qo=gr("FullYear",!0);function vh(){return $s(this.year())}function gr(t,e){return function(r){return r!=null?(Xo(this,t,r),A.updateOffset(this,e),this):Ar(this,t)}}function Ar(t,e){if(!t.isValid())return NaN;var r=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return s?r.getUTCSeconds():r.getSeconds();case"Minutes":return s?r.getUTCMinutes():r.getMinutes();case"Hours":return s?r.getUTCHours():r.getHours();case"Date":return s?r.getUTCDate():r.getDate();case"Day":return s?r.getUTCDay():r.getDay();case"Month":return s?r.getUTCMonth():r.getMonth();case"FullYear":return s?r.getUTCFullYear():r.getFullYear();default:return NaN}}function Xo(t,e,r){var s,n,i,o,l;if(!(!t.isValid()||isNaN(r))){switch(s=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(r):s.setMilliseconds(r));case"Seconds":return void(n?s.setUTCSeconds(r):s.setSeconds(r));case"Minutes":return void(n?s.setUTCMinutes(r):s.setMinutes(r));case"Hours":return void(n?s.setUTCHours(r):s.setHours(r));case"Date":return void(n?s.setUTCDate(r):s.setDate(r));case"FullYear":break;default:return}i=r,o=t.month(),l=t.date(),l=l===29&&o===1&&!$s(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function wh(t){return t=rt(t),ft(this[t])?this[t]():this}function yh(t,e){if(typeof t=="object"){t=Mn(t);var r=dh(t),s,n=r.length;for(s=0;s<n;s++)this[r[s].unit](t[r[s].unit])}else if(t=rt(t),ft(this[t]))return this[t](e);return this}function kh(t,e){return(t%e+e)%e}var Ie;Array.prototype.indexOf?Ie=Array.prototype.indexOf:Ie=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function jn(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=kh(e,12);return t+=(e-r)/12,r===1?$s(t)?29:28:31-r%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1});Z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Z("MMMM",0,0,function(t){return this.localeData().months(this,t)});V("M",Ce,pr);V("MM",Ce,Ze);V("MMM",function(t,e){return e.monthsShortRegex(t)});V("MMMM",function(t,e){return e.monthsRegex(t)});ye(["M","MM"],function(t,e){e[vt]=ce(t)-1});ye(["MMM","MMMM"],function(t,e,r,s){var n=r._locale.monthsParse(t,s,r._strict);n!=null?e[vt]=n:oe(r).invalidMonth=t});var $h="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ea="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ta=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Sh=Wr,Oh=Wr;function Th(t,e){return t?ot(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ta).test(e)?"format":"standalone"][t.month()]:ot(this._months)?this._months:this._months.standalone}function Dh(t,e){return t?ot(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ta.test(e)?"format":"standalone"][t.month()]:ot(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Mh(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=ht([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return r?e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null))}function Ch(t,e,r){var s,n,i;if(this._monthsParseExact)return Mh.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=ht([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(r&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!r&&this._monthsParse[s].test(t))return s}}function ra(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=ce(e);else if(e=t.localeData().monthsParse(e),!St(e))return t}var r=e,s=t.date();return s=s<29?s:Math.min(s,jn(t.year(),r)),t._isUTC?t._d.setUTCMonth(r,s):t._d.setMonth(r,s),t}function sa(t){return t!=null?(ra(this,t),A.updateOffset(this,!0),this):Ar(this,"Month")}function Eh(){return jn(this.year(),this.month())}function Ph(t){return this._monthsParseExact?(_e(this,"_monthsRegex")||na.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(_e(this,"_monthsShortRegex")||(this._monthsShortRegex=Sh),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function jh(t){return this._monthsParseExact?(_e(this,"_monthsRegex")||na.call(this),t?this._monthsStrictRegex:this._monthsRegex):(_e(this,"_monthsRegex")||(this._monthsRegex=Oh),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function na(){function t(a,c){return c.length-a.length}var e=[],r=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=ht([2e3,n]),o=kt(this.monthsShort(i,"")),l=kt(this.months(i,"")),e.push(o),r.push(l),s.push(l),s.push(o);e.sort(t),r.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Rh(t,e,r,s,n,i,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,r,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,r,s,n,i,o),l}function Ir(t){var e,r;return t<100&&t>=0?(r=Array.prototype.slice.call(arguments),r[0]=t+400,e=new Date(Date.UTC.apply(null,r)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ls(t,e,r){var s=7+e-r,n=(7+Ir(t,0,s).getUTCDay()-e)%7;return-n+s-1}function ia(t,e,r,s,n){var i=(7+r-s)%7,o=ls(t,s,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=t-1,c=Cr(a)+l):l>Cr(t)?(a=t+1,c=l-Cr(t)):(a=t,c=l),{year:a,dayOfYear:c}}function Yr(t,e,r){var s=ls(t.year(),e,r),n=Math.floor((t.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=t.year()-1,i=n+$t(o,e,r)):n>$t(t.year(),e,r)?(i=n-$t(t.year(),e,r),o=t.year()+1):(o=t.year(),i=n),{week:i,year:o}}function $t(t,e,r){var s=ls(t,e,r),n=ls(t+1,e,r);return(Cr(t)-s+n)/7}Z("w",["ww",2],"wo","week");Z("W",["WW",2],"Wo","isoWeek");V("w",Ce,pr);V("ww",Ce,Ze);V("W",Ce,pr);V("WW",Ce,Ze);qr(["w","ww","W","WW"],function(t,e,r,s){e[s.substr(0,1)]=ce(t)});function Ah(t){return Yr(t,this._week.dow,this._week.doy).week}var Ih={dow:0,doy:6};function Yh(){return this._week.dow}function Lh(){return this._week.doy}function Nh(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Uh(t){var e=Yr(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Z("d",0,"do","day");Z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Z("e",0,0,"weekday");Z("E",0,0,"isoWeekday");V("d",Ce);V("e",Ce);V("E",Ce);V("dd",function(t,e){return e.weekdaysMinRegex(t)});V("ddd",function(t,e){return e.weekdaysShortRegex(t)});V("dddd",function(t,e){return e.weekdaysRegex(t)});qr(["dd","ddd","dddd"],function(t,e,r,s){var n=r._locale.weekdaysParse(t,s,r._strict);n!=null?e.d=n:oe(r).invalidWeekday=t});qr(["d","e","E"],function(t,e,r,s){e[s]=ce(t)});function xh(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Fh(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Rn(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Hh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),oa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wh="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qh=Wr,Bh=Wr,Vh=Wr;function zh(t,e){var r=ot(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Rn(r,this._week.dow):t?r[t.day()]:r}function Gh(t){return t===!0?Rn(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Jh(t){return t===!0?Rn(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Kh(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=ht([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return r?e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1||(n=Ie.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ie.call(this._minWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Zh(t,e,r){var s,n,i;if(this._weekdaysParseExact)return Kh.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=ht([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(r&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(r&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!r&&this._weekdaysParse[s].test(t))return s}}function Qh(t){if(!this.isValid())return t!=null?this:NaN;var e=Ar(this,"Day");return t!=null?(t=xh(t,this.localeData()),this.add(t-e,"d")):e}function Xh(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function ef(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Fh(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function tf(t){return this._weekdaysParseExact?(_e(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(_e(this,"_weekdaysRegex")||(this._weekdaysRegex=qh),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function rf(t){return this._weekdaysParseExact?(_e(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(_e(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bh),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function sf(t){return this._weekdaysParseExact?(_e(this,"_weekdaysRegex")||An.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(_e(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vh),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function An(){function t(u,f){return f.length-u.length}var e=[],r=[],s=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ht([2e3,1]).day(i),l=kt(this.weekdaysMin(o,"")),a=kt(this.weekdaysShort(o,"")),c=kt(this.weekdays(o,"")),e.push(l),r.push(a),s.push(c),n.push(l),n.push(a),n.push(c);e.sort(t),r.sort(t),s.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function In(){return this.hours()%12||12}function nf(){return this.hours()||24}Z("H",["HH",2],0,"hour");Z("h",["hh",2],0,In);Z("k",["kk",2],0,nf);Z("hmm",0,0,function(){return""+In.apply(this)+ut(this.minutes(),2)});Z("hmmss",0,0,function(){return""+In.apply(this)+ut(this.minutes(),2)+ut(this.seconds(),2)});Z("Hmm",0,0,function(){return""+this.hours()+ut(this.minutes(),2)});Z("Hmmss",0,0,function(){return""+this.hours()+ut(this.minutes(),2)+ut(this.seconds(),2)});function aa(t,e){Z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}aa("a",!0);aa("A",!1);function la(t,e){return e._meridiemParse}V("a",la);V("A",la);V("H",Ce,Pn);V("h",Ce,pr);V("k",Ce,pr);V("HH",Ce,Ze);V("hh",Ce,Ze);V("kk",Ce,Ze);V("hmm",Ko);V("hmmss",Zo);V("Hmm",Ko);V("Hmmss",Zo);ye(["H","HH"],Ue);ye(["k","kk"],function(t,e,r){var s=ce(t);e[Ue]=s===24?0:s});ye(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t});ye(["h","hh"],function(t,e,r){e[Ue]=ce(t),oe(r).bigHour=!0});ye("hmm",function(t,e,r){var s=t.length-2;e[Ue]=ce(t.substr(0,s)),e[it]=ce(t.substr(s)),oe(r).bigHour=!0});ye("hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ue]=ce(t.substr(0,s)),e[it]=ce(t.substr(s,2)),e[wt]=ce(t.substr(n)),oe(r).bigHour=!0});ye("Hmm",function(t,e,r){var s=t.length-2;e[Ue]=ce(t.substr(0,s)),e[it]=ce(t.substr(s))});ye("Hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ue]=ce(t.substr(0,s)),e[it]=ce(t.substr(s,2)),e[wt]=ce(t.substr(n))});function of(t){return(t+"").toLowerCase().charAt(0)==="p"}var af=/[ap]\.?m?\.?/i,lf=gr("Hours",!0);function cf(t,e,r){return t>11?r?"pm":"PM":r?"am":"AM"}var ca={calendar:Kd,longDateFormat:eh,invalidDate:rh,ordinal:nh,dayOfMonthOrdinalParse:ih,relativeTime:ah,months:$h,monthsShort:ea,week:Ih,weekdays:Hh,weekdaysMin:Wh,weekdaysShort:oa,meridiemParse:af},Pe={},yr={},Lr;function uf(t,e){var r,s=Math.min(t.length,e.length);for(r=0;r<s;r+=1)if(t[r]!==e[r])return r;return s}function Qi(t){return t&&t.toLowerCase().replace("_","-")}function df(t){for(var e=0,r,s,n,i;e<t.length;){for(i=Qi(t[e]).split("-"),r=i.length,s=Qi(t[e+1]),s=s?s.split("-"):null;r>0;){if(n=Ss(i.slice(0,r).join("-")),n)return n;if(s&&s.length>=r&&uf(i,s)>=r-1)break;r--}e++}return Lr}function hf(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Ss(t){var e=null,r;if(Pe[t]===void 0&&typeof ts<"u"&&ts&&ts.exports&&hf(t))try{e=Lr._abbr,r=require,r("./locale/"+t),Rt(e)}catch{Pe[t]=null}return Pe[t]}function Rt(t,e){var r;return t&&(Be(e)?r=Ot(t):r=Yn(t,e),r?Lr=r:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Lr._abbr}function Yn(t,e){if(e!==null){var r,s=ca;if(e.abbr=t,Pe[t]!=null)Vo("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Pe[t]._config;else if(e.parentLocale!=null)if(Pe[e.parentLocale]!=null)s=Pe[e.parentLocale]._config;else if(r=Ss(e.parentLocale),r!=null)s=r._config;else return yr[e.parentLocale]||(yr[e.parentLocale]=[]),yr[e.parentLocale].push({name:t,config:e}),null;return Pe[t]=new Tn(Zs(s,e)),yr[t]&&yr[t].forEach(function(n){Yn(n.name,n.config)}),Rt(t),Pe[t]}else return delete Pe[t],null}function ff(t,e){if(e!=null){var r,s,n=ca;Pe[t]!=null&&Pe[t].parentLocale!=null?Pe[t].set(Zs(Pe[t]._config,e)):(s=Ss(t),s!=null&&(n=s._config),e=Zs(n,e),s==null&&(e.abbr=t),r=new Tn(e),r.parentLocale=Pe[t],Pe[t]=r),Rt(t)}else Pe[t]!=null&&(Pe[t].parentLocale!=null?(Pe[t]=Pe[t].parentLocale,t===Rt()&&Rt(t)):Pe[t]!=null&&delete Pe[t]);return Pe[t]}function Ot(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Lr;if(!ot(t)){if(e=Ss(t),e)return e;t=[t]}return df(t)}function mf(){return Qs(Pe)}function Ln(t){var e,r=t._a;return r&&oe(t).overflow===-2&&(e=r[vt]<0||r[vt]>11?vt:r[ct]<1||r[ct]>jn(r[Fe],r[vt])?ct:r[Ue]<0||r[Ue]>24||r[Ue]===24&&(r[it]!==0||r[wt]!==0||r[Ft]!==0)?Ue:r[it]<0||r[it]>59?it:r[wt]<0||r[wt]>59?wt:r[Ft]<0||r[Ft]>999?Ft:-1,oe(t)._overflowDayOfYear&&(e<Fe||e>ct)&&(e=ct),oe(t)._overflowWeeks&&e===-1&&(e=gh),oe(t)._overflowWeekday&&e===-1&&(e=bh),oe(t).overflow=e),t}var _f=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gf=/Z|[+-]\d\d(?::?\d\d)?/,Kr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ns=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],bf=/^\/?Date\((-?\d+)/i,vf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,wf={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ua(t){var e,r,s=t._i,n=_f.exec(s)||pf.exec(s),i,o,l,a,c=Kr.length,u=Ns.length;if(n){for(oe(t).iso=!0,e=0,r=c;e<r;e++)if(Kr[e][1].exec(n[1])){o=Kr[e][0],i=Kr[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(n[3]){for(e=0,r=u;e<r;e++)if(Ns[e][1].exec(n[3])){l=(n[2]||" ")+Ns[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(gf.exec(n[4]))a="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(a||""),Un(t)}else t._isValid=!1}function yf(t,e,r,s,n,i){var o=[kf(t),ea.indexOf(e),parseInt(r,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function kf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function $f(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Sf(t,e,r){if(t){var s=oa.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return oe(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function Of(t,e,r){if(t)return wf[t];if(e)return 0;var s=parseInt(r,10),n=s%100,i=(s-n)/100;return i*60+n}function da(t){var e=vf.exec($f(t._i)),r;if(e){if(r=yf(e[4],e[3],e[2],e[5],e[6],e[7]),!Sf(e[1],r,t))return;t._a=r,t._tzm=Of(e[8],e[9],e[10]),t._d=Ir.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),oe(t).rfc2822=!0}else t._isValid=!1}function Tf(t){var e=bf.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ua(t),t._isValid===!1)delete t._isValid;else return;if(da(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:A.createFromInputFallback(t)}A.createFromInputFallback=tt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function er(t,e,r){return t??e??r}function Df(t){var e=new Date(A.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Nn(t){var e,r,s=[],n,i,o;if(!t._d){for(n=Df(t),t._w&&t._a[ct]==null&&t._a[vt]==null&&Mf(t),t._dayOfYear!=null&&(o=er(t._a[Fe],n[Fe]),(t._dayOfYear>Cr(o)||t._dayOfYear===0)&&(oe(t)._overflowDayOfYear=!0),r=Ir(o,0,t._dayOfYear),t._a[vt]=r.getUTCMonth(),t._a[ct]=r.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ue]===24&&t._a[it]===0&&t._a[wt]===0&&t._a[Ft]===0&&(t._nextDay=!0,t._a[Ue]=0),t._d=(t._useUTC?Ir:Rh).apply(null,s),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ue]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(oe(t).weekdayMismatch=!0)}}function Mf(t){var e,r,s,n,i,o,l,a,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,r=er(e.GG,t._a[Fe],Yr(Me(),1,4).year),s=er(e.W,1),n=er(e.E,1),(n<1||n>7)&&(a=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Yr(Me(),i,o),r=er(e.gg,t._a[Fe],c.year),s=er(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>$t(r,i,o)?oe(t)._overflowWeeks=!0:a!=null?oe(t)._overflowWeekday=!0:(l=ia(r,s,n,i,o),t._a[Fe]=l.year,t._dayOfYear=l.dayOfYear)}A.ISO_8601=function(){};A.RFC_2822=function(){};function Un(t){if(t._f===A.ISO_8601){ua(t);return}if(t._f===A.RFC_2822){da(t);return}t._a=[],oe(t).empty=!0;var e=""+t._i,r,s,n,i,o,l=e.length,a=0,c,u;for(n=zo(t._f,t._locale).match(Dn)||[],u=n.length,r=0;r<u;r++)i=n[r],s=(e.match(mh(i,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&oe(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),lr[i]?(s?oe(t).empty=!1:oe(t).unusedTokens.push(i),ph(i,s,t)):t._strict&&!s&&oe(t).unusedTokens.push(i);oe(t).charsLeftOver=l-a,e.length>0&&oe(t).unusedInput.push(e),t._a[Ue]<=12&&oe(t).bigHour===!0&&t._a[Ue]>0&&(oe(t).bigHour=void 0),oe(t).parsedDateParts=t._a.slice(0),oe(t).meridiem=t._meridiem,t._a[Ue]=Cf(t._locale,t._a[Ue],t._meridiem),c=oe(t).era,c!==null&&(t._a[Fe]=t._locale.erasConvertYear(c,t._a[Fe])),Nn(t),Ln(t)}function Cf(t,e,r){var s;return r==null?e:t.meridiemHour!=null?t.meridiemHour(e,r):(t.isPM!=null&&(s=t.isPM(r),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function Ef(t){var e,r,s,n,i,o,l=!1,a=t._f.length;if(a===0){oe(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=On({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],Un(e),Sn(e)&&(o=!0),i+=oe(e).charsLeftOver,i+=oe(e).unusedTokens.length*10,oe(e).score=i,l?i<s&&(s=i,r=e):(s==null||i<s||o)&&(s=i,r=e,o&&(l=!0));Pt(t,r||e)}function Pf(t){if(!t._d){var e=Mn(t._i),r=e.day===void 0?e.date:e.day;t._a=qo([e.year,e.month,r,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),Nn(t)}}function jf(t){var e=new Hr(Ln(ha(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ha(t){var e=t._i,r=t._f;return t._locale=t._locale||Ot(t._l),e===null||r===void 0&&e===""?gs({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),at(e)?new Hr(Ln(e)):(Fr(e)?t._d=e:ot(r)?Ef(t):r?Un(t):Rf(t),Sn(t)||(t._d=null),t))}function Rf(t){var e=t._i;Be(e)?t._d=new Date(A.now()):Fr(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Tf(t):ot(e)?(t._a=qo(e.slice(0),function(r){return parseInt(r,10)}),Nn(t)):Ht(e)?Pf(t):St(e)?t._d=new Date(e):A.createFromInputFallback(t)}function fa(t,e,r,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(Ht(t)&&$n(t)||ot(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=r,i._i=t,i._f=e,i._strict=s,jf(i)}function Me(t,e,r,s){return fa(t,e,r,s,!1)}var Af=tt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Me.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:gs()}),If=tt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Me.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:gs()});function ma(t,e){var r,s;if(e.length===1&&ot(e[0])&&(e=e[0]),!e.length)return Me();for(r=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](r))&&(r=e[s]);return r}function Yf(){var t=[].slice.call(arguments,0);return ma("isBefore",t)}function Lf(){var t=[].slice.call(arguments,0);return ma("isAfter",t)}var Nf=function(){return Date.now?Date.now():+new Date},kr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Uf(t){var e,r=!1,s,n=kr.length;for(e in t)if(_e(t,e)&&!(Ie.call(kr,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<n;++s)if(t[kr[s]]){if(r)return!1;parseFloat(t[kr[s]])!==ce(t[kr[s]])&&(r=!0)}return!0}function xf(){return this._isValid}function Ff(){return lt(NaN)}function Os(t){var e=Mn(t),r=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Uf(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+r*12,this._data={},this._locale=Ot(),this._bubble()}function Xr(t){return t instanceof Os}function en(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Hf(t,e,r){var s=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,o;for(o=0;o<s;o++)ce(t[o])!==ce(e[o])&&i++;return i+n}function _a(t,e){Z(t,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+ut(~~(r/60),2)+e+ut(~~r%60,2)})}_a("Z",":");_a("ZZ","");V("Z",ks);V("ZZ",ks);ye(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=xn(ks,t)});var Wf=/([\+\-]|\d\d)/gi;function xn(t,e){var r=(e||"").match(t),s,n,i;return r===null?null:(s=r[r.length-1]||[],n=(s+"").match(Wf)||["-",0,0],i=+(n[1]*60)+ce(n[2]),i===0?0:n[0]==="+"?i:-i)}function Fn(t,e){var r,s;return e._isUTC?(r=e.clone(),s=(at(t)||Fr(t)?t.valueOf():Me(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),A.updateOffset(r,!1),r):Me(t).local()}function tn(t){return-Math.round(t._d.getTimezoneOffset())}A.updateOffset=function(){};function qf(t,e,r){var s=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=xn(ks,t),t===null)return this}else Math.abs(t)<16&&!r&&(t=t*60);return!this._isUTC&&e&&(n=tn(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==t&&(!e||this._changeInProgress?ba(this,lt(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,A.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:tn(this)}function Bf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Vf(t){return this.utcOffset(0,t)}function zf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(tn(this),"m")),this}function Gf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=xn(hh,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Jf(t){return this.isValid()?(t=t?Me(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Kf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Zf(){if(!Be(this._isDSTShifted))return this._isDSTShifted;var t={},e;return On(t,this),t=ha(t),t._a?(e=t._isUTC?ht(t._a):Me(t._a),this._isDSTShifted=this.isValid()&&Hf(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Qf(){return this.isValid()?!this._isUTC:!1}function Xf(){return this.isValid()?this._isUTC:!1}function pa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var em=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tm=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function lt(t,e){var r=t,s=null,n,i,o;return Xr(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:St(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(s=em.exec(t))?(n=s[1]==="-"?-1:1,r={y:0,d:ce(s[ct])*n,h:ce(s[Ue])*n,m:ce(s[it])*n,s:ce(s[wt])*n,ms:ce(en(s[Ft]*1e3))*n}):(s=tm.exec(t))?(n=s[1]==="-"?-1:1,r={y:Nt(s[2],n),M:Nt(s[3],n),w:Nt(s[4],n),d:Nt(s[5],n),h:Nt(s[6],n),m:Nt(s[7],n),s:Nt(s[8],n)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=rm(Me(r.from),Me(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new Os(r),Xr(t)&&_e(t,"_locale")&&(i._locale=t._locale),Xr(t)&&_e(t,"_isValid")&&(i._isValid=t._isValid),i}lt.fn=Os.prototype;lt.invalid=Ff;function Nt(t,e){var r=t&&parseFloat(t.replace(",","."));return(isNaN(r)?0:r)*e}function Xi(t,e){var r={};return r.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function rm(t,e){var r;return t.isValid()&&e.isValid()?(e=Fn(e,t),t.isBefore(e)?r=Xi(t,e):(r=Xi(e,t),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function ga(t,e){return function(r,s){var n,i;return s!==null&&!isNaN(+s)&&(Vo(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=s,s=i),n=lt(r,s),ba(this,n,t),this}}function ba(t,e,r,s){var n=e._milliseconds,i=en(e._days),o=en(e._months);t.isValid()&&(s=s??!0,o&&ra(t,Ar(t,"Month")+o*r),i&&Xo(t,"Date",Ar(t,"Date")+i*r),n&&t._d.setTime(t._d.valueOf()+n*r),s&&A.updateOffset(t,i||o))}var sm=ga(1,"add"),nm=ga(-1,"subtract");function va(t){return typeof t=="string"||t instanceof String}function im(t){return at(t)||Fr(t)||va(t)||St(t)||am(t)||om(t)||t===null||t===void 0}function om(t){var e=Ht(t)&&!$n(t),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],r=r||_e(t,i);return e&&r}function am(t){var e=ot(t),r=!1;return e&&(r=t.filter(function(s){return!St(s)&&va(t)}).length===0),e&&r}function lm(t){var e=Ht(t)&&!$n(t),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],r=r||_e(t,i);return e&&r}function cm(t,e){var r=t.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function um(t,e){arguments.length===1&&(arguments[0]?im(arguments[0])?(t=arguments[0],e=void 0):lm(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var r=t||Me(),s=Fn(r,this).startOf("day"),n=A.calendarFormat(this,s)||"sameElse",i=e&&(ft(e[n])?e[n].call(this,r):e[n]);return this.format(i||this.localeData().calendar(n,this,Me(r)))}function dm(){return new Hr(this)}function hm(t,e){var r=at(t)?t:Me(t);return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf()):!1}function fm(t,e){var r=at(t)?t:Me(t);return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf()):!1}function mm(t,e,r,s){var n=at(t)?t:Me(t),i=at(e)?e:Me(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,r):!this.isBefore(n,r))&&(s[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function _m(t,e){var r=at(t)?t:Me(t),s;return this.isValid()&&r.isValid()?(e=rt(e)||"millisecond",e==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function pm(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function gm(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function bm(t,e,r){var s,n,i;if(!this.isValid())return NaN;if(s=Fn(t,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=rt(e),e){case"year":i=es(this,s)/12;break;case"month":i=es(this,s);break;case"quarter":i=es(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return r?i:Xe(i)}function es(t,e){if(t.date()<e.date())return-es(e,t);var r=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(r,"months"),n,i;return e-s<0?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)||0}A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";A.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function vm(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function wm(t){if(!this.isValid())return null;var e=t!==!0,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?Qr(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ft(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Qr(r,"Z")):Qr(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ym(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",r,s,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),r="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(r+s+n+i)}function km(t){t||(t=this.isUtc()?A.defaultFormatUtc:A.defaultFormat);var e=Qr(this,t);return this.localeData().postformat(e)}function $m(t,e){return this.isValid()&&(at(t)&&t.isValid()||Me(t).isValid())?lt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Sm(t){return this.from(Me(),t)}function Om(t,e){return this.isValid()&&(at(t)&&t.isValid()||Me(t).isValid())?lt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Tm(t){return this.to(Me(),t)}function wa(t){var e;return t===void 0?this._locale._abbr:(e=Ot(t),e!=null&&(this._locale=e),this)}var ya=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function ka(){return this._locale}var cs=1e3,cr=60*cs,us=60*cr,$a=(365*400+97)*24*us;function ur(t,e){return(t%e+e)%e}function Sa(t,e,r){return t<100&&t>=0?new Date(t+400,e,r)-$a:new Date(t,e,r).valueOf()}function Oa(t,e,r){return t<100&&t>=0?Date.UTC(t+400,e,r)-$a:Date.UTC(t,e,r)}function Dm(t){var e,r;if(t=rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Oa:Sa,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ur(e+(this._isUTC?0:this.utcOffset()*cr),us);break;case"minute":e=this._d.valueOf(),e-=ur(e,cr);break;case"second":e=this._d.valueOf(),e-=ur(e,cs);break}return this._d.setTime(e),A.updateOffset(this,!0),this}function Mm(t){var e,r;if(t=rt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?Oa:Sa,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=us-ur(e+(this._isUTC?0:this.utcOffset()*cr),us)-1;break;case"minute":e=this._d.valueOf(),e+=cr-ur(e,cr)-1;break;case"second":e=this._d.valueOf(),e+=cs-ur(e,cs)-1;break}return this._d.setTime(e),A.updateOffset(this,!0),this}function Cm(){return this._d.valueOf()-(this._offset||0)*6e4}function Em(){return Math.floor(this.valueOf()/1e3)}function Pm(){return new Date(this.valueOf())}function jm(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Rm(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Am(){return this.isValid()?this.toISOString():null}function Im(){return Sn(this)}function Ym(){return Pt({},oe(this))}function Lm(){return oe(this).overflow}function Nm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr");Z("NN",0,0,"eraAbbr");Z("NNN",0,0,"eraAbbr");Z("NNNN",0,0,"eraName");Z("NNNNN",0,0,"eraNarrow");Z("y",["y",1],"yo","eraYear");Z("y",["yy",2],0,"eraYear");Z("y",["yyy",3],0,"eraYear");Z("y",["yyyy",4],0,"eraYear");V("N",Hn);V("NN",Hn);V("NNN",Hn);V("NNNN",Jm);V("NNNNN",Km);ye(["N","NN","NNN","NNNN","NNNNN"],function(t,e,r,s){var n=r._locale.erasParse(t,s,r._strict);n?oe(r).era=n:oe(r).invalidEra=t});V("y",_r);V("yy",_r);V("yyy",_r);V("yyyy",_r);V("yo",Zm);ye(["y","yy","yyy","yyyy"],Fe);ye(["yo"],function(t,e,r,s){var n;r._locale._eraYearOrdinalRegex&&(n=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[Fe]=r._locale.eraYearOrdinalParse(t,n):e[Fe]=parseInt(t,10)});function Um(t,e){var r,s,n,i=this._eras||Ot("en")._eras;for(r=0,s=i.length;r<s;++r){switch(typeof i[r].since){case"string":n=A(i[r].since).startOf("day"),i[r].since=n.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":n=A(i[r].until).startOf("day").valueOf(),i[r].until=n.valueOf();break}}return i}function xm(t,e,r){var s,n,i=this.eras(),o,l,a;for(t=t.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[s];break;case"NNNN":if(o===t)return i[s];break;case"NNNNN":if(a===t)return i[s];break}else if([o,l,a].indexOf(t)>=0)return i[s]}function Fm(t,e){var r=t.since<=t.until?1:-1;return e===void 0?A(t.since).year():A(t.since).year()+(e-t.offset)*r}function Hm(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].name;return""}function Wm(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].narrow;return""}function qm(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].abbr;return""}function Bm(){var t,e,r,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(r=n[t].since<=n[t].until?1:-1,s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return(this.year()-A(n[t].since).year())*r+n[t].offset;return this.year()}function Vm(t){return _e(this,"_erasNameRegex")||Wn.call(this),t?this._erasNameRegex:this._erasRegex}function zm(t){return _e(this,"_erasAbbrRegex")||Wn.call(this),t?this._erasAbbrRegex:this._erasRegex}function Gm(t){return _e(this,"_erasNarrowRegex")||Wn.call(this),t?this._erasNarrowRegex:this._erasRegex}function Hn(t,e){return e.erasAbbrRegex(t)}function Jm(t,e){return e.erasNameRegex(t)}function Km(t,e){return e.erasNarrowRegex(t)}function Zm(t,e){return e._eraYearOrdinalRegex||_r}function Wn(){var t=[],e=[],r=[],s=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=kt(c[n].name),l=kt(c[n].abbr),a=kt(c[n].narrow),e.push(o),t.push(l),r.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100});Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ts(t,e){Z(0,[t,t.length],0,e)}Ts("gggg","weekYear");Ts("ggggg","weekYear");Ts("GGGG","isoWeekYear");Ts("GGGGG","isoWeekYear");V("G",ys);V("g",ys);V("GG",Ce,Ze);V("gg",Ce,Ze);V("GGGG",En,Cn);V("gggg",En,Cn);V("GGGGG",ws,bs);V("ggggg",ws,bs);qr(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,s){e[s.substr(0,2)]=ce(t)});qr(["gg","GG"],function(t,e,r,s){e[s]=A.parseTwoDigitYear(t)});function Qm(t){return Ta.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Xm(t){return Ta.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function e_(){return $t(this.year(),1,4)}function t_(){return $t(this.isoWeekYear(),1,4)}function r_(){var t=this.localeData()._week;return $t(this.year(),t.dow,t.doy)}function s_(){var t=this.localeData()._week;return $t(this.weekYear(),t.dow,t.doy)}function Ta(t,e,r,s,n){var i;return t==null?Yr(this,s,n).year:(i=$t(t,s,n),e>i&&(e=i),n_.call(this,t,e,r,s,n))}function n_(t,e,r,s,n){var i=ia(t,e,r,s,n),o=Ir(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Z("Q",0,"Qo","quarter");V("Q",Go);ye("Q",function(t,e){e[vt]=(ce(t)-1)*3});function i_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date");V("D",Ce,pr);V("DD",Ce,Ze);V("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ye(["D","DD"],ct);ye("Do",function(t,e){e[ct]=ce(t.match(Ce)[0])});var Da=gr("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear");V("DDD",vs);V("DDDD",Jo);ye(["DDD","DDDD"],function(t,e,r){r._dayOfYear=ce(t)});function o_(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Z("m",["mm",2],0,"minute");V("m",Ce,Pn);V("mm",Ce,Ze);ye(["m","mm"],it);var a_=gr("Minutes",!1);Z("s",["ss",2],0,"second");V("s",Ce,Pn);V("ss",Ce,Ze);ye(["s","ss"],wt);var l_=gr("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)});Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Z(0,["SSS",3],0,"millisecond");Z(0,["SSSS",4],0,function(){return this.millisecond()*10});Z(0,["SSSSS",5],0,function(){return this.millisecond()*100});Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});V("S",vs,Go);V("SS",vs,Ze);V("SSS",vs,Jo);var jt,Ma;for(jt="SSSS";jt.length<=9;jt+="S")V(jt,_r);function c_(t,e){e[Ft]=ce(("0."+t)*1e3)}for(jt="S";jt.length<=9;jt+="S")ye(jt,c_);Ma=gr("Milliseconds",!1);Z("z",0,0,"zoneAbbr");Z("zz",0,0,"zoneName");function u_(){return this._isUTC?"UTC":""}function d_(){return this._isUTC?"Coordinated Universal Time":""}var N=Hr.prototype;N.add=sm;N.calendar=um;N.clone=dm;N.diff=bm;N.endOf=Mm;N.format=km;N.from=$m;N.fromNow=Sm;N.to=Om;N.toNow=Tm;N.get=wh;N.invalidAt=Lm;N.isAfter=hm;N.isBefore=fm;N.isBetween=mm;N.isSame=_m;N.isSameOrAfter=pm;N.isSameOrBefore=gm;N.isValid=Im;N.lang=ya;N.locale=wa;N.localeData=ka;N.max=If;N.min=Af;N.parsingFlags=Ym;N.set=yh;N.startOf=Dm;N.subtract=nm;N.toArray=jm;N.toObject=Rm;N.toDate=Pm;N.toISOString=wm;N.inspect=ym;typeof Symbol<"u"&&Symbol.for!=null&&(N[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});N.toJSON=Am;N.toString=vm;N.unix=Em;N.valueOf=Cm;N.creationData=Nm;N.eraName=Hm;N.eraNarrow=Wm;N.eraAbbr=qm;N.eraYear=Bm;N.year=Qo;N.isLeapYear=vh;N.weekYear=Qm;N.isoWeekYear=Xm;N.quarter=N.quarters=i_;N.month=sa;N.daysInMonth=Eh;N.week=N.weeks=Nh;N.isoWeek=N.isoWeeks=Uh;N.weeksInYear=r_;N.weeksInWeekYear=s_;N.isoWeeksInYear=e_;N.isoWeeksInISOWeekYear=t_;N.date=Da;N.day=N.days=Qh;N.weekday=Xh;N.isoWeekday=ef;N.dayOfYear=o_;N.hour=N.hours=lf;N.minute=N.minutes=a_;N.second=N.seconds=l_;N.millisecond=N.milliseconds=Ma;N.utcOffset=qf;N.utc=Vf;N.local=zf;N.parseZone=Gf;N.hasAlignedHourOffset=Jf;N.isDST=Kf;N.isLocal=Qf;N.isUtcOffset=Xf;N.isUtc=pa;N.isUTC=pa;N.zoneAbbr=u_;N.zoneName=d_;N.dates=tt("dates accessor is deprecated. Use date instead.",Da);N.months=tt("months accessor is deprecated. Use month instead",sa);N.years=tt("years accessor is deprecated. Use year instead",Qo);N.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bf);N.isDSTShifted=tt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Zf);function h_(t){return Me(t*1e3)}function f_(){return Me.apply(null,arguments).parseZone()}function Ca(t){return t}var pe=Tn.prototype;pe.calendar=Zd;pe.longDateFormat=th;pe.invalidDate=sh;pe.ordinal=oh;pe.preparse=Ca;pe.postformat=Ca;pe.relativeTime=lh;pe.pastFuture=ch;pe.set=Jd;pe.eras=Um;pe.erasParse=xm;pe.erasConvertYear=Fm;pe.erasAbbrRegex=zm;pe.erasNameRegex=Vm;pe.erasNarrowRegex=Gm;pe.months=Th;pe.monthsShort=Dh;pe.monthsParse=Ch;pe.monthsRegex=jh;pe.monthsShortRegex=Ph;pe.week=Ah;pe.firstDayOfYear=Lh;pe.firstDayOfWeek=Yh;pe.weekdays=zh;pe.weekdaysMin=Jh;pe.weekdaysShort=Gh;pe.weekdaysParse=Zh;pe.weekdaysRegex=tf;pe.weekdaysShortRegex=rf;pe.weekdaysMinRegex=sf;pe.isPM=of;pe.meridiem=cf;function ds(t,e,r,s){var n=Ot(),i=ht().set(s,e);return n[r](i,t)}function Ea(t,e,r){if(St(t)&&(e=t,t=void 0),t=t||"",e!=null)return ds(t,e,r,"month");var s,n=[];for(s=0;s<12;s++)n[s]=ds(t,s,r,"month");return n}function qn(t,e,r,s){typeof t=="boolean"?(St(e)&&(r=e,e=void 0),e=e||""):(e=t,r=e,t=!1,St(e)&&(r=e,e=void 0),e=e||"");var n=Ot(),i=t?n._week.dow:0,o,l=[];if(r!=null)return ds(e,(r+i)%7,s,"day");for(o=0;o<7;o++)l[o]=ds(e,(o+i)%7,s,"day");return l}function m_(t,e){return Ea(t,e,"months")}function __(t,e){return Ea(t,e,"monthsShort")}function p_(t,e,r){return qn(t,e,r,"weekdays")}function g_(t,e,r){return qn(t,e,r,"weekdaysShort")}function b_(t,e,r){return qn(t,e,r,"weekdaysMin")}Rt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,r=ce(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+r}});A.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Rt);A.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",Ot);var mt=Math.abs;function v_(){var t=this._data;return this._milliseconds=mt(this._milliseconds),this._days=mt(this._days),this._months=mt(this._months),t.milliseconds=mt(t.milliseconds),t.seconds=mt(t.seconds),t.minutes=mt(t.minutes),t.hours=mt(t.hours),t.months=mt(t.months),t.years=mt(t.years),this}function Pa(t,e,r,s){var n=lt(e,r);return t._milliseconds+=s*n._milliseconds,t._days+=s*n._days,t._months+=s*n._months,t._bubble()}function w_(t,e){return Pa(this,t,e,1)}function y_(t,e){return Pa(this,t,e,-1)}function eo(t){return t<0?Math.floor(t):Math.ceil(t)}function k_(){var t=this._milliseconds,e=this._days,r=this._months,s=this._data,n,i,o,l,a;return t>=0&&e>=0&&r>=0||t<=0&&e<=0&&r<=0||(t+=eo(rn(r)+e)*864e5,e=0,r=0),s.milliseconds=t%1e3,n=Xe(t/1e3),s.seconds=n%60,i=Xe(n/60),s.minutes=i%60,o=Xe(i/60),s.hours=o%24,e+=Xe(o/24),a=Xe(ja(e)),r+=a,e-=eo(rn(a)),l=Xe(r/12),r%=12,s.days=e,s.months=r,s.years=l,this}function ja(t){return t*4800/146097}function rn(t){return t*146097/4800}function $_(t){if(!this.isValid())return NaN;var e,r,s=this._milliseconds;if(t=rt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,r=this._months+ja(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(rn(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function Tt(t){return function(){return this.as(t)}}var Ra=Tt("ms"),S_=Tt("s"),O_=Tt("m"),T_=Tt("h"),D_=Tt("d"),M_=Tt("w"),C_=Tt("M"),E_=Tt("Q"),P_=Tt("y"),j_=Ra;function R_(){return lt(this)}function A_(t){return t=rt(t),this.isValid()?this[t+"s"]():NaN}function qt(t){return function(){return this.isValid()?this._data[t]:NaN}}var I_=qt("milliseconds"),Y_=qt("seconds"),L_=qt("minutes"),N_=qt("hours"),U_=qt("days"),x_=qt("months"),F_=qt("years");function H_(){return Xe(this.days()/7)}var _t=Math.round,tr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function W_(t,e,r,s,n){return n.relativeTime(e||1,!!r,t,s)}function q_(t,e,r,s){var n=lt(t).abs(),i=_t(n.as("s")),o=_t(n.as("m")),l=_t(n.as("h")),a=_t(n.as("d")),c=_t(n.as("M")),u=_t(n.as("w")),f=_t(n.as("y")),m=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||a<=1&&["d"]||a<r.d&&["dd",a];return r.w!=null&&(m=m||u<=1&&["w"]||u<r.w&&["ww",u]),m=m||c<=1&&["M"]||c<r.M&&["MM",c]||f<=1&&["y"]||["yy",f],m[2]=e,m[3]=+t>0,m[4]=s,W_.apply(null,m)}function B_(t){return t===void 0?_t:typeof t=="function"?(_t=t,!0):!1}function V_(t,e){return tr[t]===void 0?!1:e===void 0?tr[t]:(tr[t]=e,t==="s"&&(tr.ss=e-1),!0)}function z_(t,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=tr,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(r=t),typeof e=="object"&&(s=Object.assign({},tr,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=q_(this,!r,s,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Us=Math.abs;function Zt(t){return(t>0)-(t<0)||+t}function Ds(){if(!this.isValid())return this.localeData().invalidDate();var t=Us(this._milliseconds)/1e3,e=Us(this._days),r=Us(this._months),s,n,i,o,l=this.asSeconds(),a,c,u,f;return l?(s=Xe(t/60),n=Xe(s/60),t%=60,s%=60,i=Xe(r/12),r%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=Zt(this._months)!==Zt(l)?"-":"",u=Zt(this._days)!==Zt(l)?"-":"",f=Zt(this._milliseconds)!==Zt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(r?c+r+"M":"")+(e?u+e+"D":"")+(n||s||t?"T":"")+(n?f+n+"H":"")+(s?f+s+"M":"")+(t?f+o+"S":"")):"P0D"}var me=Os.prototype;me.isValid=xf;me.abs=v_;me.add=w_;me.subtract=y_;me.as=$_;me.asMilliseconds=Ra;me.asSeconds=S_;me.asMinutes=O_;me.asHours=T_;me.asDays=D_;me.asWeeks=M_;me.asMonths=C_;me.asQuarters=E_;me.asYears=P_;me.valueOf=j_;me._bubble=k_;me.clone=R_;me.get=A_;me.milliseconds=I_;me.seconds=Y_;me.minutes=L_;me.hours=N_;me.days=U_;me.weeks=H_;me.months=x_;me.years=F_;me.humanize=z_;me.toISOString=Ds;me.toString=Ds;me.toJSON=Ds;me.locale=wa;me.localeData=ka;me.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ds);me.lang=ya;Z("X",0,0,"unix");Z("x",0,0,"valueOf");V("x",ys);V("X",fh);ye("X",function(t,e,r){r._d=new Date(parseFloat(t)*1e3)});ye("x",function(t,e,r){r._d=new Date(ce(t))});//! moment.js
A.version="2.30.1";zd(Me);A.fn=N;A.min=Yf;A.max=Lf;A.now=Nf;A.utc=ht;A.unix=h_;A.months=m_;A.isDate=Fr;A.locale=Rt;A.invalid=gs;A.duration=lt;A.isMoment=at;A.weekdays=p_;A.parseZone=f_;A.localeData=Ot;A.isDuration=Xr;A.monthsShort=__;A.weekdaysMin=b_;A.defineLocale=Yn;A.updateLocale=ff;A.locales=mf;A.weekdaysShort=g_;A.normalizeUnits=rt;A.relativeTimeRounding=B_;A.relativeTimeThreshold=V_;A.calendarFormat=cm;A.prototype=N;A.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function G_(t){let e,r,s,n,i,o,l,a,c,u,f,m;const g=t[4].default,p=on(g,t,t[3],null);return{c(){e=_("div"),r=_("label"),s=ie(t[0]),n=w(),i=_("div"),p&&p.c(),o=w(),l=_("div"),a=_("button"),c=ie(t[2]),d(r,"class","col-sm-4 col-md-3 col-form-label"),d(r,"for",t[1]),d(i,"class","col-sm-5 col-md-6 col-9"),d(a,"class","w-100 btn btn-outline-primary"),d(l,"class","col-sm-3 col-md-3 col-auto"),d(e,"class","mb-4 row justify-content-center")},m(b,y){P(b,e,y),h(e,r),h(r,s),h(e,n),h(e,i),p&&p.m(i,null),h(e,o),h(e,l),h(l,a),h(a,c),u=!0,f||(m=q(a,"click",t[5]),f=!0)},p(b,[y]){(!u||y&1)&&ge(s,b[0]),(!u||y&2)&&d(r,"for",b[1]),p&&p.p&&(!u||y&8)&&ln(p,g,b,b[3],u?an(g,b[3],y,null):cn(b[3]),null),(!u||y&4)&&ge(c,b[2])},i(b){u||(S(p,b),u=!0)},o(b){T(p,b),u=!1},d(b){b&&E(e),p&&p.d(b),f=!1,m()}}}function J_(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){Hs.call(this,t,c)}return t.$$set=c=>{"label"in c&&r(0,i=c.label),"id"in c&&r(1,o=c.id),"button"in c&&r(2,l=c.button),"$$scope"in c&&r(3,n=c.$$scope)},[i,o,l,n,s,a]}class K_ extends we{constructor(e){super(),ve(this,e,J_,G_,be,{label:0,id:1,button:2})}}function Z_(t){let e,r,s,n,i,o,l,a;return{c(){e=_("div"),r=_("div"),s=_("b"),n=ie(t[0]),i=ie(":"),o=w(),l=_("div"),a=ie(t[1]),d(r,"class","col-sm-4 col-md-4"),d(l,"class","col-sm-8 col-md-8"),d(e,"class","mb-2 row")},m(c,u){P(c,e,u),h(e,r),h(r,s),h(s,n),h(s,i),h(e,o),h(e,l),h(l,a)},p(c,[u]){u&1&&ge(n,c[0]),u&2&&ge(a,c[1])},i:j,o:j,d(c){c&&E(e)}}}function Q_(t,e,r){let{key:s}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&r(0,s=i.key),"value"in i&&r(1,n=i.value)},[s,n]}class We extends we{constructor(e){super(),ve(this,e,Q_,Z_,be,{key:0,value:1})}}function X_(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.textContent="Cannot Find Reservation",d(e,"class",r="form-control "+t[9]),d(e,"type","number"),d(e,"id","reserve"),d(e,"placeholder","e.g 300xxx"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[4]),P(l,s,a),P(l,n,a),i||(o=[q(e,"input",t[18]),q(e,"keyup",t[19])],i=!0)},p(l,a){a[0]&512&&r!==(r="form-control "+l[9])&&d(e,"class",r),a[0]&16&&hs(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(E(e),E(s),E(n)),i=!1,ke(o)}}}function ep(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.textContent="Cannot Find Student",d(e,"class",r="form-control "+t[10]),d(e,"type","text"),d(e,"id","stud-id"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[5]),P(l,s,a),P(l,n,a),i||(o=[q(e,"input",t[20]),q(e,"keyup",t[21])],i=!0)},p(l,a){a[0]&1024&&r!==(r="form-control "+l[10])&&d(e,"class",r),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(E(e),E(s),E(n)),i=!1,ke(o)}}}function tp(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.textContent="Cannot Find Book",d(e,"class",r="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-barcode"),d(e,"placeholder","e.g 1000xxx"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[6]),P(l,s,a),P(l,n,a),i||(o=[q(e,"input",t[22]),q(e,"keyup",t[23])],i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&d(e,"class",r),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(E(e),E(s),E(n)),i=!1,ke(o)}}}function to(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C;return n=new We({props:{key:"Borrow ID",value:t[3]}}),o=new We({props:{key:"Name",value:t[7]}}),a=new We({props:{key:"Book Title",value:t[8]+" ("+t[6]+")"}}),u=new We({props:{key:"Staff Name",value:"Francis James E. Salles ("+t[14]+")"}}),m=new We({props:{key:"Borrow Date",value:A(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new We({props:{key:"Return Due",value:A(t[1]).format("MMMM DD, YYYY")+" ("+t[12]+" days)"}}),{c(){e=_("div"),r=_("h3"),r.textContent="Borrow Preview",s=w(),L(n.$$.fragment),i=w(),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),L(m.$$.fragment),g=w(),L(p.$$.fragment),b=w(),y=_("div"),v=_("button"),v.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',d(r,"class","py-4 text-center"),d(v,"class","btn btn-secondary"),d(y,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(k,D){P(k,e,D),h(e,r),h(e,s),I(n,e,null),h(e,i),I(o,e,null),h(e,l),I(a,e,null),h(e,c),I(u,e,null),h(e,f),I(m,e,null),h(e,g),I(p,e,null),h(e,b),h(e,y),h(y,v),$=!0,O||(C=q(v,"click",t[17]),O=!0)},p(k,D){const W={};D[0]&8&&(W.value=k[3]),n.$set(W);const x={};D[0]&128&&(x.value=k[7]),o.$set(x);const B={};D[0]&320&&(B.value=k[8]+" ("+k[6]+")"),a.$set(B);const G={};D[0]&1&&(G.value=A(k[0]).format("MMMM DD, YYYY - hh:mm a")),m.$set(G);const F={};D[0]&4098&&(F.value=A(k[1]).format("MMMM DD, YYYY")+" ("+k[12]+" days)"),p.$set(F)},i(k){$||(S(n.$$.fragment,k),S(o.$$.fragment,k),S(a.$$.fragment,k),S(u.$$.fragment,k),S(m.$$.fragment,k),S(p.$$.fragment,k),$=!0)},o(k){T(n.$$.fragment,k),T(o.$$.fragment,k),T(a.$$.fragment,k),T(u.$$.fragment,k),T(m.$$.fragment,k),T(p.$$.fragment,k),$=!1},d(k){k&&E(e),Y(n),Y(o),Y(a),Y(u),Y(m),Y(p),O=!1,C()}}}function rp(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U,R,K,se,Q,ne,ee,de,Ae,je,Re,He;r=new dt({props:{text:"Borrow Book"}}),o=new K_({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[X_]},$$scope:{ctx:t}}}),o.$on("click",t[16]),u=new Ye({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[ep]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[tp]},$$scope:{ctx:t}}});let he=t[2]&&to(t);return{c(){e=_("main"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),L(o.$$.fragment),l=w(),a=_("hr"),c=w(),L(u.$$.fragment),f=w(),L(m.$$.fragment),g=w(),p=_("div"),b=_("label"),b.textContent="Borrow Date:",y=w(),v=_("div"),$=_("input"),C=w(),k=_("div"),D=_("button"),D.textContent="Today",W=w(),x=_("div"),B=_("label"),B.textContent="Return Due:",G=w(),F=_("div"),M=_("input"),z=w(),U=_("div"),R=_("button"),R.textContent=`~${sn} Days`,K=w(),se=_("div"),Q=_("button"),Q.innerHTML='<i class="bi bi-receipt"></i> Borrow',ne=w(),ee=_("a"),ee.innerHTML='<i class="bi bi-x-circle"></i> Cancel',de=w(),he&&he.c(),d(a,"class","mb-4"),d(b,"class","col-sm-4 col-md-3 col-form-label"),d(b,"for","borrow-date"),d($,"class","form-control"),d($,"type","datetime-local"),d($,"id","borrow-date"),d($,"max",O=A(t[1]).format("YYYY-MM-DD HH:mm")),d(v,"class","col-sm-5 col-md-6 col-7"),d(D,"class","w-100 btn btn-outline-primary"),d(k,"class","col-sm-3 col-md-3 col-auto"),d(p,"class","mb-4 row justify-content-center"),d(B,"class","col-sm-4 col-md-3 col-form-label"),d(B,"for","return-date"),d(M,"class","form-control"),d(M,"type","date"),d(M,"id","return-date"),d(M,"min",H=A(t[0]).format("YYYY-MM-DD")),d(F,"class","col-sm-5 col-md-6 col-7"),d(R,"class","w-100 btn btn-outline-primary"),d(U,"class","col-sm-3 col-md-3 col-auto"),d(x,"class","mb-4 row justify-content-center"),d(Q,"class","btn btn-success"),d(ee,"href","./#/"),d(ee,"class","btn btn-danger"),d(se,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(te,fe){P(te,e,fe),I(r,e,null),h(e,s),h(e,n),h(n,i),I(o,i,null),h(i,l),h(i,a),h(i,c),I(u,i,null),h(i,f),I(m,i,null),h(i,g),h(i,p),h(p,b),h(p,y),h(p,v),h(v,$),J($,t[0]),h(p,C),h(p,k),h(k,D),h(i,W),h(i,x),h(x,B),h(x,G),h(x,F),h(F,M),J(M,t[1]),h(x,z),h(x,U),h(U,R),h(i,K),h(i,se),h(se,Q),h(se,ne),h(se,ee),h(n,de),he&&he.m(n,null),je=!0,Re||(He=[q($,"input",t[24]),q(D,"click",t[25]),q(M,"input",t[26]),q(R,"click",t[27]),q(Q,"click",t[28])],Re=!0)},p(te,fe){const Ee={};fe[0]&528|fe[1]&2&&(Ee.$$scope={dirty:fe,ctx:te}),o.$set(Ee);const ae={};fe[0]&1056|fe[1]&2&&(ae.$$scope={dirty:fe,ctx:te}),u.$set(ae);const X={};fe[0]&2112|fe[1]&2&&(X.$$scope={dirty:fe,ctx:te}),m.$set(X),(!je||fe[0]&2&&O!==(O=A(te[1]).format("YYYY-MM-DD HH:mm")))&&d($,"max",O),fe[0]&1&&J($,te[0]),(!je||fe[0]&1&&H!==(H=A(te[0]).format("YYYY-MM-DD")))&&d(M,"min",H),fe[0]&2&&J(M,te[1]),te[2]?he?(he.p(te,fe),fe[0]&4&&S(he,1)):(he=to(te),he.c(),S(he,1),he.m(n,null)):he&&(Se(),T(he,1,1,()=>{he=null}),Oe())},i(te){je||(S(r.$$.fragment,te),S(o.$$.fragment,te),S(u.$$.fragment,te),S(m.$$.fragment,te),S(he),te&&(Ae||Le(()=>{Ae=ze(e,Ge,{duration:500}),Ae.start()})),je=!0)},o(te){T(r.$$.fragment,te),T(o.$$.fragment,te),T(u.$$.fragment,te),T(m.$$.fragment,te),T(he),je=!1},d(te){te&&E(e),Y(r),Y(o),Y(u),Y(m),he&&he.d(),Re=!1,ke(He)}}}const sn=14;function ro(){return"400"+Math.floor(Math.random()*9e3)}function sp(t,e,r){let s,n;uo(t,il,Q=>r(29,n=Q));const i=A().format("YYYY-MM-DD HH:mm");let o=i,l=A(i).add(sn,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,f,m,g;const p=new URLSearchParams(n);f=p.get("reserve_id")||"",g=p.get("barcode")||"";let b,y,v,$,O;async function C(){const{data:Q,error:ne}=await re.from("account_details").select("fname, lname").eq("user_id",m).single();ne?(r(10,$="is-invalid"),console.error(ne)):r(7,b=`${Q.fname} ${Q.lname}`);const{data:ee,error:de}=await re.from("library_holdings").select("books(title)").eq("barcode",g).single();de||!ee?(r(11,O="is-invalid"),console.error(de)):r(8,y=ee.books.title),(!de||!ne)&&(r(3,u=await W()),r(2,c=!c))}async function k(){const{data:Q,error:ne}=await re.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",f).eq("active",!0).single();ne||!Q?(r(9,v="is-invalid"),console.error(ne)):(r(5,m=Q.stud_id),r(6,g=Q.library_holdings.barcode),C())}async function D(){const{data:Q,error:ne}=await re.from("library_holdings").select("holding_id").eq("barcode",g).single();ne&&console.error(ne);const ee=A(o).format("YYYY-MM-DDTHH:MMZ"),de=A(l).format("YYYY-MM-DDTHH:MMZ"),{error:Ae}=await re.from("book_borrow").insert({borrow_id:u,stud_id:m,holding_id:Q.holding_id,staff_id:a,borrow_date:ee,due_date:de});if(Ae){console.error(Ae);return}const{data:je,error:Re}=await re.from("book_reservation").update({staff_id:a,release_date:ee,active:!1}).eq("active",!0).eq("holding_id",Q.holding_id).select();if(console.log("updated Rows:",je),Re){console.error(Re);return}const{error:He}=await re.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",Q.holding_id);He&&console.error(He)}async function W(){let Q=ro();const{data:ne,error:ee}=await re.from("book_borrow").select().eq("borrow_id",Q);return console.log(ne),ne.length!=0&&(Q=ro(),console.log("exists")),console.log(Q),Q}function x(){f=hs(this.value),r(4,f)}const B=()=>r(9,v="");function G(){m=this.value,r(5,m)}const F=()=>r(10,$="");function M(){g=this.value,r(6,g)}const H=()=>r(11,O="");function z(){o=this.value,r(0,o)}const U=()=>r(0,o=i);function R(){l=this.value,r(1,l)}const K=()=>r(1,l=A(o).add(sn,"days").format("YYYY-MM-DD")),se=()=>{C()};return t.$$.update=()=>{t.$$.dirty[0]&3&&r(12,s=A(l).diff(A(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,f,m,g,b,y,v,$,O,s,i,a,C,k,D,x,B,G,F,M,H,z,U,R,K,se]}class np extends we{constructor(e){super(),ve(this,e,sp,rp,be,{},null,[-1,-1])}}function ip(t){let e,r,s,n,i,o;return{c(){e=_("input"),s=w(),n=_("div"),n.textContent="Borrow ID not found.",d(e,"class",r="form-control "+t[2]),d(e,"type","text"),d(e,"id","book-id"),d(n,"class","invalid-feedback")},m(l,a){P(l,e,a),J(e,t[4]),P(l,s,a),P(l,n,a),i||(o=[q(e,"keyup",t[17]),q(e,"input",t[18])],i=!0)},p(l,a){a&4&&r!==(r="form-control "+l[2])&&d(e,"class",r),a&16&&e.value!==l[4]&&J(e,l[4])},d(l){l&&(E(e),E(s),E(n)),i=!1,ke(o)}}}function op(t){let e,r,s,n,i,o,l;return{c(){e=_("select"),r=_("option"),r.textContent="New",s=_("option"),s.textContent="Good",n=_("option"),n.textContent="Fair",i=_("option"),i.textContent="Poor",r.__value="New",J(r,r.__value),s.__value="Good",J(s,s.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),d(e,"class","form-select"),d(e,"id","book-condition"),t[11]===void 0&&Le(()=>t[19].call(e))},m(a,c){P(a,e,c),h(e,r),h(e,s),h(e,n),h(e,i),Jn(e,t[11],!0),o||(l=q(e,"change",t[19]),o=!0)},p(a,c){c&2048&&Jn(e,a[11])},d(a){a&&E(e),o=!1,l()}}}function ap(t){let e,r,s;return{c(){e=_("textarea"),d(e,"class","form-control"),d(e,"rows","3"),d(e,"id","book-note")},m(n,i){P(n,e,i),J(e,t[10]),r||(s=q(e,"input",t[20]),r=!0)},p(n,i){i&1024&&J(e,n[10])},d(n){n&&E(e),r=!1,s()}}}function so(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G;n=new We({props:{key:"Borrow ID",value:t[4]}}),o=new We({props:{key:"Return ID",value:t[5]}}),a=new We({props:{key:"Name",value:t[9]+" ("+t[8]+")"}}),u=new We({props:{key:"Book Title",value:t[6]+" ("+t[7]+")"}}),m=new We({props:{key:"Condition",value:t[11]}});let F=t[10]&&no(t);return b=new We({props:{key:"Received by",value:"Francis James E. Salles ("+t[14]+")"}}),v=new We({props:{key:"Return Due",value:A(t[1]).format("MMMM DD, YYYY")}}),O=new We({props:{key:"Return Date",value:A(t[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(t[12]>0?`+${t[12]}`:t[12])+" days)"}}),{c(){e=_("div"),r=_("h3"),r.textContent="Return Preview",s=w(),L(n.$$.fragment),i=w(),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),L(m.$$.fragment),g=w(),F&&F.c(),p=w(),L(b.$$.fragment),y=w(),L(v.$$.fragment),$=w(),L(O.$$.fragment),C=w(),k=_("div"),D=_("button"),D.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',d(r,"class","py-4 text-center"),d(D,"class","btn btn-secondary"),d(k,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(M,H){P(M,e,H),h(e,r),h(e,s),I(n,e,null),h(e,i),I(o,e,null),h(e,l),I(a,e,null),h(e,c),I(u,e,null),h(e,f),I(m,e,null),h(e,g),F&&F.m(e,null),h(e,p),I(b,e,null),h(e,y),I(v,e,null),h(e,$),I(O,e,null),h(e,C),h(e,k),h(k,D),x=!0,B||(G=q(D,"click",t[16]),B=!0)},p(M,H){const z={};H&16&&(z.value=M[4]),n.$set(z);const U={};H&32&&(U.value=M[5]),o.$set(U);const R={};H&768&&(R.value=M[9]+" ("+M[8]+")"),a.$set(R);const K={};H&192&&(K.value=M[6]+" ("+M[7]+")"),u.$set(K);const se={};H&2048&&(se.value=M[11]),m.$set(se),M[10]?F?(F.p(M,H),H&1024&&S(F,1)):(F=no(M),F.c(),S(F,1),F.m(e,p)):F&&(Se(),T(F,1,1,()=>{F=null}),Oe());const Q={};H&2&&(Q.value=A(M[1]).format("MMMM DD, YYYY")),v.$set(Q);const ne={};H&4097&&(ne.value=A(M[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(M[12]>0?`+${M[12]}`:M[12])+" days)"),O.$set(ne)},i(M){x||(S(n.$$.fragment,M),S(o.$$.fragment,M),S(a.$$.fragment,M),S(u.$$.fragment,M),S(m.$$.fragment,M),S(F),S(b.$$.fragment,M),S(v.$$.fragment,M),S(O.$$.fragment,M),M&&Le(()=>{x&&(W||(W=Zn(e,vi,{duration:400,y:-60},!0)),W.run(1))}),x=!0)},o(M){T(n.$$.fragment,M),T(o.$$.fragment,M),T(a.$$.fragment,M),T(u.$$.fragment,M),T(m.$$.fragment,M),T(F),T(b.$$.fragment,M),T(v.$$.fragment,M),T(O.$$.fragment,M),M&&(W||(W=Zn(e,vi,{duration:400,y:-60},!1)),W.run(0)),x=!1},d(M){M&&E(e),Y(n),Y(o),Y(a),Y(u),Y(m),F&&F.d(),Y(b),Y(v),Y(O),M&&W&&W.end(),B=!1,G()}}}function no(t){let e,r;return e=new We({props:{key:"Return Note",value:t[10]}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},p(s,n){const i={};n&1024&&(i.value=s[10]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function lp(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H;r=new dt({props:{text:"Return Book"}}),o=new Ye({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[ip]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Condition:",id:"book-condition",$$slots:{default:[op]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Note:",id:"book-note",$$slots:{default:[ap]},$$scope:{ctx:t}}});let z=t[3]&&so(t);return{c(){e=_("main"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),m=_("div"),g=_("label"),g.textContent="Return Time:",p=w(),b=_("div"),y=_("input"),v=w(),$=_("div"),O=_("button"),O.textContent="Now",C=w(),k=_("div"),D=_("button"),D.innerHTML='<i class="bi bi-receipt"></i> Return',W=w(),x=_("a"),x.innerHTML='<i class="bi bi-x-circle"></i> Cancel',B=w(),z&&z.c(),d(g,"class","col-sm-4 col-md-3 col-form-label"),d(g,"for","return-time"),d(y,"class","form-control"),d(y,"type","datetime-local"),d(y,"id","return-time"),d(b,"class","col-sm-5 col-md-6 col-7"),d(O,"class","w-100 btn btn-outline-primary"),d($,"class","col-sm-3 col-md-3 col-auto"),d(m,"class","mb-4 row justify-content-center"),d(D,"class","btn btn-success"),d(x,"href","./#/"),d(x,"class","btn btn-danger"),d(k,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-sm-4"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(U,R){P(U,e,R),I(r,e,null),h(e,s),h(e,n),h(n,i),I(o,i,null),h(i,l),I(a,i,null),h(i,c),I(u,i,null),h(i,f),h(i,m),h(m,g),h(m,p),h(m,b),h(b,y),J(y,t[0]),h(m,v),h(m,$),h($,O),h(i,C),h(i,k),h(k,D),h(k,W),h(k,x),h(n,B),z&&z.m(n,null),F=!0,M||(H=[q(y,"input",t[21]),q(O,"click",t[22]),q(D,"click",t[15])],M=!0)},p(U,[R]){const K={};R&16777236&&(K.$$scope={dirty:R,ctx:U}),o.$set(K);const se={};R&16779264&&(se.$$scope={dirty:R,ctx:U}),a.$set(se);const Q={};R&16778240&&(Q.$$scope={dirty:R,ctx:U}),u.$set(Q),R&1&&J(y,U[0]),U[3]?z?(z.p(U,R),R&8&&S(z,1)):(z=so(U),z.c(),S(z,1),z.m(n,null)):z&&(Se(),T(z,1,1,()=>{z=null}),Oe())},i(U){F||(S(r.$$.fragment,U),S(o.$$.fragment,U),S(a.$$.fragment,U),S(u.$$.fragment,U),S(z),U&&(G||Le(()=>{G=ze(e,Ge,{duration:500}),G.start()})),F=!0)},o(U){T(r.$$.fragment,U),T(o.$$.fragment,U),T(a.$$.fragment,U),T(u.$$.fragment,U),T(z),F=!1},d(U){U&&E(e),Y(r),Y(o),Y(a),Y(u),z&&z.d(),M=!1,ke(H)}}}function io(){return"500"+Math.floor(Math.random()*9e3)}function cp(t,e,r){let s,n=A().format("YYYY-MM-DD HH:mm"),i=n,o="";const l=localStorage.getItem("user_id");let a="",c=!1,u,f,m,g,p,b,y,v;async function $(){const{data:F,error:M}=await re.from("book_borrow").select().eq("borrow_id",u).eq("active",!0).maybeSingle();if(!F){r(2,a="is-invalid");return}const{data:H,error:z}=await re.rpc("getborrowinfo",{borrowid:u});console.error(z),console.table(H);let U=H[0];r(9,b=`${U.fname} ${U.lname}`),r(8,p=U.stud_id),r(6,m=U.title),r(7,g=U.barcode),r(1,o=U.due_date),r(5,f=await C()),r(3,c=!c)}async function O(){const{data:F,error:M}=await re.from("book_return").insert({return_id:await C(),borrow_id:u,staff_id:l,note:y,return_date:A(i).format("YYYY-MM-DDTHH:MMZ"),condition:v}).select();if(M){console.error(M);return}console.table(F);const{data:H,error:z}=await re.from("library_holdings").update({status:"Available",condition:v}).eq("barcode",g).select(),{data:U,error:R}=await re.from("book_borrow").update({active:!1}).eq("borrow_id",u).select();if(z||R){console.error(z),console.error(R);return}console.log(H,U)}async function C(){let F=io();const{data:M,error:H}=await re.from("book_return").select().eq("return_id",F);return console.log(M),M.length!=0&&(F=io(),console.log("exists")),console.log(F),F}const k=()=>r(2,a="");function D(){u=this.value,r(4,u)}function W(){v=Wa(this),r(11,v)}function x(){y=this.value,r(10,y)}function B(){i=this.value,r(0,i)}const G=()=>r(0,i=n);return t.$$.update=()=>{t.$$.dirty&3&&r(12,s=A(i).diff(A(o).format("YYYY-MM-DD"),"days")*-1)},[i,o,a,c,u,f,m,g,p,b,y,v,s,n,l,$,O,k,D,W,x,B,G]}class up extends we{constructor(e){super(),ve(this,e,cp,lp,be,{})}}function dp(t){let e,r,s,n;return{c(){e=_("input"),d(e,"class",r="form-control "+t[7]),d(e,"type","text"),d(e,"id","author-name")},m(i,o){P(i,e,o),J(e,t[4]),s||(n=[q(e,"input",t[11]),q(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&d(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&E(e),s=!1,ke(n)}}}function hp(t){let e,r,s,n;return{c(){e=_("textarea"),d(e,"class",r="form-control "+t[8]),d(e,"id","author-bio"),d(e,"rows","4")},m(i,o){P(i,e,o),J(e,t[5]),s||(n=[q(e,"input",t[13]),q(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&d(e,"class",r),o&32&&J(e,i[5])},d(i){i&&E(e),s=!1,ke(n)}}}function fp(t){let e,r,s,n;return{c(){e=_("input"),d(e,"type","text"),d(e,"id","author-link"),d(e,"class",r="form-control "+t[9])},m(i,o){P(i,e,o),J(e,t[6]),s||(n=[q(e,"input",t[15]),q(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&d(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&E(e),s=!1,ke(n)}}}function mp(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","author-pic"),d(e,"accept","image/*")},m(n,i){P(n,e,i),t[18](e),r||(s=q(e,"change",t[17]),r=!0)},p:j,d(n){n&&E(e),t[18](null),r=!1,s()}}}function _p(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U;return r=new dt({props:{text:"Add Author"}}),o=new Ye({props:{label:"Author Name:",id:"author-name",$$slots:{default:[dp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[hp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Author Link:",id:"author-link",$$slots:{default:[fp]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Picture:",id:"author-pic",$$slots:{default:[mp]},$$scope:{ctx:t}}}),{c(){e=_("section"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),L(m.$$.fragment),g=w(),p=_("div"),b=_("label"),b.textContent="Preview:",y=w(),v=_("div"),$=_("img"),C=w(),k=_("button"),k.textContent="Remove",W=w(),x=_("div"),B=_("button"),B.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',G=w(),F=_("a"),F.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(v,"class","col-sm-8 col-md-9"),d(v,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(B,"class","btn btn-success"),d(F,"href","./#/"),d(x,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(R,K){P(R,e,K),I(r,e,null),h(e,s),h(e,n),h(n,i),I(o,i,null),h(i,l),I(a,i,null),h(i,c),I(u,i,null),h(i,f),I(m,i,null),h(i,g),h(i,p),h(p,b),h(p,y),h(p,v),h(v,$),h(v,C),h(v,k),h(i,W),h(i,x),h(x,B),h(x,G),h(x,F),H=!0,z||(U=[q(k,"click",t[19]),q(B,"click",t[10])],z=!0)},p(R,[K]){const se={};K&1048720&&(se.$$scope={dirty:K,ctx:R}),o.$set(se);const Q={};K&1048864&&(Q.$$scope={dirty:K,ctx:R}),a.$set(Q);const ne={};K&1049152&&(ne.$$scope={dirty:K,ctx:R}),u.$set(ne);const ee={};K&1048579&&(ee.$$scope={dirty:K,ctx:R}),m.$set(ee),(!H||K&8&&!et($.src,O=R[3]))&&d($,"src",O),(!H||K&4&&D!==(D="my-3 row "+R[2]))&&d(p,"class",D)},i(R){H||(S(r.$$.fragment,R),S(o.$$.fragment,R),S(a.$$.fragment,R),S(u.$$.fragment,R),S(m.$$.fragment,R),R&&(M||Le(()=>{M=ze(e,Ge,{duration:500}),M.start()})),H=!0)},o(R){T(r.$$.fragment,R),T(o.$$.fragment,R),T(a.$$.fragment,R),T(u.$$.fragment,R),T(m.$$.fragment,R),H=!1},d(R){R&&E(e),Y(r),Y(o),Y(a),Y(u),Y(m),z=!1,ke(U)}}}function pp(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,m;async function g(){r(7,u=l?"":"is-invalid"),r(8,f=a?"":"is-invalid"),r(9,m=c?"":"is-invalid"),console.log(u,f,m)}function p(){l=this.value,r(4,l)}const b=()=>r(7,u="");function y(){a=this.value,r(5,a)}const v=()=>r(8,f="");function $(){c=this.value,r(6,c)}const O=()=>r(9,m="");function C(){s=this.files,r(0,s)}function k(W){dr[W?"unshift":"push"](()=>{n=W,r(1,n)})}const D=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const W=URL.createObjectURL(s[0]);r(3,o=W)}else r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D]}class gp extends we{constructor(e){super(),ve(this,e,pp,_p,be,{})}}function bp(t){let e,r,s,n;return{c(){e=_("input"),d(e,"class",r="form-control "+t[7]),d(e,"type","text"),d(e,"id","publisher-name")},m(i,o){P(i,e,o),J(e,t[4]),s||(n=[q(e,"input",t[11]),q(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&d(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&E(e),s=!1,ke(n)}}}function vp(t){let e,r,s,n;return{c(){e=_("textarea"),d(e,"class",r="form-control "+t[8]),d(e,"id","publisher-description"),d(e,"rows","4")},m(i,o){P(i,e,o),J(e,t[5]),s||(n=[q(e,"input",t[13]),q(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&d(e,"class",r),o&32&&J(e,i[5])},d(i){i&&E(e),s=!1,ke(n)}}}function wp(t){let e,r,s,n;return{c(){e=_("input"),d(e,"type","text"),d(e,"id","publisher-link"),d(e,"class",r="form-control "+t[9])},m(i,o){P(i,e,o),J(e,t[6]),s||(n=[q(e,"input",t[15]),q(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&d(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&E(e),s=!1,ke(n)}}}function yp(t){let e,r,s;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","publisher-pic"),d(e,"accept","image/*")},m(n,i){P(n,e,i),t[18](e),r||(s=q(e,"change",t[17]),r=!0)},p:j,d(n){n&&E(e),t[18](null),r=!1,s()}}}function kp(t){let e,r,s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D,W,x,B,G,F,M,H,z,U;return r=new dt({props:{text:"Add Publisher"}}),o=new Ye({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[bp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[vp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[wp]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[yp]},$$scope:{ctx:t}}}),{c(){e=_("section"),L(r.$$.fragment),s=w(),n=_("div"),i=_("div"),L(o.$$.fragment),l=w(),L(a.$$.fragment),c=w(),L(u.$$.fragment),f=w(),L(m.$$.fragment),g=w(),p=_("div"),b=_("label"),b.textContent="Preview:",y=w(),v=_("div"),$=_("img"),C=w(),k=_("button"),k.textContent="Remove",W=w(),x=_("div"),B=_("button"),B.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',G=w(),F=_("a"),F.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(v,"class","col-sm-8 col-md-9"),d(v,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(B,"class","btn btn-success"),d(F,"href","./#/"),d(x,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(R,K){P(R,e,K),I(r,e,null),h(e,s),h(e,n),h(n,i),I(o,i,null),h(i,l),I(a,i,null),h(i,c),I(u,i,null),h(i,f),I(m,i,null),h(i,g),h(i,p),h(p,b),h(p,y),h(p,v),h(v,$),h(v,C),h(v,k),h(i,W),h(i,x),h(x,B),h(x,G),h(x,F),H=!0,z||(U=[q(k,"click",t[19]),q(B,"click",t[10])],z=!0)},p(R,[K]){const se={};K&1048720&&(se.$$scope={dirty:K,ctx:R}),o.$set(se);const Q={};K&1048864&&(Q.$$scope={dirty:K,ctx:R}),a.$set(Q);const ne={};K&1049152&&(ne.$$scope={dirty:K,ctx:R}),u.$set(ne);const ee={};K&1048579&&(ee.$$scope={dirty:K,ctx:R}),m.$set(ee),(!H||K&8&&!et($.src,O=R[3]))&&d($,"src",O),(!H||K&4&&D!==(D="my-3 row "+R[2]))&&d(p,"class",D)},i(R){H||(S(r.$$.fragment,R),S(o.$$.fragment,R),S(a.$$.fragment,R),S(u.$$.fragment,R),S(m.$$.fragment,R),R&&(M||Le(()=>{M=ze(e,Ge,{duration:500}),M.start()})),H=!0)},o(R){T(r.$$.fragment,R),T(o.$$.fragment,R),T(a.$$.fragment,R),T(u.$$.fragment,R),T(m.$$.fragment,R),H=!1},d(R){R&&E(e),Y(r),Y(o),Y(a),Y(u),Y(m),z=!1,ke(U)}}}function $p(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,m;async function g(){r(7,u=l?"":"is-invalid"),r(8,f=a?"":"is-invalid"),r(9,m=c?"":"is-invalid"),console.log(u,f,m)}function p(){l=this.value,r(4,l)}const b=()=>r(7,u="");function y(){a=this.value,r(5,a)}const v=()=>r(8,f="");function $(){c=this.value,r(6,c)}const O=()=>r(9,m="");function C(){s=this.files,r(0,s)}function k(W){dr[W?"unshift":"push"](()=>{n=W,r(1,n)})}const D=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const W=URL.createObjectURL(s[0]);r(3,o=W)}else r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,m,g,p,b,y,v,$,O,C,k,D]}class Sp extends we{constructor(e){super(),ve(this,e,$p,kp,be,{})}}function oo(t,e,r){const s=t.slice();return s[2]=e[r][0],s[3]=e[r][1],s}function Op(t){return{c:j,m:j,p:j,d:j}}function Tp(t){let e,r=Te(Object.entries(t[1])),s=[];for(let n=0;n<r.length;n+=1)s[n]=ao(oo(t,r,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ve()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){r=Te(Object.entries(n[1]));let o;for(o=0;o<r.length;o+=1){const l=oo(n,r,o);s[o]?s[o].p(l,i):(s[o]=ao(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Ke(s,n)}}}function ao(t){let e,r,s,n,i,o,l,a,c,u,f,m,g;return{c(){e=_("tr"),r=_("td"),r.textContent=`${t[3].isbn}`,s=w(),n=_("td"),n.textContent=`${t[3].title}`,i=w(),o=_("td"),o.textContent=`${t[3].available}`,l=w(),a=_("td"),a.textContent=`${t[3].reserved}`,c=w(),u=_("td"),u.textContent=`${t[3].borrowed}`,f=w(),m=_("td"),m.textContent=`${t[3].total}`,g=w(),d(r,"class","d-none d-sm-table-cell"),d(m,"class","fw-bold")},m(p,b){P(p,e,b),h(e,r),h(e,s),h(e,n),h(e,i),h(e,o),h(e,l),h(e,a),h(e,c),h(e,u),h(e,f),h(e,m),h(e,g)},p:j,d(p){p&&E(e)}}}function Dp(t){return{c:j,m:j,p:j,d:j}}function Mp(t){let e,r,s,n,i,o,l,a,c,u,f,m;r=new dt({props:{text:"Books Report"}});let g={ctx:t,current:null,token:null,hasCatch:!1,pending:Dp,then:Tp,catch:Op,value:1};return Or(t[0](),g),{c(){e=_("main"),L(r.$$.fragment),s=w(),n=_("div"),n.textContent="mga label",i=w(),o=_("div"),l=_("table"),a=_("thead"),a.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-none d-sm-table-cell">ISBN</th> <th class="py-3 col-5">Book Title</th> <th class="py-3 col-1 text-bg-success">Available</th> <th class="py-3 col-1 text-bg-secondary">Reserved</th> <th class="py-3 col-1 text-bg-danger">Borrowed</th> <th class="py-3 col-1 text-bg-primary">Total</th></tr>',c=w(),u=_("tbody"),g.block.c(),d(l,"class","table table-bordered table-striped table-hover text-center align-middle"),d(o,"class","table-responsive"),d(e,"class","container")},m(p,b){P(p,e,b),I(r,e,null),h(e,s),h(e,n),h(e,i),h(e,o),h(o,l),h(l,a),h(l,c),h(l,u),g.block.m(u,g.anchor=null),g.mount=()=>u,g.anchor=null,m=!0},p(p,[b]){t=p,Tr(g,t,b)},i(p){m||(S(r.$$.fragment,p),p&&(f||Le(()=>{f=ze(e,Ge,{duration:500}),f.start()})),m=!0)},o(p){T(r.$$.fragment,p),m=!1},d(p){p&&E(e),Y(r),g.block.d(),g.token=null,g=null}}}function Cp(t){async function e(){const{data:r,error:s}=await re.rpc("getbooksreport");return console.table(r),r}return e(),[e]}class Ep extends we{constructor(e){super(),ve(this,e,Cp,Mp,be,{})}}function Pp(t){let e,r;return e=new mn({props:{routes:{"*":Vd}}}),{c(){L(e.$$.fragment)},m(s,n){I(e,s,n),r=!0},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){Y(e,s)}}}function jp(t){let e,r,s,n;return e=new Lo({}),s=new mn({props:{routes:{"/":Yd,"/book/:bookID":xo,"/author/:authorID":Fo,"/publisher/:publisherID":Ho,"/search":ar,"/search/author":ar,"/search/publisher":ar,"/add-book":hd,"/add-author":gp,"/add-publisher":Sp,"/borrow":np,"/return":up,"/book-report":Ep,"*":kn}}}),{c(){L(e.$$.fragment),r=w(),L(s.$$.fragment)},m(i,o){I(e,i,o),P(i,r,o),I(s,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(s.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(s.$$.fragment,i),n=!1},d(i){i&&E(r),Y(e,i),Y(s,i)}}}function Rp(t){let e,r,s,n;return e=new Lo({}),s=new mn({props:{routes:{"/":Du,"/book/:bookID":xo,"/author/:authorID":Fo,"/publisher/:publisherID":Ho,"/search":ar,"/search/author":ar,"/search/publisher":ar,"*":kn}}}),{c(){L(e.$$.fragment),r=w(),L(s.$$.fragment)},m(i,o){I(e,i,o),P(i,r,o),I(s,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(s.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(s.$$.fragment,i),n=!1},d(i){i&&E(r),Y(e,i),Y(s,i)}}}function Ap(t){let e,r,s,n;const i=[Rp,jp,Pp],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=Ve()},m(a,c){o[e].m(a,c),P(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(Se(),T(o[u],1,1,()=>{o[u]=null}),Oe(),r=o[e],r||(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function Ip(t,e,r){let s;return At.subscribe(n=>{r(0,s=n);const i=s=="staff"?"153827":s=="client"?"263690":"";nr.set(i),localStorage.setItem("user_id",i)}),[s]}class Yp extends we{constructor(e){super(),ve(this,e,Ip,Ap,be,{})}}new Yp({target:document.getElementById("app")})});export default Lp();
