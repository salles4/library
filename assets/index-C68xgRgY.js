var Fa=Object.defineProperty;var qa=(r,e,t)=>e in r?Fa(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ba=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var tn=(r,e,t)=>(qa(r,typeof e!="symbol"?e+"":e,t),t);var e0=Ba((s0,ys)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function ee(){}const An=r=>r;function Jr(r,e){for(const t in e)r[t]=e[t];return r}function Wa(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function pl(r){return r()}function wi(){return Object.create(null)}function ge(r){r.forEach(pl)}function rs(r){return typeof r=="function"}function $e(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let cs;function Ne(r,e){return r===e?!0:(cs||(cs=document.createElement("a")),cs.href=e,r===cs.href)}function Va(r){return Object.keys(r).length===0}function bl(r,...e){if(r==null){for(const s of e)s(void 0);return ee}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rr(r,e,t){r.$$.on_destroy.push(bl(e,t))}function As(r,e,t,s){if(r){const n=gl(r,e,t,s);return r[0](n)}}function gl(r,e,t,s){return r[1]&&s?Jr(t.ctx.slice(),r[1](s(e))):t.ctx}function Is(r,e,t,s){if(r[2]&&s){const n=r[2](s(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function Ls(r,e,t,s,n,i){if(n){const o=gl(e,t,s,i);r.p(o,n)}}function Ys(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function yi(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}const vl=typeof window<"u";let wl=vl?()=>window.performance.now():()=>Date.now(),In=vl?r=>requestAnimationFrame(r):ee;const $r=new Set;function yl(r){$r.forEach(e=>{e.c(r)||($r.delete(e),e.f())}),$r.size!==0&&In(yl)}function kl(r){let e;return $r.size===0&&In(yl),{promise:new Promise(t=>{$r.add(e={c:r,f:t})}),abort(){$r.delete(e)}}}function c(r,e){r.appendChild(e)}function $l(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function za(r){const e=h("style");return e.textContent="/* empty */",Ga($l(r),e),e.sheet}function Ga(r,e){return c(r.head||r,e),e.sheet}function P(r,e,t){r.insertBefore(e,t||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function xe(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function h(r){return document.createElement(r)}function x(r){return document.createTextNode(r)}function v(){return x(" ")}function Je(){return x("")}function H(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function dt(r){return function(e){return e.preventDefault(),r.call(this,e)}}function u(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function er(r){return r===""?null:+r}function Ja(r){return Array.from(r.childNodes)}function ae(r,e){e=""+e,r.data!==e&&(r.data=e)}function B(r,e){r.value=e??""}function Ge(r,e,t,s){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function ks(r,e,t){for(let s=0;s<r.options.length;s+=1){const n=r.options[s];if(n.__value===e){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function ki(r){const e=r.querySelector(":checked");return e&&e.__value}function Sl(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}function $s(r,e){return new r(e)}const Ss=new Map;let Ds=0;function Ka(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Za(r,e){const t={stylesheet:za(e),rules:{}};return Ss.set(r,t),t}function bn(r,e,t,s,n,i,o,l=0){const a=16.666/s;let f=`{
`;for(let y=0;y<=1;y+=a){const w=e+(t-e)*i(y);f+=y*100+`%{${o(w,1-w)}}
`}const d=f+`100% {${o(t,1-t)}}
}`,_=`__svelte_${Ka(d)}_${l}`,m=$l(r),{stylesheet:g,rules:p}=Ss.get(m)||Za(m,r);p[_]||(p[_]=!0,g.insertRule(`@keyframes ${_} ${d}`,g.cssRules.length));const b=r.style.animation||"";return r.style.animation=`${b?`${b}, `:""}${_} ${s}ms linear ${n}ms 1 both`,Ds+=1,_}function gn(r,e){const t=(r.style.animation||"").split(", "),s=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=t.length-s.length;n&&(r.style.animation=s.join(", "),Ds-=n,Ds||Qa())}function Qa(){In(()=>{Ds||(Ss.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&M(e)}),Ss.clear())})}let Kr;function At(r){Kr=r}function ss(){if(!Kr)throw new Error("Function called outside component initialization");return Kr}function Dt(r){ss().$$.on_mount.push(r)}function xa(r){ss().$$.after_update.push(r)}function Xa(r){ss().$$.on_destroy.push(r)}function Dl(){const r=ss();return(e,t,{cancelable:s=!1}={})=>{const n=r.$$.callbacks[e];if(n){const i=Sl(e,t,{cancelable:s});return n.slice().forEach(o=>{o.call(r,i)}),!i.defaultPrevented}return!0}}function Ts(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const vr=[],it=[];let Sr=[];const $i=[],Tl=Promise.resolve();let vn=!1;function Ol(){vn||(vn=!0,Tl.then(Yn))}function Ln(){return Ol(),Tl}function je(r){Sr.push(r)}const rn=new Set;let hr=0;function Yn(){if(hr!==0)return;const r=Kr;do{try{for(;hr<vr.length;){const e=vr[hr];hr++,At(e),eu(e.$$)}}catch(e){throw vr.length=0,hr=0,e}for(At(null),vr.length=0,hr=0;it.length;)it.pop()();for(let e=0;e<Sr.length;e+=1){const t=Sr[e];rn.has(t)||(rn.add(t),t())}Sr.length=0}while(vr.length);for(;$i.length;)$i.pop()();vn=!1,rn.clear(),At(r)}function eu(r){if(r.fragment!==null){r.update(),ge(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(je)}}function tu(r){const e=[],t=[];Sr.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Sr=e}let Ur;function Cl(){return Ur||(Ur=Promise.resolve(),Ur.then(()=>{Ur=null})),Ur}function Wr(r,e,t){r.dispatchEvent(Sl(`${e?"intro":"outro"}${t}`))}const ps=new Set;let It;function Le(){It={r:0,c:[],p:It}}function Ye(){It.r||ge(It.c),It=It.p}function E(r,e){r&&r.i&&(ps.delete(r),r.i(e))}function j(r,e,t,s){if(r&&r.o){if(ps.has(r))return;ps.add(r),It.c.push(()=>{ps.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}const Ml={duration:0};function Ke(r,e,t){const s={direction:"in"};let n=e(r,t,s),i=!1,o,l,a=0;function f(){o&&gn(r,o)}function d(){const{delay:m=0,duration:g=300,easing:p=An,tick:b=ee,css:y}=n||Ml;y&&(o=bn(r,0,1,g,m,p,y,a++)),b(0,1);const w=wl()+m,O=w+g;l&&l.abort(),i=!0,je(()=>Wr(r,!0,"start")),l=kl(D=>{if(i){if(D>=O)return b(1,0),Wr(r,!0,"end"),f(),i=!1;if(D>=w){const $=p((D-w)/g);b($,1-$)}}return i})}let _=!1;return{start(){_||(_=!0,gn(r),rs(n)?(n=n(s),Cl().then(d)):d())},invalidate(){_=!1},end(){i&&(f(),i=!1)}}}function Tt(r,e,t,s){let i=e(r,t,{direction:"both"}),o=s?0:1,l=null,a=null,f=null,d;function _(){f&&gn(r,f)}function m(p,b){const y=p.b-o;return b*=Math.abs(y),{a:o,b:p.b,d:y,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:y=300,easing:w=An,tick:O=ee,css:D}=i||Ml,$={start:wl()+b,b:p};p||($.group=It,It.r+=1),"inert"in r&&(p?d!==void 0&&(r.inert=d):(d=r.inert,r.inert=!0)),l||a?a=$:(D&&(_(),f=bn(r,o,p,y,b,w,D)),p&&O(0,1),l=m($,y),je(()=>Wr(r,p,"start")),kl(S=>{if(a&&S>a.start&&(l=m(a,y),a=null,Wr(r,l.b,"start"),D&&(_(),f=bn(r,o,l.b,l.duration,0,w,i.css))),l){if(S>=l.end)O(o=l.b,1-o),Wr(r,l.b,"end"),a||(l.b?_():--l.group.r||ge(l.group.c)),l=null;else if(S>=l.start){const k=S-l.start;o=l.a+l.d*w(k/l.duration),O(o,1-o)}}return!!(l||a)}))}return{run(p){rs(i)?Cl().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){_(),l=a=null}}}function sn(r,e){const t=e.token={};function s(n,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const f=n&&(e.current=n)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((_,m)=>{m!==i&&_&&(Le(),j(_,1,1,()=>{e.blocks[m]===_&&(e.blocks[m]=null)}),Ye())}):e.block.d(1),f.c(),E(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[i]=f),d&&Yn()}if(Wa(r)){const n=ss();if(r.then(i=>{At(n),s(e.then,1,e.value,i),At(null)},i=>{if(At(n),s(e.catch,2,e.error,i),At(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,r),!0;e.resolved=r}}function nn(r,e,t){const s=e.slice(),{resolved:n}=r;r.current===r.then&&(s[r.value]=n),r.current===r.catch&&(s[r.error]=n),r.block.p(s,t)}function Se(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Os(r,e){const t={},s={},n={$$scope:1};let i=r.length;for(;i--;){const o=r[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(t[a]=l[a],n[a]=1);r[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in t||(t[o]=void 0);return t}function Cs(r){return typeof r=="object"&&r!==null?r:{}}function Q(r){r&&r.c()}function K(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),je(()=>{const i=r.$$.on_mount.map(pl).filter(rs);r.$$.on_destroy?r.$$.on_destroy.push(...i):ge(i),r.$$.on_mount=[]}),n.forEach(je)}function Z(r,e){const t=r.$$;t.fragment!==null&&(tu(t.after_update),ge(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ru(r,e){r.$$.dirty[0]===-1&&(vr.push(r),Ol(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function De(r,e,t,s,n,i,o=null,l=[-1]){const a=Kr;At(r);const f=r.$$={fragment:null,ctx:[],props:i,update:ee,not_equal:n,bound:wi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:wi(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(r,e.props||{},(_,m,...g)=>{const p=g.length?g[0]:m;return f.ctx&&n(f.ctx[_],f.ctx[_]=p)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](p),d&&ru(r,_)),m}):[],f.update(),d=!0,ge(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const _=Ja(e.target);f.fragment&&f.fragment.l(_),_.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&E(r.$$.fragment),K(r,e.target,e.anchor),Yn()}At(a)}class Te{constructor(){tn(this,"$$");tn(this,"$$set")}$destroy(){Z(this,1),this.$destroy=ee}$on(e,t){if(!rs(t))return ee;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Va(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const su="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(su);const _r=[];function Pl(r,e){return{subscribe:Ns(r,e).subscribe}}function Ns(r,e=ee){let t;const s=new Set;function n(l){if($e(r,l)&&(r=l,t)){const a=!_r.length;for(const f of s)f[1](),_r.push(f,r);if(a){for(let f=0;f<_r.length;f+=2)_r[f][0](_r[f+1]);_r.length=0}}}function i(l){n(l(r))}function o(l,a=ee){const f=[l,a];return s.add(f),s.size===1&&(t=e(n,i)||ee),l(r),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:o}}function El(r,e,t){const s=!Array.isArray(r),n=s?[r]:r;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Pl(t,(o,l)=>{let a=!1;const f=[];let d=0,_=ee;const m=()=>{if(d)return;_();const p=e(s?f[0]:f,o,l);i?o(p):_=rs(p)?p:ee},g=n.map((p,b)=>bl(p,y=>{f[b]=y,d&=~(1<<b),a&&m()},()=>{d|=1<<b}));return a=!0,m(),function(){ge(g),_(),a=!1}})}const xt=Ns(localStorage.getItem("accType")),bs=Ns(localStorage.getItem("user_id"));window.addEventListener("storage",function(r){let e;bs.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(xt.set(""),bs.set("")):(bs.set(localStorage.getItem("user_id")),xt.set(localStorage.getItem("accType"))))});function nu(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,s,n,i,o=[],l="",a=r.split("/");for(a[0]||a.shift();n=a.shift();)t=n[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function iu(r){let e,t,s;const n=[r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<n.length;d+=1)f=Jr(f,n[d]);return a!==void 0&&a&4&&(f=Jr(f,Os(n,[Cs(l[2])]))),{props:f}}return i&&(e=$s(i,o(r)),e.$on("routeEvent",r[7])),{c(){e&&Q(e.$$.fragment),t=Je()},m(l,a){e&&K(e,l,a),P(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Le();const f=e;j(f.$$.fragment,1,0,()=>{Z(f,1)}),Ye()}i?(e=$s(i,o(l,a)),e.$on("routeEvent",l[7]),Q(e.$$.fragment),E(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&4?Os(n,[Cs(l[2])]):{};e.$set(f)}},i(l){s||(e&&E(e.$$.fragment,l),s=!0)},o(l){e&&j(e.$$.fragment,l),s=!1},d(l){l&&M(t),e&&Z(e,l)}}}function ou(r){let e,t,s;const n=[{params:r[1]},r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<n.length;d+=1)f=Jr(f,n[d]);return a!==void 0&&a&6&&(f=Jr(f,Os(n,[a&2&&{params:l[1]},a&4&&Cs(l[2])]))),{props:f}}return i&&(e=$s(i,o(r)),e.$on("routeEvent",r[6])),{c(){e&&Q(e.$$.fragment),t=Je()},m(l,a){e&&K(e,l,a),P(l,t,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Le();const f=e;j(f.$$.fragment,1,0,()=>{Z(f,1)}),Ye()}i?(e=$s(i,o(l,a)),e.$on("routeEvent",l[6]),Q(e.$$.fragment),E(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&6?Os(n,[a&2&&{params:l[1]},a&4&&Cs(l[2])]):{};e.$set(f)}},i(l){s||(e&&E(e.$$.fragment,l),s=!0)},o(l){e&&j(e.$$.fragment,l),s=!1},d(l){l&&M(t),e&&Z(e,l)}}}function lu(r){let e,t,s,n;const i=[ou,iu],o=[];function l(a,f){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,[f]){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Si(){const r=window.location.href.indexOf("#/");let e=r>-1?window.location.href.substr(r+1):"/";const t=e.indexOf("?");let s="";return t>-1&&(s=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:s}}const Nn=Pl(null,function(e){e(Si());const t=()=>{e(Si())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),au=El(Nn,r=>r.location),ns=El(Nn,r=>r.querystring),Di=Ns(void 0);async function Zr(){await Ln(),window.history.back()}async function Xt(r){if(!r||r.length<1||r.charAt(0)!="/"&&r.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ln();const e=(r.charAt(0)=="#"?"":"#")+r;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function uu(r){r?window.scrollTo(r.__svelte_spa_router_scrollX,r.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function cu(r,e,t){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(S,k){if(!k||typeof k!="function"&&(typeof k!="object"||k._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:C,keys:T}=nu(S);this.path=S,typeof k=="object"&&k._sveltesparouter===!0?(this.component=k.component,this.conditions=k.conditions||[],this.userData=k.userData,this.props=k.props||{}):(this.component=()=>Promise.resolve(k),this.conditions=[],this.props={}),this._pattern=C,this._keys=T}match(S){if(n){if(typeof n=="string")if(S.startsWith(n))S=S.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const L=S.match(n);if(L&&L[0])S=S.substr(L[0].length)||"/";else return null}}const k=this._pattern.exec(S);if(k===null)return null;if(this._keys===!1)return k;const C={};let T=0;for(;T<this._keys.length;){try{C[this._keys[T]]=decodeURIComponent(k[T+1]||"")||null}catch{C[this._keys[T]]=null}T++}return C}async checkConditions(S){for(let k=0;k<this.conditions.length;k++)if(!await this.conditions[k](S))return!1;return!0}}const l=[];s instanceof Map?s.forEach(($,S)=>{l.push(new o(S,$))}):Object.keys(s).forEach($=>{l.push(new o($,s[$]))});let a=null,f=null,d={};const _=Dl();async function m($,S){await Ln(),_($,S)}let g=null,p=null;i&&(p=$=>{$.state&&($.state.__svelte_spa_router_scrollY||$.state.__svelte_spa_router_scrollX)?g=$.state:g=null},window.addEventListener("popstate",p),xa(()=>{uu(g)}));let b=null,y=null;const w=Nn.subscribe(async $=>{b=$;let S=0;for(;S<l.length;){const k=l[S].match($.location);if(!k){S++;continue}const C={route:l[S].path,location:$.location,querystring:$.querystring,userData:l[S].userData,params:k&&typeof k=="object"&&Object.keys(k).length?k:null};if(!await l[S].checkConditions(C)){t(0,a=null),y=null,m("conditionsFailed",C);return}m("routeLoading",Object.assign({},C));const T=l[S].component;if(y!=T){T.loading?(t(0,a=T.loading),y=T,t(1,f=T.loadingParams),t(2,d={}),m("routeLoaded",Object.assign({},C,{component:a,name:a.name,params:f}))):(t(0,a=null),y=null);const L=await T();if($!=b)return;t(0,a=L&&L.default||L),y=T}k&&typeof k=="object"&&Object.keys(k).length?t(1,f=k):t(1,f=null),t(2,d=l[S].props),m("routeLoaded",Object.assign({},C,{component:a,name:a.name,params:f})).then(()=>{Di.set(f)});return}t(0,a=null),y=null,Di.set(void 0)});Xa(()=>{w(),p&&window.removeEventListener("popstate",p)});function O($){Ts.call(this,r,$)}function D($){Ts.call(this,r,$)}return r.$$set=$=>{"routes"in $&&t(3,s=$.routes),"prefix"in $&&t(4,n=$.prefix),"restoreScrollState"in $&&t(5,i=$.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,f,d,s,n,i,O,D]}class Un extends Te{constructor(e){super(),De(this,e,cu,lu,$e,{routes:3,prefix:4,restoreScrollState:5})}}const fu="modulepreload",du=function(r){return"/library/"+r},Ti={},Pr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(t.map(l=>{if(l=du(l),l in Ti)return;Ti[l]=!0;const a=l.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":fu,a||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((_,m)=>{d.addEventListener("load",_),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},hu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Pr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Hn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class _u extends Hn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mu extends Hn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pu extends Hn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(wn||(wn={}));var bu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class gu{constructor(e,{headers:t={},customFetch:s,region:n=wn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=hu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return bu(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let f;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(p=>{throw new _u(p)}),_=d.headers.get("x-relay-error");if(_&&_==="true")throw new mu(d);if(!d.ok)throw new pu(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var vu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Er=vu();const wu=Er.fetch,Fn=Er.fetch.bind(Er),Rl=Er.Headers,yu=Er.Request,ku=Er.Response,is=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rl,Request:yu,Response:ku,default:Fn,fetch:wu},Symbol.toStringTag,{value:"Module"}));class $u extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Su{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let f=null,d=null,_=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&y&&y.length>1&&(_=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(f={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,_=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{f=JSON.parse(b),Array.isArray(f)&&i.status===404&&(d=[],f=null,m=200,g="OK")}catch{i.status===404&&b===""?(m=204,g="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((a=f==null?void 0:f.details)===null||a===void 0)&&a.includes("0 rows"))&&(f=null,m=200,g="OK"),f&&this.shouldThrowOnError)throw new $u(f)}return{error:f,data:d,count:_,status:m,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class Du extends Su{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${f}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class wr extends Du{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Tu{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new wr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new wr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(a.length>0){const f=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new wr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new wr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new wr({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ou="1.15.2",Cu={"X-Client-Info":`postgrest-js/${Ou}`};class qn{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Cu),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Tu(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([d,_])=>_!==void 0).map(([d,_])=>[d,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([d,_])=>{l.searchParams.append(d,_)})):(o="POST",a=t);const f=Object.assign({},this.headers);return i&&(f.Prefer=`count=${i}`),new wr({method:o,url:l,headers:f,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Mu="2.9.5",Pu={"X-Client-Info":`realtime-js/${Mu}`},Eu="1.0.0",jl=1e4,Ru=1e3;var Dr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Dr||(Dr={}));var lt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(lt||(lt={}));var bt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(bt||(bt={}));var yn;(function(r){r.websocket="websocket"})(yn||(yn={}));var lr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(lr||(lr={}));class Al{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ju{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:f}}}class on{constructor(e,t,s={},n=jl){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Oi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Oi||(Oi={}));class Vr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=Vr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Vr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(f,d)=>{o[f]||(a[f]=d)}),this.map(o,(f,d)=>{const _=i[f];if(_){const m=d.map(y=>y.presence_ref),g=_.map(y=>y.presence_ref),p=d.filter(y=>g.indexOf(y.presence_ref)<0),b=_.filter(y=>m.indexOf(y.presence_ref)<0);p.length>0&&(l[f]=p),b.length>0&&(a[f]=b)}else l[f]=d}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var f;const d=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(a),d.length>0){const _=e[l].map(g=>g.presence_ref),m=d.filter(g=>_.indexOf(g.presence_ref)<0);e[l].unshift(...m)}s(l,d,a)}),this.map(o,(l,a)=>{let f=e[l];if(!f)return;const d=a.map(_=>_.presence_ref);f=f.filter(_=>d.indexOf(_.presence_ref)<0),e[l]=f,n(l,f,a),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Fe||(Fe={}));const Ci=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Au(o,r,e,n),i),{})},Au=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?Il(i,o):kn(o)},Il=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Nu(e,t)}switch(r){case Fe.bool:return Iu(e);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return Lu(e);case Fe.json:case Fe.jsonb:return Yu(e);case Fe.timestamp:return Uu(e);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return kn(e);default:return kn(e)}},kn=r=>r,Iu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Lu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Yu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Nu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Il(e,l))}return r},Uu=r=>typeof r=="string"?r.replace(" ","T"):r;var Mi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Mi||(Mi={}));var Pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(Pi||(Pi={}));var Ei;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ei||(Ei={}));class Bn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new on(this,bt.join,this.params,this.timeout),this.rejoinTimer=new Al(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Vr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(f=>e&&e("CHANNEL_ERROR",f)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:f})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),f===void 0){e&&e("SUBSCRIBED");return}else{const _=this.bindings.postgres_changes,m=(d=_==null?void 0:_.length)!==null&&d!==void 0?d:0,g=[];for(let p=0;p<m;p++){const b=_[p],{filter:{event:y,schema:w,table:O,filter:D}}=b,$=f&&f[p];if($&&$.event===y&&$.schema===w&&$.table===O&&$.filter===D)g.push(Object.assign(Object.assign({},b),{id:$.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",f=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new on(this,bt.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new on(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:f,join:d}=bt;if(s&&[l,a,f,d].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(b=g.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,y,w,O,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const $=g.id,S=(p=g.filter)===null||p===void 0?void 0:p.event;return $&&((b=t.ids)===null||b===void 0?void 0:b.includes($))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const $=(O=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return $==="*"||$===((D=t==null?void 0:t.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:y,commit_timestamp:w,type:O,errors:D}=p;m=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:w,eventType:O,new:{},old:{},errors:D}),this._getPayloadRecords(p))}g.callback(m,s)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Bn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bt.close,{},e)}_onError(e){this._on(bt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ci(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ci(e.columns,e.old_record)),t}}const Hu=()=>{},Fu=typeof WebSocket<"u";class qu{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Pu,this.params={},this.timeout=jl,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Hu,this.conn=null,this.sendBuffer=[],this.serializer=new ju,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Pr(()=>Promise.resolve().then(()=>is),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${yn.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Al(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Fu){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Bu(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Pr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Dr.connecting:return lr.Connecting;case Dr.open:return lr.Open;case Dr.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}channel(e,t={config:{}}){const s=new Bn(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(bt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eu}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(bt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ru,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Bu{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Dr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Wn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Wu extends Wn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ri extends Wn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Vu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const Ll=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Pr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},zu=()=>Vu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pr(()=>Promise.resolve().then(()=>is),void 0)).Response:Response});var jr=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const ln=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Gu=(r,e)=>jr(void 0,void 0,void 0,function*(){const t=yield zu();r instanceof t?r.json().then(s=>{e(new Wu(ln(s),r.status||500))}).catch(s=>{e(new Ri(ln(s),s))}):e(new Ri(ln(r),r))}),Ju=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function Us(r,e,t,s,n,i){return jr(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Ju(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Gu(a,l))})})}function $n(r,e,t,s){return jr(this,void 0,void 0,function*(){return Us(r,"GET",e,t,s)})}function Gt(r,e,t,s,n){return jr(this,void 0,void 0,function*(){return Us(r,"POST",e,s,n,t)})}function Ku(r,e,t,s,n){return jr(this,void 0,void 0,function*(){return Us(r,"PUT",e,s,n,t)})}function Yl(r,e,t,s,n){return jr(this,void 0,void 0,function*(){return Us(r,"DELETE",e,s,n,t)})}var ct=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const Zu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ji={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qu{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ll(n)}uploadOrUpdate(e,t,s,n){return ct(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ji),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),f=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),_=yield d.json();return d.ok?{data:{path:a,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}upload(e,t,s){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return ct(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const f=Object.assign({upsert:ji.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",f.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",f.cacheControl)):(a=s,d["cache-control"]=`max-age=${f.cacheControl}`,d["content-type"]=f.contentType);const _=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),m=yield _.json();return _.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return ct(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Gt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new Wn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}update(e,t,s){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return ct(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}copy(e,t){return ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return ct(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Gt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return ct(this,void 0,void 0,function*(){try{const n=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}download(e,t){return ct(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield $n(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let f=n.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${f}`)}}}remove(e){return ct(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}list(e,t,s){return ct(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Zu),t),{prefix:e||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xu="2.5.5",Xu={"X-Client-Info":`storage-js/${xu}`};var mr=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class ec{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Xu),t),this.fetch=Ll(s)}listBuckets(){return mr(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}getBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return mr(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return mr(this,void 0,void 0,function*(){try{return{data:yield Ku(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}}class tc extends ec{constructor(e,t={},s){super(e,t,s)}from(e){return new Qu(this.url,this.headers,e,this.fetch)}}const rc="2.43.2";let Br="";typeof Deno<"u"?Br="deno":typeof document<"u"?Br="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Br="react-native":Br="node";const sc={"X-Client-Info":`supabase-js-${Br}/${rc}`},nc={headers:sc},ic={schema:"public"},oc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lc={};var ac=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};const uc=r=>{let e;return r?e=r:typeof fetch>"u"?e=Fn:e=fetch,(...t)=>e(...t)},cc=()=>typeof Headers>"u"?Rl:Headers,fc=(r,e,t)=>{const s=uc(t),n=cc();return(i,o)=>ac(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:r;let f=new n(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",r),f.has("Authorization")||f.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:f}))})};function dc(r){return r.replace(/\/$/,"")}function hc(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:o,auth:l,realtime:a,global:f}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},f),i)}}const Nl="2.64.2",_c="http://localhost:9999",mc="supabase.auth.token",pc={"X-Client-Info":`gotrue-js/${Nl}`},Ai=10,Sn="X-Supabase-Api-Version",Ul={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bc(r){return Math.round(Date.now()/1e3)+r}function gc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const pt=()=>typeof document<"u",sr={tested:!1,writable:!1},zr=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function an(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Hl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Pr(()=>Promise.resolve().then(()=>is),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},vc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Fl=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},fs=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},un=async(r,e)=>{await r.removeItem(e)};function wc(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,o,l,a,f,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)o=e.indexOf(r.charAt(d++)),l=e.indexOf(r.charAt(d++)),a=e.indexOf(r.charAt(d++)),f=e.indexOf(r.charAt(d++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|f,t=t+String.fromCharCode(s),a!=64&&n!=0&&(t=t+String.fromCharCode(n)),f!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Hs{constructor(){this.promise=new Hs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Hs.promiseConstructor=Promise;function Ii(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(wc(s))}async function yc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function kc(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function $c(r){return("0"+r.toString(16)).substr(-2)}function Sc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,$c).join("")}async function Dc(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Tc(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Dc(r);return Tc(t)}async function pr(r,e,t=!1){const s=Sc();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Fl(r,`${e}-code-verifier`,n);const i=await Oc(s);return[i,s===i?"plain":"s256"]}const Cc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mc(r){const e=r.headers.get(Sn);if(!e||!e.match(Cc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Vn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Oe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Pc extends Vn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Ec(r){return Oe(r)&&r.name==="AuthApiError"}class ql extends Vn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cr extends Vn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class nr extends cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cn extends cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ds extends cr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hs extends cr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Li extends cr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dn extends cr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function fn(r){return Oe(r)&&r.name==="AuthRetryableFetchError"}class Yi extends cr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var Rc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const or=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),jc=[502,503,504];async function Ni(r){var e;if(!vc(r))throw new Dn(or(r),0);if(jc.includes(r.status))throw new Dn(or(r),r.status);let t;try{t=await r.json()}catch(i){throw new ql(or(i),i)}let s;const n=Mc(r);if(n&&n.getTime()>=Ul["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Yi(or(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yi(or(t),r.status,t.weak_password.reasons);throw new Pc(or(t),r.status||500,s)}const Ac=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function Me(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Sn]||(i[Sn]=Ul["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Ic(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Ic(r,e,t,s,n,i){const o=Ac(e,s,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(a){throw console.error(a),new Dn(or(a),0)}if(l.ok||await Ni(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await Ni(a)}}function zt(r){var e;let t=null;Uc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=bc(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Ui(r){const e=zt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Jt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Lc(r){return{data:r,error:null}}function Yc(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=Rc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Nc(r){return r}function Uc(r){return r.access_token&&r.refresh_token&&r.expires_in}var Hc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Fc{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Hl(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Hc(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Yc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,l,a;try{const f={nextPage:null,lastPage:0,total:0},d=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Nc});if(d.error)throw d.error;const _=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);f[`${y}Page`]=b}),f.total=parseInt(m)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Oe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jt})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}const qc={getItem:r=>zr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{zr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{zr()&&globalThis.localStorage.removeItem(r)}};function Hi(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Bc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const br={debug:!!(globalThis&&zr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wc extends Bl{}async function Vc(r,e,t){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Wc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(br.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Bc();const zc={url:_c,storageKey:mc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Hr=30*1e3,Fi=3;async function qi(r,e,t){return await t()}class Qr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qr.nextInstanceID,Qr.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},zc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Fc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Hl(n.fetch),this.lock=n.lock||qi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:pt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Vc:this.lock=qi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:zr()?this.storage=qc:(this.memoryStorage={},this.storage=Hi(this.memoryStorage)):(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Nl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=pt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Oe(e)?{error:e}:{error:new ql("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{await this._removeSession();const i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:zt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:d,password:_,options:m}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await pr(this.storage,this.storageKey)),i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:_,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},xform:zt})}else if("phone"in e){const{phone:d,password:_,options:m}=e;i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:_,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:zt})}else throw new ds("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else throw new ds("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new cn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await fs(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/"),{data:i,error:o}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:zt});return await un(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new cn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,l=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:zt}),{data:a,error:f}=l;return f?{data:{user:null,session:null},error:f}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new cn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:f})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let f=null,d=null;this.flowType==="pkce"&&([f,d]=await pr(this.storage,this.storageKey));const{error:_}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:f,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:l,options:a}=e,{data:f,error:d}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:d}}throw new ds("You must provide either an email or phone number.")}catch(l){if(Oe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:zt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,f=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(n){if(Oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await pr(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Lc})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new nr;const{error:n}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ds("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,f,d){return!o&&f==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,f,d)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt}):await this._useSession(async t=>{var s,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Jt})})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new nr;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await pr(this.storage,this.storageKey));const{data:f,error:d}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Jt});if(d)throw d;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Oe(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Ii(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nr;const t=Date.now()/1e3;let s=t,n=!0,i=null;const o=Ii(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new nr;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!pt())throw new hs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Li("Not a valid PKCE flow url.");const t=an(window.location.href);if(e){if(!t.code)throw new Li("No code detected.");const{data:O,error:D}=await this._exchangeCodeForSession(t.code);if(D)throw D;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:O.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new hs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:f}=t;if(!i||!l||!o||!f)throw new hs("No session defined in URL");const d=Math.round(Date.now()/1e3),_=parseInt(l);let m=d+_;a&&(m=parseInt(a));const g=m-d;g*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${_}s`);const p=m-_;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,m,d);const{data:b,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:_,expires_at:m,refresh_token:o,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(t){if(Oe(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=an(window.location.href);return!!(pt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=an(window.location.href),t=await fs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Ec(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await un(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=gc(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await pr(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,f,d;const{data:_,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(f=_.session)===null||f===void 0?void 0:f.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return pt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Oe(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await kc(async n=>(n>0&&await yc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&fn(i)&&Date.now()+o-s<Hr})}catch(s){if(this._debug(t,"error",s),Oe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),pt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await fs(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+Ai;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ai}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),fn(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Hs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),Oe(i)){const o={session:null,error:i};return fn(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Fl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await un(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Hr}ms, refresh threshold is ${Fi} ticks`),n<=Fi&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bl)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}Qr.nextInstanceID=0;const Gc=Qr;class Jc extends Gc{constructor(e){super(e)}}var Kc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(s.next(d))}catch(_){o(_)}}function a(d){try{f(s.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):n(d.value).then(l,a)}f((s=s.apply(r,e||[])).next())})};class Zc{constructor(e,t,s){var n,i,o,l,a,f,d,_;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const m=dc(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:ic,realtime:lc,auth:Object.assign(Object.assign({},oc),{storageKey:g}),global:nc},b=hc(s??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(f=b.global)===null||f===void 0?void 0:f.fetch),this.fetch=fc(t,this._getAccessToken.bind(this),(d=b.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new qn(`${m}/rest/v1`,{headers:this.headers,schema:(_=b.db)===null||_===void 0?void 0:_.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new gu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Kc(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,f){var d;const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jc({url:this.authUrl,headers:Object.assign(Object.assign({},_),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:f,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new qu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qc=(r,e,t)=>new Zc(r,e,t),re=Qc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function Bi(r){let e,t,s,n;return{c(){e=x(`|\r
          `),t=h("a"),t.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',s=v(),n=h("a"),n.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',u(t,"class","nav-link svelte-w9uiv3"),u(t,"href","./#/borrow"),u(n,"class","nav-link svelte-w9uiv3"),u(n,"href","./#/return")},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),P(i,n,o)},d(i){i&&(M(e),M(t),M(s),M(n))}}}function xc(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te=r[0]=="staff"&&Bi();return{c(){e=h("nav"),t=h("div"),s=h("a"),s.innerHTML=`<i class="bi bi-book"></i>
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-xl-inline d-none">CTADVDBL Project</small>`,n=v(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=v(),l=h("div"),a=h("div"),f=h("a"),f.innerHTML='<i class="bi bi-house-door"></i> Home',d=v(),_=h("a"),_.innerHTML='<i class="bi bi-journal"></i> Books',m=v(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=v(),b=h("a"),b.innerHTML='<i class="bi bi-building"></i> Publishers',y=v(),te&&te.c(),w=x(`\r
        | \r
        `),O=h("li"),D=h("a"),$=h("i"),S=v(),k=x(r[1]),C=v(),T=h("ul"),L=h("li"),L.innerHTML='<a class="dropdown-item svelte-w9uiv3" href="./#/profile"><i class="bi bi-person-fill"></i> Profile</a>',N=v(),Y=h("li"),I=h("a"),V=h("span"),G=x(" "),q=x(r[2]),U=v(),F=h("li"),F.innerHTML='<hr class="dropdown-divider"/>',J=v(),ne=h("li"),R=h("a"),R.innerHTML='<i class="bi bi-door-open-fill"></i> Log Out',u(s,"class","navbar-brand m-0 px-2 svelte-w9uiv3"),u(s,"href","./#/"),u(i,"class","navbar-toggler"),u(i,"type","button"),u(i,"data-bs-toggle","collapse"),u(i,"data-bs-target","#navbarContent"),u(f,"class","nav-link svelte-w9uiv3"),u(f,"href","./#/"),u(_,"class","nav-link svelte-w9uiv3"),u(_,"href","./#/search"),u(g,"class","nav-link svelte-w9uiv3"),u(g,"href","./#/search/author"),u(b,"class","nav-link svelte-w9uiv3"),u(b,"href","./#/search/publisher"),u($,"class","bi bi-person-fill"),u(D,"class","nav-link dropdown-toggle svelte-w9uiv3"),u(D,"href","#"),u(D,"role","button"),u(D,"data-bs-toggle","dropdown"),u(D,"aria-expanded","false"),u(V,"class",A="bi bi-"+r[3]+" svelte-w9uiv3"),u(I,"class","dropdown-item svelte-w9uiv3"),u(I,"href","./#/"),u(R,"class","dropdown-item text-danger svelte-w9uiv3"),u(R,"href","./#/"),u(T,"class","dropdown-menu"),u(O,"class","nav-item dropdown"),u(a,"class","navbar-nav ms-auto text-center align-items-center svelte-w9uiv3"),u(l,"class","collapse navbar-collapse"),u(l,"id","navbarContent"),u(t,"class","container px-4 fw-semibold"),u(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow d-print-none")},m(X,ce){P(X,e,ce),c(e,t),c(t,s),c(t,n),c(t,i),c(t,o),c(t,l),c(l,a),c(a,f),c(a,d),c(a,_),c(a,m),c(a,g),c(a,p),c(a,b),c(a,y),te&&te.m(a,null),c(a,w),c(a,O),c(O,D),c(D,$),c(D,S),c(D,k),c(O,C),c(O,T),c(T,L),c(T,N),c(T,Y),c(Y,I),c(I,V),c(I,G),c(I,q),c(T,U),c(T,F),c(T,J),c(T,ne),c(ne,R),W||(z=[H(I,"click",dt(r[4])),H(R,"click",r[5])],W=!0)},p(X,[ce]){X[0]=="staff"?te||(te=Bi(),te.c(),te.m(a,w)):te&&(te.d(1),te=null),ce&2&&ae(k,X[1]),ce&8&&A!==(A="bi bi-"+X[3]+" svelte-w9uiv3")&&u(V,"class",A),ce&4&&ae(q,X[2])},i:ee,o:ee,d(X){X&&M(e),te&&te.d(),W=!1,ge(z)}}}function Xc(r,e,t){let s,n,i,o=localStorage.getItem("user_id");xt.subscribe(m=>t(0,i=m)),a();let l="";async function a(){const{data:m,error:g}=await re.from("account_details").select("lname").eq("user_id",o).single();g&&console.error(g),console.log(o,m),t(1,l=m.lname)}let f=localStorage.getItem("theme")||"light";function d(){t(6,f=f=="light"?"dark":"light"),localStorage.setItem("theme",f)}async function _(){if(i=="client"){const{error:m}=await re.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,stud_id:o});m&&console.error(m)}else{const{error:m}=await re.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,staff_id:o});m&&console.error(m)}xt.set(""),bs.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return r.$$.update=()=>{r.$$.dirty&64&&document.querySelector("body").setAttribute("data-bs-theme",f),r.$$.dirty&64&&t(3,s=f=="dark"?"brightness-high-fill":"moon-stars-fill"),r.$$.dirty&64&&t(2,n=f=="dark"?"Light Theme":"Dark Theme")},[i,l,n,s,d,_,f]}class Wl extends Te{constructor(e){super(),De(this,e,Xc,xc,$e,{})}}function ef(r){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,s){P(t,e,s)},p:ee,i:ee,o:ee,d(t){t&&M(e)}}}class tf extends Te{constructor(e){super(),De(this,e,null,ef,$e,{})}}function rf(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[0]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[4]),s=!0)},p(i,o){o&1&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[0]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function sf(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"class","svelte-1a99e4f")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function nf(r){let e,t,s,n,i,o,l,a,f,d,_,m;function g(y,w){return y[3]?sf:rf}let p=g(r),b=p(r);return{c(){e=h("div"),b.c(),t=v(),s=h("div"),n=h("h5"),i=h("a"),o=x(r[1]),a=v(),f=h("small"),d=h("i"),_=v(),m=x(r[2]),u(i,"class","stretched-link svelte-1a99e4f"),u(i,"href",l="./#/book/"+r[0]),u(n,"class","card-title"),u(d,"class","bi bi-person"),u(f,"class","card-text"),u(s,"class","card-body"),u(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(y,w){P(y,e,w),b.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o),c(s,a),c(s,f),c(f,d),c(f,_),c(f,m)},p(y,[w]){p===(p=g(y))&&b?b.p(y,w):(b.d(1),b=p(y),b&&(b.c(),b.m(e,t))),w&2&&ae(o,y[1]),w&1&&l!==(l="./#/book/"+y[0])&&u(i,"href",l),w&4&&ae(m,y[2])},i:ee,o:ee,d(y){y&&M(e),b.d()}}}function of(r,e,t){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=!1;const l=()=>t(3,o=!0);return r.$$set=a=>{"id"in a&&t(0,s=a.id),"title"in a&&t(1,n=a.title),"author"in a&&t(2,i=a.author)},[s,n,i,o,l]}class Fs extends Te{constructor(e){super(),De(this,e,of,nf,$e,{id:0,title:1,author:2})}}function Wi(r){let e,t,s,n,i,o,l;return{c(){e=h("div"),t=h("a"),s=h("button"),n=x(r[3]),i=v(),o=h("i"),u(o,"class","bi bi-arrow-right"),u(s,"class","btn btn-outline-primary btn-sm"),u(t,"href",l="./#/"+r[2]),u(e,"class","align-middle align-self-center")},m(a,f){P(a,e,f),c(e,t),c(t,s),c(s,n),c(s,i),c(s,o)},p(a,f){f&8&&ae(n,a[3]),f&4&&l!==(l="./#/"+a[2])&&u(t,"href",l)},d(a){a&&M(e)}}}function lf(r){let e,t,s,n,i,o,l,a,f,d,_=r[2]!==""&&Wi(r);const m=r[5].default,g=As(m,r,r[4],null);return{c(){e=h("section"),t=h("div"),s=h("h4"),n=h("i"),o=v(),l=x(r[0]),a=v(),_&&_.c(),f=v(),g&&g.c(),u(n,"class",i="bi bi-"+r[1]),u(s,"class","my-3"),u(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){P(p,e,b),c(e,t),c(t,s),c(s,n),c(s,o),c(s,l),c(t,a),_&&_.m(t,null),c(e,f),g&&g.m(e,null),d=!0},p(p,[b]){(!d||b&2&&i!==(i="bi bi-"+p[1]))&&u(n,"class",i),(!d||b&1)&&ae(l,p[0]),p[2]!==""?_?_.p(p,b):(_=Wi(p),_.c(),_.m(t,null)):_&&(_.d(1),_=null),g&&g.p&&(!d||b&16)&&Ls(g,m,p,p[4],d?Is(m,p[4],b,null):Ys(p[4]),null)},i(p){d||(E(g,p),d=!0)},o(p){j(g,p),d=!1},d(p){p&&M(e),_&&_.d(),g&&g.d(p)}}}function af(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return r.$$set=f=>{"title"in f&&t(0,i=f.title),"icon"in f&&t(1,o=f.icon),"link"in f&&t(2,l=f.link),"linkText"in f&&t(3,a=f.linkText),"$$scope"in f&&t(4,n=f.$$scope)},[i,o,l,a,n,s]}class St extends Te{constructor(e){super(),De(this,e,af,lf,$e,{title:0,icon:1,link:2,linkText:3})}}function uf(r){const e=r-1;return e*e*e+1}function Ze(r,{delay:e=0,duration:t=400,easing:s=An}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:i=>`opacity: ${i*n}`}}function Ot(r,{delay:e=0,duration:t=400,easing:s=uf,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(r),a=+l.opacity,f=l.transform==="none"?"":l.transform,d=a*(1-o),[_,m]=yi(n),[g,p]=yi(i);return{delay:e,duration:t,easing:s,css:(b,y)=>`
			transform: ${f} translate(${(1-b)*_}${m}, ${(1-b)*g}${p});
			opacity: ${a-d*y}`}}function cf(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',u(e,"class","d-flex justify-content-center")},m(t,s){P(t,e,s)},p:ee,i:ee,o:ee,d(t){t&&M(e)}}}class tr extends Te{constructor(e){super(),De(this,e,null,cf,$e,{})}}function ff(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+r[1]+".jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[3]),s=!0)},p(i,o){o&2&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+i[1]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function df(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function hf(r){let e,t,s,n,i,o,l;function a(_,m){return _[2]?df:ff}let f=a(r),d=f(r);return{c(){e=h("div"),d.c(),t=v(),s=h("div"),n=h("h6"),i=h("a"),o=x(r[0]),u(i,"class","stretched-link svelte-1rzxrzv"),u(i,"href",l="./#/author/"+r[1]),u(n,"class","card-title text-center"),u(s,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(_,m){P(_,e,m),d.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o)},p(_,[m]){f===(f=a(_))&&d?d.p(_,m):(d.d(1),d=f(_),d&&(d.c(),d.m(e,t))),m&1&&ae(o,_[0]),m&2&&l!==(l="./#/author/"+_[1])&&u(i,"href",l)},i:ee,o:ee,d(_){_&&M(e),d.d()}}}function _f(r,e,t){let{name:s}=e,{id:n}=e,i=!1;const o=()=>t(2,i=!0);return r.$$set=l=>{"name"in l&&t(0,s=l.name),"id"in l&&t(1,n=l.id)},[s,n,i,o]}class Vl extends Te{constructor(e){super(),De(this,e,_f,hf,$e,{name:0,id:1})}}function mf(r){let e,t,s,n;return{c(){e=h("img"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+r[1]+".jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[3]),s=!0)},p(i,o){o&2&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+i[1]+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function pf(r){let e,t;return{c(){e=h("img"),Ne(e.src,t="./default-profile.jpg")||u(e,"src",t),u(e,"alt","author cover"),u(e,"height","150"),u(e,"class","object-fit-contain rounded my-2")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function bf(r){let e,t,s,n,i,o,l;function a(_,m){return _[2]?pf:mf}let f=a(r),d=f(r);return{c(){e=h("div"),d.c(),t=v(),s=h("div"),n=h("h6"),i=h("a"),o=x(r[0]),u(i,"class","stretched-link svelte-1rzxrzv"),u(i,"href",l="./#/publisher/"+r[1]),u(n,"class","card-title text-center"),u(s,"class","card-body p-1"),u(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(_,m){P(_,e,m),d.m(e,null),c(e,t),c(e,s),c(s,n),c(n,i),c(i,o)},p(_,[m]){f===(f=a(_))&&d?d.p(_,m):(d.d(1),d=f(_),d&&(d.c(),d.m(e,t))),m&1&&ae(o,_[0]),m&2&&l!==(l="./#/publisher/"+_[1])&&u(i,"href",l)},i:ee,o:ee,d(_){_&&M(e),d.d()}}}function gf(r,e,t){let{name:s}=e,{id:n}=e,i=!1;const o=()=>t(2,i=!0);return r.$$set=l=>{"name"in l&&t(0,s=l.name),"id"in l&&t(1,n=l.id)},[s,n,i,o]}class zl extends Te{constructor(e){super(),De(this,e,gf,bf,$e,{name:0,id:1})}}function vf(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),s=h("h2"),s.textContent="Error",n=v(),i=h("p"),o=x(r[0]),l=x(": "),a=x(r[1]),f=v(),d=h("a"),d.textContent="Reload",u(d,"href","./#/"),u(d,"class","fw-bold"),u(t,"class","text-center"),u(e,"class","d-flex align-items-center justify-content-center my-3")},m(_,m){P(_,e,m),c(e,t),c(t,s),c(t,n),c(t,i),c(i,o),c(i,l),c(i,a),c(t,f),c(t,d)},p(_,[m]){m&1&&ae(o,_[0]),m&2&&ae(a,_[1])},i:ee,o:ee,d(_){_&&M(e)}}}function wf(r,e,t){let{code:s="err"}=e,{message:n}=e;return r.$$set=i=>{"code"in i&&t(0,s=i.code),"message"in i&&t(1,n=i.message)},[s,n]}let qs=class extends Te{constructor(e){super(),De(this,e,wf,vf,$e,{code:0,message:1})}};function yf(r){let e,t,s,n,i,o,l,a,f,d,_;return{c(){e=h("div"),t=h("div"),s=h("h5"),n=h("a"),i=x(r[1]),l=v(),a=h("div"),f=h("span"),d=x(r[2]),u(n,"class","stretched-link svelte-9p7s9b"),u(n,"href",o="./#/book/"+r[0]),u(s,"class","card-title"),u(f,"class",_="badge rounded-pill text-bg-"+r[3]+" svelte-9p7s9b"),u(t,"class","card-body"),u(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(m,g){P(m,e,g),c(e,t),c(t,s),c(s,n),c(n,i),c(t,l),c(t,a),c(a,f),c(f,d)},p(m,[g]){g&2&&ae(i,m[1]),g&1&&o!==(o="./#/book/"+m[0])&&u(n,"href",o),g&4&&ae(d,m[2]),g&8&&_!==(_="badge rounded-pill text-bg-"+m[3]+" svelte-9p7s9b")&&u(f,"class",_)},i:ee,o:ee,d(m){m&&M(e)}}}function kf(r,e,t){let{id:s=0}=e,{title:n}=e,{label:i}=e,{color:o}=e;return r.$$set=l=>{"id"in l&&t(0,s=l.id),"title"in l&&t(1,n=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[s,n,i,o]}class $f extends Te{constructor(e){super(),De(this,e,kf,yf,$e,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Gl;function se(){return Gl.apply(null,arguments)}function Sf(r){Gl=r}function vt(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function ur(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function Re(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function zn(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(Re(r,e))return!1;return!0}function nt(r){return r===void 0}function Ft(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function os(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function Jl(r,e){var t=[],s,n=r.length;for(s=0;s<n;++s)t.push(e(r[s],s));return t}function Kt(r,e){for(var t in e)Re(e,t)&&(r[t]=e[t]);return Re(e,"toString")&&(r.toString=e.toString),Re(e,"valueOf")&&(r.valueOf=e.valueOf),r}function Mt(r,e,t,s){return ba(r,e,t,s,!0).utc()}function Df(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function we(r){return r._pf==null&&(r._pf=Df()),r._pf}var Tn;Array.prototype.some?Tn=Array.prototype.some:Tn=function(r){var e=Object(this),t=e.length>>>0,s;for(s=0;s<t;s++)if(s in e&&r.call(this,e[s],s,e))return!0;return!1};function Gn(r){var e=null,t=!1,s=r._d&&!isNaN(r._d.getTime());if(s&&(e=we(r),t=Tn.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=s;else return s;return r._isValid}function Bs(r){var e=Mt(NaN);return r!=null?Kt(we(e),r):we(e).userInvalidated=!0,e}var Vi=se.momentProperties=[],dn=!1;function Jn(r,e){var t,s,n,i=Vi.length;if(nt(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),nt(e._i)||(r._i=e._i),nt(e._f)||(r._f=e._f),nt(e._l)||(r._l=e._l),nt(e._strict)||(r._strict=e._strict),nt(e._tzm)||(r._tzm=e._tzm),nt(e._isUTC)||(r._isUTC=e._isUTC),nt(e._offset)||(r._offset=e._offset),nt(e._pf)||(r._pf=we(e)),nt(e._locale)||(r._locale=e._locale),i>0)for(t=0;t<i;t++)s=Vi[t],n=e[s],nt(n)||(r[s]=n);return r}function ls(r){Jn(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),dn===!1&&(dn=!0,se.updateOffset(this),dn=!1)}function wt(r){return r instanceof ls||r!=null&&r._isAMomentObject!=null}function Kl(r){se.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function ht(r,e){var t=!0;return Kt(function(){if(se.deprecationHandler!=null&&se.deprecationHandler(null,r),t){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])Re(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}Kl(r+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var zi={};function Zl(r,e){se.deprecationHandler!=null&&se.deprecationHandler(r,e),zi[r]||(Kl(e),zi[r]=!0)}se.suppressDeprecationWarnings=!1;se.deprecationHandler=null;function Pt(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function Tf(r){var e,t;for(t in r)Re(r,t)&&(e=r[t],Pt(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function On(r,e){var t=Kt({},r),s;for(s in e)Re(e,s)&&(ur(r[s])&&ur(e[s])?(t[s]={},Kt(t[s],r[s]),Kt(t[s],e[s])):e[s]!=null?t[s]=e[s]:delete t[s]);for(s in r)Re(r,s)&&!Re(e,s)&&ur(r[s])&&(t[s]=Kt({},t[s]));return t}function Kn(r){r!=null&&this.set(r)}var Cn;Object.keys?Cn=Object.keys:Cn=function(r){var e,t=[];for(e in r)Re(r,e)&&t.push(e);return t};var Of={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Cf(r,e,t){var s=this._calendar[r]||this._calendar.sameElse;return Pt(s)?s.call(e,t):s}function Ct(r,e,t){var s=""+Math.abs(r),n=e-s.length,i=r>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var Zn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_s=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hn={},Tr={};function be(r,e,t,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),r&&(Tr[r]=n),e&&(Tr[e[0]]=function(){return Ct(n.apply(this,arguments),e[1],e[2])}),t&&(Tr[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),r)})}function Mf(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Pf(r){var e=r.match(Zn),t,s;for(t=0,s=e.length;t<s;t++)Tr[e[t]]?e[t]=Tr[e[t]]:e[t]=Mf(e[t]);return function(n){var i="",o;for(o=0;o<s;o++)i+=Pt(e[o])?e[o].call(n,r):e[o];return i}}function gs(r,e){return r.isValid()?(e=Ql(e,r.localeData()),hn[e]=hn[e]||Pf(e),hn[e](r)):r.localeData().invalidDate()}function Ql(r,e){var t=5;function s(n){return e.longDateFormat(n)||n}for(_s.lastIndex=0;t>=0&&_s.test(r);)r=r.replace(_s,s),_s.lastIndex=0,t-=1;return r}var Ef={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Rf(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(Zn).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[r])}var jf="Invalid date";function Af(){return this._invalidDate}var If="%d",Lf=/\d{1,2}/;function Yf(r){return this._ordinal.replace("%d",r)}var Nf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Uf(r,e,t,s){var n=this._relativeTime[t];return Pt(n)?n(r,e,t,s):n.replace(/%d/i,r)}function Hf(r,e){var t=this._relativeTime[r>0?"future":"past"];return Pt(t)?t(e):t.replace(/%s/i,e)}var Gi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function _t(r){return typeof r=="string"?Gi[r]||Gi[r.toLowerCase()]:void 0}function Qn(r){var e={},t,s;for(s in r)Re(r,s)&&(t=_t(s),t&&(e[t]=r[s]));return e}var Ff={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function qf(r){var e=[],t;for(t in r)Re(r,t)&&e.push({unit:t,priority:Ff[t]});return e.sort(function(s,n){return s.priority-n.priority}),e}var xl=/\d/,at=/\d\d/,Xl=/\d{3}/,xn=/\d{4}/,Ws=/[+-]?\d{6}/,Be=/\d\d?/,ea=/\d\d\d\d?/,ta=/\d\d\d\d\d\d?/,Vs=/\d{1,3}/,Xn=/\d{1,4}/,zs=/[+-]?\d{1,6}/,Ar=/\d+/,Gs=/[+-]?\d+/,Bf=/Z|[+-]\d\d:?\d\d/gi,Js=/Z|[+-]\d\d(?::?\d\d)?/gi,Wf=/[+-]?\d+(\.\d{1,3})?/,as=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ir=/^[1-9]\d?/,ei=/^([1-9]\d|\d)/,Ms;Ms={};function he(r,e,t){Ms[r]=Pt(e)?e:function(s,n){return s&&t?t:e}}function Vf(r,e){return Re(Ms,r)?Ms[r](e._strict,e._locale):new RegExp(zf(r))}function zf(r){return Ut(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,n,i){return t||s||n||i}))}function Ut(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ft(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function Ce(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=ft(e)),t}var Mn={};function Ue(r,e){var t,s=e,n;for(typeof r=="string"&&(r=[r]),Ft(e)&&(s=function(i,o){o[e]=Ce(i)}),n=r.length,t=0;t<n;t++)Mn[r[t]]=s}function us(r,e){Ue(r,function(t,s,n,i){n._w=n._w||{},e(t,n._w,n,i)})}function Gf(r,e,t){e!=null&&Re(Mn,r)&&Mn[r](e,t._a,t,r)}function Ks(r){return r%4===0&&r%100!==0||r%400===0}var et=0,Lt=1,$t=2,Qe=3,gt=4,Yt=5,ar=6,Jf=7,Kf=8;be("Y",0,0,function(){var r=this.year();return r<=9999?Ct(r,4):"+"+r});be(0,["YY",2],0,function(){return this.year()%100});be(0,["YYYY",4],0,"year");be(0,["YYYYY",5],0,"year");be(0,["YYYYYY",6,!0],0,"year");he("Y",Gs);he("YY",Be,at);he("YYYY",Xn,xn);he("YYYYY",zs,Ws);he("YYYYYY",zs,Ws);Ue(["YYYYY","YYYYYY"],et);Ue("YYYY",function(r,e){e[et]=r.length===2?se.parseTwoDigitYear(r):Ce(r)});Ue("YY",function(r,e){e[et]=se.parseTwoDigitYear(r)});Ue("Y",function(r,e){e[et]=parseInt(r,10)});function Gr(r){return Ks(r)?366:365}se.parseTwoDigitYear=function(r){return Ce(r)+(Ce(r)>68?1900:2e3)};var ra=Lr("FullYear",!0);function Zf(){return Ks(this.year())}function Lr(r,e){return function(t){return t!=null?(sa(this,r,t),se.updateOffset(this,e),this):xr(this,r)}}function xr(r,e){if(!r.isValid())return NaN;var t=r._d,s=r._isUTC;switch(e){case"Milliseconds":return s?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return s?t.getUTCSeconds():t.getSeconds();case"Minutes":return s?t.getUTCMinutes():t.getMinutes();case"Hours":return s?t.getUTCHours():t.getHours();case"Date":return s?t.getUTCDate():t.getDate();case"Day":return s?t.getUTCDay():t.getDay();case"Month":return s?t.getUTCMonth():t.getMonth();case"FullYear":return s?t.getUTCFullYear():t.getFullYear();default:return NaN}}function sa(r,e,t){var s,n,i,o,l;if(!(!r.isValid()||isNaN(t))){switch(s=r._d,n=r._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(t):s.setMilliseconds(t));case"Seconds":return void(n?s.setUTCSeconds(t):s.setSeconds(t));case"Minutes":return void(n?s.setUTCMinutes(t):s.setMinutes(t));case"Hours":return void(n?s.setUTCHours(t):s.setHours(t));case"Date":return void(n?s.setUTCDate(t):s.setDate(t));case"FullYear":break;default:return}i=t,o=r.month(),l=r.date(),l=l===29&&o===1&&!Ks(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function Qf(r){return r=_t(r),Pt(this[r])?this[r]():this}function xf(r,e){if(typeof r=="object"){r=Qn(r);var t=qf(r),s,n=t.length;for(s=0;s<n;s++)this[t[s].unit](r[t[s].unit])}else if(r=_t(r),Pt(this[r]))return this[r](e);return this}function Xf(r,e){return(r%e+e)%e}var ze;Array.prototype.indexOf?ze=Array.prototype.indexOf:ze=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function ti(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=Xf(e,12);return r+=(e-t)/12,t===1?Ks(r)?29:28:31-t%7%2}be("M",["MM",2],"Mo",function(){return this.month()+1});be("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)});be("MMMM",0,0,function(r){return this.localeData().months(this,r)});he("M",Be,Ir);he("MM",Be,at);he("MMM",function(r,e){return e.monthsShortRegex(r)});he("MMMM",function(r,e){return e.monthsRegex(r)});Ue(["M","MM"],function(r,e){e[Lt]=Ce(r)-1});Ue(["MMM","MMMM"],function(r,e,t,s){var n=t._locale.monthsParse(r,s,t._strict);n!=null?e[Lt]=n:we(t).invalidMonth=r});var ed="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),na="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ia=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,td=as,rd=as;function sd(r,e){return r?vt(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||ia).test(e)?"format":"standalone"][r.month()]:vt(this._months)?this._months:this._months.standalone}function nd(r,e){return r?vt(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[ia.test(e)?"format":"standalone"][r.month()]:vt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function id(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=Mt([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(n=ze.call(this._shortMonthsParse,o),n!==-1?n:null):(n=ze.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=ze.call(this._shortMonthsParse,o),n!==-1?n:(n=ze.call(this._longMonthsParse,o),n!==-1?n:null)):(n=ze.call(this._longMonthsParse,o),n!==-1?n:(n=ze.call(this._shortMonthsParse,o),n!==-1?n:null))}function od(r,e,t){var s,n,i;if(this._monthsParseExact)return id.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=Mt([2e3,s]),t&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[s].test(r))return s;if(t&&e==="MMM"&&this._shortMonthsParse[s].test(r))return s;if(!t&&this._monthsParse[s].test(r))return s}}function oa(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=Ce(e);else if(e=r.localeData().monthsParse(e),!Ft(e))return r}var t=e,s=r.date();return s=s<29?s:Math.min(s,ti(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,s):r._d.setMonth(t,s),r}function la(r){return r!=null?(oa(this,r),se.updateOffset(this,!0),this):xr(this,"Month")}function ld(){return ti(this.year(),this.month())}function ad(r){return this._monthsParseExact?(Re(this,"_monthsRegex")||aa.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(Re(this,"_monthsShortRegex")||(this._monthsShortRegex=td),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function ud(r){return this._monthsParseExact?(Re(this,"_monthsRegex")||aa.call(this),r?this._monthsStrictRegex:this._monthsRegex):(Re(this,"_monthsRegex")||(this._monthsRegex=rd),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function aa(){function r(a,f){return f.length-a.length}var e=[],t=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=Mt([2e3,n]),o=Ut(this.monthsShort(i,"")),l=Ut(this.months(i,"")),e.push(o),t.push(l),s.push(l),s.push(o);e.sort(r),t.sort(r),s.sort(r),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function cd(r,e,t,s,n,i,o){var l;return r<100&&r>=0?(l=new Date(r+400,e,t,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(r)):l=new Date(r,e,t,s,n,i,o),l}function Xr(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ps(r,e,t){var s=7+e-t,n=(7+Xr(r,0,s).getUTCDay()-e)%7;return-n+s-1}function ua(r,e,t,s,n){var i=(7+t-s)%7,o=Ps(r,s,n),l=1+7*(e-1)+i+o,a,f;return l<=0?(a=r-1,f=Gr(a)+l):l>Gr(r)?(a=r+1,f=l-Gr(r)):(a=r,f=l),{year:a,dayOfYear:f}}function es(r,e,t){var s=Ps(r.year(),e,t),n=Math.floor((r.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=r.year()-1,i=n+Ht(o,e,t)):n>Ht(r.year(),e,t)?(i=n-Ht(r.year(),e,t),o=r.year()+1):(o=r.year(),i=n),{week:i,year:o}}function Ht(r,e,t){var s=Ps(r,e,t),n=Ps(r+1,e,t);return(Gr(r)-s+n)/7}be("w",["ww",2],"wo","week");be("W",["WW",2],"Wo","isoWeek");he("w",Be,Ir);he("ww",Be,at);he("W",Be,Ir);he("WW",Be,at);us(["w","ww","W","WW"],function(r,e,t,s){e[s.substr(0,1)]=Ce(r)});function fd(r){return es(r,this._week.dow,this._week.doy).week}var dd={dow:0,doy:6};function hd(){return this._week.dow}function _d(){return this._week.doy}function md(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function pd(r){var e=es(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}be("d",0,"do","day");be("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)});be("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)});be("dddd",0,0,function(r){return this.localeData().weekdays(this,r)});be("e",0,0,"weekday");be("E",0,0,"isoWeekday");he("d",Be);he("e",Be);he("E",Be);he("dd",function(r,e){return e.weekdaysMinRegex(r)});he("ddd",function(r,e){return e.weekdaysShortRegex(r)});he("dddd",function(r,e){return e.weekdaysRegex(r)});us(["dd","ddd","dddd"],function(r,e,t,s){var n=t._locale.weekdaysParse(r,s,t._strict);n!=null?e.d=n:we(t).invalidWeekday=r});us(["d","e","E"],function(r,e,t,s){e[s]=Ce(r)});function bd(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function gd(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function ri(r,e){return r.slice(e,7).concat(r.slice(0,e))}var vd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ca="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),yd=as,kd=as,$d=as;function Sd(r,e){var t=vt(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?ri(t,this._week.dow):r?t[r.day()]:t}function Dd(r){return r===!0?ri(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function Td(r){return r===!0?ri(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function Od(r,e,t){var s,n,i,o=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=Mt([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(n=ze.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=ze.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=ze.call(this._weekdaysParse,o),n!==-1||(n=ze.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=ze.call(this._shortWeekdaysParse,o),n!==-1||(n=ze.call(this._weekdaysParse,o),n!==-1)?n:(n=ze.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=ze.call(this._minWeekdaysParse,o),n!==-1||(n=ze.call(this._weekdaysParse,o),n!==-1)?n:(n=ze.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Cd(r,e,t){var s,n,i;if(this._weekdaysParseExact)return Od.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=Mt([2e3,1]).day(s),t&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[s].test(r))return s;if(t&&e==="ddd"&&this._shortWeekdaysParse[s].test(r))return s;if(t&&e==="dd"&&this._minWeekdaysParse[s].test(r))return s;if(!t&&this._weekdaysParse[s].test(r))return s}}function Md(r){if(!this.isValid())return r!=null?this:NaN;var e=xr(this,"Day");return r!=null?(r=bd(r,this.localeData()),this.add(r-e,"d")):e}function Pd(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function Ed(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=gd(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Rd(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(Re(this,"_weekdaysRegex")||(this._weekdaysRegex=yd),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function jd(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Re(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=kd),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ad(r){return this._weekdaysParseExact?(Re(this,"_weekdaysRegex")||si.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Re(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$d),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function si(){function r(d,_){return _.length-d.length}var e=[],t=[],s=[],n=[],i,o,l,a,f;for(i=0;i<7;i++)o=Mt([2e3,1]).day(i),l=Ut(this.weekdaysMin(o,"")),a=Ut(this.weekdaysShort(o,"")),f=Ut(this.weekdays(o,"")),e.push(l),t.push(a),s.push(f),n.push(l),n.push(a),n.push(f);e.sort(r),t.sort(r),s.sort(r),n.sort(r),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ni(){return this.hours()%12||12}function Id(){return this.hours()||24}be("H",["HH",2],0,"hour");be("h",["hh",2],0,ni);be("k",["kk",2],0,Id);be("hmm",0,0,function(){return""+ni.apply(this)+Ct(this.minutes(),2)});be("hmmss",0,0,function(){return""+ni.apply(this)+Ct(this.minutes(),2)+Ct(this.seconds(),2)});be("Hmm",0,0,function(){return""+this.hours()+Ct(this.minutes(),2)});be("Hmmss",0,0,function(){return""+this.hours()+Ct(this.minutes(),2)+Ct(this.seconds(),2)});function fa(r,e){be(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}fa("a",!0);fa("A",!1);function da(r,e){return e._meridiemParse}he("a",da);he("A",da);he("H",Be,ei);he("h",Be,Ir);he("k",Be,Ir);he("HH",Be,at);he("hh",Be,at);he("kk",Be,at);he("hmm",ea);he("hmmss",ta);he("Hmm",ea);he("Hmmss",ta);Ue(["H","HH"],Qe);Ue(["k","kk"],function(r,e,t){var s=Ce(r);e[Qe]=s===24?0:s});Ue(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r});Ue(["h","hh"],function(r,e,t){e[Qe]=Ce(r),we(t).bigHour=!0});Ue("hmm",function(r,e,t){var s=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[gt]=Ce(r.substr(s)),we(t).bigHour=!0});Ue("hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[gt]=Ce(r.substr(s,2)),e[Yt]=Ce(r.substr(n)),we(t).bigHour=!0});Ue("Hmm",function(r,e,t){var s=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[gt]=Ce(r.substr(s))});Ue("Hmmss",function(r,e,t){var s=r.length-4,n=r.length-2;e[Qe]=Ce(r.substr(0,s)),e[gt]=Ce(r.substr(s,2)),e[Yt]=Ce(r.substr(n))});function Ld(r){return(r+"").toLowerCase().charAt(0)==="p"}var Yd=/[ap]\.?m?\.?/i,Nd=Lr("Hours",!0);function Ud(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var ha={calendar:Of,longDateFormat:Ef,invalidDate:jf,ordinal:If,dayOfMonthOrdinalParse:Lf,relativeTime:Nf,months:ed,monthsShort:na,week:dd,weekdays:vd,weekdaysMin:wd,weekdaysShort:ca,meridiemParse:Yd},We={},Fr={},ts;function Hd(r,e){var t,s=Math.min(r.length,e.length);for(t=0;t<s;t+=1)if(r[t]!==e[t])return t;return s}function Ji(r){return r&&r.toLowerCase().replace("_","-")}function Fd(r){for(var e=0,t,s,n,i;e<r.length;){for(i=Ji(r[e]).split("-"),t=i.length,s=Ji(r[e+1]),s=s?s.split("-"):null;t>0;){if(n=Zs(i.slice(0,t).join("-")),n)return n;if(s&&s.length>=t&&Hd(i,s)>=t-1)break;t--}e++}return ts}function qd(r){return!!(r&&r.match("^[^/\\\\]*$"))}function Zs(r){var e=null,t;if(We[r]===void 0&&typeof ys<"u"&&ys&&ys.exports&&qd(r))try{e=ts._abbr,t=require,t("./locale/"+r),Qt(e)}catch{We[r]=null}return We[r]}function Qt(r,e){var t;return r&&(nt(e)?t=qt(r):t=ii(r,e),t?ts=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),ts._abbr}function ii(r,e){if(e!==null){var t,s=ha;if(e.abbr=r,We[r]!=null)Zl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=We[r]._config;else if(e.parentLocale!=null)if(We[e.parentLocale]!=null)s=We[e.parentLocale]._config;else if(t=Zs(e.parentLocale),t!=null)s=t._config;else return Fr[e.parentLocale]||(Fr[e.parentLocale]=[]),Fr[e.parentLocale].push({name:r,config:e}),null;return We[r]=new Kn(On(s,e)),Fr[r]&&Fr[r].forEach(function(n){ii(n.name,n.config)}),Qt(r),We[r]}else return delete We[r],null}function Bd(r,e){if(e!=null){var t,s,n=ha;We[r]!=null&&We[r].parentLocale!=null?We[r].set(On(We[r]._config,e)):(s=Zs(r),s!=null&&(n=s._config),e=On(n,e),s==null&&(e.abbr=r),t=new Kn(e),t.parentLocale=We[r],We[r]=t),Qt(r)}else We[r]!=null&&(We[r].parentLocale!=null?(We[r]=We[r].parentLocale,r===Qt()&&Qt(r)):We[r]!=null&&delete We[r]);return We[r]}function qt(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return ts;if(!vt(r)){if(e=Zs(r),e)return e;r=[r]}return Fd(r)}function Wd(){return Cn(We)}function oi(r){var e,t=r._a;return t&&we(r).overflow===-2&&(e=t[Lt]<0||t[Lt]>11?Lt:t[$t]<1||t[$t]>ti(t[et],t[Lt])?$t:t[Qe]<0||t[Qe]>24||t[Qe]===24&&(t[gt]!==0||t[Yt]!==0||t[ar]!==0)?Qe:t[gt]<0||t[gt]>59?gt:t[Yt]<0||t[Yt]>59?Yt:t[ar]<0||t[ar]>999?ar:-1,we(r)._overflowDayOfYear&&(e<et||e>$t)&&(e=$t),we(r)._overflowWeeks&&e===-1&&(e=Jf),we(r)._overflowWeekday&&e===-1&&(e=Kf),we(r).overflow=e),r}var Vd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gd=/Z|[+-]\d\d(?::?\d\d)?/,ms=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],_n=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jd=/^\/?Date\((-?\d+)/i,Kd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _a(r){var e,t,s=r._i,n=Vd.exec(s)||zd.exec(s),i,o,l,a,f=ms.length,d=_n.length;if(n){for(we(r).iso=!0,e=0,t=f;e<t;e++)if(ms[e][1].exec(n[1])){o=ms[e][0],i=ms[e][2]!==!1;break}if(o==null){r._isValid=!1;return}if(n[3]){for(e=0,t=d;e<t;e++)if(_n[e][1].exec(n[3])){l=(n[2]||" ")+_n[e][0];break}if(l==null){r._isValid=!1;return}}if(!i&&l!=null){r._isValid=!1;return}if(n[4])if(Gd.exec(n[4]))a="Z";else{r._isValid=!1;return}r._f=o+(l||"")+(a||""),ai(r)}else r._isValid=!1}function Qd(r,e,t,s,n,i){var o=[xd(r),na.indexOf(e),parseInt(t,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function xd(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function Xd(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function eh(r,e,t){if(r){var s=ca.indexOf(r),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return we(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function th(r,e,t){if(r)return Zd[r];if(e)return 0;var s=parseInt(t,10),n=s%100,i=(s-n)/100;return i*60+n}function ma(r){var e=Kd.exec(Xd(r._i)),t;if(e){if(t=Qd(e[4],e[3],e[2],e[5],e[6],e[7]),!eh(e[1],t,r))return;r._a=t,r._tzm=th(e[8],e[9],e[10]),r._d=Xr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),we(r).rfc2822=!0}else r._isValid=!1}function rh(r){var e=Jd.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(_a(r),r._isValid===!1)delete r._isValid;else return;if(ma(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:se.createFromInputFallback(r)}se.createFromInputFallback=ht("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function yr(r,e,t){return r??e??t}function sh(r){var e=new Date(se.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function li(r){var e,t,s=[],n,i,o;if(!r._d){for(n=sh(r),r._w&&r._a[$t]==null&&r._a[Lt]==null&&nh(r),r._dayOfYear!=null&&(o=yr(r._a[et],n[et]),(r._dayOfYear>Gr(o)||r._dayOfYear===0)&&(we(r)._overflowDayOfYear=!0),t=Xr(o,0,r._dayOfYear),r._a[Lt]=t.getUTCMonth(),r._a[$t]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=s[e]=n[e];for(;e<7;e++)r._a[e]=s[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[Qe]===24&&r._a[gt]===0&&r._a[Yt]===0&&r._a[ar]===0&&(r._nextDay=!0,r._a[Qe]=0),r._d=(r._useUTC?Xr:cd).apply(null,s),i=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[Qe]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==i&&(we(r).weekdayMismatch=!0)}}function nh(r){var e,t,s,n,i,o,l,a,f;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=yr(e.GG,r._a[et],es(qe(),1,4).year),s=yr(e.W,1),n=yr(e.E,1),(n<1||n>7)&&(a=!0)):(i=r._locale._week.dow,o=r._locale._week.doy,f=es(qe(),i,o),t=yr(e.gg,r._a[et],f.year),s=yr(e.w,f.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>Ht(t,i,o)?we(r)._overflowWeeks=!0:a!=null?we(r)._overflowWeekday=!0:(l=ua(t,s,n,i,o),r._a[et]=l.year,r._dayOfYear=l.dayOfYear)}se.ISO_8601=function(){};se.RFC_2822=function(){};function ai(r){if(r._f===se.ISO_8601){_a(r);return}if(r._f===se.RFC_2822){ma(r);return}r._a=[],we(r).empty=!0;var e=""+r._i,t,s,n,i,o,l=e.length,a=0,f,d;for(n=Ql(r._f,r._locale).match(Zn)||[],d=n.length,t=0;t<d;t++)i=n[t],s=(e.match(Vf(i,r))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&we(r).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),Tr[i]?(s?we(r).empty=!1:we(r).unusedTokens.push(i),Gf(i,s,r)):r._strict&&!s&&we(r).unusedTokens.push(i);we(r).charsLeftOver=l-a,e.length>0&&we(r).unusedInput.push(e),r._a[Qe]<=12&&we(r).bigHour===!0&&r._a[Qe]>0&&(we(r).bigHour=void 0),we(r).parsedDateParts=r._a.slice(0),we(r).meridiem=r._meridiem,r._a[Qe]=ih(r._locale,r._a[Qe],r._meridiem),f=we(r).era,f!==null&&(r._a[et]=r._locale.erasConvertYear(f,r._a[et])),li(r),oi(r)}function ih(r,e,t){var s;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(s=r.isPM(t),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function oh(r){var e,t,s,n,i,o,l=!1,a=r._f.length;if(a===0){we(r).invalidFormat=!0,r._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=Jn({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[n],ai(e),Gn(e)&&(o=!0),i+=we(e).charsLeftOver,i+=we(e).unusedTokens.length*10,we(e).score=i,l?i<s&&(s=i,t=e):(s==null||i<s||o)&&(s=i,t=e,o&&(l=!0));Kt(r,t||e)}function lh(r){if(!r._d){var e=Qn(r._i),t=e.day===void 0?e.date:e.day;r._a=Jl([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),li(r)}}function ah(r){var e=new ls(oi(pa(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function pa(r){var e=r._i,t=r._f;return r._locale=r._locale||qt(r._l),e===null||t===void 0&&e===""?Bs({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),wt(e)?new ls(oi(e)):(os(e)?r._d=e:vt(t)?oh(r):t?ai(r):uh(r),Gn(r)||(r._d=null),r))}function uh(r){var e=r._i;nt(e)?r._d=new Date(se.now()):os(e)?r._d=new Date(e.valueOf()):typeof e=="string"?rh(r):vt(e)?(r._a=Jl(e.slice(0),function(t){return parseInt(t,10)}),li(r)):ur(e)?lh(r):Ft(e)?r._d=new Date(e):se.createFromInputFallback(r)}function ba(r,e,t,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(t===!0||t===!1)&&(s=t,t=void 0),(ur(r)&&zn(r)||vt(r)&&r.length===0)&&(r=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=t,i._i=r,i._f=e,i._strict=s,ah(i)}function qe(r,e,t,s){return ba(r,e,t,s,!1)}var ch=ht("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=qe.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:Bs()}),fh=ht("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=qe.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:Bs()});function ga(r,e){var t,s;if(e.length===1&&vt(e[0])&&(e=e[0]),!e.length)return qe();for(t=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][r](t))&&(t=e[s]);return t}function dh(){var r=[].slice.call(arguments,0);return ga("isBefore",r)}function hh(){var r=[].slice.call(arguments,0);return ga("isAfter",r)}var _h=function(){return Date.now?Date.now():+new Date},qr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function mh(r){var e,t=!1,s,n=qr.length;for(e in r)if(Re(r,e)&&!(ze.call(qr,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(s=0;s<n;++s)if(r[qr[s]]){if(t)return!1;parseFloat(r[qr[s]])!==Ce(r[qr[s]])&&(t=!0)}return!0}function ph(){return this._isValid}function bh(){return yt(NaN)}function Qs(r){var e=Qn(r),t=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,f=e.second||0,d=e.millisecond||0;this._isValid=mh(e),this._milliseconds=+d+f*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+t*12,this._data={},this._locale=qt(),this._bubble()}function vs(r){return r instanceof Qs}function Pn(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function gh(r,e,t){var s=Math.min(r.length,e.length),n=Math.abs(r.length-e.length),i=0,o;for(o=0;o<s;o++)Ce(r[o])!==Ce(e[o])&&i++;return i+n}function va(r,e){be(r,0,0,function(){var t=this.utcOffset(),s="+";return t<0&&(t=-t,s="-"),s+Ct(~~(t/60),2)+e+Ct(~~t%60,2)})}va("Z",":");va("ZZ","");he("Z",Js);he("ZZ",Js);Ue(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=ui(Js,r)});var vh=/([\+\-]|\d\d)/gi;function ui(r,e){var t=(e||"").match(r),s,n,i;return t===null?null:(s=t[t.length-1]||[],n=(s+"").match(vh)||["-",0,0],i=+(n[1]*60)+Ce(n[2]),i===0?0:n[0]==="+"?i:-i)}function ci(r,e){var t,s;return e._isUTC?(t=e.clone(),s=(wt(r)||os(r)?r.valueOf():qe(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+s),se.updateOffset(t,!1),t):qe(r).local()}function En(r){return-Math.round(r._d.getTimezoneOffset())}se.updateOffset=function(){};function wh(r,e,t){var s=this._offset||0,n;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=ui(Js,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(n=En(this)),this._offset=r,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==r&&(!e||this._changeInProgress?ka(this,yt(r-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,se.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:En(this)}function yh(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function kh(r){return this.utcOffset(0,r)}function $h(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(En(this),"m")),this}function Sh(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=ui(Bf,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function Dh(r){return this.isValid()?(r=r?qe(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function Th(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Oh(){if(!nt(this._isDSTShifted))return this._isDSTShifted;var r={},e;return Jn(r,this),r=pa(r),r._a?(e=r._isUTC?Mt(r._a):qe(r._a),this._isDSTShifted=this.isValid()&&gh(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ch(){return this.isValid()?!this._isUTC:!1}function Mh(){return this.isValid()?this._isUTC:!1}function wa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ph=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Eh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function yt(r,e){var t=r,s=null,n,i,o;return vs(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:Ft(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(s=Ph.exec(r))?(n=s[1]==="-"?-1:1,t={y:0,d:Ce(s[$t])*n,h:Ce(s[Qe])*n,m:Ce(s[gt])*n,s:Ce(s[Yt])*n,ms:Ce(Pn(s[ar]*1e3))*n}):(s=Eh.exec(r))?(n=s[1]==="-"?-1:1,t={y:ir(s[2],n),M:ir(s[3],n),w:ir(s[4],n),d:ir(s[5],n),h:ir(s[6],n),m:ir(s[7],n),s:ir(s[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=Rh(qe(t.from),qe(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Qs(t),vs(r)&&Re(r,"_locale")&&(i._locale=r._locale),vs(r)&&Re(r,"_isValid")&&(i._isValid=r._isValid),i}yt.fn=Qs.prototype;yt.invalid=bh;function ir(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function Ki(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function Rh(r,e){var t;return r.isValid()&&e.isValid()?(e=ci(e,r),r.isBefore(e)?t=Ki(r,e):(t=Ki(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function ya(r,e){return function(t,s){var n,i;return s!==null&&!isNaN(+s)&&(Zl(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=s,s=i),n=yt(t,s),ka(this,n,r),this}}function ka(r,e,t,s){var n=e._milliseconds,i=Pn(e._days),o=Pn(e._months);r.isValid()&&(s=s??!0,o&&oa(r,xr(r,"Month")+o*t),i&&sa(r,"Date",xr(r,"Date")+i*t),n&&r._d.setTime(r._d.valueOf()+n*t),s&&se.updateOffset(r,i||o))}var jh=ya(1,"add"),Ah=ya(-1,"subtract");function $a(r){return typeof r=="string"||r instanceof String}function Ih(r){return wt(r)||os(r)||$a(r)||Ft(r)||Yh(r)||Lh(r)||r===null||r===void 0}function Lh(r){var e=ur(r)&&!zn(r),t=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],t=t||Re(r,i);return e&&t}function Yh(r){var e=vt(r),t=!1;return e&&(t=r.filter(function(s){return!Ft(s)&&$a(r)}).length===0),e&&t}function Nh(r){var e=ur(r)&&!zn(r),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],t=t||Re(r,i);return e&&t}function Uh(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Hh(r,e){arguments.length===1&&(arguments[0]?Ih(arguments[0])?(r=arguments[0],e=void 0):Nh(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||qe(),s=ci(t,this).startOf("day"),n=se.calendarFormat(this,s)||"sameElse",i=e&&(Pt(e[n])?e[n].call(this,t):e[n]);return this.format(i||this.localeData().calendar(n,this,qe(t)))}function Fh(){return new ls(this)}function qh(r,e){var t=wt(r)?r:qe(r);return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Bh(r,e){var t=wt(r)?r:qe(r);return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Wh(r,e,t,s){var n=wt(r)?r:qe(r),i=wt(e)?e:qe(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(s[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function Vh(r,e){var t=wt(r)?r:qe(r),s;return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(s=t.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function zh(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function Gh(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function Jh(r,e,t){var s,n,i;if(!this.isValid())return NaN;if(s=ci(r,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=_t(e),e){case"year":i=ws(this,s)/12;break;case"month":i=ws(this,s);break;case"quarter":i=ws(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return t?i:ft(i)}function ws(r,e){if(r.date()<e.date())return-ws(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),s=r.clone().add(t,"months"),n,i;return e-s<0?(n=r.clone().add(t-1,"months"),i=(e-s)/(s-n)):(n=r.clone().add(t+1,"months"),i=(e-s)/(n-s)),-(t+i)||0}se.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";se.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Kh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zh(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?gs(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Pt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",gs(t,"Z")):gs(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Qh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,s,n,i;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+s+n+i)}function xh(r){r||(r=this.isUtc()?se.defaultFormatUtc:se.defaultFormat);var e=gs(this,r);return this.localeData().postformat(e)}function Xh(r,e){return this.isValid()&&(wt(r)&&r.isValid()||qe(r).isValid())?yt({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function e_(r){return this.from(qe(),r)}function t_(r,e){return this.isValid()&&(wt(r)&&r.isValid()||qe(r).isValid())?yt({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function r_(r){return this.to(qe(),r)}function Sa(r){var e;return r===void 0?this._locale._abbr:(e=qt(r),e!=null&&(this._locale=e),this)}var Da=ht("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function Ta(){return this._locale}var Es=1e3,Or=60*Es,Rs=60*Or,Oa=(365*400+97)*24*Rs;function Cr(r,e){return(r%e+e)%e}function Ca(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-Oa:new Date(r,e,t).valueOf()}function Ma(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-Oa:Date.UTC(r,e,t)}function s_(r){var e,t;if(r=_t(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Ma:Ca,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Cr(e+(this._isUTC?0:this.utcOffset()*Or),Rs);break;case"minute":e=this._d.valueOf(),e-=Cr(e,Or);break;case"second":e=this._d.valueOf(),e-=Cr(e,Es);break}return this._d.setTime(e),se.updateOffset(this,!0),this}function n_(r){var e,t;if(r=_t(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Ma:Ca,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Rs-Cr(e+(this._isUTC?0:this.utcOffset()*Or),Rs)-1;break;case"minute":e=this._d.valueOf(),e+=Or-Cr(e,Or)-1;break;case"second":e=this._d.valueOf(),e+=Es-Cr(e,Es)-1;break}return this._d.setTime(e),se.updateOffset(this,!0),this}function i_(){return this._d.valueOf()-(this._offset||0)*6e4}function o_(){return Math.floor(this.valueOf()/1e3)}function l_(){return new Date(this.valueOf())}function a_(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function u_(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function c_(){return this.isValid()?this.toISOString():null}function f_(){return Gn(this)}function d_(){return Kt({},we(this))}function h_(){return we(this).overflow}function __(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}be("N",0,0,"eraAbbr");be("NN",0,0,"eraAbbr");be("NNN",0,0,"eraAbbr");be("NNNN",0,0,"eraName");be("NNNNN",0,0,"eraNarrow");be("y",["y",1],"yo","eraYear");be("y",["yy",2],0,"eraYear");be("y",["yyy",3],0,"eraYear");be("y",["yyyy",4],0,"eraYear");he("N",fi);he("NN",fi);he("NNN",fi);he("NNNN",D_);he("NNNNN",T_);Ue(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,s){var n=t._locale.erasParse(r,s,t._strict);n?we(t).era=n:we(t).invalidEra=r});he("y",Ar);he("yy",Ar);he("yyy",Ar);he("yyyy",Ar);he("yo",O_);Ue(["y","yy","yyy","yyyy"],et);Ue(["yo"],function(r,e,t,s){var n;t._locale._eraYearOrdinalRegex&&(n=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[et]=t._locale.eraYearOrdinalParse(r,n):e[et]=parseInt(r,10)});function m_(r,e){var t,s,n,i=this._eras||qt("en")._eras;for(t=0,s=i.length;t<s;++t){switch(typeof i[t].since){case"string":n=se(i[t].since).startOf("day"),i[t].since=n.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":n=se(i[t].until).startOf("day").valueOf(),i[t].until=n.valueOf();break}}return i}function p_(r,e,t){var s,n,i=this.eras(),o,l,a;for(r=r.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===r)return i[s];break;case"NNNN":if(o===r)return i[s];break;case"NNNNN":if(a===r)return i[s];break}else if([o,l,a].indexOf(r)>=0)return i[s]}function b_(r,e){var t=r.since<=r.until?1:-1;return e===void 0?se(r.since).year():se(r.since).year()+(e-r.offset)*t}function g_(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].name;return""}function v_(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].narrow;return""}function w_(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].abbr;return""}function y_(){var r,e,t,s,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=n[r].since<=n[r].until?1:-1,s=this.clone().startOf("day").valueOf(),n[r].since<=s&&s<=n[r].until||n[r].until<=s&&s<=n[r].since)return(this.year()-se(n[r].since).year())*t+n[r].offset;return this.year()}function k_(r){return Re(this,"_erasNameRegex")||di.call(this),r?this._erasNameRegex:this._erasRegex}function $_(r){return Re(this,"_erasAbbrRegex")||di.call(this),r?this._erasAbbrRegex:this._erasRegex}function S_(r){return Re(this,"_erasNarrowRegex")||di.call(this),r?this._erasNarrowRegex:this._erasRegex}function fi(r,e){return e.erasAbbrRegex(r)}function D_(r,e){return e.erasNameRegex(r)}function T_(r,e){return e.erasNarrowRegex(r)}function O_(r,e){return e._eraYearOrdinalRegex||Ar}function di(){var r=[],e=[],t=[],s=[],n,i,o,l,a,f=this.eras();for(n=0,i=f.length;n<i;++n)o=Ut(f[n].name),l=Ut(f[n].abbr),a=Ut(f[n].narrow),e.push(o),r.push(l),t.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}be(0,["gg",2],0,function(){return this.weekYear()%100});be(0,["GG",2],0,function(){return this.isoWeekYear()%100});function xs(r,e){be(0,[r,r.length],0,e)}xs("gggg","weekYear");xs("ggggg","weekYear");xs("GGGG","isoWeekYear");xs("GGGGG","isoWeekYear");he("G",Gs);he("g",Gs);he("GG",Be,at);he("gg",Be,at);he("GGGG",Xn,xn);he("gggg",Xn,xn);he("GGGGG",zs,Ws);he("ggggg",zs,Ws);us(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,s){e[s.substr(0,2)]=Ce(r)});us(["gg","GG"],function(r,e,t,s){e[s]=se.parseTwoDigitYear(r)});function C_(r){return Pa.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function M_(r){return Pa.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function P_(){return Ht(this.year(),1,4)}function E_(){return Ht(this.isoWeekYear(),1,4)}function R_(){var r=this.localeData()._week;return Ht(this.year(),r.dow,r.doy)}function j_(){var r=this.localeData()._week;return Ht(this.weekYear(),r.dow,r.doy)}function Pa(r,e,t,s,n){var i;return r==null?es(this,s,n).year:(i=Ht(r,s,n),e>i&&(e=i),A_.call(this,r,e,t,s,n))}function A_(r,e,t,s,n){var i=ua(r,e,t,s,n),o=Xr(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}be("Q",0,"Qo","quarter");he("Q",xl);Ue("Q",function(r,e){e[Lt]=(Ce(r)-1)*3});function I_(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}be("D",["DD",2],"Do","date");he("D",Be,Ir);he("DD",Be,at);he("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ue(["D","DD"],$t);Ue("Do",function(r,e){e[$t]=Ce(r.match(Be)[0])});var Ea=Lr("Date",!0);be("DDD",["DDDD",3],"DDDo","dayOfYear");he("DDD",Vs);he("DDDD",Xl);Ue(["DDD","DDDD"],function(r,e,t){t._dayOfYear=Ce(r)});function L_(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}be("m",["mm",2],0,"minute");he("m",Be,ei);he("mm",Be,at);Ue(["m","mm"],gt);var Y_=Lr("Minutes",!1);be("s",["ss",2],0,"second");he("s",Be,ei);he("ss",Be,at);Ue(["s","ss"],Yt);var N_=Lr("Seconds",!1);be("S",0,0,function(){return~~(this.millisecond()/100)});be(0,["SS",2],0,function(){return~~(this.millisecond()/10)});be(0,["SSS",3],0,"millisecond");be(0,["SSSS",4],0,function(){return this.millisecond()*10});be(0,["SSSSS",5],0,function(){return this.millisecond()*100});be(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});be(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});be(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});be(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});he("S",Vs,xl);he("SS",Vs,at);he("SSS",Vs,Xl);var Zt,Ra;for(Zt="SSSS";Zt.length<=9;Zt+="S")he(Zt,Ar);function U_(r,e){e[ar]=Ce(("0."+r)*1e3)}for(Zt="S";Zt.length<=9;Zt+="S")Ue(Zt,U_);Ra=Lr("Milliseconds",!1);be("z",0,0,"zoneAbbr");be("zz",0,0,"zoneName");function H_(){return this._isUTC?"UTC":""}function F_(){return this._isUTC?"Coordinated Universal Time":""}var le=ls.prototype;le.add=jh;le.calendar=Hh;le.clone=Fh;le.diff=Jh;le.endOf=n_;le.format=xh;le.from=Xh;le.fromNow=e_;le.to=t_;le.toNow=r_;le.get=Qf;le.invalidAt=h_;le.isAfter=qh;le.isBefore=Bh;le.isBetween=Wh;le.isSame=Vh;le.isSameOrAfter=zh;le.isSameOrBefore=Gh;le.isValid=f_;le.lang=Da;le.locale=Sa;le.localeData=Ta;le.max=fh;le.min=ch;le.parsingFlags=d_;le.set=xf;le.startOf=s_;le.subtract=Ah;le.toArray=a_;le.toObject=u_;le.toDate=l_;le.toISOString=Zh;le.inspect=Qh;typeof Symbol<"u"&&Symbol.for!=null&&(le[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});le.toJSON=c_;le.toString=Kh;le.unix=o_;le.valueOf=i_;le.creationData=__;le.eraName=g_;le.eraNarrow=v_;le.eraAbbr=w_;le.eraYear=y_;le.year=ra;le.isLeapYear=Zf;le.weekYear=C_;le.isoWeekYear=M_;le.quarter=le.quarters=I_;le.month=la;le.daysInMonth=ld;le.week=le.weeks=md;le.isoWeek=le.isoWeeks=pd;le.weeksInYear=R_;le.weeksInWeekYear=j_;le.isoWeeksInYear=P_;le.isoWeeksInISOWeekYear=E_;le.date=Ea;le.day=le.days=Md;le.weekday=Pd;le.isoWeekday=Ed;le.dayOfYear=L_;le.hour=le.hours=Nd;le.minute=le.minutes=Y_;le.second=le.seconds=N_;le.millisecond=le.milliseconds=Ra;le.utcOffset=wh;le.utc=kh;le.local=$h;le.parseZone=Sh;le.hasAlignedHourOffset=Dh;le.isDST=Th;le.isLocal=Ch;le.isUtcOffset=Mh;le.isUtc=wa;le.isUTC=wa;le.zoneAbbr=H_;le.zoneName=F_;le.dates=ht("dates accessor is deprecated. Use date instead.",Ea);le.months=ht("months accessor is deprecated. Use month instead",la);le.years=ht("years accessor is deprecated. Use year instead",ra);le.zone=ht("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yh);le.isDSTShifted=ht("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Oh);function q_(r){return qe(r*1e3)}function B_(){return qe.apply(null,arguments).parseZone()}function ja(r){return r}var Ae=Kn.prototype;Ae.calendar=Cf;Ae.longDateFormat=Rf;Ae.invalidDate=Af;Ae.ordinal=Yf;Ae.preparse=ja;Ae.postformat=ja;Ae.relativeTime=Uf;Ae.pastFuture=Hf;Ae.set=Tf;Ae.eras=m_;Ae.erasParse=p_;Ae.erasConvertYear=b_;Ae.erasAbbrRegex=$_;Ae.erasNameRegex=k_;Ae.erasNarrowRegex=S_;Ae.months=sd;Ae.monthsShort=nd;Ae.monthsParse=od;Ae.monthsRegex=ud;Ae.monthsShortRegex=ad;Ae.week=fd;Ae.firstDayOfYear=_d;Ae.firstDayOfWeek=hd;Ae.weekdays=Sd;Ae.weekdaysMin=Td;Ae.weekdaysShort=Dd;Ae.weekdaysParse=Cd;Ae.weekdaysRegex=Rd;Ae.weekdaysShortRegex=jd;Ae.weekdaysMinRegex=Ad;Ae.isPM=Ld;Ae.meridiem=Ud;function js(r,e,t,s){var n=qt(),i=Mt().set(s,e);return n[t](i,r)}function Aa(r,e,t){if(Ft(r)&&(e=r,r=void 0),r=r||"",e!=null)return js(r,e,t,"month");var s,n=[];for(s=0;s<12;s++)n[s]=js(r,s,t,"month");return n}function hi(r,e,t,s){typeof r=="boolean"?(Ft(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,Ft(e)&&(t=e,e=void 0),e=e||"");var n=qt(),i=r?n._week.dow:0,o,l=[];if(t!=null)return js(e,(t+i)%7,s,"day");for(o=0;o<7;o++)l[o]=js(e,(o+i)%7,s,"day");return l}function W_(r,e){return Aa(r,e,"months")}function V_(r,e){return Aa(r,e,"monthsShort")}function z_(r,e,t){return hi(r,e,t,"weekdays")}function G_(r,e,t){return hi(r,e,t,"weekdaysShort")}function J_(r,e,t){return hi(r,e,t,"weekdaysMin")}Qt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=Ce(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}});se.lang=ht("moment.lang is deprecated. Use moment.locale instead.",Qt);se.langData=ht("moment.langData is deprecated. Use moment.localeData instead.",qt);var Rt=Math.abs;function K_(){var r=this._data;return this._milliseconds=Rt(this._milliseconds),this._days=Rt(this._days),this._months=Rt(this._months),r.milliseconds=Rt(r.milliseconds),r.seconds=Rt(r.seconds),r.minutes=Rt(r.minutes),r.hours=Rt(r.hours),r.months=Rt(r.months),r.years=Rt(r.years),this}function Ia(r,e,t,s){var n=yt(e,t);return r._milliseconds+=s*n._milliseconds,r._days+=s*n._days,r._months+=s*n._months,r._bubble()}function Z_(r,e){return Ia(this,r,e,1)}function Q_(r,e){return Ia(this,r,e,-1)}function Zi(r){return r<0?Math.floor(r):Math.ceil(r)}function x_(){var r=this._milliseconds,e=this._days,t=this._months,s=this._data,n,i,o,l,a;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=Zi(Rn(t)+e)*864e5,e=0,t=0),s.milliseconds=r%1e3,n=ft(r/1e3),s.seconds=n%60,i=ft(n/60),s.minutes=i%60,o=ft(i/60),s.hours=o%24,e+=ft(o/24),a=ft(La(e)),t+=a,e-=Zi(Rn(a)),l=ft(t/12),t%=12,s.days=e,s.months=t,s.years=l,this}function La(r){return r*4800/146097}function Rn(r){return r*146097/4800}function X_(r){if(!this.isValid())return NaN;var e,t,s=this._milliseconds;if(r=_t(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+s/864e5,t=this._months+La(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(Rn(this._months)),r){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+r)}}function Bt(r){return function(){return this.as(r)}}var Ya=Bt("ms"),em=Bt("s"),tm=Bt("m"),rm=Bt("h"),sm=Bt("d"),nm=Bt("w"),im=Bt("M"),om=Bt("Q"),lm=Bt("y"),am=Ya;function um(){return yt(this)}function cm(r){return r=_t(r),this.isValid()?this[r+"s"]():NaN}function fr(r){return function(){return this.isValid()?this._data[r]:NaN}}var fm=fr("milliseconds"),dm=fr("seconds"),hm=fr("minutes"),_m=fr("hours"),mm=fr("days"),pm=fr("months"),bm=fr("years");function gm(){return ft(this.days()/7)}var jt=Math.round,kr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function vm(r,e,t,s,n){return n.relativeTime(e||1,!!t,r,s)}function wm(r,e,t,s){var n=yt(r).abs(),i=jt(n.as("s")),o=jt(n.as("m")),l=jt(n.as("h")),a=jt(n.as("d")),f=jt(n.as("M")),d=jt(n.as("w")),_=jt(n.as("y")),m=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(m=m||d<=1&&["w"]||d<t.w&&["ww",d]),m=m||f<=1&&["M"]||f<t.M&&["MM",f]||_<=1&&["y"]||["yy",_],m[2]=e,m[3]=+r>0,m[4]=s,vm.apply(null,m)}function ym(r){return r===void 0?jt:typeof r=="function"?(jt=r,!0):!1}function km(r,e){return kr[r]===void 0?!1:e===void 0?kr[r]:(kr[r]=e,r==="s"&&(kr.ss=e-1),!0)}function $m(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,s=kr,n,i;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(s=Object.assign({},kr,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=wm(this,!t,s,n),t&&(i=n.pastFuture(+this,i)),n.postformat(i)}var mn=Math.abs;function gr(r){return(r>0)-(r<0)||+r}function Xs(){if(!this.isValid())return this.localeData().invalidDate();var r=mn(this._milliseconds)/1e3,e=mn(this._days),t=mn(this._months),s,n,i,o,l=this.asSeconds(),a,f,d,_;return l?(s=ft(r/60),n=ft(s/60),r%=60,s%=60,i=ft(t/12),t%=12,o=r?r.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",f=gr(this._months)!==gr(l)?"-":"",d=gr(this._days)!==gr(l)?"-":"",_=gr(this._milliseconds)!==gr(l)?"-":"",a+"P"+(i?f+i+"Y":"")+(t?f+t+"M":"")+(e?d+e+"D":"")+(n||s||r?"T":"")+(n?_+n+"H":"")+(s?_+s+"M":"")+(r?_+o+"S":"")):"P0D"}var Ee=Qs.prototype;Ee.isValid=ph;Ee.abs=K_;Ee.add=Z_;Ee.subtract=Q_;Ee.as=X_;Ee.asMilliseconds=Ya;Ee.asSeconds=em;Ee.asMinutes=tm;Ee.asHours=rm;Ee.asDays=sm;Ee.asWeeks=nm;Ee.asMonths=im;Ee.asQuarters=om;Ee.asYears=lm;Ee.valueOf=am;Ee._bubble=x_;Ee.clone=um;Ee.get=cm;Ee.milliseconds=fm;Ee.seconds=dm;Ee.minutes=hm;Ee.hours=_m;Ee.days=mm;Ee.weeks=gm;Ee.months=pm;Ee.years=bm;Ee.humanize=$m;Ee.toISOString=Xs;Ee.toString=Xs;Ee.toJSON=Xs;Ee.locale=Sa;Ee.localeData=Ta;Ee.toIsoString=ht("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xs);Ee.lang=Da;be("X",0,0,"unix");be("x",0,0,"valueOf");he("x",Gs);he("X",Wf);Ue("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)});Ue("x",function(r,e,t){t._d=new Date(Ce(r))});//! moment.js
se.version="2.30.1";Sf(qe);se.fn=le;se.min=dh;se.max=hh;se.now=_h;se.utc=Mt;se.unix=q_;se.months=W_;se.isDate=os;se.locale=Qt;se.invalid=Bs;se.duration=yt;se.isMoment=wt;se.weekdays=z_;se.parseZone=B_;se.localeData=qt;se.isDuration=vs;se.monthsShort=V_;se.weekdaysMin=J_;se.defineLocale=ii;se.updateLocale=Bd;se.locales=Wd;se.weekdaysShort=G_;se.normalizeUnits=_t;se.relativeTimeRounding=ym;se.relativeTimeThreshold=km;se.calendarFormat=Uh;se.prototype=le;se.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Qi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function xi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[17]=e[t][1],s}function Xi(r,e,t){const s=r.slice();return s[13]=e[t][0],s[20]=e[t][1],s}function eo(r,e,t){const s=r.slice();return s[13]=e[t][0],s[23]=e[t][1],s}function Sm(r){let e,t;return e=new qs({props:{message:r[7]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&128&&(i.message=s[7]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Dm(r){let e,t;return e=new St({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[Tm]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function to(r){let e,t;return e=new $f({props:{id:r[23].book_id,title:r[23].title,label:r[23].status=="Borrowed"?`Due: ${se(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:r[23].status=="Borrowed"?"danger":"secondary"}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&8&&(i.id=s[23].book_id),n&8&&(i.title=s[23].title),n&8&&(i.label=s[23].status=="Borrowed"?`Due: ${se(s[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),n&8&&(i.color=s[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Tm(r){let e,t,s=Se(Object.entries(r[3])),n=[];for(let o=0;o<s.length;o+=1)n[o]=to(eo(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-center justify-content-md-start")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&8){s=Se(Object.entries(o[3]));let a;for(a=0;a<s.length;a+=1){const f=eo(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=to(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function Om(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Cm(r){let e,t;return e=new qs({props:{message:r[4]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Mm(r){let e,t,s=Se(Object.entries(r[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=ro(Xi(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&1){s=Se(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const f=Xi(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=ro(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function ro(r){let e,t;return e=new Fs({props:{title:r[20].title,id:r[20].book_id,author:r[20].author}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&1&&(i.title=s[20].title),n&1&&(i.id=s[20].book_id),n&1&&(i.author=s[20].author),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Pm(r){let e,t,s,n;const i=[Mm,Cm,Om],o=[];function l(a,f){return a[0]?0:a[4]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Em(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Rm(r){let e,t;return e=new qs({props:{message:r[5]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function jm(r){let e,t,s=Se(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=so(xi(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Se(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const f=xi(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=so(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function so(r){let e,t;return e=new Vl({props:{id:r[17].author_id,name:r[17].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.id=s[17].author_id),n&2&&(i.name=s[17].name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Am(r){let e,t,s,n;const i=[jm,Rm,Em],o=[];function l(a,f){return a[1]?0:a[5]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Im(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Lm(r){let e,t;return e=new qs({props:{message:r[6]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&64&&(i.message=s[6]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ym(r){let e,t,s=Se(Object.entries(r[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=no(Qi(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row justify-content-around")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const f=Qi(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=no(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function no(r){let e,t;return e=new zl({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Nm(r){let e,t,s,n;const i=[Ym,Lm,Im],o=[];function l(a,f){return a[2]?0:a[6]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Um(r){let e,t,s,n,i,o,l,a,f,d,_,m,g;t=new tf({});const p=[Dm,Sm],b=[];function y(w,O){return w[3]&&w[3].length!=0?0:w[7]?1:-1}return~(n=y(r))&&(i=b[n]=p[n](r)),l=new St({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Pm]},$$scope:{ctx:r}}}),f=new St({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Am]},$$scope:{ctx:r}}}),_=new St({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Nm]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),s=v(),i&&i.c(),o=v(),Q(l.$$.fragment),a=v(),Q(f.$$.fragment),d=v(),Q(_.$$.fragment),u(e,"class","container mb-5")},m(w,O){P(w,e,O),K(t,e,null),c(e,s),~n&&b[n].m(e,null),c(e,o),K(l,e,null),c(e,a),K(f,e,null),c(e,d),K(_,e,null),g=!0},p(w,[O]){let D=n;n=y(w),n===D?~n&&b[n].p(w,O):(i&&(Le(),j(b[D],1,1,()=>{b[D]=null}),Ye()),~n?(i=b[n],i?i.p(w,O):(i=b[n]=p[n](w),i.c()),E(i,1),i.m(e,o)):i=null);const $={};O&67108881&&($.$$scope={dirty:O,ctx:w}),l.$set($);const S={};O&67108898&&(S.$$scope={dirty:O,ctx:w}),f.$set(S);const k={};O&67108932&&(k.$$scope={dirty:O,ctx:w}),_.$set(k)},i(w){g||(E(t.$$.fragment,w),E(i),E(l.$$.fragment,w),E(f.$$.fragment,w),E(_.$$.fragment,w),w&&(m||je(()=>{m=Ke(e,Ze,{duration:500}),m.start()})),g=!0)},o(w){j(t.$$.fragment,w),j(i),j(l.$$.fragment,w),j(f.$$.fragment,w),j(_.$$.fragment,w),g=!1},d(w){w&&M(e),Z(t),~n&&b[n].d(),Z(l),Z(f),Z(_)}}}function Hm(r,e,t){const s=localStorage.getItem("user_id")||"";let n,i,o,l,a,f,d,_;async function m(){const{data:y,error:w}=await re.rpc("get_books");t(0,n=y),t(4,a=w?w.message:"")}async function g(){const{data:y,error:w}=await re.rpc("get_authors");t(1,i=y),t(5,f=w?w.message:"")}async function p(){const{data:y,error:w}=await re.rpc("get_publishers");t(2,o=y),t(6,d=w||"")}async function b(){const{data:y,error:w}=await re.rpc("get_inventory",{loggedid:s});t(3,l=y),console.log(l),t(7,_=w||"")}return m(),g(),p(),b(),[n,i,o,l,a,f,d,_]}class Fm extends Te{constructor(e){super(),De(this,e,Hm,Um,$e,{})}}function io(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-printer"></i> Print',u(e,"class","btn btn-outline-primary btn-sm col-1")},m(n,i){P(n,e,i),t||(s=H(e,"click",r[3]),t=!0)},p:ee,d(n){n&&M(e),t=!1,s()}}}function qm(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S=r[1]&&io(r);return{c(){e=h("div"),t=h("div"),s=h("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',n=v(),i=h("div"),o=h("h4"),l=x(r[0]),a=v(),S&&S.c(),f=v(),d=h("div"),_=h("h1"),_.innerHTML=`<b><i class="bi bi-book"></i>
      Zenodotus</b>`,m=v(),g=h("h6"),g.textContent="CTADVDBL Project",p=v(),b=h("h4"),y=x(r[0]),w=v(),O=h("small"),O.textContent=`Printed by: Staff #${localStorage.getItem("user_id")}`,u(s,"class","btn"),Ge(s,"font-size","1.5em"),u(o,"class","my-auto"),u(t,"class","d-flex align-items-center"),u(e,"class","d-flex border-bottom border-1 my-3 align-items-center d-print-none justify-content-between"),u(_,"class","m-0"),u(b,"class","mb-0"),u(d,"class","justify-content-center align-items-center d-none d-print-flex flex-column mt-3")},m(k,C){P(k,e,C),c(e,t),c(t,s),c(t,n),c(t,i),c(i,o),c(o,l),c(e,a),S&&S.m(e,null),P(k,f,C),P(k,d,C),c(d,_),c(d,m),c(d,g),c(d,p),c(d,b),c(b,y),c(d,w),c(d,O),D||($=H(s,"click",r[2]),D=!0)},p(k,[C]){C&1&&ae(l,k[0]),k[1]?S?S.p(k,C):(S=io(k),S.c(),S.m(e,null)):S&&(S.d(1),S=null),C&1&&ae(y,k[0])},i:ee,o:ee,d(k){k&&(M(e),M(f),M(d)),S&&S.d(),D=!1,$()}}}function Bm(r,e,t){let{text:s}=e,{print:n=!1}=e;const i=()=>Zr(),o=()=>window.print();return r.$$set=l=>{"text"in l&&t(0,s=l.text),"print"in l&&t(1,n=l.print)},[s,n,i,o]}class tt extends Te{constructor(e){super(),De(this,e,Bm,qm,$e,{text:0,print:1})}}function Wm(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$;const S=r[5].default,k=As(S,r,r[4],null);return{c(){e=h("div"),t=h("div"),s=h("div"),n=h("div"),i=h("h1"),o=x(r[0]),l=v(),a=h("button"),f=v(),d=h("div"),k&&k.c(),_=v(),m=h("div"),g=h("button"),p=x(r[3]),b=v(),y=h("button"),w=x(r[2]),u(i,"class","modal-title fs-5"),u(i,"id","exampleModalLabel"),u(a,"type","button"),u(a,"class","btn-close"),u(a,"data-bs-dismiss","modal"),u(a,"aria-label","Close"),u(n,"class","modal-header"),u(d,"class","modal-body"),u(g,"type","button"),u(g,"class","btn btn-secondary"),u(g,"data-bs-dismiss","modal"),u(y,"type","button"),u(y,"class","btn btn-primary"),u(y,"data-bs-dismiss","modal"),u(m,"class","modal-footer"),u(s,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id",r[1]),u(e,"tabindex","-1"),u(e,"aria-hidden","true")},m(C,T){P(C,e,T),c(e,t),c(t,s),c(s,n),c(n,i),c(i,o),c(n,l),c(n,a),c(s,f),c(s,d),k&&k.m(d,null),c(s,_),c(s,m),c(m,g),c(g,p),c(m,b),c(m,y),c(y,w),O=!0,D||($=H(y,"click",r[6]),D=!0)},p(C,[T]){(!O||T&1)&&ae(o,C[0]),k&&k.p&&(!O||T&16)&&Ls(k,S,C,C[4],O?Is(S,C[4],T,null):Ys(C[4]),null),(!O||T&8)&&ae(p,C[3]),(!O||T&4)&&ae(w,C[2]),(!O||T&2)&&u(e,"id",C[1])},i(C){O||(E(k,C),O=!0)},o(C){j(k,C),O=!1},d(C){C&&M(e),k&&k.d(C),D=!1,$()}}}function Vm(r,e,t){let{$$slots:s={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function f(d){Ts.call(this,r,d)}return r.$$set=d=>{"title"in d&&t(0,i=d.title),"id"in d&&t(1,o=d.id),"pButton"in d&&t(2,l=d.pButton),"sButton"in d&&t(3,a=d.sButton),"$$scope"in d&&t(4,n=d.$$scope)},[i,o,l,a,n,s,f]}class zm extends Te{constructor(e){super(),De(this,e,Vm,Wm,$e,{title:0,id:1,pButton:2,sButton:3})}}function Gm(r){let e,t,s;return{c(){e=h("div"),t=h("div"),t.innerHTML=`<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try
        again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>`,u(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","70vh"),u(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","100vh")},m(n,i){P(n,e,i),c(e,t)},p:ee,i(n){n&&(s||je(()=>{s=Ke(t,Ze,{duration:500}),s.start()}))},o:ee,d(n){n&&M(e)}}}class _i extends Te{constructor(e){super(),De(this,e,null,Gm,$e,{})}}function Jm(r){let e,t,s,n,i,o;const l=r[3].default,a=As(l,r,r[2],null);return{c(){e=h("div"),t=h("label"),s=x(r[0]),n=v(),i=h("div"),a&&a.c(),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",r[1]),u(i,"class","col-sm-8 col-md-9"),u(e,"class","mb-4 row")},m(f,d){P(f,e,d),c(e,t),c(t,s),c(e,n),c(e,i),a&&a.m(i,null),o=!0},p(f,[d]){(!o||d&1)&&ae(s,f[0]),(!o||d&2)&&u(t,"for",f[1]),a&&a.p&&(!o||d&4)&&Ls(a,l,f,f[2],o?Is(l,f[2],d,null):Ys(f[2]),null)},i(f){o||(E(a,f),o=!0)},o(f){j(a,f),o=!1},d(f){f&&M(e),a&&a.d(f)}}}function Km(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return r.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,n=l.$$scope)},[i,o,n,s]}class ke extends Te{constructor(e){super(),De(this,e,Km,Jm,$e,{label:0,id:1})}}function Zm(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te;return{c(){e=h("div"),t=h("div"),s=h("h1"),s.textContent="Book Deletion",n=v(),i=h("div"),i.innerHTML='<p class="my-0">This action will delete all records of this book in the database including book details, library holdings, and reports.</p> <div class="text-secondary">If you want to hide the book from students, you can make the book <b>private</b></div>',o=v(),l=h("div"),a=x("Please enter your password and name of the book "),f=h("b"),d=x('"'),_=x(r[0]),m=x('"'),g=x(" to confirm deletion."),p=v(),b=h("div"),y=h("label"),y.textContent="Password:",w=v(),O=h("div"),D=h("input"),S=v(),k=h("div"),k.textContent="Wrong Password",C=v(),T=h("div"),L=h("label"),L.textContent="Book Name:",N=v(),Y=h("div"),I=h("input"),A=v(),G=h("div"),G.textContent="Book Name does not match",q=v(),U=h("div"),F=h("button"),F.textContent="Confirm",J=v(),ne=h("button"),ne.textContent="Cancel",u(s,"class","text-danger"),u(i,"class","text-center mb-4"),u(l,"class","mb-4"),u(y,"class","col-4 col-form-label"),u(y,"for","password"),u(D,"class",$="form-control "+r[3]),u(D,"type","password"),u(D,"id","password"),u(k,"class","invalid-feedback"),u(O,"class","col-8 "),u(b,"class","mb-4 row col-4"),u(L,"class","col-4 col-form-label"),u(L,"for","bookname"),u(I,"class",V="form-control "+r[4]),u(I,"type","text"),u(I,"id","bookname"),u(G,"class","invalid-feedback"),u(Y,"class","col-8 "),u(T,"class","mb-4 row col-4"),u(F,"class","btn btn-danger"),u(ne,"class","btn btn-outline-success"),u(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","90vh"),u(e,"class","position-fixed top-50 start-50 translate-middle z-2 hid"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","102vh"),Ge(e,"padding","0")},m(X,ce){P(X,e,ce),c(e,t),c(t,s),c(t,n),c(t,i),c(t,o),c(t,l),c(l,a),c(l,f),c(f,d),c(f,_),c(f,m),c(l,g),c(t,p),c(t,b),c(b,y),c(b,w),c(b,O),c(O,D),B(D,r[1]),c(O,S),c(O,k),c(t,C),c(t,T),c(T,L),c(T,N),c(T,Y),c(Y,I),B(I,r[2]),c(Y,A),c(Y,G),c(t,q),c(t,U),c(U,F),c(U,J),c(U,ne),W=!0,z||(te=[H(D,"keyup",r[8]),H(D,"input",r[9]),H(I,"keyup",r[10]),H(I,"input",r[11]),H(F,"click",r[6]),H(ne,"click",r[12])],z=!0)},p(X,[ce]){(!W||ce&1)&&ae(_,X[0]),(!W||ce&8&&$!==($="form-control "+X[3]))&&u(D,"class",$),ce&2&&D.value!==X[1]&&B(D,X[1]),(!W||ce&16&&V!==(V="form-control "+X[4]))&&u(I,"class",V),ce&4&&I.value!==X[2]&&B(I,X[2])},i(X){W||(X&&je(()=>{W&&(R||(R=Tt(e,Ot,{duration:400,y:-900},!0)),R.run(1))}),W=!0)},o(X){X&&(R||(R=Tt(e,Ot,{duration:400,y:-900},!1)),R.run(0)),W=!1},d(X){X&&M(e),X&&R&&R.end(),z=!1,ge(te)}}}function Qm(r,e,t){let{bookTitle:s}=e,{bookID:n}=e;const i=Dl();let o,l,a,f;async function d(){l!=s&&t(4,f="is-invalid");const{data:y,error:w}=await re.from("user_level").select("user_id").eq("user_id",localStorage.getItem("user_id")).eq("password",o).single();if(w&&(console.error(w),t(3,a="is-invalid")),a||f)return;const{error:O}=await re.rpc("delete_book",{id:n});if(O)console.error(O),alert(`Failed to delete: ${O.message}`);else{const{error:D}=await re.from("reports").insert({report_type:"Delete",report_details:`All data of ${s} have been deleted`,staff_id:localStorage.getItem("user_id")});D&&console.error(D),alert(`Successfully deleted all data of ${s}`)}}const _=()=>t(3,a="");function m(){o=this.value,t(1,o)}const g=()=>t(4,f="");function p(){l=this.value,t(2,l)}const b=()=>i("cancel");return r.$$set=y=>{"bookTitle"in y&&t(0,s=y.bookTitle),"bookID"in y&&t(7,n=y.bookID)},[s,o,l,a,f,i,d,n,_,m,g,p,b]}class xm extends Te{constructor(e){super(),De(this,e,Qm,Zm,$e,{bookTitle:0,bookID:7})}}function oo(r,e,t){const s=r.slice();return s[34]=e[t][0],s[35]=e[t][1],s}function lo(r,e,t){const s=r.slice();return s[34]=e[t][0],s[38]=e[t][1],s}function ao(r){let e,t;return e=new _i({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Xm(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function ep(r){let e,t,s,n,i,o=r[3].isbn+"",l,a,f,d,_,m,g=r[3].title+"",p,b,y,w,O=r[3].description+"",D,$,S,k,C,T,L=r[3].author.name+"",N,Y,I,V,A,G,q,U=r[3].publisher.name+"",F,J,ne,R,W,z,te,X,ce,de,_e=r[3].shelf_number+"",Pe;function me(ve,ye){return ve[10]?rp:tp}let ie=me(r),fe=ie(r),pe=r[1]=="client"&&uo(r),ue=r[1]=="staff"&&co(r),oe=r[4]&&fo(r);return{c(){e=h("div"),t=h("div"),fe.c(),s=v(),n=h("small"),i=x("ISBN: "),l=x(o),a=v(),pe&&pe.c(),f=v(),d=h("div"),_=h("div"),m=h("h1"),p=x(g),b=v(),ue&&ue.c(),y=v(),w=h("p"),D=x(O),$=v(),S=h("p"),k=h("b"),k.textContent="Author:",C=v(),T=h("a"),N=x(L),I=v(),V=h("p"),A=h("b"),A.textContent="Publisher:",G=v(),q=h("a"),F=x(U),ne=v(),R=h("p"),W=h("b"),W.textContent="Category:",z=v(),oe&&oe.c(),te=v(),X=h("p"),ce=h("b"),ce.textContent="Shelf No.:",de=v(),Pe=x(_e),u(n,"class","text-secondary"),u(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),u(m,"id","book-title"),u(m,"class","flex-fill"),u(_,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(w,"id","book-description"),u(T,"href",Y="./#/author/"+r[3].author.author_id),u(q,"href",J="./#/publisher/"+r[3].publisher.publisher_id),u(d,"id","details-container"),u(d,"class","container mt-md-0 mt-3"),u(e,"class","d-md-flex d-block")},m(ve,ye){P(ve,e,ye),c(e,t),fe.m(t,null),c(t,s),c(t,n),c(n,i),c(n,l),c(t,a),pe&&pe.m(t,null),c(e,f),c(e,d),c(d,_),c(_,m),c(m,p),c(_,b),ue&&ue.m(_,null),c(d,y),c(d,w),c(w,D),c(d,$),c(d,S),c(S,k),c(S,C),c(S,T),c(T,N),c(d,I),c(d,V),c(V,A),c(V,G),c(V,q),c(q,F),c(d,ne),c(d,R),c(R,W),c(R,z),oe&&oe.m(R,null),c(d,te),c(d,X),c(X,ce),c(X,de),c(X,Pe)},p(ve,ye){ie===(ie=me(ve))&&fe?fe.p(ve,ye):(fe.d(1),fe=ie(ve),fe&&(fe.c(),fe.m(t,s))),ye[0]&8&&o!==(o=ve[3].isbn+"")&&ae(l,o),ve[1]=="client"?pe?pe.p(ve,ye):(pe=uo(ve),pe.c(),pe.m(t,null)):pe&&(pe.d(1),pe=null),ye[0]&8&&g!==(g=ve[3].title+"")&&ae(p,g),ve[1]=="staff"?ue?ue.p(ve,ye):(ue=co(ve),ue.c(),ue.m(_,null)):ue&&(ue.d(1),ue=null),ye[0]&8&&O!==(O=ve[3].description+"")&&ae(D,O),ye[0]&8&&L!==(L=ve[3].author.name+"")&&ae(N,L),ye[0]&8&&Y!==(Y="./#/author/"+ve[3].author.author_id)&&u(T,"href",Y),ye[0]&8&&U!==(U=ve[3].publisher.name+"")&&ae(F,U),ye[0]&8&&J!==(J="./#/publisher/"+ve[3].publisher.publisher_id)&&u(q,"href",J),ve[4]?oe?oe.p(ve,ye):(oe=fo(ve),oe.c(),oe.m(R,null)):oe&&(oe.d(1),oe=null),ye[0]&8&&_e!==(_e=ve[3].shelf_number+"")&&ae(Pe,_e)},i:ee,o:ee,d(ve){ve&&M(e),fe.d(),pe&&pe.d(),ue&&ue.d(),oe&&oe.d()}}}function tp(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[3].book_id+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[23]),s=!0)},p(i,o){o[0]&8&&!Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[3].book_id+".jpg")&&u(e,"src",t)},d(i){i&&M(e),s=!1,n()}}}function rp(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function uo(r){let e;function t(i,o){return i[7]?op:i[0]?ip:i[8]==0?np:sp}let s=t(r),n=s(r);return{c(){n.c(),e=Je()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&M(e),n.d(i)}}}function sp(r){let e,t,s,n;return{c(){e=h("button"),t=x("Reserve"),e.disabled=r[12],u(e,"class","btn btn-primary w-50")},m(i,o){P(i,e,o),c(e,t),s||(n=H(e,"click",r[16]),s=!0)},p(i,o){o[0]&4096&&(e.disabled=i[12])},d(i){i&&M(e),s=!1,n()}}}function np(r){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,u(e,"class","btn btn-secondary w-50")},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function ip(r){let e,t,s,n,i,o,l;return{c(){e=h("button"),t=h("i"),s=v(),n=x(r[13]),u(t,"class","bi bi-x-circle"),u(e,"class",i="btn "+r[9]+" w-75")},m(a,f){P(a,e,f),c(e,t),c(e,s),c(e,n),o||(l=[H(e,"mouseenter",r[24]),H(e,"mouseleave",r[25]),H(e,"click",r[17])],o=!0)},p(a,f){f[0]&8192&&ae(n,a[13]),f[0]&512&&i!==(i="btn "+a[9]+" w-75")&&u(e,"class",i)},d(a){a&&M(e),o=!1,ge(l)}}}function op(r){let e,t,s,n;return{c(){e=h("button"),t=x("Borrowed (#"),s=x(r[7]),n=x(")"),u(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){P(i,e,o),c(e,t),c(e,s),c(e,n)},p(i,o){o[0]&128&&ae(s,i[7])},d(i){i&&M(e)}}}function co(r){let e,t,s,n,i,o,l,a,f,d;function _(p,b){if(p[3].storage_type=="public")return ap;if(p[3].storage_type=="private")return lp}let m=_(r),g=m&&m(r);return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',n=v(),i=h("span"),i.textContent="|",o=v(),g&&g.c(),l=v(),a=h("button"),a.innerHTML='<i class="bi bi-trash3-fill"></i> <div class="d-none d-sm-inline"></div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-book?id="+r[14]),u(i,"class","mx-2"),u(a,"class","btn btn-outline-danger"),u(a,"title","Delete Permanently"),u(e,"class","d-print-none")},m(p,b){P(p,e,b),c(e,t),c(t,s),c(e,n),c(e,i),c(e,o),g&&g.m(e,null),c(e,l),c(e,a),f||(d=H(a,"click",r[19]),f=!0)},p(p,b){m===(m=_(p))&&g?g.p(p,b):(g&&g.d(1),g=m&&m(p),g&&(g.c(),g.m(e,l)))},d(p){p&&M(e),g&&g.d(),f=!1,d()}}}function lp(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-lock-fill"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to public")},m(n,i){P(n,e,i),t||(s=H(e,"click",r[20]),t=!0)},p:ee,d(n){n&&M(e),t=!1,s()}}}function ap(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-globe-americas"></i>',u(e,"class","btn btn-outline-primary"),u(e,"title","Change to private")},m(n,i){P(n,e,i),t||(s=H(e,"click",r[21]),t=!0)},p:ee,d(n){n&&M(e),t=!1,s()}}}function fo(r){let e,t=Se(Object.entries(r[4])),s=[];for(let n=0;n<t.length;n+=1)s[n]=ho(lo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i[0]&16){t=Se(Object.entries(n[4]));let o;for(o=0;o<t.length;o+=1){const l=lo(n,t,o);s[o]?s[o].p(l,i):(s[o]=ho(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function ho(r){let e,t=r[38].category.name+"",s,n;return{c(){e=h("a"),s=x(t),n=x(`\r
                `),u(e,"href","./#/")},m(i,o){P(i,e,o),c(e,s),P(i,n,o)},p(i,o){o[0]&16&&t!==(t=i[38].category.name+"")&&ae(s,t)},d(i){i&&(M(e),M(n))}}}function _o(r){let e,t;return e=new St({props:{title:"Status",icon:"journal",$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&96|n[1]&1024&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function mo(r){let e;function t(i,o){return i[6].length<=0?cp:up}let s=t(r),n=s(r);return{c(){n.c(),e=Je()},m(i,o){n.m(i,o),P(i,e,o)},p(i,o){s===(s=t(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&M(e),n.d(i)}}}function up(r){let e,t,s,n,i=Se(Object.entries(r[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=po(oo(r,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=v(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();u(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(n,null)},p(l,a){if(a[0]&64){i=Se(Object.entries(l[6]));let f;for(f=0;f<i.length;f+=1){const d=oo(l,i,f);o[f]?o[f].p(d,a):(o[f]=po(d),o[f].c(),o[f].m(n,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&M(e),xe(o,l)}}}function cp(r){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",u(e,"class","text-center my-5")},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function po(r){let e,t,s=r[35].barcode+"",n,i,o,l=r[35].status!="Available"?`${r[35].fname} ${r[35].lname}`:"--",a,f,d,_=r[35].status+"",m,g,p=r[35].status=="Reserved"?`(${r[35].reservation_id})`:r[35].status=="Borrowed"?`(${r[35].borrow_id})`:"",b,y,w,O,D,$,S=r[35].status=="Borrowed"?"Return":"Borrow",k,C,T,L,N;return{c(){e=h("tr"),t=h("td"),n=x(s),i=v(),o=h("td"),a=x(l),f=v(),d=h("td"),m=x(_),g=v(),b=x(p),w=v(),O=h("td"),D=h("a"),$=h("small"),k=x(S),C=v(),T=h("i"),N=v(),u(d,"class",y=r[35].status=="Available"?"text-bg-success":r[35].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),u(T,"class","bi bi-box-arrow-up-right"),u(D,"href",L=r[35].status=="Available"?`./#/borrow?barcode=${r[35].barcode}`:r[35].status=="Reserved"?`./#/borrow?reserve_id=${r[35].reservation_id}`:`./#/return?borrow_id=${r[35].borrow_id}`),u(D,"class","btn btn-outline-primary btn-sm")},m(Y,I){P(Y,e,I),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,m),c(d,g),c(d,b),c(e,w),c(e,O),c(O,D),c(D,$),c($,k),c($,C),c($,T),c(e,N)},p(Y,I){I[0]&64&&s!==(s=Y[35].barcode+"")&&ae(n,s),I[0]&64&&l!==(l=Y[35].status!="Available"?`${Y[35].fname} ${Y[35].lname}`:"--")&&ae(a,l),I[0]&64&&_!==(_=Y[35].status+"")&&ae(m,_),I[0]&64&&p!==(p=Y[35].status=="Reserved"?`(${Y[35].reservation_id})`:Y[35].status=="Borrowed"?`(${Y[35].borrow_id})`:"")&&ae(b,p),I[0]&64&&y!==(y=Y[35].status=="Available"?"text-bg-success":Y[35].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&u(d,"class",y),I[0]&64&&S!==(S=Y[35].status=="Borrowed"?"Return":"Borrow")&&ae(k,S),I[0]&64&&L!==(L=Y[35].status=="Available"?`./#/borrow?barcode=${Y[35].barcode}`:Y[35].status=="Reserved"?`./#/borrow?reserve_id=${Y[35].reservation_id}`:`./#/return?borrow_id=${Y[35].borrow_id}`)&&u(D,"href",L)},d(Y){Y&&M(e)}}}function fp(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p=r[6]&&mo(r);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",s=v(),n=h("div"),i=h("input"),o=v(),l=h("button"),l.textContent="Generate",a=v(),f=h("button"),f.textContent="Add",d=v(),p&&p.c(),_=Je(),u(t,"for","copy"),u(t,"class","form=control col-auto"),u(i,"type","text"),u(i,"class","form-control"),u(i,"id","copy"),u(i,"placeholder","Barcode Number"),u(n,"class","col-4"),u(l,"class","btn btn-outline-primary col-1"),u(f,"class","btn btn-primary col-1"),u(e,"class","row justify-content-center align-items-center my-3 gap-2")},m(b,y){P(b,e,y),c(e,t),c(e,s),c(e,n),c(n,i),B(i,r[5]),c(e,o),c(e,l),c(e,a),c(e,f),P(b,d,y),p&&p.m(b,y),P(b,_,y),m||(g=[H(i,"input",r[26]),H(l,"click",r[18]),H(f,"click",r[15])],m=!0)},p(b,y){y[0]&32&&i.value!==b[5]&&B(i,b[5]),b[6]?p?p.p(b,y):(p=mo(b),p.c(),p.m(_.parentNode,_)):p&&(p.d(1),p=null)},d(b){b&&(M(e),M(d),M(_)),p&&p.d(b),m=!1,ge(g)}}}function bo(r){let e,t;return e=new xm({props:{bookID:r[14],bookTitle:r[3].title}}),e.$on("cancel",r[19]),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&8&&(i.bookTitle=s[3].title),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function dp(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b=r[2]&&ao();n=new tt({props:{text:"Book Details"}});const y=[ep,Xm],w=[];function O(S,k){return S[3]?0:1}o=O(r),l=w[o]=y[o](r);let D=r[1]=="staff"&&_o(r),$=r[11]&&bo(r);return{c(){e=h("main"),b&&b.c(),t=v(),s=h("section"),Q(n.$$.fragment),i=v(),l.c(),a=v(),D&&D.c(),f=v(),d=h("div"),m=v(),$&&$.c(),g=Je(),u(d,"class","my-5"),u(e,"class","container")},m(S,k){P(S,e,k),b&&b.m(e,null),c(e,t),c(e,s),K(n,s,null),c(s,i),w[o].m(s,null),c(e,a),D&&D.m(e,null),c(e,f),c(e,d),P(S,m,k),$&&$.m(S,k),P(S,g,k),p=!0},p(S,k){S[2]?b?k[0]&4&&E(b,1):(b=ao(),b.c(),E(b,1),b.m(e,t)):b&&(Le(),j(b,1,1,()=>{b=null}),Ye());let C=o;o=O(S),o===C?w[o].p(S,k):(Le(),j(w[C],1,1,()=>{w[C]=null}),Ye(),l=w[o],l?l.p(S,k):(l=w[o]=y[o](S),l.c()),E(l,1),l.m(s,null)),S[1]=="staff"?D?(D.p(S,k),k[0]&2&&E(D,1)):(D=_o(S),D.c(),E(D,1),D.m(e,f)):D&&(Le(),j(D,1,1,()=>{D=null}),Ye()),S[11]?$?($.p(S,k),k[0]&2048&&E($,1)):($=bo(S),$.c(),E($,1),$.m(g.parentNode,g)):$&&(Le(),j($,1,1,()=>{$=null}),Ye())},i(S){p||(E(b),E(n.$$.fragment,S),E(l),E(D),S&&(_||je(()=>{_=Ke(e,Ze,{duration:500}),_.start()})),E($),p=!0)},o(S){j(b),j(n.$$.fragment,S),j(l),j(D),j($),p=!1},d(S){S&&(M(e),M(m),M(g)),b&&b.d(),Z(n),w[o].d(),D&&D.d(),$&&$.d(S)}}}function go(){return 3e6+Math.floor(Math.random()*9e3)}function vo(){return"1000"+Math.floor(Math.random()*9e3)}function hp(r,e,t){let s,n;xt.subscribe(R=>t(1,n=R));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,f,d;async function _(){const{data:R,error:W}=await re.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(R[0]),t(3,f=R[0]),R.length==0&&t(2,a=!0),n=="client"&&f.storage_type=="private"&&Xt("/invalid-link");const{data:z,error:te}=await re.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",z),te&&console.error(te),z.length==0?(t(4,d={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",d)):t(4,d=z)}Dt(_);let m="";async function g(){const{data:R,error:W}=await re.rpc("get_holdings",{bookid:l});W&&console.error(W),console.table(R),t(6,b=R)}async function p(){if(!m.startsWith("1000")||m.length!=8||isNaN(Number(m))){alert("Invalid format");return}const{data:R}=await re.from("library_holdings").select().eq("barcode",m);if(R.length!=0)return;const{error:W}=await re.from("library_holdings").insert({book_id:l,barcode:m});if(W){console.error(W),alert(W.message);return}t(5,m="")}let b;n=="staff"&&(g(),re.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},g).subscribe());let y,w,O=0,D="btn-secondary";n=="client"&&(k(),w||($(),S()),re.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},()=>{t(7,w=""),k(),w||($(),S())}).subscribe());async function $(){const{data:R,error:W}=await re.rpc("isreserved",{bookid:l,studid:i});t(0,y=R)}async function S(){const{data:R,error:W}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,O=R.length)}async function k(){const{data:R,error:W}=await re.rpc("isborrowed",{bookid:l,studid:i});t(7,w=R)}async function C(){t(12,q=!0);const{data:R,error:W}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(W){console.error(W),t(12,q=!1);return}const{error:z}=await re.from("book_reservation").insert({reservation_id:await L(),stud_id:i,holding_id:R.holding_id});if(z){console.error(z),t(12,q=!1);return}const{data:te,error:X}=await re.from("library_holdings").update({status:"Reserved"}).eq("barcode",R.barcode).select("holding_id").single();if(X){console.error(X),t(12,q=!1);return}t(12,q=!1),$()}async function T(){const{data:R,error:W}=await re.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:z}=await re.from("library_holdings").update({status:"Available"}).eq("holding_id",R.holding_id);!W||!z||(console.error(W),console.error(z))}async function L(){let R=go();const{data:W,error:z}=await re.from("book_reservation").select().eq("reservation_id",R);return console.log(W),W.length!=0&&(R=go(),console.log("exists")),console.log(R),R}async function N(){let R=vo();const{data:W,error:z}=await re.from("book_borrow").select().eq("borrow_id",R);console.log(W),W.length!=0&&(R=vo(),console.log("exists")),t(5,m=R)}let Y=!1,I=!1;function V(){t(11,I=!I)}async function A(){const{data:R,error:W}=await re.from("books").update({storage_type:"public"}).eq("book_id",l);if(W){alert(W);return}t(3,f.storage_type="public",f),t(3,f)}async function G(){const{data:R,error:W}=await re.from("books").update({storage_type:"private"}).eq("book_id",l);if(W){alert(W);return}t(3,f.storage_type="private",f),t(3,f)}let q=!1;const U=()=>t(10,Y=!0),F=()=>{t(13,s="Cancel Reservation"),t(9,D="btn-danger")},J=()=>{t(13,s=`Reserved (#${y})`),t(9,D="btn-secondary")};function ne(){m=this.value,t(5,m)}return r.$$set=R=>{"params"in R&&t(22,o=R.params)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(13,s=`Reserved (${y})`)},[y,n,a,f,d,m,b,w,O,D,Y,I,q,s,l,p,C,T,N,V,A,G,o,U,F,J,ne]}class Na extends Te{constructor(e){super(),De(this,e,hp,dp,$e,{params:22},null,[-1,-1])}}function wo(r,e,t){const s=r.slice();return s[35]=e[t][0],s[36]=e[t][1],s}function yo(r,e,t){const s=r.slice();return s[35]=e[t][0],s[40]=e[t][1],s}function ko(r,e,t){const s=r.slice();return s[35]=e[t][0],s[44]=e[t][1],s}function _p(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[4]),t||(s=H(e,"input",r[18]),t=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&B(e,n[4])},d(n){n&&M(e),t=!1,s()}}}function mp(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[5]),t||(s=H(e,"input",r[19]),t=!0)},p(n,i){i[0]&32&&B(e,n[5])},d(n){n&&M(e),t=!1,s()}}}function pp(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[21](e),t||(s=H(e,"change",r[20]),t=!0)},p:ee,d(n){n&&M(e),r[21](null),t=!1,s()}}}function bp(r){let e,t,s,n,i,o,l,a;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=v(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+r[11]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){P(f,e,d),B(e,r[6]),P(f,s,d),P(f,n,d),P(f,i,d),P(f,o,d),l||(a=[H(e,"input",r[23]),H(e,"keyup",r[24])],l=!0)},p(f,d){d[0]&2048&&t!==(t="form-control "+f[11])&&u(e,"class",t),d[0]&64&&e.value!==f[6]&&B(e,f[6])},d(f){f&&(M(e),M(s),M(n),M(i),M(o)),l=!1,ge(a)}}}function gp(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+r[12]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[7]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[25]),H(e,"keyup",r[26])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&u(e,"class",t),a[0]&128&&e.value!==l[7]&&B(e,l[7])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function vp(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+r[13]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[8]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[27]),H(e,"keyup",r[28])],i=!0)},p(l,a){a[0]&8192&&t!==(t="form-control "+l[13])&&u(e,"class",t),a[0]&256&&e.value!==l[8]&&B(e,l[8])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function wp(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),u(e,"min","0"),u(e,"max","6"),e.required=!0},m(n,i){P(n,e,i),B(e,r[9]),t||(s=H(e,"input",r[29]),t=!0)},p(n,i){i[0]&512&&er(e.value)!==n[9]&&B(e,n[9])},d(n){n&&M(e),t=!1,s()}}}function yp(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[10]),t||(s=H(e,"input",r[30]),t=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&B(e,n[10])},d(n){n&&M(e),t=!1,s()}}}function kp(r){return{c:ee,m:ee,p:ee,d:ee}}function $p(r){let e,t=Se(Object.entries(r[43])),s=[];for(let n=0;n<t.length;n+=1)s[n]=$o(ko(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","authors")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){t=Se(Object.entries(n[43]));let o;for(o=0;o<t.length;o+=1){const l=ko(n,t,o);s[o]?s[o].p(l,i):(s[o]=$o(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function $o(r){let e;return{c(){e=h("option"),e.__value=r[44].name,B(e,e.__value)},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Sp(r){return{c:ee,m:ee,p:ee,d:ee}}function Dp(r){return{c:ee,m:ee,p:ee,d:ee}}function Tp(r){let e,t=Se(Object.entries(r[39])),s=[];for(let n=0;n<t.length;n+=1)s[n]=So(yo(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","publishers")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){t=Se(Object.entries(n[39]));let o;for(o=0;o<t.length;o+=1){const l=yo(n,t,o);s[o]?s[o].p(l,i):(s[o]=So(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function So(r){let e;return{c(){e=h("option"),e.__value=r[40].name,B(e,e.__value)},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Op(r){return{c:ee,m:ee,p:ee,d:ee}}function Cp(r){return{c:ee,m:ee,p:ee,d:ee}}function Mp(r){let e,t=Se(Object.entries(r[34])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Do(wo(r,t,n));return{c(){e=h("datalist");for(let n=0;n<s.length;n+=1)s[n].c();u(e,"id","categories")},m(n,i){P(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){t=Se(Object.entries(n[34]));let o;for(o=0;o<t.length;o+=1){const l=wo(n,t,o);s[o]?s[o].p(l,i):(s[o]=Do(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function Do(r){let e;return{c(){e=h("option"),e.__value=r[36].name,B(e,e.__value)},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Pp(r){return{c:ee,m:ee,p:ee,d:ee}}function Ep(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e,Pe,me;t=new tt({props:{text:"Add Book"}}),l=new ke({props:{label:"Book Title:",id:"book-name",$$slots:{default:[_p]},$$scope:{ctx:r}}}),f=new ke({props:{label:"Book Description:",id:"book-description",$$slots:{default:[mp]},$$scope:{ctx:r}}}),_=new ke({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[pp]},$$scope:{ctx:r}}}),T=new ke({props:{label:"Category:",id:"book-category",$$slots:{default:[bp]},$$scope:{ctx:r}}}),N=new ke({props:{label:"Author: ",id:"book-author",$$slots:{default:[gp]},$$scope:{ctx:r}}}),I=new ke({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[vp]},$$scope:{ctx:r}}}),A=new ke({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[wp]},$$scope:{ctx:r}}}),q=new ke({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[yp]},$$scope:{ctx:r}}});let ie={ctx:r,current:null,token:null,hasCatch:!1,pending:Sp,then:$p,catch:kp,value:43};sn(r[15](),ie);let fe={ctx:r,current:null,token:null,hasCatch:!1,pending:Op,then:Tp,catch:Dp,value:39};sn(r[16](),fe);let pe={ctx:r,current:null,token:null,hasCatch:!1,pending:Pp,then:Mp,catch:Cp,value:34};return sn(r[17](),pe),{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=v(),Q(f.$$.fragment),d=v(),Q(_.$$.fragment),m=v(),g=h("div"),p=h("label"),p.textContent="Preview:",b=v(),y=h("div"),w=h("img"),D=v(),$=h("button"),$.textContent="Remove",k=v(),C=h("div"),Q(T.$$.fragment),L=v(),Q(N.$$.fragment),Y=v(),Q(I.$$.fragment),V=v(),Q(A.$$.fragment),G=v(),Q(q.$$.fragment),U=v(),F=h("div"),J=h("button"),J.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',ne=v(),R=h("button"),R.innerHTML='<i class="bi bi-plus-circle"></i> Reset',W=v(),z=h("a"),z.innerHTML='<button class="btn btn-danger" type="button"><i class="bi bi-x-circle"></i> Cancel</button>',te=v(),ie.block.c(),X=v(),fe.block.c(),ce=v(),pe.block.c(),u(p,"for","cover-preview"),u(p,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(w.src,O=r[3])||u(w,"src",O),u(w,"alt","Preview"),u(w,"id","cover-preview"),u(w,"height","150"),u($,"class","btn btn-sm btn-danger"),u(y,"class","col-sm-8 col-md-9"),u(y,"id","preview-div"),u(g,"class",S="my-3 row "+r[2]),u(o,"class","col-sm-12 col-lg-6"),u(C,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(J,"class","btn btn-success"),u(J,"type","submit"),u(R,"class","btn btn-secondary"),u(R,"type","reset"),u(z,"href","./#/"),u(F,"class","my-3"),u(e,"class","my-1 container")},m(ue,oe){P(ue,e,oe),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),K(l,o,null),c(o,a),K(f,o,null),c(o,d),K(_,o,null),c(o,m),c(o,g),c(g,p),c(g,b),c(g,y),c(y,w),c(y,D),c(y,$),c(i,k),c(i,C),K(T,C,null),c(C,L),K(N,C,null),c(C,Y),K(I,C,null),c(C,V),K(A,C,null),c(C,G),K(q,C,null),c(n,U),c(n,F),c(F,J),c(F,ne),c(F,R),c(F,W),c(F,z),c(e,te),ie.block.m(e,ie.anchor=null),ie.mount=()=>e,ie.anchor=X,c(e,X),fe.block.m(e,fe.anchor=null),fe.mount=()=>e,fe.anchor=ce,c(e,ce),pe.block.m(e,pe.anchor=null),pe.mount=()=>e,pe.anchor=null,_e=!0,Pe||(me=[H($,"click",r[22]),H(R,"click",r[31]),H(n,"submit",dt(r[14]))],Pe=!0)},p(ue,oe){r=ue;const ve={};oe[0]&16|oe[1]&65536&&(ve.$$scope={dirty:oe,ctx:r}),l.$set(ve);const ye={};oe[0]&32|oe[1]&65536&&(ye.$$scope={dirty:oe,ctx:r}),f.$set(ye);const rr={};oe[0]&3|oe[1]&65536&&(rr.$$scope={dirty:oe,ctx:r}),_.$set(rr),(!_e||oe[0]&8&&!Ne(w.src,O=r[3]))&&u(w,"src",O),(!_e||oe[0]&4&&S!==(S="my-3 row "+r[2]))&&u(g,"class",S);const kt={};oe[0]&2112|oe[1]&65536&&(kt.$$scope={dirty:oe,ctx:r}),T.$set(kt);const Ie={};oe[0]&4224|oe[1]&65536&&(Ie.$$scope={dirty:oe,ctx:r}),N.$set(Ie);const Ve={};oe[0]&8448|oe[1]&65536&&(Ve.$$scope={dirty:oe,ctx:r}),I.$set(Ve);const ot={};oe[0]&512|oe[1]&65536&&(ot.$$scope={dirty:oe,ctx:r}),A.$set(ot);const Wt={};oe[0]&1024|oe[1]&65536&&(Wt.$$scope={dirty:oe,ctx:r}),q.$set(Wt),nn(ie,r,oe),nn(fe,r,oe),nn(pe,r,oe)},i(ue){_e||(E(t.$$.fragment,ue),E(l.$$.fragment,ue),E(f.$$.fragment,ue),E(_.$$.fragment,ue),E(T.$$.fragment,ue),E(N.$$.fragment,ue),E(I.$$.fragment,ue),E(A.$$.fragment,ue),E(q.$$.fragment,ue),ue&&(de||je(()=>{de=Ke(e,Ze,{duration:500}),de.start()})),_e=!0)},o(ue){j(t.$$.fragment,ue),j(l.$$.fragment,ue),j(f.$$.fragment,ue),j(_.$$.fragment,ue),j(T.$$.fragment,ue),j(N.$$.fragment,ue),j(I.$$.fragment,ue),j(A.$$.fragment,ue),j(q.$$.fragment,ue),_e=!1},d(ue){ue&&M(e),Z(t),Z(l),Z(f),Z(_),Z(T),Z(N),Z(I),Z(A),Z(q),ie.block.d(),ie.token=null,ie=null,fe.block.d(),fe.token=null,fe=null,pe.block.d(),pe.token=null,pe=null,Pe=!1,ge(me)}}}function Rp(r,e,t){let s,n,i="d-none",o,l,a,f="",d,_,m,g,p=[],b,y,w;async function O(){const{data:R,error:W}=await re.from("author").select("author_id").eq("name",d).single(),{data:z,error:te}=await re.from("publisher").select("publisher_id").eq("name",_).single();let X=!0;if((W||!R)&&(t(12,y="is-invalid"),X=!1),(te||!z)&&(t(13,w="is-invalid"),X=!1),!await D()){if(p.length!=0)return;t(11,b="is-invalid"),X=!1}if(!X)return;const{data:ce,error:de}=await re.from("books").insert({title:l,description:a,author_id:R.author_id,publisher_id:z.publisher_id,shelf_number:m,isbn:g}).select("book_id").single();if(de){console.error(de),alert(de.message);return}let _e=!0;for(const Pe in p){const{data:me,error:ie}=await re.from("books_category").insert({book_id:ce.book_id,category_id:p[Pe]});ie&&(console.error(ie),_e=!1)}if(alert(`Successfully Added ${l}!`),_e||alert("Had problem while adding categories, Update book later"),s&&s[0]){const{data:Pe,error:me}=await re.storage.from("books").upload(`${ce.book_id}.jpg`,s[0]);me&&console.error(me)}}async function D(){if(f=="")return!1;let R=!0,W=[],z=f.split(",").map(te=>te.trim());for(const te of z){const{data:X,error:ce}=await re.from("category").select("category_id").eq("name",te).single();ce?(R=!1,console.error(ce)):W.push(X.category_id),console.log(R)}return console.log(z,W),p=R?W:[],console.log(R,p),R}async function $(){const{data:R,error:W}=await re.from("author").select("name").order("name",{ascending:!0});return R}async function S(){const{data:R,error:W}=await re.from("publisher").select("name").order("name",{ascending:!0});return R}async function k(){const{data:R,error:W}=await re.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return R}function C(){l=this.value,t(4,l)}function T(){a=this.value,t(5,a)}function L(){s=this.files,t(0,s)}function N(R){it[R?"unshift":"push"](()=>{n=R,t(1,n)})}const Y=()=>{t(1,n.value="",n),t(0,s="")};function I(){f=this.value,t(6,f)}const V=()=>t(11,b="");function A(){d=this.value,t(7,d)}const G=()=>t(12,y="");function q(){_=this.value,t(8,_)}const U=()=>t(13,w="");function F(){m=er(this.value),t(9,m)}function J(){g=this.value,t(10,g)}const ne=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(s&&s[0]){t(2,i="");const R=URL.createObjectURL(s[0]);t(3,o=R)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,_,m,g,b,y,w,O,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne]}class jp extends Te{constructor(e){super(),De(this,e,Rp,Ep,$e,{},null,[-1,-1])}}function To(r,e,t){const s=r.slice();return s[8]=e[t][0],s[9]=e[t][1],s}function Ap(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/"+r[4]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[6]),s=!0)},p:ee,d(i){i&&M(e),s=!1,n()}}}function Ip(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function Lp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Yp(r){let e,t,s,n=r[1].name+"",i,o,l,a,f,d,_,m,g,p=r[1].link+"",b,y,w=r[3]=="staff"&&Np(r);function O(S,k){return S[1].bio==null?Hp:Up}let D=O(r),$=D(r);return{c(){e=h("div"),t=h("div"),s=h("h1"),i=x(n),o=v(),w&&w.c(),l=v(),a=h("p"),$.c(),f=v(),d=h("p"),_=h("b"),_.textContent="Website:",m=v(),g=h("a"),b=x(p),u(s,"class","mb-2 pb-2"),u(t,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(a,"class",""),u(g,"href",y=r[1].link),u(e,"class","container")},m(S,k){P(S,e,k),c(e,t),c(t,s),c(s,i),c(t,o),w&&w.m(t,null),c(e,l),c(e,a),$.m(a,null),c(e,f),c(e,d),c(d,_),c(d,m),c(d,g),c(g,b)},p(S,k){k&2&&n!==(n=S[1].name+"")&&ae(i,n),S[3]=="staff"&&w.p(S,k),D===(D=O(S))&&$?$.p(S,k):($.d(1),$=D(S),$&&($.c(),$.m(a,null))),k&2&&p!==(p=S[1].link+"")&&ae(b,p),k&2&&y!==(y=S[1].link)&&u(g,"href",y)},i:ee,o:ee,d(S){S&&M(e),w&&w.d(),$.d()}}}function Np(r){let e,t,s;return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-author?id="+r[4]),u(e,"class","d-print-none")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p:ee,d(n){n&&M(e)}}}function Up(r){let e=r[1].bio+"",t;return{c(){t=x(e)},m(s,n){P(s,t,n)},p(s,n){n&2&&e!==(e=s[1].bio+"")&&ae(t,e)},d(s){s&&M(t)}}}function Hp(r){let e;return{c(){e=h("span"),e.textContent="No Bio",u(e,"class","text-secondary")},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Fp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function qp(r){let e,t,s=Se(Object.entries(r[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Oo(To(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const f=To(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=Oo(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function Oo(r){let e,t;return e=new Fs({props:{title:r[9].title,id:r[9].book_id,author:r[9].publisher.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.title=s[9].title),n&4&&(i.id=s[9].book_id),n&4&&(i.author=s[9].publisher.name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Bp(r){let e,t,s,n;const i=[qp,Fp],o=[];function l(a,f){return a[2]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function Wp(r){let e,t,s,n,i,o,l,a,f,d,_,m,g;s=new tt({props:{text:"Author Details"}});function p($,S){return $[0]?Ip:Ap}let b=p(r),y=b(r);const w=[Yp,Lp],O=[];function D($,S){return $[1]?0:1}return a=D(r),f=O[a]=w[a](r),_=new St({props:{title:"Books",icon:"journal",$$slots:{default:[Bp]},$$scope:{ctx:r}}}),{c(){e=h("main"),t=h("section"),Q(s.$$.fragment),n=v(),i=h("div"),o=h("div"),y.c(),l=v(),f.c(),d=v(),Q(_.$$.fragment),u(o,"class","d-flex justify-content-center my-1"),u(i,"class","d-md-flex d-block"),u(e,"class","container")},m($,S){P($,e,S),c(e,t),K(s,t,null),c(t,n),c(t,i),c(i,o),y.m(o,null),c(i,l),O[a].m(i,null),c(e,d),K(_,e,null),g=!0},p($,[S]){b===(b=p($))&&y?y.p($,S):(y.d(1),y=b($),y&&(y.c(),y.m(o,null)));let k=a;a=D($),a===k?O[a].p($,S):(Le(),j(O[k],1,1,()=>{O[k]=null}),Ye(),f=O[a],f?f.p($,S):(f=O[a]=w[a]($),f.c()),E(f,1),f.m(i,null));const C={};S&4100&&(C.$$scope={dirty:S,ctx:$}),_.$set(C)},i($){g||(E(s.$$.fragment,$),E(f),E(_.$$.fragment,$),$&&(m||je(()=>{m=Ke(e,Ze,{duration:500}),m.start()})),g=!0)},o($){j(s.$$.fragment,$),j(f),j(_.$$.fragment,$),g=!1},d($){$&&M(e),Z(s),y.d(),O[a].d(),Z(_)}}}function Vp(r,e,t){let s=localStorage.getItem("accType"),{params:n}=e,i=n.authorID,o=!1,l,a;async function f(){const{data:_,error:m}=await re.from("author").select().eq("author_id",i);console.log(_),t(1,l=_[0]);const{data:g,error:p}=await re.from("books").select("book_id, title, publisher(name)").eq("author_id",i);console.log(g),t(2,a=g)}Dt(f);const d=()=>t(0,o=!0);return r.$$set=_=>{"params"in _&&t(5,n=_.params)},[o,l,a,s,i,n,d]}class Ua extends Te{constructor(e){super(),De(this,e,Vp,Wp,$e,{params:5})}}function Co(r,e,t){const s=r.slice();return s[8]=e[t][0],s[9]=e[t][1],s}function zp(r){let e,t,s,n;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/"+r[4]+".jpg")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){P(i,e,o),s||(n=H(e,"error",r[6]),s=!0)},p:ee,d(i){i&&M(e),s=!1,n()}}}function Gp(r){let e,t;return{c(){e=h("img"),u(e,"id","img-cover"),u(e,"class","border p-3"),Ne(e.src,t="./book-cover.png")||u(e,"src",t),u(e,"alt","book cover"),u(e,"height","300"),u(e,"width","300"),Ge(e,"object-fit","contain")},m(s,n){P(s,e,n)},p:ee,d(s){s&&M(e)}}}function Mo(r){let e,t,s,n=r[0].name+"",i,o,l,a,f,d,_,m,g,p=r[0].link+"",b,y,w=r[3]=="staff"&&Jp(r);function O(S,k){return S[0].description?Kp:Zp}let D=O(r),$=D(r);return{c(){e=h("div"),t=h("div"),s=h("h1"),i=x(n),o=v(),w&&w.c(),l=v(),a=h("p"),$.c(),f=v(),d=h("p"),_=h("b"),_.textContent="Website:",m=v(),g=h("a"),b=x(p),u(s,"class","mb-2 pb-2"),u(t,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),u(a,"class",""),u(g,"href",y=r[0].link),u(g,"id","publisher-website"),u(e,"class","container")},m(S,k){P(S,e,k),c(e,t),c(t,s),c(s,i),c(t,o),w&&w.m(t,null),c(e,l),c(e,a),$.m(a,null),c(e,f),c(e,d),c(d,_),c(d,m),c(d,g),c(g,b)},p(S,k){k&1&&n!==(n=S[0].name+"")&&ae(i,n),S[3]=="staff"&&w.p(S,k),D===(D=O(S))&&$?$.p(S,k):($.d(1),$=D(S),$&&($.c(),$.m(a,null))),k&1&&p!==(p=S[0].link+"")&&ae(b,p),k&1&&y!==(y=S[0].link)&&u(g,"href",y)},d(S){S&&M(e),w&&w.d(),$.d()}}}function Jp(r){let e,t,s;return{c(){e=h("div"),t=h("a"),s=h("button"),s.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',u(s,"class","btn btn-outline-primary"),u(t,"href","./#/update-publisher?id="+r[4]),u(e,"class","d-print-none")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p:ee,d(n){n&&M(e)}}}function Kp(r){let e=r[0].description+"",t;return{c(){t=x(e)},m(s,n){P(s,t,n)},p(s,n){n&1&&e!==(e=s[0].description+"")&&ae(t,e)},d(s){s&&M(t)}}}function Zp(r){let e;return{c(){e=h("span"),e.textContent="No Description",u(e,"class","text-secondary")},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Qp(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function xp(r){let e,t,s=Se(Object.entries(r[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Po(Co(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();u(e,"class","row")},m(o,l){P(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){s=Se(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const f=Co(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=Po(f),n[a].c(),E(n[a],1),n[a].m(e,null))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function Po(r){let e,t;return e=new Fs({props:{title:r[9].title,id:r[9].book_id,author:r[9].author.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.title=s[9].title),n&2&&(i.id=s[9].book_id),n&2&&(i.author=s[9].author.name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Xp(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p;t=new tt({props:{text:"Publisher Details"}});function b(k,C){return k[2]?Gp:zp}let y=b(r),w=y(r),O=r[0]&&Mo(r);d=new St({props:{title:"Books",icon:"journal"}});const D=[xp,Qp],$=[];function S(k,C){return k[1]?0:1}return m=S(r),g=$[m]=D[m](r),{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),w.c(),o=v(),O&&O.c(),a=v(),f=h("section"),Q(d.$$.fragment),_=v(),g.c(),u(i,"id","publisher-cover"),u(i,"class","d-flex justify-content-center my-1"),u(n,"class","d-md-flex d-block"),u(e,"class","container"),u(f,"class","container")},m(k,C){P(k,e,C),K(t,e,null),c(e,s),c(e,n),c(n,i),w.m(i,null),c(n,o),O&&O.m(n,null),P(k,a,C),P(k,f,C),K(d,f,null),c(f,_),$[m].m(f,null),p=!0},p(k,[C]){y===(y=b(k))&&w?w.p(k,C):(w.d(1),w=y(k),w&&(w.c(),w.m(i,null))),k[0]?O?O.p(k,C):(O=Mo(k),O.c(),O.m(n,null)):O&&(O.d(1),O=null);let T=m;m=S(k),m===T?$[m].p(k,C):(Le(),j($[T],1,1,()=>{$[T]=null}),Ye(),g=$[m],g?g.p(k,C):(g=$[m]=D[m](k),g.c()),E(g,1),g.m(f,null))},i(k){p||(E(t.$$.fragment,k),k&&(l||je(()=>{l=Ke(e,Ze,{duration:500}),l.start()})),E(d.$$.fragment,k),E(g),p=!0)},o(k){j(t.$$.fragment,k),j(d.$$.fragment,k),j(g),p=!1},d(k){k&&(M(e),M(a),M(f)),Z(t),w.d(),O&&O.d(),Z(d),$[m].d()}}}function eb(r,e,t){let s=localStorage.getItem("accType"),{params:n}=e,i=n.publisherID,o,l;async function a(){const{data:_,error:m}=await re.from("publisher").select().eq("publisher_id",i);console.log(_),t(0,o=_[0]);const{data:g,error:p}=await re.from("books").select("book_id, title, author(name)").eq("publisher_id",i);console.log(g),t(1,l=g)}Dt(a);let f=!1;const d=()=>t(2,f=!0);return r.$$set=_=>{"params"in _&&t(5,n=_.params)},[o,l,f,s,i,n,d]}class Ha extends Te{constructor(e){super(),De(this,e,eb,Xp,$e,{params:5})}}function tb(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),s=h("i"),i=v(),o=h("div"),l=h("h5"),a=h("a"),f=x(r[0]),u(s,"class",n="bi bi-"+r[2]),u(t,"class","d-flex justify-content-center"),Ge(t,"font-size","3em"),u(a,"class","stretched-link svelte-1vxezln"),u(a,"href",d="./#/"+r[1]),u(l,"class","card-title text-center my-2"),u(o,"class","card-body p-1"),u(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(_,m){P(_,e,m),c(e,t),c(t,s),c(e,i),c(e,o),c(o,l),c(l,a),c(a,f)},p(_,[m]){m&4&&n!==(n="bi bi-"+_[2])&&u(s,"class",n),m&1&&ae(f,_[0]),m&2&&d!==(d="./#/"+_[1])&&u(a,"href",d)},i:ee,o:ee,d(_){_&&M(e)}}}function rb(r,e,t){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return r.$$set=o=>{"name"in o&&t(0,s=o.name),"link"in o&&t(1,n=o.link),"icon"in o&&t(2,i=o.icon)},[s,n,i]}class Nt extends Te{constructor(e){super(),De(this,e,rb,tb,$e,{name:0,link:1,icon:2})}}function sb(r){let e,t,s,n,i;return t=new Nt({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new Nt({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),Q(t.$$.fragment),s=v(),Q(n.$$.fragment),u(e,"class","row justify-content-center gap-4")},m(o,l){P(o,e,l),K(t,e,null),c(e,s),K(n,e,null),i=!0},p:ee,i(o){i||(E(t.$$.fragment,o),E(n.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),j(n.$$.fragment,o),i=!1},d(o){o&&M(e),Z(t),Z(n)}}}function nb(r){let e,t,s,n,i,o,l;return t=new Nt({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new Nt({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new Nt({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),{c(){e=h("div"),Q(t.$$.fragment),s=v(),Q(n.$$.fragment),i=v(),Q(o.$$.fragment),u(e,"class","row justify-content-center gap-5")},m(a,f){P(a,e,f),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),l=!0},p:ee,i(a){l||(E(t.$$.fragment,a),E(n.$$.fragment,a),E(o.$$.fragment,a),l=!0)},o(a){j(t.$$.fragment,a),j(n.$$.fragment,a),j(o.$$.fragment,a),l=!1},d(a){a&&M(e),Z(t),Z(n),Z(o)}}}function ib(r){let e,t,s,n,i,o,l,a,f;return t=new Nt({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new Nt({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new Nt({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new Nt({props:{name:"System Log",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),Q(t.$$.fragment),s=v(),Q(n.$$.fragment),i=v(),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),u(e,"class","row justify-content-center gap-5 mb-5")},m(d,_){P(d,e,_),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),f=!0},p:ee,i(d){f||(E(t.$$.fragment,d),E(n.$$.fragment,d),E(o.$$.fragment,d),E(a.$$.fragment,d),f=!0)},o(d){j(t.$$.fragment,d),j(n.$$.fragment,d),j(o.$$.fragment,d),j(a.$$.fragment,d),f=!1},d(d){d&&M(e),Z(t),Z(n),Z(o),Z(a)}}}function ob(r){let e,t,s,n,i,o,l,a;return t=new St({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[sb]},$$scope:{ctx:r}}}),n=new St({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[nb]},$$scope:{ctx:r}}}),o=new St({props:{title:"Reports",icon:"receipt",$$slots:{default:[ib]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),s=v(),Q(n.$$.fragment),i=v(),Q(o.$$.fragment),u(e,"class","container")},m(f,d){P(f,e,d),K(t,e,null),c(e,s),K(n,e,null),c(e,i),K(o,e,null),a=!0},p(f,[d]){const _={};d&1&&(_.$$scope={dirty:d,ctx:f}),t.$set(_);const m={};d&1&&(m.$$scope={dirty:d,ctx:f}),n.$set(m);const g={};d&1&&(g.$$scope={dirty:d,ctx:f}),o.$set(g)},i(f){a||(E(t.$$.fragment,f),E(n.$$.fragment,f),E(o.$$.fragment,f),f&&(l||je(()=>{l=Ke(e,Ze,{duration:500}),l.start()})),a=!0)},o(f){j(t.$$.fragment,f),j(n.$$.fragment,f),j(o.$$.fragment,f),a=!1},d(f){f&&M(e),Z(t),Z(n),Z(o)}}}class lb extends Te{constructor(e){super(),De(this,e,null,ob,$e,{})}}function Eo(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function Ro(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function jo(r,e,t){const s=r.slice();return s[13]=e[t][0],s[14]=e[t][1],s}function Ao(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k;return{c(){e=h("div"),t=h("div"),t.textContent="Category:",s=v(),n=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",f=v(),d=h("div"),d.textContent="Sort by:",_=v(),m=h("div"),g=h("select"),p=h("option"),p.textContent="Total",b=h("option"),b.textContent="Available",y=h("option"),y.textContent="Reserved",w=h("option"),w.textContent="Borrowed",O=v(),D=h("div"),$=h("select"),S=h("option"),S.textContent="Ascending",k=h("option"),k.textContent="Descending",o.__value="all",B(o,o.__value),l.__value="tech",B(l,l.__value),a.__value="all",B(a,a.__value),u(i,"name","category"),u(i,"class","form-select"),p.__value="",B(p,p.__value),b.__value="",B(b,b.__value),y.__value="",B(y,y.__value),w.__value="",B(w,w.__value),u(g,"name","filter"),u(g,"class","form-select"),S.__value="",B(S,S.__value),k.__value="",B(k,k.__value),u($,"name","order"),u($,"class","form-select"),u(e,"class","d-flex justify-content-end align-items-center gap-2")},m(C,T){P(C,e,T),c(e,t),c(e,s),c(e,n),c(n,i),c(i,o),c(i,l),c(i,a),c(e,f),c(e,d),c(e,_),c(e,m),c(m,g),c(g,p),c(g,b),c(g,y),c(g,w),c(e,O),c(e,D),c(D,$),c($,S),c($,k)},d(C){C&&M(e)}}}function ab(r){let e,t;return e=new tr({}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p:ee,i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function ub(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',u(e,"class","d-flex justify-content-center mt-5")},m(t,s){P(t,e,s)},p:ee,i:ee,o:ee,d(t){t&&M(e)}}}function cb(r){let e,t,s=Se(Object.entries(r[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Io(Eo(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Je()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const f=Eo(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=Io(f),n[a].c(),E(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function fb(r){let e,t,s=Se(Object.entries(r[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Lo(Ro(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Je()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const f=Ro(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=Lo(f),n[a].c(),E(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function db(r){let e,t,s=Se(Object.entries(r[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Yo(jo(r,s,o));const i=o=>j(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Je()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);P(o,e,l),t=!0},p(o,l){if(l&4){s=Se(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const f=jo(o,s,a);n[a]?(n[a].p(f,l),E(n[a],1)):(n[a]=Yo(f),n[a].c(),E(n[a],1),n[a].m(e.parentNode,e))}for(Le(),a=s.length;a<n.length;a+=1)i(a);Ye()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)E(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)j(n[l]);t=!1},d(o){o&&M(e),xe(n,o)}}}function Io(r){let e,t;return e=new zl({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Lo(r){let e,t;return e=new Vl({props:{id:r[14].author_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.id=s[14].author_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Yo(r){let e,t;return e=new Fs({props:{title:r[14].title,id:r[14].book_id,author:r[14].author.name}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n&4&&(i.title=s[14].title),n&4&&(i.id=s[14].book_id),n&4&&(i.author=s[14].author.name),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function hb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L;t=new tt({props:{text:"Library Holdings"}});let N=r[3]&&r[3].value=="books"&&Ao();const Y=[db,fb,cb,ub,ab],I=[];function V(A,G){return A[2].books.length>0?0:A[2].author.length>0?1:A[2].publisher.length>0?2:A[0]?4:3}return $=V(r),S=I[$]=Y[$](r),{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",f=h("option"),f.textContent="Publisher",d=v(),_=h("div"),m=h("input"),g=v(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',b=v(),N&&N.c(),y=v(),w=h("hr"),O=v(),D=h("div"),S.c(),l.selected=!0,l.__value="books",B(l,l.__value),a.__value="author",B(a,a.__value),f.__value="publisher",B(f,f.__value),u(o,"name","searchtype"),u(o,"class","form-select"),u(i,"class","col-auto col-md-2 p-0 pe-md-4"),u(m,"class","form-control form-control-lg"),u(m,"type","search"),u(m,"placeholder","Search"),u(m,"name","Search"),u(_,"class","col-6 col-md-6 p-0"),u(p,"class","btn btn-lg btn-success col-auto col-md-1"),u(p,"type","submit"),u(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),u(D,"class","row"),u(e,"class","container")},m(A,G){P(A,e,G),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),c(o,l),c(o,a),c(o,f),r[5](o),c(n,d),c(n,_),c(_,m),B(m,r[1]),c(n,g),c(n,p),c(e,b),N&&N.m(e,null),c(e,y),c(e,w),c(e,O),c(e,D),I[$].m(D,null),C=!0,T||(L=[H(o,"change",r[4]),H(m,"input",r[6]),H(m,"keyup",r[7]),H(p,"click",r[4])],T=!0)},p(A,[G]){G&2&&m.value!==A[1]&&B(m,A[1]),A[3]&&A[3].value=="books"?N||(N=Ao(),N.c(),N.m(e,y)):N&&(N.d(1),N=null);let q=$;$=V(A),$===q?I[$].p(A,G):(Le(),j(I[q],1,1,()=>{I[q]=null}),Ye(),S=I[$],S?S.p(A,G):(S=I[$]=Y[$](A),S.c()),E(S,1),S.m(D,null))},i(A){C||(E(t.$$.fragment,A),E(S),A&&(k||je(()=>{k=Ke(e,Ze,{duration:500}),k.start()})),C=!0)},o(A){j(t.$$.fragment,A),j(S),C=!1},d(A){A&&M(e),Z(t),r[5](null),N&&N.d(),I[$].d(),T=!1,ge(L)}}}function _b(r,e,t){let s;Rr(r,au,y=>t(9,s=y));let n=!0;function i(){switch(s){case"/search/author":t(3,_.value="author",_);break;case"/search/publisher":t(3,_.value="publisher",_);break;default:t(3,_.value="books",_)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",f="",d={books:[],author:[],publisher:[]},_;async function m(){t(0,n=!0),a=_.value,console.log(a);const{data:y,error:w}=await re.from(a).select(o[a]).ilike(l[a],`%${f}%`);w&&console.log(w),t(2,d.books=[],d),t(2,d.author=[],d),t(2,d.publisher=[],d),t(2,d[a]=y,d),t(2,d),t(0,n=!1),console.log(n,d)}Dt(i),Dt(m);function g(y){it[y?"unshift":"push"](()=>{_=y,t(3,_)})}function p(){f=this.value,t(1,f)}return[n,f,d,_,m,g,p,y=>y.key==="Enter"&&m()]}class Mr extends Te{constructor(e){super(),De(this,e,_b,hb,$e,{})}}function No(r){let e,t;return{c(){e=h("div"),t=x(r[6]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(s,n){P(s,e,n),c(e,t)},p(s,n){n[0]&64&&ae(t,s[6])},d(s){s&&M(e)}}}function mb(r){let e;return{c(){e=x("Log In")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function pb(r){let e;return{c(){e=h("div"),u(e,"class","spinner-border spinner-border-sm"),u(e,"role","status")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function bb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e,Pe,me,ie,fe,pe,ue,oe,ve,ye,rr,kt,Ie,Ve,ot,Wt,ut,mi,Yr,pi,Et,bi,gi,dr,Vt,Nr,en,vi,st=r[8]&&Uo(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",s=v(),n=h("form"),st&&st.c(),i=v(),o=h("div"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person-bounding-box"></i>',f=v(),d=h("input"),_=v(),m=h("label"),m.textContent="Student ID",g=v(),p=h("div"),b=h("span"),b.innerHTML='<i class="bi bi-person-vcard-fill"></i>',y=v(),w=h("input"),O=v(),D=h("label"),D.textContent="First Name",$=v(),S=h("div"),k=h("span"),k.innerHTML='<i class="bi bi-person-vcard-fill"></i>',C=v(),T=h("input"),L=v(),N=h("label"),N.textContent="Last Name",Y=v(),I=h("div"),V=h("span"),V.innerHTML='<i class="bi bi-envelope"></i>',A=v(),G=h("input"),q=v(),U=h("label"),U.textContent="Email",F=v(),J=h("div"),ne=h("div"),R=h("span"),R.innerHTML='<i class="bi bi-telephone-fill"></i>',W=v(),z=h("input"),te=v(),X=h("label"),X.textContent="Contact",ce=v(),de=h("div"),_e=h("span"),_e.innerHTML='<i class="bi bi-geo-alt-fill"></i>',Pe=v(),me=h("input"),ie=v(),fe=h("label"),fe.textContent="Address",pe=v(),ue=h("div"),oe=h("span"),oe.innerHTML='<i class="bi bi-calendar"></i>',ve=v(),ye=h("input"),rr=v(),kt=h("label"),kt.textContent="Year Level",Ie=v(),Ve=h("div"),ot=h("span"),ot.innerHTML='<i class="bi bi-mortarboard-fill"></i>',Wt=v(),ut=h("input"),mi=v(),Yr=h("label"),Yr.textContent="Course",pi=v(),Et=h("button"),bi=x("Proceed"),gi=v(),dr=h("a"),dr.textContent="Back",u(t,"class","svelte-1h623o7"),u(a,"class","icon svelte-1h623o7"),u(d,"type","text"),u(d,"id","sID"),u(d,"name","hidden"),d.required=!0,u(d,"minlength","6"),u(d,"maxlength","6"),u(d,"autocomplete","off"),u(d,"class","svelte-1h623o7"),u(m,"for","sID"),u(m,"class","svelte-1h623o7"),u(l,"class","input-box svelte-1h623o7"),u(b,"class","icon svelte-1h623o7"),u(w,"type","text"),u(w,"id","fname"),u(w,"name","hidden"),w.required=!0,u(w,"autocomplete","off"),u(w,"class","svelte-1h623o7"),u(D,"for","fname"),u(D,"class","svelte-1h623o7"),u(p,"class","input-box svelte-1h623o7"),u(k,"class","icon svelte-1h623o7"),u(T,"type","text"),u(T,"id","lname"),u(T,"name","hidden"),T.required=!0,u(T,"autocomplete","off"),u(T,"class","svelte-1h623o7"),u(N,"for","lname"),u(N,"class","svelte-1h623o7"),u(S,"class","input-box svelte-1h623o7"),u(V,"class","icon svelte-1h623o7"),u(G,"type","email"),u(G,"id","email"),u(G,"name","hidden"),G.required=!0,u(G,"autocomplete","off"),u(G,"class","svelte-1h623o7"),u(U,"for","email"),u(U,"class","svelte-1h623o7"),u(I,"class","input-box svelte-1h623o7"),u(o,"class","col-12 col-sm-6"),u(R,"class","icon svelte-1h623o7"),u(z,"type","tel"),u(z,"id","contact"),u(z,"name","hidden"),u(z,"minlength","11"),u(z,"maxlength","11"),z.required=!0,u(z,"autocomplete","off"),u(z,"class","svelte-1h623o7"),u(X,"for","contact"),u(X,"class","svelte-1h623o7"),u(ne,"class","input-box svelte-1h623o7"),u(_e,"class","icon svelte-1h623o7"),u(me,"type","text"),u(me,"id","address"),u(me,"name","hidden"),me.required=!0,u(me,"autocomplete","off"),u(me,"class","svelte-1h623o7"),u(fe,"for","address"),u(fe,"class","svelte-1h623o7"),u(de,"class","input-box svelte-1h623o7"),u(oe,"class","icon svelte-1h623o7"),u(ye,"type","number"),u(ye,"id","yearLevel"),u(ye,"name","hidden"),u(ye,"max","4"),u(ye,"min","1"),ye.required=!0,u(ye,"autocomplete","off"),u(ye,"class","svelte-1h623o7"),u(kt,"for","yearLevel"),u(kt,"class","svelte-1h623o7"),u(ue,"class","input-box svelte-1h623o7"),u(ot,"class","icon svelte-1h623o7"),u(ut,"type","text"),u(ut,"id","course"),u(ut,"name","hidden"),ut.required=!0,u(ut,"autocomplete","off"),u(ut,"class","svelte-1h623o7"),u(Yr,"for","course"),u(Yr,"class","svelte-1h623o7"),u(Ve,"class","input-box svelte-1h623o7"),u(J,"class","col-12 col-sm-6"),u(Et,"type","submit"),u(Et,"class","bton w-50 svelte-1h623o7"),u(Et,"name","hidden"),u(Et,"id","Proceed"),Et.disabled=wb,u(n,"class","row justify-content-center"),u(dr,"href","./#/"),u(dr,"class","mt-2 svelte-1h623o7"),u(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1h623o7"),u(e,"style","height")},m(He,mt){P(He,e,mt),c(e,t),c(e,s),c(e,n),st&&st.m(n,null),c(n,i),c(n,o),c(o,l),c(l,a),c(l,f),c(l,d),B(d,r[12]),c(l,_),c(l,m),c(o,g),c(o,p),c(p,b),c(p,y),c(p,w),B(w,r[13]),c(p,O),c(p,D),c(o,$),c(o,S),c(S,k),c(S,C),c(S,T),B(T,r[14]),c(S,L),c(S,N),c(o,Y),c(o,I),c(I,V),c(I,A),c(I,G),B(G,r[17]),c(I,q),c(I,U),c(n,F),c(n,J),c(J,ne),c(ne,R),c(ne,W),c(ne,z),B(z,r[15]),c(ne,te),c(ne,X),c(J,ce),c(J,de),c(de,_e),c(de,Pe),c(de,me),B(me,r[16]),c(de,ie),c(de,fe),c(J,pe),c(J,ue),c(ue,oe),c(ue,ve),c(ue,ye),B(ye,r[18]),c(ue,rr),c(ue,kt),c(J,Ie),c(J,Ve),c(Ve,ot),c(Ve,Wt),c(Ve,ut),B(ut,r[19]),c(Ve,mi),c(Ve,Yr),c(n,pi),c(n,Et),c(Et,bi),c(e,gi),c(e,dr),Nr=!0,en||(vi=[H(d,"input",r[41]),H(w,"input",r[42]),H(T,"input",r[43]),H(G,"input",r[44]),H(z,"input",r[45]),H(me,"input",r[46]),H(ye,"input",r[47]),H(ut,"input",r[48]),H(Et,"click",yb),H(n,"submit",dt(r[29])),H(dr,"click",r[49])],en=!0)},p(He,mt){He[8]?st?st.p(He,mt):(st=Uo(He),st.c(),st.m(n,i)):st&&(st.d(1),st=null),mt[0]&4096&&d.value!==He[12]&&B(d,He[12]),mt[0]&8192&&w.value!==He[13]&&B(w,He[13]),mt[0]&16384&&T.value!==He[14]&&B(T,He[14]),mt[0]&131072&&G.value!==He[17]&&B(G,He[17]),mt[0]&32768&&B(z,He[15]),mt[0]&65536&&me.value!==He[16]&&B(me,He[16]),mt[0]&262144&&er(ye.value)!==He[18]&&B(ye,He[18]),mt[0]&524288&&ut.value!==He[19]&&B(ut,He[19])},i(He){Nr||(He&&je(()=>{Nr&&(Vt||(Vt=Tt(e,Ot,{duration:600,y:500},!0)),Vt.run(1))}),Nr=!0)},o(He){He&&(Vt||(Vt=Tt(e,Ot,{duration:600,y:500},!1)),Vt.run(0)),Nr=!1},d(He){He&&M(e),st&&st.d(),He&&Vt&&Vt.end(),en=!1,ge(vi)}}}function gb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e,Pe,me=r[7]&&Ho(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",s=v(),me&&me.c(),n=v(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=v(),f=h("input"),d=v(),_=h("label"),_.textContent="Username",m=v(),g=h("div"),p=h("span"),b=h("a"),y=h("i"),O=v(),D=h("input"),S=v(),k=h("label"),k.textContent="Password",C=v(),T=h("div"),L=h("span"),N=h("a"),Y=h("i"),V=v(),A=h("input"),q=v(),U=h("label"),U.textContent="Confirm Password",F=v(),J=h("button"),ne=x("Next"),R=v(),W=h("div"),z=h("p"),te=x("Already have an account? "),X=h("a"),X.textContent="Login",u(t,"class","svelte-1h623o7"),u(l,"class","icon svelte-1h623o7"),u(f,"type","text"),u(f,"id","registerUsername"),f.required=!0,u(f,"autocomplete","off"),u(f,"class","svelte-1h623o7"),u(_,"for","registerUsername"),u(_,"class","svelte-1h623o7"),u(o,"class","input-box svelte-1h623o7"),u(y,"class",w="bi bi-"+(r[21]?"eye-slash":"eye")),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u(p,"class","icon svelte-1h623o7"),u(p,"id","showPass2"),u(D,"minlength","6"),u(D,"type",$=r[21]?"text":"password"),u(D,"id","registerPass"),D.required=!0,u(D,"autocomplete","off"),u(D,"maxlength","16"),u(D,"class","svelte-1h623o7"),u(k,"for","registerPass"),u(k,"class","svelte-1h623o7"),u(g,"class","input-box svelte-1h623o7"),u(Y,"class",I="bi bi-"+(r[22]?"eye-slash":"eye")),u(N,"href","./#/"),u(N,"class","svelte-1h623o7"),u(L,"class","icon svelte-1h623o7"),u(L,"id","showPass3"),u(A,"type",G=r[22]?"text":"password"),u(A,"id","registerConfirm"),A.required=!0,u(A,"autocomplete","off"),u(A,"class","svelte-1h623o7"),u(U,"for","registerConfirm"),u(U,"class","svelte-1h623o7"),u(T,"class","input-box svelte-1h623o7"),J.disabled=r[2],u(J,"type","submit"),u(J,"class","bton svelte-1h623o7"),u(J,"id","registerBtn"),u(X,"href","./#/"),u(X,"class","login-link svelte-1h623o7"),u(W,"class","login-register svelte-1h623o7"),u(e,"class","form-box register svelte-1h623o7")},m(ie,fe){P(ie,e,fe),c(e,t),c(e,s),me&&me.m(e,null),c(e,n),c(e,i),c(i,o),c(o,l),c(o,a),c(o,f),B(f,r[9]),c(o,d),c(o,_),c(i,m),c(i,g),c(g,p),c(p,b),c(b,y),c(g,O),c(g,D),c(g,S),c(g,k),c(i,C),c(i,T),c(T,L),c(L,N),c(N,Y),c(T,V),c(T,A),c(T,q),c(T,U),c(i,F),c(i,J),c(J,ne),c(i,R),c(i,W),c(W,z),c(z,te),c(z,X),de=!0,_e||(Pe=[H(f,"keyup",r[35]),H(f,"input",r[36]),H(b,"click",dt(r[37])),H(D,"keyup",r[38]),H(N,"click",dt(r[39])),H(A,"keyup",r[40]),H(X,"click",r[26]),H(i,"submit",dt(r[28]))],_e=!0)},p(ie,fe){ie[7]?me?me.p(ie,fe):(me=Ho(ie),me.c(),me.m(e,n)):me&&(me.d(1),me=null),fe[0]&512&&f.value!==ie[9]&&B(f,ie[9]),(!de||fe[0]&2097152&&w!==(w="bi bi-"+(ie[21]?"eye-slash":"eye")))&&u(y,"class",w),(!de||fe[0]&2097152&&$!==($=ie[21]?"text":"password"))&&u(D,"type",$),(!de||fe[0]&4194304&&I!==(I="bi bi-"+(ie[22]?"eye-slash":"eye")))&&u(Y,"class",I),(!de||fe[0]&4194304&&G!==(G=ie[22]?"text":"password"))&&u(A,"type",G),(!de||fe[0]&4)&&(J.disabled=ie[2])},i(ie){de||(ie&&je(()=>{de&&(ce||(ce=Tt(e,Ot,{duration:600,y:500},!0)),ce.run(1))}),de=!0)},o(ie){ie&&(ce||(ce=Tt(e,Ot,{duration:600,y:500},!1)),ce.run(0)),de=!1},d(ie){ie&&M(e),me&&me.d(),ie&&ce&&ce.end(),_e=!1,ge(Pe)}}}function Uo(r){let e,t,s;return{c(){e=h("div"),t=h("div"),s=x(r[8]),u(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1h623o7"),u(e,"class","d-flex justify-content-center")},m(n,i){P(n,e,i),c(e,t),c(t,s)},p(n,i){i[0]&256&&ae(s,n[8])},d(n){n&&M(e)}}}function Ho(r){let e,t;return{c(){e=h("div"),t=x(r[7]),u(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(s,n){P(s,e,n),c(e,t)},p(s,n){n[0]&128&&ae(t,s[7])},d(s){s&&M(e)}}}function vb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e=r[6]&&No(r);function Pe(oe,ve){return oe[1]?pb:mb}let me=Pe(r),ie=me(r);const fe=[gb,bb],pe=[];function ue(oe,ve){return oe[0]?1:0}return U=ue(r),F=pe[U]=fe[U](r),{c(){e=h("main"),t=h("div"),s=h("div"),n=h("h2"),n.textContent="Login",i=v(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',f=v(),d=h("input"),_=v(),m=h("label"),m.textContent="Username",g=v(),p=h("div"),b=h("a"),y=h("span"),w=h("i"),D=v(),$=h("input"),k=v(),C=h("label"),C.textContent="Password",T=v(),_e&&_e.c(),L=v(),N=h("button"),ie.c(),Y=v(),I=h("div"),V=h("p"),A=x("Don't have an account? "),G=h("a"),G.textContent="Register",q=v(),F.c(),ne=v(),R=h("div"),W=h("button"),W.textContent="Client",z=v(),te=h("button"),te.textContent="Staff",u(n,"class","svelte-1h623o7"),u(a,"class","icon svelte-1h623o7"),u(d,"type","text"),u(d,"id","usernameLogin"),d.required=!0,u(d,"autocomplete","off"),u(d,"class","svelte-1h623o7"),u(m,"for","usernameLogin"),u(m,"class","svelte-1h623o7"),u(l,"class","input-box svelte-1h623o7"),u(w,"class",O="bi bi-"+(r[20]?"eye-slash":"eye")),u(y,"class","icon svelte-1h623o7"),u(b,"href","./#/"),u(b,"class","svelte-1h623o7"),u($,"minlength","6"),u($,"maxlength","12"),u($,"type",S=r[20]?"text":"password"),u($,"id","passwordLogin"),$.required=!0,u($,"autocomplete","off"),u($,"class","svelte-1h623o7"),u(C,"for","passwordLogin"),u(C,"class","svelte-1h623o7"),u(p,"class","input-box svelte-1h623o7"),N.disabled=r[1],u(N,"type","submit"),u(N,"class","bton svelte-1h623o7"),u(N,"id","loginBton"),u(G,"href","./#/"),u(G,"class","register-link svelte-1h623o7"),u(I,"class","login-register svelte-1h623o7"),u(o,"id","form"),u(s,"class","form-box login svelte-1h623o7"),u(t,"class",J="wrapper "+r[3]+" active-popup "+r[23]+" svelte-1h623o7"),u(W,"class","m-2 btn btn-primary btn-lg"),u(te,"class","m-2 btn btn-danger btn-lg"),u(R,"class","d-none"),Ge(e,"background","url('./login-bg.jpg') no-repeat"),Ge(e,"background-size","cover"),Ge(e,"background-position","center"),Ge(e,"background-position-y","5%"),u(e,"class","svelte-1h623o7")},m(oe,ve){P(oe,e,ve),c(e,t),c(t,s),c(s,n),c(s,i),c(s,o),c(o,l),c(l,a),c(l,f),c(l,d),B(d,r[4]),c(l,_),c(l,m),c(o,g),c(o,p),c(p,b),c(b,y),c(y,w),c(p,D),c(p,$),c(p,k),c(p,C),c(o,T),_e&&_e.m(o,null),c(o,L),c(o,N),ie.m(N,null),c(o,Y),c(o,I),c(I,V),c(V,A),c(V,G),c(t,q),pe[U].m(t,null),c(e,ne),c(e,R),c(R,W),c(R,z),c(R,te),ce||(de=[H(d,"input",r[31]),H(d,"keyup",r[32]),H(b,"click",dt(r[33])),H($,"input",r[34]),H(G,"click",r[26]),H(o,"submit",dt(r[27])),H(W,"click",r[50]),H(te,"click",r[51])],ce=!0)},p(oe,ve){ve[0]&16&&d.value!==oe[4]&&B(d,oe[4]),ve[0]&1048576&&O!==(O="bi bi-"+(oe[20]?"eye-slash":"eye"))&&u(w,"class",O),ve[0]&1048576&&S!==(S=oe[20]?"text":"password")&&u($,"type",S),oe[6]?_e?_e.p(oe,ve):(_e=No(oe),_e.c(),_e.m(o,L)):_e&&(_e.d(1),_e=null),me!==(me=Pe(oe))&&(ie.d(1),ie=me(oe),ie&&(ie.c(),ie.m(N,null))),ve[0]&2&&(N.disabled=oe[1]);let ye=U;U=ue(oe),U===ye?pe[U].p(oe,ve):(Le(),j(pe[ye],1,1,()=>{pe[ye]=null}),Ye(),F=pe[U],F?F.p(oe,ve):(F=pe[U]=fe[U](oe),F.c()),E(F,1),F.m(t,null)),ve[0]&8388616&&J!==(J="wrapper "+oe[3]+" active-popup "+oe[23]+" svelte-1h623o7")&&u(t,"class",J)},i(oe){E(F),oe&&(X||je(()=>{X=Ke(e,Ze,{duration:500}),X.start()}))},o(oe){j(F)},d(oe){oe&&M(e),_e&&_e.d(),ie.d(),pe[U].d(),ce=!1,ge(de)}}}let wb=!1;function pn(r){return r.target.value}const yb=()=>{};function kb(r,e,t){let s;document.querySelector("body").setAttribute("data-bs-theme","dark"),Xt("/");async function n(Ie){const{error:Ve}=await re.from("reports").insert({report_type:"Log In",report_details:`${_} logged in`,staff_id:Ie});Ve&&console.error(Ve),xt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",Ie)}async function i(Ie){const{error:Ve}=await re.from("reports").insert({report_type:"Log In",report_details:`${_} logged in`,staff_id:Ie});Ve&&console.error(Ve),xt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",Ie)}let o=!1,l=!1,a=!0,f="";function d(){t(30,a=!a)}let _,m;async function g(){console.log("CLicked"),t(1,o=!0);const{data:Ie,error:Ve}=await re.from("user_level").select("account_type, user_id").eq("username",_).eq("password",m).maybeSingle();if(t(1,o=!1),Ve){console.error(Ve);return}if(!Ie&&await b(_)){t(6,y="Wrong password.");return}else if(!Ie){t(6,y="User does not exist.");return}Ie.account_type=="student"?n(Ie.user_id):Ie.account_type=="staff"?i(Ie.user_id):console.error(Ie)}let p=!1;async function b(Ie){const{data:Ve,error:ot}=await re.from("user_level").select().eq("username",Ie);return ot&&console.error(ot),Ve.length>0}let y,w,O,D,$,S,k,C,T,L,N,Y,I,V;async function A(){t(2,l=!0);let Ie=await b(D);if(t(2,l=!1),Ie){t(7,w="Username already exists.");return}else if($!=S){t(7,w="Password does not match.");return}t(0,p=!p)}async function G(){const{data:Ie,error:Ve}=await re.from("user_level").select().eq("user_id",k);if(Ie.length!=0){t(8,O="Student ID already exists");return}const{error:ot}=await re.rpc("register_student",{userinput:D,passinput:$,idinput:k,fnameinput:C,lnameinput:T,addressinput:N,contactinput:L,emailinput:Y,yearinput:I,courseinput:V});if(ot){console.error(ot);return}const{error:Wt}=await re.from("reports").insert({report_type:"Register",report_details:`${C} created new account with id #${k}`,stud_id:k});Wt&&console.error(Wt),alert("Successfully created an account! Logging in..."),n(k)}let q=!1,U=!1,F=!1;function J(){_=this.value,t(4,_)}const ne=()=>t(6,y=""),R=()=>t(20,q=!q),W=Ie=>{t(6,y=""),t(5,m=pn(Ie))},z=()=>t(7,w="");function te(){D=this.value,t(9,D)}const X=()=>t(21,U=!U),ce=Ie=>{t(7,w=""),t(10,$=pn(Ie))},de=()=>t(22,F=!F),_e=Ie=>{t(7,w=""),t(11,S=pn(Ie))};function Pe(){k=this.value,t(12,k)}function me(){C=this.value,t(13,C)}function ie(){T=this.value,t(14,T)}function fe(){Y=this.value,t(17,Y)}function pe(){L=this.value,t(15,L)}function ue(){N=this.value,t(16,N)}function oe(){I=er(this.value),t(18,I)}function ve(){V=this.value,t(19,V)}const ye=()=>t(0,p=!p),rr=()=>n("263690"),kt=()=>i("153827");return r.$$.update=()=>{r.$$.dirty[0]&1073741824&&t(3,f=a?"":"active"),r.$$.dirty[0]&1073741825&&t(23,s=p&&!a?"moreinfo":"")},[p,o,l,f,_,m,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,q,U,F,s,n,i,d,g,A,G,a,J,ne,R,W,z,te,X,ce,de,_e,Pe,me,ie,fe,pe,ue,oe,ve,ye,rr,kt]}class $b extends Te{constructor(e){super(),De(this,e,kb,vb,$e,{},null,[-1,-1])}}function Sb(r){let e,t,s,n,i,o,l,a,f,d,_,m;const g=r[4].default,p=As(g,r,r[3],null);return{c(){e=h("div"),t=h("label"),s=x(r[0]),n=v(),i=h("div"),p&&p.c(),o=v(),l=h("div"),a=h("button"),f=x(r[2]),u(t,"class","col-sm-4 col-md-3 col-form-label"),u(t,"for",r[1]),u(i,"class","col-sm-5 col-md-6 col-9"),u(a,"class","w-100 btn btn-outline-primary"),u(l,"class","col-sm-3 col-md-3 col-auto"),u(e,"class","mb-4 row justify-content-center")},m(b,y){P(b,e,y),c(e,t),c(t,s),c(e,n),c(e,i),p&&p.m(i,null),c(e,o),c(e,l),c(l,a),c(a,f),d=!0,_||(m=H(a,"click",r[5]),_=!0)},p(b,[y]){(!d||y&1)&&ae(s,b[0]),(!d||y&2)&&u(t,"for",b[1]),p&&p.p&&(!d||y&8)&&Ls(p,g,b,b[3],d?Is(g,b[3],y,null):Ys(b[3]),null),(!d||y&4)&&ae(f,b[2])},i(b){d||(E(p,b),d=!0)},o(b){j(p,b),d=!1},d(b){b&&M(e),p&&p.d(b),_=!1,m()}}}function Db(r,e,t){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(f){Ts.call(this,r,f)}return r.$$set=f=>{"label"in f&&t(0,i=f.label),"id"in f&&t(1,o=f.id),"button"in f&&t(2,l=f.button),"$$scope"in f&&t(3,n=f.$$scope)},[i,o,l,n,s,a]}class Tb extends Te{constructor(e){super(),De(this,e,Db,Sb,$e,{label:0,id:1,button:2})}}function Ob(r){let e,t,s,n,i,o,l,a;return{c(){e=h("div"),t=h("div"),s=h("b"),n=x(r[0]),i=x(":"),o=v(),l=h("div"),a=x(r[1]),u(t,"class","col-sm-4 col-md-4"),u(l,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(f,d){P(f,e,d),c(e,t),c(t,s),c(s,n),c(s,i),c(e,o),c(e,l),c(l,a)},p(f,[d]){d&1&&ae(n,f[0]),d&2&&ae(a,f[1])},i:ee,o:ee,d(f){f&&M(e)}}}function Cb(r,e,t){let{key:s}=e,{value:n}=e;return r.$$set=i=>{"key"in i&&t(0,s=i.key),"value"in i&&t(1,n=i.value)},[s,n]}class rt extends Te{constructor(e){super(),De(this,e,Cb,Ob,$e,{key:0,value:1})}}function Mb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Cannot Find Reservation",u(e,"class",t="form-control "+r[10]),u(e,"type","number"),u(e,"id","reserve"),u(e,"placeholder","e.g 300xxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[19]),H(e,"keyup",r[20])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&32&&er(e.value)!==l[5]&&B(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Pb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Cannot Find Student",u(e,"class",t="form-control "+r[11]),u(e,"type","text"),u(e,"id","stud-id"),u(e,"placeholder","e.g 2xxxxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[6]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[22]),H(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&64&&e.value!==l[6]&&B(e,l[6])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Eb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Cannot Find Book",u(e,"class",t="form-control "+r[12]),u(e,"type","text"),u(e,"id","book-barcode"),u(e,"placeholder","e.g 1000xxx"),e.disabled=r[3],u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[7]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[24]),H(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&u(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&128&&e.value!==l[7]&&B(e,l[7])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Fo(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S;return n=new rt({props:{key:"Borrow ID",value:r[4]}}),o=new rt({props:{key:"Name",value:r[8]}}),a=new rt({props:{key:"Book Title",value:r[9]+" ("+r[7]+")"}}),d=new rt({props:{key:"Staff Name",value:r[2]+" ("+r[15]+")"}}),m=new rt({props:{key:"Borrow Date",value:se(r[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new rt({props:{key:"Return Due",value:se(r[1]).format("MMMM DD, YYYY")+" ("+r[13]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",s=v(),Q(n.$$.fragment),i=v(),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),Q(p.$$.fragment),b=v(),y=h("div"),w=h("button"),w.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',u(t,"class","py-4 text-center"),u(w,"class","btn btn-success"),u(y,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(k,C){P(k,e,C),c(e,t),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),c(e,f),K(d,e,null),c(e,_),K(m,e,null),c(e,g),K(p,e,null),c(e,b),c(e,y),c(y,w),D=!0,$||(S=H(w,"click",r[18]),$=!0)},p(k,C){const T={};C[0]&16&&(T.value=k[4]),n.$set(T);const L={};C[0]&256&&(L.value=k[8]),o.$set(L);const N={};C[0]&640&&(N.value=k[9]+" ("+k[7]+")"),a.$set(N);const Y={};C[0]&4&&(Y.value=k[2]+" ("+k[15]+")"),d.$set(Y);const I={};C[0]&1&&(I.value=se(k[0]).format("MMMM DD, YYYY - hh:mm a")),m.$set(I);const V={};C[0]&8194&&(V.value=se(k[1]).format("MMMM DD, YYYY")+" ("+k[13]+" days)"),p.$set(V)},i(k){D||(E(n.$$.fragment,k),E(o.$$.fragment,k),E(a.$$.fragment,k),E(d.$$.fragment,k),E(m.$$.fragment,k),E(p.$$.fragment,k),k&&je(()=>{D&&(O||(O=Tt(e,Ot,{duration:400,y:-60},!0)),O.run(1))}),D=!0)},o(k){j(n.$$.fragment,k),j(o.$$.fragment,k),j(a.$$.fragment,k),j(d.$$.fragment,k),j(m.$$.fragment,k),j(p.$$.fragment,k),k&&(O||(O=Tt(e,Ot,{duration:400,y:-60},!1)),O.run(0)),D=!1},d(k){k&&M(e),Z(n),Z(o),Z(a),Z(d),Z(m),Z(p),k&&O&&O.end(),$=!1,S()}}}function Rb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e,Pe;t=new tt({props:{text:"Borrow Book"}}),o=new Tb({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Mb]},$$scope:{ctx:r}}}),o.$on("click",r[21]),d=new ke({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Pb]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Eb]},$$scope:{ctx:r}}});let me=r[3]&&Fo(r);return{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),a=h("hr"),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Borrow Date:",y=v(),w=h("div"),O=h("input"),$=v(),S=h("div"),k=h("button"),k.textContent="Today",C=v(),T=h("div"),L=h("label"),L.textContent="Return Due:",N=v(),Y=h("div"),I=h("input"),A=v(),G=h("div"),q=h("button"),q.textContent=`~${jn} Days`,U=v(),F=h("div"),J=h("button"),ne=h("i"),R=x(" Borrow"),z=v(),te=h("a"),te.innerHTML='<i class="bi bi-x-circle"></i> Cancel',X=v(),me&&me.c(),u(a,"class","mb-4"),u(b,"class","col-sm-4 col-md-3 col-form-label"),u(b,"for","borrow-date"),u(O,"class","form-control"),u(O,"type","datetime-local"),u(O,"id","borrow-date"),u(O,"max",D=se(r[1]).format("YYYY-MM-DD HH:mm")),u(w,"class","col-sm-5 col-md-6 col-7"),u(k,"class","w-100 btn btn-outline-primary"),u(S,"class","col-sm-3 col-md-3 col-auto"),u(p,"class","mb-4 row justify-content-center"),u(L,"class","col-sm-4 col-md-3 col-form-label"),u(L,"for","return-date"),u(I,"class","form-control"),u(I,"type","date"),u(I,"id","return-date"),u(I,"min",V=se(r[0]).format("YYYY-MM-DD")),u(Y,"class","col-sm-5 col-md-6 col-7"),u(q,"class","w-100 btn btn-outline-primary"),u(G,"class","col-sm-3 col-md-3 col-auto"),u(T,"class","mb-4 row justify-content-center"),u(ne,"class","bi bi-receipt"),u(J,"class",W="btn btn-"+(r[3]?"secondary":"success")),u(te,"href","./#/"),u(te,"class","btn btn-danger"),u(F,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),u(n,"class","row justify-content-around"),u(e,"class","container")},m(ie,fe){P(ie,e,fe),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),c(i,a),c(i,f),K(d,i,null),c(i,_),K(m,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,w),c(w,O),B(O,r[0]),c(p,$),c(p,S),c(S,k),c(i,C),c(i,T),c(T,L),c(T,N),c(T,Y),c(Y,I),B(I,r[1]),c(T,A),c(T,G),c(G,q),c(i,U),c(i,F),c(F,J),c(J,ne),c(J,R),c(F,z),c(F,te),c(n,X),me&&me.m(n,null),de=!0,_e||(Pe=[H(O,"input",r[26]),H(k,"click",r[27]),H(I,"input",r[28]),H(q,"click",r[29]),H(J,"click",r[30])],_e=!0)},p(ie,fe){const pe={};fe[0]&1064|fe[1]&8&&(pe.$$scope={dirty:fe,ctx:ie}),o.$set(pe);const ue={};fe[0]&2120|fe[1]&8&&(ue.$$scope={dirty:fe,ctx:ie}),d.$set(ue);const oe={};fe[0]&4232|fe[1]&8&&(oe.$$scope={dirty:fe,ctx:ie}),m.$set(oe),(!de||fe[0]&2&&D!==(D=se(ie[1]).format("YYYY-MM-DD HH:mm")))&&u(O,"max",D),fe[0]&1&&B(O,ie[0]),(!de||fe[0]&1&&V!==(V=se(ie[0]).format("YYYY-MM-DD")))&&u(I,"min",V),fe[0]&2&&B(I,ie[1]),(!de||fe[0]&8&&W!==(W="btn btn-"+(ie[3]?"secondary":"success")))&&u(J,"class",W),ie[3]?me?(me.p(ie,fe),fe[0]&8&&E(me,1)):(me=Fo(ie),me.c(),E(me,1),me.m(n,null)):me&&(Le(),j(me,1,1,()=>{me=null}),Ye())},i(ie){de||(E(t.$$.fragment,ie),E(o.$$.fragment,ie),E(d.$$.fragment,ie),E(m.$$.fragment,ie),E(me),ie&&(ce||je(()=>{ce=Ke(e,Ze,{duration:500}),ce.start()})),de=!0)},o(ie){j(t.$$.fragment,ie),j(o.$$.fragment,ie),j(d.$$.fragment,ie),j(m.$$.fragment,ie),j(me),de=!1},d(ie){ie&&M(e),Z(t),Z(o),Z(d),Z(m),me&&me.d(),_e=!1,ge(Pe)}}}const jn=14;function qo(){return"400"+Math.floor(Math.random()*9e3)}function jb(r,e,t){let s,n;Rr(r,ns,R=>t(31,n=R));const i=se().format("YYYY-MM-DD HH:mm");let o=i,l=se(i).add(jn,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let f,d=!1,_,m,g,p;const b=new URLSearchParams(n);m=b.get("reserve_id")||"",p=b.get("barcode")||"";let y,w,O,D,$;async function S(){d&&t(3,d=!1);const{data:R,error:W}=await re.from("account_details").select("fname, lname").eq("user_id",g).single();W?(t(11,D="is-invalid"),console.error(W)):t(8,y=`${R.fname} ${R.lname}`);const{data:z,error:te}=await re.from("account_details").select("fname, lname").eq("user_id",a).single();te?console.error(te):t(2,f=`${z.fname} ${z.lname}`);const{data:X,error:ce}=await re.from("library_holdings").select("books(title)").eq("barcode",p).single();ce||!X?(t(12,$="is-invalid"),console.error(ce)):t(9,w=X.books.title),(!ce||!W)&&(t(4,_=await T()),t(3,d=!0))}async function k(){const{data:R,error:W}=await re.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();W||!R?(t(10,O="is-invalid"),console.error(W)):(t(6,g=R.stud_id),t(7,p=R.library_holdings.barcode),S())}async function C(){const{data:R,error:W}=await re.from("library_holdings").select("holding_id").eq("barcode",p).single();W&&console.error(W);const z=se(o).format("YYYY-MM-DDTHH:MMZ"),te=se(l).format("YYYY-MM-DDTHH:MMZ"),{error:X}=await re.from("book_borrow").insert({borrow_id:_,stud_id:g,holding_id:R.holding_id,staff_id:a,borrow_date:z,due_date:te});if(X){console.error(X);return}const{data:ce,error:de}=await re.from("book_reservation").update({staff_id:a,release_date:z,active:!1}).eq("active",!0).eq("holding_id",R.holding_id).select();if(console.log("updated Rows:",ce),de){console.error(de);return}const{error:_e}=await re.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",R.holding_id);if(_e){console.error(_e);return}const{error:Pe}=await re.from("reports").insert({report_type:"Borrow Book",report_details:`"${w}" borrowed`,holding_id:R.holding_id,staff_id:a,stud_id:g});Pe&&console.error(Pe),alert(`${y} successfully borrowed ${w}!`),t(3,d=!1),t(5,m=""),t(6,g=""),t(7,p="")}async function T(){let R=qo();const{data:W,error:z}=await re.from("book_borrow").select().eq("borrow_id",R);return console.log(W),W.length!=0&&(R=qo(),console.log("exists")),console.log(R),R}function L(){m=er(this.value),t(5,m)}const N=()=>t(10,O=""),Y=()=>{d||k()};function I(){g=this.value,t(6,g)}const V=()=>t(11,D="");function A(){p=this.value,t(7,p)}const G=()=>t(12,$="");function q(){o=this.value,t(0,o)}const U=()=>t(0,o=i);function F(){l=this.value,t(1,l)}const J=()=>t(1,l=se(o).add(jn,"days").format("YYYY-MM-DD")),ne=()=>{S()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(13,s=se(l).diff(se(o).format("YYYY-MM-DD"),"days"))},[o,l,f,d,_,m,g,p,y,w,O,D,$,s,i,a,S,k,C,L,N,Y,I,V,A,G,q,U,F,J,ne]}class Ab extends Te{constructor(e){super(),De(this,e,jb,Rb,$e,{},null,[-1,-1])}}function Ib(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Borrow ID not found.",u(e,"class",t="form-control "+r[4]),e.disabled=r[5],u(e,"type","text"),u(e,"id","book-id"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[3]),P(l,s,a),P(l,n,a),i||(o=[H(e,"keyup",r[21]),H(e,"input",r[22])],i=!0)},p(l,a){a[0]&16&&t!==(t="form-control "+l[4])&&u(e,"class",t),a[0]&32&&(e.disabled=l[5]),a[0]&8&&e.value!==l[3]&&B(e,l[3])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Lb(r){let e,t,s,n,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",s=h("option"),s.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",B(t,t.__value),s.__value="Good",B(s,s.__value),n.__value="Fair",B(n,n.__value),i.__value="Poor",B(i,i.__value),u(e,"class","form-select"),u(e,"id","book-condition"),r[12]===void 0&&je(()=>r[23].call(e))},m(a,f){P(a,e,f),c(e,t),c(e,s),c(e,n),c(e,i),ks(e,r[12],!0),o||(l=H(e,"change",r[23]),o=!0)},p(a,f){f[0]&4096&&ks(e,a[12])},d(a){a&&M(e),o=!1,l()}}}function Yb(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"rows","3"),u(e,"id","book-note")},m(n,i){P(n,e,i),B(e,r[11]),t||(s=H(e,"input",r[24]),t=!0)},p(n,i){i[0]&2048&&B(e,n[11])},d(n){n&&M(e),t=!1,s()}}}function Bo(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T;n=new rt({props:{key:"Borrow ID",value:r[3]}}),o=new rt({props:{key:"Return ID",value:r[6]}}),a=new rt({props:{key:"Name",value:r[10]+" ("+r[9]+")"}}),d=new rt({props:{key:"Book Title",value:r[7]+" ("+r[8]+")"}}),m=new rt({props:{key:"Condition",value:r[12]}});let L=r[11]&&Wo(r);b=new rt({props:{key:"Received by",value:"Francis James E. Salles ("+r[17]+")"}}),w=new rt({props:{key:"Return Due",value:se(r[1]).format("MMMM DD, YYYY")}}),D=new rt({props:{key:"Return Date",value:se(r[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(r[2]>0?`+${r[2]}`:r[2])+" days)"}});let N=r[2]<0&&Vo(r);function Y(A,G){return A[2]>=0?Ub:Nb}let I=Y(r),V=I(r);return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",s=v(),Q(n.$$.fragment),i=v(),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),L&&L.c(),p=v(),Q(b.$$.fragment),y=v(),Q(w.$$.fragment),O=v(),Q(D.$$.fragment),$=v(),N&&N.c(),S=v(),k=h("div"),V.c(),u(t,"class","py-4 text-center"),u(k,"class","float-end my-2"),u(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(A,G){P(A,e,G),c(e,t),c(e,s),K(n,e,null),c(e,i),K(o,e,null),c(e,l),K(a,e,null),c(e,f),K(d,e,null),c(e,_),K(m,e,null),c(e,g),L&&L.m(e,null),c(e,p),K(b,e,null),c(e,y),K(w,e,null),c(e,O),K(D,e,null),c(e,$),N&&N.m(e,null),c(e,S),c(e,k),V.m(k,null),T=!0},p(A,G){const q={};G[0]&8&&(q.value=A[3]),n.$set(q);const U={};G[0]&64&&(U.value=A[6]),o.$set(U);const F={};G[0]&1536&&(F.value=A[10]+" ("+A[9]+")"),a.$set(F);const J={};G[0]&384&&(J.value=A[7]+" ("+A[8]+")"),d.$set(J);const ne={};G[0]&4096&&(ne.value=A[12]),m.$set(ne),A[11]?L?(L.p(A,G),G[0]&2048&&E(L,1)):(L=Wo(A),L.c(),E(L,1),L.m(e,p)):L&&(Le(),j(L,1,1,()=>{L=null}),Ye());const R={};G[0]&2&&(R.value=se(A[1]).format("MMMM DD, YYYY")),w.$set(R);const W={};G[0]&5&&(W.value=se(A[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(A[2]>0?`+${A[2]}`:A[2])+" days)"),D.$set(W),A[2]<0?N?N.p(A,G):(N=Vo(A),N.c(),N.m(e,S)):N&&(N.d(1),N=null),I===(I=Y(A))&&V?V.p(A,G):(V.d(1),V=I(A),V&&(V.c(),V.m(k,null)))},i(A){T||(E(n.$$.fragment,A),E(o.$$.fragment,A),E(a.$$.fragment,A),E(d.$$.fragment,A),E(m.$$.fragment,A),E(L),E(b.$$.fragment,A),E(w.$$.fragment,A),E(D.$$.fragment,A),A&&je(()=>{T&&(C||(C=Tt(e,Ot,{duration:400,y:-60},!0)),C.run(1))}),T=!0)},o(A){j(n.$$.fragment,A),j(o.$$.fragment,A),j(a.$$.fragment,A),j(d.$$.fragment,A),j(m.$$.fragment,A),j(L),j(b.$$.fragment,A),j(w.$$.fragment,A),j(D.$$.fragment,A),A&&(C||(C=Tt(e,Ot,{duration:400,y:-60},!1)),C.run(0)),T=!1},d(A){A&&M(e),Z(n),Z(o),Z(a),Z(d),Z(m),L&&L.d(),Z(b),Z(w),Z(D),N&&N.d(),V.d(),A&&C&&C.end()}}}function Wo(r){let e,t;return e=new rt({props:{key:"Return Note",value:r[11]}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},p(s,n){const i={};n[0]&2048&&(i.value=s[11]),e.$set(i)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Vo(r){let e,t,s,n,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",s=v(),n=h("div"),i=x(r[15]),o=x(" pesos"),u(t,"class","col-sm-4 col-md-4"),u(n,"class","col-sm-8 col-md-8"),u(e,"class","mb-2 row")},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n),c(n,i),c(n,o)},p(l,a){a[0]&32768&&ae(i,l[15])},d(l){l&&M(e)}}}function Nb(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay and Return Book',u(e,"class","btn btn-danger"),u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#payModal")},m(t,s){P(t,e,s)},p:ee,d(t){t&&M(e)}}}function Ub(r){let e,t,s;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',u(e,"class","btn btn-success")},m(n,i){P(n,e,i),t||(s=H(e,"click",r[19]),t=!0)},p:ee,d(n){n&&M(e),t=!1,s()}}}function Hb(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","ref")},m(n,i){P(n,e,i),B(e,r[13]),t||(s=H(e,"input",r[27]),t=!0)},p(n,i){i[0]&8192&&e.value!==n[13]&&B(e,n[13])},d(n){n&&M(e),t=!1,s()}}}function Fb(r){let e,t,s,n,i,o;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",s=h("option"),s.textContent="GCash",n=h("option"),n.textContent="Bank Transfer",t.__value="cash",B(t,t.__value),s.__value="GCash",B(s,s.__value),n.__value="bank",B(n,n.__value),u(e,"name","payment_method"),u(e,"class","form-select"),u(e,"id","payment_method"),r[14]===void 0&&je(()=>r[28].call(e))},m(l,a){P(l,e,a),c(e,t),c(e,s),c(e,n),ks(e,r[14],!0),i||(o=H(e,"change",r[28]),i=!0)},p(l,a){a[0]&16384&&ks(e,l[14])},d(l){l&&M(e),i=!1,o()}}}function qb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g;return d=new ke({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Hb]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[Fb]},$$scope:{ctx:r}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",s=v(),n=h("h1"),i=x(""),o=x(r[15]),l=v(),a=h("hr"),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),u(n,"class","text-center"),u(a,"class","my-4"),u(e,"class","container row")},m(p,b){P(p,e,b),c(e,t),c(e,s),c(e,n),c(n,i),c(n,o),c(e,l),c(e,a),c(e,f),K(d,e,null),c(e,_),K(m,e,null),g=!0},p(p,b){(!g||b[0]&32768)&&ae(o,p[15]);const y={};b[0]&8192|b[1]&8&&(y.$$scope={dirty:b,ctx:p}),d.$set(y);const w={};b[0]&16384|b[1]&8&&(w.$$scope={dirty:b,ctx:p}),m.$set(w)},i(p){g||(E(d.$$.fragment,p),E(m.$$.fragment,p),g=!0)},o(p){j(d.$$.fragment,p),j(m.$$.fragment,p),g=!1},d(p){p&&M(e),Z(d),Z(m)}}}function Bb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F;t=new tt({props:{text:"Return Book"}}),o=new ke({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Ib]},$$scope:{ctx:r}}}),a=new ke({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Lb]},$$scope:{ctx:r}}}),d=new ke({props:{label:"Note:",id:"book-note",$$slots:{default:[Yb]},$$scope:{ctx:r}}});let J=r[5]&&Bo(r);return A=new zm({props:{title:"Process Payment",id:"payModal",pButton:"Return and Pay",$$slots:{default:[qb]},$$scope:{ctx:r}}}),A.$on("click",r[29]),{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),m=h("div"),g=h("label"),g.textContent="Return Time:",p=v(),b=h("div"),y=h("input"),w=v(),O=h("div"),D=h("button"),D.textContent="Now",$=v(),S=h("div"),k=h("button"),C=h("i"),T=x(" Preview"),N=v(),Y=h("a"),Y.innerHTML='<i class="bi bi-x-circle"></i> Cancel',I=v(),J&&J.c(),V=v(),Q(A.$$.fragment),u(g,"class","col-sm-4 col-md-3 col-form-label"),u(g,"for","return-time"),u(y,"class","form-control"),u(y,"type","datetime-local"),u(y,"id","return-time"),u(b,"class","col-sm-5 col-md-6 col-7"),u(D,"class","w-100 btn btn-outline-primary"),u(O,"class","col-sm-3 col-md-3 col-auto"),u(m,"class","mb-4 row justify-content-center"),u(C,"class","bi bi-receipt"),u(k,"class",L="btn btn-"+(r[5]?"secondary":"success")),u(Y,"href","./#/"),u(Y,"class","btn btn-danger"),u(S,"class","float-end"),u(i,"class","col-sm-12 col-lg-6 mb-sm-4"),u(n,"class","row justify-content-around"),u(e,"class","container")},m(ne,R){P(ne,e,R),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,_),c(i,m),c(m,g),c(m,p),c(m,b),c(b,y),B(y,r[0]),c(m,w),c(m,O),c(O,D),c(i,$),c(i,S),c(S,k),c(k,C),c(k,T),c(S,N),c(S,Y),c(n,I),J&&J.m(n,null),c(e,V),K(A,e,null),q=!0,U||(F=[H(y,"input",r[25]),H(D,"click",r[26]),H(k,"click",r[18])],U=!0)},p(ne,R){const W={};R[0]&56|R[1]&8&&(W.$$scope={dirty:R,ctx:ne}),o.$set(W);const z={};R[0]&4096|R[1]&8&&(z.$$scope={dirty:R,ctx:ne}),a.$set(z);const te={};R[0]&2048|R[1]&8&&(te.$$scope={dirty:R,ctx:ne}),d.$set(te),R[0]&1&&B(y,ne[0]),(!q||R[0]&32&&L!==(L="btn btn-"+(ne[5]?"secondary":"success")))&&u(k,"class",L),ne[5]?J?(J.p(ne,R),R[0]&32&&E(J,1)):(J=Bo(ne),J.c(),E(J,1),J.m(n,null)):J&&(Le(),j(J,1,1,()=>{J=null}),Ye());const X={};R[0]&57344|R[1]&8&&(X.$$scope={dirty:R,ctx:ne}),A.$set(X)},i(ne){q||(E(t.$$.fragment,ne),E(o.$$.fragment,ne),E(a.$$.fragment,ne),E(d.$$.fragment,ne),E(J),E(A.$$.fragment,ne),ne&&(G||je(()=>{G=Ke(e,Ze,{duration:500}),G.start()})),q=!0)},o(ne){j(t.$$.fragment,ne),j(o.$$.fragment,ne),j(a.$$.fragment,ne),j(d.$$.fragment,ne),j(J),j(A.$$.fragment,ne),q=!1},d(ne){ne&&M(e),Z(t),Z(o),Z(a),Z(d),J&&J.d(),Z(A),U=!1,ge(F)}}}function zo(){return"500"+Math.floor(Math.random()*9e3)}function Wb(r,e,t){let s,n,i;Rr(r,ns,R=>t(31,i=R));let o=se().format("YYYY-MM-DD HH:mm"),l=o,a="";const f=localStorage.getItem("user_id");let d,_="";d=new URLSearchParams(i).get("borrow_id")||"";let g=!1,p,b,y,w,O,D="",$;async function S(){if(g){t(5,g=!1);return}const{data:R,error:W}=await re.from("book_borrow").select().eq("borrow_id",d).eq("active",!0).maybeSingle();if(!R){t(4,_="is-invalid");return}const{data:z,error:te}=await re.rpc("getborrowinfo",{borrowid:d});te&&console.error(te),console.table(z);let X=z[0];t(10,O=`${X.fname} ${X.lname}`),t(9,w=X.stud_id),t(7,b=X.title),t(8,y=X.barcode),t(1,a=X.due_date),t(6,p=await Y()),t(5,g=!0)}async function k(){const{data:R,error:W}=await re.from("book_return").insert({return_id:p,borrow_id:d,staff_id:f,note:D,return_date:se(l).format("YYYY-MM-DDTHH:MMZ"),condition:$}).select();if(W)return console.error(W),!1;const{data:z,error:te}=await re.from("book_borrow").update({active:!1}).eq("borrow_id",d).select();console.table(R);const{data:X,error:ce}=await re.from("library_holdings").update({status:"Available",condition:$}).eq("barcode",y).select();if(ce||te)return console.error(ce),console.error(te),!1;const{error:de}=await re.from("reports").insert({report_type:"Book Return",report_details:`"${b}" returned with ${s>0?`+${s}`:s} days on due`,payment_id:L,return_id:p,staff_id:f,stud_id:w});return de&&console.error(de),alert(`Successfully Returned ${b}(${y})`),t(5,g=!1),t(3,d=""),L=null,!0}let C="",T,L=null;async function N(){if(C.trim()==""){alert("Please enter Reference Number");return}if(!await k())return;const{data:R,error:W}=await re.from("payments").insert({return_id:p,ref_num:C,amount:n,method:T}).select("payment_id").single();L=R.payment_id,W&&(console.error(W),alert("Payment Failed"))}async function Y(){let R=zo();const{data:W,error:z}=await re.from("book_return").select().eq("return_id",R);return console.log(W),W.length!=0&&(R=zo(),console.log("exists")),console.log(R),R}const I=()=>t(4,_="");function V(){d=this.value,t(3,d)}function A(){$=ki(this),t(12,$)}function G(){D=this.value,t(11,D)}function q(){l=this.value,t(0,l)}const U=()=>t(0,l=o);function F(){C=this.value,t(13,C)}function J(){T=ki(this),t(14,T)}const ne=()=>{N()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(2,s=se(l).diff(se(a),"days")*-1),r.$$.dirty[0]&4&&t(15,n=s*-50)},[l,a,s,d,_,g,p,b,y,w,O,D,$,C,T,n,o,f,S,k,N,I,V,A,G,q,U,F,J,ne]}class Vb extends Te{constructor(e){super(),De(this,e,Wb,Bb,$e,{},null,[-1,-1])}}function zb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Author Name is Required",u(e,"class",t="form-control "+r[7]),u(e,"type","text"),u(e,"id","author-name"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[4]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[11]),H(e,"keyup",r[12])],i=!0)},p(l,a){a&128&&t!==(t="form-control "+l[7])&&u(e,"class",t),a&16&&e.value!==l[4]&&B(e,l[4])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Gb(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[8]),u(e,"id","author-bio"),u(e,"rows","4")},m(i,o){P(i,e,o),B(e,r[5]),s||(n=[H(e,"input",r[13]),H(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&B(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function Jb(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Author Link is Required",u(e,"type","text"),u(e,"id","author-link"),u(e,"class",t="form-control "+r[9]),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[6]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[15]),H(e,"keyup",r[16])],i=!0)},p(l,a){a&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a&64&&e.value!==l[6]&&B(e,l[6])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Kb(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","author-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[18](e),t||(s=H(e,"change",r[17]),t=!0)},p:ee,d(n){n&&M(e),r[18](null),t=!1,s()}}}function Zb(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G;return t=new tt({props:{text:"Add Author"}}),o=new ke({props:{label:"Author Name:",id:"author-name",$$slots:{default:[zb]},$$scope:{ctx:r}}}),a=new ke({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Gb]},$$scope:{ctx:r}}}),d=new ke({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Jb]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Kb]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Preview:",y=v(),w=h("div"),O=h("img"),$=v(),S=h("button"),S.textContent="Remove",C=v(),T=h("div"),L=h("button"),L.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',N=v(),Y=h("a"),Y.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(O.src,D=r[3])||u(O,"src",D),u(O,"alt","Preview"),u(O,"id","cover-preview"),u(O,"height","150"),u(S,"class","btn btn-sm btn-danger"),u(w,"class","col-sm-8 col-md-9"),u(w,"id","preview-div"),u(p,"class",k="my-3 row "+r[2]),u(L,"class","btn btn-success"),u(Y,"href","./#/"),u(T,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(q,U){P(q,e,U),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,_),K(m,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,w),c(w,O),c(w,$),c(w,S),c(i,C),c(i,T),c(T,L),c(T,N),c(T,Y),V=!0,A||(G=[H(S,"click",r[19]),H(L,"click",r[10])],A=!0)},p(q,[U]){const F={};U&1048720&&(F.$$scope={dirty:U,ctx:q}),o.$set(F);const J={};U&1048864&&(J.$$scope={dirty:U,ctx:q}),a.$set(J);const ne={};U&1049152&&(ne.$$scope={dirty:U,ctx:q}),d.$set(ne);const R={};U&1048579&&(R.$$scope={dirty:U,ctx:q}),m.$set(R),(!V||U&8&&!Ne(O.src,D=q[3]))&&u(O,"src",D),(!V||U&4&&k!==(k="my-3 row "+q[2]))&&u(p,"class",k)},i(q){V||(E(t.$$.fragment,q),E(o.$$.fragment,q),E(a.$$.fragment,q),E(d.$$.fragment,q),E(m.$$.fragment,q),q&&(I||je(()=>{I=Ke(e,Ze,{duration:500}),I.start()})),V=!0)},o(q){j(t.$$.fragment,q),j(o.$$.fragment,q),j(a.$$.fragment,q),j(d.$$.fragment,q),j(m.$$.fragment,q),V=!1},d(q){q&&M(e),Z(t),Z(o),Z(a),Z(d),Z(m),A=!1,ge(G)}}}function Qb(r,e,t){let s,n,i="d-none",o,l,a="",f,d,_,m;async function g(){if(t(7,d=l?"":"is-invalid"),t(9,m=f?"":"is-invalid"),console.log(d,_,m),d||_||m)return;const{data:C,error:T}=await re.from("author").insert({name:l,bio:a,link:f}).select("author_id").single();if(T){console.error(T);return}if(s&&s[0]){const{data:N,error:Y}=await re.storage.from("author").upload(`${C.author_id}.jpg`,s[0]);Y&&console.error(Y)}alert("Successfully Added!"),t(4,l=""),t(5,a=""),t(6,f="");const{error:L}=await re.from("reports").insert({report_type:"Add Author",report_details:`Added ${l}`,staff_id:localStorage.getItem("user_id")});L&&console.error(L)}function p(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const w=()=>t(8,_="");function O(){f=this.value,t(6,f)}const D=()=>t(9,m="");function $(){s=this.files,t(0,s)}function S(C){it[C?"unshift":"push"](()=>{n=C,t(1,n)})}const k=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const C=URL.createObjectURL(s[0]);t(3,o=C)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k]}class xb extends Te{constructor(e){super(),De(this,e,Qb,Zb,$e,{})}}function Xb(r){let e,t,s,n;return{c(){e=h("input"),u(e,"class",t="form-control "+r[7]),u(e,"type","text"),u(e,"id","publisher-name")},m(i,o){P(i,e,o),B(e,r[4]),s||(n=[H(e,"input",r[11]),H(e,"keyup",r[12])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&e.value!==i[4]&&B(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function eg(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[8]),u(e,"id","publisher-description"),u(e,"rows","4")},m(i,o){P(i,e,o),B(e,r[5]),s||(n=[H(e,"input",r[13]),H(e,"keyup",r[14])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&B(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function tg(r){let e,t,s,n;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","publisher-link"),u(e,"class",t="form-control "+r[9])},m(i,o){P(i,e,o),B(e,r[6]),s||(n=[H(e,"input",r[15]),H(e,"keyup",r[16])],s=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&u(e,"class",t),o&64&&e.value!==i[6]&&B(e,i[6])},d(i){i&&M(e),s=!1,ge(n)}}}function rg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","publisher-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[18](e),t||(s=H(e,"change",r[17]),t=!0)},p:ee,d(n){n&&M(e),r[18](null),t=!1,s()}}}function sg(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G;return t=new tt({props:{text:"Add Publisher"}}),o=new ke({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Xb]},$$scope:{ctx:r}}}),a=new ke({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[eg]},$$scope:{ctx:r}}}),d=new ke({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[tg]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[rg]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),p=h("div"),b=h("label"),b.textContent="Preview:",y=v(),w=h("div"),O=h("img"),$=v(),S=h("button"),S.textContent="Remove",C=v(),T=h("div"),L=h("button"),L.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',N=v(),Y=h("a"),Y.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(b,"for","cover-preview"),u(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(O.src,D=r[3])||u(O,"src",D),u(O,"alt","Preview"),u(O,"id","cover-preview"),u(O,"height","150"),u(S,"class","btn btn-sm btn-danger"),u(w,"class","col-sm-8 col-md-9"),u(w,"id","preview-div"),u(p,"class",k="my-3 row "+r[2]),u(L,"class","btn btn-success"),u(Y,"href","./#/"),u(T,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(q,U){P(q,e,U),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,_),K(m,i,null),c(i,g),c(i,p),c(p,b),c(p,y),c(p,w),c(w,O),c(w,$),c(w,S),c(i,C),c(i,T),c(T,L),c(T,N),c(T,Y),V=!0,A||(G=[H(S,"click",r[19]),H(L,"click",r[10])],A=!0)},p(q,[U]){const F={};U&1048720&&(F.$$scope={dirty:U,ctx:q}),o.$set(F);const J={};U&1048864&&(J.$$scope={dirty:U,ctx:q}),a.$set(J);const ne={};U&1049152&&(ne.$$scope={dirty:U,ctx:q}),d.$set(ne);const R={};U&1048579&&(R.$$scope={dirty:U,ctx:q}),m.$set(R),(!V||U&8&&!Ne(O.src,D=q[3]))&&u(O,"src",D),(!V||U&4&&k!==(k="my-3 row "+q[2]))&&u(p,"class",k)},i(q){V||(E(t.$$.fragment,q),E(o.$$.fragment,q),E(a.$$.fragment,q),E(d.$$.fragment,q),E(m.$$.fragment,q),q&&(I||je(()=>{I=Ke(e,Ze,{duration:500}),I.start()})),V=!0)},o(q){j(t.$$.fragment,q),j(o.$$.fragment,q),j(a.$$.fragment,q),j(d.$$.fragment,q),j(m.$$.fragment,q),V=!1},d(q){q&&M(e),Z(t),Z(o),Z(a),Z(d),Z(m),A=!1,ge(G)}}}function ng(r,e,t){let s,n,i="d-none",o,l,a,f,d,_,m;async function g(){if(t(7,d=l?"":"is-invalid"),t(9,m=f?"":"is-invalid"),console.log(d,_,m),d||_||m)return;const{data:C,error:T}=await re.from("publisher").insert({name:l,description:a,link:f}).select("publisher_id").single();if(s&&s[0]){const{data:L,error:N}=await re.storage.from("puublisher").upload(`${C.publisher_id}.jpg`,s[0]);N&&console.error(N)}}function p(){l=this.value,t(4,l)}const b=()=>t(7,d="");function y(){a=this.value,t(5,a)}const w=()=>t(8,_="");function O(){f=this.value,t(6,f)}const D=()=>t(9,m="");function $(){s=this.files,t(0,s)}function S(C){it[C?"unshift":"push"](()=>{n=C,t(1,n)})}const k=()=>{t(1,n.value="",n),t(0,s="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(s&&s[0]){console.log(s),t(2,i="");const C=URL.createObjectURL(s[0]);t(3,o=C)}else t(2,i="d-none")},[s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k]}class ig extends Te{constructor(e){super(),De(this,e,ng,sg,$e,{})}}function Go(r,e,t){const s=r.slice();return s[12]=e[t][0],s[13]=e[t][1],s}function Jo(r){let e,t,s,n,i=r[6].bookscount+"",o,l,a,f,d,_,m=r[6].holdingscount+"",g,p,b,y,w,O,D=r[6].lowest+"",$,S,k,C,T,L,N=r[6].highest+"",Y;return{c(){e=h("div"),t=h("div"),t.textContent="# of Books",s=v(),n=h("h1"),o=x(i),l=v(),a=h("div"),f=h("div"),f.textContent="# of Library Holdings",d=v(),_=h("h1"),g=x(m),p=v(),b=h("div"),y=h("div"),y.textContent="Lowest Book Copies",w=v(),O=h("h1"),$=x(D),S=v(),k=h("div"),C=h("div"),C.textContent="Highest Borrowing Activity",T=v(),L=h("h1"),Y=x(N)},m(I,V){P(I,e,V),c(e,t),c(e,s),c(e,n),c(n,o),P(I,l,V),P(I,a,V),c(a,f),c(a,d),c(a,_),c(_,g),P(I,p,V),P(I,b,V),c(b,y),c(b,w),c(b,O),c(O,$),P(I,S,V),P(I,k,V),c(k,C),c(k,T),c(k,L),c(L,Y)},p(I,V){V&64&&i!==(i=I[6].bookscount+"")&&ae(o,i),V&64&&m!==(m=I[6].holdingscount+"")&&ae(g,m),V&64&&D!==(D=I[6].lowest+"")&&ae($,D),V&64&&N!==(N=I[6].highest+"")&&ae(Y,N)},d(I){I&&(M(e),M(l),M(a),M(p),M(b),M(S),M(k))}}}function Ko(r){let e,t,s,n;return{c(){e=h("b"),e.textContent="Search Query:",t=v(),s=h("span"),n=x(r[3])},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),c(s,n)},p(i,o){o&8&&ae(n,i[3])},d(i){i&&(M(e),M(t),M(s))}}}function Zo(r){let e,t=Se(Object.entries(r[0])),s=[];for(let n=0;n<t.length;n+=1)s[n]=Qo(Go(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Se(Object.entries(n[0]));let o;for(o=0;o<t.length;o+=1){const l=Go(n,t,o);s[o]?s[o].p(l,i):(s[o]=Qo(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function Qo(r){let e,t,s=r[13].isbn+"",n,i,o,l=r[13].title+"",a,f,d,_=r[13].available+"",m,g,p,b=r[13].reserved+"",y,w,O,D=r[13].borrowed+"",$,S,k,C=r[13].total+"",T,L;return{c(){e=h("tr"),t=h("td"),n=x(s),i=v(),o=h("td"),a=x(l),f=v(),d=h("td"),m=x(_),g=v(),p=h("td"),y=x(b),w=v(),O=h("td"),$=x(D),S=v(),k=h("td"),T=x(C),L=v(),u(t,"class","d-md-table-cell  svelte-1cmatm3"),u(o,"class","svelte-1cmatm3"),u(d,"class","svelte-1cmatm3"),u(p,"class","svelte-1cmatm3"),u(O,"class","svelte-1cmatm3"),u(k,"class","fw-bold svelte-1cmatm3")},m(N,Y){P(N,e,Y),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,m),c(e,g),c(e,p),c(p,y),c(e,w),c(e,O),c(O,$),c(e,S),c(e,k),c(k,T),c(e,L)},p(N,Y){Y&1&&s!==(s=N[13].isbn+"")&&ae(n,s),Y&1&&l!==(l=N[13].title+"")&&ae(a,l),Y&1&&_!==(_=N[13].available+"")&&ae(m,_),Y&1&&b!==(b=N[13].reserved+"")&&ae(y,b),Y&1&&D!==(D=N[13].borrowed+"")&&ae($,D),Y&1&&C!==(C=N[13].total+"")&&ae(T,C)},d(N){N&&M(e)}}}function og(r){let e,t,s,n,i,o,l,a,f,d,_,m,g=r[5].toUpperCase()+"",p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W,z,te,X,ce,de,_e,Pe,me;t=new tt({props:{text:"Books Report",print:!0}});let ie=r[6]&&Jo(r),fe=r[3]&&Ko(r),pe=r[0]&&Zo(r);return{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),ie&&ie.c(),i=v(),o=h("div"),l=h("b"),l.textContent="Sorted by:",a=v(),f=h("span"),d=x(r[2]),_=v(),m=h("i"),p=x(g),b=v(),fe&&fe.c(),y=v(),w=h("div"),O=h("div"),O.textContent="Sort by:",D=v(),$=h("div"),S=h("select"),k=h("option"),k.textContent="Title",C=h("option"),C.textContent="Total",T=h("option"),T.textContent="Available",L=h("option"),L.textContent="Reserved",N=h("option"),N.textContent="Borrowed",Y=v(),I=h("div"),V=h("select"),A=h("option"),A.textContent="Ascending",G=h("option"),G.textContent="Descending",q=v(),U=h("form"),F=h("input"),J=v(),ne=h("button"),ne.innerHTML='<i class="bi bi-search"></i>',R=v(),W=h("div"),z=h("table"),te=h("thead"),te.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-md-table-cell svelte-1cmatm3">ISBN</th> <th class="py-3 col-5 svelte-1cmatm3">Book Title</th> <th class="py-3 col-1 text-bg-success svelte-1cmatm3">Available</th> <th class="py-3 col-1 text-bg-secondary svelte-1cmatm3">Reserved</th> <th class="py-3 col-1 text-bg-danger svelte-1cmatm3">Borrowed</th> <th class="py-3 col-1 text-bg-primary svelte-1cmatm3">Total</th></tr>',X=v(),ce=h("tbody"),pe&&pe.c(),u(n,"class","d-flex justify-content-center gap-5 my-3"),u(o,"class","d-none d-print-flex align-items-center gap-2 my-3"),k.__value="Title",B(k,k.__value),C.__value="Total",B(C,C.__value),T.__value="Available",B(T,T.__value),L.__value="Reserved",B(L,L.__value),N.__value="Borrowed",B(N,N.__value),u(S,"name","filter"),u(S,"class","form-select"),A.__value="asc",B(A,A.__value),G.__value="desc",B(G,G.__value),u(V,"name","order"),u(V,"class","form-select"),u(F,"type","text"),u(F,"placeholder","Search title..."),u(F,"name","search"),u(F,"class","form-control"),u(ne,"type","submit"),u(ne,"class","btn btn-outline-success"),u(U,"class","d-flex ms-3"),u(w,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(z,"class","table table-bordered table-striped table-hover text-center align-middle"),u(W,"class",""),u(e,"class","container")},m(ue,oe){P(ue,e,oe),K(t,e,null),c(e,s),c(e,n),ie&&ie.m(n,null),c(e,i),c(e,o),c(o,l),c(o,a),c(o,f),c(f,d),c(f,_),c(f,m),c(m,p),c(o,b),fe&&fe.m(o,null),c(e,y),c(e,w),c(w,O),c(w,D),c(w,$),c($,S),c(S,k),c(S,C),c(S,T),c(S,L),c(S,N),r[8](S),c(w,Y),c(w,I),c(I,V),c(V,A),c(V,G),r[9](V),c(w,q),c(w,U),c(U,F),B(F,r[3]),c(U,J),c(U,ne),c(e,R),c(e,W),c(W,z),c(z,te),c(z,X),c(z,ce),pe&&pe.m(ce,null),_e=!0,Pe||(me=[H(S,"change",r[7]),H(V,"change",r[7]),H(F,"input",r[10]),H(ne,"click",r[7]),H(U,"submit",dt(lg))],Pe=!0)},p(ue,[oe]){ue[6]?ie?ie.p(ue,oe):(ie=Jo(ue),ie.c(),ie.m(n,null)):ie&&(ie.d(1),ie=null),(!_e||oe&4)&&ae(d,ue[2]),(!_e||oe&32)&&g!==(g=ue[5].toUpperCase()+"")&&ae(p,g),ue[3]?fe?fe.p(ue,oe):(fe=Ko(ue),fe.c(),fe.m(o,null)):fe&&(fe.d(1),fe=null),oe&8&&F.value!==ue[3]&&B(F,ue[3]),ue[0]?pe?pe.p(ue,oe):(pe=Zo(ue),pe.c(),pe.m(ce,null)):pe&&(pe.d(1),pe=null)},i(ue){_e||(E(t.$$.fragment,ue),ue&&(de||je(()=>{de=Ke(e,Ze,{duration:500}),de.start()})),_e=!0)},o(ue){j(t.$$.fragment,ue),_e=!1},d(ue){ue&&M(e),Z(t),ie&&ie.d(),fe&&fe.d(),r[8](null),r[9](null),pe&&pe.d(),Pe=!1,ge(me)}}}const lg=()=>{};function ag(r,e,t){let s,n,i="total",o="",l,a="asc",f;async function d(){t(2,i=n.value),t(5,a=l.value);const{data:b,error:y}=await re.rpc("getbooksreport",{sortby:i,search:o});if(y){console.error(y);return}a=="asc"&&b.sort((w,O)=>w[i.toLowerCase()]-O[i.toLowerCase()]),i=="Title"&&a=="asc"&&b.sort(function(w,O){let D=w.title.toUpperCase(),$=O.title.toUpperCase();return D<$?-1:D>$?1:0}),i=="Title"&&a=="desc"&&b.sort(function(w,O){let D=w.title.toUpperCase(),$=O.title.toUpperCase();return D>$?-1:D<$?1:0}),t(0,s=b)}Dt(d),Dt(_);async function _(){const{data:b,error:y}=await re.rpc("booksummary").single();y&&console.error(y),t(6,f=b)}function m(b){it[b?"unshift":"push"](()=>{n=b,t(1,n)})}function g(b){it[b?"unshift":"push"](()=>{l=b,t(4,l)})}function p(){o=this.value,t(3,o)}return[s,n,i,o,l,a,f,d,m,g,p]}class ug extends Te{constructor(e){super(),De(this,e,ag,og,$e,{})}}function xo(r,e,t){const s=r.slice();return s[3]=e[t],s}function Xo(r){let e,t,s,n,i,o=r[1].total+"",l,a,f,d,_,m,g=r[1].count+"",p,b,y,w,O,D,$,S=r[1].average+"",k,C,T,L,N,Y,I,V=r[1].highest+"",A,G,q;return{c(){e=h("div"),t=h("div"),t.textContent="Overall Total Payment",s=v(),n=h("h1"),i=x(""),l=x(o),a=v(),f=h("div"),d=h("div"),d.textContent="Total Late Returns",_=v(),m=h("h1"),p=x(g),b=v(),y=h("div"),w=h("div"),w.textContent="Average Payment",O=v(),D=h("h1"),$=x(""),k=x(S),C=v(),T=h("div"),L=h("div"),L.textContent="Highest Payment",N=v(),Y=h("h1"),I=x(""),A=x(V),G=v(),q=h("small"),q.textContent="some text"},m(U,F){P(U,e,F),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),P(U,a,F),P(U,f,F),c(f,d),c(f,_),c(f,m),c(m,p),P(U,b,F),P(U,y,F),c(y,w),c(y,O),c(y,D),c(D,$),c(D,k),P(U,C,F),P(U,T,F),c(T,L),c(T,N),c(T,Y),c(Y,I),c(Y,A),c(T,G),c(T,q)},p(U,F){F&2&&o!==(o=U[1].total+"")&&ae(l,o),F&2&&g!==(g=U[1].count+"")&&ae(p,g),F&2&&S!==(S=U[1].average+"")&&ae(k,S),F&2&&V!==(V=U[1].highest+"")&&ae(A,V)},d(U){U&&(M(e),M(a),M(f),M(b),M(y),M(C),M(T))}}}function el(r){let e,t=Se(r[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=tl(xo(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Se(n[0]);let o;for(o=0;o<t.length;o+=1){const l=xo(n,t,o);s[o]?s[o].p(l,i):(s[o]=tl(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function tl(r){let e,t,s=r[3].ref_num+"",n,i,o,l=r[3].fname+"",a,f,d=r[3].lname+"",_,m,g,p,b=r[3].amount+"",y,w,O,D=r[3].amount/50+"",$,S;return{c(){e=h("tr"),t=h("td"),n=x(s),i=v(),o=h("td"),a=x(l),f=v(),_=x(d),m=v(),g=h("td"),p=x(""),y=x(b),w=v(),O=h("td"),$=x(D),S=v()},m(k,C){P(k,e,C),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(o,f),c(o,_),c(e,m),c(e,g),c(g,p),c(g,y),c(e,w),c(e,O),c(O,$),c(e,S)},p(k,C){C&1&&s!==(s=k[3].ref_num+"")&&ae(n,s),C&1&&l!==(l=k[3].fname+"")&&ae(a,l),C&1&&d!==(d=k[3].lname+"")&&ae(_,d),C&1&&b!==(b=k[3].amount+"")&&ae(y,b),C&1&&D!==(D=k[3].amount/50+"")&&ae($,D)},d(k){k&&M(e)}}}function cg(r){let e,t,s,n,i,o,l,a,f,d,_;t=new tt({props:{text:"Payments Report",print:!0}});let m=r[1]&&Xo(r),g=r[0]&&el(r);return{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),m&&m.c(),i=v(),o=h("table"),l=h("thead"),l.innerHTML='<tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr>',a=v(),f=h("tbody"),g&&g.c(),u(n,"class","d-flex justify-content-center gap-5 my-3"),u(o,"class","table table-bordered table-striped text-center"),u(e,"class","container")},m(p,b){P(p,e,b),K(t,e,null),c(e,s),c(e,n),m&&m.m(n,null),c(e,i),c(e,o),c(o,l),c(o,a),c(o,f),g&&g.m(f,null),_=!0},p(p,[b]){p[1]?m?m.p(p,b):(m=Xo(p),m.c(),m.m(n,null)):m&&(m.d(1),m=null),p[0]?g?g.p(p,b):(g=el(p),g.c(),g.m(f,null)):g&&(g.d(1),g=null)},i(p){_||(E(t.$$.fragment,p),p&&(d||je(()=>{d=Ke(e,Ze,{duration:500}),d.start()})),_=!0)},o(p){j(t.$$.fragment,p),_=!1},d(p){p&&M(e),Z(t),m&&m.d(),g&&g.d()}}}function fg(r,e,t){let s,n;async function i(){const{data:o,error:l}=await re.rpc("getpayments");l&&console.error(l),t(0,s=o);const{data:a,error:f}=await re.rpc("paymentreport").single();f&&console.error(f),t(1,n=a)}return Dt(i),[s,n]}class dg extends Te{constructor(e){super(),De(this,e,fg,cg,$e,{})}}function rl(r,e,t){const s=r.slice();return s[10]=e[t],s}function hg(r){let e,t;return{c(){e=h("option"),e.textContent="Ascending",t=h("option"),t.textContent="Descending",e.__value="",B(e,e.__value),t.__value="",B(t,t.__value)},m(s,n){P(s,e,n),P(s,t,n)},d(s){s&&(M(e),M(t))}}}function _g(r){let e,t;return{c(){e=h("option"),e.textContent="Borrowed",t=h("option"),t.textContent="Reserved",e.__value="",B(e,e.__value),t.__value="",B(t,t.__value)},m(s,n){P(s,e,n),P(s,t,n)},d(s){s&&(M(e),M(t))}}}function sl(r){let e,t=Se(r[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=il(rl(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Se(n[0]);let o;for(o=0;o<t.length;o+=1){const l=rl(n,t,o);s[o]?s[o].p(l,i):(s[o]=il(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function nl(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-trash-fill"></i>',u(e,"class","btn btn-sm btn-outline-danger")},m(t,s){P(t,e,s)},d(t){t&&M(e)}}}function il(r){let e,t,s=(r[10].bb_stud_id||r[10].br_stud_id)+"",n,i,o,l=r[10].fname+"",a,f,d=r[10].lname+"",_,m,g,p,b=r[10].title+"",y,w,O,D,$=r[10].status+"",S,k,C,T=se(r[10].date_reserved||r[10].due_date).format("MM-DD-YYYY")+"",L,N,Y,I,V,A,G,q,U,F,J,ne,R=r[10].status=="Reserved"&&nl();return{c(){e=h("tr"),t=h("td"),n=x(s),i=v(),o=h("td"),a=x(l),f=v(),_=x(d),m=v(),g=h("td"),p=h("a"),y=x(b),O=v(),D=h("td"),S=x($),k=v(),C=h("td"),L=x(T),N=v(),Y=h("td"),I=h("a"),V=h("button"),V.innerHTML='<i class="bi bi-envelope-fill"></i>',G=v(),q=h("a"),U=h("button"),U.innerHTML='<i class="bi bi-telephone-fill"></i>',J=v(),R&&R.c(),ne=v(),u(p,"href",w="./#/book/"+r[10].book_id),u(V,"class","btn btn-sm btn-outline-primary"),u(I,"href",A="mailto:"+r[10].email),u(U,"class","btn btn-sm btn-outline-success"),u(q,"href",F="tel:"+r[10].contact),u(Y,"class","d-print-none")},m(W,z){P(W,e,z),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(o,f),c(o,_),c(e,m),c(e,g),c(g,p),c(p,y),c(e,O),c(e,D),c(D,S),c(e,k),c(e,C),c(C,L),c(e,N),c(e,Y),c(Y,I),c(I,V),c(Y,G),c(Y,q),c(q,U),c(Y,J),R&&R.m(Y,null),c(e,ne)},p(W,z){z&1&&s!==(s=(W[10].bb_stud_id||W[10].br_stud_id)+"")&&ae(n,s),z&1&&l!==(l=W[10].fname+"")&&ae(a,l),z&1&&d!==(d=W[10].lname+"")&&ae(_,d),z&1&&b!==(b=W[10].title+"")&&ae(y,b),z&1&&w!==(w="./#/book/"+W[10].book_id)&&u(p,"href",w),z&1&&$!==($=W[10].status+"")&&ae(S,$),z&1&&T!==(T=se(W[10].date_reserved||W[10].due_date).format("MM-DD-YYYY")+"")&&ae(L,T),z&1&&A!==(A="mailto:"+W[10].email)&&u(I,"href",A),z&1&&F!==(F="tel:"+W[10].contact)&&u(q,"href",F),W[10].status=="Reserved"?R||(R=nl(),R.c(),R.m(Y,null)):R&&(R.d(1),R=null)},d(W){W&&M(e),R&&R.d()}}}function mg(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q,U,F,J;t=new tt({props:{text:"Student Inventory Report",print:!0}});function ne(te,X){return te[2]=="status"?_g:hg}let R=ne(r),W=R(r),z=r[0]&&sl(r);return{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),i.textContent="Filters:",o=v(),l=h("div"),a=h("select"),f=h("option"),f.textContent="Student Name",d=h("option"),d.textContent="Book Title",_=h("option"),_.textContent="Status",m=h("option"),m.textContent="Due Date",g=v(),p=h("div"),b=h("select"),W.c(),y=v(),w=h("form"),O=h("div"),O.textContent="Search:",D=v(),$=h("select"),S=h("option"),S.textContent="Student Name",k=h("option"),k.textContent="Book Title",C=v(),T=h("input"),L=v(),N=h("button"),N.innerHTML='<i class="bi bi-search"></i>',Y=v(),I=h("table"),V=h("thead"),V.innerHTML='<tr class="align-middle"><th>Student ID</th> <th>Student Name</th> <th>Book</th> <th>Status</th> <th>Due Date</th> <th class="d-print-none">Actions</th></tr>',A=v(),G=h("tbody"),z&&z.c(),f.__value="fname",B(f,f.__value),d.__value="title",B(d,d.__value),_.__value="status",B(_,_.__value),m.__value="",B(m,m.__value),u(a,"name","filter"),u(a,"class","form-select"),u(b,"name","order"),u(b,"class","form-select"),S.__value="fname",B(S,S.__value),k.__value="title",B(k,k.__value),u($,"name","filter"),u($,"class","form-select"),u(T,"type","text"),u(T,"placeholder","Search..."),u(T,"name","search"),u(T,"class","form-control"),u(N,"type","submit"),u(N,"class","btn btn-outline-success"),u(w,"class","d-flex ms-3 align-items-center gap-2"),u(n,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(I,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(te,X){P(te,e,X),K(t,e,null),c(e,s),c(e,n),c(n,i),c(n,o),c(n,l),c(l,a),c(a,f),c(a,d),c(a,_),c(a,m),r[5](a),c(n,g),c(n,p),c(p,b),W.m(b,null),c(n,y),c(n,w),c(w,O),c(w,D),c(w,$),c($,S),c($,k),r[7]($),c(w,C),c(w,T),B(T,r[4]),c(w,L),c(w,N),c(e,Y),c(e,I),c(I,V),c(I,A),c(I,G),z&&z.m(G,null),U=!0,F||(J=[H(a,"change",r[6]),H($,"change",pg),H(T,"input",r[8]),H(w,"submit",dt(bg))],F=!0)},p(te,[X]){R!==(R=ne(te))&&(W.d(1),W=R(te),W&&(W.c(),W.m(b,null))),X&16&&T.value!==te[4]&&B(T,te[4]),te[0]?z?z.p(te,X):(z=sl(te),z.c(),z.m(G,null)):z&&(z.d(1),z=null)},i(te){U||(E(t.$$.fragment,te),te&&(q||je(()=>{q=Ke(e,Ze,{duration:500}),q.start()})),U=!0)},o(te){j(t.$$.fragment,te),U=!1},d(te){te&&M(e),Z(t),r[5](null),W.d(),r[7](null),z&&z.d(),F=!1,ge(J)}}}const pg=()=>{},bg=()=>{};function gg(r,e,t){let s,n={value:""},i="",o,l;async function a(){const{data:g,error:p}=await re.rpc("getstudentreport");p&&console.error(p),t(0,s=g),console.log(g)}a();function f(g){it[g?"unshift":"push"](()=>{n=g,t(1,n)})}const d=()=>{t(2,i=n.value),console.log(i)};function _(g){it[g?"unshift":"push"](()=>{o=g,t(3,o)})}function m(){l=this.value,t(4,l)}return[s,n,i,o,l,f,d,_,m]}class vg extends Te{constructor(e){super(),De(this,e,gg,mg,$e,{})}}function ol(r,e,t){const s=r.slice();return s[11]=e[t][0],s[12]=e[t][1],s}function ll(r,e,t){const s=r.slice();return s[11]=e[t][0],s[12]=e[t][1],s}function al(r){let e,t,s,n;return{c(){e=h("b"),e.textContent="Search Query:",t=v(),s=h("span"),n=x(r[4])},m(i,o){P(i,e,o),P(i,t,o),P(i,s,o),c(s,n)},p(i,o){o&16&&ae(n,i[4])},d(i){i&&(M(e),M(t),M(s))}}}function ul(r){let e,t,s,n,i=Se(Object.entries(r[1])),o=[];for(let l=0;l<i.length;l+=1)o[l]=cl(ll(r,i,l));return{c(){e=h("select"),t=h("option"),t.textContent="All";for(let l=0;l<o.length;l+=1)o[l].c();t.__value="all",B(t,t.__value),u(e,"name","filter"),u(e,"class","form-select")},m(l,a){P(l,e,a),c(e,t);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);r[6](e),s||(n=H(e,"change",r[7]),s=!0)},p(l,a){if(a&2){i=Se(Object.entries(l[1]));let f;for(f=0;f<i.length;f+=1){const d=ll(l,i,f);o[f]?o[f].p(d,a):(o[f]=cl(d),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&M(e),xe(o,l),r[6](null),s=!1,n()}}}function cl(r){let e,t=r[12].report_type+"",s,n;return{c(){e=h("option"),s=x(t),e.__value=n=r[12].report_type,B(e,e.__value)},m(i,o){P(i,e,o),c(e,s)},p(i,o){o&2&&t!==(t=i[12].report_type+"")&&ae(s,t),o&2&&n!==(n=i[12].report_type)&&(e.__value=n,B(e,e.__value))},d(i){i&&M(e)}}}function fl(r){let e,t=Se(Object.entries(r[0])),s=[];for(let n=0;n<t.length;n+=1)s[n]=dl(ol(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,i);P(n,e,i)},p(n,i){if(i&1){t=Se(Object.entries(n[0]));let o;for(o=0;o<t.length;o+=1){const l=ol(n,t,o);s[o]?s[o].p(l,i):(s[o]=dl(l),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&M(e),xe(s,n)}}}function dl(r){let e,t,s=se(r[12].report_time).format("MM-DD-YYYY hh:mm a")+"",n,i,o,l=(r[12].staffname||"--")+"",a,f,d,_=(r[12].studentname||"--")+"",m,g,p,b=r[12].report_type+"",y,w,O,D,$=r[12].report_details+"",S,k;return{c(){e=h("tr"),t=h("td"),n=x(s),i=v(),o=h("td"),a=x(l),f=v(),d=h("td"),m=x(_),g=v(),p=h("td"),y=x(b),w=v(),O=h("td"),D=h("small"),S=x($),k=v(),u(O,"class","fs-6")},m(C,T){P(C,e,T),c(e,t),c(t,n),c(e,i),c(e,o),c(o,a),c(e,f),c(e,d),c(d,m),c(e,g),c(e,p),c(p,y),c(e,w),c(e,O),c(O,D),c(D,S),c(e,k)},p(C,T){T&1&&s!==(s=se(C[12].report_time).format("MM-DD-YYYY hh:mm a")+"")&&ae(n,s),T&1&&l!==(l=(C[12].staffname||"--")+"")&&ae(a,l),T&1&&_!==(_=(C[12].studentname||"--")+"")&&ae(m,_),T&1&&b!==(b=C[12].report_type+"")&&ae(y,b),T&1&&$!==($=C[12].report_details+"")&&ae(S,$)},d(C){C&&M(e)}}}function wg(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V;t=new tt({props:{text:"System Log",print:!0}});let A=r[4]&&al(r),G=r[1]&&ul(r),q=r[0]&&fl(r);return{c(){e=h("main"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("b"),i.textContent="Filter:",o=v(),l=h("span"),a=x(r[3]),f=v(),A&&A.c(),d=v(),_=h("div"),m=h("div"),m.textContent="Transaction:",g=v(),p=h("div"),G&&G.c(),b=v(),y=h("form"),w=h("input"),O=v(),D=h("button"),D.innerHTML='<i class="bi bi-search"></i>',$=v(),S=h("div"),k=h("table"),C=h("thead"),C.innerHTML="<tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr>",T=v(),L=h("tbody"),q&&q.c(),u(n,"class","d-none d-print-flex align-items-center gap-2 my-3"),u(w,"type","text"),u(w,"placeholder","Search Details..."),u(w,"name","search"),u(w,"class","form-control"),u(D,"type","submit"),u(D,"class","btn btn-outline-success"),u(y,"class","d-flex ms-3"),u(_,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),u(k,"class","table table=striped table-bordered text-center"),u(e,"class","container")},m(U,F){P(U,e,F),K(t,e,null),c(e,s),c(e,n),c(n,i),c(n,o),c(n,l),c(l,a),c(n,f),A&&A.m(n,null),c(e,d),c(e,_),c(_,m),c(_,g),c(_,p),G&&G.m(p,null),c(_,b),c(_,y),c(y,w),B(w,r[4]),c(y,O),c(y,D),c(e,$),c(e,S),c(S,k),c(k,C),c(k,T),c(k,L),q&&q.m(L,null),Y=!0,I||(V=[H(w,"input",r[8]),H(y,"submit",dt(r[9]))],I=!0)},p(U,[F]){(!Y||F&8)&&ae(a,U[3]),U[4]?A?A.p(U,F):(A=al(U),A.c(),A.m(n,null)):A&&(A.d(1),A=null),U[1]?G?G.p(U,F):(G=ul(U),G.c(),G.m(p,null)):G&&(G.d(1),G=null),F&16&&w.value!==U[4]&&B(w,U[4]),U[0]?q?q.p(U,F):(q=fl(U),q.c(),q.m(L,null)):q&&(q.d(1),q=null)},i(U){Y||(E(t.$$.fragment,U),U&&(N||je(()=>{N=Ke(e,Ze,{duration:500}),N.start()})),Y=!0)},o(U){j(t.$$.fragment,U),Y=!1},d(U){U&&M(e),Z(t),A&&A.d(),G&&G.d(),q&&q.d(),I=!1,ge(V)}}}function yg(r,e,t){let s,n,i={value:"all"},o,l="";async function a(){t(3,o=i.value);const{data:p,error:b}=await re.rpc("getreports",{filter:o,search:l});b&&console.error(b),t(0,s=p)}async function f(){const{data:p,error:b}=await re.rpc("getreporttypes");b&&console.error(b),t(1,n=p)}Dt(a),Dt(f);function d(p){it[p?"unshift":"push"](()=>{i=p,t(2,i),t(1,n)})}const _=()=>a();function m(){l=this.value,t(4,l)}return[s,n,i,o,l,a,d,_,m,()=>a()]}class kg extends Te{constructor(e){super(),De(this,e,yg,wg,$e,{})}}function $g(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-name"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[1]),t||(s=H(e,"input",r[14]),t=!0)},p(n,i){i[0]&2&&e.value!==n[1]&&B(e,n[1])},d(n){n&&M(e),t=!1,s()}}}function Sg(r){let e,t,s;return{c(){e=h("textarea"),u(e,"class","form-control"),u(e,"id","book-description"),u(e,"rows","6"),u(e,"autocomplete","off")},m(n,i){P(n,e,i),B(e,r[2]),t||(s=H(e,"input",r[15]),t=!0)},p(n,i){i[0]&4&&B(e,n[2])},d(n){n&&M(e),t=!1,s()}}}function Dg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","book-cover"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=H(e,"change",r[16]),t=!0)},p:ee,d(n){n&&M(e),r[17](null),t=!1,s()}}}function hl(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=v(),n=h("div"),i=h("img"),l=v(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[12])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(_,m){P(_,e,m),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[H(i,"error",r[18]),H(a,"click",r[19])],f=!0)},p(_,m){m[0]&4096&&!Ne(i.src,o=_[12])&&u(i,"src",o)},d(_){_&&M(e),f=!1,ge(d)}}}function Tg(r){let e,t,s,n,i,o,l,a;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=v(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","categories"),u(e,"class",t="form-control "+r[8]),u(e,"type","text"),u(e,"id","book-category"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","form-text"),u(o,"class","invalid-feedback")},m(f,d){P(f,e,d),B(e,r[3]),P(f,s,d),P(f,n,d),P(f,i,d),P(f,o,d),l||(a=[H(e,"input",r[20]),H(e,"keyup",r[21])],l=!0)},p(f,d){d[0]&256&&t!==(t="form-control "+f[8])&&u(e,"class",t),d[0]&8&&e.value!==f[3]&&B(e,f[3])},d(f){f&&(M(e),M(s),M(n),M(i),M(o)),l=!1,ge(a)}}}function Og(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","authors"),u(e,"class",t="form-control "+r[9]),u(e,"type","text"),u(e,"id","book-author"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[4]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[22]),H(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&u(e,"class",t),a[0]&16&&e.value!==l[4]&&B(e,l[4])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Cg(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',u(e,"list","publishers"),u(e,"class",t="form-control "+r[10]),u(e,"type","text"),u(e,"id","book-publisher"),u(e,"autocomplete","off"),e.required=!0,u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[24]),H(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&u(e,"class",t),a[0]&32&&e.value!==l[5]&&B(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Mg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","number"),u(e,"id","book-shelf"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[6]),t||(s=H(e,"input",r[26]),t=!0)},p(n,i){i[0]&64&&er(e.value)!==n[6]&&B(e,n[6])},d(n){n&&M(e),t=!1,s()}}}function Pg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","text"),u(e,"id","book-isbn"),u(e,"autocomplete","off"),e.required=!0},m(n,i){P(n,e,i),B(e,r[7]),t||(s=H(e,"input",r[27]),t=!0)},p(n,i){i[0]&128&&e.value!==n[7]&&B(e,n[7])},d(n){n&&M(e),t=!1,s()}}}function Eg(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k,C,T,L,N,Y,I,V,A,G,q;t=new tt({props:{text:"Update Book"}}),l=new ke({props:{label:"Book Title:",id:"book-name",$$slots:{default:[$g]},$$scope:{ctx:r}}}),f=new ke({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Sg]},$$scope:{ctx:r}}}),_=new ke({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Dg]},$$scope:{ctx:r}}});let U=r[12]&&hl(r);return b=new ke({props:{label:"Category:",id:"book-category",$$slots:{default:[Tg]},$$scope:{ctx:r}}}),w=new ke({props:{label:"Author: ",id:"book-author",$$slots:{default:[Og]},$$scope:{ctx:r}}}),D=new ke({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Cg]},$$scope:{ctx:r}}}),S=new ke({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Mg]},$$scope:{ctx:r}}}),C=new ke({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Pg]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=v(),Q(f.$$.fragment),d=v(),Q(_.$$.fragment),m=v(),U&&U.c(),g=v(),p=h("div"),Q(b.$$.fragment),y=v(),Q(w.$$.fragment),O=v(),Q(D.$$.fragment),$=v(),Q(S.$$.fragment),k=v(),Q(C.$$.fragment),T=v(),L=h("div"),N=h("button"),N.innerHTML='<i class="bi bi-arrow-clockwise"></i> Update Book',Y=v(),I=h("button"),I.innerHTML='<i class="bi bi-x-circle"></i> Cancel',u(o,"class","col-sm-12 col-lg-6"),u(p,"class","col-sm-12 col-lg-6"),u(i,"class","row justify-content-center"),u(N,"class","btn btn-success"),u(N,"type","submit"),u(I,"class","btn btn-danger"),u(I,"type","button"),u(L,"class","my-3"),u(e,"class","my-1 container")},m(F,J){P(F,e,J),K(t,e,null),c(e,s),c(e,n),c(n,i),c(i,o),K(l,o,null),c(o,a),K(f,o,null),c(o,d),K(_,o,null),c(o,m),U&&U.m(o,null),c(i,g),c(i,p),K(b,p,null),c(p,y),K(w,p,null),c(p,O),K(D,p,null),c(p,$),K(S,p,null),c(p,k),K(C,p,null),c(n,T),c(n,L),c(L,N),c(L,Y),c(L,I),A=!0,G||(q=[H(I,"click",r[28]),H(n,"submit",dt(r[13]))],G=!0)},p(F,J){const ne={};J[0]&2|J[1]&64&&(ne.$$scope={dirty:J,ctx:F}),l.$set(ne);const R={};J[0]&4|J[1]&64&&(R.$$scope={dirty:J,ctx:F}),f.$set(R);const W={};J[0]&2049|J[1]&64&&(W.$$scope={dirty:J,ctx:F}),_.$set(W),F[12]?U?U.p(F,J):(U=hl(F),U.c(),U.m(o,null)):U&&(U.d(1),U=null);const z={};J[0]&264|J[1]&64&&(z.$$scope={dirty:J,ctx:F}),b.$set(z);const te={};J[0]&528|J[1]&64&&(te.$$scope={dirty:J,ctx:F}),w.$set(te);const X={};J[0]&1056|J[1]&64&&(X.$$scope={dirty:J,ctx:F}),D.$set(X);const ce={};J[0]&64|J[1]&64&&(ce.$$scope={dirty:J,ctx:F}),S.$set(ce);const de={};J[0]&128|J[1]&64&&(de.$$scope={dirty:J,ctx:F}),C.$set(de)},i(F){A||(E(t.$$.fragment,F),E(l.$$.fragment,F),E(f.$$.fragment,F),E(_.$$.fragment,F),E(b.$$.fragment,F),E(w.$$.fragment,F),E(D.$$.fragment,F),E(S.$$.fragment,F),E(C.$$.fragment,F),F&&(V||je(()=>{V=Ke(e,Ze,{duration:500}),V.start()})),A=!0)},o(F){j(t.$$.fragment,F),j(l.$$.fragment,F),j(f.$$.fragment,F),j(_.$$.fragment,F),j(b.$$.fragment,F),j(w.$$.fragment,F),j(D.$$.fragment,F),j(S.$$.fragment,F),j(C.$$.fragment,F),A=!1},d(F){F&&M(e),Z(t),Z(l),Z(f),Z(_),U&&U.d(),Z(b),Z(w),Z(D),Z(S),Z(C),G=!1,ge(q)}}}function Rg(r,e,t){let s;Rr(r,ns,z=>t(31,s=z));const i=new URLSearchParams(s).get("id");i?$():Xt("#/invalid-link");let o,l,a,f,d,_,m,g,p,b,y,w,O,D=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/${i}.jpg`;async function $(){const{data:z,error:te}=await re.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i).single();if(te){console.error(te),Xt("#/invalid-link");return}const{data:X,error:ce}=await re.from("books_category").select("category(name)").eq("book_id",i);console.log(X);let de=[];for(const _e in X)de.push(X[_e].category.name);t(3,a=de.join(", ")),t(1,o=z.title),t(2,l=z.description),t(4,f=z.author.name),t(5,d=z.publisher.name),t(6,_=z.shelf_number),t(7,m=z.isbn)}async function S(){if(!await k())return;const{error:z}=await re.rpc("updatebook",{bookid:i,titlevalue:o,descriptionvalue:l,author_name:f,publisher_name:d,shelf_numbervalue:_,isbnvalue:m});if(w&&w[0]){const{data:de,error:_e}=await re.storage.from("books").upload(`${i}.jpg`,w[0],{upsert:!0});_e&&console.error(_e)}else if(D!=""){const{data:de,error:_e}=await re.storage.from("books").remove([`${i}.jpg`]);_e&&console.error(_e)}if(z){console.error(z),alert(z.details),alert(z.hint);return}alert("Succesfully Updated");const{error:te}=await re.from("books_category").delete().eq("book_id",i);te&&console.error(te);let X=!0;for(const de in g){console.log(de);const{data:_e,error:Pe}=await re.from("books_category").insert({book_id:i,category_id:g[de]});Pe&&(console.error(Pe),X=!1)}X||alert("Had problem while pushing categories, Update book later");const{error:ce}=await re.from("reports").insert({report_type:"Update Book",report_details:`Changed Details of ${o}`,book_id:i,staff_id:localStorage.getItem("user_id")});ce&&console.error(ce),Zr()}async function k(){const{data:z,error:te}=await re.from("author").select("author_id").eq("name",f).single(),{data:X,error:ce}=await re.from("publisher").select("publisher_id").eq("name",d).single();let de=!0;if((te||!z)&&(t(9,b="is-invalid"),de=!1),(ce||!X)&&(t(10,y="is-invalid"),de=!1),!await C()){if(g.length!=0)return;t(8,p="is-invalid"),de=!1}return de}async function C(){if(a=="")return!1;let z=!0,te=[],X=a.split(",").map(ce=>ce.trim());console.log(X);for(const ce of X){console.log(ce);const{data:de,error:_e}=await re.from("category").select("category_id").eq("name",ce).single();_e?(z=!1,console.error(_e)):te.push(de.category_id),console.log(z)}return console.log(X,te),g=z?te:[],console.log(z,g),z}function T(){o=this.value,t(1,o)}function L(){l=this.value,t(2,l)}function N(){w=this.files,t(0,w)}function Y(z){it[z?"unshift":"push"](()=>{O=z,t(11,O)})}const I=()=>t(12,D=""),V=()=>{t(11,O.value="",O),t(0,w=""),t(12,D="")};function A(){a=this.value,t(3,a)}const G=()=>t(8,p="");function q(){f=this.value,t(4,f)}const U=()=>t(9,b="");function F(){d=this.value,t(5,d)}const J=()=>t(10,y="");function ne(){_=er(this.value),t(6,_)}function R(){m=this.value,t(7,m)}const W=()=>Zr();return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(w&&w[0]){console.log(w);const z=URL.createObjectURL(w[0]);t(12,D=z)}else console.log(w)},[w,o,l,a,f,d,_,m,p,b,y,O,D,S,T,L,N,Y,I,V,A,G,q,U,F,J,ne,R,W]}class jg extends Te{constructor(e){super(),De(this,e,Rg,Eg,$e,{},null,[-1,-1])}}function Ag(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Author Name is Required",u(e,"class",t="form-control "+r[6]),u(e,"type","text"),u(e,"id","author-name"),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[3]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[10]),H(e,"keyup",r[11])],i=!0)},p(l,a){a&64&&t!==(t="form-control "+l[6])&&u(e,"class",t),a&8&&e.value!==l[3]&&B(e,l[3])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Ig(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[7]),u(e,"id","author-bio"),u(e,"rows","4")},m(i,o){P(i,e,o),B(e,r[4]),s||(n=[H(e,"input",r[12]),H(e,"keyup",r[13])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&B(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function Lg(r){let e,t,s,n,i,o;return{c(){e=h("input"),s=v(),n=h("div"),n.textContent="Author Link is Required",u(e,"type","text"),u(e,"id","author-link"),u(e,"class",t="form-control "+r[8]),u(n,"class","invalid-feedback")},m(l,a){P(l,e,a),B(e,r[5]),P(l,s,a),P(l,n,a),i||(o=[H(e,"input",r[14]),H(e,"keyup",r[15])],i=!0)},p(l,a){a&256&&t!==(t="form-control "+l[8])&&u(e,"class",t),a&32&&e.value!==l[5]&&B(e,l[5])},d(l){l&&(M(e),M(s),M(n)),i=!1,ge(o)}}}function Yg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","author-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=H(e,"change",r[16]),t=!0)},p:ee,d(n){n&&M(e),r[17](null),t=!1,s()}}}function _l(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=v(),n=h("div"),i=h("img"),l=v(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[2])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(_,m){P(_,e,m),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[H(i,"error",r[18]),H(a,"click",r[19])],f=!0)},p(_,m){m&4&&!Ne(i.src,o=_[2])&&u(i,"src",o)},d(_){_&&M(e),f=!1,ge(d)}}}function Ng(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k;t=new tt({props:{text:"Update Author"}}),o=new ke({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Ag]},$$scope:{ctx:r}}}),a=new ke({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Ig]},$$scope:{ctx:r}}}),d=new ke({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Lg]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Yg]},$$scope:{ctx:r}}});let C=r[2]&&_l(r);return{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),C&&C.c(),p=v(),b=h("div"),y=h("button"),y.innerHTML='<i class="bi bi-plus-circle"></i> Update Author',w=v(),O=h("a"),O.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(y,"class","btn btn-success"),u(O,"href","./#/"),u(b,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(T,L){P(T,e,L),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,_),K(m,i,null),c(i,g),C&&C.m(i,null),c(i,p),c(i,b),c(b,y),c(b,w),c(b,O),$=!0,S||(k=H(y,"click",r[9]),S=!0)},p(T,[L]){const N={};L&33554504&&(N.$$scope={dirty:L,ctx:T}),o.$set(N);const Y={};L&33554576&&(Y.$$scope={dirty:L,ctx:T}),a.$set(Y);const I={};L&33554720&&(I.$$scope={dirty:L,ctx:T}),d.$set(I);const V={};L&33554435&&(V.$$scope={dirty:L,ctx:T}),m.$set(V),T[2]?C?C.p(T,L):(C=_l(T),C.c(),C.m(i,p)):C&&(C.d(1),C=null)},i(T){$||(E(t.$$.fragment,T),E(o.$$.fragment,T),E(a.$$.fragment,T),E(d.$$.fragment,T),E(m.$$.fragment,T),T&&(D||je(()=>{D=Ke(e,Ze,{duration:500}),D.start()})),$=!0)},o(T){j(t.$$.fragment,T),j(o.$$.fragment,T),j(a.$$.fragment,T),j(d.$$.fragment,T),j(m.$$.fragment,T),$=!1},d(T){T&&M(e),Z(t),Z(o),Z(a),Z(d),Z(m),C&&C.d(),S=!1,k()}}}function Ug(r,e,t){let s;Rr(r,ns,Y=>t(21,s=Y));const i=new URLSearchParams(s).get("id");i?b():Xt("#/invalid-link");let o,l,a=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/author/${i}.jpg`,f,d="",_,m,g,p;async function b(){const{data:Y,error:I}=await re.from("author").select("name, bio, link").eq("author_id",i).single();if(I){console.error(I),Xt("#/invalid-link");return}t(3,f=Y.name),t(4,d=Y.bio),t(5,_=Y.link)}async function y(){if(t(6,m=f?"":"is-invalid"),t(8,p=_?"":"is-invalid"),console.log(m,g,p),m||p)return;const{data:Y,error:I}=await re.from("author").update({name:f,bio:d,link:_}).eq("author_id",i).select("author_id").single();if(I){console.error(I);return}if(o&&o[0]){const{data:A,error:G}=await re.storage.from("author").upload(`${i}.jpg`,o[0],{upsert:!0});G&&console.error(G)}else if(a!=""){const{data:A,error:G}=await re.storage.from("author").remove([`${i}.jpg`]);G&&console.error(G)}const{error:V}=await re.from("reports").insert({report_type:"Update Author",report_details:`Updated ${f}`,staff_id:localStorage.getItem("user_id")});V&&console.error(V),alert("Successfully Updated!"),Zr()}function w(){f=this.value,t(3,f)}const O=()=>t(6,m="");function D(){d=this.value,t(4,d)}const $=()=>t(7,g="");function S(){_=this.value,t(5,_)}const k=()=>t(8,p="");function C(){o=this.files,t(0,o)}function T(Y){it[Y?"unshift":"push"](()=>{l=Y,t(1,l)})}const L=()=>t(2,a=""),N=()=>{t(1,l.value="",l),t(0,o=""),t(2,a="")};return r.$$.update=()=>{if(r.$$.dirty&1&&o&&o[0]){console.log(o);const Y=URL.createObjectURL(o[0]);t(2,a=Y)}},[o,l,a,f,d,_,m,g,p,y,w,O,D,$,S,k,C,T,L,N]}class Hg extends Te{constructor(e){super(),De(this,e,Ug,Ng,$e,{})}}function Fg(r){let e,t,s,n;return{c(){e=h("input"),u(e,"class",t="form-control "+r[6]),u(e,"type","text"),u(e,"id","publisher-name")},m(i,o){P(i,e,o),B(e,r[3]),s||(n=[H(e,"input",r[10]),H(e,"keyup",r[11])],s=!0)},p(i,o){o&64&&t!==(t="form-control "+i[6])&&u(e,"class",t),o&8&&e.value!==i[3]&&B(e,i[3])},d(i){i&&M(e),s=!1,ge(n)}}}function qg(r){let e,t,s,n;return{c(){e=h("textarea"),u(e,"class",t="form-control "+r[7]),u(e,"id","publisher-description"),u(e,"rows","4")},m(i,o){P(i,e,o),B(e,r[4]),s||(n=[H(e,"input",r[12]),H(e,"keyup",r[13])],s=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&u(e,"class",t),o&16&&B(e,i[4])},d(i){i&&M(e),s=!1,ge(n)}}}function Bg(r){let e,t,s,n;return{c(){e=h("input"),u(e,"type","text"),u(e,"id","publisher-link"),u(e,"class",t="form-control "+r[8])},m(i,o){P(i,e,o),B(e,r[5]),s||(n=[H(e,"input",r[14]),H(e,"keyup",r[15])],s=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&u(e,"class",t),o&32&&e.value!==i[5]&&B(e,i[5])},d(i){i&&M(e),s=!1,ge(n)}}}function Wg(r){let e,t,s;return{c(){e=h("input"),u(e,"class","form-control"),u(e,"type","file"),u(e,"id","publisher-pic"),u(e,"accept","image/*")},m(n,i){P(n,e,i),r[17](e),t||(s=H(e,"change",r[16]),t=!0)},p:ee,d(n){n&&M(e),r[17](null),t=!1,s()}}}function ml(r){let e,t,s,n,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",s=v(),n=h("div"),i=h("img"),l=v(),a=h("button"),a.textContent="Remove",u(t,"for","cover-preview"),u(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ne(i.src,o=r[2])||u(i,"src",o),u(i,"alt","Preview"),u(i,"id","cover-preview"),u(i,"height","150"),u(a,"class","btn btn-sm btn-danger"),u(n,"class","col-sm-8 col-md-9"),u(n,"id","preview-div"),u(e,"class","my-3 row")},m(_,m){P(_,e,m),c(e,t),c(e,s),c(e,n),c(n,i),c(n,l),c(n,a),f||(d=[H(i,"error",r[18]),H(a,"click",r[19])],f=!0)},p(_,m){m&4&&!Ne(i.src,o=_[2])&&u(i,"src",o)},d(_){_&&M(e),f=!1,ge(d)}}}function Vg(r){let e,t,s,n,i,o,l,a,f,d,_,m,g,p,b,y,w,O,D,$,S,k;t=new tt({props:{text:"Add Publisher"}}),o=new ke({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Fg]},$$scope:{ctx:r}}}),a=new ke({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[qg]},$$scope:{ctx:r}}}),d=new ke({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Bg]},$$scope:{ctx:r}}}),m=new ke({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[Wg]},$$scope:{ctx:r}}});let C=r[2]&&ml(r);return{c(){e=h("section"),Q(t.$$.fragment),s=v(),n=h("div"),i=h("div"),Q(o.$$.fragment),l=v(),Q(a.$$.fragment),f=v(),Q(d.$$.fragment),_=v(),Q(m.$$.fragment),g=v(),C&&C.c(),p=v(),b=h("div"),y=h("button"),y.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',w=v(),O=h("a"),O.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',u(y,"class","btn btn-success"),u(O,"href","./#/"),u(b,"class","float-end"),u(i,"class","col-sm-12 col-lg-6"),u(n,"class","justify-content-around row"),u(e,"class","container")},m(T,L){P(T,e,L),K(t,e,null),c(e,s),c(e,n),c(n,i),K(o,i,null),c(i,l),K(a,i,null),c(i,f),K(d,i,null),c(i,_),K(m,i,null),c(i,g),C&&C.m(i,null),c(i,p),c(i,b),c(b,y),c(b,w),c(b,O),$=!0,S||(k=H(y,"click",r[9]),S=!0)},p(T,[L]){const N={};L&33554504&&(N.$$scope={dirty:L,ctx:T}),o.$set(N);const Y={};L&33554576&&(Y.$$scope={dirty:L,ctx:T}),a.$set(Y);const I={};L&33554720&&(I.$$scope={dirty:L,ctx:T}),d.$set(I);const V={};L&33554435&&(V.$$scope={dirty:L,ctx:T}),m.$set(V),T[2]?C?C.p(T,L):(C=ml(T),C.c(),C.m(i,p)):C&&(C.d(1),C=null)},i(T){$||(E(t.$$.fragment,T),E(o.$$.fragment,T),E(a.$$.fragment,T),E(d.$$.fragment,T),E(m.$$.fragment,T),T&&(D||je(()=>{D=Ke(e,Ze,{duration:500}),D.start()})),$=!0)},o(T){j(t.$$.fragment,T),j(o.$$.fragment,T),j(a.$$.fragment,T),j(d.$$.fragment,T),j(m.$$.fragment,T),$=!1},d(T){T&&M(e),Z(t),Z(o),Z(a),Z(d),Z(m),C&&C.d(),S=!1,k()}}}function zg(r,e,t){let s;Rr(r,ns,Y=>t(21,s=Y));const i=new URLSearchParams(s).get("id");i?b():Xt("#/invalid-link");let o,l,a=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/publisher/${i}.jpg`,f,d,_,m,g,p;async function b(){const{data:Y,error:I}=await re.from("publisher").select("name, description, link").eq("publisher_id",i).single();if(I){console.error(I),Xt("#/invalid-link");return}t(3,f=Y.name),t(4,d=Y.description),t(5,_=Y.link)}async function y(){if(t(6,m=f?"":"is-invalid"),t(8,p=_?"":"is-invalid"),console.log(m,p),m||p)return;const{data:Y,error:I}=await re.from("publisher").update({name:f,description:d,link:_}).eq("publisher_id",i).select("publisher_id").single();if(I){console.error(I);return}if(o&&o[0]){const{data:A,error:G}=await re.storage.from("publisher").upload(`${i}.jpg`,o[0],{upsert:!0});G&&console.error(G)}else if(a!=""){const{data:A,error:G}=await re.storage.from("publisher").remove([`${i}.jpg`]);G&&console.error(G)}const{error:V}=await re.from("reports").insert({report_type:"Update Publisher",report_details:`Updated ${f}`,staff_id:localStorage.getItem("user_id")});V&&console.error(V),alert("Successfully Updated!"),Zr()}function w(){f=this.value,t(3,f)}const O=()=>t(6,m="");function D(){d=this.value,t(4,d)}const $=()=>t(7,g="");function S(){_=this.value,t(5,_)}const k=()=>t(8,p="");function C(){o=this.files,t(0,o)}function T(Y){it[Y?"unshift":"push"](()=>{l=Y,t(1,l)})}const L=()=>t(2,a=""),N=()=>{t(1,l.value="",l),t(0,o=""),t(2,a="")};return r.$$.update=()=>{if(r.$$.dirty&1&&o&&o[0]){console.log(o);const Y=URL.createObjectURL(o[0]);t(2,a=Y)}},[o,l,a,f,d,_,m,g,p,y,w,O,D,$,S,k,C,T,L,N]}class Gg extends Te{constructor(e){super(),De(this,e,zg,Vg,$e,{})}}function Jg(r){let e,t;return e=new Un({props:{routes:{"*":$b}}}),{c(){Q(e.$$.fragment)},m(s,n){K(e,s,n),t=!0},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Kg(r){let e,t,s,n;return e=new Wl({}),s=new Un({props:{routes:{"/":lb,"/book/:bookID":Na,"/author/:authorID":Ua,"/publisher/:publisherID":Ha,"/search":Mr,"/search/author":Mr,"/search/publisher":Mr,"/add-book":jp,"/add-author":xb,"/add-publisher":ig,"/borrow":Ab,"/return":Vb,"/book-report":ug,"/payment-report":dg,"/student-report":vg,"/reports":kg,"/update-book":jg,"/update-author":Hg,"/update-publisher":Gg,"*":_i}}}),{c(){Q(e.$$.fragment),t=v(),Q(s.$$.fragment)},m(i,o){K(e,i,o),P(i,t,o),K(s,i,o),n=!0},i(i){n||(E(e.$$.fragment,i),E(s.$$.fragment,i),n=!0)},o(i){j(e.$$.fragment,i),j(s.$$.fragment,i),n=!1},d(i){i&&M(t),Z(e,i),Z(s,i)}}}function Zg(r){let e,t,s,n;return e=new Wl({}),s=new Un({props:{routes:{"/":Fm,"/book/:bookID":Na,"/author/:authorID":Ua,"/publisher/:publisherID":Ha,"/search":Mr,"/search/author":Mr,"/search/publisher":Mr,"*":_i}}}),{c(){Q(e.$$.fragment),t=v(),Q(s.$$.fragment)},m(i,o){K(e,i,o),P(i,t,o),K(s,i,o),n=!0},i(i){n||(E(e.$$.fragment,i),E(s.$$.fragment,i),n=!0)},o(i){j(e.$$.fragment,i),j(s.$$.fragment,i),n=!1},d(i){i&&M(t),Z(e,i),Z(s,i)}}}function Qg(r){let e,t,s,n;const i=[Zg,Kg,Jg],o=[];function l(a,f){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),s=Je()},m(a,f){o[e].m(a,f),P(a,s,f),n=!0},p(a,[f]){let d=e;e=l(a),e!==d&&(Le(),j(o[d],1,1,()=>{o[d]=null}),Ye(),t=o[e],t||(t=o[e]=i[e](a),t.c()),E(t,1),t.m(s.parentNode,s))},i(a){n||(E(t),n=!0)},o(a){j(t),n=!1},d(a){a&&M(s),o[e].d(a)}}}function xg(r,e,t){let s;return xt.subscribe(n=>{t(0,s=n)}),[s]}class Xg extends Te{constructor(e){super(),De(this,e,xg,Qg,$e,{})}}new Xg({target:document.getElementById("app")})});export default e0();
