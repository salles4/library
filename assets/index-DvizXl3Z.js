var Ga=Object.defineProperty;var Ja=(s,e,t)=>e in s?Ga(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Ka=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Rr=(s,e,t)=>(Ja(s,typeof e!="symbol"?e+"":e,t),t);var wg=Ka(($g,Xs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function U(){}const ln=s=>s;function Os(s,e){for(const t in e)s[t]=e[t];return s}function Za(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function $o(s){return s()}function Zn(){return Object.create(null)}function De(s){s.forEach($o)}function js(s){return typeof s=="function"}function pe(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let Fs;function et(s,e){return s===e?!0:(Fs||(Fs=document.createElement("a")),Fs.href=e,s===Fs.href)}function Qa(s){return Object.keys(s).length===0}function So(s,...e){if(s==null){for(const r of e)r(void 0);return U}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function cn(s,e,t){s.$$.on_destroy.push(So(e,t))}function dr(s,e,t,r){if(s){const n=Oo(s,e,t,r);return s[0](n)}}function Oo(s,e,t,r){return s[1]&&r?Os(t.ctx.slice(),s[1](r(e))):t.ctx}function fr(s,e,t,r){if(s[2]&&r){const n=s[2](r(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function hr(s,e,t,r,n,i){if(n){const o=Oo(e,t,r,i);s.p(o,n)}}function mr(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Qn(s){const e=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[s,"px"]}const To=typeof window<"u";let Do=To?()=>window.performance.now():()=>Date.now(),un=To?s=>requestAnimationFrame(s):U;const Xt=new Set;function Mo(s){Xt.forEach(e=>{e.c(s)||(Xt.delete(e),e.f())}),Xt.size!==0&&un(Mo)}function Co(s){let e;return Xt.size===0&&un(Mo),{promise:new Promise(t=>{Xt.add(e={c:s,f:t})}),abort(){Xt.delete(e)}}}function d(s,e){s.appendChild(e)}function Po(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Xa(s){const e=h("style");return e.textContent="/* empty */",el(Po(s),e),e.sheet}function el(s,e){return d(s.head||s,e),e.sheet}function E(s,e,t){s.insertBefore(e,t||null)}function P(s){s.parentNode&&s.parentNode.removeChild(s)}function qe(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function h(s){return document.createElement(s)}function re(s){return document.createTextNode(s)}function w(){return re(" ")}function ze(){return re("")}function G(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function es(s){return function(e){return e.preventDefault(),s.call(this,e)}}function f(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function _r(s){return s===""?null:+s}function tl(s){return Array.from(s.childNodes)}function le(s,e){e=""+e,s.data!==e&&(s.data=e)}function J(s,e){s.value=e??""}function Je(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Xn(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}(!t||e!==void 0)&&(s.selectedIndex=-1)}function sl(s){const e=s.querySelector(":checked");return e&&e.__value}function Eo(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}function er(s,e){return new s(e)}const tr=new Map;let sr=0;function rl(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function nl(s,e){const t={stylesheet:Xa(e),rules:{}};return tr.set(s,t),t}function Wr(s,e,t,r,n,i,o,l=0){const a=16.666/r;let c=`{
`;for(let y=0;y<=1;y+=a){const b=e+(t-e)*i(y);c+=y*100+`%{${o(b,1-b)}}
`}const u=c+`100% {${o(t,1-t)}}
}`,m=`__svelte_${rl(u)}_${l}`,_=Po(s),{stylesheet:g,rules:p}=tr.get(_)||nl(_,s);p[m]||(p[m]=!0,g.insertRule(`@keyframes ${m} ${u}`,g.cssRules.length));const v=s.style.animation||"";return s.style.animation=`${v?`${v}, `:""}${m} ${r}ms linear ${n}ms 1 both`,sr+=1,m}function Br(s,e){const t=(s.style.animation||"").split(", "),r=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=t.length-r.length;n&&(s.style.animation=r.join(", "),sr-=n,sr||il())}function il(){un(()=>{sr||(tr.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&P(e)}),tr.clear())})}let Ts;function gt(s){Ts=s}function As(){if(!Ts)throw new Error("Function called outside component initialization");return Ts}function Ds(s){As().$$.on_mount.push(s)}function ol(s){As().$$.after_update.push(s)}function al(s){As().$$.on_destroy.push(s)}function ll(){const s=As();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const i=Eo(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,i)}),!i.defaultPrevented}return!0}}function rr(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Jt=[],as=[];let ts=[];const ei=[],Ro=Promise.resolve();let qr=!1;function jo(){qr||(qr=!0,Ro.then(fn))}function dn(){return jo(),Ro}function Ee(s){ts.push(s)}const jr=new Set;let zt=0;function fn(){if(zt!==0)return;const s=Ts;do{try{for(;zt<Jt.length;){const e=Jt[zt];zt++,gt(e),cl(e.$$)}}catch(e){throw Jt.length=0,zt=0,e}for(gt(null),Jt.length=0,zt=0;as.length;)as.pop()();for(let e=0;e<ts.length;e+=1){const t=ts[e];jr.has(t)||(jr.add(t),t())}ts.length=0}while(Jt.length);for(;ei.length;)ei.pop()();qr=!1,jr.clear(),gt(s)}function cl(s){if(s.fragment!==null){s.update(),De(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ee)}}function ul(s){const e=[],t=[];ts.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),ts=e}let ps;function Ao(){return ps||(ps=Promise.resolve(),ps.then(()=>{ps=null})),ps}function ys(s,e,t){s.dispatchEvent(Eo(`${e?"intro":"outro"}${t}`))}const qs=new Set;let bt;function Oe(){bt={r:0,c:[],p:bt}}function Te(){bt.r||De(bt.c),bt=bt.p}function O(s,e){s&&s.i&&(qs.delete(s),s.i(e))}function M(s,e,t,r){if(s&&s.o){if(qs.has(s))return;qs.add(s),bt.c.push(()=>{qs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}const Io={duration:0};function Ue(s,e,t){const r={direction:"in"};let n=e(s,t,r),i=!1,o,l,a=0;function c(){o&&Br(s,o)}function u(){const{delay:_=0,duration:g=300,easing:p=ln,tick:v=U,css:y}=n||Io;y&&(o=Wr(s,0,1,g,_,p,y,a++)),v(0,1);const b=Do()+_,k=b+g;l&&l.abort(),i=!0,Ee(()=>ys(s,!0,"start")),l=Co($=>{if(i){if($>=k)return v(1,0),ys(s,!0,"end"),c(),i=!1;if($>=b){const C=p(($-b)/g);v(C,1-C)}}return i})}let m=!1;return{start(){m||(m=!0,Br(s),js(n)?(n=n(r),Ao().then(u)):u())},invalidate(){m=!1},end(){i&&(c(),i=!1)}}}function ls(s,e,t,r){let i=e(s,t,{direction:"both"}),o=r?0:1,l=null,a=null,c=null,u;function m(){c&&Br(s,c)}function _(p,v){const y=p.b-o;return v*=Math.abs(y),{a:o,b:p.b,d:y,duration:v,start:p.start,end:p.start+v,group:p.group}}function g(p){const{delay:v=0,duration:y=300,easing:b=ln,tick:k=U,css:$}=i||Io,C={start:Do()+v,b:p};p||(C.group=bt,bt.r+=1),"inert"in s&&(p?u!==void 0&&(s.inert=u):(u=s.inert,s.inert=!0)),l||a?a=C:($&&(m(),c=Wr(s,o,p,y,v,b,$)),p&&k(0,1),l=_(C,y),Ee(()=>ys(s,p,"start")),Co(S=>{if(a&&S>a.start&&(l=_(a,y),a=null,ys(s,l.b,"start"),$&&(m(),c=Wr(s,o,l.b,l.duration,0,b,i.css))),l){if(S>=l.end)k(o=l.b,1-o),ys(s,l.b,"end"),a||(l.b?m():--l.group.r||De(l.group.c)),l=null;else if(S>=l.start){const T=S-l.start;o=l.a+l.d*b(T/l.duration),k(o,1-o)}}return!!(l||a)}))}return{run(p){js(i)?Ao().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){m(),l=a=null}}}function Vs(s,e){const t=e.token={};function r(n,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((m,_)=>{_!==i&&m&&(Oe(),M(m,1,1,()=>{e.blocks[_]===m&&(e.blocks[_]=null)}),Te())}):e.block.d(1),c.c(),O(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&fn()}if(Za(s)){const n=As();if(s.then(i=>{gt(n),r(e.then,1,e.value,i),gt(null)},i=>{if(gt(n),r(e.catch,2,e.error,i),gt(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,s),!0;e.resolved=s}}function Gs(s,e,t){const r=e.slice(),{resolved:n}=s;s.current===s.then&&(r[s.value]=n),s.current===s.catch&&(r[s.error]=n),s.block.p(r,t)}function Se(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function nr(s,e){const t={},r={},n={$$scope:1};let i=s.length;for(;i--;){const o=s[i],l=e[i];if(l){for(const a in o)a in l||(r[a]=1);for(const a in l)n[a]||(t[a]=l[a],n[a]=1);s[i]=l}else for(const a in o)n[a]=1}for(const o in r)o in t||(t[o]=void 0);return t}function ir(s){return typeof s=="object"&&s!==null?s:{}}function N(s){s&&s.c()}function L(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Ee(()=>{const i=s.$$.on_mount.map($o).filter(js);s.$$.on_destroy?s.$$.on_destroy.push(...i):De(i),s.$$.on_mount=[]}),n.forEach(Ee)}function Y(s,e){const t=s.$$;t.fragment!==null&&(ul(t.after_update),De(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function dl(s,e){s.$$.dirty[0]===-1&&(Jt.push(s),jo(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ge(s,e,t,r,n,i,o=null,l=[-1]){const a=Ts;gt(s);const c=s.$$={fragment:null,ctx:[],props:i,update:U,not_equal:n,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(s,e.props||{},(m,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[m],c.ctx[m]=p)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](p),u&&dl(s,m)),_}):[],c.update(),u=!0,De(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const m=tl(e.target);c.fragment&&c.fragment.l(m),m.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&O(s.$$.fragment),L(s,e.target,e.anchor),fn()}gt(a)}class be{constructor(){Rr(this,"$$");Rr(this,"$$set")}$destroy(){Y(this,1),this.$destroy=U}$on(e,t){if(!js(t))return U;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Qa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fl);const Wt=[];function Lo(s,e){return{subscribe:pr(s,e).subscribe}}function pr(s,e=U){let t;const r=new Set;function n(l){if(pe(s,l)&&(s=l,t)){const a=!Wt.length;for(const c of r)c[1](),Wt.push(c,s);if(a){for(let c=0;c<Wt.length;c+=2)Wt[c][0](Wt[c+1]);Wt.length=0}}}function i(l){n(l(s))}function o(l,a=U){const c=[l,a];return r.add(c),r.size===1&&(t=e(n,i)||U),l(s),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:o}}function Yo(s,e,t){const r=!Array.isArray(s),n=r?[s]:s;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Lo(t,(o,l)=>{let a=!1;const c=[];let u=0,m=U;const _=()=>{if(u)return;m();const p=e(r?c[0]:c,o,l);i?o(p):m=js(p)?p:U},g=n.map((p,v)=>So(p,y=>{c[v]=y,u&=~(1<<v),a&&_()},()=>{u|=1<<v}));return a=!0,_(),function(){De(g),m(),a=!1}})}const Rt=pr(localStorage.getItem("accType")),Js=pr(localStorage.getItem("user_id"));window.addEventListener("storage",function(s){let e;Js.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Rt.set(""),Js.set("")):(Js.set(localStorage.getItem("user_id")),Rt.set(localStorage.getItem("accType"))))});function hl(s,e){if(s instanceof RegExp)return{keys:!1,pattern:s};var t,r,n,i,o=[],l="",a=s.split("/");for(a[0]||a.shift();n=a.shift();)t=n[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function ml(s){let e,t,r;const n=[s[2]];var i=s[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Os(c,n[u]);return a!==void 0&&a&4&&(c=Os(c,nr(n,[ir(l[2])]))),{props:c}}return i&&(e=er(i,o(s)),e.$on("routeEvent",s[7])),{c(){e&&N(e.$$.fragment),t=ze()},m(l,a){e&&L(e,l,a),E(l,t,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=er(i,o(l,a)),e.$on("routeEvent",l[7]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(i){const c=a&4?nr(n,[ir(l[2])]):{};e.$set(c)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&M(e.$$.fragment,l),r=!1},d(l){l&&P(t),e&&Y(e,l)}}}function _l(s){let e,t,r;const n=[{params:s[1]},s[2]];var i=s[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Os(c,n[u]);return a!==void 0&&a&6&&(c=Os(c,nr(n,[a&2&&{params:l[1]},a&4&&ir(l[2])]))),{props:c}}return i&&(e=er(i,o(s)),e.$on("routeEvent",s[6])),{c(){e&&N(e.$$.fragment),t=ze()},m(l,a){e&&L(e,l,a),E(l,t,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Oe();const c=e;M(c.$$.fragment,1,0,()=>{Y(c,1)}),Te()}i?(e=er(i,o(l,a)),e.$on("routeEvent",l[6]),N(e.$$.fragment),O(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(i){const c=a&6?nr(n,[a&2&&{params:l[1]},a&4&&ir(l[2])]):{};e.$set(c)}},i(l){r||(e&&O(e.$$.fragment,l),r=!0)},o(l){e&&M(e.$$.fragment,l),r=!1},d(l){l&&P(t),e&&Y(e,l)}}}function pl(s){let e,t,r,n;const i=[_l,ml],o=[];function l(a,c){return a[1]?0:1}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function ti(){const s=window.location.href.indexOf("#/");let e=s>-1?window.location.href.substr(s+1):"/";const t=e.indexOf("?");let r="";return t>-1&&(r=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:r}}const hn=Lo(null,function(e){e(ti());const t=()=>{e(ti())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),gl=Yo(hn,s=>s.location),No=Yo(hn,s=>s.querystring),si=pr(void 0);async function bl(){await dn(),window.history.back()}async function vl(s){if(s.length<1||s.charAt(0)!="/"&&s.indexOf("#/")!==0)throw Error("Invalid parameter location");await dn();const e=(s.charAt(0)=="#"?"":"#")+s;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function wl(s){s?window.scrollTo(s.__svelte_spa_router_scrollX,s.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function yl(s,e,t){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(S,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:A}=hl(S);this.path=S,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=j,this._keys=A}match(S){if(n){if(typeof n=="string")if(S.startsWith(n))S=S.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const F=S.match(n);if(F&&F[0])S=S.substr(F[0].length)||"/";else return null}}const T=this._pattern.exec(S);if(T===null)return null;if(this._keys===!1)return T;const j={};let A=0;for(;A<this._keys.length;){try{j[this._keys[A]]=decodeURIComponent(T[A+1]||"")||null}catch{j[this._keys[A]]=null}A++}return j}async checkConditions(S){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](S))return!1;return!0}}const l=[];r instanceof Map?r.forEach((C,S)=>{l.push(new o(S,C))}):Object.keys(r).forEach(C=>{l.push(new o(C,r[C]))});let a=null,c=null,u={};const m=ll();async function _(C,S){await dn(),m(C,S)}let g=null,p=null;i&&(p=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?g=C.state:g=null},window.addEventListener("popstate",p),ol(()=>{wl(g)}));let v=null,y=null;const b=hn.subscribe(async C=>{v=C;let S=0;for(;S<l.length;){const T=l[S].match(C.location);if(!T){S++;continue}const j={route:l[S].path,location:C.location,querystring:C.querystring,userData:l[S].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await l[S].checkConditions(j)){t(0,a=null),y=null,_("conditionsFailed",j);return}_("routeLoading",Object.assign({},j));const A=l[S].component;if(y!=A){A.loading?(t(0,a=A.loading),y=A,t(1,c=A.loadingParams),t(2,u={}),_("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:c}))):(t(0,a=null),y=null);const F=await A();if(C!=v)return;t(0,a=F&&F.default||F),y=A}T&&typeof T=="object"&&Object.keys(T).length?t(1,c=T):t(1,c=null),t(2,u=l[S].props),_("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:c})).then(()=>{si.set(c)});return}t(0,a=null),y=null,si.set(void 0)});al(()=>{b(),p&&window.removeEventListener("popstate",p)});function k(C){rr.call(this,s,C)}function $(C){rr.call(this,s,C)}return s.$$set=C=>{"routes"in C&&t(3,r=C.routes),"prefix"in C&&t(4,n=C.prefix),"restoreScrollState"in C&&t(5,i=C.restoreScrollState)},s.$$.update=()=>{s.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,r,n,i,k,$]}class mn extends be{constructor(e){super(),ge(this,e,yl,pl,pe,{routes:3,prefix:4,restoreScrollState:5})}}const kl="modulepreload",$l=function(s){return"/library/"+s},ri={},cs=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(t.map(l=>{if(l=$l(l),l in ri)return;ri[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":kl,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((m,_)=>{u.addEventListener("load",m),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Sl=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class _n extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Ol extends _n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tl extends _n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dl extends _n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vr;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Vr||(Vr={}));var Ml=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};class Cl{constructor(e,{headers:t={},customFetch:r,region:n=Vr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Sl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Ml(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new Ol(p)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new Tl(u);if(!u.ok)throw new Dl(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var Pl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},us=Pl();const El=us.fetch,pn=us.fetch.bind(us),Uo=us.Headers,Rl=us.Request,jl=us.Response,Is=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uo,Request:Rl,Response:jl,default:pn,fetch:El},Symbol.toStringTag,{value:"Module"}));class Al extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Il{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,m=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&v===""?(_=204,g="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new Al(c)}return{error:c,data:u,count:m,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class Ll extends Il{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Kt extends Ll{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class Yl{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Kt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Nl="1.15.2",Ul={"X-Client-Info":`postgrest-js/${Nl}`};class gn{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ul),t),this.schemaName=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Yl(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",a=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Kt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Fl="2.9.5",xl={"X-Client-Info":`realtime-js/${Fl}`},Hl="1.0.0",Fo=1e4,zl=1e3;var ss;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ss||(ss={}));var Ge;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ge||(Ge={}));var nt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(nt||(nt={}));var Gr;(function(s){s.websocket="websocket"})(Gr||(Gr={}));var Nt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Nt||(Nt={}));class xo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Wl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+n));o=o+n;const a=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Ar{constructor(e,t,r={},n=Fo){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ni;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ni||(ni={}));class ks{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=ks.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ks.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const m=i[c];if(m){const _=u.map(y=>y.presence_ref),g=m.map(y=>y.presence_ref),p=u.filter(y=>g.indexOf(y.presence_ref)<0),v=m.filter(y=>_.indexOf(y.presence_ref)<0);p.length>0&&(l[c]=p),v.length>0&&(a[c]=v)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const m=e[l].map(g=>g.presence_ref),_=u.filter(g=>m.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(m=>m.presence_ref);c=c.filter(m=>u.indexOf(m.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pe;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Pe||(Pe={}));const ii=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Bl(o,s,e,n),i),{})},Bl=(s,e,t,r)=>{const n=e.find(l=>l.name===s),i=n==null?void 0:n.type,o=t[s];return i&&!r.includes(i)?Ho(i,o):Jr(o)},Ho=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Jl(e,t)}switch(s){case Pe.bool:return ql(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Vl(e);case Pe.json:case Pe.jsonb:return Gl(e);case Pe.timestamp:return Kl(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Jr(e);default:return Jr(e)}},Jr=s=>s,ql=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Vl=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Gl=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Jl=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ho(e,l))}return s},Kl=s=>typeof s=="string"?s.replace(" ","T"):s;var oi;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(oi||(oi={}));var ai;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(ai||(ai={}));var li;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class bn{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ar(this,nt.join,this.params,this.timeout),this.rejoinTimer=new xo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ks(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const m=this.bindings.postgres_changes,_=(u=m==null?void 0:m.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const v=m[p],{filter:{event:y,schema:b,table:k,filter:$}}=v,C=c&&c[p];if(C&&C.event===y&&C.schema===b&&C.table===k&&C.filter===$)g.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Ar(this,nt.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ar(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=nt;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,v,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(v=g.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(_,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,v,y,b,k,$;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const C=g.id,S=(p=g.filter)===null||p===void 0?void 0:p.event;return C&&((v=t.ids)===null||v===void 0?void 0:v.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(k=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return C==="*"||C===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:v,table:y,commit_timestamp:b,type:k,errors:$}=p;_=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:b,eventType:k,new:{},old:{},errors:$}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&bn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nt.close,{},e)}_onError(e){this._on(nt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ii(e.columns,e.old_record)),t}}const Zl=()=>{},Ql=typeof WebSocket<"u";class Xl{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=xl,this.params={},this.timeout=Fo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Zl,this.conn=null,this.sendBuffer=[],this.serializer=new Wl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Gr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ql){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ec(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),cs(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ss.connecting:return Nt.Connecting;case ss.open:return Nt.Open;case ss.closing:return Nt.Closing;default:return Nt.Closed}}isConnected(){return this.connectionState()===Nt.Open}channel(e,t={config:{}}){const r=new bn(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(nt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Hl}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(nt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(zl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ec{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ss.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class tc extends vn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ci extends vn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var sc=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};const zo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},rc=()=>sc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cs(()=>Promise.resolve().then(()=>Is),void 0)).Response:Response});var fs=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};const Ir=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),nc=(s,e)=>fs(void 0,void 0,void 0,function*(){const t=yield rc();s instanceof t?s.json().then(r=>{e(new tc(Ir(r),s.status||500))}).catch(r=>{e(new ci(Ir(r),r))}):e(new ci(Ir(s),s))}),ic=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function gr(s,e,t,r,n,i){return fs(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,ic(e,r,n,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>nc(a,l))})})}function Kr(s,e,t,r){return fs(this,void 0,void 0,function*(){return gr(s,"GET",e,t,r)})}function Dt(s,e,t,r,n){return fs(this,void 0,void 0,function*(){return gr(s,"POST",e,r,n,t)})}function oc(s,e,t,r,n){return fs(this,void 0,void 0,function*(){return gr(s,"PUT",e,r,n,t)})}function Wo(s,e,t,r,n){return fs(this,void 0,void 0,function*(){return gr(s,"DELETE",e,r,n,t)})}var Qe=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};const ac={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ui={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lc{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=zo(n)}uploadOrUpdate(e,t,r,n){return Qe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ui),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield u.json();return u.ok?{data:{path:a,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Qe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const c=Object.assign({upsert:ui.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),_=yield m.json();return m.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(a){if(xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Qe(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield Dt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new vn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}update(e,t,r){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Qe(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}copy(e,t){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return Qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Dt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Qe(this,void 0,void 0,function*(){try{const n=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,t){return Qe(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Kr(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Wo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}list(e,t,r){return Qe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ac),t),{prefix:e||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cc="2.5.5",uc={"X-Client-Info":`storage-js/${cc}`};var Bt=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};class dc{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},uc),t),this.fetch=zo(r)}listBuckets(){return Bt(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Bt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Bt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Wo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}})}}class fc extends dc{constructor(e,t={},r){super(e,t,r)}from(e){return new lc(this.url,this.headers,e,this.fetch)}}const hc="2.43.2";let ws="";typeof Deno<"u"?ws="deno":typeof document<"u"?ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ws="react-native":ws="node";const mc={"X-Client-Info":`supabase-js-${ws}/${hc}`},_c={headers:mc},pc={schema:"public"},gc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bc={};var vc=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};const wc=s=>{let e;return s?e=s:typeof fetch>"u"?e=pn:e=fetch,(...t)=>e(...t)},yc=()=>typeof Headers>"u"?Uo:Headers,kc=(s,e,t)=>{const r=wc(t),n=yc();return(i,o)=>vc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:s;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function $c(s){return s.replace(/\/$/,"")}function Sc(s,e){const{db:t,auth:r,realtime:n,global:i}=s,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const Bo="2.64.2",Oc="http://localhost:9999",Tc="supabase.auth.token",Dc={"X-Client-Info":`gotrue-js/${Bo}`},di=10,Zr="X-Supabase-Api-Version",qo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Mc(s){return Math.round(Date.now()/1e3)+s}function Cc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const rt=()=>typeof document<"u",At={tested:!1,writable:!1},$s=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(At.tested)return At.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),At.tested=!0,At.writable=!0}catch{At.tested=!0,At.writable=!1}return At.writable};function Lr(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}const Vo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cs(()=>Promise.resolve().then(()=>Is),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Pc=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Go=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},xs=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Yr=async(s,e)=>{await s.removeItem(e)};function Ec(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,n,i,o,l,a,c,u=0;for(s=s.replace("-","+").replace("_","/");u<s.length;)o=e.indexOf(s.charAt(u++)),l=e.indexOf(s.charAt(u++)),a=e.indexOf(s.charAt(u++)),c=e.indexOf(s.charAt(u++)),r=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,t=t+String.fromCharCode(r),a!=64&&n!=0&&(t=t+String.fromCharCode(n)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class br{constructor(){this.promise=new br.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}br.promiseConstructor=Promise;function fi(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Ec(r))}async function Rc(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function jc(s,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Ac(s){return("0"+s.toString(16)).substr(-2)}function Ic(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Ac).join("")}async function Lc(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function Yc(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nc(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Lc(s);return Yc(t)}async function qt(s,e,t=!1){const r=Ic();let n=r;t&&(n+="/PASSWORD_RECOVERY"),await Go(s,`${e}-code-verifier`,n);const i=await Nc(r);return[i,r===i?"plain":"s256"]}const Uc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fc(s){const e=s.headers.get(Zr);if(!e||!e.match(Uc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class wn extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function he(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class xc extends wn{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Hc(s){return he(s)&&s.name==="AuthApiError"}class Jo extends wn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xt extends wn{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class It extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Nr extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hs extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zs extends xt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hi extends xt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qr extends xt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ur(s){return he(s)&&s.name==="AuthRetryableFetchError"}class mi extends xt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var zc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const Yt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Wc=[502,503,504];async function _i(s){var e;if(!Pc(s))throw new Qr(Yt(s),0);if(Wc.includes(s.status))throw new Qr(Yt(s),s.status);let t;try{t=await s.json()}catch(i){throw new Jo(Yt(i),i)}let r;const n=Fc(s);if(n&&n.getTime()>=qo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new mi(Yt(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mi(Yt(t),s.status,t.weak_password.reasons);throw new xc(Yt(t),s.status||500,r)}const Bc=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function _e(s,e,t,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Zr]||(i[Zr]=qo["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await qc(s,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function qc(s,e,t,r,n,i){const o=Bc(e,r,n,i);let l;try{l=await s(t,Object.assign({},o))}catch(a){throw console.error(a),new Qr(Yt(a),0)}if(l.ok||await _i(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await _i(a)}}function Tt(s){var e;let t=null;Kc(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Mc(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function pi(s){const e=Tt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Mt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Vc(s){return{data:s,error:null}}function Gc(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i}=s,o=zc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Jc(s){return s}function Kc(s){return s.access_token&&s.refresh_token&&s.expires_in}var Zc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};class Qc{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Vo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Mt})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Zc(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Gc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(he(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mt})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Jc});if(u.error)throw u.error;const m=await u.json(),_=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},m),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mt})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Mt})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Mt})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(he(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}}const Xc={getItem:s=>$s()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{$s()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{$s()&&globalThis.localStorage.removeItem(s)}};function gi(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function eu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&$s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ko extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tu extends Ko{}async function su(s,e,t){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await t()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new tu(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Vt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}eu();const ru={url:Oc,storageKey:Tc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},gs=30*1e3,bi=3;async function vi(s,e,t){return await t()}class Ms{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ms.nextInstanceID,Ms.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},ru),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Qc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Vo(n.fetch),this.lock=n.lock||vi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:rt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=su:this.lock=vi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:$s()?this.storage=Xc:(this.memoryStorage={},this.storage=gi(this.memoryStorage)):(this.memoryStorage={},this.storage=gi(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=rt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return he(e)?{error:e}:{error:new Jo("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{await this._removeSession();const i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Tt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:m,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await qt(this.storage,this.storageKey)),i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:m,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:Tt})}else if("phone"in e){const{phone:u,password:m,options:_}=e;i=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Tt})}else throw new Hs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:pi})}else throw new Hs("You must provide either an email or phone number and a password");const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Nr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await xs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/"),{data:i,error:o}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tt});return await Yr(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Nr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:n,access_token:i,nonce:o}=e,l=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Tt}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Nr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await qt(this.storage,this.storageKey));const{error:m}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Hs("You must provide either an email or phone number.")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Tt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await qt(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Vc})}catch(i){if(he(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new It;const{error:n}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await _e(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:l}=await _e(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Hs("You must provide either an email or phone number and a type")}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mt}):await this._useSession(async t=>{var r,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Mt})})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new It;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await qt(this.storage,this.storageKey));const{data:c,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Mt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return fi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new It;const t=Date.now()/1e3;let r=t,n=!0,i=null;const o=fi(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(he(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new It;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!rt())throw new zs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new zs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new hi("Not a valid PKCE flow url.");const t=Lr(window.location.href);if(e){if(!t.code)throw new hi("No code detected.");const{data:k,error:$}=await this._exchangeCodeForSession(t.code);if($)throw $;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:k.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new zs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=t;if(!i||!l||!o||!c)throw new zs("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let _=u+m;a&&(_=parseInt(a));const g=_-u;g*1e3<=gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const p=_-m;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:v,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:_,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(t){if(he(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Lr(window.location.href);return!!(rt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Lr(window.location.href),t=await xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Hc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=Cc(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await qt(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(he(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:m,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return rt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(he(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)throw o;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await jc(async n=>(n>0&&await Rc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Ur(i)&&Date.now()+o-r<gs})}catch(r){if(this._debug(t,"error",r),he(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),rt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await xs(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+di;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${di}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ur(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new br;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new It;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),he(i)){const o={session:null,error:i};return Ur(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Go(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Yr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${gs}ms, refresh threshold is ${bi} ticks`),n<=bi&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ko)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(he(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(he(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Ms.nextInstanceID=0;const nu=Ms;class iu extends nu{constructor(e){super(e)}}var ou=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(m){o(m)}}function a(u){try{c(r.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(s,e||[])).next())})};class au{constructor(e,t,r){var n,i,o,l,a,c,u,m;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const _=$c(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:pc,realtime:bc,auth:Object.assign(Object.assign({},gc),{storageKey:g}),global:_c},v=Sc(r??{},p);this.storageKey=(i=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=kc(t,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new gn(`${_}/rest/v1`,{headers:this.headers,schema:(m=v.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Cl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ou(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iu({url:this.authUrl,headers:Object.assign(Object.assign({},m),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Xl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lu=(s,e,t)=>new au(s,e,t),ae=lu("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function wi(s){let e,t,r;return{c(){e=h("a"),e.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',t=w(),r=h("a"),r.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',f(e,"class","nav-link svelte-ecrr7r"),f(e,"href","./#/borrow"),f(r,"class","nav-link svelte-ecrr7r"),f(r,"href","./#/return")},m(n,i){E(n,e,i),E(n,t,i),E(n,r,i)},d(n){n&&(P(e),P(t),P(r))}}}function cu(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe=s[0]=="staff"&&wi();return{c(){e=h("nav"),t=h("div"),r=h("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=w(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=w(),l=h("div"),a=h("div"),c=h("a"),c.innerHTML='<i class="bi bi-house-door"></i> Home',u=w(),m=h("a"),m.innerHTML='<i class="bi bi-journal"></i> Books',_=w(),g=h("a"),g.innerHTML='<i class="bi bi-person"></i> Authors',p=w(),v=h("a"),v.innerHTML='<i class="bi bi-building"></i> Publishers',y=w(),oe&&oe.c(),b=w(),k=h("li"),$=h("a"),C=h("i"),S=w(),T=re(s[1]),j=w(),A=h("ul"),F=h("li"),F.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Profile</a>',Z=w(),H=h("li"),H.innerHTML='<a class="dropdown-item disabled svelte-ecrr7r" href="#">Settings</a>',K=w(),W=h("li"),W.innerHTML='<hr class="dropdown-divider"/>',R=w(),I=h("li"),D=h("a"),D.textContent="Log Out",V=w(),te=h("button"),x=h("span"),f(r,"class","navbar-brand m-0 px-2 svelte-ecrr7r"),f(r,"href","./#/"),f(i,"class","navbar-toggler"),f(i,"type","button"),f(i,"data-bs-toggle","collapse"),f(i,"data-bs-target","#navbarContent"),f(c,"class","nav-link svelte-ecrr7r"),f(c,"href","./#/"),f(m,"class","nav-link svelte-ecrr7r"),f(m,"href","./#/search"),f(g,"class","nav-link svelte-ecrr7r"),f(g,"href","./#/search/author"),f(v,"class","nav-link svelte-ecrr7r"),f(v,"href","./#/search/publisher"),f(C,"class","bi bi-person-fill"),f($,"class","nav-link dropdown-toggle svelte-ecrr7r"),f($,"href","#"),f($,"role","button"),f($,"data-bs-toggle","dropdown"),f($,"aria-expanded","false"),f(D,"class","dropdown-item text-danger svelte-ecrr7r"),f(D,"href","./#/"),f(A,"class","dropdown-menu"),f(k,"class","nav-item dropdown"),f(x,"class",B="bi bi-"+s[2]+" svelte-ecrr7r"),f(te,"title","Switch theme"),f(te,"class","px-1 border-0 bg-transparent nav-link svelte-ecrr7r"),f(a,"class","navbar-nav ms-auto text-center svelte-ecrr7r"),f(l,"class","collapse navbar-collapse"),f(l,"id","navbarContent"),f(t,"class","container px-4 fw-semibold"),f(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow svelte-ecrr7r")},m(se,fe){E(se,e,fe),d(e,t),d(t,r),d(t,n),d(t,i),d(t,o),d(t,l),d(l,a),d(a,c),d(a,u),d(a,m),d(a,_),d(a,g),d(a,p),d(a,v),d(a,y),oe&&oe.m(a,null),d(a,b),d(a,k),d(k,$),d($,C),d($,S),d($,T),d(k,j),d(k,A),d(A,F),d(A,Z),d(A,H),d(A,K),d(A,W),d(A,R),d(A,I),d(I,D),d(a,V),d(a,te),d(te,x),X||(we=[G(D,"click",s[4]),G(te,"click",s[3])],X=!0)},p(se,[fe]){se[0]=="staff"?oe||(oe=wi(),oe.c(),oe.m(a,b)):oe&&(oe.d(1),oe=null),fe&2&&le(T,se[1]),fe&4&&B!==(B="bi bi-"+se[2]+" svelte-ecrr7r")&&f(x,"class",B)},i:U,o:U,d(se){se&&P(e),oe&&oe.d(),X=!1,De(we)}}}function uu(s,e,t){let r,n,i=localStorage.getItem("user_id");Rt.subscribe(m=>t(0,n=m)),l();let o="";async function l(){const{data:m,error:_}=await ae.from("account_details").select("lname").eq("user_id",i).single();_&&console.error(_),console.log(i,m),t(1,o=m.lname)}let a=localStorage.getItem("theme")||"light";function c(){t(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){Rt.set(""),Js.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return s.$$.update=()=>{s.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),s.$$.dirty&32&&t(2,r=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,r,c,u,a]}class Zo extends be{constructor(e){super(),ge(this,e,uu,cu,pe,{})}}function du(s){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,r){E(t,e,r)},p:U,i:U,o:U,d(t){t&&P(e)}}}class fu extends be{constructor(e){super(),ge(this,e,null,du,pe,{})}}function hu(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p;return{c(){e=h("div"),t=h("img"),n=w(),i=h("div"),o=h("h5"),l=h("a"),a=re(s[1]),u=w(),m=h("small"),_=h("i"),g=w(),p=re(s[2]),et(t.src,r=s[3])||f(t,"src",r),f(t,"alt","book cover"),f(t,"class","svelte-1a99e4f"),f(l,"class","stretched-link svelte-1a99e4f"),f(l,"href",c="./#/book/"+s[0]),f(o,"class","card-title"),f(_,"class","bi bi-person"),f(m,"class","card-text"),f(i,"class","card-body"),f(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(v,y){E(v,e,y),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a),d(i,u),d(i,m),d(m,_),d(m,g),d(m,p)},p(v,[y]){y&2&&le(a,v[1]),y&1&&c!==(c="./#/book/"+v[0])&&f(l,"href",c),y&4&&le(p,v[2])},i:U,o:U,d(v){v&&P(e)}}}function mu(s,e,t){let{id:r=0}=e,{title:n}=e,{author:i}=e,o=r>4?"./book-cover.png":`./${r}.jpg`;return s.$$set=l=>{"id"in l&&t(0,r=l.id),"title"in l&&t(1,n=l.title),"author"in l&&t(2,i=l.author)},[r,n,i,o]}class vr extends be{constructor(e){super(),ge(this,e,mu,hu,pe,{id:0,title:1,author:2})}}function yi(s){let e,t,r,n,i,o,l;return{c(){e=h("div"),t=h("a"),r=h("button"),n=re(s[3]),i=w(),o=h("i"),f(o,"class","bi bi-arrow-right"),f(r,"class","btn btn-outline-primary btn-sm"),f(t,"href",l="./#/"+s[2]),f(e,"class","align-middle align-self-center")},m(a,c){E(a,e,c),d(e,t),d(t,r),d(r,n),d(r,i),d(r,o)},p(a,c){c&8&&le(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&f(t,"href",l)},d(a){a&&P(e)}}}function _u(s){let e,t,r,n,i,o,l,a,c,u,m=s[2]!==""&&yi(s);const _=s[5].default,g=dr(_,s,s[4],null);return{c(){e=h("section"),t=h("div"),r=h("h4"),n=h("i"),o=w(),l=re(s[0]),a=w(),m&&m.c(),c=w(),g&&g.c(),f(n,"class",i="bi bi-"+s[1]),f(r,"class","my-3"),f(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,v){E(p,e,v),d(e,t),d(t,r),d(r,n),d(r,o),d(r,l),d(t,a),m&&m.m(t,null),d(e,c),g&&g.m(e,null),u=!0},p(p,[v]){(!u||v&2&&i!==(i="bi bi-"+p[1]))&&f(n,"class",i),(!u||v&1)&&le(l,p[0]),p[2]!==""?m?m.p(p,v):(m=yi(p),m.c(),m.m(t,null)):m&&(m.d(1),m=null),g&&g.p&&(!u||v&16)&&hr(g,_,p,p[4],u?fr(_,p[4],v,null):mr(p[4]),null)},i(p){u||(O(g,p),u=!0)},o(p){M(g,p),u=!1},d(p){p&&P(e),m&&m.d(),g&&g.d(p)}}}function pu(s,e,t){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return s.$$set=c=>{"title"in c&&t(0,i=c.title),"icon"in c&&t(1,o=c.icon),"link"in c&&t(2,l=c.link),"linkText"in c&&t(3,a=c.linkText),"$$scope"in c&&t(4,n=c.$$scope)},[i,o,l,a,n,r]}class dt extends be{constructor(e){super(),ge(this,e,pu,_u,pe,{title:0,icon:1,link:2,linkText:3})}}function gu(s){const e=s-1;return e*e*e+1}function Fe(s,{delay:e=0,duration:t=400,easing:r=ln}={}){const n=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:r,css:i=>`opacity: ${i*n}`}}function ds(s,{delay:e=0,duration:t=400,easing:r=gu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(s),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[m,_]=Qn(n),[g,p]=Qn(i);return{delay:e,duration:t,easing:r,css:(v,y)=>`
			transform: ${c} translate(${(1-v)*m}${_}, ${(1-v)*g}${p});
			opacity: ${a-u*y}`}}function bu(s){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',f(e,"class","d-flex justify-content-center")},m(t,r){E(t,e,r)},p:U,i:U,o:U,d(t){t&&P(e)}}}class jt extends be{constructor(e){super(),ge(this,e,null,bu,pe,{})}}function vu(s){let e,t,r,n,i,o,l,a,c;return{c(){e=h("div"),t=h("img"),n=w(),i=h("div"),o=h("h6"),l=h("a"),a=re(s[0]),f(t,"class","object-fit-contain rounded my-2"),f(t,"height","150"),et(t.src,r="./default-profile.jpg")||f(t,"src",r),f(t,"alt","author"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/author/"+s[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/author/"+u[1])&&f(l,"href",c)},i:U,o:U,d(u){u&&P(e)}}}function wu(s,e,t){let{name:r}=e,{id:n}=e;return s.$$set=i=>{"name"in i&&t(0,r=i.name),"id"in i&&t(1,n=i.id)},[r,n]}class Qo extends be{constructor(e){super(),ge(this,e,wu,vu,pe,{name:0,id:1})}}function yu(s){let e,t,r,n,i,o,l,a,c;return{c(){e=h("div"),t=h("img"),n=w(),i=h("div"),o=h("h6"),l=h("a"),a=re(s[0]),f(t,"class","object-fit-contain rounded my-2"),f(t,"height","150"),et(t.src,r="./default-profile.jpg")||f(t,"src",r),f(t,"alt","publisher"),f(l,"class","stretched-link svelte-1rzxrzv"),f(l,"href",c="./#/publisher/"+s[1]),f(o,"class","card-title text-center"),f(i,"class","card-body p-1"),f(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,m){E(u,e,m),d(e,t),d(e,n),d(e,i),d(i,o),d(o,l),d(l,a)},p(u,[m]){m&1&&le(a,u[0]),m&2&&c!==(c="./#/publisher/"+u[1])&&f(l,"href",c)},i:U,o:U,d(u){u&&P(e)}}}function ku(s,e,t){let{name:r}=e,{id:n}=e;return s.$$set=i=>{"name"in i&&t(0,r=i.name),"id"in i&&t(1,n=i.id)},[r,n]}class Xo extends be{constructor(e){super(),ge(this,e,ku,yu,pe,{name:0,id:1})}}function $u(s){let e,t,r,n,i,o,l,a,c,u;return{c(){e=h("div"),t=h("div"),r=h("h2"),r.textContent="Error",n=w(),i=h("p"),o=re(s[0]),l=re(": "),a=re(s[1]),c=w(),u=h("a"),u.textContent="Reload",f(u,"href","./#/"),f(u,"class","fw-bold"),f(t,"class","text-center"),f(e,"class","d-flex align-items-center justify-content-center my-3")},m(m,_){E(m,e,_),d(e,t),d(t,r),d(t,n),d(t,i),d(i,o),d(i,l),d(i,a),d(t,c),d(t,u)},p(m,[_]){_&1&&le(o,m[0]),_&2&&le(a,m[1])},i:U,o:U,d(m){m&&P(e)}}}function Su(s,e,t){let{code:r="err"}=e,{message:n}=e;return s.$$set=i=>{"code"in i&&t(0,r=i.code),"message"in i&&t(1,n=i.message)},[r,n]}let wr=class extends be{constructor(e){super(),ge(this,e,Su,$u,pe,{code:0,message:1})}};function Ou(s){let e,t,r,n,i,o,l,a,c,u,m;return{c(){e=h("div"),t=h("div"),r=h("h5"),n=h("a"),i=re(s[1]),l=w(),a=h("div"),c=h("span"),u=re(s[2]),f(n,"class","stretched-link svelte-9p7s9b"),f(n,"href",o="./#/book/"+s[0]),f(r,"class","card-title"),f(c,"class",m="badge rounded-pill text-bg-"+s[3]+" svelte-9p7s9b"),f(t,"class","card-body"),f(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(_,g){E(_,e,g),d(e,t),d(t,r),d(r,n),d(n,i),d(t,l),d(t,a),d(a,c),d(c,u)},p(_,[g]){g&2&&le(i,_[1]),g&1&&o!==(o="./#/book/"+_[0])&&f(n,"href",o),g&4&&le(u,_[2]),g&8&&m!==(m="badge rounded-pill text-bg-"+_[3]+" svelte-9p7s9b")&&f(c,"class",m)},i:U,o:U,d(_){_&&P(e)}}}function Tu(s,e,t){let{id:r=0}=e,{title:n}=e,{label:i}=e,{color:o}=e;return s.$$set=l=>{"id"in l&&t(0,r=l.id),"title"in l&&t(1,n=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[r,n,i,o]}class Du extends be{constructor(e){super(),ge(this,e,Tu,Ou,pe,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ea;function z(){return ea.apply(null,arguments)}function Mu(s){ea=s}function ot(s){return s instanceof Array||Object.prototype.toString.call(s)==="[object Array]"}function Ft(s){return s!=null&&Object.prototype.toString.call(s)==="[object Object]"}function ke(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function yn(s){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(s).length===0;var e;for(e in s)if(ke(s,e))return!1;return!0}function Ve(s){return s===void 0}function $t(s){return typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]"}function Ls(s){return s instanceof Date||Object.prototype.toString.call(s)==="[object Date]"}function ta(s,e){var t=[],r,n=s.length;for(r=0;r<n;++r)t.push(e(s[r],r));return t}function Ct(s,e){for(var t in e)ke(e,t)&&(s[t]=e[t]);return ke(e,"toString")&&(s.toString=e.toString),ke(e,"valueOf")&&(s.valueOf=e.valueOf),s}function ht(s,e,t,r){return Sa(s,e,t,r,!0).utc()}function Cu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function de(s){return s._pf==null&&(s._pf=Cu()),s._pf}var Xr;Array.prototype.some?Xr=Array.prototype.some:Xr=function(s){var e=Object(this),t=e.length>>>0,r;for(r=0;r<t;r++)if(r in e&&s.call(this,e[r],r,e))return!0;return!1};function kn(s){var e=null,t=!1,r=s._d&&!isNaN(s._d.getTime());if(r&&(e=de(s),t=Xr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),s._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(s))s._isValid=r;else return r;return s._isValid}function yr(s){var e=ht(NaN);return s!=null?Ct(de(e),s):de(e).userInvalidated=!0,e}var ki=z.momentProperties=[],Fr=!1;function $n(s,e){var t,r,n,i=ki.length;if(Ve(e._isAMomentObject)||(s._isAMomentObject=e._isAMomentObject),Ve(e._i)||(s._i=e._i),Ve(e._f)||(s._f=e._f),Ve(e._l)||(s._l=e._l),Ve(e._strict)||(s._strict=e._strict),Ve(e._tzm)||(s._tzm=e._tzm),Ve(e._isUTC)||(s._isUTC=e._isUTC),Ve(e._offset)||(s._offset=e._offset),Ve(e._pf)||(s._pf=de(e)),Ve(e._locale)||(s._locale=e._locale),i>0)for(t=0;t<i;t++)r=ki[t],n=e[r],Ve(n)||(s[r]=n);return s}function Ys(s){$n(this,s),this._d=new Date(s._d!=null?s._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Fr===!1&&(Fr=!0,z.updateOffset(this),Fr=!1)}function at(s){return s instanceof Ys||s!=null&&s._isAMomentObject!=null}function sa(s){z.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+s)}function tt(s,e){var t=!0;return Ct(function(){if(z.deprecationHandler!=null&&z.deprecationHandler(null,s),t){var r=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])ke(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}sa(s+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var $i={};function ra(s,e){z.deprecationHandler!=null&&z.deprecationHandler(s,e),$i[s]||(sa(e),$i[s]=!0)}z.suppressDeprecationWarnings=!1;z.deprecationHandler=null;function mt(s){return typeof Function<"u"&&s instanceof Function||Object.prototype.toString.call(s)==="[object Function]"}function Pu(s){var e,t;for(t in s)ke(s,t)&&(e=s[t],mt(e)?this[t]=e:this["_"+t]=e);this._config=s,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(s,e){var t=Ct({},s),r;for(r in e)ke(e,r)&&(Ft(s[r])&&Ft(e[r])?(t[r]={},Ct(t[r],s[r]),Ct(t[r],e[r])):e[r]!=null?t[r]=e[r]:delete t[r]);for(r in s)ke(s,r)&&!ke(e,r)&&Ft(s[r])&&(t[r]=Ct({},t[r]));return t}function Sn(s){s!=null&&this.set(s)}var tn;Object.keys?tn=Object.keys:tn=function(s){var e,t=[];for(e in s)ke(s,e)&&t.push(e);return t};var Eu={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ru(s,e,t){var r=this._calendar[s]||this._calendar.sameElse;return mt(r)?r.call(e,t):r}function ft(s,e,t){var r=""+Math.abs(s),n=e-r.length,i=s>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var On=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ws=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xr={},rs={};function ne(s,e,t,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),s&&(rs[s]=n),e&&(rs[e[0]]=function(){return ft(n.apply(this,arguments),e[1],e[2])}),t&&(rs[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),s)})}function ju(s){return s.match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"")}function Au(s){var e=s.match(On),t,r;for(t=0,r=e.length;t<r;t++)rs[e[t]]?e[t]=rs[e[t]]:e[t]=ju(e[t]);return function(n){var i="",o;for(o=0;o<r;o++)i+=mt(e[o])?e[o].call(n,s):e[o];return i}}function Ks(s,e){return s.isValid()?(e=na(e,s.localeData()),xr[e]=xr[e]||Au(e),xr[e](s)):s.localeData().invalidDate()}function na(s,e){var t=5;function r(n){return e.longDateFormat(n)||n}for(Ws.lastIndex=0;t>=0&&Ws.test(s);)s=s.replace(Ws,r),Ws.lastIndex=0,t-=1;return s}var Iu={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Lu(s){var e=this._longDateFormat[s],t=this._longDateFormat[s.toUpperCase()];return e||!t?e:(this._longDateFormat[s]=t.match(On).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[s])}var Yu="Invalid date";function Nu(){return this._invalidDate}var Uu="%d",Fu=/\d{1,2}/;function xu(s){return this._ordinal.replace("%d",s)}var Hu={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function zu(s,e,t,r){var n=this._relativeTime[t];return mt(n)?n(s,e,t,r):n.replace(/%d/i,s)}function Wu(s,e){var t=this._relativeTime[s>0?"future":"past"];return mt(t)?t(e):t.replace(/%s/i,e)}var Si={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function st(s){return typeof s=="string"?Si[s]||Si[s.toLowerCase()]:void 0}function Tn(s){var e={},t,r;for(r in s)ke(s,r)&&(t=st(r),t&&(e[t]=s[r]));return e}var Bu={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function qu(s){var e=[],t;for(t in s)ke(s,t)&&e.push({unit:t,priority:Bu[t]});return e.sort(function(r,n){return r.priority-n.priority}),e}var ia=/\d/,Ke=/\d\d/,oa=/\d{3}/,Dn=/\d{4}/,kr=/[+-]?\d{6}/,je=/\d\d?/,aa=/\d\d\d\d?/,la=/\d\d\d\d\d\d?/,$r=/\d{1,3}/,Mn=/\d{1,4}/,Sr=/[+-]?\d{1,6}/,hs=/\d+/,Or=/[+-]?\d+/,Vu=/Z|[+-]\d\d:?\d\d/gi,Tr=/Z|[+-]\d\d(?::?\d\d)?/gi,Gu=/[+-]?\d+(\.\d{1,3})?/,Ns=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ms=/^[1-9]\d?/,Cn=/^([1-9]\d|\d)/,or;or={};function Q(s,e,t){or[s]=mt(e)?e:function(r,n){return r&&t?t:e}}function Ju(s,e){return ke(or,s)?or[s](e._strict,e._locale):new RegExp(Ku(s))}function Ku(s){return yt(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}function yt(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Xe(s){return s<0?Math.ceil(s)||0:Math.floor(s)}function me(s){var e=+s,t=0;return e!==0&&isFinite(e)&&(t=Xe(e)),t}var sn={};function Me(s,e){var t,r=e,n;for(typeof s=="string"&&(s=[s]),$t(e)&&(r=function(i,o){o[e]=me(i)}),n=s.length,t=0;t<n;t++)sn[s[t]]=r}function Us(s,e){Me(s,function(t,r,n,i){n._w=n._w||{},e(t,n._w,n,i)})}function Zu(s,e,t){e!=null&&ke(sn,s)&&sn[s](e,t._a,t,s)}function Dr(s){return s%4===0&&s%100!==0||s%400===0}var He=0,vt=1,ct=2,Ne=3,it=4,wt=5,Ut=6,Qu=7,Xu=8;ne("Y",0,0,function(){var s=this.year();return s<=9999?ft(s,4):"+"+s});ne(0,["YY",2],0,function(){return this.year()%100});ne(0,["YYYY",4],0,"year");ne(0,["YYYYY",5],0,"year");ne(0,["YYYYYY",6,!0],0,"year");Q("Y",Or);Q("YY",je,Ke);Q("YYYY",Mn,Dn);Q("YYYYY",Sr,kr);Q("YYYYYY",Sr,kr);Me(["YYYYY","YYYYYY"],He);Me("YYYY",function(s,e){e[He]=s.length===2?z.parseTwoDigitYear(s):me(s)});Me("YY",function(s,e){e[He]=z.parseTwoDigitYear(s)});Me("Y",function(s,e){e[He]=parseInt(s,10)});function Ss(s){return Dr(s)?366:365}z.parseTwoDigitYear=function(s){return me(s)+(me(s)>68?1900:2e3)};var ca=_s("FullYear",!0);function ed(){return Dr(this.year())}function _s(s,e){return function(t){return t!=null?(ua(this,s,t),z.updateOffset(this,e),this):Cs(this,s)}}function Cs(s,e){if(!s.isValid())return NaN;var t=s._d,r=s._isUTC;switch(e){case"Milliseconds":return r?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return r?t.getUTCSeconds():t.getSeconds();case"Minutes":return r?t.getUTCMinutes():t.getMinutes();case"Hours":return r?t.getUTCHours():t.getHours();case"Date":return r?t.getUTCDate():t.getDate();case"Day":return r?t.getUTCDay():t.getDay();case"Month":return r?t.getUTCMonth():t.getMonth();case"FullYear":return r?t.getUTCFullYear():t.getFullYear();default:return NaN}}function ua(s,e,t){var r,n,i,o,l;if(!(!s.isValid()||isNaN(t))){switch(r=s._d,n=s._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(t):r.setMilliseconds(t));case"Seconds":return void(n?r.setUTCSeconds(t):r.setSeconds(t));case"Minutes":return void(n?r.setUTCMinutes(t):r.setMinutes(t));case"Hours":return void(n?r.setUTCHours(t):r.setHours(t));case"Date":return void(n?r.setUTCDate(t):r.setDate(t));case"FullYear":break;default:return}i=t,o=s.month(),l=s.date(),l=l===29&&o===1&&!Dr(i)?28:l,n?r.setUTCFullYear(i,o,l):r.setFullYear(i,o,l)}}function td(s){return s=st(s),mt(this[s])?this[s]():this}function sd(s,e){if(typeof s=="object"){s=Tn(s);var t=qu(s),r,n=t.length;for(r=0;r<n;r++)this[t[r].unit](s[t[r].unit])}else if(s=st(s),mt(this[s]))return this[s](e);return this}function rd(s,e){return(s%e+e)%e}var Ye;Array.prototype.indexOf?Ye=Array.prototype.indexOf:Ye=function(s){var e;for(e=0;e<this.length;++e)if(this[e]===s)return e;return-1};function Pn(s,e){if(isNaN(s)||isNaN(e))return NaN;var t=rd(e,12);return s+=(e-t)/12,t===1?Dr(s)?29:28:31-t%7%2}ne("M",["MM",2],"Mo",function(){return this.month()+1});ne("MMM",0,0,function(s){return this.localeData().monthsShort(this,s)});ne("MMMM",0,0,function(s){return this.localeData().months(this,s)});Q("M",je,ms);Q("MM",je,Ke);Q("MMM",function(s,e){return e.monthsShortRegex(s)});Q("MMMM",function(s,e){return e.monthsRegex(s)});Me(["M","MM"],function(s,e){e[vt]=me(s)-1});Me(["MMM","MMMM"],function(s,e,t,r){var n=t._locale.monthsParse(s,r,t._strict);n!=null?e[vt]=n:de(t).invalidMonth=s});var nd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),da="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,id=Ns,od=Ns;function ad(s,e){return s?ot(this._months)?this._months[s.month()]:this._months[(this._months.isFormat||fa).test(e)?"format":"standalone"][s.month()]:ot(this._months)?this._months:this._months.standalone}function ld(s,e){return s?ot(this._monthsShort)?this._monthsShort[s.month()]:this._monthsShort[fa.test(e)?"format":"standalone"][s.month()]:ot(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function cd(s,e,t){var r,n,i,o=s.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=ht([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:(n=Ye.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ye.call(this._longMonthsParse,o),n!==-1?n:(n=Ye.call(this._shortMonthsParse,o),n!==-1?n:null))}function ud(s,e,t){var r,n,i;if(this._monthsParseExact)return cd.call(this,s,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=ht([2e3,r]),t&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[r].test(s))return r;if(t&&e==="MMM"&&this._shortMonthsParse[r].test(s))return r;if(!t&&this._monthsParse[r].test(s))return r}}function ha(s,e){if(!s.isValid())return s;if(typeof e=="string"){if(/^\d+$/.test(e))e=me(e);else if(e=s.localeData().monthsParse(e),!$t(e))return s}var t=e,r=s.date();return r=r<29?r:Math.min(r,Pn(s.year(),t)),s._isUTC?s._d.setUTCMonth(t,r):s._d.setMonth(t,r),s}function ma(s){return s!=null?(ha(this,s),z.updateOffset(this,!0),this):Cs(this,"Month")}function dd(){return Pn(this.year(),this.month())}function fd(s){return this._monthsParseExact?(ke(this,"_monthsRegex")||_a.call(this),s?this._monthsShortStrictRegex:this._monthsShortRegex):(ke(this,"_monthsShortRegex")||(this._monthsShortRegex=id),this._monthsShortStrictRegex&&s?this._monthsShortStrictRegex:this._monthsShortRegex)}function hd(s){return this._monthsParseExact?(ke(this,"_monthsRegex")||_a.call(this),s?this._monthsStrictRegex:this._monthsRegex):(ke(this,"_monthsRegex")||(this._monthsRegex=od),this._monthsStrictRegex&&s?this._monthsStrictRegex:this._monthsRegex)}function _a(){function s(a,c){return c.length-a.length}var e=[],t=[],r=[],n,i,o,l;for(n=0;n<12;n++)i=ht([2e3,n]),o=yt(this.monthsShort(i,"")),l=yt(this.months(i,"")),e.push(o),t.push(l),r.push(l),r.push(o);e.sort(s),t.sort(s),r.sort(s),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function md(s,e,t,r,n,i,o){var l;return s<100&&s>=0?(l=new Date(s+400,e,t,r,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(s)):l=new Date(s,e,t,r,n,i,o),l}function Ps(s){var e,t;return s<100&&s>=0?(t=Array.prototype.slice.call(arguments),t[0]=s+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(s)):e=new Date(Date.UTC.apply(null,arguments)),e}function ar(s,e,t){var r=7+e-t,n=(7+Ps(s,0,r).getUTCDay()-e)%7;return-n+r-1}function pa(s,e,t,r,n){var i=(7+t-r)%7,o=ar(s,r,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=s-1,c=Ss(a)+l):l>Ss(s)?(a=s+1,c=l-Ss(s)):(a=s,c=l),{year:a,dayOfYear:c}}function Es(s,e,t){var r=ar(s.year(),e,t),n=Math.floor((s.dayOfYear()-r-1)/7)+1,i,o;return n<1?(o=s.year()-1,i=n+kt(o,e,t)):n>kt(s.year(),e,t)?(i=n-kt(s.year(),e,t),o=s.year()+1):(o=s.year(),i=n),{week:i,year:o}}function kt(s,e,t){var r=ar(s,e,t),n=ar(s+1,e,t);return(Ss(s)-r+n)/7}ne("w",["ww",2],"wo","week");ne("W",["WW",2],"Wo","isoWeek");Q("w",je,ms);Q("ww",je,Ke);Q("W",je,ms);Q("WW",je,Ke);Us(["w","ww","W","WW"],function(s,e,t,r){e[r.substr(0,1)]=me(s)});function _d(s){return Es(s,this._week.dow,this._week.doy).week}var pd={dow:0,doy:6};function gd(){return this._week.dow}function bd(){return this._week.doy}function vd(s){var e=this.localeData().week(this);return s==null?e:this.add((s-e)*7,"d")}function wd(s){var e=Es(this,1,4).week;return s==null?e:this.add((s-e)*7,"d")}ne("d",0,"do","day");ne("dd",0,0,function(s){return this.localeData().weekdaysMin(this,s)});ne("ddd",0,0,function(s){return this.localeData().weekdaysShort(this,s)});ne("dddd",0,0,function(s){return this.localeData().weekdays(this,s)});ne("e",0,0,"weekday");ne("E",0,0,"isoWeekday");Q("d",je);Q("e",je);Q("E",je);Q("dd",function(s,e){return e.weekdaysMinRegex(s)});Q("ddd",function(s,e){return e.weekdaysShortRegex(s)});Q("dddd",function(s,e){return e.weekdaysRegex(s)});Us(["dd","ddd","dddd"],function(s,e,t,r){var n=t._locale.weekdaysParse(s,r,t._strict);n!=null?e.d=n:de(t).invalidWeekday=s});Us(["d","e","E"],function(s,e,t,r){e[r]=me(s)});function yd(s,e){return typeof s!="string"?s:isNaN(s)?(s=e.weekdaysParse(s),typeof s=="number"?s:null):parseInt(s,10)}function kd(s,e){return typeof s=="string"?e.weekdaysParse(s)%7||7:isNaN(s)?null:s}function En(s,e){return s.slice(e,7).concat(s.slice(0,e))}var $d="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ga="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Od=Ns,Td=Ns,Dd=Ns;function Md(s,e){var t=ot(this._weekdays)?this._weekdays:this._weekdays[s&&s!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return s===!0?En(t,this._week.dow):s?t[s.day()]:t}function Cd(s){return s===!0?En(this._weekdaysShort,this._week.dow):s?this._weekdaysShort[s.day()]:this._weekdaysShort}function Pd(s){return s===!0?En(this._weekdaysMin,this._week.dow):s?this._weekdaysMin[s.day()]:this._weekdaysMin}function Ed(s,e,t){var r,n,i,o=s.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=ht([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ye.call(this._weekdaysParse,o),n!==-1||(n=Ye.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ye.call(this._shortWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ye.call(this._minWeekdaysParse,o),n!==-1||(n=Ye.call(this._weekdaysParse,o),n!==-1)?n:(n=Ye.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Rd(s,e,t){var r,n,i;if(this._weekdaysParseExact)return Ed.call(this,s,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=ht([2e3,1]).day(r),t&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[r].test(s))return r;if(t&&e==="ddd"&&this._shortWeekdaysParse[r].test(s))return r;if(t&&e==="dd"&&this._minWeekdaysParse[r].test(s))return r;if(!t&&this._weekdaysParse[r].test(s))return r}}function jd(s){if(!this.isValid())return s!=null?this:NaN;var e=Cs(this,"Day");return s!=null?(s=yd(s,this.localeData()),this.add(s-e,"d")):e}function Ad(s){if(!this.isValid())return s!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return s==null?e:this.add(s-e,"d")}function Id(s){if(!this.isValid())return s!=null?this:NaN;if(s!=null){var e=kd(s,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Ld(s){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),s?this._weekdaysStrictRegex:this._weekdaysRegex):(ke(this,"_weekdaysRegex")||(this._weekdaysRegex=Od),this._weekdaysStrictRegex&&s?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yd(s){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ke(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Td),this._weekdaysShortStrictRegex&&s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Nd(s){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Rn.call(this),s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ke(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Dd),this._weekdaysMinStrictRegex&&s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Rn(){function s(u,m){return m.length-u.length}var e=[],t=[],r=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ht([2e3,1]).day(i),l=yt(this.weekdaysMin(o,"")),a=yt(this.weekdaysShort(o,"")),c=yt(this.weekdays(o,"")),e.push(l),t.push(a),r.push(c),n.push(l),n.push(a),n.push(c);e.sort(s),t.sort(s),r.sort(s),n.sort(s),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function jn(){return this.hours()%12||12}function Ud(){return this.hours()||24}ne("H",["HH",2],0,"hour");ne("h",["hh",2],0,jn);ne("k",["kk",2],0,Ud);ne("hmm",0,0,function(){return""+jn.apply(this)+ft(this.minutes(),2)});ne("hmmss",0,0,function(){return""+jn.apply(this)+ft(this.minutes(),2)+ft(this.seconds(),2)});ne("Hmm",0,0,function(){return""+this.hours()+ft(this.minutes(),2)});ne("Hmmss",0,0,function(){return""+this.hours()+ft(this.minutes(),2)+ft(this.seconds(),2)});function ba(s,e){ne(s,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ba("a",!0);ba("A",!1);function va(s,e){return e._meridiemParse}Q("a",va);Q("A",va);Q("H",je,Cn);Q("h",je,ms);Q("k",je,ms);Q("HH",je,Ke);Q("hh",je,Ke);Q("kk",je,Ke);Q("hmm",aa);Q("hmmss",la);Q("Hmm",aa);Q("Hmmss",la);Me(["H","HH"],Ne);Me(["k","kk"],function(s,e,t){var r=me(s);e[Ne]=r===24?0:r});Me(["a","A"],function(s,e,t){t._isPm=t._locale.isPM(s),t._meridiem=s});Me(["h","hh"],function(s,e,t){e[Ne]=me(s),de(t).bigHour=!0});Me("hmm",function(s,e,t){var r=s.length-2;e[Ne]=me(s.substr(0,r)),e[it]=me(s.substr(r)),de(t).bigHour=!0});Me("hmmss",function(s,e,t){var r=s.length-4,n=s.length-2;e[Ne]=me(s.substr(0,r)),e[it]=me(s.substr(r,2)),e[wt]=me(s.substr(n)),de(t).bigHour=!0});Me("Hmm",function(s,e,t){var r=s.length-2;e[Ne]=me(s.substr(0,r)),e[it]=me(s.substr(r))});Me("Hmmss",function(s,e,t){var r=s.length-4,n=s.length-2;e[Ne]=me(s.substr(0,r)),e[it]=me(s.substr(r,2)),e[wt]=me(s.substr(n))});function Fd(s){return(s+"").toLowerCase().charAt(0)==="p"}var xd=/[ap]\.?m?\.?/i,Hd=_s("Hours",!0);function zd(s,e,t){return s>11?t?"pm":"PM":t?"am":"AM"}var wa={calendar:Eu,longDateFormat:Iu,invalidDate:Yu,ordinal:Uu,dayOfMonthOrdinalParse:Fu,relativeTime:Hu,months:nd,monthsShort:da,week:pd,weekdays:$d,weekdaysMin:Sd,weekdaysShort:ga,meridiemParse:xd},Ae={},bs={},Rs;function Wd(s,e){var t,r=Math.min(s.length,e.length);for(t=0;t<r;t+=1)if(s[t]!==e[t])return t;return r}function Oi(s){return s&&s.toLowerCase().replace("_","-")}function Bd(s){for(var e=0,t,r,n,i;e<s.length;){for(i=Oi(s[e]).split("-"),t=i.length,r=Oi(s[e+1]),r=r?r.split("-"):null;t>0;){if(n=Mr(i.slice(0,t).join("-")),n)return n;if(r&&r.length>=t&&Wd(i,r)>=t-1)break;t--}e++}return Rs}function qd(s){return!!(s&&s.match("^[^/\\\\]*$"))}function Mr(s){var e=null,t;if(Ae[s]===void 0&&typeof Xs<"u"&&Xs&&Xs.exports&&qd(s))try{e=Rs._abbr,t=require,t("./locale/"+s),Et(e)}catch{Ae[s]=null}return Ae[s]}function Et(s,e){var t;return s&&(Ve(e)?t=St(s):t=An(s,e),t?Rs=t:typeof console<"u"&&console.warn&&console.warn("Locale "+s+" not found. Did you forget to load it?")),Rs._abbr}function An(s,e){if(e!==null){var t,r=wa;if(e.abbr=s,Ae[s]!=null)ra("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Ae[s]._config;else if(e.parentLocale!=null)if(Ae[e.parentLocale]!=null)r=Ae[e.parentLocale]._config;else if(t=Mr(e.parentLocale),t!=null)r=t._config;else return bs[e.parentLocale]||(bs[e.parentLocale]=[]),bs[e.parentLocale].push({name:s,config:e}),null;return Ae[s]=new Sn(en(r,e)),bs[s]&&bs[s].forEach(function(n){An(n.name,n.config)}),Et(s),Ae[s]}else return delete Ae[s],null}function Vd(s,e){if(e!=null){var t,r,n=wa;Ae[s]!=null&&Ae[s].parentLocale!=null?Ae[s].set(en(Ae[s]._config,e)):(r=Mr(s),r!=null&&(n=r._config),e=en(n,e),r==null&&(e.abbr=s),t=new Sn(e),t.parentLocale=Ae[s],Ae[s]=t),Et(s)}else Ae[s]!=null&&(Ae[s].parentLocale!=null?(Ae[s]=Ae[s].parentLocale,s===Et()&&Et(s)):Ae[s]!=null&&delete Ae[s]);return Ae[s]}function St(s){var e;if(s&&s._locale&&s._locale._abbr&&(s=s._locale._abbr),!s)return Rs;if(!ot(s)){if(e=Mr(s),e)return e;s=[s]}return Bd(s)}function Gd(){return tn(Ae)}function In(s){var e,t=s._a;return t&&de(s).overflow===-2&&(e=t[vt]<0||t[vt]>11?vt:t[ct]<1||t[ct]>Pn(t[He],t[vt])?ct:t[Ne]<0||t[Ne]>24||t[Ne]===24&&(t[it]!==0||t[wt]!==0||t[Ut]!==0)?Ne:t[it]<0||t[it]>59?it:t[wt]<0||t[wt]>59?wt:t[Ut]<0||t[Ut]>999?Ut:-1,de(s)._overflowDayOfYear&&(e<He||e>ct)&&(e=ct),de(s)._overflowWeeks&&e===-1&&(e=Qu),de(s)._overflowWeekday&&e===-1&&(e=Xu),de(s).overflow=e),s}var Jd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Zd=/Z|[+-]\d\d(?::?\d\d)?/,Bs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Hr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qd=/^\/?Date\((-?\d+)/i,Xd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ef={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ya(s){var e,t,r=s._i,n=Jd.exec(r)||Kd.exec(r),i,o,l,a,c=Bs.length,u=Hr.length;if(n){for(de(s).iso=!0,e=0,t=c;e<t;e++)if(Bs[e][1].exec(n[1])){o=Bs[e][0],i=Bs[e][2]!==!1;break}if(o==null){s._isValid=!1;return}if(n[3]){for(e=0,t=u;e<t;e++)if(Hr[e][1].exec(n[3])){l=(n[2]||" ")+Hr[e][0];break}if(l==null){s._isValid=!1;return}}if(!i&&l!=null){s._isValid=!1;return}if(n[4])if(Zd.exec(n[4]))a="Z";else{s._isValid=!1;return}s._f=o+(l||"")+(a||""),Yn(s)}else s._isValid=!1}function tf(s,e,t,r,n,i){var o=[sf(s),da.indexOf(e),parseInt(t,10),parseInt(r,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function sf(s){var e=parseInt(s,10);return e<=49?2e3+e:e<=999?1900+e:e}function rf(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nf(s,e,t){if(s){var r=ga.indexOf(s),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return de(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function of(s,e,t){if(s)return ef[s];if(e)return 0;var r=parseInt(t,10),n=r%100,i=(r-n)/100;return i*60+n}function ka(s){var e=Xd.exec(rf(s._i)),t;if(e){if(t=tf(e[4],e[3],e[2],e[5],e[6],e[7]),!nf(e[1],t,s))return;s._a=t,s._tzm=of(e[8],e[9],e[10]),s._d=Ps.apply(null,s._a),s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),de(s).rfc2822=!0}else s._isValid=!1}function af(s){var e=Qd.exec(s._i);if(e!==null){s._d=new Date(+e[1]);return}if(ya(s),s._isValid===!1)delete s._isValid;else return;if(ka(s),s._isValid===!1)delete s._isValid;else return;s._strict?s._isValid=!1:z.createFromInputFallback(s)}z.createFromInputFallback=tt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(s){s._d=new Date(s._i+(s._useUTC?" UTC":""))});function Zt(s,e,t){return s??e??t}function lf(s){var e=new Date(z.now());return s._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ln(s){var e,t,r=[],n,i,o;if(!s._d){for(n=lf(s),s._w&&s._a[ct]==null&&s._a[vt]==null&&cf(s),s._dayOfYear!=null&&(o=Zt(s._a[He],n[He]),(s._dayOfYear>Ss(o)||s._dayOfYear===0)&&(de(s)._overflowDayOfYear=!0),t=Ps(o,0,s._dayOfYear),s._a[vt]=t.getUTCMonth(),s._a[ct]=t.getUTCDate()),e=0;e<3&&s._a[e]==null;++e)s._a[e]=r[e]=n[e];for(;e<7;e++)s._a[e]=r[e]=s._a[e]==null?e===2?1:0:s._a[e];s._a[Ne]===24&&s._a[it]===0&&s._a[wt]===0&&s._a[Ut]===0&&(s._nextDay=!0,s._a[Ne]=0),s._d=(s._useUTC?Ps:md).apply(null,r),i=s._useUTC?s._d.getUTCDay():s._d.getDay(),s._tzm!=null&&s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),s._nextDay&&(s._a[Ne]=24),s._w&&typeof s._w.d<"u"&&s._w.d!==i&&(de(s).weekdayMismatch=!0)}}function cf(s){var e,t,r,n,i,o,l,a,c;e=s._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=Zt(e.GG,s._a[He],Es(Re(),1,4).year),r=Zt(e.W,1),n=Zt(e.E,1),(n<1||n>7)&&(a=!0)):(i=s._locale._week.dow,o=s._locale._week.doy,c=Es(Re(),i,o),t=Zt(e.gg,s._a[He],c.year),r=Zt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),r<1||r>kt(t,i,o)?de(s)._overflowWeeks=!0:a!=null?de(s)._overflowWeekday=!0:(l=pa(t,r,n,i,o),s._a[He]=l.year,s._dayOfYear=l.dayOfYear)}z.ISO_8601=function(){};z.RFC_2822=function(){};function Yn(s){if(s._f===z.ISO_8601){ya(s);return}if(s._f===z.RFC_2822){ka(s);return}s._a=[],de(s).empty=!0;var e=""+s._i,t,r,n,i,o,l=e.length,a=0,c,u;for(n=na(s._f,s._locale).match(On)||[],u=n.length,t=0;t<u;t++)i=n[t],r=(e.match(Ju(i,s))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&de(s).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),a+=r.length),rs[i]?(r?de(s).empty=!1:de(s).unusedTokens.push(i),Zu(i,r,s)):s._strict&&!r&&de(s).unusedTokens.push(i);de(s).charsLeftOver=l-a,e.length>0&&de(s).unusedInput.push(e),s._a[Ne]<=12&&de(s).bigHour===!0&&s._a[Ne]>0&&(de(s).bigHour=void 0),de(s).parsedDateParts=s._a.slice(0),de(s).meridiem=s._meridiem,s._a[Ne]=uf(s._locale,s._a[Ne],s._meridiem),c=de(s).era,c!==null&&(s._a[He]=s._locale.erasConvertYear(c,s._a[He])),Ln(s),In(s)}function uf(s,e,t){var r;return t==null?e:s.meridiemHour!=null?s.meridiemHour(e,t):(s.isPM!=null&&(r=s.isPM(t),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function df(s){var e,t,r,n,i,o,l=!1,a=s._f.length;if(a===0){de(s).invalidFormat=!0,s._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=$n({},s),s._useUTC!=null&&(e._useUTC=s._useUTC),e._f=s._f[n],Yn(e),kn(e)&&(o=!0),i+=de(e).charsLeftOver,i+=de(e).unusedTokens.length*10,de(e).score=i,l?i<r&&(r=i,t=e):(r==null||i<r||o)&&(r=i,t=e,o&&(l=!0));Ct(s,t||e)}function ff(s){if(!s._d){var e=Tn(s._i),t=e.day===void 0?e.date:e.day;s._a=ta([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),Ln(s)}}function hf(s){var e=new Ys(In($a(s)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function $a(s){var e=s._i,t=s._f;return s._locale=s._locale||St(s._l),e===null||t===void 0&&e===""?yr({nullInput:!0}):(typeof e=="string"&&(s._i=e=s._locale.preparse(e)),at(e)?new Ys(In(e)):(Ls(e)?s._d=e:ot(t)?df(s):t?Yn(s):mf(s),kn(s)||(s._d=null),s))}function mf(s){var e=s._i;Ve(e)?s._d=new Date(z.now()):Ls(e)?s._d=new Date(e.valueOf()):typeof e=="string"?af(s):ot(e)?(s._a=ta(e.slice(0),function(t){return parseInt(t,10)}),Ln(s)):Ft(e)?ff(s):$t(e)?s._d=new Date(e):z.createFromInputFallback(s)}function Sa(s,e,t,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(t===!0||t===!1)&&(r=t,t=void 0),(Ft(s)&&yn(s)||ot(s)&&s.length===0)&&(s=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=t,i._i=s,i._f=e,i._strict=r,hf(i)}function Re(s,e,t,r){return Sa(s,e,t,r,!1)}var _f=tt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=Re.apply(null,arguments);return this.isValid()&&s.isValid()?s<this?this:s:yr()}),pf=tt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=Re.apply(null,arguments);return this.isValid()&&s.isValid()?s>this?this:s:yr()});function Oa(s,e){var t,r;if(e.length===1&&ot(e[0])&&(e=e[0]),!e.length)return Re();for(t=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][s](t))&&(t=e[r]);return t}function gf(){var s=[].slice.call(arguments,0);return Oa("isBefore",s)}function bf(){var s=[].slice.call(arguments,0);return Oa("isAfter",s)}var vf=function(){return Date.now?Date.now():+new Date},vs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function wf(s){var e,t=!1,r,n=vs.length;for(e in s)if(ke(s,e)&&!(Ye.call(vs,e)!==-1&&(s[e]==null||!isNaN(s[e]))))return!1;for(r=0;r<n;++r)if(s[vs[r]]){if(t)return!1;parseFloat(s[vs[r]])!==me(s[vs[r]])&&(t=!0)}return!0}function yf(){return this._isValid}function kf(){return lt(NaN)}function Cr(s){var e=Tn(s),t=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=wf(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+r*3+t*12,this._data={},this._locale=St(),this._bubble()}function Zs(s){return s instanceof Cr}function rn(s){return s<0?Math.round(-1*s)*-1:Math.round(s)}function $f(s,e,t){var r=Math.min(s.length,e.length),n=Math.abs(s.length-e.length),i=0,o;for(o=0;o<r;o++)me(s[o])!==me(e[o])&&i++;return i+n}function Ta(s,e){ne(s,0,0,function(){var t=this.utcOffset(),r="+";return t<0&&(t=-t,r="-"),r+ft(~~(t/60),2)+e+ft(~~t%60,2)})}Ta("Z",":");Ta("ZZ","");Q("Z",Tr);Q("ZZ",Tr);Me(["Z","ZZ"],function(s,e,t){t._useUTC=!0,t._tzm=Nn(Tr,s)});var Sf=/([\+\-]|\d\d)/gi;function Nn(s,e){var t=(e||"").match(s),r,n,i;return t===null?null:(r=t[t.length-1]||[],n=(r+"").match(Sf)||["-",0,0],i=+(n[1]*60)+me(n[2]),i===0?0:n[0]==="+"?i:-i)}function Un(s,e){var t,r;return e._isUTC?(t=e.clone(),r=(at(s)||Ls(s)?s.valueOf():Re(s).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+r),z.updateOffset(t,!1),t):Re(s).local()}function nn(s){return-Math.round(s._d.getTimezoneOffset())}z.updateOffset=function(){};function Of(s,e,t){var r=this._offset||0,n;if(!this.isValid())return s!=null?this:NaN;if(s!=null){if(typeof s=="string"){if(s=Nn(Tr,s),s===null)return this}else Math.abs(s)<16&&!t&&(s=s*60);return!this._isUTC&&e&&(n=nn(this)),this._offset=s,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==s&&(!e||this._changeInProgress?Ca(this,lt(s-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,z.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:nn(this)}function Tf(s,e){return s!=null?(typeof s!="string"&&(s=-s),this.utcOffset(s,e),this):-this.utcOffset()}function Df(s){return this.utcOffset(0,s)}function Mf(s){return this._isUTC&&(this.utcOffset(0,s),this._isUTC=!1,s&&this.subtract(nn(this),"m")),this}function Cf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var s=Nn(Vu,this._i);s!=null?this.utcOffset(s):this.utcOffset(0,!0)}return this}function Pf(s){return this.isValid()?(s=s?Re(s).utcOffset():0,(this.utcOffset()-s)%60===0):!1}function Ef(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rf(){if(!Ve(this._isDSTShifted))return this._isDSTShifted;var s={},e;return $n(s,this),s=$a(s),s._a?(e=s._isUTC?ht(s._a):Re(s._a),this._isDSTShifted=this.isValid()&&$f(s._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function jf(){return this.isValid()?!this._isUTC:!1}function Af(){return this.isValid()?this._isUTC:!1}function Da(){return this.isValid()?this._isUTC&&this._offset===0:!1}var If=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function lt(s,e){var t=s,r=null,n,i,o;return Zs(s)?t={ms:s._milliseconds,d:s._days,M:s._months}:$t(s)||!isNaN(+s)?(t={},e?t[e]=+s:t.milliseconds=+s):(r=If.exec(s))?(n=r[1]==="-"?-1:1,t={y:0,d:me(r[ct])*n,h:me(r[Ne])*n,m:me(r[it])*n,s:me(r[wt])*n,ms:me(rn(r[Ut]*1e3))*n}):(r=Lf.exec(s))?(n=r[1]==="-"?-1:1,t={y:Lt(r[2],n),M:Lt(r[3],n),w:Lt(r[4],n),d:Lt(r[5],n),h:Lt(r[6],n),m:Lt(r[7],n),s:Lt(r[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=Yf(Re(t.from),Re(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Cr(t),Zs(s)&&ke(s,"_locale")&&(i._locale=s._locale),Zs(s)&&ke(s,"_isValid")&&(i._isValid=s._isValid),i}lt.fn=Cr.prototype;lt.invalid=kf;function Lt(s,e){var t=s&&parseFloat(s.replace(",","."));return(isNaN(t)?0:t)*e}function Ti(s,e){var t={};return t.months=e.month()-s.month()+(e.year()-s.year())*12,s.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+s.clone().add(t.months,"M"),t}function Yf(s,e){var t;return s.isValid()&&e.isValid()?(e=Un(e,s),s.isBefore(e)?t=Ti(s,e):(t=Ti(e,s),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Ma(s,e){return function(t,r){var n,i;return r!==null&&!isNaN(+r)&&(ra(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=r,r=i),n=lt(t,r),Ca(this,n,s),this}}function Ca(s,e,t,r){var n=e._milliseconds,i=rn(e._days),o=rn(e._months);s.isValid()&&(r=r??!0,o&&ha(s,Cs(s,"Month")+o*t),i&&ua(s,"Date",Cs(s,"Date")+i*t),n&&s._d.setTime(s._d.valueOf()+n*t),r&&z.updateOffset(s,i||o))}var Nf=Ma(1,"add"),Uf=Ma(-1,"subtract");function Pa(s){return typeof s=="string"||s instanceof String}function Ff(s){return at(s)||Ls(s)||Pa(s)||$t(s)||Hf(s)||xf(s)||s===null||s===void 0}function xf(s){var e=Ft(s)&&!yn(s),t=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=r.length;for(n=0;n<o;n+=1)i=r[n],t=t||ke(s,i);return e&&t}function Hf(s){var e=ot(s),t=!1;return e&&(t=s.filter(function(r){return!$t(r)&&Pa(s)}).length===0),e&&t}function zf(s){var e=Ft(s)&&!yn(s),t=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],t=t||ke(s,i);return e&&t}function Wf(s,e){var t=s.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Bf(s,e){arguments.length===1&&(arguments[0]?Ff(arguments[0])?(s=arguments[0],e=void 0):zf(arguments[0])&&(e=arguments[0],s=void 0):(s=void 0,e=void 0));var t=s||Re(),r=Un(t,this).startOf("day"),n=z.calendarFormat(this,r)||"sameElse",i=e&&(mt(e[n])?e[n].call(this,t):e[n]);return this.format(i||this.localeData().calendar(n,this,Re(t)))}function qf(){return new Ys(this)}function Vf(s,e){var t=at(s)?s:Re(s);return this.isValid()&&t.isValid()?(e=st(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Gf(s,e){var t=at(s)?s:Re(s);return this.isValid()&&t.isValid()?(e=st(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Jf(s,e,t,r){var n=at(s)?s:Re(s),i=at(e)?e:Re(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(r[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function Kf(s,e){var t=at(s)?s:Re(s),r;return this.isValid()&&t.isValid()?(e=st(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(r=t.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Zf(s,e){return this.isSame(s,e)||this.isAfter(s,e)}function Qf(s,e){return this.isSame(s,e)||this.isBefore(s,e)}function Xf(s,e,t){var r,n,i;if(!this.isValid())return NaN;if(r=Un(s,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=st(e),e){case"year":i=Qs(this,r)/12;break;case"month":i=Qs(this,r);break;case"quarter":i=Qs(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return t?i:Xe(i)}function Qs(s,e){if(s.date()<e.date())return-Qs(e,s);var t=(e.year()-s.year())*12+(e.month()-s.month()),r=s.clone().add(t,"months"),n,i;return e-r<0?(n=s.clone().add(t-1,"months"),i=(e-r)/(r-n)):(n=s.clone().add(t+1,"months"),i=(e-r)/(n-r)),-(t+i)||0}z.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";z.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function eh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function th(s){if(!this.isValid())return null;var e=s!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Ks(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):mt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ks(t,"Z")):Ks(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function sh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var s="moment",e="",t,r,n,i;return this.isLocal()||(s=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+s+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+r+n+i)}function rh(s){s||(s=this.isUtc()?z.defaultFormatUtc:z.defaultFormat);var e=Ks(this,s);return this.localeData().postformat(e)}function nh(s,e){return this.isValid()&&(at(s)&&s.isValid()||Re(s).isValid())?lt({to:this,from:s}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ih(s){return this.from(Re(),s)}function oh(s,e){return this.isValid()&&(at(s)&&s.isValid()||Re(s).isValid())?lt({from:this,to:s}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ah(s){return this.to(Re(),s)}function Ea(s){var e;return s===void 0?this._locale._abbr:(e=St(s),e!=null&&(this._locale=e),this)}var Ra=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(s){return s===void 0?this.localeData():this.locale(s)});function ja(){return this._locale}var lr=1e3,ns=60*lr,cr=60*ns,Aa=(365*400+97)*24*cr;function is(s,e){return(s%e+e)%e}function Ia(s,e,t){return s<100&&s>=0?new Date(s+400,e,t)-Aa:new Date(s,e,t).valueOf()}function La(s,e,t){return s<100&&s>=0?Date.UTC(s+400,e,t)-Aa:Date.UTC(s,e,t)}function lh(s){var e,t;if(s=st(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?La:Ia,s){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=is(e+(this._isUTC?0:this.utcOffset()*ns),cr);break;case"minute":e=this._d.valueOf(),e-=is(e,ns);break;case"second":e=this._d.valueOf(),e-=is(e,lr);break}return this._d.setTime(e),z.updateOffset(this,!0),this}function ch(s){var e,t;if(s=st(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?La:Ia,s){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cr-is(e+(this._isUTC?0:this.utcOffset()*ns),cr)-1;break;case"minute":e=this._d.valueOf(),e+=ns-is(e,ns)-1;break;case"second":e=this._d.valueOf(),e+=lr-is(e,lr)-1;break}return this._d.setTime(e),z.updateOffset(this,!0),this}function uh(){return this._d.valueOf()-(this._offset||0)*6e4}function dh(){return Math.floor(this.valueOf()/1e3)}function fh(){return new Date(this.valueOf())}function hh(){var s=this;return[s.year(),s.month(),s.date(),s.hour(),s.minute(),s.second(),s.millisecond()]}function mh(){var s=this;return{years:s.year(),months:s.month(),date:s.date(),hours:s.hours(),minutes:s.minutes(),seconds:s.seconds(),milliseconds:s.milliseconds()}}function _h(){return this.isValid()?this.toISOString():null}function ph(){return kn(this)}function gh(){return Ct({},de(this))}function bh(){return de(this).overflow}function vh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ne("N",0,0,"eraAbbr");ne("NN",0,0,"eraAbbr");ne("NNN",0,0,"eraAbbr");ne("NNNN",0,0,"eraName");ne("NNNNN",0,0,"eraNarrow");ne("y",["y",1],"yo","eraYear");ne("y",["yy",2],0,"eraYear");ne("y",["yyy",3],0,"eraYear");ne("y",["yyyy",4],0,"eraYear");Q("N",Fn);Q("NN",Fn);Q("NNN",Fn);Q("NNNN",Ph);Q("NNNNN",Eh);Me(["N","NN","NNN","NNNN","NNNNN"],function(s,e,t,r){var n=t._locale.erasParse(s,r,t._strict);n?de(t).era=n:de(t).invalidEra=s});Q("y",hs);Q("yy",hs);Q("yyy",hs);Q("yyyy",hs);Q("yo",Rh);Me(["y","yy","yyy","yyyy"],He);Me(["yo"],function(s,e,t,r){var n;t._locale._eraYearOrdinalRegex&&(n=s.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[He]=t._locale.eraYearOrdinalParse(s,n):e[He]=parseInt(s,10)});function wh(s,e){var t,r,n,i=this._eras||St("en")._eras;for(t=0,r=i.length;t<r;++t){switch(typeof i[t].since){case"string":n=z(i[t].since).startOf("day"),i[t].since=n.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":n=z(i[t].until).startOf("day").valueOf(),i[t].until=n.valueOf();break}}return i}function yh(s,e,t){var r,n,i=this.eras(),o,l,a;for(s=s.toUpperCase(),r=0,n=i.length;r<n;++r)if(o=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),a=i[r].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===s)return i[r];break;case"NNNN":if(o===s)return i[r];break;case"NNNNN":if(a===s)return i[r];break}else if([o,l,a].indexOf(s)>=0)return i[r]}function kh(s,e){var t=s.since<=s.until?1:-1;return e===void 0?z(s.since).year():z(s.since).year()+(e-s.offset)*t}function $h(){var s,e,t,r=this.localeData().eras();for(s=0,e=r.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),r[s].since<=t&&t<=r[s].until||r[s].until<=t&&t<=r[s].since)return r[s].name;return""}function Sh(){var s,e,t,r=this.localeData().eras();for(s=0,e=r.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),r[s].since<=t&&t<=r[s].until||r[s].until<=t&&t<=r[s].since)return r[s].narrow;return""}function Oh(){var s,e,t,r=this.localeData().eras();for(s=0,e=r.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),r[s].since<=t&&t<=r[s].until||r[s].until<=t&&t<=r[s].since)return r[s].abbr;return""}function Th(){var s,e,t,r,n=this.localeData().eras();for(s=0,e=n.length;s<e;++s)if(t=n[s].since<=n[s].until?1:-1,r=this.clone().startOf("day").valueOf(),n[s].since<=r&&r<=n[s].until||n[s].until<=r&&r<=n[s].since)return(this.year()-z(n[s].since).year())*t+n[s].offset;return this.year()}function Dh(s){return ke(this,"_erasNameRegex")||xn.call(this),s?this._erasNameRegex:this._erasRegex}function Mh(s){return ke(this,"_erasAbbrRegex")||xn.call(this),s?this._erasAbbrRegex:this._erasRegex}function Ch(s){return ke(this,"_erasNarrowRegex")||xn.call(this),s?this._erasNarrowRegex:this._erasRegex}function Fn(s,e){return e.erasAbbrRegex(s)}function Ph(s,e){return e.erasNameRegex(s)}function Eh(s,e){return e.erasNarrowRegex(s)}function Rh(s,e){return e._eraYearOrdinalRegex||hs}function xn(){var s=[],e=[],t=[],r=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=yt(c[n].name),l=yt(c[n].abbr),a=yt(c[n].narrow),e.push(o),s.push(l),t.push(a),r.push(o),r.push(l),r.push(a);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ne(0,["gg",2],0,function(){return this.weekYear()%100});ne(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pr(s,e){ne(0,[s,s.length],0,e)}Pr("gggg","weekYear");Pr("ggggg","weekYear");Pr("GGGG","isoWeekYear");Pr("GGGGG","isoWeekYear");Q("G",Or);Q("g",Or);Q("GG",je,Ke);Q("gg",je,Ke);Q("GGGG",Mn,Dn);Q("gggg",Mn,Dn);Q("GGGGG",Sr,kr);Q("ggggg",Sr,kr);Us(["gggg","ggggg","GGGG","GGGGG"],function(s,e,t,r){e[r.substr(0,2)]=me(s)});Us(["gg","GG"],function(s,e,t,r){e[r]=z.parseTwoDigitYear(s)});function jh(s){return Ya.call(this,s,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ah(s){return Ya.call(this,s,this.isoWeek(),this.isoWeekday(),1,4)}function Ih(){return kt(this.year(),1,4)}function Lh(){return kt(this.isoWeekYear(),1,4)}function Yh(){var s=this.localeData()._week;return kt(this.year(),s.dow,s.doy)}function Nh(){var s=this.localeData()._week;return kt(this.weekYear(),s.dow,s.doy)}function Ya(s,e,t,r,n){var i;return s==null?Es(this,r,n).year:(i=kt(s,r,n),e>i&&(e=i),Uh.call(this,s,e,t,r,n))}function Uh(s,e,t,r,n){var i=pa(s,e,t,r,n),o=Ps(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ne("Q",0,"Qo","quarter");Q("Q",ia);Me("Q",function(s,e){e[vt]=(me(s)-1)*3});function Fh(s){return s==null?Math.ceil((this.month()+1)/3):this.month((s-1)*3+this.month()%3)}ne("D",["DD",2],"Do","date");Q("D",je,ms);Q("DD",je,Ke);Q("Do",function(s,e){return s?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Me(["D","DD"],ct);Me("Do",function(s,e){e[ct]=me(s.match(je)[0])});var Na=_s("Date",!0);ne("DDD",["DDDD",3],"DDDo","dayOfYear");Q("DDD",$r);Q("DDDD",oa);Me(["DDD","DDDD"],function(s,e,t){t._dayOfYear=me(s)});function xh(s){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return s==null?e:this.add(s-e,"d")}ne("m",["mm",2],0,"minute");Q("m",je,Cn);Q("mm",je,Ke);Me(["m","mm"],it);var Hh=_s("Minutes",!1);ne("s",["ss",2],0,"second");Q("s",je,Cn);Q("ss",je,Ke);Me(["s","ss"],wt);var zh=_s("Seconds",!1);ne("S",0,0,function(){return~~(this.millisecond()/100)});ne(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ne(0,["SSS",3],0,"millisecond");ne(0,["SSSS",4],0,function(){return this.millisecond()*10});ne(0,["SSSSS",5],0,function(){return this.millisecond()*100});ne(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ne(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ne(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ne(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Q("S",$r,ia);Q("SS",$r,Ke);Q("SSS",$r,oa);var Pt,Ua;for(Pt="SSSS";Pt.length<=9;Pt+="S")Q(Pt,hs);function Wh(s,e){e[Ut]=me(("0."+s)*1e3)}for(Pt="S";Pt.length<=9;Pt+="S")Me(Pt,Wh);Ua=_s("Milliseconds",!1);ne("z",0,0,"zoneAbbr");ne("zz",0,0,"zoneName");function Bh(){return this._isUTC?"UTC":""}function qh(){return this._isUTC?"Coordinated Universal Time":""}var q=Ys.prototype;q.add=Nf;q.calendar=Bf;q.clone=qf;q.diff=Xf;q.endOf=ch;q.format=rh;q.from=nh;q.fromNow=ih;q.to=oh;q.toNow=ah;q.get=td;q.invalidAt=bh;q.isAfter=Vf;q.isBefore=Gf;q.isBetween=Jf;q.isSame=Kf;q.isSameOrAfter=Zf;q.isSameOrBefore=Qf;q.isValid=ph;q.lang=Ra;q.locale=Ea;q.localeData=ja;q.max=pf;q.min=_f;q.parsingFlags=gh;q.set=sd;q.startOf=lh;q.subtract=Uf;q.toArray=hh;q.toObject=mh;q.toDate=fh;q.toISOString=th;q.inspect=sh;typeof Symbol<"u"&&Symbol.for!=null&&(q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});q.toJSON=_h;q.toString=eh;q.unix=dh;q.valueOf=uh;q.creationData=vh;q.eraName=$h;q.eraNarrow=Sh;q.eraAbbr=Oh;q.eraYear=Th;q.year=ca;q.isLeapYear=ed;q.weekYear=jh;q.isoWeekYear=Ah;q.quarter=q.quarters=Fh;q.month=ma;q.daysInMonth=dd;q.week=q.weeks=vd;q.isoWeek=q.isoWeeks=wd;q.weeksInYear=Yh;q.weeksInWeekYear=Nh;q.isoWeeksInYear=Ih;q.isoWeeksInISOWeekYear=Lh;q.date=Na;q.day=q.days=jd;q.weekday=Ad;q.isoWeekday=Id;q.dayOfYear=xh;q.hour=q.hours=Hd;q.minute=q.minutes=Hh;q.second=q.seconds=zh;q.millisecond=q.milliseconds=Ua;q.utcOffset=Of;q.utc=Df;q.local=Mf;q.parseZone=Cf;q.hasAlignedHourOffset=Pf;q.isDST=Ef;q.isLocal=jf;q.isUtcOffset=Af;q.isUtc=Da;q.isUTC=Da;q.zoneAbbr=Bh;q.zoneName=qh;q.dates=tt("dates accessor is deprecated. Use date instead.",Na);q.months=tt("months accessor is deprecated. Use month instead",ma);q.years=tt("years accessor is deprecated. Use year instead",ca);q.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Tf);q.isDSTShifted=tt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rf);function Vh(s){return Re(s*1e3)}function Gh(){return Re.apply(null,arguments).parseZone()}function Fa(s){return s}var $e=Sn.prototype;$e.calendar=Ru;$e.longDateFormat=Lu;$e.invalidDate=Nu;$e.ordinal=xu;$e.preparse=Fa;$e.postformat=Fa;$e.relativeTime=zu;$e.pastFuture=Wu;$e.set=Pu;$e.eras=wh;$e.erasParse=yh;$e.erasConvertYear=kh;$e.erasAbbrRegex=Mh;$e.erasNameRegex=Dh;$e.erasNarrowRegex=Ch;$e.months=ad;$e.monthsShort=ld;$e.monthsParse=ud;$e.monthsRegex=hd;$e.monthsShortRegex=fd;$e.week=_d;$e.firstDayOfYear=bd;$e.firstDayOfWeek=gd;$e.weekdays=Md;$e.weekdaysMin=Pd;$e.weekdaysShort=Cd;$e.weekdaysParse=Rd;$e.weekdaysRegex=Ld;$e.weekdaysShortRegex=Yd;$e.weekdaysMinRegex=Nd;$e.isPM=Fd;$e.meridiem=zd;function ur(s,e,t,r){var n=St(),i=ht().set(r,e);return n[t](i,s)}function xa(s,e,t){if($t(s)&&(e=s,s=void 0),s=s||"",e!=null)return ur(s,e,t,"month");var r,n=[];for(r=0;r<12;r++)n[r]=ur(s,r,t,"month");return n}function Hn(s,e,t,r){typeof s=="boolean"?($t(e)&&(t=e,e=void 0),e=e||""):(e=s,t=e,s=!1,$t(e)&&(t=e,e=void 0),e=e||"");var n=St(),i=s?n._week.dow:0,o,l=[];if(t!=null)return ur(e,(t+i)%7,r,"day");for(o=0;o<7;o++)l[o]=ur(e,(o+i)%7,r,"day");return l}function Jh(s,e){return xa(s,e,"months")}function Kh(s,e){return xa(s,e,"monthsShort")}function Zh(s,e,t){return Hn(s,e,t,"weekdays")}function Qh(s,e,t){return Hn(s,e,t,"weekdaysShort")}function Xh(s,e,t){return Hn(s,e,t,"weekdaysMin")}Et("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(s){var e=s%10,t=me(s%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return s+t}});z.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Et);z.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",St);var _t=Math.abs;function em(){var s=this._data;return this._milliseconds=_t(this._milliseconds),this._days=_t(this._days),this._months=_t(this._months),s.milliseconds=_t(s.milliseconds),s.seconds=_t(s.seconds),s.minutes=_t(s.minutes),s.hours=_t(s.hours),s.months=_t(s.months),s.years=_t(s.years),this}function Ha(s,e,t,r){var n=lt(e,t);return s._milliseconds+=r*n._milliseconds,s._days+=r*n._days,s._months+=r*n._months,s._bubble()}function tm(s,e){return Ha(this,s,e,1)}function sm(s,e){return Ha(this,s,e,-1)}function Di(s){return s<0?Math.floor(s):Math.ceil(s)}function rm(){var s=this._milliseconds,e=this._days,t=this._months,r=this._data,n,i,o,l,a;return s>=0&&e>=0&&t>=0||s<=0&&e<=0&&t<=0||(s+=Di(on(t)+e)*864e5,e=0,t=0),r.milliseconds=s%1e3,n=Xe(s/1e3),r.seconds=n%60,i=Xe(n/60),r.minutes=i%60,o=Xe(i/60),r.hours=o%24,e+=Xe(o/24),a=Xe(za(e)),t+=a,e-=Di(on(a)),l=Xe(t/12),t%=12,r.days=e,r.months=t,r.years=l,this}function za(s){return s*4800/146097}function on(s){return s*146097/4800}function nm(s){if(!this.isValid())return NaN;var e,t,r=this._milliseconds;if(s=st(s),s==="month"||s==="quarter"||s==="year")switch(e=this._days+r/864e5,t=this._months+za(e),s){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(on(this._months)),s){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+s)}}function Ot(s){return function(){return this.as(s)}}var Wa=Ot("ms"),im=Ot("s"),om=Ot("m"),am=Ot("h"),lm=Ot("d"),cm=Ot("w"),um=Ot("M"),dm=Ot("Q"),fm=Ot("y"),hm=Wa;function mm(){return lt(this)}function _m(s){return s=st(s),this.isValid()?this[s+"s"]():NaN}function Ht(s){return function(){return this.isValid()?this._data[s]:NaN}}var pm=Ht("milliseconds"),gm=Ht("seconds"),bm=Ht("minutes"),vm=Ht("hours"),wm=Ht("days"),ym=Ht("months"),km=Ht("years");function $m(){return Xe(this.days()/7)}var pt=Math.round,Qt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Sm(s,e,t,r,n){return n.relativeTime(e||1,!!t,s,r)}function Om(s,e,t,r){var n=lt(s).abs(),i=pt(n.as("s")),o=pt(n.as("m")),l=pt(n.as("h")),a=pt(n.as("d")),c=pt(n.as("M")),u=pt(n.as("w")),m=pt(n.as("y")),_=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(_=_||u<=1&&["w"]||u<t.w&&["ww",u]),_=_||c<=1&&["M"]||c<t.M&&["MM",c]||m<=1&&["y"]||["yy",m],_[2]=e,_[3]=+s>0,_[4]=r,Sm.apply(null,_)}function Tm(s){return s===void 0?pt:typeof s=="function"?(pt=s,!0):!1}function Dm(s,e){return Qt[s]===void 0?!1:e===void 0?Qt[s]:(Qt[s]=e,s==="s"&&(Qt.ss=e-1),!0)}function Mm(s,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,r=Qt,n,i;return typeof s=="object"&&(e=s,s=!1),typeof s=="boolean"&&(t=s),typeof e=="object"&&(r=Object.assign({},Qt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=Om(this,!t,r,n),t&&(i=n.pastFuture(+this,i)),n.postformat(i)}var zr=Math.abs;function Gt(s){return(s>0)-(s<0)||+s}function Er(){if(!this.isValid())return this.localeData().invalidDate();var s=zr(this._milliseconds)/1e3,e=zr(this._days),t=zr(this._months),r,n,i,o,l=this.asSeconds(),a,c,u,m;return l?(r=Xe(s/60),n=Xe(r/60),s%=60,r%=60,i=Xe(t/12),t%=12,o=s?s.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=Gt(this._months)!==Gt(l)?"-":"",u=Gt(this._days)!==Gt(l)?"-":"",m=Gt(this._milliseconds)!==Gt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(n||r||s?"T":"")+(n?m+n+"H":"")+(r?m+r+"M":"")+(s?m+o+"S":"")):"P0D"}var ve=Cr.prototype;ve.isValid=yf;ve.abs=em;ve.add=tm;ve.subtract=sm;ve.as=nm;ve.asMilliseconds=Wa;ve.asSeconds=im;ve.asMinutes=om;ve.asHours=am;ve.asDays=lm;ve.asWeeks=cm;ve.asMonths=um;ve.asQuarters=dm;ve.asYears=fm;ve.valueOf=hm;ve._bubble=rm;ve.clone=mm;ve.get=_m;ve.milliseconds=pm;ve.seconds=gm;ve.minutes=bm;ve.hours=vm;ve.days=wm;ve.weeks=$m;ve.months=ym;ve.years=km;ve.humanize=Mm;ve.toISOString=Er;ve.toString=Er;ve.toJSON=Er;ve.locale=Ea;ve.localeData=ja;ve.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Er);ve.lang=Ra;ne("X",0,0,"unix");ne("x",0,0,"valueOf");Q("x",Or);Q("X",Gu);Me("X",function(s,e,t){t._d=new Date(parseFloat(s)*1e3)});Me("x",function(s,e,t){t._d=new Date(me(s))});//! moment.js
z.version="2.30.1";Mu(Re);z.fn=q;z.min=gf;z.max=bf;z.now=vf;z.utc=ht;z.unix=Vh;z.months=Jh;z.isDate=Ls;z.locale=Et;z.invalid=yr;z.duration=lt;z.isMoment=at;z.weekdays=Zh;z.parseZone=Gh;z.localeData=St;z.isDuration=Zs;z.monthsShort=Kh;z.weekdaysMin=Xh;z.defineLocale=An;z.updateLocale=Vd;z.locales=Gd;z.weekdaysShort=Qh;z.normalizeUnits=st;z.relativeTimeRounding=Tm;z.relativeTimeThreshold=Dm;z.calendarFormat=Wf;z.prototype=q;z.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Mi(s,e,t){const r=s.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function Ci(s,e,t){const r=s.slice();return r[13]=e[t][0],r[17]=e[t][1],r}function Pi(s,e,t){const r=s.slice();return r[13]=e[t][0],r[20]=e[t][1],r}function Ei(s,e,t){const r=s.slice();return r[13]=e[t][0],r[23]=e[t][1],r}function Cm(s){let e,t;return e=new wr({props:{message:s[7]}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&128&&(i.message=r[7]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Pm(s){let e,t;return e=new dt({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[Em]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&67108872&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Ri(s){let e,t;return e=new Du({props:{id:s[23].book_id,title:s[23].title,label:s[23].status=="Borrowed"?`Due: ${z(s[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:s[23].status=="Borrowed"?"danger":"secondary"}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&8&&(i.id=r[23].book_id),n&8&&(i.title=r[23].title),n&8&&(i.label=r[23].status=="Borrowed"?`Due: ${z(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),n&8&&(i.color=r[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Em(s){let e,t,r=Se(Object.entries(s[3])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ri(Ei(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-center justify-content-md-start")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&8){r=Se(Object.entries(o[3]));let a;for(a=0;a<r.length;a+=1){const c=Ei(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ri(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function Rm(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function jm(s){let e,t;return e=new wr({props:{message:s[4]}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Am(s){let e,t,r=Se(Object.entries(s[0])),n=[];for(let o=0;o<r.length;o+=1)n[o]=ji(Pi(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&1){r=Se(Object.entries(o[0]));let a;for(a=0;a<r.length;a+=1){const c=Pi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ji(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function ji(s){let e,t;return e=new vr({props:{title:s[20].title,id:s[20].book_id,author:s[20].author}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&1&&(i.title=r[20].title),n&1&&(i.id=r[20].book_id),n&1&&(i.author=r[20].author),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Im(s){let e,t,r,n;const i=[Am,jm,Rm],o=[];function l(a,c){return a[0]?0:a[4]?1:2}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Lm(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Ym(s){let e,t;return e=new wr({props:{message:s[5]}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Nm(s){let e,t,r=Se(Object.entries(s[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ai(Ci(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){r=Se(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Ci(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ai(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function Ai(s){let e,t;return e=new Qo({props:{id:s[17].author_id,name:s[17].name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&2&&(i.id=r[17].author_id),n&2&&(i.name=r[17].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Um(s){let e,t,r,n;const i=[Nm,Ym,Lm],o=[];function l(a,c){return a[1]?0:a[5]?1:2}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Fm(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function xm(s){let e,t;return e=new wr({props:{message:s[6]}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&64&&(i.message=r[6]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Hm(s){let e,t,r=Se(Object.entries(s[2])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ii(Mi(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row justify-content-around")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&4){r=Se(Object.entries(o[2]));let a;for(a=0;a<r.length;a+=1){const c=Mi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Ii(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function Ii(s){let e,t;return e=new Xo({props:{id:s[14].publisher_id,name:s[14].name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function zm(s){let e,t,r,n;const i=[Hm,xm,Fm],o=[];function l(a,c){return a[2]?0:a[6]?1:2}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function Wm(s){let e,t,r,n,i,o,l,a,c,u,m,_,g;t=new fu({});const p=[Pm,Cm],v=[];function y(b,k){return b[3]&&b[3].length!=0?0:b[7]?1:-1}return~(n=y(s))&&(i=v[n]=p[n](s)),l=new dt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Im]},$$scope:{ctx:s}}}),c=new dt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Um]},$$scope:{ctx:s}}}),m=new dt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[zm]},$$scope:{ctx:s}}}),{c(){e=h("main"),N(t.$$.fragment),r=w(),i&&i.c(),o=w(),N(l.$$.fragment),a=w(),N(c.$$.fragment),u=w(),N(m.$$.fragment),f(e,"class","container mb-5")},m(b,k){E(b,e,k),L(t,e,null),d(e,r),~n&&v[n].m(e,null),d(e,o),L(l,e,null),d(e,a),L(c,e,null),d(e,u),L(m,e,null),g=!0},p(b,[k]){let $=n;n=y(b),n===$?~n&&v[n].p(b,k):(i&&(Oe(),M(v[$],1,1,()=>{v[$]=null}),Te()),~n?(i=v[n],i?i.p(b,k):(i=v[n]=p[n](b),i.c()),O(i,1),i.m(e,o)):i=null);const C={};k&67108881&&(C.$$scope={dirty:k,ctx:b}),l.$set(C);const S={};k&67108898&&(S.$$scope={dirty:k,ctx:b}),c.$set(S);const T={};k&67108932&&(T.$$scope={dirty:k,ctx:b}),m.$set(T)},i(b){g||(O(t.$$.fragment,b),O(i),O(l.$$.fragment,b),O(c.$$.fragment,b),O(m.$$.fragment,b),b&&(_||Ee(()=>{_=Ue(e,Fe,{duration:500}),_.start()})),g=!0)},o(b){M(t.$$.fragment,b),M(i),M(l.$$.fragment,b),M(c.$$.fragment,b),M(m.$$.fragment,b),g=!1},d(b){b&&P(e),Y(t),~n&&v[n].d(),Y(l),Y(c),Y(m)}}}function Bm(s,e,t){const r=localStorage.getItem("user_id")||"";let n,i,o,l,a,c,u,m;async function _(){const{data:y,error:b}=await ae.rpc("get_books");t(0,n=y),t(4,a=b?b.message:"")}async function g(){const{data:y,error:b}=await ae.rpc("get_authors");t(1,i=y),t(5,c=b?b.message:"")}async function p(){const{data:y,error:b}=await ae.rpc("get_publishers");t(2,o=y),t(6,u=b||"")}async function v(){const{data:y,error:b}=await ae.rpc("get_inventory",{loggedid:r});t(3,l=y),console.log(l),t(7,m=b||"")}return _(),g(),p(),v(),[n,i,o,l,a,c,u,m]}class qm extends be{constructor(e){super(),ge(this,e,Bm,Wm,pe,{})}}function Vm(s){let e,t,r,n,i,o,l,a;return{c(){e=h("div"),t=h("button"),t.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=w(),n=h("div"),i=h("h4"),o=re(s[0]),f(t,"class","btn"),Je(t,"font-size","1.5em"),f(i,"class","my-auto"),f(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){E(c,e,u),d(e,t),d(e,r),d(e,n),d(n,i),d(i,o),l||(a=G(t,"click",s[1]),l=!0)},p(c,[u]){u&1&&le(o,c[0])},i:U,o:U,d(c){c&&P(e),l=!1,a()}}}function Gm(s,e,t){let{text:r}=e;const n=()=>bl();return s.$$set=i=>{"text"in i&&t(0,r=i.text)},[r,n]}class Ze extends be{constructor(e){super(),ge(this,e,Gm,Vm,pe,{text:0})}}function Jm(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C;const S=s[5].default,T=dr(S,s,s[4],null);return{c(){e=h("div"),t=h("div"),r=h("div"),n=h("div"),i=h("h1"),o=re(s[0]),l=w(),a=h("button"),c=w(),u=h("div"),T&&T.c(),m=w(),_=h("div"),g=h("button"),p=re(s[3]),v=w(),y=h("button"),b=re(s[2]),f(i,"class","modal-title fs-5"),f(i,"id","exampleModalLabel"),f(a,"type","button"),f(a,"class","btn-close"),f(a,"data-bs-dismiss","modal"),f(a,"aria-label","Close"),f(n,"class","modal-header"),f(u,"class","modal-body"),f(g,"type","button"),f(g,"class","btn btn-secondary"),f(g,"data-bs-dismiss","modal"),f(y,"type","button"),f(y,"class","btn btn-primary"),f(y,"data-bs-dismiss","modal"),f(_,"class","modal-footer"),f(r,"class","modal-content"),f(t,"class","modal-dialog"),f(e,"class","modal fade"),f(e,"id",s[1]),f(e,"tabindex","-1"),f(e,"aria-hidden","true")},m(j,A){E(j,e,A),d(e,t),d(t,r),d(r,n),d(n,i),d(i,o),d(n,l),d(n,a),d(r,c),d(r,u),T&&T.m(u,null),d(r,m),d(r,_),d(_,g),d(g,p),d(_,v),d(_,y),d(y,b),k=!0,$||(C=G(y,"click",s[6]),$=!0)},p(j,[A]){(!k||A&1)&&le(o,j[0]),T&&T.p&&(!k||A&16)&&hr(T,S,j,j[4],k?fr(S,j[4],A,null):mr(j[4]),null),(!k||A&8)&&le(p,j[3]),(!k||A&4)&&le(b,j[2]),(!k||A&2)&&f(e,"id",j[1])},i(j){k||(O(T,j),k=!0)},o(j){M(T,j),k=!1},d(j){j&&P(e),T&&T.d(j),$=!1,C()}}}function Km(s,e,t){let{$$slots:r={},$$scope:n}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function c(u){rr.call(this,s,u)}return s.$$set=u=>{"title"in u&&t(0,i=u.title),"id"in u&&t(1,o=u.id),"pButton"in u&&t(2,l=u.pButton),"sButton"in u&&t(3,a=u.sButton),"$$scope"in u&&t(4,n=u.$$scope)},[i,o,l,a,n,r,c]}class Zm extends be{constructor(e){super(),ge(this,e,Km,Jm,pe,{title:0,id:1,pButton:2,sButton:3})}}function Qm(s){let e,t,r;return{c(){e=h("div"),t=h("div"),t.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',f(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Je(t,"height","70vh"),f(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Je(e,"background-color","var(--bs-body-bg)"),Je(e,"width","100vw"),Je(e,"height","100vh")},m(n,i){E(n,e,i),d(e,t)},p:U,i(n){n&&(r||Ee(()=>{r=Ue(t,Fe,{duration:500}),r.start()}))},o:U,d(n){n&&P(e)}}}class zn extends be{constructor(e){super(),ge(this,e,null,Qm,pe,{})}}function Li(s,e,t){const r=s.slice();return r[27]=e[t][0],r[28]=e[t][1],r}function Yi(s,e,t){const r=s.slice();return r[27]=e[t][0],r[31]=e[t][1],r}function Ni(s){let e,t;return e=new zn({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Xm(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function e_(s){let e,t,r,n,i,o,l,a=s[3].isbn+"",c,u,m,_,g,p=s[3].title+"",v,y,b,k=s[3].description+"",$,C,S,T,j,A,F=s[3].author.name+"",Z,H,K,W,R,I,D,V=s[3].publisher.name+"",te,x,B,X,we,oe,se,fe,Le,Ce,ee=s[3].shelf_number+"",ue,ye=s[1]=="client"&&Ui(s),ce=s[4]&&Fi(s);return{c(){e=h("div"),t=h("div"),r=h("img"),i=w(),o=h("small"),l=re("ISBN: "),c=re(a),u=w(),ye&&ye.c(),m=w(),_=h("div"),g=h("h1"),v=re(p),y=w(),b=h("p"),$=re(k),C=w(),S=h("p"),T=h("b"),T.textContent="Author:",j=w(),A=h("a"),Z=re(F),K=w(),W=h("p"),R=h("b"),R.textContent="Publisher:",I=w(),D=h("a"),te=re(V),B=w(),X=h("p"),we=h("b"),we.textContent="Category:",oe=w(),ce&&ce.c(),se=w(),fe=h("p"),Le=h("b"),Le.textContent="Shelf No.:",Ce=w(),ue=re(ee),f(r,"id","img-cover"),f(r,"class","border p-3"),et(r.src,n=s[14])||f(r,"src",n),f(r,"alt","book cover"),f(r,"height","300"),f(r,"width","300"),Je(r,"object-fit","contain"),f(o,"class","text-secondary"),f(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),f(g,"id","book-title"),f(g,"class","mb-2 pb-2"),f(b,"id","book-description"),f(A,"href",H="./#/author/"+s[3].author.author_id),f(D,"href",x="./#/publisher/"+s[3].publisher.publisher_id),f(_,"id","details-container"),f(_,"class","container mt-md-0 mt-3"),f(e,"class","d-md-flex d-block")},m(ie,We){E(ie,e,We),d(e,t),d(t,r),d(t,i),d(t,o),d(o,l),d(o,c),d(t,u),ye&&ye.m(t,null),d(e,m),d(e,_),d(_,g),d(g,v),d(_,y),d(_,b),d(b,$),d(_,C),d(_,S),d(S,T),d(S,j),d(S,A),d(A,Z),d(_,K),d(_,W),d(W,R),d(W,I),d(W,D),d(D,te),d(_,B),d(_,X),d(X,we),d(X,oe),ce&&ce.m(X,null),d(_,se),d(_,fe),d(fe,Le),d(fe,Ce),d(fe,ue)},p(ie,We){We[0]&8&&a!==(a=ie[3].isbn+"")&&le(c,a),ie[1]=="client"?ye?ye.p(ie,We):(ye=Ui(ie),ye.c(),ye.m(t,null)):ye&&(ye.d(1),ye=null),We[0]&8&&p!==(p=ie[3].title+"")&&le(v,p),We[0]&8&&k!==(k=ie[3].description+"")&&le($,k),We[0]&8&&F!==(F=ie[3].author.name+"")&&le(Z,F),We[0]&8&&H!==(H="./#/author/"+ie[3].author.author_id)&&f(A,"href",H),We[0]&8&&V!==(V=ie[3].publisher.name+"")&&le(te,V),We[0]&8&&x!==(x="./#/publisher/"+ie[3].publisher.publisher_id)&&f(D,"href",x),ie[4]?ce?ce.p(ie,We):(ce=Fi(ie),ce.c(),ce.m(X,null)):ce&&(ce.d(1),ce=null),We[0]&8&&ee!==(ee=ie[3].shelf_number+"")&&le(ue,ee)},i:U,o:U,d(ie){ie&&P(e),ye&&ye.d(),ce&&ce.d()}}}function Ui(s){let e;function t(i,o){return i[7]?n_:i[0]?r_:i[8]==0?s_:t_}let r=t(s),n=r(s);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){r===(r=t(i))&&n?n.p(i,o):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function t_(s){let e,t,r;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,f(e,"class","btn btn-primary w-50")},m(n,i){E(n,e,i),t||(r=G(e,"click",s[12]),t=!0)},p:U,d(n){n&&P(e),t=!1,r()}}}function s_(s){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,f(e,"class","btn btn-secondary w-50")},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function r_(s){let e,t,r,n,i,o,l;return{c(){e=h("button"),t=h("i"),r=w(),n=re(s[10]),f(t,"class","bi bi-x-circle"),f(e,"class",i="btn "+s[9]+" w-75")},m(a,c){E(a,e,c),d(e,t),d(e,r),d(e,n),o||(l=[G(e,"mouseenter",s[16]),G(e,"mouseleave",s[17]),G(e,"click",s[13])],o=!0)},p(a,c){c[0]&1024&&le(n,a[10]),c[0]&512&&i!==(i="btn "+a[9]+" w-75")&&f(e,"class",i)},d(a){a&&P(e),o=!1,De(l)}}}function n_(s){let e,t,r,n;return{c(){e=h("button"),t=re("Borrowed (#"),r=re(s[7]),n=re(")"),f(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){E(i,e,o),d(e,t),d(e,r),d(e,n)},p(i,o){o[0]&128&&le(r,i[7])},d(i){i&&P(e)}}}function Fi(s){let e,t=Se(Object.entries(s[4])),r=[];for(let n=0;n<t.length;n+=1)r[n]=xi(Yi(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ze()},m(n,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,i);E(n,e,i)},p(n,i){if(i[0]&16){t=Se(Object.entries(n[4]));let o;for(o=0;o<t.length;o+=1){const l=Yi(n,t,o);r[o]?r[o].p(l,i):(r[o]=xi(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&P(e),qe(r,n)}}}function xi(s){let e,t=s[31].category.name+"",r,n;return{c(){e=h("a"),r=re(t),n=re(`\r
              `),f(e,"href","./#/")},m(i,o){E(i,e,o),d(e,r),E(i,n,o)},p(i,o){o[0]&16&&t!==(t=i[31].category.name+"")&&le(r,t)},d(i){i&&(P(e),P(n))}}}function Hi(s){let e,t;return e=new dt({props:{title:"Status",icon:"journal",$$slots:{default:[a_]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n[0]&96|n[1]&8&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function zi(s){let e;function t(i,o){return i[6].length<=0?o_:i_}let r=t(s),n=r(s);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),E(i,e,o)},p(i,o){r===(r=t(i))&&n?n.p(i,o):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&P(e),n.d(i)}}}function i_(s){let e,t,r,n,i=Se(Object.entries(s[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Wi(Li(s,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=w(),n=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();f(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){E(l,e,a),d(e,t),d(e,r),d(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a[0]&64){i=Se(Object.entries(l[6]));let c;for(c=0;c<i.length;c+=1){const u=Li(l,i,c);o[c]?o[c].p(u,a):(o[c]=Wi(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&P(e),qe(o,l)}}}function o_(s){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",f(e,"class","text-center my-5")},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function Wi(s){let e,t,r=s[28].barcode+"",n,i,o,l=s[28].status!="Available"?`${s[28].fname} ${s[28].lname}`:"--",a,c,u,m=s[28].status+"",_,g,p=s[28].reservation_id?`(${s[28].reservation_id})`:s[28].borrow_id?`(${s[28].borrow_id})`:"",v,y,b,k,$,C,S=s[28].status=="Borrowed"?"Return":"Borrow",T,j,A,F,Z;return{c(){e=h("tr"),t=h("td"),n=re(r),i=w(),o=h("td"),a=re(l),c=w(),u=h("td"),_=re(m),g=w(),v=re(p),b=w(),k=h("td"),$=h("a"),C=h("small"),T=re(S),j=w(),A=h("i"),Z=w(),f(u,"class",y=s[28].status=="Available"?"text-bg-success":s[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),f(A,"class","bi bi-box-arrow-up-right"),f($,"href",F=s[28].status=="Available"?`./#/borrow?barcode=${s[28].barcode}`:s[28].status=="Reserved"?`./#/borrow?reserve_id=${s[28].reservation_id}`:`./#/return?borrow_id=${s[28].borrow_id}`),f($,"class","btn btn-outline-primary btn-sm")},m(H,K){E(H,e,K),d(e,t),d(t,n),d(e,i),d(e,o),d(o,a),d(e,c),d(e,u),d(u,_),d(u,g),d(u,v),d(e,b),d(e,k),d(k,$),d($,C),d(C,T),d(C,j),d(C,A),d(e,Z)},p(H,K){K[0]&64&&r!==(r=H[28].barcode+"")&&le(n,r),K[0]&64&&l!==(l=H[28].status!="Available"?`${H[28].fname} ${H[28].lname}`:"--")&&le(a,l),K[0]&64&&m!==(m=H[28].status+"")&&le(_,m),K[0]&64&&p!==(p=H[28].reservation_id?`(${H[28].reservation_id})`:H[28].borrow_id?`(${H[28].borrow_id})`:"")&&le(v,p),K[0]&64&&y!==(y=H[28].status=="Available"?"text-bg-success":H[28].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&f(u,"class",y),K[0]&64&&S!==(S=H[28].status=="Borrowed"?"Return":"Borrow")&&le(T,S),K[0]&64&&F!==(F=H[28].status=="Available"?`./#/borrow?barcode=${H[28].barcode}`:H[28].status=="Reserved"?`./#/borrow?reserve_id=${H[28].reservation_id}`:`./#/return?borrow_id=${H[28].borrow_id}`)&&f($,"href",F)},d(H){H&&P(e)}}}function a_(s){let e,t,r,n,i,o,l,a,c,u,m,_=s[6]&&zi(s);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",r=w(),n=h("div"),i=h("input"),o=w(),l=h("button"),l.textContent="Add",a=w(),_&&_.c(),c=ze(),f(t,"for","copy"),f(t,"class","form=control col-auto"),f(i,"type","text"),f(i,"class","form-control"),f(i,"id","copy"),f(i,"placeholder","Barcode Number"),f(n,"class","col-4"),f(l,"class","btn btn-primary col-2"),f(e,"class","row justify-content-center align-items-center my-3")},m(g,p){E(g,e,p),d(e,t),d(e,r),d(e,n),d(n,i),J(i,s[5]),d(e,o),d(e,l),E(g,a,p),_&&_.m(g,p),E(g,c,p),u||(m=[G(i,"input",s[18]),G(l,"click",s[11])],u=!0)},p(g,p){p[0]&32&&i.value!==g[5]&&J(i,g[5]),g[6]?_?_.p(g,p):(_=zi(g),_.c(),_.m(c.parentNode,c)):_&&(_.d(1),_=null)},d(g){g&&(P(e),P(a),P(c)),_&&_.d(g),u=!1,De(m)}}}function l_(s){let e,t,r,n,i,o,l,a,c,u,m,_,g=s[2]&&Ni();n=new Ze({props:{text:"Book Details"}});const p=[e_,Xm],v=[];function y(k,$){return k[3]?0:1}o=y(s),l=v[o]=p[o](s);let b=s[1]=="staff"&&Hi(s);return{c(){e=h("main"),g&&g.c(),t=w(),r=h("section"),N(n.$$.fragment),i=w(),l.c(),a=w(),b&&b.c(),c=w(),u=h("div"),f(u,"class","my-5"),f(e,"class","container")},m(k,$){E(k,e,$),g&&g.m(e,null),d(e,t),d(e,r),L(n,r,null),d(r,i),v[o].m(r,null),d(e,a),b&&b.m(e,null),d(e,c),d(e,u),_=!0},p(k,$){k[2]?g?$[0]&4&&O(g,1):(g=Ni(),g.c(),O(g,1),g.m(e,t)):g&&(Oe(),M(g,1,1,()=>{g=null}),Te());let C=o;o=y(k),o===C?v[o].p(k,$):(Oe(),M(v[C],1,1,()=>{v[C]=null}),Te(),l=v[o],l?l.p(k,$):(l=v[o]=p[o](k),l.c()),O(l,1),l.m(r,null)),k[1]=="staff"?b?(b.p(k,$),$[0]&2&&O(b,1)):(b=Hi(k),b.c(),O(b,1),b.m(e,c)):b&&(Oe(),M(b,1,1,()=>{b=null}),Te())},i(k){_||(O(g),O(n.$$.fragment,k),O(l),O(b),k&&(m||Ee(()=>{m=Ue(e,Fe,{duration:500}),m.start()})),_=!0)},o(k){M(g),M(n.$$.fragment,k),M(l),M(b),_=!1},d(k){k&&P(e),g&&g.d(),Y(n),v[o].d(),b&&b.d()}}}function Bi(){return 3e6+Math.floor(Math.random()*9e3)}function c_(s,e,t){let r,n;Rt.subscribe(R=>t(1,n=R));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,c,u;async function m(){const{data:R,error:I}=await ae.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(R[0]),t(3,c=R[0]),R.length==0&&t(2,a=!0);const{data:D,error:V}=await ae.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",D),V&&console.error(V),D.length==0?(t(4,u={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",u)):t(4,u=D)}Ds(m);let _;async function g(){const{data:R,error:I}=await ae.rpc("get_holdings",{bookid:l});I&&console.error(I),console.table(R),t(6,v=R)}async function p(){const{data:R}=await ae.from("library_holdings").select().eq("barcode",_);R.length==0&&await ae.from("library_holdings").insert({book_id:l,barcode:_})}let v;n=="staff"&&(g(),ae.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},g).subscribe());let y,b,k=0,$="btn-secondary";n=="client"&&(T(),b||(C(),S()));async function C(){const{data:R,error:I}=await ae.rpc("isreserved",{bookid:l,studid:i});t(0,y=R)}async function S(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,k=R.length)}async function T(){const{data:R,error:I}=await ae.rpc("isborrowed",{bookid:l,studid:i});t(7,b=R)}async function j(){const{data:R,error:I}=await ae.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(I){console.error(I);return}const{error:D}=await ae.from("book_reservation").insert({reservation_id:await F(),stud_id:i,holding_id:R.holding_id});if(D){console.error(D);return}const{data:V,error:te}=await ae.from("library_holdings").update({status:"Reserved"}).eq("barcode",R.barcode).select("holding_id").single();if(te){console.error(te);return}C()}async function A(){const{data:R,error:I}=await ae.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:D}=await ae.from("library_holdings").update({status:"Available"}).eq("holding_id",R.holding_id);!I||!D?(C(),S()):(console.error(I),console.error(D))}async function F(){let R=Bi();const{data:I,error:D}=await ae.from("book_reservation").select().eq("reservation_id",R);return console.log(I),I.length!=0&&(R=Bi(),console.log("exists")),console.log(R),R}let Z=l>4?"./book-cover.png":`./${l}.jpg`;const H=()=>{t(10,r="Cancel Reservation"),t(9,$="btn-danger")},K=()=>{t(10,r=`Reserved (#${y})`),t(9,$="btn-secondary")};function W(){_=this.value,t(5,_)}return s.$$set=R=>{"params"in R&&t(15,o=R.params)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(10,r=`Reserved (${y})`)},[y,n,a,c,u,_,v,b,k,$,r,p,j,A,Z,o,H,K,W]}class Ba extends be{constructor(e){super(),ge(this,e,c_,l_,pe,{params:15},null,[-1,-1])}}function u_(s){let e,t,r,n,i,o;const l=s[3].default,a=dr(l,s,s[2],null);return{c(){e=h("div"),t=h("label"),r=re(s[0]),n=w(),i=h("div"),a&&a.c(),f(t,"class","col-sm-4 col-md-3 col-form-label"),f(t,"for",s[1]),f(i,"class","col-sm-8 col-md-9"),f(e,"class","mb-4 row")},m(c,u){E(c,e,u),d(e,t),d(t,r),d(e,n),d(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&le(r,c[0]),(!o||u&2)&&f(t,"for",c[1]),a&&a.p&&(!o||u&4)&&hr(a,l,c,c[2],o?fr(l,c[2],u,null):mr(c[2]),null)},i(c){o||(O(a,c),o=!0)},o(c){M(a,c),o=!1},d(c){c&&P(e),a&&a.d(c)}}}function d_(s,e,t){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e;return s.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,n=l.$$scope)},[i,o,n,r]}class Ie extends be{constructor(e){super(),ge(this,e,d_,u_,pe,{label:0,id:1})}}function qi(s,e,t){const r=s.slice();return r[29]=e[t][0],r[30]=e[t][1],r}function Vi(s,e,t){const r=s.slice();return r[29]=e[t][0],r[34]=e[t][1],r}function Gi(s,e,t){const r=s.slice();return r[29]=e[t][0],r[38]=e[t][1],r}function f_(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-name"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,s[4]),t||(r=G(e,"input",s[18]),t=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&P(e),t=!1,r()}}}function h_(s){let e,t,r;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"id","book-description"),f(e,"rows","6"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,s[5]),t||(r=G(e,"input",s[19]),t=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&P(e),t=!1,r()}}}function m_(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","book-cover"),f(e,"accept","image/*")},m(n,i){E(n,e,i),s[21](e),t||(r=G(e,"change",s[20]),t=!0)},p:U,d(n){n&&P(e),s[21](null),t=!1,r()}}}function __(s){let e,t,r,n,i;return{c(){e=h("input"),t=w(),r=h("div"),r.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","categories"),f(e,"class","form-control "+s[13]),f(e,"type","text"),f(e,"id","book-category"),f(e,"autocomplete","off"),f(r,"class","invalid-feedback")},m(o,l){E(o,e,l),J(e,s[6]),E(o,t,l),E(o,r,l),n||(i=G(e,"input",s[23]),n=!0)},p(o,l){l[0]&64&&e.value!==o[6]&&J(e,o[6])},d(o){o&&(P(e),P(t),P(r)),n=!1,i()}}}function p_(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","authors"),f(e,"class",t="form-control "+s[11]),f(e,"type","text"),f(e,"id","book-author"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[7]),E(l,r,a),E(l,n,a),i||(o=G(e,"input",s[24]),i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&f(e,"class",t),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(P(e),P(r),P(n)),i=!1,o()}}}function g_(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',f(e,"list","publishers"),f(e,"class",t="form-control "+s[12]),f(e,"type","text"),f(e,"id","book-publisher"),f(e,"autocomplete","off"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[8]),E(l,r,a),E(l,n,a),i||(o=G(e,"input",s[25]),i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&f(e,"class",t),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(P(e),P(r),P(n)),i=!1,o()}}}function b_(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","number"),f(e,"id","book-shelf"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,s[9]),t||(r=G(e,"input",s[26]),t=!0)},p(n,i){i[0]&512&&_r(e.value)!==n[9]&&J(e,n[9])},d(n){n&&P(e),t=!1,r()}}}function v_(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","book-isbn"),f(e,"autocomplete","off")},m(n,i){E(n,e,i),J(e,s[10]),t||(r=G(e,"input",s[27]),t=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&P(e),t=!1,r()}}}function w_(s){return{c:U,m:U,p:U,d:U}}function y_(s){let e,t=Se(Object.entries(s[37])),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ji(Gi(s,t,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();f(e,"id","authors")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&32768){t=Se(Object.entries(n[37]));let o;for(o=0;o<t.length;o+=1){const l=Gi(n,t,o);r[o]?r[o].p(l,i):(r[o]=Ji(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&P(e),qe(r,n)}}}function Ji(s){let e;return{c(){e=h("option"),e.__value=s[38].name,J(e,e.__value)},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function k_(s){return{c:U,m:U,p:U,d:U}}function $_(s){return{c:U,m:U,p:U,d:U}}function S_(s){let e,t=Se(Object.entries(s[33])),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ki(Vi(s,t,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();f(e,"id","publishers")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&65536){t=Se(Object.entries(n[33]));let o;for(o=0;o<t.length;o+=1){const l=Vi(n,t,o);r[o]?r[o].p(l,i):(r[o]=Ki(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&P(e),qe(r,n)}}}function Ki(s){let e;return{c(){e=h("option"),e.__value=s[34].name,J(e,e.__value)},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function O_(s){return{c:U,m:U,p:U,d:U}}function T_(s){return{c:U,m:U,p:U,d:U}}function D_(s){let e,t=Se(Object.entries(s[28])),r=[];for(let n=0;n<t.length;n+=1)r[n]=Zi(qi(s,t,n));return{c(){e=h("datalist");for(let n=0;n<r.length;n+=1)r[n].c();f(e,"id","categories")},m(n,i){E(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&131072){t=Se(Object.entries(n[28]));let o;for(o=0;o<t.length;o+=1){const l=qi(n,t,o);r[o]?r[o].p(l,i):(r[o]=Zi(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&P(e),qe(r,n)}}}function Zi(s){let e;return{c(){e=h("option"),e.__value=s[30].name,J(e,e.__value)},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function M_(s){return{c:U,m:U,p:U,d:U}}function C_(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,se,fe,Le,Ce;t=new Ze({props:{text:"Add Book"}}),o=new Ie({props:{label:"Book Title:",id:"book-name",$$slots:{default:[f_]},$$scope:{ctx:s}}}),a=new Ie({props:{label:"Book Description:",id:"book-description",$$slots:{default:[h_]},$$scope:{ctx:s}}}),u=new Ie({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[m_]},$$scope:{ctx:s}}}),j=new Ie({props:{label:"Category:",id:"book-category",$$slots:{default:[__]},$$scope:{ctx:s}}}),F=new Ie({props:{label:"Author: ",id:"book-author",$$slots:{default:[p_]},$$scope:{ctx:s}}}),H=new Ie({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[g_]},$$scope:{ctx:s}}}),W=new Ie({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[b_]},$$scope:{ctx:s}}}),I=new Ie({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[v_]},$$scope:{ctx:s}}});let ee={ctx:s,current:null,token:null,hasCatch:!1,pending:k_,then:y_,catch:w_,value:37};Vs(s[15](),ee);let ue={ctx:s,current:null,token:null,hasCatch:!1,pending:O_,then:S_,catch:$_,value:33};Vs(s[16](),ue);let ye={ctx:s,current:null,token:null,hasCatch:!1,pending:M_,then:D_,catch:T_,value:28};return Vs(s[17](),ye),{c(){e=h("section"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),_=h("div"),g=h("label"),g.textContent="Preview:",p=w(),v=h("div"),y=h("img"),k=w(),$=h("button"),$.textContent="Remove",S=w(),T=h("div"),N(j.$$.fragment),A=w(),N(F.$$.fragment),Z=w(),N(H.$$.fragment),K=w(),N(W.$$.fragment),R=w(),N(I.$$.fragment),D=w(),V=h("div"),te=h("button"),te.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',x=w(),B=h("a"),B.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',X=w(),ee.block.c(),we=w(),ue.block.c(),oe=w(),ye.block.c(),f(g,"for","cover-preview"),f(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(y.src,b=s[3])||f(y,"src",b),f(y,"alt","Preview"),f(y,"id","cover-preview"),f(y,"height","150"),f($,"class","btn btn-sm btn-danger"),f(v,"class","col-sm-8 col-md-9"),f(v,"id","preview-div"),f(_,"class",C="my-3 row "+s[2]),f(i,"class","col-sm-12 col-lg-6"),f(T,"class","col-sm-12 col-lg-6"),f(n,"class","row justify-content-center"),f(te,"class","btn btn-success"),f(B,"href","./#/"),f(V,"class","my-3"),f(e,"class","my-1 container")},m(ce,ie){E(ce,e,ie),L(t,e,null),d(e,r),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),d(i,_),d(_,g),d(_,p),d(_,v),d(v,y),d(v,k),d(v,$),d(n,S),d(n,T),L(j,T,null),d(T,A),L(F,T,null),d(T,Z),L(H,T,null),d(T,K),L(W,T,null),d(T,R),L(I,T,null),d(e,D),d(e,V),d(V,te),d(V,x),d(V,B),d(e,X),ee.block.m(e,ee.anchor=null),ee.mount=()=>e,ee.anchor=we,d(e,we),ue.block.m(e,ue.anchor=null),ue.mount=()=>e,ue.anchor=oe,d(e,oe),ye.block.m(e,ye.anchor=null),ye.mount=()=>e,ye.anchor=null,fe=!0,Le||(Ce=[G($,"click",s[22]),G(te,"click",s[14])],Le=!0)},p(ce,ie){s=ce;const We={};ie[0]&16|ie[1]&1024&&(We.$$scope={dirty:ie,ctx:s}),o.$set(We);const Wn={};ie[0]&32|ie[1]&1024&&(Wn.$$scope={dirty:ie,ctx:s}),a.$set(Wn);const Bn={};ie[0]&3|ie[1]&1024&&(Bn.$$scope={dirty:ie,ctx:s}),u.$set(Bn),(!fe||ie[0]&8&&!et(y.src,b=s[3]))&&f(y,"src",b),(!fe||ie[0]&4&&C!==(C="my-3 row "+s[2]))&&f(_,"class",C);const qn={};ie[0]&64|ie[1]&1024&&(qn.$$scope={dirty:ie,ctx:s}),j.$set(qn);const Vn={};ie[0]&2176|ie[1]&1024&&(Vn.$$scope={dirty:ie,ctx:s}),F.$set(Vn);const Gn={};ie[0]&4352|ie[1]&1024&&(Gn.$$scope={dirty:ie,ctx:s}),H.$set(Gn);const Jn={};ie[0]&512|ie[1]&1024&&(Jn.$$scope={dirty:ie,ctx:s}),W.$set(Jn);const Kn={};ie[0]&1024|ie[1]&1024&&(Kn.$$scope={dirty:ie,ctx:s}),I.$set(Kn),Gs(ee,s,ie),Gs(ue,s,ie),Gs(ye,s,ie)},i(ce){fe||(O(t.$$.fragment,ce),O(o.$$.fragment,ce),O(a.$$.fragment,ce),O(u.$$.fragment,ce),O(j.$$.fragment,ce),O(F.$$.fragment,ce),O(H.$$.fragment,ce),O(W.$$.fragment,ce),O(I.$$.fragment,ce),ce&&(se||Ee(()=>{se=Ue(e,Fe,{duration:500}),se.start()})),fe=!0)},o(ce){M(t.$$.fragment,ce),M(o.$$.fragment,ce),M(a.$$.fragment,ce),M(u.$$.fragment,ce),M(j.$$.fragment,ce),M(F.$$.fragment,ce),M(H.$$.fragment,ce),M(W.$$.fragment,ce),M(I.$$.fragment,ce),fe=!1},d(ce){ce&&P(e),Y(t),Y(o),Y(a),Y(u),Y(j),Y(F),Y(H),Y(W),Y(I),ee.block.d(),ee.token=null,ee=null,ue.block.d(),ue.token=null,ue=null,ye.block.d(),ye.token=null,ye=null,Le=!1,De(Ce)}}}function P_(s,e,t){let r,n,i="d-none",o,l,a,c,u,m,_,g,p,v,y;async function b(){const{data:I,error:D}=await ae.from("author").select("author_id").eq("name",u).single(),{data:V,error:te}=await ae.from("publisher").select("publisher_id").eq("name",m).single();let x=!0;if((D||!I)&&(t(11,v="is-invalid"),x=!1),(te||!V)&&(t(12,y="is-invalid"),x=!1),!x)return;const{error:B}=await ae.from("books").insert({title:l,description:a,author_id:I.author_id,publisher_id:V.publisher_id,shelf_number:_,isbn:g});B?console.error(B):alert(`Successfully Added ${l}!`)}async function k(){const{data:I,error:D}=await ae.from("author").select("name").order("name",{ascending:!0});return I}async function $(){const{data:I,error:D}=await ae.from("publisher").select("name").order("name",{ascending:!0});return I}async function C(){const{data:I,error:D}=await ae.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return I}function S(){l=this.value,t(4,l)}function T(){a=this.value,t(5,a)}function j(){r=this.files,t(0,r)}function A(I){as[I?"unshift":"push"](()=>{n=I,t(1,n)})}const F=()=>{t(1,n.value="",n),t(0,r="")};function Z(){c=this.value,t(6,c)}function H(){u=this.value,t(7,u)}function K(){m=this.value,t(8,m)}function W(){_=_r(this.value),t(9,_)}function R(){g=this.value,t(10,g)}return s.$$.update=()=>{if(s.$$.dirty[0]&1)if(r&&r[0]){console.log(r),t(2,i="");const I=URL.createObjectURL(r[0]);t(3,o=I)}else console.log(r),t(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,v,y,p,b,k,$,C,S,T,j,A,F,Z,H,K,W,R]}class E_ extends be{constructor(e){super(),ge(this,e,P_,C_,pe,{},null,[-1,-1])}}function Qi(s,e,t){const r=s.slice();return r[5]=e[t][0],r[6]=e[t][1],r}function R_(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function j_(s){let e,t,r=s[0].name+"",n,i,o,l,a,c,u,m,_=s[0].email+"",g,p;function v(k,$){return k[0].bio==null?I_:A_}let y=v(s),b=y(s);return{c(){e=h("div"),t=h("h1"),n=re(r),i=w(),o=h("p"),b.c(),l=w(),a=h("p"),c=h("b"),c.textContent="Website:",u=w(),m=h("a"),g=re(_),f(t,"class","mb-2 pb-2"),f(o,"class",""),f(m,"href",p="mailto:"+s[0].email),f(e,"class","container")},m(k,$){E(k,e,$),d(e,t),d(t,n),d(e,i),d(e,o),b.m(o,null),d(e,l),d(e,a),d(a,c),d(a,u),d(a,m),d(m,g)},p(k,$){$&1&&r!==(r=k[0].name+"")&&le(n,r),y===(y=v(k))&&b?b.p(k,$):(b.d(1),b=y(k),b&&(b.c(),b.m(o,null))),$&1&&_!==(_=k[0].email+"")&&le(g,_),$&1&&p!==(p="mailto:"+k[0].email)&&f(m,"href",p)},i:U,o:U,d(k){k&&P(e),b.d()}}}function A_(s){let e=s[0].bio+"",t;return{c(){t=re(e)},m(r,n){E(r,t,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&le(t,e)},d(r){r&&P(t)}}}function I_(s){let e;return{c(){e=h("span"),e.textContent="No Description",f(e,"class","text-secondary")},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function L_(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function Y_(s){let e,t,r=Se(Object.entries(s[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Xi(Qi(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){r=Se(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Qi(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=Xi(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function Xi(s){let e,t;return e=new vr({props:{title:s[6].title,id:s[6].book_id,author:s[6].publisher.name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function N_(s){let e,t,r,n;const i=[Y_,L_],o=[];function l(a,c){return a[1]?0:1}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function U_(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v;r=new Ze({props:{text:"Author Details"}});const y=[j_,R_],b=[];function k($,C){return $[0]?0:1}return u=k(s),m=b[u]=y[u](s),g=new dt({props:{title:"Books",icon:"journal",$$slots:{default:[N_]},$$scope:{ctx:s}}}),{c(){e=h("main"),t=h("section"),N(r.$$.fragment),n=w(),i=h("div"),o=h("div"),l=h("img"),c=w(),m.c(),_=w(),N(g.$$.fragment),f(l,"class","border p-3"),et(l.src,a=F_)||f(l,"src",a),f(l,"alt","author"),f(l,"height","300"),f(l,"width","300"),Je(l,"object-fit","contain"),f(o,"class","d-flex justify-content-center my-1"),f(i,"class","d-md-flex d-block"),f(e,"class","container")},m($,C){E($,e,C),d(e,t),L(r,t,null),d(t,n),d(t,i),d(i,o),d(o,l),d(i,c),b[u].m(i,null),d(e,_),L(g,e,null),v=!0},p($,[C]){let S=u;u=k($),u===S?b[u].p($,C):(Oe(),M(b[S],1,1,()=>{b[S]=null}),Te(),m=b[u],m?m.p($,C):(m=b[u]=y[u]($),m.c()),O(m,1),m.m(i,null));const T={};C&514&&(T.$$scope={dirty:C,ctx:$}),g.$set(T)},i($){v||(O(r.$$.fragment,$),O(m),O(g.$$.fragment,$),$&&(p||Ee(()=>{p=Ue(e,Fe,{duration:500}),p.start()})),v=!0)},o($){M(r.$$.fragment,$),M(m),M(g.$$.fragment,$),v=!1},d($){$&&P(e),Y(r),b[u].d(),Y(g)}}}let F_="./default-profile.jpg";function x_(s,e,t){let{params:r}=e,n=r.authorID,i,o;async function l(){const{data:a,error:c}=await ae.from("author").select().eq("author_id",n);console.log(a),t(0,i=a[0]);const{data:u,error:m}=await ae.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),t(1,o=u)}return Ds(l),s.$$set=a=>{"params"in a&&t(2,r=a.params)},[i,o,r]}class qa extends be{constructor(e){super(),ge(this,e,x_,U_,pe,{params:2})}}function eo(s,e,t){const r=s.slice();return r[5]=e[t][0],r[6]=e[t][1],r}function to(s){let e,t,r=s[0].name+"",n,i,o,l,a,c,u,m,_=s[0].email+"",g,p;function v(k,$){return k[0].bio==null?z_:H_}let y=v(s),b=y(s);return{c(){e=h("div"),t=h("h1"),n=re(r),i=w(),o=h("p"),b.c(),l=w(),a=h("p"),c=h("b"),c.textContent="Website:",u=w(),m=h("a"),g=re(_),f(t,"class","mb-2 pb-2"),f(o,"class",""),f(m,"href",p="https://"+s[0].email),f(m,"id","publisher-website"),f(e,"class","container")},m(k,$){E(k,e,$),d(e,t),d(t,n),d(e,i),d(e,o),b.m(o,null),d(e,l),d(e,a),d(a,c),d(a,u),d(a,m),d(m,g)},p(k,$){$&1&&r!==(r=k[0].name+"")&&le(n,r),y===(y=v(k))&&b?b.p(k,$):(b.d(1),b=y(k),b&&(b.c(),b.m(o,null))),$&1&&_!==(_=k[0].email+"")&&le(g,_),$&1&&p!==(p="https://"+k[0].email)&&f(m,"href",p)},d(k){k&&P(e),b.d()}}}function H_(s){let e=s[0].bio+"",t;return{c(){t=re(e)},m(r,n){E(r,t,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&le(t,e)},d(r){r&&P(t)}}}function z_(s){let e;return{c(){e=h("span"),e.textContent="No Description",f(e,"class","text-secondary")},m(t,r){E(t,e,r)},p:U,d(t){t&&P(e)}}}function W_(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function B_(s){let e,t,r=Se(Object.entries(s[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=so(eo(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){e=h("div");for(let o=0;o<n.length;o+=1)n[o].c();f(e,"class","row")},m(o,l){E(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,l){if(l&2){r=Se(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=eo(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=so(c),n[a].c(),O(n[a],1),n[a].m(e,null))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function so(s){let e,t;return e=new vr({props:{title:s[6].title,id:s[6].book_id,author:s[6].author.name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function q_(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y;t=new Ze({props:{text:"Publisher Details"}});let b=s[0]&&to(s);_=new dt({props:{title:"Books",icon:"journal"}});const k=[B_,W_],$=[];function C(S,T){return S[1]?0:1}return p=C(s),v=$[p]=k[p](s),{c(){e=h("section"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),o=h("img"),a=w(),b&&b.c(),u=w(),m=h("section"),N(_.$$.fragment),g=w(),v.c(),f(o,"id","img-cover"),f(o,"class","border p-3"),et(o.src,l=V_)||f(o,"src",l),f(o,"alt","publisher"),f(o,"height","300"),f(o,"width","300"),Je(o,"object-fit","contain"),f(i,"id","publisher-cover"),f(i,"class","d-flex justify-content-center my-1"),f(n,"class","d-md-flex d-block"),f(e,"class","container"),f(m,"class","container")},m(S,T){E(S,e,T),L(t,e,null),d(e,r),d(e,n),d(n,i),d(i,o),d(n,a),b&&b.m(n,null),E(S,u,T),E(S,m,T),L(_,m,null),d(m,g),$[p].m(m,null),y=!0},p(S,[T]){S[0]?b?b.p(S,T):(b=to(S),b.c(),b.m(n,null)):b&&(b.d(1),b=null);let j=p;p=C(S),p===j?$[p].p(S,T):(Oe(),M($[j],1,1,()=>{$[j]=null}),Te(),v=$[p],v?v.p(S,T):(v=$[p]=k[p](S),v.c()),O(v,1),v.m(m,null))},i(S){y||(O(t.$$.fragment,S),S&&(c||Ee(()=>{c=Ue(e,Fe,{duration:500}),c.start()})),O(_.$$.fragment,S),O(v),y=!0)},o(S){M(t.$$.fragment,S),M(_.$$.fragment,S),M(v),y=!1},d(S){S&&(P(e),P(u),P(m)),Y(t),b&&b.d(),Y(_),$[p].d()}}}let V_="./default-profile.jpg";function G_(s,e,t){let{params:r}=e,n=r.publisherID,i,o;async function l(){const{data:a,error:c}=await ae.from("publisher").select().eq("publisher_id",n);console.log(a),t(0,i=a[0]);const{data:u,error:m}=await ae.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),t(1,o=u)}return Ds(l),s.$$set=a=>{"params"in a&&t(2,r=a.params)},[i,o,r]}class Va extends be{constructor(e){super(),ge(this,e,G_,q_,pe,{params:2})}}function J_(s){let e,t,r,n,i,o,l,a,c,u;return{c(){e=h("div"),t=h("div"),r=h("i"),i=w(),o=h("div"),l=h("h5"),a=h("a"),c=re(s[0]),f(r,"class",n="bi bi-"+s[2]),f(t,"class","d-flex justify-content-center"),Je(t,"font-size","3em"),f(a,"class","stretched-link svelte-1vxezln"),f(a,"href",u="./#/"+s[1]),f(l,"class","card-title text-center my-2"),f(o,"class","card-body p-1"),f(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(m,_){E(m,e,_),d(e,t),d(t,r),d(e,i),d(e,o),d(o,l),d(l,a),d(a,c)},p(m,[_]){_&4&&n!==(n="bi bi-"+m[2])&&f(r,"class",n),_&1&&le(c,m[0]),_&2&&u!==(u="./#/"+m[1])&&f(a,"href",u)},i:U,o:U,d(m){m&&P(e)}}}function K_(s,e,t){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return s.$$set=o=>{"name"in o&&t(0,r=o.name),"link"in o&&t(1,n=o.link),"icon"in o&&t(2,i=o.icon)},[r,n,i]}class ut extends be{constructor(e){super(),ge(this,e,K_,J_,pe,{name:0,link:1,icon:2})}}function Z_(s){let e,t,r,n,i;return t=new ut({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new ut({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),N(t.$$.fragment),r=w(),N(n.$$.fragment),f(e,"class","row justify-content-center gap-4")},m(o,l){E(o,e,l),L(t,e,null),d(e,r),L(n,e,null),i=!0},p:U,i(o){i||(O(t.$$.fragment,o),O(n.$$.fragment,o),i=!0)},o(o){M(t.$$.fragment,o),M(n.$$.fragment,o),i=!1},d(o){o&&P(e),Y(t),Y(n)}}}function Q_(s){let e,t,r,n,i,o,l,a,c;return t=new ut({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new ut({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new ut({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new ut({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),N(t.$$.fragment),r=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5")},m(u,m){E(u,e,m),L(t,e,null),d(e,r),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),c=!0},p:U,i(u){c||(O(t.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(t.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(t),Y(n),Y(o),Y(a)}}}function X_(s){let e,t,r,n,i,o,l,a,c;return t=new ut({props:{name:"Books Report",link:"book-report",icon:"journals"}}),n=new ut({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new ut({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new ut({props:{name:"Transactions Report",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),N(t.$$.fragment),r=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),f(e,"class","row justify-content-center gap-5 mb-5")},m(u,m){E(u,e,m),L(t,e,null),d(e,r),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),c=!0},p:U,i(u){c||(O(t.$$.fragment,u),O(n.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),c=!0)},o(u){M(t.$$.fragment,u),M(n.$$.fragment,u),M(o.$$.fragment,u),M(a.$$.fragment,u),c=!1},d(u){u&&P(e),Y(t),Y(n),Y(o),Y(a)}}}function ep(s){let e,t,r,n,i,o,l,a;return t=new dt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Z_]},$$scope:{ctx:s}}}),n=new dt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Q_]},$$scope:{ctx:s}}}),o=new dt({props:{title:"Reports",icon:"receipt",$$slots:{default:[X_]},$$scope:{ctx:s}}}),{c(){e=h("main"),N(t.$$.fragment),r=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),f(e,"class","container")},m(c,u){E(c,e,u),L(t,e,null),d(e,r),L(n,e,null),d(e,i),L(o,e,null),a=!0},p(c,[u]){const m={};u&1&&(m.$$scope={dirty:u,ctx:c}),t.$set(m);const _={};u&1&&(_.$$scope={dirty:u,ctx:c}),n.$set(_);const g={};u&1&&(g.$$scope={dirty:u,ctx:c}),o.$set(g)},i(c){a||(O(t.$$.fragment,c),O(n.$$.fragment,c),O(o.$$.fragment,c),c&&(l||Ee(()=>{l=Ue(e,Fe,{duration:500}),l.start()})),a=!0)},o(c){M(t.$$.fragment,c),M(n.$$.fragment,c),M(o.$$.fragment,c),a=!1},d(c){c&&P(e),Y(t),Y(n),Y(o)}}}class tp extends be{constructor(e){super(),ge(this,e,null,ep,pe,{})}}function ro(s,e,t){const r=s.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function no(s,e,t){const r=s.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function io(s,e,t){const r=s.slice();return r[13]=e[t][0],r[14]=e[t][1],r}function oo(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T;return{c(){e=h("div"),t=h("div"),t.textContent="Category:",r=w(),n=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",c=w(),u=h("div"),u.textContent="Sort by:",m=w(),_=h("div"),g=h("select"),p=h("option"),p.textContent="Total",v=h("option"),v.textContent="Available",y=h("option"),y.textContent="Reserved",b=h("option"),b.textContent="Borrowed",k=w(),$=h("div"),C=h("select"),S=h("option"),S.textContent="Ascending",T=h("option"),T.textContent="Descending",o.__value="all",J(o,o.__value),l.__value="tech",J(l,l.__value),a.__value="all",J(a,a.__value),f(i,"name","category"),f(i,"class","form-select"),p.__value="",J(p,p.__value),v.__value="",J(v,v.__value),y.__value="",J(y,y.__value),b.__value="",J(b,b.__value),f(g,"name","filter"),f(g,"class","form-select"),S.__value="",J(S,S.__value),T.__value="",J(T,T.__value),f(C,"name","order"),f(C,"class","form-select"),f(e,"class","d-flex justify-content-end align-items-center gap-2")},m(j,A){E(j,e,A),d(e,t),d(e,r),d(e,n),d(n,i),d(i,o),d(i,l),d(i,a),d(e,c),d(e,u),d(e,m),d(e,_),d(_,g),d(g,p),d(g,v),d(g,y),d(g,b),d(e,k),d(e,$),d($,C),d(C,S),d(C,T)},d(j){j&&P(e)}}}function sp(s){let e,t;return e=new jt({}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p:U,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function rp(s){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',f(e,"class","d-flex justify-content-center mt-5")},m(t,r){E(t,e,r)},p:U,i:U,o:U,d(t){t&&P(e)}}}function np(s){let e,t,r=Se(Object.entries(s[2].publisher)),n=[];for(let o=0;o<r.length;o+=1)n[o]=ao(ro(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){r=Se(Object.entries(o[2].publisher));let a;for(a=0;a<r.length;a+=1){const c=ro(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=ao(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function ip(s){let e,t,r=Se(Object.entries(s[2].author)),n=[];for(let o=0;o<r.length;o+=1)n[o]=lo(no(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){r=Se(Object.entries(o[2].author));let a;for(a=0;a<r.length;a+=1){const c=no(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=lo(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function op(s){let e,t,r=Se(Object.entries(s[2].books)),n=[];for(let o=0;o<r.length;o+=1)n[o]=co(io(s,r,o));const i=o=>M(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);E(o,e,l),t=!0},p(o,l){if(l&4){r=Se(Object.entries(o[2].books));let a;for(a=0;a<r.length;a+=1){const c=io(o,r,a);n[a]?(n[a].p(c,l),O(n[a],1)):(n[a]=co(c),n[a].c(),O(n[a],1),n[a].m(e.parentNode,e))}for(Oe(),a=r.length;a<n.length;a+=1)i(a);Te()}},i(o){if(!t){for(let l=0;l<r.length;l+=1)O(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)M(n[l]);t=!1},d(o){o&&P(e),qe(n,o)}}}function ao(s){let e,t;return e=new Xo({props:{id:s[14].publisher_id,name:s[14].name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function lo(s){let e,t;return e=new Qo({props:{id:s[14].author_id,name:s[14].name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function co(s){let e,t;return e=new vr({props:{title:s[14].title,id:s[14].book_id,author:s[14].author.name}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function ap(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F;t=new Ze({props:{text:"Library Holdings"}});let Z=s[3]&&s[3].value=="books"&&oo();const H=[op,ip,np,rp,sp],K=[];function W(R,I){return R[2].books.length>0?0:R[2].author.length>0?1:R[2].publisher.length>0?2:R[0]?4:3}return C=W(s),S=K[C]=H[C](s),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",c=h("option"),c.textContent="Publisher",u=w(),m=h("div"),_=h("input"),g=w(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',v=w(),Z&&Z.c(),y=w(),b=h("hr"),k=w(),$=h("div"),S.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),f(o,"name","searchtype"),f(o,"class","form-select"),f(i,"class","col-auto col-md-2 p-0 pe-md-4"),f(_,"class","form-control form-control-lg"),f(_,"type","search"),f(_,"placeholder","Search"),f(_,"name","Search"),f(m,"class","col-6 col-md-6 p-0"),f(p,"class","btn btn-lg btn-success col-auto col-md-1"),f(p,"type","submit"),f(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),f($,"class","row"),f(e,"class","container")},m(R,I){E(R,e,I),L(t,e,null),d(e,r),d(e,n),d(n,i),d(i,o),d(o,l),d(o,a),d(o,c),s[5](o),d(n,u),d(n,m),d(m,_),J(_,s[1]),d(n,g),d(n,p),d(e,v),Z&&Z.m(e,null),d(e,y),d(e,b),d(e,k),d(e,$),K[C].m($,null),j=!0,A||(F=[G(o,"change",s[4]),G(_,"input",s[6]),G(_,"keyup",s[7]),G(p,"click",s[4])],A=!0)},p(R,[I]){I&2&&_.value!==R[1]&&J(_,R[1]),R[3]&&R[3].value=="books"?Z||(Z=oo(),Z.c(),Z.m(e,y)):Z&&(Z.d(1),Z=null);let D=C;C=W(R),C===D?K[C].p(R,I):(Oe(),M(K[D],1,1,()=>{K[D]=null}),Te(),S=K[C],S?S.p(R,I):(S=K[C]=H[C](R),S.c()),O(S,1),S.m($,null))},i(R){j||(O(t.$$.fragment,R),O(S),R&&(T||Ee(()=>{T=Ue(e,Fe,{duration:500}),T.start()})),j=!0)},o(R){M(t.$$.fragment,R),M(S),j=!1},d(R){R&&P(e),Y(t),s[5](null),Z&&Z.d(),K[C].d(),A=!1,De(F)}}}function lp(s,e,t){let r;cn(s,gl,y=>t(9,r=y));let n=!0;function i(){switch(r){case"/search/author":t(3,m.value="author",m);break;case"/search/publisher":t(3,m.value="publisher",m);break;default:t(3,m.value="books",m)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},m;async function _(){t(0,n=!0),a=m.value,console.log(a);const{data:y,error:b}=await ae.from(a).select(o[a]).ilike(l[a],`%${c}%`);b&&console.log(b),t(2,u.books=[],u),t(2,u.author=[],u),t(2,u.publisher=[],u),t(2,u[a]=y,u),t(2,u),t(0,n=!1),console.log(n,u)}Ds(i),Ds(_);function g(y){as[y?"unshift":"push"](()=>{m=y,t(3,m)})}function p(){c=this.value,t(1,c)}return[n,c,u,m,_,g,p,y=>y.key==="Enter"&&_()]}class os extends be{constructor(e){super(),ge(this,e,lp,ap,pe,{})}}function uo(s){let e,t;return{c(){e=h("div"),t=re(s[4]),f(e,"class","alert alert-danger p-1 text-center svelte-1c2zskh")},m(r,n){E(r,e,n),d(e,t)},p(r,n){n[0]&16&&le(t,r[4])},d(r){r&&P(e)}}}function cp(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b=s[6]&&fo(s);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",r=w(),n=h("form"),b&&b.c(),i=w(),o=h("div"),o.innerHTML='<div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-bounding-box"></i></span> <input type="text" id="sID" name="hidden" required="" minlength="6" maxlength="6" autocomplete="off" class="svelte-1c2zskh"/> <label for="sID" class="svelte-1c2zskh">Student ID</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="fname" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="fname" class="svelte-1c2zskh">First Name</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-person-vcard-fill"></i></span> <input type="text" id="lname" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="lname" class="svelte-1c2zskh">Last Name</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="email" id="email" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="email" class="svelte-1c2zskh">Email</label></div>',l=w(),a=h("div"),a.innerHTML='<div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-telephone-fill"></i></span> <input type="tel" id="contact" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="contact" class="svelte-1c2zskh">Contact</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-geo-alt-fill"></i></span> <input type="text" id="address" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="address" class="svelte-1c2zskh">Address</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="number" id="yearLevel" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="yearLevel" class="svelte-1c2zskh">Year Level</label></div> <div class="input-box svelte-1c2zskh"><span class="icon svelte-1c2zskh"><i class="bi bi-envelope"></i></span> <input type="text" id="course" name="hidden" required="" autocomplete="off" class="svelte-1c2zskh"/> <label for="course" class="svelte-1c2zskh">Course</label></div>',c=w(),u=h("button"),u.textContent="Proceed",m=w(),_=h("a"),_.textContent="Back",f(t,"class","svelte-1c2zskh"),f(o,"class","col-12 col-sm-6"),f(a,"class","col-12 col-sm-6"),f(u,"type","submit"),f(u,"class","bton w-50 svelte-1c2zskh"),f(u,"name","hidden"),f(u,"id","Proceed"),f(n,"class","row justify-content-center"),f(_,"href","./#/"),f(_,"class","mt-2 svelte-1c2zskh"),f(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1c2zskh"),f(e,"style","height")},m(k,$){E(k,e,$),d(e,t),d(e,r),d(e,n),b&&b.m(n,null),d(n,i),d(n,o),d(n,l),d(n,a),d(n,c),d(n,u),d(e,m),d(e,_),p=!0,v||(y=[G(u,"click",mp),G(n,"submit",es(s[16])),G(_,"click",s[27])],v=!0)},p(k,$){k[6]?b?b.p(k,$):(b=fo(k),b.c(),b.m(n,i)):b&&(b.d(1),b=null)},i(k){p||(k&&Ee(()=>{p&&(g||(g=ls(e,ds,{duration:600,y:500},!0)),g.run(1))}),p=!0)},o(k){k&&(g||(g=ls(e,ds,{duration:600,y:500},!1)),g.run(0)),p=!1},d(k){k&&P(e),b&&b.d(),k&&g&&g.end(),v=!1,De(y)}}}function up(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe=s[5]&&ho(s);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",r=w(),oe&&oe.c(),n=w(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=w(),c=h("input"),u=w(),m=h("label"),m.textContent="Username",_=w(),g=h("div"),p=h("span"),v=h("a"),v.innerHTML='<i class="bi bi-eye"></i>',y=w(),b=h("input"),k=w(),$=h("label"),$.textContent="Password",C=w(),S=h("div"),T=h("span"),j=h("a"),j.innerHTML='<i class="bi bi-eye"></i>',A=w(),F=h("input"),Z=w(),H=h("label"),H.textContent="Confirm Password",K=w(),W=h("button"),W.textContent="Next",R=w(),I=h("div"),D=h("p"),V=re("Already have an account? "),te=h("a"),te.textContent="Login",f(t,"class","svelte-1c2zskh"),f(l,"class","icon svelte-1c2zskh"),f(c,"type","text"),f(c,"id","registerUsername"),c.required=!0,f(c,"autocomplete","off"),f(c,"class","svelte-1c2zskh"),f(m,"for","registerUsername"),f(m,"class","svelte-1c2zskh"),f(o,"class","input-box svelte-1c2zskh"),f(v,"href","./#/"),f(v,"class","svelte-1c2zskh"),f(p,"class","icon svelte-1c2zskh"),f(p,"id","showPass2"),f(b,"type","password"),f(b,"id","registerPass"),b.required=!0,f(b,"autocomplete","off"),f(b,"minlength","6"),f(b,"class","svelte-1c2zskh"),f($,"for","registerPass"),f($,"class","svelte-1c2zskh"),f(g,"class","input-box svelte-1c2zskh"),f(j,"href","./#/"),f(j,"class","svelte-1c2zskh"),f(T,"class","icon svelte-1c2zskh"),f(T,"id","showPass3"),f(F,"type","password"),f(F,"id","registerConfirm"),F.required=!0,f(F,"autocomplete","off"),f(F,"minlength","6"),f(F,"class","svelte-1c2zskh"),f(H,"for","registerConfirm"),f(H,"class","svelte-1c2zskh"),f(S,"class","input-box svelte-1c2zskh"),f(W,"type","submit"),f(W,"class","bton svelte-1c2zskh"),f(W,"id","registerBtn"),f(te,"href","./#/"),f(te,"class","login-link svelte-1c2zskh"),f(I,"class","login-register svelte-1c2zskh"),f(e,"class","form-box register svelte-1c2zskh")},m(se,fe){E(se,e,fe),d(e,t),d(e,r),oe&&oe.m(e,null),d(e,n),d(e,i),d(i,o),d(o,l),d(o,a),d(o,c),J(c,s[7]),d(o,u),d(o,m),d(i,_),d(i,g),d(g,p),d(p,v),d(g,y),d(g,b),J(b,s[8]),d(g,k),d(g,$),d(i,C),d(i,S),d(S,T),d(T,j),d(S,A),d(S,F),J(F,s[9]),d(S,Z),d(S,H),d(i,K),d(i,W),d(i,R),d(i,I),d(I,D),d(D,V),d(D,te),B=!0,X||(we=[G(c,"keyup",s[21]),G(c,"input",s[22]),G(v,"click",es(fp)),G(b,"keyup",s[23]),G(b,"input",s[24]),G(j,"click",es(hp)),G(F,"keyup",s[25]),G(F,"input",s[26]),G(te,"click",s[13]),G(i,"submit",es(s[15]))],X=!0)},p(se,fe){se[5]?oe?oe.p(se,fe):(oe=ho(se),oe.c(),oe.m(e,n)):oe&&(oe.d(1),oe=null),fe[0]&128&&c.value!==se[7]&&J(c,se[7]),fe[0]&256&&b.value!==se[8]&&J(b,se[8]),fe[0]&512&&F.value!==se[9]&&J(F,se[9])},i(se){B||(se&&Ee(()=>{B&&(x||(x=ls(e,ds,{duration:600,y:500},!0)),x.run(1))}),B=!0)},o(se){se&&(x||(x=ls(e,ds,{duration:600,y:500},!1)),x.run(0)),B=!1},d(se){se&&P(e),oe&&oe.d(),se&&x&&x.end(),X=!1,De(we)}}}function fo(s){let e,t,r;return{c(){e=h("div"),t=h("div"),r=re(s[6]),f(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1c2zskh"),f(e,"class","d-flex justify-content-center")},m(n,i){E(n,e,i),d(e,t),d(t,r)},p(n,i){i[0]&64&&le(r,n[6])},d(n){n&&P(e)}}}function ho(s){let e,t;return{c(){e=h("div"),t=re(s[5]),f(e,"class","alert alert-danger p-1 text-center svelte-1c2zskh")},m(r,n){E(r,e,n),d(e,t)},p(r,n){n[0]&32&&le(t,r[5])},d(r){r&&P(e)}}}function dp(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,se=s[4]&&uo(s);const fe=[up,cp],Le=[];function Ce(ee,ue){return ee[0]?1:0}return W=Ce(s),R=Le[W]=fe[W](s),{c(){e=h("main"),t=h("div"),r=h("div"),n=h("h2"),n.textContent="Login",i=w(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',c=w(),u=h("input"),m=w(),_=h("label"),_.textContent="Username",g=w(),p=h("div"),v=h("span"),v.innerHTML='<i class="bi bi-eye"></i>',y=w(),b=h("input"),k=w(),$=h("label"),$.textContent="Password",C=w(),se&&se.c(),S=w(),T=h("button"),T.textContent="Login",j=w(),A=h("div"),F=h("p"),Z=re("Don't have an account? "),H=h("a"),H.textContent="Register",K=w(),R.c(),D=w(),V=h("div"),te=h("button"),te.textContent="Client",x=w(),B=h("button"),B.textContent="Staff",f(n,"class","svelte-1c2zskh"),f(a,"class","icon svelte-1c2zskh"),f(u,"type","text"),f(u,"id","usernameLogin"),u.required=!0,f(u,"autocomplete","off"),f(u,"class","svelte-1c2zskh"),f(_,"for","usernameLogin"),f(_,"class","svelte-1c2zskh"),f(l,"class","input-box svelte-1c2zskh"),f(v,"class","icon svelte-1c2zskh"),f(b,"minlength","6"),f(b,"maxlength","12"),f(b,"type","password"),f(b,"id","passwordLogin"),b.required=!0,f(b,"autocomplete","off"),f(b,"class","svelte-1c2zskh"),f($,"for","passwordLogin"),f($,"class","svelte-1c2zskh"),f(p,"class","input-box svelte-1c2zskh"),f(T,"type","submit"),f(T,"class","bton svelte-1c2zskh"),f(T,"id","loginBton"),f(H,"href","./#/"),f(H,"class","register-link svelte-1c2zskh"),f(A,"class","login-register svelte-1c2zskh"),f(o,"id","form"),f(r,"class","form-box login svelte-1c2zskh"),f(t,"class",I="wrapper "+s[1]+" active-popup "+s[10]+" svelte-1c2zskh"),f(te,"class","m-2 btn btn-primary btn-lg"),f(B,"class","m-2 btn btn-danger btn-lg"),f(V,"class","d-none"),Je(e,"background",'url("./login-bg.jpg") no-repeat'),Je(e,"background-size","cover"),Je(e,"background-position","center"),Je(e,"background-position-y","5%"),f(e,"class","svelte-1c2zskh")},m(ee,ue){E(ee,e,ue),d(e,t),d(t,r),d(r,n),d(r,i),d(r,o),d(o,l),d(l,a),d(l,c),d(l,u),J(u,s[2]),d(l,m),d(l,_),d(o,g),d(o,p),d(p,v),d(p,y),d(p,b),J(b,s[3]),d(p,k),d(p,$),d(o,C),se&&se.m(o,null),d(o,S),d(o,T),d(o,j),d(o,A),d(A,F),d(F,Z),d(F,H),d(t,K),Le[W].m(t,null),d(e,D),d(e,V),d(V,te),d(V,x),d(V,B),we||(oe=[G(u,"input",s[18]),G(b,"keyup",s[19]),G(b,"input",s[20]),G(H,"click",s[13]),G(o,"submit",es(s[14])),G(te,"click",s[28]),G(B,"click",s[29])],we=!0)},p(ee,ue){ue[0]&4&&u.value!==ee[2]&&J(u,ee[2]),ue[0]&8&&b.value!==ee[3]&&J(b,ee[3]),ee[4]?se?se.p(ee,ue):(se=uo(ee),se.c(),se.m(o,S)):se&&(se.d(1),se=null);let ye=W;W=Ce(ee),W===ye?Le[W].p(ee,ue):(Oe(),M(Le[ye],1,1,()=>{Le[ye]=null}),Te(),R=Le[W],R?R.p(ee,ue):(R=Le[W]=fe[W](ee),R.c()),O(R,1),R.m(t,null)),ue[0]&1026&&I!==(I="wrapper "+ee[1]+" active-popup "+ee[10]+" svelte-1c2zskh")&&f(t,"class",I)},i(ee){O(R),ee&&(X||Ee(()=>{X=Ue(e,Fe,{duration:500}),X.start()}))},o(ee){M(R)},d(ee){ee&&P(e),se&&se.d(),Le[W].d(),we=!1,De(oe)}}}const fp=()=>{},hp=()=>{},mp=()=>{};function _p(s,e,t){let r;document.querySelector("body").setAttribute("data-bs-theme","dark"),vl("/");function n(x){Rt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",x)}function i(x){Rt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",x)}let o=!0,l="";function a(){t(17,o=!o)}let c,u;async function m(){const{data:x,error:B}=await ae.from("user_level").select("account_type, user_id").eq("username",c).eq("password",u).maybeSingle();if(B){console.error(B);return}if(!x&&await g(c)){t(4,p="Wrong password.");return}else if(!x){t(4,p="User does not exist.");return}x.account_type=="student"?n(x.user_id):x.account_type=="staff"?i(x.user_id):console.error(x)}let _=!1;async function g(x){const{data:B,error:X}=await ae.from("user_level").select().eq("username",x);return X&&console.error(X),B.length>0}let p,v,y,b,k,$,C;async function S(){if(await g(b)){t(5,v="Username already exists.");return}else if(k!=$){t(5,v="Password does not match.");return}t(0,_=!_)}async function T(){const{data:x,error:B}=await ae.from("user_level").select().eq("username",C);if(x.length==0){t(6,y="Student ID already exists");return}}function j(){c=this.value,t(2,c)}const A=()=>t(4,p="");function F(){u=this.value,t(3,u)}const Z=()=>t(5,v="");function H(){b=this.value,t(7,b)}const K=()=>t(5,v="");function W(){k=this.value,t(8,k)}const R=()=>t(5,v="");function I(){$=this.value,t(9,$)}const D=()=>t(0,_=!_),V=()=>n("263690"),te=()=>i("153827");return s.$$.update=()=>{s.$$.dirty[0]&131072&&t(1,l=o?"":"active"),s.$$.dirty[0]&131073&&t(10,r=_&&!o?"moreinfo":"")},[_,l,c,u,p,v,y,b,k,$,r,n,i,a,m,S,T,o,j,A,F,Z,H,K,W,R,I,D,V,te]}class pp extends be{constructor(e){super(),ge(this,e,_p,dp,pe,{},null,[-1,-1])}}function gp(s){let e,t,r,n,i,o,l,a,c,u,m,_;const g=s[4].default,p=dr(g,s,s[3],null);return{c(){e=h("div"),t=h("label"),r=re(s[0]),n=w(),i=h("div"),p&&p.c(),o=w(),l=h("div"),a=h("button"),c=re(s[2]),f(t,"class","col-sm-4 col-md-3 col-form-label"),f(t,"for",s[1]),f(i,"class","col-sm-5 col-md-6 col-9"),f(a,"class","w-100 btn btn-outline-primary"),f(l,"class","col-sm-3 col-md-3 col-auto"),f(e,"class","mb-4 row justify-content-center")},m(v,y){E(v,e,y),d(e,t),d(t,r),d(e,n),d(e,i),p&&p.m(i,null),d(e,o),d(e,l),d(l,a),d(a,c),u=!0,m||(_=G(a,"click",s[5]),m=!0)},p(v,[y]){(!u||y&1)&&le(r,v[0]),(!u||y&2)&&f(t,"for",v[1]),p&&p.p&&(!u||y&8)&&hr(p,g,v,v[3],u?fr(g,v[3],y,null):mr(v[3]),null),(!u||y&4)&&le(c,v[2])},i(v){u||(O(p,v),u=!0)},o(v){M(p,v),u=!1},d(v){v&&P(e),p&&p.d(v),m=!1,_()}}}function bp(s,e,t){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){rr.call(this,s,c)}return s.$$set=c=>{"label"in c&&t(0,i=c.label),"id"in c&&t(1,o=c.id),"button"in c&&t(2,l=c.button),"$$scope"in c&&t(3,n=c.$$scope)},[i,o,l,n,r,a]}class vp extends be{constructor(e){super(),ge(this,e,bp,gp,pe,{label:0,id:1,button:2})}}function wp(s){let e,t,r,n,i,o,l,a;return{c(){e=h("div"),t=h("div"),r=h("b"),n=re(s[0]),i=re(":"),o=w(),l=h("div"),a=re(s[1]),f(t,"class","col-sm-4 col-md-4"),f(l,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(c,u){E(c,e,u),d(e,t),d(t,r),d(r,n),d(r,i),d(e,o),d(e,l),d(l,a)},p(c,[u]){u&1&&le(n,c[0]),u&2&&le(a,c[1])},i:U,o:U,d(c){c&&P(e)}}}function yp(s,e,t){let{key:r}=e,{value:n}=e;return s.$$set=i=>{"key"in i&&t(0,r=i.key),"value"in i&&t(1,n=i.value)},[r,n]}class Be extends be{constructor(e){super(),ge(this,e,yp,wp,pe,{key:0,value:1})}}function kp(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.textContent="Cannot Find Reservation",f(e,"class",t="form-control "+s[9]),f(e,"type","number"),f(e,"id","reserve"),f(e,"placeholder","e.g 300xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[4]),E(l,r,a),E(l,n,a),i||(o=[G(e,"input",s[18]),G(e,"keyup",s[19])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&f(e,"class",t),a[0]&16&&_r(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(P(e),P(r),P(n)),i=!1,De(o)}}}function $p(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.textContent="Cannot Find Student",f(e,"class",t="form-control "+s[10]),f(e,"type","text"),f(e,"id","stud-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[5]),E(l,r,a),E(l,n,a),i||(o=[G(e,"input",s[20]),G(e,"keyup",s[21])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&f(e,"class",t),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(P(e),P(r),P(n)),i=!1,De(o)}}}function Sp(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.textContent="Cannot Find Book",f(e,"class",t="form-control "+s[11]),f(e,"type","text"),f(e,"id","book-barcode"),f(e,"placeholder","e.g 1000xxx"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[6]),E(l,r,a),E(l,n,a),i||(o=[G(e,"input",s[22]),G(e,"keyup",s[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&f(e,"class",t),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(P(e),P(r),P(n)),i=!1,De(o)}}}function mo(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C;return n=new Be({props:{key:"Borrow ID",value:s[3]}}),o=new Be({props:{key:"Name",value:s[7]}}),a=new Be({props:{key:"Book Title",value:s[8]+" ("+s[6]+")"}}),u=new Be({props:{key:"Staff Name",value:"Francis James E. Salles ("+s[14]+")"}}),_=new Be({props:{key:"Borrow Date",value:z(s[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new Be({props:{key:"Return Due",value:z(s[1]).format("MMMM DD, YYYY")+" ("+s[12]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",r=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),g=w(),N(p.$$.fragment),v=w(),y=h("div"),b=h("button"),b.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',f(t,"class","py-4 text-center"),f(b,"class","btn btn-secondary"),f(y,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(S,T){E(S,e,T),d(e,t),d(e,r),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),d(e,c),L(u,e,null),d(e,m),L(_,e,null),d(e,g),L(p,e,null),d(e,v),d(e,y),d(y,b),k=!0,$||(C=G(b,"click",s[17]),$=!0)},p(S,T){const j={};T[0]&8&&(j.value=S[3]),n.$set(j);const A={};T[0]&128&&(A.value=S[7]),o.$set(A);const F={};T[0]&320&&(F.value=S[8]+" ("+S[6]+")"),a.$set(F);const Z={};T[0]&1&&(Z.value=z(S[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(Z);const H={};T[0]&4098&&(H.value=z(S[1]).format("MMMM DD, YYYY")+" ("+S[12]+" days)"),p.$set(H)},i(S){k||(O(n.$$.fragment,S),O(o.$$.fragment,S),O(a.$$.fragment,S),O(u.$$.fragment,S),O(_.$$.fragment,S),O(p.$$.fragment,S),k=!0)},o(S){M(n.$$.fragment,S),M(o.$$.fragment,S),M(a.$$.fragment,S),M(u.$$.fragment,S),M(_.$$.fragment,S),M(p.$$.fragment,S),k=!1},d(S){S&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),Y(p),$=!1,C()}}}function Op(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te,x,B,X,we,oe,se,fe,Le;t=new Ze({props:{text:"Borrow Book"}}),o=new vp({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[kp]},$$scope:{ctx:s}}}),o.$on("click",s[16]),u=new Ie({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[$p]},$$scope:{ctx:s}}}),_=new Ie({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Sp]},$$scope:{ctx:s}}});let Ce=s[2]&&mo(s);return{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),a=h("hr"),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Borrow Date:",y=w(),b=h("div"),k=h("input"),C=w(),S=h("div"),T=h("button"),T.textContent="Today",j=w(),A=h("div"),F=h("label"),F.textContent="Return Due:",Z=w(),H=h("div"),K=h("input"),R=w(),I=h("div"),D=h("button"),D.textContent=`~${an} Days`,V=w(),te=h("div"),x=h("button"),x.innerHTML='<i class="bi bi-receipt"></i> Borrow',B=w(),X=h("a"),X.innerHTML='<i class="bi bi-x-circle"></i> Cancel',we=w(),Ce&&Ce.c(),f(a,"class","mb-4"),f(v,"class","col-sm-4 col-md-3 col-form-label"),f(v,"for","borrow-date"),f(k,"class","form-control"),f(k,"type","datetime-local"),f(k,"id","borrow-date"),f(k,"max",$=z(s[1]).format("YYYY-MM-DD HH:mm")),f(b,"class","col-sm-5 col-md-6 col-7"),f(T,"class","w-100 btn btn-outline-primary"),f(S,"class","col-sm-3 col-md-3 col-auto"),f(p,"class","mb-4 row justify-content-center"),f(F,"class","col-sm-4 col-md-3 col-form-label"),f(F,"for","return-date"),f(K,"class","form-control"),f(K,"type","date"),f(K,"id","return-date"),f(K,"min",W=z(s[0]).format("YYYY-MM-DD")),f(H,"class","col-sm-5 col-md-6 col-7"),f(D,"class","w-100 btn btn-outline-primary"),f(I,"class","col-sm-3 col-md-3 col-auto"),f(A,"class","mb-4 row justify-content-center"),f(x,"class","btn btn-success"),f(X,"href","./#/"),f(X,"class","btn btn-danger"),f(te,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(ee,ue){E(ee,e,ue),L(t,e,null),d(e,r),d(e,n),d(n,i),L(o,i,null),d(i,l),d(i,a),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,y),d(p,b),d(b,k),J(k,s[0]),d(p,C),d(p,S),d(S,T),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),d(H,K),J(K,s[1]),d(A,R),d(A,I),d(I,D),d(i,V),d(i,te),d(te,x),d(te,B),d(te,X),d(n,we),Ce&&Ce.m(n,null),se=!0,fe||(Le=[G(k,"input",s[24]),G(T,"click",s[25]),G(K,"input",s[26]),G(D,"click",s[27]),G(x,"click",s[28])],fe=!0)},p(ee,ue){const ye={};ue[0]&528|ue[1]&2&&(ye.$$scope={dirty:ue,ctx:ee}),o.$set(ye);const ce={};ue[0]&1056|ue[1]&2&&(ce.$$scope={dirty:ue,ctx:ee}),u.$set(ce);const ie={};ue[0]&2112|ue[1]&2&&(ie.$$scope={dirty:ue,ctx:ee}),_.$set(ie),(!se||ue[0]&2&&$!==($=z(ee[1]).format("YYYY-MM-DD HH:mm")))&&f(k,"max",$),ue[0]&1&&J(k,ee[0]),(!se||ue[0]&1&&W!==(W=z(ee[0]).format("YYYY-MM-DD")))&&f(K,"min",W),ue[0]&2&&J(K,ee[1]),ee[2]?Ce?(Ce.p(ee,ue),ue[0]&4&&O(Ce,1)):(Ce=mo(ee),Ce.c(),O(Ce,1),Ce.m(n,null)):Ce&&(Oe(),M(Ce,1,1,()=>{Ce=null}),Te())},i(ee){se||(O(t.$$.fragment,ee),O(o.$$.fragment,ee),O(u.$$.fragment,ee),O(_.$$.fragment,ee),O(Ce),ee&&(oe||Ee(()=>{oe=Ue(e,Fe,{duration:500}),oe.start()})),se=!0)},o(ee){M(t.$$.fragment,ee),M(o.$$.fragment,ee),M(u.$$.fragment,ee),M(_.$$.fragment,ee),M(Ce),se=!1},d(ee){ee&&P(e),Y(t),Y(o),Y(u),Y(_),Ce&&Ce.d(),fe=!1,De(Le)}}}const an=14;function _o(){return"400"+Math.floor(Math.random()*9e3)}function Tp(s,e,t){let r,n;cn(s,No,x=>t(29,n=x));const i=z().format("YYYY-MM-DD HH:mm");let o=i,l=z(i).add(an,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,m,_,g;const p=new URLSearchParams(n);m=p.get("reserve_id")||"",g=p.get("barcode")||"";let v,y,b,k,$;async function C(){const{data:x,error:B}=await ae.from("account_details").select("fname, lname").eq("user_id",_).single();B?(t(10,k="is-invalid"),console.error(B)):t(7,v=`${x.fname} ${x.lname}`);const{data:X,error:we}=await ae.from("library_holdings").select("books(title)").eq("barcode",g).single();we||!X?(t(11,$="is-invalid"),console.error(we)):t(8,y=X.books.title),(!we||!B)&&(t(3,u=await j()),t(2,c=!c))}async function S(){const{data:x,error:B}=await ae.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();B||!x?(t(9,b="is-invalid"),console.error(B)):(t(5,_=x.stud_id),t(6,g=x.library_holdings.barcode),C())}async function T(){const{data:x,error:B}=await ae.from("library_holdings").select("holding_id").eq("barcode",g).single();B&&console.error(B);const X=z(o).format("YYYY-MM-DDTHH:MMZ"),we=z(l).format("YYYY-MM-DDTHH:MMZ"),{error:oe}=await ae.from("book_borrow").insert({borrow_id:u,stud_id:_,holding_id:x.holding_id,staff_id:a,borrow_date:X,due_date:we});if(oe){console.error(oe);return}const{data:se,error:fe}=await ae.from("book_reservation").update({staff_id:a,release_date:X,active:!1}).eq("active",!0).eq("holding_id",x.holding_id).select();if(console.log("updated Rows:",se),fe){console.error(fe);return}const{error:Le}=await ae.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",x.holding_id);Le&&console.error(Le)}async function j(){let x=_o();const{data:B,error:X}=await ae.from("book_borrow").select().eq("borrow_id",x);return console.log(B),B.length!=0&&(x=_o(),console.log("exists")),console.log(x),x}function A(){m=_r(this.value),t(4,m)}const F=()=>t(9,b="");function Z(){_=this.value,t(5,_)}const H=()=>t(10,k="");function K(){g=this.value,t(6,g)}const W=()=>t(11,$="");function R(){o=this.value,t(0,o)}const I=()=>t(0,o=i);function D(){l=this.value,t(1,l)}const V=()=>t(1,l=z(o).add(an,"days").format("YYYY-MM-DD")),te=()=>{C()};return s.$$.update=()=>{s.$$.dirty[0]&3&&t(12,r=z(l).diff(z(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,m,_,g,v,y,b,k,$,r,i,a,C,S,T,A,F,Z,H,K,W,R,I,D,V,te]}class Dp extends be{constructor(e){super(),ge(this,e,Tp,Op,pe,{},null,[-1,-1])}}function Mp(s){let e,t,r,n,i,o;return{c(){e=h("input"),r=w(),n=h("div"),n.textContent="Borrow ID not found.",f(e,"class",t="form-control "+s[4]),f(e,"type","text"),f(e,"id","book-id"),f(n,"class","invalid-feedback")},m(l,a){E(l,e,a),J(e,s[3]),E(l,r,a),E(l,n,a),i||(o=[G(e,"keyup",s[19]),G(e,"input",s[20])],i=!0)},p(l,a){a&16&&t!==(t="form-control "+l[4])&&f(e,"class",t),a&8&&e.value!==l[3]&&J(e,l[3])},d(l){l&&(P(e),P(r),P(n)),i=!1,De(o)}}}function Cp(s){let e,t,r,n,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",r=h("option"),r.textContent="Good",n=h("option"),n.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",J(t,t.__value),r.__value="Good",J(r,r.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),f(e,"class","form-select"),f(e,"id","book-condition"),s[12]===void 0&&Ee(()=>s[21].call(e))},m(a,c){E(a,e,c),d(e,t),d(e,r),d(e,n),d(e,i),Xn(e,s[12],!0),o||(l=G(e,"change",s[21]),o=!0)},p(a,c){c&4096&&Xn(e,a[12])},d(a){a&&P(e),o=!1,l()}}}function Pp(s){let e,t,r;return{c(){e=h("textarea"),f(e,"class","form-control"),f(e,"rows","3"),f(e,"id","book-note")},m(n,i){E(n,e,i),J(e,s[11]),t||(r=G(e,"input",s[22]),t=!0)},p(n,i){i&2048&&J(e,n[11])},d(n){n&&P(e),t=!1,r()}}}function po(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K;n=new Be({props:{key:"Borrow ID",value:s[3]}}),o=new Be({props:{key:"Return ID",value:s[6]}}),a=new Be({props:{key:"Name",value:s[10]+" ("+s[9]+")"}}),u=new Be({props:{key:"Book Title",value:s[7]+" ("+s[8]+")"}}),_=new Be({props:{key:"Condition",value:s[12]}});let W=s[11]&&go(s);v=new Be({props:{key:"Received by",value:"Francis James E. Salles ("+s[16]+")"}}),b=new Be({props:{key:"Return Due",value:z(s[1]).format("MMMM DD, YYYY")}}),$=new Be({props:{key:"Return Date",value:z(s[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(s[2]>0?`+${s[2]}`:s[2])+" days)"}});let R=s[2]<0&&bo(s),I=s[2]<0&&vo();return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",r=w(),N(n.$$.fragment),i=w(),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),g=w(),W&&W.c(),p=w(),N(v.$$.fragment),y=w(),N(b.$$.fragment),k=w(),N($.$$.fragment),C=w(),R&&R.c(),S=w(),T=h("div"),j=h("button"),j.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',A=w(),I&&I.c(),f(t,"class","py-4 text-center"),f(j,"class","btn btn-success"),f(T,"class","float-end my-2"),f(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(D,V){E(D,e,V),d(e,t),d(e,r),L(n,e,null),d(e,i),L(o,e,null),d(e,l),L(a,e,null),d(e,c),L(u,e,null),d(e,m),L(_,e,null),d(e,g),W&&W.m(e,null),d(e,p),L(v,e,null),d(e,y),L(b,e,null),d(e,k),L($,e,null),d(e,C),R&&R.m(e,null),d(e,S),d(e,T),d(T,j),d(T,A),I&&I.m(T,null),Z=!0,H||(K=G(j,"click",s[18]),H=!0)},p(D,V){const te={};V&8&&(te.value=D[3]),n.$set(te);const x={};V&64&&(x.value=D[6]),o.$set(x);const B={};V&1536&&(B.value=D[10]+" ("+D[9]+")"),a.$set(B);const X={};V&384&&(X.value=D[7]+" ("+D[8]+")"),u.$set(X);const we={};V&4096&&(we.value=D[12]),_.$set(we),D[11]?W?(W.p(D,V),V&2048&&O(W,1)):(W=go(D),W.c(),O(W,1),W.m(e,p)):W&&(Oe(),M(W,1,1,()=>{W=null}),Te());const oe={};V&2&&(oe.value=z(D[1]).format("MMMM DD, YYYY")),b.$set(oe);const se={};V&5&&(se.value=z(D[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(D[2]>0?`+${D[2]}`:D[2])+" days)"),$.$set(se),D[2]<0?R?R.p(D,V):(R=bo(D),R.c(),R.m(e,S)):R&&(R.d(1),R=null),D[2]<0?I||(I=vo(),I.c(),I.m(T,null)):I&&(I.d(1),I=null)},i(D){Z||(O(n.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),O(W),O(v.$$.fragment,D),O(b.$$.fragment,D),O($.$$.fragment,D),D&&Ee(()=>{Z&&(F||(F=ls(e,ds,{duration:400,y:-60},!0)),F.run(1))}),Z=!0)},o(D){M(n.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),M(W),M(v.$$.fragment,D),M(b.$$.fragment,D),M($.$$.fragment,D),D&&(F||(F=ls(e,ds,{duration:400,y:-60},!1)),F.run(0)),Z=!1},d(D){D&&P(e),Y(n),Y(o),Y(a),Y(u),Y(_),W&&W.d(),Y(v),Y(b),Y($),R&&R.d(),I&&I.d(),D&&F&&F.end(),H=!1,K()}}}function go(s){let e,t;return e=new Be({props:{key:"Return Note",value:s[11]}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},p(r,n){const i={};n&2048&&(i.value=r[11]),e.$set(i)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function bo(s){let e,t,r,n,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",r=w(),n=h("div"),i=re(s[14]),o=re(" pesos"),f(t,"class","col-sm-4 col-md-4"),f(n,"class","col-sm-8 col-md-8"),f(e,"class","mb-2 row")},m(l,a){E(l,e,a),d(e,t),d(e,r),d(e,n),d(n,i),d(n,o)},p(l,a){a&16384&&le(i,l[14])},d(l){l&&P(e)}}}function vo(s){let e,t,r;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay',f(e,"class","btn btn-danger"),f(e,"data-bs-toggle","modal"),f(e,"data-bs-target","#payModal")},m(n,i){E(n,e,i),t||(r=G(e,"click",Ip),t=!0)},d(n){n&&P(e),t=!1,r()}}}function Ep(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","text"),f(e,"id","ref")},m(n,i){E(n,e,i),J(e,s[13]),t||(r=G(e,"input",s[25]),t=!0)},p(n,i){i&8192&&e.value!==n[13]&&J(e,n[13])},d(n){n&&P(e),t=!1,r()}}}function Rp(s){let e,t,r,n;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",r=h("option"),r.textContent="GCash",n=h("option"),n.textContent="Bank Transfer",t.__value="cash",J(t,t.__value),r.__value="GCash",J(r,r.__value),n.__value="bank",J(n,n.__value),f(e,"name","payment_method"),f(e,"class","form-select"),f(e,"id","payment_method")},m(i,o){E(i,e,o),d(e,t),d(e,r),d(e,n)},p:U,d(i){i&&P(e)}}}function jp(s){let e,t,r,n,i,o,l,a,c,u,m,_,g;return u=new Ie({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Ep]},$$scope:{ctx:s}}}),_=new Ie({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[Rp]},$$scope:{ctx:s}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",r=w(),n=h("h1"),i=re(""),o=re(s[14]),l=w(),a=h("hr"),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),f(n,"class","text-center"),f(a,"class","my-4"),f(e,"class","container row")},m(p,v){E(p,e,v),d(e,t),d(e,r),d(e,n),d(n,i),d(n,o),d(e,l),d(e,a),d(e,c),L(u,e,null),d(e,m),L(_,e,null),g=!0},p(p,v){(!g||v&16384)&&le(o,p[14]);const y={};v&536879104&&(y.$$scope={dirty:v,ctx:p}),u.$set(y);const b={};v&536870912&&(b.$$scope={dirty:v,ctx:p}),_.$set(b)},i(p){g||(O(u.$$.fragment,p),O(_.$$.fragment,p),g=!0)},o(p){M(u.$$.fragment,p),M(_.$$.fragment,p),g=!1},d(p){p&&P(e),Y(u),Y(_)}}}function Ap(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I,D,V,te;t=new Ze({props:{text:"Return Book"}}),o=new Ie({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Mp]},$$scope:{ctx:s}}}),a=new Ie({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Cp]},$$scope:{ctx:s}}}),u=new Ie({props:{label:"Note:",id:"book-note",$$slots:{default:[Pp]},$$scope:{ctx:s}}});let x=s[5]&&po(s);return R=new Zm({props:{title:"Process Payment",id:"payModal",pButton:"Done",$$slots:{default:[jp]},$$scope:{ctx:s}}}),R.$on("click",Lp),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),_=h("div"),g=h("label"),g.textContent="Return Time:",p=w(),v=h("div"),y=h("input"),b=w(),k=h("div"),$=h("button"),$.textContent="Now",C=w(),S=h("div"),T=h("button"),j=h("i"),A=re(" Preview"),Z=w(),H=h("a"),H.innerHTML='<i class="bi bi-x-circle"></i> Cancel',K=w(),x&&x.c(),W=w(),N(R.$$.fragment),f(g,"class","col-sm-4 col-md-3 col-form-label"),f(g,"for","return-time"),f(y,"class","form-control"),f(y,"type","datetime-local"),f(y,"id","return-time"),f(v,"class","col-sm-5 col-md-6 col-7"),f($,"class","w-100 btn btn-outline-primary"),f(k,"class","col-sm-3 col-md-3 col-auto"),f(_,"class","mb-4 row justify-content-center"),f(j,"class","bi bi-receipt"),f(T,"class",F="btn btn-"+(s[5]?"secondary":"success")),f(H,"href","./#/"),f(H,"class","btn btn-danger"),f(S,"class","float-end"),f(i,"class","col-sm-12 col-lg-6 mb-sm-4"),f(n,"class","row justify-content-around"),f(e,"class","container")},m(B,X){E(B,e,X),L(t,e,null),d(e,r),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),d(i,_),d(_,g),d(_,p),d(_,v),d(v,y),J(y,s[0]),d(_,b),d(_,k),d(k,$),d(i,C),d(i,S),d(S,T),d(T,j),d(T,A),d(S,Z),d(S,H),d(n,K),x&&x.m(n,null),d(e,W),L(R,e,null),D=!0,V||(te=[G(y,"input",s[23]),G($,"click",s[24]),G(T,"click",s[17])],V=!0)},p(B,[X]){const we={};X&536870936&&(we.$$scope={dirty:X,ctx:B}),o.$set(we);const oe={};X&536875008&&(oe.$$scope={dirty:X,ctx:B}),a.$set(oe);const se={};X&536872960&&(se.$$scope={dirty:X,ctx:B}),u.$set(se),X&1&&J(y,B[0]),(!D||X&32&&F!==(F="btn btn-"+(B[5]?"secondary":"success")))&&f(T,"class",F),B[5]?x?(x.p(B,X),X&32&&O(x,1)):(x=po(B),x.c(),O(x,1),x.m(n,null)):x&&(Oe(),M(x,1,1,()=>{x=null}),Te());const fe={};X&536895488&&(fe.$$scope={dirty:X,ctx:B}),R.$set(fe)},i(B){D||(O(t.$$.fragment,B),O(o.$$.fragment,B),O(a.$$.fragment,B),O(u.$$.fragment,B),O(x),O(R.$$.fragment,B),B&&(I||Ee(()=>{I=Ue(e,Fe,{duration:500}),I.start()})),D=!0)},o(B){M(t.$$.fragment,B),M(o.$$.fragment,B),M(a.$$.fragment,B),M(u.$$.fragment,B),M(x),M(R.$$.fragment,B),D=!1},d(B){B&&P(e),Y(t),Y(o),Y(a),Y(u),x&&x.d(),Y(R),V=!1,De(te)}}}function wo(){return"500"+Math.floor(Math.random()*9e3)}const Ip=()=>{},Lp=()=>{};function Yp(s,e,t){let r,n,i;cn(s,No,D=>t(26,i=D));let o=z().format("YYYY-MM-DD HH:mm"),l=o,a="";const c=localStorage.getItem("user_id");let u,m="";u=new URLSearchParams(i).get("borrow_id")||"";let g=!1,p,v,y,b,k,$,C;async function S(){const{data:D,error:V}=await ae.from("book_borrow").select().eq("borrow_id",u).eq("active",!0).maybeSingle();if(!D){t(4,m="is-invalid");return}const{data:te,error:x}=await ae.rpc("getborrowinfo",{borrowid:u});console.error(x),console.table(te);let B=te[0];t(10,k=`${B.fname} ${B.lname}`),t(9,b=B.stud_id),t(7,v=B.title),t(8,y=B.barcode),t(1,a=B.due_date),t(6,p=await j()),t(5,g=!0)}async function T(){const{data:D,error:V}=await ae.from("book_return").insert({return_id:await j(),borrow_id:u,staff_id:c,note:$,return_date:z(l).format("YYYY-MM-DDTHH:MMZ"),condition:C}).select();if(V){console.error(V);return}console.table(D);const{data:te,error:x}=await ae.from("library_holdings").update({status:"Available",condition:C}).eq("barcode",y).select(),{data:B,error:X}=await ae.from("book_borrow").update({active:!1}).eq("borrow_id",u).select();if(x||X){console.error(x),console.error(X);return}console.log(te,B)}async function j(){let D=wo();const{data:V,error:te}=await ae.from("book_return").select().eq("return_id",D);return console.log(V),V.length!=0&&(D=wo(),console.log("exists")),console.log(D),D}let A;const F=()=>t(4,m="");function Z(){u=this.value,t(3,u)}function H(){C=sl(this),t(12,C)}function K(){$=this.value,t(11,$)}function W(){l=this.value,t(0,l)}const R=()=>t(0,l=o);function I(){A=this.value,t(13,A)}return s.$$.update=()=>{s.$$.dirty&3&&t(2,r=z(l).diff(z(a),"days")*-1),s.$$.dirty&4&&t(14,n=r*-50)},[l,a,r,u,m,g,p,v,y,b,k,$,C,A,n,o,c,S,T,F,Z,H,K,W,R,I]}class Np extends be{constructor(e){super(),ge(this,e,Yp,Ap,pe,{})}}function Up(s){let e,t,r,n;return{c(){e=h("input"),f(e,"class",t="form-control "+s[7]),f(e,"type","text"),f(e,"id","author-name")},m(i,o){E(i,e,o),J(e,s[4]),r||(n=[G(e,"input",s[11]),G(e,"keyup",s[12])],r=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&f(e,"class",t),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),r=!1,De(n)}}}function Fp(s){let e,t,r,n;return{c(){e=h("textarea"),f(e,"class",t="form-control "+s[8]),f(e,"id","author-bio"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,s[5]),r||(n=[G(e,"input",s[13]),G(e,"keyup",s[14])],r=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&f(e,"class",t),o&32&&J(e,i[5])},d(i){i&&P(e),r=!1,De(n)}}}function xp(s){let e,t,r,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","author-link"),f(e,"class",t="form-control "+s[9])},m(i,o){E(i,e,o),J(e,s[6]),r||(n=[G(e,"input",s[15]),G(e,"keyup",s[16])],r=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&f(e,"class",t),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),r=!1,De(n)}}}function Hp(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","author-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),s[18](e),t||(r=G(e,"change",s[17]),t=!0)},p:U,d(n){n&&P(e),s[18](null),t=!1,r()}}}function zp(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I;return t=new Ze({props:{text:"Add Author"}}),o=new Ie({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Up]},$$scope:{ctx:s}}}),a=new Ie({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Fp]},$$scope:{ctx:s}}}),u=new Ie({props:{label:"Author Link:",id:"author-link",$$slots:{default:[xp]},$$scope:{ctx:s}}}),_=new Ie({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Hp]},$$scope:{ctx:s}}}),{c(){e=h("section"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Preview:",y=w(),b=h("div"),k=h("img"),C=w(),S=h("button"),S.textContent="Remove",j=w(),A=h("div"),F=h("button"),F.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',Z=w(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(k.src,$=s[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+s[2]),f(F,"class","btn btn-success"),f(H,"href","./#/"),f(A,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,V){E(D,e,V),L(t,e,null),d(e,r),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,y),d(p,b),d(b,k),d(b,C),d(b,S),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),W=!0,R||(I=[G(S,"click",s[19]),G(F,"click",s[10])],R=!0)},p(D,[V]){const te={};V&1048720&&(te.$$scope={dirty:V,ctx:D}),o.$set(te);const x={};V&1048864&&(x.$$scope={dirty:V,ctx:D}),a.$set(x);const B={};V&1049152&&(B.$$scope={dirty:V,ctx:D}),u.$set(B);const X={};V&1048579&&(X.$$scope={dirty:V,ctx:D}),_.$set(X),(!W||V&8&&!et(k.src,$=D[3]))&&f(k,"src",$),(!W||V&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){W||(O(t.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),W=!0)},o(D){M(t.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),W=!1},d(D){D&&P(e),Y(t),Y(o),Y(a),Y(u),Y(_),R=!1,De(I)}}}function Wp(s,e,t){let r,n,i="d-none",o,l,a,c,u,m,_;async function g(){t(7,u=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,t(4,l)}const v=()=>t(7,u="");function y(){a=this.value,t(5,a)}const b=()=>t(8,m="");function k(){c=this.value,t(6,c)}const $=()=>t(9,_="");function C(){r=this.files,t(0,r)}function S(j){as[j?"unshift":"push"](()=>{n=j,t(1,n)})}const T=()=>{t(1,n.value="",n),t(0,r="")};return s.$$.update=()=>{if(s.$$.dirty&1)if(r&&r[0]){console.log(r),t(2,i="");const j=URL.createObjectURL(r[0]);t(3,o=j)}else t(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T]}class Bp extends be{constructor(e){super(),ge(this,e,Wp,zp,pe,{})}}function qp(s){let e,t,r,n;return{c(){e=h("input"),f(e,"class",t="form-control "+s[7]),f(e,"type","text"),f(e,"id","publisher-name")},m(i,o){E(i,e,o),J(e,s[4]),r||(n=[G(e,"input",s[11]),G(e,"keyup",s[12])],r=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&f(e,"class",t),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&P(e),r=!1,De(n)}}}function Vp(s){let e,t,r,n;return{c(){e=h("textarea"),f(e,"class",t="form-control "+s[8]),f(e,"id","publisher-description"),f(e,"rows","4")},m(i,o){E(i,e,o),J(e,s[5]),r||(n=[G(e,"input",s[13]),G(e,"keyup",s[14])],r=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&f(e,"class",t),o&32&&J(e,i[5])},d(i){i&&P(e),r=!1,De(n)}}}function Gp(s){let e,t,r,n;return{c(){e=h("input"),f(e,"type","text"),f(e,"id","publisher-link"),f(e,"class",t="form-control "+s[9])},m(i,o){E(i,e,o),J(e,s[6]),r||(n=[G(e,"input",s[15]),G(e,"keyup",s[16])],r=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&f(e,"class",t),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&P(e),r=!1,De(n)}}}function Jp(s){let e,t,r;return{c(){e=h("input"),f(e,"class","form-control"),f(e,"type","file"),f(e,"id","publisher-pic"),f(e,"accept","image/*")},m(n,i){E(n,e,i),s[18](e),t||(r=G(e,"change",s[17]),t=!0)},p:U,d(n){n&&P(e),s[18](null),t=!1,r()}}}function Kp(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W,R,I;return t=new Ze({props:{text:"Add Publisher"}}),o=new Ie({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[qp]},$$scope:{ctx:s}}}),a=new Ie({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[Vp]},$$scope:{ctx:s}}}),u=new Ie({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Gp]},$$scope:{ctx:s}}}),_=new Ie({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[Jp]},$$scope:{ctx:s}}}),{c(){e=h("section"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),N(o.$$.fragment),l=w(),N(a.$$.fragment),c=w(),N(u.$$.fragment),m=w(),N(_.$$.fragment),g=w(),p=h("div"),v=h("label"),v.textContent="Preview:",y=w(),b=h("div"),k=h("img"),C=w(),S=h("button"),S.textContent="Remove",j=w(),A=h("div"),F=h("button"),F.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',Z=w(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',f(v,"for","cover-preview"),f(v,"class","col-sm-4 col-md-3 col-form-label align-self-center"),et(k.src,$=s[3])||f(k,"src",$),f(k,"alt","Preview"),f(k,"id","cover-preview"),f(k,"height","150"),f(S,"class","btn btn-sm btn-danger"),f(b,"class","col-sm-8 col-md-9"),f(b,"id","preview-div"),f(p,"class",T="my-3 row "+s[2]),f(F,"class","btn btn-success"),f(H,"href","./#/"),f(A,"class","float-end"),f(i,"class","col-sm-12 col-lg-6"),f(n,"class","justify-content-around row"),f(e,"class","container")},m(D,V){E(D,e,V),L(t,e,null),d(e,r),d(e,n),d(n,i),L(o,i,null),d(i,l),L(a,i,null),d(i,c),L(u,i,null),d(i,m),L(_,i,null),d(i,g),d(i,p),d(p,v),d(p,y),d(p,b),d(b,k),d(b,C),d(b,S),d(i,j),d(i,A),d(A,F),d(A,Z),d(A,H),W=!0,R||(I=[G(S,"click",s[19]),G(F,"click",s[10])],R=!0)},p(D,[V]){const te={};V&1048720&&(te.$$scope={dirty:V,ctx:D}),o.$set(te);const x={};V&1048864&&(x.$$scope={dirty:V,ctx:D}),a.$set(x);const B={};V&1049152&&(B.$$scope={dirty:V,ctx:D}),u.$set(B);const X={};V&1048579&&(X.$$scope={dirty:V,ctx:D}),_.$set(X),(!W||V&8&&!et(k.src,$=D[3]))&&f(k,"src",$),(!W||V&4&&T!==(T="my-3 row "+D[2]))&&f(p,"class",T)},i(D){W||(O(t.$$.fragment,D),O(o.$$.fragment,D),O(a.$$.fragment,D),O(u.$$.fragment,D),O(_.$$.fragment,D),D&&(K||Ee(()=>{K=Ue(e,Fe,{duration:500}),K.start()})),W=!0)},o(D){M(t.$$.fragment,D),M(o.$$.fragment,D),M(a.$$.fragment,D),M(u.$$.fragment,D),M(_.$$.fragment,D),W=!1},d(D){D&&P(e),Y(t),Y(o),Y(a),Y(u),Y(_),R=!1,De(I)}}}function Zp(s,e,t){let r,n,i="d-none",o,l,a,c,u,m,_;async function g(){t(7,u=l?"":"is-invalid"),t(8,m=a?"":"is-invalid"),t(9,_=c?"":"is-invalid"),console.log(u,m,_)}function p(){l=this.value,t(4,l)}const v=()=>t(7,u="");function y(){a=this.value,t(5,a)}const b=()=>t(8,m="");function k(){c=this.value,t(6,c)}const $=()=>t(9,_="");function C(){r=this.files,t(0,r)}function S(j){as[j?"unshift":"push"](()=>{n=j,t(1,n)})}const T=()=>{t(1,n.value="",n),t(0,r="")};return s.$$.update=()=>{if(s.$$.dirty&1)if(r&&r[0]){console.log(r),t(2,i="");const j=URL.createObjectURL(r[0]);t(3,o=j)}else t(2,i="d-none")},[r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T]}class Qp extends be{constructor(e){super(),ge(this,e,Zp,Kp,pe,{})}}function yo(s,e,t){const r=s.slice();return r[2]=e[t][0],r[3]=e[t][1],r}function Xp(s){return{c:U,m:U,p:U,d:U}}function eg(s){let e,t=Se(Object.entries(s[1])),r=[];for(let n=0;n<t.length;n+=1)r[n]=ko(yo(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ze()},m(n,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,i);E(n,e,i)},p(n,i){if(i&1){t=Se(Object.entries(n[1]));let o;for(o=0;o<t.length;o+=1){const l=yo(n,t,o);r[o]?r[o].p(l,i):(r[o]=ko(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&P(e),qe(r,n)}}}function ko(s){let e,t,r,n,i,o,l,a,c,u,m,_,g;return{c(){e=h("tr"),t=h("td"),t.textContent=`${s[3].isbn}`,r=w(),n=h("td"),n.textContent=`${s[3].title}`,i=w(),o=h("td"),o.textContent=`${s[3].available}`,l=w(),a=h("td"),a.textContent=`${s[3].reserved}`,c=w(),u=h("td"),u.textContent=`${s[3].borrowed}`,m=w(),_=h("td"),_.textContent=`${s[3].total}`,g=w(),f(t,"class","d-none d-sm-table-cell"),f(_,"class","fw-bold")},m(p,v){E(p,e,v),d(e,t),d(e,r),d(e,n),d(e,i),d(e,o),d(e,l),d(e,a),d(e,c),d(e,u),d(e,m),d(e,_),d(e,g)},p:U,d(p){p&&P(e)}}}function tg(s){return{c:U,m:U,p:U,d:U}}function sg(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b,k,$,C,S,T,j,A,F,Z,H,K,W;t=new Ze({props:{text:"Books Report"}});let R={ctx:s,current:null,token:null,hasCatch:!1,pending:tg,then:eg,catch:Xp,value:1};return Vs(s[0](),R),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),i.textContent="Filters:",o=w(),l=h("div"),a=h("select"),c=h("option"),c.textContent="Total",u=h("option"),u.textContent="Available",m=h("option"),m.textContent="Reserved",_=h("option"),_.textContent="Borrowed",g=w(),p=h("div"),v=h("select"),y=h("option"),y.textContent="Ascending",b=h("option"),b.textContent="Descending",k=w(),$=h("form"),$.innerHTML='<input type="text" placeholder="Search title..." name="search" class="form-control"/> <button type="submit" class="btn btn-outline-success"><i class="bi bi-search"></i></button>',C=w(),S=h("div"),T=h("table"),j=h("thead"),j.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-none d-sm-table-cell">ISBN</th> <th class="py-3 col-5">Book Title</th> <th class="py-3 col-1 text-bg-success">Available</th> <th class="py-3 col-1 text-bg-secondary">Reserved</th> <th class="py-3 col-1 text-bg-danger">Borrowed</th> <th class="py-3 col-1 text-bg-primary">Total</th></tr>',A=w(),F=h("tbody"),R.block.c(),c.__value="",J(c,c.__value),u.__value="",J(u,u.__value),m.__value="",J(m,m.__value),_.__value="",J(_,_.__value),f(a,"name","filter"),f(a,"class","form-select"),y.__value="",J(y,y.__value),b.__value="",J(b,b.__value),f(v,"name","order"),f(v,"class","form-select"),f($,"class","d-flex ms-3"),f(n,"class","d-flex justify-content-end align-items-center gap-2 mb-3"),f(T,"class","table table-bordered table-striped table-hover text-center align-middle"),f(S,"class","table-responsive"),f(e,"class","container")},m(I,D){E(I,e,D),L(t,e,null),d(e,r),d(e,n),d(n,i),d(n,o),d(n,l),d(l,a),d(a,c),d(a,u),d(a,m),d(a,_),d(n,g),d(n,p),d(p,v),d(v,y),d(v,b),d(n,k),d(n,$),d(e,C),d(e,S),d(S,T),d(T,j),d(T,A),d(T,F),R.block.m(F,R.anchor=null),R.mount=()=>F,R.anchor=null,H=!0,K||(W=G($,"submit",es(rg)),K=!0)},p(I,[D]){s=I,Gs(R,s,D)},i(I){H||(O(t.$$.fragment,I),I&&(Z||Ee(()=>{Z=Ue(e,Fe,{duration:500}),Z.start()})),H=!0)},o(I){M(t.$$.fragment,I),H=!1},d(I){I&&P(e),Y(t),R.block.d(),R.token=null,R=null,K=!1,W()}}}const rg=()=>{};function ng(s){async function e(){const{data:t,error:r}=await ae.rpc("getbooksreport");if(r){console.error(r);return}return console.table(t),t}return[e]}class ig extends be{constructor(e){super(),ge(this,e,ng,sg,pe,{})}}function og(s){let e,t,r,n,i,o,l,a,c,u,m,_,g,p,v,y,b;return t=new Ze({props:{text:"Payments Report"}}),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("div"),i=h("div"),o=h("div"),o.textContent="Overall Total Payment",l=w(),a=h("h1"),a.textContent=`${ag}`,c=w(),u=h("div"),m=h("div"),m.textContent="Total Late Returns",_=w(),g=h("h1"),g.textContent=`${lg}`,p=w(),v=h("table"),v.innerHTML='<thead><tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr></thead> <tbody><tr><td>091238120</td> <td>Francis James E. Salles</td> <td>200</td> <td>4</td></tr></tbody>',f(n,"class","d-flex justify-content-center gap-5 my-3"),f(v,"class","table table-bordered table-striped text-center"),f(e,"class","container")},m(k,$){E(k,e,$),L(t,e,null),d(e,r),d(e,n),d(n,i),d(i,o),d(i,l),d(i,a),d(n,c),d(n,u),d(u,m),d(u,_),d(u,g),d(e,p),d(e,v),b=!0},p:U,i(k){b||(O(t.$$.fragment,k),k&&(y||Ee(()=>{y=Ue(e,Fe,{duration:500}),y.start()})),b=!0)},o(k){M(t.$$.fragment,k),b=!1},d(k){k&&P(e),Y(t)}}}let ag=200,lg=27;class cg extends be{constructor(e){super(),ge(this,e,null,og,pe,{})}}function ug(s){let e,t,r,n,i,o;return t=new Ze({props:{text:"Student Inventory Report"}}),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("table"),n.innerHTML="<thead><tr><th>Student ID</th> <th>Student Name</th> <th>Reserved</th> <th>Borrowed</th></tr></thead> <tbody><tr><td>263690</td> <td>Francis James Salles</td> <td>2</td> <td>4</td></tr></tbody>",f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(l,a){E(l,e,a),L(t,e,null),d(e,r),d(e,n),o=!0},p:U,i(l){o||(O(t.$$.fragment,l),l&&(i||Ee(()=>{i=Ue(e,Fe,{duration:500}),i.start()})),o=!0)},o(l){M(t.$$.fragment,l),o=!1},d(l){l&&P(e),Y(t)}}}class dg extends be{constructor(e){super(),ge(this,e,null,ug,pe,{})}}function fg(s){let e,t,r,n,i,o;return t=new Ze({props:{text:"Transaction Report"}}),{c(){e=h("main"),N(t.$$.fragment),r=w(),n=h("table"),n.innerHTML="<thead><tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr></thead> <tbody><tr><td>06/09/2024/ 10:18am</td> <td>Francis James Salles</td> <td>Some Student Name</td> <td>Borrowed</td> <td>Name borrowed &quot;Book title&quot;</td></tr></tbody>",f(n,"class","table table=striped table-bordered text-center"),f(e,"class","container")},m(l,a){E(l,e,a),L(t,e,null),d(e,r),d(e,n),o=!0},p:U,i(l){o||(O(t.$$.fragment,l),l&&(i||Ee(()=>{i=Ue(e,Fe,{duration:500}),i.start()})),o=!0)},o(l){M(t.$$.fragment,l),o=!1},d(l){l&&P(e),Y(t)}}}class hg extends be{constructor(e){super(),ge(this,e,null,fg,pe,{})}}function mg(s){let e,t;return e=new mn({props:{routes:{"*":pp}}}),{c(){N(e.$$.fragment)},m(r,n){L(e,r,n),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function _g(s){let e,t,r,n;return e=new Zo({}),r=new mn({props:{routes:{"/":tp,"/book/:bookID":Ba,"/author/:authorID":qa,"/publisher/:publisherID":Va,"/search":os,"/search/author":os,"/search/publisher":os,"/add-book":E_,"/add-author":Bp,"/add-publisher":Qp,"/borrow":Dp,"/return":Np,"/book-report":ig,"/payment-report":cg,"/student-report":dg,"/reports":hg,"*":zn}}}),{c(){N(e.$$.fragment),t=w(),N(r.$$.fragment)},m(i,o){L(e,i,o),E(i,t,o),L(r,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(r.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(r.$$.fragment,i),n=!1},d(i){i&&P(t),Y(e,i),Y(r,i)}}}function pg(s){let e,t,r,n;return e=new Zo({}),r=new mn({props:{routes:{"/":qm,"/book/:bookID":Ba,"/author/:authorID":qa,"/publisher/:publisherID":Va,"/search":os,"/search/author":os,"/search/publisher":os,"*":zn}}}),{c(){N(e.$$.fragment),t=w(),N(r.$$.fragment)},m(i,o){L(e,i,o),E(i,t,o),L(r,i,o),n=!0},i(i){n||(O(e.$$.fragment,i),O(r.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),M(r.$$.fragment,i),n=!1},d(i){i&&P(t),Y(e,i),Y(r,i)}}}function gg(s){let e,t,r,n;const i=[pg,_g,mg],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),r=ze()},m(a,c){o[e].m(a,c),E(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(Oe(),M(o[u],1,1,()=>{o[u]=null}),Te(),t=o[e],t||(t=o[e]=i[e](a),t.c()),O(t,1),t.m(r.parentNode,r))},i(a){n||(O(t),n=!0)},o(a){M(t),n=!1},d(a){a&&P(r),o[e].d(a)}}}function bg(s,e,t){let r;return Rt.subscribe(n=>{t(0,r=n)}),[r]}class vg extends be{constructor(e){super(),ge(this,e,bg,gg,pe,{})}}new vg({target:document.getElementById("app")})});export default wg();
