var Pa=Object.defineProperty;var Ra=(t,e,r)=>e in t?Pa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ja=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ss=(t,e,r)=>(Ra(t,typeof e!="symbol"?e+"":e,r),r);var Mp=ja((Pp,Zr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function j(){}const tn=t=>t;function Sr(t,e){for(const r in e)t[r]=e[r];return t}function Aa(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function no(t){return t()}function zn(){return Object.create(null)}function $e(t){t.forEach(no)}function Rr(t){return typeof t=="function"}function be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ur;function qe(t,e){return t===e?!0:(Ur||(Ur=document.createElement("a")),Ur.href=e,t===Ur.href)}function Ia(t){return Object.keys(t).length===0}function io(t,...e){if(t==null){for(const s of e)s(void 0);return j}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function oo(t,e,r){t.$$.on_destroy.push(io(e,r))}function rn(t,e,r,s){if(t){const n=ao(t,e,r,s);return t[0](n)}}function ao(t,e,r,s){return t[1]&&s?Sr(r.ctx.slice(),t[1](s(e))):r.ctx}function sn(t,e,r,s){if(t[2]&&s){const n=t[2](s(r));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function nn(t,e,r,s,n,i){if(n){const o=ao(e,r,s,i);t.p(o,n)}}function on(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let s=0;s<r;s++)e[s]=-1;return e}return-1}function Gn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const lo=typeof window<"u";let co=lo?()=>window.performance.now():()=>Date.now(),an=lo?t=>requestAnimationFrame(t):j;const Qt=new Set;function uo(t){Qt.forEach(e=>{e.c(t)||(Qt.delete(e),e.f())}),Qt.size!==0&&an(uo)}function ho(t){let e;return Qt.size===0&&an(uo),{promise:new Promise(r=>{Qt.add(e={c:t,f:r})}),abort(){Qt.delete(e)}}}function h(t,e){t.appendChild(e)}function fo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ya(t){const e=m("style");return e.textContent="/* empty */",La(fo(t),e),e.sheet}function La(t,e){return h(t.head||t,e),e.sheet}function C(t,e,r){t.insertBefore(e,r||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Xe(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function m(t){return document.createElement(t)}function ie(t){return document.createTextNode(t)}function y(){return ie(" ")}function ze(){return ie("")}function V(t,e,r,s){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r,s)}function Na(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function ls(t){return t===""?null:+t}function Ua(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function cr(t,e,r,s){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,"")}function Jn(t,e,r){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function xa(t){const e=t.querySelector(":checked");return e&&e.__value}function _o(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function Qr(t,e){return new t(e)}const Xr=new Map;let es=0;function Fa(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function Ha(t,e){const r={stylesheet:Ya(e),rules:{}};return Xr.set(t,r),r}function Ls(t,e,r,s,n,i,o,l=0){const a=16.666/s;let c=`{
`;for(let v=0;v<=1;v+=a){const w=e+(r-e)*i(v);c+=v*100+`%{${o(w,1-w)}}
`}const u=c+`100% {${o(r,1-r)}}
}`,f=`__svelte_${Fa(u)}_${l}`,_=fo(t),{stylesheet:g,rules:p}=Xr.get(_)||Ha(_,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${s}ms linear ${n}ms 1 both`,es+=1,f}function Ns(t,e){const r=(t.style.animation||"").split(", "),s=r.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=r.length-s.length;n&&(t.style.animation=s.join(", "),es-=n,es||Wa())}function Wa(){an(()=>{es||(Xr.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),Xr.clear())})}let Or;function _t(t){Or=t}function jr(){if(!Or)throw new Error("Function called outside component initialization");return Or}function Tr(t){jr().$$.on_mount.push(t)}function qa(t){jr().$$.after_update.push(t)}function Ba(t){jr().$$.on_destroy.push(t)}function Va(){const t=jr();return(e,r,{cancelable:s=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=_o(e,r,{cancelable:s});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Us(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(s=>s.call(this,e))}const Gt=[],or=[];let Xt=[];const Kn=[],mo=Promise.resolve();let xs=!1;function po(){xs||(xs=!0,mo.then(cn))}function ln(){return po(),mo}function Le(t){Xt.push(t)}const Os=new Set;let Ht=0;function cn(){if(Ht!==0)return;const t=Or;do{try{for(;Ht<Gt.length;){const e=Gt[Ht];Ht++,_t(e),za(e.$$)}}catch(e){throw Gt.length=0,Ht=0,e}for(_t(null),Gt.length=0,Ht=0;or.length;)or.pop()();for(let e=0;e<Xt.length;e+=1){const r=Xt[e];Os.has(r)||(Os.add(r),r())}Xt.length=0}while(Gt.length);for(;Kn.length;)Kn.pop()();xs=!1,Os.clear(),_t(t)}function za(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Ga(t){const e=[],r=[];Xt.forEach(s=>t.indexOf(s)===-1?e.push(s):r.push(s)),r.forEach(s=>s()),Xt=e}let _r;function go(){return _r||(_r=Promise.resolve(),_r.then(()=>{_r=null})),_r}function vr(t,e,r){t.dispatchEvent(_o(`${e?"intro":"outro"}${r}`))}const Br=new Set;let mt;function Me(){mt={r:0,c:[],p:mt}}function Ee(){mt.r||$e(mt.c),mt=mt.p}function S(t,e){t&&t.i&&(Br.delete(t),t.i(e))}function T(t,e,r,s){if(t&&t.o){if(Br.has(t))return;Br.add(t),mt.c.push(()=>{Br.delete(t),s&&(r&&t.d(1),s())}),t.o(e)}else s&&s()}const bo={duration:0};function Ge(t,e,r){const s={direction:"in"};let n=e(t,r,s),i=!1,o,l,a=0;function c(){o&&Ns(t,o)}function u(){const{delay:_=0,duration:g=300,easing:p=tn,tick:b=j,css:v}=n||bo;v&&(o=Ls(t,0,1,g,_,p,v,a++)),b(0,1);const w=co()+_,$=w+g;l&&l.abort(),i=!0,Le(()=>vr(t,!0,"start")),l=ho(O=>{if(i){if(O>=$)return b(1,0),vr(t,!0,"end"),c(),i=!1;if(O>=w){const M=p((O-w)/g);b(M,1-M)}}return i})}let f=!1;return{start(){f||(f=!0,Ns(t),Rr(n)?(n=n(s),go().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Zn(t,e,r,s){let i=e(t,r,{direction:"both"}),o=s?0:1,l=null,a=null,c=null,u;function f(){c&&Ns(t,c)}function _(p,b){const v=p.b-o;return b*=Math.abs(v),{a:o,b:p.b,d:v,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:v=300,easing:w=tn,tick:$=j,css:O}=i||bo,M={start:co()+b,b:p};p||(M.group=mt,mt.r+=1),"inert"in t&&(p?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),l||a?a=M:(O&&(f(),c=Ls(t,o,p,v,b,w,O)),p&&$(0,1),l=_(M,v),Le(()=>vr(t,p,"start")),ho(k=>{if(a&&k>a.start&&(l=_(a,v),a=null,vr(t,l.b,"start"),O&&(f(),c=Ls(t,o,l.b,l.duration,0,w,i.css))),l){if(k>=l.end)$(o=l.b,1-o),vr(t,l.b,"end"),a||(l.b?f():--l.group.r||$e(l.group.c)),l=null;else if(k>=l.start){const D=k-l.start;o=l.a+l.d*w(D/l.duration),$(o,1-o)}}return!!(l||a)}))}return{run(p){Rr(i)?go().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){f(),l=a=null}}}function Vr(t,e){const r=e.token={};function s(n,i,o,l){if(e.token!==r)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==i&&f&&(Me(),T(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),Ee())}):e.block.d(1),c.c(),S(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&cn()}if(Aa(t)){const n=jr();if(t.then(i=>{_t(n),s(e.then,1,e.value,i),_t(null)},i=>{if(_t(n),s(e.catch,2,e.error,i),_t(null),!e.hasCatch)throw i}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}}function zr(t,e,r){const s=e.slice(),{resolved:n}=t;t.current===t.then&&(s[t.value]=n),t.current===t.catch&&(s[t.error]=n),t.block.p(s,r)}function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ts(t,e){const r={},s={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const a in o)a in l||(s[a]=1);for(const a in l)n[a]||(r[a]=l[a],n[a]=1);t[i]=l}else for(const a in o)n[a]=1}for(const o in s)o in r||(r[o]=void 0);return r}function rs(t){return typeof t=="object"&&t!==null?t:{}}function x(t){t&&t.c()}function N(t,e,r){const{fragment:s,after_update:n}=t.$$;s&&s.m(e,r),Le(()=>{const i=t.$$.on_mount.map(no).filter(Rr);t.$$.on_destroy?t.$$.on_destroy.push(...i):$e(i),t.$$.on_mount=[]}),n.forEach(Le)}function U(t,e){const r=t.$$;r.fragment!==null&&(Ga(r.after_update),$e(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Ja(t,e){t.$$.dirty[0]===-1&&(Gt.push(t),po(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,r,s,n,i,o=null,l=[-1]){const a=Or;_t(t);const c=t.$$={fragment:null,ctx:[],props:i,update:j,not_equal:n,bound:zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=r?r(t,e.props||{},(f,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&Ja(t,f)),_}):[],c.update(),u=!0,$e(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const f=Ua(e.target);c.fragment&&c.fragment.l(f),f.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&S(t.$$.fragment),N(t,e.target,e.anchor),cn()}_t(a)}class we{constructor(){Ss(this,"$$");Ss(this,"$$set")}$destroy(){U(this,1),this.$destroy=j}$on(e,r){if(!Rr(r))return j;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(r),()=>{const n=s.indexOf(r);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Ia(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ka="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ka);const Wt=[];function vo(t,e){return{subscribe:cs(t,e).subscribe}}function cs(t,e=j){let r;const s=new Set;function n(l){if(be(t,l)&&(t=l,r)){const a=!Wt.length;for(const c of s)c[1](),Wt.push(c,t);if(a){for(let c=0;c<Wt.length;c+=2)Wt[c][0](Wt[c+1]);Wt.length=0}}}function i(l){n(l(t))}function o(l,a=j){const c=[l,a];return s.add(c),s.size===1&&(r=e(n,i)||j),l(t),()=>{s.delete(c),s.size===0&&r&&(r(),r=null)}}return{set:n,update:i,subscribe:o}}function wo(t,e,r){const s=!Array.isArray(t),n=s?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return vo(r,(o,l)=>{let a=!1;const c=[];let u=0,f=j;const _=()=>{if(u)return;f();const p=e(s?c[0]:c,o,l);i?o(p):f=Rr(p)?p:j},g=n.map((p,b)=>io(p,v=>{c[b]=v,u&=~(1<<b),a&&_()},()=>{u|=1<<b}));return a=!0,_(),function(){$e(g),f(),a=!1}})}const Pt=cs(localStorage.getItem("accType")),er=cs(localStorage.getItem("user_id"));window.addEventListener("storage",function(t){let e;er.subscribe(r=>e=r),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Pt.set(""),er.set("")):(er.set(localStorage.getItem("user_id")),Pt.set(localStorage.getItem("accType"))))});function Za(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,n,i,o=[],l="",a=t.split("/");for(a[0]||a.shift();n=a.shift();)r=n[0],r==="*"?(o.push("wild"),l+="/(.*)"):r===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Qa(t){let e,r,s;const n=[t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Sr(c,n[u]);return a!==void 0&&a&4&&(c=Sr(c,ts(n,[rs(l[2])]))),{props:c}}return i&&(e=Qr(i,o(t)),e.$on("routeEvent",t[7])),{c(){e&&x(e.$$.fragment),r=ze()},m(l,a){e&&N(e,l,a),C(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Me();const c=e;T(c.$$.fragment,1,0,()=>{U(c,1)}),Ee()}i?(e=Qr(i,o(l,a)),e.$on("routeEvent",l[7]),x(e.$$.fragment),S(e.$$.fragment,1),N(e,r.parentNode,r)):e=null}else if(i){const c=a&4?ts(n,[rs(l[2])]):{};e.$set(c)}},i(l){s||(e&&S(e.$$.fragment,l),s=!0)},o(l){e&&T(e.$$.fragment,l),s=!1},d(l){l&&E(r),e&&U(e,l)}}}function Xa(t){let e,r,s;const n=[{params:t[1]},t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Sr(c,n[u]);return a!==void 0&&a&6&&(c=Sr(c,ts(n,[a&2&&{params:l[1]},a&4&&rs(l[2])]))),{props:c}}return i&&(e=Qr(i,o(t)),e.$on("routeEvent",t[6])),{c(){e&&x(e.$$.fragment),r=ze()},m(l,a){e&&N(e,l,a),C(l,r,a),s=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Me();const c=e;T(c.$$.fragment,1,0,()=>{U(c,1)}),Ee()}i?(e=Qr(i,o(l,a)),e.$on("routeEvent",l[6]),x(e.$$.fragment),S(e.$$.fragment,1),N(e,r.parentNode,r)):e=null}else if(i){const c=a&6?ts(n,[a&2&&{params:l[1]},a&4&&rs(l[2])]):{};e.$set(c)}},i(l){s||(e&&S(e.$$.fragment,l),s=!0)},o(l){e&&T(e.$$.fragment,l),s=!1},d(l){l&&E(r),e&&U(e,l)}}}function el(t){let e,r,s,n;const i=[Xa,Qa],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function Qn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let s="";return r>-1&&(s=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:s}}const un=vo(null,function(e){e(Qn());const r=()=>{e(Qn())};return window.addEventListener("hashchange",r,!1),function(){window.removeEventListener("hashchange",r,!1)}}),tl=wo(un,t=>t.location),rl=wo(un,t=>t.querystring),Xn=cs(void 0);async function sl(){await ln(),window.history.back()}async function nl(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await ln();const e=(t.charAt(0)=="#"?"":"#")+t;try{const r={...history.state};delete r.__svelte_spa_router_scrollX,delete r.__svelte_spa_router_scrollY,window.history.replaceState(r,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function il(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function ol(t,e,r){let{routes:s={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(k,D){if(!D||typeof D!="function"&&(typeof D!="object"||D._sveltesparouter!==!0))throw Error("Invalid component object");if(!k||typeof k=="string"&&(k.length<1||k.charAt(0)!="/"&&k.charAt(0)!="*")||typeof k=="object"&&!(k instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:F,keys:A}=Za(k);this.path=k,typeof D=="object"&&D._sveltesparouter===!0?(this.component=D.component,this.conditions=D.conditions||[],this.userData=D.userData,this.props=D.props||{}):(this.component=()=>Promise.resolve(D),this.conditions=[],this.props={}),this._pattern=F,this._keys=A}match(k){if(n){if(typeof n=="string")if(k.startsWith(n))k=k.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const W=k.match(n);if(W&&W[0])k=k.substr(W[0].length)||"/";else return null}}const D=this._pattern.exec(k);if(D===null)return null;if(this._keys===!1)return D;const F={};let A=0;for(;A<this._keys.length;){try{F[this._keys[A]]=decodeURIComponent(D[A+1]||"")||null}catch{F[this._keys[A]]=null}A++}return F}async checkConditions(k){for(let D=0;D<this.conditions.length;D++)if(!await this.conditions[D](k))return!1;return!0}}const l=[];s instanceof Map?s.forEach((M,k)=>{l.push(new o(k,M))}):Object.keys(s).forEach(M=>{l.push(new o(M,s[M]))});let a=null,c=null,u={};const f=Va();async function _(M,k){await ln(),f(M,k)}let g=null,p=null;i&&(p=M=>{M.state&&(M.state.__svelte_spa_router_scrollY||M.state.__svelte_spa_router_scrollX)?g=M.state:g=null},window.addEventListener("popstate",p),qa(()=>{il(g)}));let b=null,v=null;const w=un.subscribe(async M=>{b=M;let k=0;for(;k<l.length;){const D=l[k].match(M.location);if(!D){k++;continue}const F={route:l[k].path,location:M.location,querystring:M.querystring,userData:l[k].userData,params:D&&typeof D=="object"&&Object.keys(D).length?D:null};if(!await l[k].checkConditions(F)){r(0,a=null),v=null,_("conditionsFailed",F);return}_("routeLoading",Object.assign({},F));const A=l[k].component;if(v!=A){A.loading?(r(0,a=A.loading),v=A,r(1,c=A.loadingParams),r(2,u={}),_("routeLoaded",Object.assign({},F,{component:a,name:a.name,params:c}))):(r(0,a=null),v=null);const W=await A();if(M!=b)return;r(0,a=W&&W.default||W),v=A}D&&typeof D=="object"&&Object.keys(D).length?r(1,c=D):r(1,c=null),r(2,u=l[k].props),_("routeLoaded",Object.assign({},F,{component:a,name:a.name,params:c})).then(()=>{Xn.set(c)});return}r(0,a=null),v=null,Xn.set(void 0)});Ba(()=>{w(),p&&window.removeEventListener("popstate",p)});function $(M){Us.call(this,t,M)}function O(M){Us.call(this,t,M)}return t.$$set=M=>{"routes"in M&&r(3,s=M.routes),"prefix"in M&&r(4,n=M.prefix),"restoreScrollState"in M&&r(5,i=M.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,s,n,i,$,O]}class dn extends we{constructor(e){super(),ve(this,e,ol,el,be,{routes:3,prefix:4,restoreScrollState:5})}}const al="modulepreload",ll=function(t){return"/library/"+t},ei={},ar=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(r.map(l=>{if(l=ll(l),l in ei)return;ei[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":al,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((f,_)=>{u.addEventListener("load",f),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},cl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ar(()=>Promise.resolve().then(()=>Ar),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class hn extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class ul extends hn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dl extends hn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hl extends hn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fs||(Fs={}));var fl=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class _l{constructor(e,{headers:r={},customFetch:s,region:n=Fs.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=cl(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return fl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:a}=r;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new ul(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new dl(u);if(!u.ok)throw new hl(u);let _=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var ml=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},lr=ml();const pl=lr.fetch,fn=lr.fetch.bind(lr),yo=lr.Headers,gl=lr.Request,bl=lr.Response,Ar=Object.freeze(Object.defineProperty({__proto__:null,Headers:yo,Request:gl,Response:bl,default:fn,fetch:pl},Symbol.toStringTag,{value:"Module"}));class vl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class wl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,f=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&b===""?(_=204,g="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new vl(c)}return{error:c,data:u,count:f,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,r)}}class yl extends wl{select(e){let r=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Jt extends yl{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}}class kl{constructor(e,{headers:r={},schema:s,fetch:n}){this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new Jt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Jt({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const $l="1.15.2",Sl={"X-Client-Info":`postgrest-js/${$l}`};class _n{constructor(e,{headers:r={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Sl),r),this.schemaName=s,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new kl(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;s||n?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(o="POST",a=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Jt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Ol="2.9.5",Tl={"X-Client-Info":`realtime-js/${Ol}`},Dl="1.0.0",ko=1e4,Ml=1e3;var tr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(tr||(tr={}));var Ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ve||(Ve={}));var st;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(st||(st={}));var Hs;(function(t){t.websocket="websocket"})(Hs||(Hs={}));var Lt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lt||(Lt={}));class $o{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class El{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const a=s.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Ts{constructor(e,r,s={},n=ko){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ti;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ti||(ti={}));class wr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wr.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=wr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=wr.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const _=u.map(v=>v.presence_ref),g=f.map(v=>v.presence_ref),p=u.filter(v=>g.indexOf(v.presence_ref)<0),b=f.filter(v=>_.indexOf(v.presence_ref)<0);p.length>0&&(l[c]=p),b.length>0&&(a[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const f=e[l].map(g=>g.presence_ref),_=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(..._)}s(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ke||(ke={}));const ri=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Cl(o,t,e,n),i),{})},Cl=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?So(i,o):Ws(o)},So=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Al(e,r)}switch(t){case ke.bool:return Pl(e);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Rl(e);case ke.json:case ke.jsonb:return jl(e);case ke.timestamp:return Il(e);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Ws(e);default:return Ws(e)}},Ws=t=>t,Pl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Rl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},jl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Al=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>So(e,l))}return t},Il=t=>typeof t=="string"?t.replace(" ","T"):t;var si;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(si||(si={}));var ni;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ni||(ni={}));var ii;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ii||(ii={}));class mn{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ts(this,st.join,this.params,this.timeout),this.rejoinTimer=new $o(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new wr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,_=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const b=f[p],{filter:{event:v,schema:w,table:$,filter:O}}=b,M=c&&c[p];if(M&&M.event===v&&M.schema===w&&M.table===$&&M.filter===O)g.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Ts(this,st.leave,{},e);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ts(this,e,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=st;if(s&&[l,a,c,u].indexOf(o)>=0&&s!==this._joinRef())return;let _=this._onMessage(o,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,v;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(b=g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(_,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,v,w,$,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const M=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return M&&((b=r.ids)===null||b===void 0?void 0:b.includes(M))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const M=($=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return M==="*"||M===((O=r==null?void 0:r.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:b,table:v,commit_timestamp:w,type:$,errors:O}=p;_=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:w,eventType:$,new:{},old:{},errors:O}),this._getPayloadRecords(p))}g.callback(_,s)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&mn.isEqual(n.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(st.close,{},e)}_onError(e){this._on(st.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ri(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ri(e.columns,e.old_record)),r}}const Yl=()=>{},Ll=typeof WebSocket<"u";class Nl{constructor(e,r){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Tl,this.params={},this.timeout=ko,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Yl,this.conn=null,this.sendBuffer=[],this.serializer=new El,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ar(()=>Promise.resolve().then(()=>Ar),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Hs.websocket}`,r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $o(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ll){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ul(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ar(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case tr.connecting:return Lt.Connecting;case tr.open:return Lt.Open;case tr.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}channel(e,r={config:{}}){const s=new mn(`realtime:${e}`,r,this);return this.channels.push(s),s}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(st.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dl}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:n,payload:i,ref:o}=r;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(st.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ml,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Ul{constructor(e,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=tr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class xl extends pn{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class oi extends pn{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Fl=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Oo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ar(()=>Promise.resolve().then(()=>Ar),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Hl=()=>Fl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ar(()=>Promise.resolve().then(()=>Ar),void 0)).Response:Response});var ur=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Ds=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Wl=(t,e)=>ur(void 0,void 0,void 0,function*(){const r=yield Hl();t instanceof r?t.json().then(s=>{e(new xl(Ds(s),t.status||500))}).catch(s=>{e(new oi(Ds(s),s))}):e(new oi(Ds(t),t))}),ql=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};function us(t,e,r,s,n,i){return ur(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,ql(e,s,n,i)).then(a=>{if(!a.ok)throw a;return s!=null&&s.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Wl(a,l))})})}function qs(t,e,r,s){return ur(this,void 0,void 0,function*(){return us(t,"GET",e,r,s)})}function Ot(t,e,r,s,n){return ur(this,void 0,void 0,function*(){return us(t,"POST",e,s,n,r)})}function Bl(t,e,r,s,n){return ur(this,void 0,void 0,function*(){return us(t,"PUT",e,s,n,r)})}function To(t,e,r,s,n){return ur(this,void 0,void 0,function*(){return us(t,"DELETE",e,s,n,r)})}var Ze=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const Vl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ai={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zl{constructor(e,r={},s,n){this.url=e,this.headers=r,this.bucketId=s,this.fetch=Oo(n)}uploadOrUpdate(e,r,s,n){return Ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ai),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(r),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield u.json();return u.ok?{data:{path:a,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}upload(e,r,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let a;const c=Object.assign({upsert:ai.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",c.cacheControl)):(a=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),_=yield f.json();return f.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(a){if(Ue(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Ze(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=yield Ot(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new pn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}update(e,r,s){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}copy(e,r){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,s){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ot(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return Ze(this,void 0,void 0,function*(){try{const n=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}download(e,r){return Ze(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield qs(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${c}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield To(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}list(e,r,s){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Vl),r),{prefix:e||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Gl="2.5.5",Jl={"X-Client-Info":`storage-js/${Gl}`};var qt=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class Kl{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},Jl),r),this.fetch=Oo(s)}listBuckets(){return qt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return qt(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return qt(this,void 0,void 0,function*(){try{return{data:yield Bl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}emptyBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}deleteBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield To(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}}class Zl extends Kl{constructor(e,r={},s){super(e,r,s)}from(e){return new zl(this.url,this.headers,e,this.fetch)}}const Ql="2.43.2";let br="";typeof Deno<"u"?br="deno":typeof document<"u"?br="web":typeof navigator<"u"&&navigator.product==="ReactNative"?br="react-native":br="node";const Xl={"X-Client-Info":`supabase-js-${br}/${Ql}`},ec={headers:Xl},tc={schema:"public"},rc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sc={};var nc=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};const ic=t=>{let e;return t?e=t:typeof fetch>"u"?e=fn:e=fetch,(...r)=>e(...r)},oc=()=>typeof Headers>"u"?yo:Headers,ac=(t,e,r)=>{const s=ic(r),n=oc();return(i,o)=>nc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(i,Object.assign(Object.assign({},o),{headers:c}))})};function lc(t){return t.replace(/\/$/,"")}function cc(t,e){const{db:r,auth:s,realtime:n,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const Do="2.64.2",uc="http://localhost:9999",dc="supabase.auth.token",hc={"X-Client-Info":`gotrue-js/${Do}`},li=10,Bs="X-Supabase-Api-Version",Mo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function fc(t){return Math.round(Date.now()/1e3)+t}function _c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const rt=()=>typeof document<"u",jt={tested:!1,writable:!1},yr=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jt.tested)return jt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jt.tested=!0,jt.writable=!0}catch{jt.tested=!0,jt.writable=!1}return jt.writable};function Ms(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Eo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ar(()=>Promise.resolve().then(()=>Ar),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},mc=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Co=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Es=async(t,e)=>{await t.removeItem(e)};function pc(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",s,n,i,o,l,a,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),s=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,r=r+String.fromCharCode(s),a!=64&&n!=0&&(r=r+String.fromCharCode(n)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class ds{constructor(){this.promise=new ds.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ds.promiseConstructor=Promise;function ci(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=r[1];return JSON.parse(pc(s))}async function gc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function bc(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function vc(t){return("0"+t.toString(16)).substr(-2)}function wc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,vc).join("")}async function yc(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function kc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $c(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await yc(t);return kc(r)}async function Bt(t,e,r=!1){const s=wc();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Co(t,`${e}-code-verifier`,n);const i=await $c(s);return[i,s===i?"plain":"s256"]}const Sc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Oc(t){const e=t.headers.get(Bs);if(!e||!e.match(Sc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class gn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Tc extends gn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Dc(t){return ae(t)&&t.name==="AuthApiError"}class Po extends gn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xt extends gn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class At extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Cs extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fr extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hr extends xt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ui extends xt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends xt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ps(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class di extends xt{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}var Mc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};const Yt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ec=[502,503,504];async function hi(t){var e;if(!mc(t))throw new Vs(Yt(t),0);if(Ec.includes(t.status))throw new Vs(Yt(t),t.status);let r;try{r=await t.json()}catch(i){throw new Po(Yt(i),i)}let s;const n=Oc(t);if(n&&n.getTime()>=Mo["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new di(Yt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new di(Yt(r),t.status,r.weak_password.reasons);throw new Tc(Yt(r),t.status||500,s)}const Cc=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function de(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Bs]||(i[Bs]=Mo["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Pc(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(a):{data:Object.assign({},a),error:null}}async function Pc(t,e,r,s,n,i){const o=Cc(e,s,n,i);let l;try{l=await t(r,Object.assign({},o))}catch(a){throw console.error(a),new Vs(Yt(a),0)}if(l.ok||await hi(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(a){await hi(a)}}function St(t){var e;let r=null;Ic(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=fc(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function fi(t){const e=St(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Tt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Rc(t){return{data:t,error:null}}function jc(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=Mc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Ac(t){return t}function Ic(t){return t.access_token&&t.refresh_token&&t.expires_in}var Yc=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r};class Lc{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Eo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Tt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Yc(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:jc,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ac});if(u.error)throw u.error;const f=await u.json(),_=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=b}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Tt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Tt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:r,error:s}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}}const Nc={getItem:t=>yr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{yr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{yr()&&globalThis.localStorage.removeItem(t)}};function _i(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Uc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&yr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ro extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xc extends Ro{}async function Fc(t,e,r){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}Uc();const Hc={url:uc,storageKey:dc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},mr=30*1e3,mi=3;async function pi(t,e,r){return await r()}class Dr{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dr.nextInstanceID,Dr.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Hc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Lc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Eo(n.fetch),this.lock=n.lock||pi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:rt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Fc:this.lock=pi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:yr()?this.storage=Nc:(this.memoryStorage={},this.storage=_i(this.memoryStorage)):(this.memoryStorage={},this.storage=_i(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Do}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=rt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ae(e)?{error:e}:{error:new Po("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{await this._removeSession();const i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:St}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Bt(this.storage,this.storageKey)),i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:f,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:St})}else if("phone"in e){const{phone:u,password:f,options:_}=e;i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:St})}else throw new Fr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else throw new Fr("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Cs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await xr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/"),{data:i,error:o}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:St});return await Es(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Cs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,l=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:St}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Cs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Bt(this.storage,this.storageKey));const{error:f}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=a==null?void 0:a.data)!==null&&r!==void 0?r:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Fr("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:St});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var r,s,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Bt(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Rc})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new At;const{error:n}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await de(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await de(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Fr("You must provide either an email or phone number and a type")}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tt}):await this._useSession(async r=>{var s,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new At}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Tt})})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new At;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Bt(this.storage,this.storageKey));const{data:c,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Tt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ci(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new At;const r=Date.now()/1e3;let s=r,n=!0,i=null;const o=ci(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ae(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!rt())throw new Hr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Hr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ui("Not a valid PKCE flow url.");const r=Ms(window.location.href);if(e){if(!r.code)throw new ui("No code detected.");const{data:$,error:O}=await this._exchangeCodeForSession(r.code);if(O)throw O;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:$.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Hr(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=r;if(!i||!l||!o||!c)throw new Hr("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let _=u+f;a&&(_=parseInt(a));const g=_-u;g*1e3<=mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=_-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:_,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:r.type},error:null}}catch(r){if(ae(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const e=Ms(window.location.href);return!!(rt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Ms(window.location.href),r=await xr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Dc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Es(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const r=_c(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Bt(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:f,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return rt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ae(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await bc(async n=>(n>0&&await gc(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:St})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Ps(i)&&Date.now()+o-s<mr})}catch(s){if(this._debug(r,"error",s),ae(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),rt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await xr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+li;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${li}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ps(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new At;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ds;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new At;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),ae(i)){const o={session:null,error:i};return Ps(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Co(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Es(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${mr}ms, refresh threshold is ${mi} ticks`),n<=mi&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ro)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Bt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const{data:l,error:a}=await de(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ae(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ae(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Dr.nextInstanceID=0;const Wc=Dr;class qc extends Wc{constructor(e){super(e)}}var Bc=function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(s.next(u))}catch(f){o(f)}}function a(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((s=s.apply(t,e||[])).next())})};class Vc{constructor(e,r,s){var n,i,o,l,a,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const _=lc(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:tc,realtime:sc,auth:Object.assign(Object.assign({},rc),{storageKey:g}),global:ec},b=cc(s??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=ac(r,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new _n(`${_}/rest/v1`,{headers:this.headers,schema:(f=b.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new _l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Zl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Bc(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qc({url:this.authUrl,headers:Object.assign(Object.assign({},f),a),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Nl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zc=(t,e,r)=>new Vc(t,e,r),re=zc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function gi(t){let e;return{c(){e=m("a"),e.textContent="Add book",d(e,"class","nav-link svelte-kdejnj"),d(e,"href","./#/add-book")},m(r,s){C(r,e,s)},d(r){r&&E(e)}}}function Gc(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H,I,K,se,Q,ne,X=t[0]=="staff"&&gi();return{c(){e=m("nav"),r=m("div"),s=m("a"),s.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=y(),i=m("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=y(),l=m("div"),a=m("div"),c=m("a"),c.textContent="Books",u=y(),f=m("a"),f.textContent="Authors",_=y(),g=m("a"),g.textContent="Publishers",p=y(),X&&X.c(),b=y(),v=m("li"),w=m("a"),$=m("i"),O=y(),M=ie(t[1]),k=y(),D=m("ul"),F=m("li"),F.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Profile</a>',A=y(),W=m("li"),W.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Settings</a>',q=y(),R=m("li"),R.innerHTML='<hr class="dropdown-divider"/>',P=y(),B=m("li"),ee=m("a"),ee.textContent="Log Out",H=y(),I=m("button"),K=m("span"),d(s,"class","navbar-brand m-0 px-2 svelte-kdejnj"),d(s,"href","./#/"),d(i,"class","navbar-toggler"),d(i,"type","button"),d(i,"data-bs-toggle","collapse"),d(i,"data-bs-target","#navbarContent"),d(c,"class","nav-link svelte-kdejnj"),d(c,"href","./#/search"),d(f,"class","nav-link svelte-kdejnj"),d(f,"href","./#/search/author"),d(g,"class","nav-link svelte-kdejnj"),d(g,"href","./#/search/publisher"),d($,"class","bi bi-person-fill"),d(w,"class","nav-link dropdown-toggle svelte-kdejnj"),d(w,"href","#"),d(w,"role","button"),d(w,"data-bs-toggle","dropdown"),d(w,"aria-expanded","false"),d(ee,"class","dropdown-item text-danger svelte-kdejnj"),d(ee,"href","./#/"),d(D,"class","dropdown-menu"),d(v,"class","nav-item dropdown"),d(K,"class",se="bi bi-"+t[2]+" svelte-kdejnj"),d(I,"title","Switch theme"),d(I,"class","px-1 border-0 bg-transparent nav-link svelte-kdejnj"),d(a,"class","navbar-nav ms-auto text-center svelte-kdejnj"),d(l,"class","collapse navbar-collapse"),d(l,"id","navbarContent"),d(r,"class","container px-4 fw-semibold"),d(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(he,Ae){C(he,e,Ae),h(e,r),h(r,s),h(r,n),h(r,i),h(r,o),h(r,l),h(l,a),h(a,c),h(a,u),h(a,f),h(a,_),h(a,g),h(a,p),X&&X.m(a,null),h(a,b),h(a,v),h(v,w),h(w,$),h(w,O),h(w,M),h(v,k),h(v,D),h(D,F),h(D,A),h(D,W),h(D,q),h(D,R),h(D,P),h(D,B),h(B,ee),h(a,H),h(a,I),h(I,K),Q||(ne=[V(ee,"click",t[4]),V(I,"click",t[3])],Q=!0)},p(he,[Ae]){he[0]=="staff"?X||(X=gi(),X.c(),X.m(a,b)):X&&(X.d(1),X=null),Ae&2&&ge(M,he[1]),Ae&4&&se!==(se="bi bi-"+he[2]+" svelte-kdejnj")&&d(K,"class",se)},i:j,o:j,d(he){he&&E(e),X&&X.d(),Q=!1,$e(ne)}}}function Jc(t,e,r){let s,n,i;Pt.subscribe(f=>r(0,n=f)),er.subscribe(f=>i=f);let o;async function l(){const{data:f,error:_}=await re.from("account_details").select("lname").eq("user_id",i).single();_&&console.error(_),r(1,o=f.lname)}l();let a=localStorage.getItem("theme")||"light";function c(){r(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){Pt.set(""),er.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return t.$$.update=()=>{t.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),t.$$.dirty&32&&r(2,s=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,s,c,u,a]}class jo extends we{constructor(e){super(),ve(this,e,Jc,Gc,be,{})}}function Kc(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$;return{c(){e=m("section"),r=m("div"),s=m("div"),n=m("div"),i=m("img"),l=y(),a=m("div"),c=m("img"),f=y(),_=m("div"),g=m("img"),b=y(),v=m("button"),v.innerHTML='<span class="carousel-control-prev-icon"></span>',w=y(),$=m("button"),$.innerHTML='<span class="carousel-control-next-icon"></span>',qe(i.src,o=Rs)||d(i,"src",o),d(i,"class","d-block w-100"),d(i,"alt","..."),d(n,"class","carousel-item active"),qe(c.src,u=Rs)||d(c,"src",u),d(c,"class","d-block w-100"),d(c,"alt","..."),d(a,"class","carousel-item"),qe(g.src,p=Rs)||d(g,"src",p),d(g,"class","d-block w-100"),d(g,"alt","..."),d(_,"class","carousel-item"),d(s,"class","carousel-inner"),d(v,"class","carousel-control-prev"),d(v,"type","button"),d(v,"data-bs-target","#homeAdCarousel"),d(v,"data-bs-slide","prev"),d($,"class","carousel-control-next"),d($,"type","button"),d($,"data-bs-target","#homeAdCarousel"),d($,"data-bs-slide","next"),d(r,"id","homeAdCarousel"),d(r,"class","carousel slide"),d(r,"data-bs-ride","carousel"),d(r,"data-bs-interval","8000")},m(O,M){C(O,e,M),h(e,r),h(r,s),h(s,n),h(n,i),h(s,l),h(s,a),h(a,c),h(s,f),h(s,_),h(_,g),h(r,b),h(r,v),h(r,w),h(r,$)},p:j,i:j,o:j,d(O){O&&E(e)}}}let Rs="./cover.jpg";class Zc extends we{constructor(e){super(),ve(this,e,null,Kc,be,{})}}function Qc(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p;return{c(){e=m("div"),r=m("img"),n=y(),i=m("div"),o=m("h5"),l=m("a"),a=ie(t[1]),u=y(),f=m("small"),_=m("i"),g=y(),p=ie(t[2]),qe(r.src,s=t[3])||d(r,"src",s),d(r,"alt","book cover"),d(r,"class","svelte-1a99e4f"),d(l,"class","stretched-link svelte-1a99e4f"),d(l,"href",c="./#/book/"+t[0]),d(o,"class","card-title"),d(_,"class","bi bi-person"),d(f,"class","card-text"),d(i,"class","card-body"),d(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(b,v){C(b,e,v),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a),h(i,u),h(i,f),h(f,_),h(f,g),h(f,p)},p(b,[v]){v&2&&ge(a,b[1]),v&1&&c!==(c="./#/book/"+b[0])&&d(l,"href",c),v&4&&ge(p,b[2])},i:j,o:j,d(b){b&&E(e)}}}function Xc(t,e,r){let{id:s=0}=e,{title:n}=e,{author:i}=e,o=s>4?"./book-cover.png":`./${s}.jpg`;return t.$$set=l=>{"id"in l&&r(0,s=l.id),"title"in l&&r(1,n=l.title),"author"in l&&r(2,i=l.author)},[s,n,i,o]}class hs extends we{constructor(e){super(),ve(this,e,Xc,Qc,be,{id:0,title:1,author:2})}}function bi(t){let e,r,s,n,i,o,l;return{c(){e=m("div"),r=m("a"),s=m("button"),n=ie(t[3]),i=y(),o=m("i"),d(o,"class","bi bi-arrow-right"),d(s,"class","btn btn-outline-primary btn-sm"),d(r,"href",l="./#/"+t[2]),d(e,"class","align-middle align-self-center")},m(a,c){C(a,e,c),h(e,r),h(r,s),h(s,n),h(s,i),h(s,o)},p(a,c){c&8&&ge(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&d(r,"href",l)},d(a){a&&E(e)}}}function eu(t){let e,r,s,n,i,o,l,a,c,u,f=t[2]!==""&&bi(t);const _=t[5].default,g=rn(_,t,t[4],null);return{c(){e=m("section"),r=m("div"),s=m("h4"),n=m("i"),o=y(),l=ie(t[0]),a=y(),f&&f.c(),c=y(),g&&g.c(),d(n,"class",i="bi bi-"+t[1]),d(s,"class","my-3"),d(r,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){C(p,e,b),h(e,r),h(r,s),h(s,n),h(s,o),h(s,l),h(r,a),f&&f.m(r,null),h(e,c),g&&g.m(e,null),u=!0},p(p,[b]){(!u||b&2&&i!==(i="bi bi-"+p[1]))&&d(n,"class",i),(!u||b&1)&&ge(l,p[0]),p[2]!==""?f?f.p(p,b):(f=bi(p),f.c(),f.m(r,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||b&16)&&nn(g,_,p,p[4],u?sn(_,p[4],b,null):on(p[4]),null)},i(p){u||(S(g,p),u=!0)},o(p){T(g,p),u=!1},d(p){p&&E(e),f&&f.d(),g&&g.d(p)}}}function tu(t,e,r){let{$$slots:s={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return t.$$set=c=>{"title"in c&&r(0,i=c.title),"icon"in c&&r(1,o=c.icon),"link"in c&&r(2,l=c.link),"linkText"in c&&r(3,a=c.linkText),"$$scope"in c&&r(4,n=c.$$scope)},[i,o,l,a,n,s]}class Et extends we{constructor(e){super(),ve(this,e,tu,eu,be,{title:0,icon:1,link:2,linkText:3})}}function ru(t){const e=t-1;return e*e*e+1}function Je(t,{delay:e=0,duration:r=400,easing:s=tn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:i=>`opacity: ${i*n}`}}function vi(t,{delay:e=0,duration:r=400,easing:s=ru,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[f,_]=Gn(n),[g,p]=Gn(i);return{delay:e,duration:r,easing:s,css:(b,v)=>`
			transform: ${c} translate(${(1-b)*f}${_}, ${(1-b)*g}${p});
			opacity: ${a-u*v}`}}function su(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',d(e,"class","d-flex justify-content-center")},m(r,s){C(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}class Rt extends we{constructor(e){super(),ve(this,e,null,su,be,{})}}function nu(t){let e,r,s,n,i,o,l,a,c;return{c(){e=m("div"),r=m("img"),n=y(),i=m("div"),o=m("h6"),l=m("a"),a=ie(t[0]),d(r,"class","object-fit-contain rounded my-2"),d(r,"height","150"),qe(r.src,s="./default-profile.jpg")||d(r,"src",s),d(r,"alt","author"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/author/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){C(u,e,f),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&d(l,"href",c)},i:j,o:j,d(u){u&&E(e)}}}function iu(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class Ao extends we{constructor(e){super(),ve(this,e,iu,nu,be,{name:0,id:1})}}function ou(t){let e,r,s,n,i,o,l,a,c;return{c(){e=m("div"),r=m("img"),n=y(),i=m("div"),o=m("h6"),l=m("a"),a=ie(t[0]),d(r,"class","object-fit-contain rounded my-2"),d(r,"height","150"),qe(r.src,s="./default-profile.jpg")||d(r,"src",s),d(r,"alt","publisher"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/publisher/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){C(u,e,f),h(e,r),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&d(l,"href",c)},i:j,o:j,d(u){u&&E(e)}}}function au(t,e,r){let{name:s}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&r(0,s=i.name),"id"in i&&r(1,n=i.id)},[s,n]}class Io extends we{constructor(e){super(),ve(this,e,au,ou,be,{name:0,id:1})}}function lu(t){let e,r,s,n,i,o,l,a,c,u;return{c(){e=m("div"),r=m("div"),s=m("h2"),s.textContent="Error",n=y(),i=m("p"),o=ie(t[0]),l=ie(": "),a=ie(t[1]),c=y(),u=m("a"),u.textContent="Reload",d(u,"href","./#/"),d(u,"class","fw-bold"),d(r,"class","text-center"),d(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,_){C(f,e,_),h(e,r),h(r,s),h(r,n),h(r,i),h(i,o),h(i,l),h(i,a),h(r,c),h(r,u)},p(f,[_]){_&1&&ge(o,f[0]),_&2&&ge(a,f[1])},i:j,o:j,d(f){f&&E(e)}}}function cu(t,e,r){let{code:s="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&r(0,s=i.code),"message"in i&&r(1,n=i.message)},[s,n]}let bn=class extends we{constructor(e){super(),ve(this,e,cu,lu,be,{code:0,message:1})}};function wi(t,e,r){const s=t.slice();return s[9]=e[r][0],s[10]=e[r][1],s}function yi(t,e,r){const s=t.slice();return s[9]=e[r][0],s[13]=e[r][1],s}function ki(t,e,r){const s=t.slice();return s[9]=e[r][0],s[16]=e[r][1],s}function uu(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function du(t){let e,r;return e=new bn({props:{message:t[3]}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&8&&(i.message=s[3]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function hu(t){let e,r,s=Ce(Object.entries(t[0])),n=[];for(let o=0;o<s.length;o+=1)n[o]=$i(ki(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&1){s=Ce(Object.entries(o[0]));let a;for(a=0;a<s.length;a+=1){const c=ki(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=$i(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function $i(t){let e,r;return e=new hs({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&1&&(i.title=s[16].title),n&1&&(i.id=s[16].book_id),n&1&&(i.author=s[16].author),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function fu(t){let e,r,s,n;const i=[hu,du,uu],o=[];function l(a,c){return a[0]?0:a[3]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function _u(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function mu(t){let e,r;return e=new bn({props:{message:t[4]}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&16&&(i.message=s[4]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function pu(t){let e,r,s=Ce(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Si(yi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Ce(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=yi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Si(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Si(t){let e,r;return e=new Ao({props:{id:t[13].author_id,name:t[13].name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.id=s[13].author_id),n&2&&(i.name=s[13].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function gu(t){let e,r,s,n;const i=[pu,mu,_u],o=[];function l(a,c){return a[1]?0:a[4]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function bu(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function vu(t){let e,r;return e=new bn({props:{message:t[5]}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&32&&(i.message=s[5]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function wu(t){let e,r,s=Ce(Object.entries(t[2])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Oi(wi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&4){s=Ce(Object.entries(o[2]));let a;for(a=0;a<s.length;a+=1){const c=wi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Oi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Oi(t){let e,r;return e=new Io({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[10].publisher_id),n&4&&(i.name=s[10].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function yu(t){let e,r,s,n;const i=[wu,vu,bu],o=[];function l(a,c){return a[2]?0:a[5]?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function ku(t){let e,r,s,n,i,o,l,a,c,u;return r=new Zc({}),n=new Et({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[fu]},$$scope:{ctx:t}}}),o=new Et({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[gu]},$$scope:{ctx:t}}}),a=new Et({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[yu]},$$scope:{ctx:t}}}),{c(){e=m("main"),x(r.$$.fragment),s=y(),x(n.$$.fragment),i=y(),x(o.$$.fragment),l=y(),x(a.$$.fragment),d(e,"class","container mb-5")},m(f,_){C(f,e,_),N(r,e,null),h(e,s),N(n,e,null),h(e,i),N(o,e,null),h(e,l),N(a,e,null),u=!0},p(f,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:f}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:f}),o.$set(p);const b={};_&524324&&(b.$$scope={dirty:_,ctx:f}),a.$set(b)},i(f){u||(S(r.$$.fragment,f),S(n.$$.fragment,f),S(o.$$.fragment,f),S(a.$$.fragment,f),f&&(c||Le(()=>{c=Ge(e,Je,{duration:500}),c.start()})),u=!0)},o(f){T(r.$$.fragment,f),T(n.$$.fragment,f),T(o.$$.fragment,f),T(a.$$.fragment,f),u=!1},d(f){f&&E(e),U(r),U(n),U(o),U(a)}}}function $u(t,e,r){let s,n,i,o,l,a;async function c(){const{data:_,error:g}=await re.rpc("get_books");r(0,s=_),r(3,o=g?g.message:"")}async function u(){const{data:_,error:g}=await re.rpc("get_authors");r(1,n=_),r(4,l=g?g.message:"")}async function f(){const{data:_,error:g}=await re.rpc("get_publishers");r(2,i=_),r(5,a=g||"")}return c(),u(),f(),[s,n,i,o,l,a]}class Su extends we{constructor(e){super(),ve(this,e,$u,ku,be,{})}}function Ou(t){let e,r,s,n,i,o,l,a;return{c(){e=m("div"),r=m("button"),r.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=y(),n=m("div"),i=m("h4"),o=ie(t[0]),d(r,"class","btn"),cr(r,"font-size","1.5em"),d(i,"class","my-auto"),d(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){C(c,e,u),h(e,r),h(e,s),h(e,n),h(n,i),h(i,o),l||(a=V(r,"click",t[1]),l=!0)},p(c,[u]){u&1&&ge(o,c[0])},i:j,o:j,d(c){c&&E(e),l=!1,a()}}}function Tu(t,e,r){let{text:s}=e;const n=()=>sl();return t.$$set=i=>{"text"in i&&r(0,s=i.text)},[s,n]}class yt extends we{constructor(e){super(),ve(this,e,Tu,Ou,be,{text:0})}}function Ti(t,e,r){const s=t.slice();return s[25]=e[r][0],s[26]=e[r][1],s}function Du(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function Mu(t){let e,r,s,n,i,o,l,a=t[2].isbn+"",c,u,f,_,g,p=t[2].title+"",b,v,w,$=t[2].description+"",O,M,k,D,F,A,W=t[2].author.name+"",q,R,P,B,ee,H,I,K=t[2].publisher.name+"",se,Q,ne,X,he,Ae,Pe=t[2].category.name+"",Re,Fe,fe,te,ue,je=t[2].shelf_number+"",le,G=t[1]=="client"&&Di(t);return{c(){e=m("div"),r=m("div"),s=m("img"),i=y(),o=m("small"),l=ie("ISBN: "),c=ie(a),u=y(),G&&G.c(),f=y(),_=m("div"),g=m("h1"),b=ie(p),v=y(),w=m("p"),O=ie($),M=y(),k=m("p"),D=m("b"),D.textContent="Author:",F=y(),A=m("a"),q=ie(W),P=y(),B=m("p"),ee=m("b"),ee.textContent="Publisher:",H=y(),I=m("a"),se=ie(K),ne=y(),X=m("p"),he=m("b"),he.textContent="Category:",Ae=y(),Re=ie(Pe),Fe=y(),fe=m("p"),te=m("b"),te.textContent="Shelf No.:",ue=y(),le=ie(je),d(s,"id","img-cover"),d(s,"class","border p-3"),qe(s.src,n=t[12])||d(s,"src",n),d(s,"alt","book cover"),d(s,"height","300"),d(s,"width","300"),cr(s,"object-fit","contain"),d(o,"class","text-secondary"),d(r,"class","d-flex flex-column justify-content-center align-items-center gap-2"),d(g,"id","book-title"),d(g,"class","mb-2 pb-2"),d(w,"id","book-description"),d(A,"href",R="./#/author/"+t[2].author.author_id),d(I,"href",Q="./#/publisher/"+t[2].publisher.publisher_id),d(_,"id","details-container"),d(_,"class","container mt-md-0 mt-3"),d(e,"class","d-md-flex d-block")},m(Se,He){C(Se,e,He),h(e,r),h(r,s),h(r,i),h(r,o),h(o,l),h(o,c),h(r,u),G&&G.m(r,null),h(e,f),h(e,_),h(_,g),h(g,b),h(_,v),h(_,w),h(w,O),h(_,M),h(_,k),h(k,D),h(k,F),h(k,A),h(A,q),h(_,P),h(_,B),h(B,ee),h(B,H),h(B,I),h(I,se),h(_,ne),h(_,X),h(X,he),h(X,Ae),h(X,Re),h(_,Fe),h(_,fe),h(fe,te),h(fe,ue),h(fe,le)},p(Se,He){He&4&&a!==(a=Se[2].isbn+"")&&ge(c,a),Se[1]=="client"?G?G.p(Se,He):(G=Di(Se),G.c(),G.m(r,null)):G&&(G.d(1),G=null),He&4&&p!==(p=Se[2].title+"")&&ge(b,p),He&4&&$!==($=Se[2].description+"")&&ge(O,$),He&4&&W!==(W=Se[2].author.name+"")&&ge(q,W),He&4&&R!==(R="./#/author/"+Se[2].author.author_id)&&d(A,"href",R),He&4&&K!==(K=Se[2].publisher.name+"")&&ge(se,K),He&4&&Q!==(Q="./#/publisher/"+Se[2].publisher.publisher_id)&&d(I,"href",Q),He&4&&Pe!==(Pe=Se[2].category.name+"")&&ge(Re,Pe),He&4&&je!==(je=Se[2].shelf_number+"")&&ge(le,je)},i:j,o:j,d(Se){Se&&E(e),G&&G.d()}}}function Di(t){let e;function r(i,o){return i[4]?Ru:i[0]?Pu:i[5]==0?Cu:Eu}let s=r(t),n=s(t);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),C(i,e,o)},p(i,o){s===(s=r(i))&&n?n.p(i,o):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&E(e),n.d(i)}}}function Eu(t){let e,r,s;return{c(){e=m("button"),e.textContent="Reserve",e.disabled=!1,d(e,"class","btn btn-primary w-50")},m(n,i){C(n,e,i),r||(s=V(e,"click",t[10]),r=!0)},p:j,d(n){n&&E(e),r=!1,s()}}}function Cu(t){let e;return{c(){e=m("button"),e.textContent="Unavailable",e.disabled=!0,d(e,"class","btn btn-secondary w-50")},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function Pu(t){let e,r,s,n,i,o,l;return{c(){e=m("button"),r=m("i"),s=y(),n=ie(t[7]),d(r,"class","bi bi-x-circle"),d(e,"class",i="btn "+t[6]+" w-75")},m(a,c){C(a,e,c),h(e,r),h(e,s),h(e,n),o||(l=[V(e,"mouseenter",t[14]),V(e,"mouseleave",t[15]),V(e,"click",t[11])],o=!0)},p(a,c){c&128&&ge(n,a[7]),c&64&&i!==(i="btn "+a[6]+" w-75")&&d(e,"class",i)},d(a){a&&E(e),o=!1,$e(l)}}}function Ru(t){let e,r,s,n;return{c(){e=m("button"),r=ie("Borrowed (#"),s=ie(t[4]),n=ie(")"),d(e,"class","btn btn-secondary w-75")},m(i,o){C(i,e,o),h(e,r),h(e,s),h(e,n)},p(i,o){o&16&&ge(s,i[4])},d(i){i&&E(e)}}}function Mi(t){let e,r;return e=new Et({props:{title:"Status",icon:"journal",$$slots:{default:[Nu]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&536870920&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function ju(t){return{c:j,m:j,p:j,d:j}}function Au(t){let e;function r(i,o){return i[24].length<=0?Yu:Iu}let n=r(t)(t);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),C(i,e,o)},p(i,o){n.p(i,o)},d(i){i&&E(e),n.d(i)}}}function Iu(t){let e,r,s,n,i=Ce(Object.entries(t[24])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Ei(Ti(t,i,l));return{c(){e=m("table"),r=m("thead"),r.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',s=y(),n=m("tbody");for(let l=0;l<o.length;l+=1)o[l].c();d(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){C(l,e,a),h(e,r),h(e,s),h(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a&256){i=Ce(Object.entries(l[24]));let c;for(c=0;c<i.length;c+=1){const u=Ti(l,i,c);o[c]?o[c].p(u,a):(o[c]=Ei(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&E(e),Xe(o,l)}}}function Yu(t){let e;return{c(){e=m("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",d(e,"class","text-center my-5")},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function Ei(t){let e,r,s,n,i,o,l=t[26].status+"",a,c,u=t[26].reservation_id?`(${t[26].reservation_id})`:t[26].borrow_id?`(${t[26].borrow_id})`:"",f,_,g,p,b,v;return{c(){e=m("tr"),r=m("td"),r.textContent=`${t[26].barcode}`,s=y(),n=m("td"),n.textContent=`${t[26].status!="Available"?`${t[26].fname} ${t[26].lname}`:"--"}`,i=y(),o=m("td"),a=ie(l),c=y(),f=ie(u),_=y(),g=m("td"),p=m("a"),b=m("small"),b.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',v=y(),d(o,"class",t[26].status=="Available"?"text-bg-success":t[26].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),d(p,"href",t[26].status=="Available"?`./#/borrow?barcode=${t[26].barcode}`:t[26].status=="Reserved"?`./#/borrow?reserve_id=${t[26].reservation_id}`:"text-bg-danger"),d(p,"class","btn btn-outline-primary btn-sm")},m(w,$){C(w,e,$),h(e,r),h(e,s),h(e,n),h(e,i),h(e,o),h(o,a),h(o,c),h(o,f),h(e,_),h(e,g),h(g,p),h(p,b),h(e,v)},p:j,d(w){w&&E(e)}}}function Lu(t){return{c:j,m:j,p:j,d:j}}function Nu(t){let e,r,s,n,i,o,l,a,c,u,f={ctx:t,current:null,token:null,hasCatch:!1,pending:Lu,then:Au,catch:ju,value:24};return Vr(t[8](),f),{c(){f.block.c(),e=y(),r=m("div"),s=m("label"),s.textContent="Add Copy:",n=y(),i=m("div"),o=m("input"),l=y(),a=m("button"),a.textContent="Add",d(s,"for","copy"),d(s,"class","form=control col-auto"),d(o,"type","text"),d(o,"class","form-control"),d(o,"id","copy"),d(o,"placeholder","Barcode Number"),d(i,"class","col-4"),d(a,"class","btn btn-primary col-2"),d(r,"class","row justify-content-center align-items-center")},m(_,g){f.block.m(_,f.anchor=g),f.mount=()=>e.parentNode,f.anchor=e,C(_,e,g),C(_,r,g),h(r,s),h(r,n),h(r,i),h(i,o),J(o,t[3]),h(r,l),h(r,a),c||(u=[V(o,"input",t[16]),V(a,"click",t[9])],c=!0)},p(_,g){t=_,zr(f,t,g),g&8&&o.value!==t[3]&&J(o,t[3])},d(_){_&&(E(e),E(r)),f.block.d(_),f.token=null,f=null,c=!1,$e(u)}}}function Uu(t){let e,r,s,n,i,o,l,a,c,u,f;s=new yt({props:{text:"Book Details"}});const _=[Mu,Du],g=[];function p(v,w){return v[2]?0:1}i=p(t),o=g[i]=_[i](t);let b=t[1]=="staff"&&Mi(t);return{c(){e=m("main"),r=m("section"),x(s.$$.fragment),n=y(),o.c(),l=y(),b&&b.c(),a=y(),c=m("div"),d(c,"class","my-5"),d(e,"class","container")},m(v,w){C(v,e,w),h(e,r),N(s,r,null),h(r,n),g[i].m(r,null),h(e,l),b&&b.m(e,null),h(e,a),h(e,c),f=!0},p(v,[w]){let $=i;i=p(v),i===$?g[i].p(v,w):(Me(),T(g[$],1,1,()=>{g[$]=null}),Ee(),o=g[i],o?o.p(v,w):(o=g[i]=_[i](v),o.c()),S(o,1),o.m(r,null)),v[1]=="staff"?b?(b.p(v,w),w&2&&S(b,1)):(b=Mi(v),b.c(),S(b,1),b.m(e,a)):b&&(Me(),T(b,1,1,()=>{b=null}),Ee())},i(v){f||(S(s.$$.fragment,v),S(o),S(b),v&&(u||Le(()=>{u=Ge(e,Je,{duration:500}),u.start()})),f=!0)},o(v){T(s.$$.fragment,v),T(o),T(b),f=!1},d(v){v&&E(e),U(s),g[i].d(),b&&b.d()}}}function Ci(){return 3e6+Math.floor(Math.random()*9e3)}function xu(t,e,r){let s,n;Pt.subscribe(R=>r(1,n=R));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a;async function c(){const{data:R,error:P}=await re.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",l);console.table(R[0]),r(2,a=R[0])}Tr(c);let u;async function f(){const{data:R,error:P}=await re.rpc("get_holdings",{bookid:l});return P&&console.error(P),console.table(R),R}async function _(){const{data:R}=await re.from("library_holdings").select().eq("barcode",u);R.length==0&&(await re.from("library_holdings").insert({book_id:l,barcode:u}),f())}let g,p,b=0,v="btn-secondary";n=="client"&&(O(),p||(w(),$()));async function w(){const{data:R,error:P}=await re.rpc("isreserved",{bookid:l,studid:i});r(0,g=R)}async function $(){const{data:R,error:P}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");r(5,b=R.length)}async function O(){const{data:R,error:P}=await re.rpc("isborrowed",{bookid:l,studid:i});r(4,p=R)}async function M(){const{data:R,error:P}=await re.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(P){console.error(P);return}const{error:B}=await re.from("book_reservation").insert({reservation_id:await D(),stud_id:i,holding_id:R.holding_id});if(B){console.error(B);return}const{data:ee,error:H}=await re.from("library_holdings").update({status:"Reserved"}).eq("barcode",R.barcode).select("holding_id").single();if(H){console.error(H);return}w()}async function k(){const{data:R,error:P}=await re.from("book_reservation").update({active:!1}).eq("reservation_id",g).select().single(),{error:B}=await re.from("library_holdings").update({status:"Available"}).eq("holding_id",R.holding_id);!P||!B?(w(),$()):(console.error(P),console.error(B))}async function D(){let R=Ci();const{data:P,error:B}=await re.from("book_reservation").select().eq("reservation_id",R);return console.log(P),P.length!=0&&(R=Ci(),console.log("exists")),console.log(R),R}let F=l>4?"./book-cover.png":`./${l}.jpg`;const A=()=>{r(7,s="Cancel Reservation"),r(6,v="btn-danger")},W=()=>{r(7,s=`Reserved (#${g})`),r(6,v="btn-secondary")};function q(){u=this.value,r(3,u)}return t.$$set=R=>{"params"in R&&r(13,o=R.params)},t.$$.update=()=>{t.$$.dirty&1&&r(7,s=`Reserved (${g})`)},[g,n,a,u,p,b,v,s,f,_,M,k,F,o,A,W,q]}class Yo extends we{constructor(e){super(),ve(this,e,xu,Uu,be,{params:13})}}function Fu(t){let e,r,s,n,i,o;const l=t[3].default,a=rn(l,t,t[2],null);return{c(){e=m("div"),r=m("label"),s=ie(t[0]),n=y(),i=m("div"),a&&a.c(),d(r,"class","col-sm-4 col-md-3 col-form-label"),d(r,"for",t[1]),d(i,"class","col-sm-8 col-md-9"),d(e,"class","mb-4 row")},m(c,u){C(c,e,u),h(e,r),h(r,s),h(e,n),h(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&ge(s,c[0]),(!o||u&2)&&d(r,"for",c[1]),a&&a.p&&(!o||u&4)&&nn(a,l,c,c[2],o?sn(l,c[2],u,null):on(c[2]),null)},i(c){o||(S(a,c),o=!0)},o(c){T(a,c),o=!1},d(c){c&&E(e),a&&a.d(c)}}}function Hu(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e;return t.$$set=l=>{"label"in l&&r(0,i=l.label),"id"in l&&r(1,o=l.id),"$$scope"in l&&r(2,n=l.$$scope)},[i,o,n,s]}class Ye extends we{constructor(e){super(),ve(this,e,Hu,Fu,be,{label:0,id:1})}}function Pi(t,e,r){const s=t.slice();return s[29]=e[r][0],s[30]=e[r][1],s}function Ri(t,e,r){const s=t.slice();return s[29]=e[r][0],s[34]=e[r][1],s}function ji(t,e,r){const s=t.slice();return s[29]=e[r][0],s[38]=e[r][1],s}function Wu(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-name"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),J(e,t[4]),r||(s=V(e,"input",t[18]),r=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&J(e,n[4])},d(n){n&&E(e),r=!1,s()}}}function qu(t){let e,r,s;return{c(){e=m("textarea"),d(e,"class","form-control"),d(e,"id","book-description"),d(e,"rows","6"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),J(e,t[5]),r||(s=V(e,"input",t[19]),r=!0)},p(n,i){i[0]&32&&J(e,n[5])},d(n){n&&E(e),r=!1,s()}}}function Bu(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","book-cover"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[21](e),r||(s=V(e,"change",t[20]),r=!0)},p:j,d(n){n&&E(e),t[21](null),r=!1,s()}}}function Vu(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","categories"),d(e,"class",r="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-category"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[6]),C(l,s,a),C(l,n,a),i||(o=V(e,"input",t[23]),i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&d(e,"class",r),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function zu(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","authors"),d(e,"class",r="form-control "+t[12]),d(e,"type","text"),d(e,"id","book-author"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[7]),C(l,s,a),C(l,n,a),i||(o=V(e,"input",t[24]),i=!0)},p(l,a){a[0]&4096&&r!==(r="form-control "+l[12])&&d(e,"class",r),a[0]&128&&e.value!==l[7]&&J(e,l[7])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function Gu(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","publishers"),d(e,"class",r="form-control "+t[13]),d(e,"type","text"),d(e,"id","book-publisher"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[8]),C(l,s,a),C(l,n,a),i||(o=V(e,"input",t[25]),i=!0)},p(l,a){a[0]&8192&&r!==(r="form-control "+l[13])&&d(e,"class",r),a[0]&256&&e.value!==l[8]&&J(e,l[8])},d(l){l&&(E(e),E(s),E(n)),i=!1,o()}}}function Ju(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","number"),d(e,"id","book-shelf"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),J(e,t[9]),r||(s=V(e,"input",t[26]),r=!0)},p(n,i){i[0]&512&&ls(e.value)!==n[9]&&J(e,n[9])},d(n){n&&E(e),r=!1,s()}}}function Ku(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-isbn"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),J(e,t[10]),r||(s=V(e,"input",t[27]),r=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&J(e,n[10])},d(n){n&&E(e),r=!1,s()}}}function Zu(t){return{c:j,m:j,p:j,d:j}}function Qu(t){let e,r=Ce(Object.entries(t[37])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Ai(ji(t,r,n));return{c(){e=m("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","authors")},m(n,i){C(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&32768){r=Ce(Object.entries(n[37]));let o;for(o=0;o<r.length;o+=1){const l=ji(n,r,o);s[o]?s[o].p(l,i):(s[o]=Ai(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Xe(s,n)}}}function Ai(t){let e;return{c(){e=m("option"),e.__value=t[38].name,J(e,e.__value)},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function Xu(t){return{c:j,m:j,p:j,d:j}}function ed(t){return{c:j,m:j,p:j,d:j}}function td(t){let e,r=Ce(Object.entries(t[33])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Ii(Ri(t,r,n));return{c(){e=m("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","publishers")},m(n,i){C(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&65536){r=Ce(Object.entries(n[33]));let o;for(o=0;o<r.length;o+=1){const l=Ri(n,r,o);s[o]?s[o].p(l,i):(s[o]=Ii(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Xe(s,n)}}}function Ii(t){let e;return{c(){e=m("option"),e.__value=t[34].name,J(e,e.__value)},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function rd(t){return{c:j,m:j,p:j,d:j}}function sd(t){return{c:j,m:j,p:j,d:j}}function nd(t){let e,r=Ce(Object.entries(t[28])),s=[];for(let n=0;n<r.length;n+=1)s[n]=Yi(Pi(t,r,n));return{c(){e=m("datalist");for(let n=0;n<s.length;n+=1)s[n].c();d(e,"id","categories")},m(n,i){C(n,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,i){if(i[0]&131072){r=Ce(Object.entries(n[28]));let o;for(o=0;o<r.length;o+=1){const l=Pi(n,r,o);s[o]?s[o].p(l,i):(s[o]=Yi(l),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(n){n&&E(e),Xe(s,n)}}}function Yi(t){let e;return{c(){e=m("option"),e.__value=t[30].name,J(e,e.__value)},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function id(t){return{c:j,m:j,p:j,d:j}}function od(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H,I,K,se,Q,ne,X,he,Ae,Pe,Re,Fe,fe;r=new yt({props:{text:"Add Book"}}),o=new Ye({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Wu]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Book Description:",id:"book-description",$$slots:{default:[qu]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Bu]},$$scope:{ctx:t}}}),F=new Ye({props:{label:"Category:",id:"book-category",$$slots:{default:[Vu]},$$scope:{ctx:t}}}),W=new Ye({props:{label:"Author: ",id:"book-author",$$slots:{default:[zu]},$$scope:{ctx:t}}}),R=new Ye({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Gu]},$$scope:{ctx:t}}}),B=new Ye({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Ju]},$$scope:{ctx:t}}}),H=new Ye({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Ku]},$$scope:{ctx:t}}});let te={ctx:t,current:null,token:null,hasCatch:!1,pending:Xu,then:Qu,catch:Zu,value:37};Vr(t[15](),te);let ue={ctx:t,current:null,token:null,hasCatch:!1,pending:rd,then:td,catch:ed,value:33};Vr(t[16](),ue);let je={ctx:t,current:null,token:null,hasCatch:!1,pending:id,then:nd,catch:sd,value:28};return Vr(t[17](),je),{c(){e=m("section"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),_=m("div"),g=m("label"),g.textContent="Preview:",p=y(),b=m("div"),v=m("img"),$=y(),O=m("button"),O.textContent="Remove",k=y(),D=m("div"),x(F.$$.fragment),A=y(),x(W.$$.fragment),q=y(),x(R.$$.fragment),P=y(),x(B.$$.fragment),ee=y(),x(H.$$.fragment),I=y(),K=m("div"),se=m("button"),se.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',Q=y(),ne=m("a"),ne.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',X=y(),te.block.c(),he=y(),ue.block.c(),Ae=y(),je.block.c(),d(g,"for","cover-preview"),d(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),qe(v.src,w=t[3])||d(v,"src",w),d(v,"alt","Preview"),d(v,"id","cover-preview"),d(v,"height","150"),d(O,"class","btn btn-sm btn-danger"),d(b,"class","col-sm-8 col-md-9"),d(b,"id","preview-div"),d(_,"class",M="my-3 row "+t[2]),d(i,"class","col-sm-12 col-lg-6"),d(D,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-center"),d(se,"class","btn btn-success"),d(ne,"href","./#/"),d(K,"class","my-3"),d(e,"class","my-1 container")},m(le,G){C(le,e,G),N(r,e,null),h(e,s),h(e,n),h(n,i),N(o,i,null),h(i,l),N(a,i,null),h(i,c),N(u,i,null),h(i,f),h(i,_),h(_,g),h(_,p),h(_,b),h(b,v),h(b,$),h(b,O),h(n,k),h(n,D),N(F,D,null),h(D,A),N(W,D,null),h(D,q),N(R,D,null),h(D,P),N(B,D,null),h(D,ee),N(H,D,null),h(e,I),h(e,K),h(K,se),h(K,Q),h(K,ne),h(e,X),te.block.m(e,te.anchor=null),te.mount=()=>e,te.anchor=he,h(e,he),ue.block.m(e,ue.anchor=null),ue.mount=()=>e,ue.anchor=Ae,h(e,Ae),je.block.m(e,je.anchor=null),je.mount=()=>e,je.anchor=null,Re=!0,Fe||(fe=[V(O,"click",t[22]),V(se,"click",t[14])],Fe=!0)},p(le,G){t=le;const Se={};G[0]&16|G[1]&1024&&(Se.$$scope={dirty:G,ctx:t}),o.$set(Se);const He={};G[0]&32|G[1]&1024&&(He.$$scope={dirty:G,ctx:t}),a.$set(He);const Fn={};G[0]&3|G[1]&1024&&(Fn.$$scope={dirty:G,ctx:t}),u.$set(Fn),(!Re||G[0]&8&&!qe(v.src,w=t[3]))&&d(v,"src",w),(!Re||G[0]&4&&M!==(M="my-3 row "+t[2]))&&d(_,"class",M);const Hn={};G[0]&2112|G[1]&1024&&(Hn.$$scope={dirty:G,ctx:t}),F.$set(Hn);const Wn={};G[0]&4224|G[1]&1024&&(Wn.$$scope={dirty:G,ctx:t}),W.$set(Wn);const qn={};G[0]&8448|G[1]&1024&&(qn.$$scope={dirty:G,ctx:t}),R.$set(qn);const Bn={};G[0]&512|G[1]&1024&&(Bn.$$scope={dirty:G,ctx:t}),B.$set(Bn);const Vn={};G[0]&1024|G[1]&1024&&(Vn.$$scope={dirty:G,ctx:t}),H.$set(Vn),zr(te,t,G),zr(ue,t,G),zr(je,t,G)},i(le){Re||(S(r.$$.fragment,le),S(o.$$.fragment,le),S(a.$$.fragment,le),S(u.$$.fragment,le),S(F.$$.fragment,le),S(W.$$.fragment,le),S(R.$$.fragment,le),S(B.$$.fragment,le),S(H.$$.fragment,le),le&&(Pe||Le(()=>{Pe=Ge(e,Je,{duration:500}),Pe.start()})),Re=!0)},o(le){T(r.$$.fragment,le),T(o.$$.fragment,le),T(a.$$.fragment,le),T(u.$$.fragment,le),T(F.$$.fragment,le),T(W.$$.fragment,le),T(R.$$.fragment,le),T(B.$$.fragment,le),T(H.$$.fragment,le),Re=!1},d(le){le&&E(e),U(r),U(o),U(a),U(u),U(F),U(W),U(R),U(B),U(H),te.block.d(),te.token=null,te=null,ue.block.d(),ue.token=null,ue=null,je.block.d(),je.token=null,je=null,Fe=!1,$e(fe)}}}function ad(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,_,g,p,b,v;async function w(){const{data:H,error:I}=await re.from("author").select("author_id").eq("name",u).single(),{data:K,error:se}=await re.from("publisher").select("publisher_id").eq("name",f).single(),{data:Q,error:ne}=await re.from("category").select("category_id").eq("name",c).single();let X=!0;if((I||!H)&&(r(12,b="is-invalid"),X=!1),(se||!K)&&(r(13,v="is-invalid"),X=!1),(ne||!Q)&&(r(11,p="is-invalid"),X=!1),!X)return;const{error:he}=await re.from("books").insert({title:l,description:a,category_id:Q.category_id,author_id:H.author_id,publisher_id:K.publisher_id,shelf_number:_,isbn:g});he?console.error(he):alert(`Successfully Added ${l}!`)}async function $(){const{data:H,error:I}=await re.from("author").select("name").order("name",{ascending:!0});return H}async function O(){const{data:H,error:I}=await re.from("publisher").select("name").order("name",{ascending:!0});return H}async function M(){const{data:H,error:I}=await re.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return H}function k(){l=this.value,r(4,l)}function D(){a=this.value,r(5,a)}function F(){s=this.files,r(0,s)}function A(H){or[H?"unshift":"push"](()=>{n=H,r(1,n)})}const W=()=>{r(1,n.value="",n),r(0,s="")};function q(){c=this.value,r(6,c)}function R(){u=this.value,r(7,u)}function P(){f=this.value,r(8,f)}function B(){_=ls(this.value),r(9,_)}function ee(){g=this.value,r(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(s&&s[0]){console.log(s),r(2,i="");const H=URL.createObjectURL(s[0]);r(3,o=H)}else console.log(s),r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee]}class ld extends we{constructor(e){super(),ve(this,e,ad,od,be,{},null,[-1,-1])}}function Li(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function cd(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function ud(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,u,f,_=t[0].email+"",g,p;function b($,O){return $[0].bio==null?hd:dd}let v=b(t),w=v(t);return{c(){e=m("div"),r=m("h1"),n=ie(s),i=y(),o=m("p"),w.c(),l=y(),a=m("p"),c=m("b"),c.textContent="Website:",u=y(),f=m("a"),g=ie(_),d(r,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="mailto:"+t[0].email),d(e,"class","container")},m($,O){C($,e,O),h(e,r),h(r,n),h(e,i),h(e,o),w.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&s!==(s=$[0].name+"")&&ge(n,s),v===(v=b($))&&w?w.p($,O):(w.d(1),w=v($),w&&(w.c(),w.m(o,null))),O&1&&_!==(_=$[0].email+"")&&ge(g,_),O&1&&p!==(p="mailto:"+$[0].email)&&d(f,"href",p)},i:j,o:j,d($){$&&E(e),w.d()}}}function dd(t){let e=t[0].bio+"",r;return{c(){r=ie(e)},m(s,n){C(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&ge(r,e)},d(s){s&&E(r)}}}function hd(t){let e;return{c(){e=m("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function fd(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function _d(t){let e,r,s=Ce(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ni(Li(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Ce(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Li(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Ni(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Ni(t){let e,r;return e=new hs({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].publisher.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function md(t){let e,r,s,n;const i=[_d,fd],o=[];function l(a,c){return a[1]?0:1}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r?r.p(a,c):(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function pd(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b;s=new yt({props:{text:"Author Details"}});const v=[ud,cd],w=[];function $(O,M){return O[0]?0:1}return u=$(t),f=w[u]=v[u](t),g=new Et({props:{title:"Books",icon:"journal",$$slots:{default:[md]},$$scope:{ctx:t}}}),{c(){e=m("main"),r=m("section"),x(s.$$.fragment),n=y(),i=m("div"),o=m("div"),l=m("img"),c=y(),f.c(),_=y(),x(g.$$.fragment),d(l,"class","border p-3"),qe(l.src,a=gd)||d(l,"src",a),d(l,"alt","author"),d(l,"height","300"),d(l,"width","300"),cr(l,"object-fit","contain"),d(o,"class","d-flex justify-content-center my-1"),d(i,"class","d-md-flex d-block"),d(e,"class","container")},m(O,M){C(O,e,M),h(e,r),N(s,r,null),h(r,n),h(r,i),h(i,o),h(o,l),h(i,c),w[u].m(i,null),h(e,_),N(g,e,null),b=!0},p(O,[M]){let k=u;u=$(O),u===k?w[u].p(O,M):(Me(),T(w[k],1,1,()=>{w[k]=null}),Ee(),f=w[u],f?f.p(O,M):(f=w[u]=v[u](O),f.c()),S(f,1),f.m(i,null));const D={};M&514&&(D.$$scope={dirty:M,ctx:O}),g.$set(D)},i(O){b||(S(s.$$.fragment,O),S(f),S(g.$$.fragment,O),O&&(p||Le(()=>{p=Ge(e,Je,{duration:500}),p.start()})),b=!0)},o(O){T(s.$$.fragment,O),T(f),T(g.$$.fragment,O),b=!1},d(O){O&&E(e),U(s),w[u].d(),U(g)}}}let gd="./default-profile.jpg";function bd(t,e,r){let{params:s}=e,n=s.authorID,i,o;async function l(){const{data:a,error:c}=await re.from("author").select().eq("author_id",n);console.log(a),r(0,i=a[0]);const{data:u,error:f}=await re.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),r(1,o=u)}return Tr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class Lo extends we{constructor(e){super(),ve(this,e,bd,pd,be,{params:2})}}function Ui(t,e,r){const s=t.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function xi(t){let e,r,s=t[0].name+"",n,i,o,l,a,c,u,f,_=t[0].email+"",g,p;function b($,O){return $[0].bio==null?wd:vd}let v=b(t),w=v(t);return{c(){e=m("div"),r=m("h1"),n=ie(s),i=y(),o=m("p"),w.c(),l=y(),a=m("p"),c=m("b"),c.textContent="Website:",u=y(),f=m("a"),g=ie(_),d(r,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="https://"+t[0].email),d(f,"id","publisher-website"),d(e,"class","container")},m($,O){C($,e,O),h(e,r),h(r,n),h(e,i),h(e,o),w.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&s!==(s=$[0].name+"")&&ge(n,s),v===(v=b($))&&w?w.p($,O):(w.d(1),w=v($),w&&(w.c(),w.m(o,null))),O&1&&_!==(_=$[0].email+"")&&ge(g,_),O&1&&p!==(p="https://"+$[0].email)&&d(f,"href",p)},d($){$&&E(e),w.d()}}}function vd(t){let e=t[0].bio+"",r;return{c(){r=ie(e)},m(s,n){C(s,r,n)},p(s,n){n&1&&e!==(e=s[0].bio+"")&&ge(r,e)},d(s){s&&E(r)}}}function wd(t){let e;return{c(){e=m("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(r,s){C(r,e,s)},p:j,d(r){r&&E(e)}}}function yd(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function kd(t){let e,r,s=Ce(Object.entries(t[1])),n=[];for(let o=0;o<s.length;o+=1)n[o]=Fi(Ui(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=m("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&2){s=Ce(Object.entries(o[1]));let a;for(a=0;a<s.length;a+=1){const c=Ui(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Fi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Fi(t){let e,r;return e=new hs({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&2&&(i.title=s[6].title),n&2&&(i.id=s[6].book_id),n&2&&(i.author=s[6].author.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function $d(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v;r=new yt({props:{text:"Publisher Details"}});let w=t[0]&&xi(t);_=new Et({props:{title:"Books",icon:"journal"}});const $=[kd,yd],O=[];function M(k,D){return k[1]?0:1}return p=M(t),b=O[p]=$[p](t),{c(){e=m("section"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),o=m("img"),a=y(),w&&w.c(),u=y(),f=m("section"),x(_.$$.fragment),g=y(),b.c(),d(o,"id","img-cover"),d(o,"class","border p-3"),qe(o.src,l=Sd)||d(o,"src",l),d(o,"alt","publisher"),d(o,"height","300"),d(o,"width","300"),cr(o,"object-fit","contain"),d(i,"id","publisher-cover"),d(i,"class","d-flex justify-content-center my-1"),d(n,"class","d-md-flex d-block"),d(e,"class","container"),d(f,"class","container")},m(k,D){C(k,e,D),N(r,e,null),h(e,s),h(e,n),h(n,i),h(i,o),h(n,a),w&&w.m(n,null),C(k,u,D),C(k,f,D),N(_,f,null),h(f,g),O[p].m(f,null),v=!0},p(k,[D]){k[0]?w?w.p(k,D):(w=xi(k),w.c(),w.m(n,null)):w&&(w.d(1),w=null);let F=p;p=M(k),p===F?O[p].p(k,D):(Me(),T(O[F],1,1,()=>{O[F]=null}),Ee(),b=O[p],b?b.p(k,D):(b=O[p]=$[p](k),b.c()),S(b,1),b.m(f,null))},i(k){v||(S(r.$$.fragment,k),k&&(c||Le(()=>{c=Ge(e,Je,{duration:500}),c.start()})),S(_.$$.fragment,k),S(b),v=!0)},o(k){T(r.$$.fragment,k),T(_.$$.fragment,k),T(b),v=!1},d(k){k&&(E(e),E(u),E(f)),U(r),w&&w.d(),U(_),O[p].d()}}}let Sd="./default-profile.jpg";function Od(t,e,r){let{params:s}=e,n=s.publisherID,i,o;async function l(){const{data:a,error:c}=await re.from("publisher").select().eq("publisher_id",n);console.log(a),r(0,i=a[0]);const{data:u,error:f}=await re.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),r(1,o=u)}return Tr(l),t.$$set=a=>{"params"in a&&r(2,s=a.params)},[i,o,s]}class No extends we{constructor(e){super(),ve(this,e,Od,$d,be,{params:2})}}function Td(t){let e,r,s,n,i,o,l,a,c,u;return{c(){e=m("div"),r=m("div"),s=m("i"),i=y(),o=m("div"),l=m("h5"),a=m("a"),c=ie(t[0]),d(s,"class",n="bi bi-"+t[2]),d(r,"class","d-flex justify-content-center"),cr(r,"font-size","3em"),d(a,"class","stretched-link svelte-1vxezln"),d(a,"href",u="./#/"+t[1]),d(l,"class","card-title text-center my-2"),d(o,"class","card-body p-1"),d(e,"class","card col-md-3 col-5 border-1 py-2 svelte-1vxezln")},m(f,_){C(f,e,_),h(e,r),h(r,s),h(e,i),h(e,o),h(o,l),h(l,a),h(a,c)},p(f,[_]){_&4&&n!==(n="bi bi-"+f[2])&&d(s,"class",n),_&1&&ge(c,f[0]),_&2&&u!==(u="./#/"+f[1])&&d(a,"href",u)},i:j,o:j,d(f){f&&E(e)}}}function Dd(t,e,r){let{name:s}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=o=>{"name"in o&&r(0,s=o.name),"link"in o&&r(1,n=o.link),"icon"in o&&r(2,i=o.icon)},[s,n,i]}class kr extends we{constructor(e){super(),ve(this,e,Dd,Td,be,{name:0,link:1,icon:2})}}function Md(t){let e,r,s,n,i;return r=new kr({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new kr({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=m("div"),x(r.$$.fragment),s=y(),x(n.$$.fragment),d(e,"class","row justify-content-center gap-2")},m(o,l){C(o,e,l),N(r,e,null),h(e,s),N(n,e,null),i=!0},p:j,i(o){i||(S(r.$$.fragment,o),S(n.$$.fragment,o),i=!0)},o(o){T(r.$$.fragment,o),T(n.$$.fragment,o),i=!1},d(o){o&&E(e),U(r),U(n)}}}function Ed(t){let e,r,s,n,i,o,l;return r=new kr({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new kr({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new kr({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),{c(){e=m("div"),x(r.$$.fragment),s=y(),x(n.$$.fragment),i=y(),x(o.$$.fragment),d(e,"class","row justify-content-center gap-4")},m(a,c){C(a,e,c),N(r,e,null),h(e,s),N(n,e,null),h(e,i),N(o,e,null),l=!0},p:j,i(a){l||(S(r.$$.fragment,a),S(n.$$.fragment,a),S(o.$$.fragment,a),l=!0)},o(a){T(r.$$.fragment,a),T(n.$$.fragment,a),T(o.$$.fragment,a),l=!1},d(a){a&&E(e),U(r),U(n),U(o)}}}function Cd(t){let e,r,s,n,i,o;return r=new Et({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Md]},$$scope:{ctx:t}}}),n=new Et({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Ed]},$$scope:{ctx:t}}}),{c(){e=m("main"),x(r.$$.fragment),s=y(),x(n.$$.fragment),d(e,"class","container")},m(l,a){C(l,e,a),N(r,e,null),h(e,s),N(n,e,null),o=!0},p(l,[a]){const c={};a&1&&(c.$$scope={dirty:a,ctx:l}),r.$set(c);const u={};a&1&&(u.$$scope={dirty:a,ctx:l}),n.$set(u)},i(l){o||(S(r.$$.fragment,l),S(n.$$.fragment,l),l&&(i||Le(()=>{i=Ge(e,Je,{duration:500}),i.start()})),o=!0)},o(l){T(r.$$.fragment,l),T(n.$$.fragment,l),o=!1},d(l){l&&E(e),U(r),U(n)}}}class Pd extends we{constructor(e){super(),ve(this,e,null,Cd,be,{})}}function Hi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function Wi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function qi(t,e,r){const s=t.slice();return s[13]=e[r][0],s[14]=e[r][1],s}function Rd(t){let e,r;return e=new Rt({}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p:j,i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function jd(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',d(e,"class","d-flex justify-content-center")},m(r,s){C(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}function Ad(t){let e,r,s=Ce(Object.entries(t[2].publisher)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Bi(Hi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),r=!0},p(o,l){if(l&4){s=Ce(Object.entries(o[2].publisher));let a;for(a=0;a<s.length;a+=1){const c=Hi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Bi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Id(t){let e,r,s=Ce(Object.entries(t[2].author)),n=[];for(let o=0;o<s.length;o+=1)n[o]=Vi(Wi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),r=!0},p(o,l){if(l&4){s=Ce(Object.entries(o[2].author));let a;for(a=0;a<s.length;a+=1){const c=Wi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Vi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Yd(t){let e,r,s=Ce(Object.entries(t[2].books)),n=[];for(let o=0;o<s.length;o+=1)n[o]=zi(qi(t,s,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),r=!0},p(o,l){if(l&4){s=Ce(Object.entries(o[2].books));let a;for(a=0;a<s.length;a+=1){const c=qi(o,s,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=zi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=s.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);r=!1},d(o){o&&E(e),Xe(n,o)}}}function Bi(t){let e,r;return e=new Io({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].publisher_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function Vi(t){let e,r;return e=new Ao({props:{id:t[14].author_id,name:t[14].name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.id=s[14].author_id),n&4&&(i.name=s[14].name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function zi(t){let e,r;return e=new hs({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&4&&(i.title=s[14].title),n&4&&(i.id=s[14].book_id),n&4&&(i.author=s[14].author.name),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function Ld(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D;r=new yt({props:{text:"Library Holdings"}});const F=[Yd,Id,Ad,jd,Rd],A=[];function W(q,R){return q[2].books.length>0?0:q[2].author.length>0?1:q[2].publisher.length>0?2:q[0]?4:3}return w=W(t),$=A[w]=F[w](t),{c(){e=m("main"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),o=m("select"),l=m("option"),l.textContent="Books",a=m("option"),a.textContent="Author",c=m("option"),c.textContent="Publisher",u=y(),f=m("div"),_=m("input"),g=y(),p=m("button"),p.innerHTML='<i class="bi bi-search"></i>',b=y(),v=m("div"),$.c(),l.selected=!0,l.__value="books",J(l,l.__value),a.__value="author",J(a,a.__value),c.__value="publisher",J(c,c.__value),d(o,"name","searchtype"),d(o,"class","form-select"),d(i,"class","col-auto col-md-2 p-0 pe-md-4"),d(_,"class","form-control form-control-lg"),d(_,"type","search"),d(_,"placeholder","Search"),d(_,"name","Search"),d(f,"class","col-6 col-md-6 p-0"),d(p,"class","btn btn-lg btn-success col-auto col-md-1"),d(p,"type","submit"),d(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),d(v,"class","row"),d(e,"class","container")},m(q,R){C(q,e,R),N(r,e,null),h(e,s),h(e,n),h(n,i),h(i,o),h(o,l),h(o,a),h(o,c),t[5](o),h(n,u),h(n,f),h(f,_),J(_,t[1]),h(n,g),h(n,p),h(e,b),h(e,v),A[w].m(v,null),M=!0,k||(D=[V(o,"change",t[4]),V(_,"input",t[6]),V(_,"keyup",t[7]),V(p,"click",t[4])],k=!0)},p(q,[R]){R&2&&_.value!==q[1]&&J(_,q[1]);let P=w;w=W(q),w===P?A[w].p(q,R):(Me(),T(A[P],1,1,()=>{A[P]=null}),Ee(),$=A[w],$?$.p(q,R):($=A[w]=F[w](q),$.c()),S($,1),$.m(v,null))},i(q){M||(S(r.$$.fragment,q),S($),q&&(O||Le(()=>{O=Ge(e,Je,{duration:500}),O.start()})),M=!0)},o(q){T(r.$$.fragment,q),T($),M=!1},d(q){q&&E(e),U(r),t[5](null),A[w].d(),k=!1,$e(D)}}}function Nd(t,e,r){let s;oo(t,tl,v=>r(9,s=v));let n=!0;function i(){switch(s){case"/search/author":r(3,f.value="author",f);break;case"/search/publisher":r(3,f.value="publisher",f);break;default:r(3,f.value="books",f)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},f;async function _(){r(0,n=!0),a=f.value,console.log(a);const{data:v,error:w}=await re.from(a).select(o[a]).ilike(l[a],`%${c}%`);w&&console.log(w),r(2,u.books=[],u),r(2,u.author=[],u),r(2,u.publisher=[],u),r(2,u[a]=v,u),r(2,u),r(0,n=!1),console.log(n,u)}Tr(i),Tr(_);function g(v){or[v?"unshift":"push"](()=>{f=v,r(3,f)})}function p(){c=this.value,r(1,c)}return[n,c,u,f,_,g,p,v=>v.key==="Enter"&&_()]}class rr extends we{constructor(e){super(),ve(this,e,Nd,Ld,be,{})}}function Ud(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H,I,K,se,Q,ne,X,he,Ae,Pe,Re,Fe,fe,te,ue,je,le;return{c(){e=m("main"),r=m("div"),s=m("div"),n=m("h2"),n.textContent="Login",i=y(),o=m("form"),l=m("div"),a=m("span"),a.innerHTML='<ion-icon name="person-circle"></ion-icon>',c=y(),u=m("input"),f=y(),_=m("label"),_.textContent="Username",g=y(),p=m("div"),b=m("span"),b.innerHTML='<ion-icon name="lock-closed"></ion-icon>',v=y(),w=m("input"),$=y(),O=m("label"),O.textContent="Password",M=y(),k=m("button"),k.textContent="Login",D=y(),F=m("div"),A=m("p"),W=ie("Don't have an account? "),q=m("a"),q.textContent="Register",R=y(),P=m("div"),B=m("h2"),B.textContent="Registration",ee=y(),H=m("form"),I=m("div"),I.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="person-circle"></ion-icon></span> <input type="text" name="none" id="registerUsername" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerUsername" class="svelte-tapssc">Username</label>',K=y(),se=m("div"),se.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="call"></ion-icon></span> <input type="tel" id="registerNumber" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerNumber" class="svelte-tapssc">Mobile Number</label>',Q=y(),ne=m("div"),ne.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="lock-closed"></ion-icon></span> <input type="password" id="registerPassword" required="" autocomplete="off" name="none" class="svelte-tapssc"/> <label for="registerPassword" class="svelte-tapssc">Password</label>',X=y(),he=m("button"),he.textContent="Register",Ae=y(),Pe=m("div"),Re=m("p"),Fe=ie("Already have an account? "),fe=m("a"),fe.textContent="Log in",d(n,"class","svelte-tapssc"),d(a,"class","icon svelte-tapssc"),d(u,"type","text"),d(u,"id","usernameLogin"),u.required=!0,d(u,"autocomplete","off"),d(u,"class","svelte-tapssc"),d(_,"for","usernameLogin"),d(_,"class","svelte-tapssc"),d(l,"class","input-box svelte-tapssc"),d(b,"class","icon svelte-tapssc"),d(w,"type","password"),d(w,"id","passwordLogin"),w.required=!0,d(w,"autocomplete","off"),d(w,"class","svelte-tapssc"),d(O,"for","passwordLogin"),d(O,"class","svelte-tapssc"),d(p,"class","input-box svelte-tapssc"),d(k,"type","submit"),d(k,"class","bton svelte-tapssc"),d(k,"id","loginBton"),d(q,"href","./#/"),d(q,"class","register-link svelte-tapssc"),d(F,"class","login-register svelte-tapssc"),d(o,"id","form"),d(s,"class","form-box login svelte-tapssc"),d(B,"class","svelte-tapssc"),d(I,"class","input-box svelte-tapssc"),d(se,"class","input-box svelte-tapssc"),d(ne,"class","input-box svelte-tapssc"),d(he,"type","submit"),d(he,"class","bton svelte-tapssc"),d(he,"id","registerBtn"),d(fe,"href","./#/"),d(fe,"class","login-link svelte-tapssc"),d(Pe,"class","login-register svelte-tapssc"),d(H,"autocomplete","off"),d(P,"class","form-box register svelte-tapssc"),d(r,"class",te="wrapper "+t[0]+" active-popup svelte-tapssc"),d(e,"class","svelte-tapssc")},m(G,Se){C(G,e,Se),h(e,r),h(r,s),h(s,n),h(s,i),h(s,o),h(o,l),h(l,a),h(l,c),h(l,u),J(u,t[1]),h(l,f),h(l,_),h(o,g),h(o,p),h(p,b),h(p,v),h(p,w),J(w,t[2]),h(p,$),h(p,O),h(o,M),h(o,k),h(o,D),h(o,F),h(F,A),h(A,W),h(A,q),h(r,R),h(r,P),h(P,B),h(P,ee),h(P,H),h(H,I),h(H,K),h(H,se),h(H,Q),h(H,ne),h(H,X),h(H,he),h(H,Ae),h(H,Pe),h(Pe,Re),h(Re,Fe),h(Re,fe),je||(le=[V(u,"input",t[6]),V(w,"input",t[7]),V(k,"click",t[4]),V(q,"click",t[3]),V(o,"submit",Na(t[4])),V(fe,"click",t[3])],je=!0)},p(G,[Se]){Se&2&&u.value!==G[1]&&J(u,G[1]),Se&4&&w.value!==G[2]&&J(w,G[2]),Se&1&&te!==(te="wrapper "+G[0]+" active-popup svelte-tapssc")&&d(r,"class",te)},i(G){G&&(ue||Le(()=>{ue=Ge(e,Je,{duration:500}),ue.start()}))},o:j,d(G){G&&E(e),je=!1,$e(le)}}}function xd(t,e,r){document.querySelector("body").setAttribute("data-bs-theme","dark"),nl("/");function s(g){Pt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",g)}function n(g){Pt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",g)}let i=!0,o="";function l(){r(5,i=!i)}let a,c;async function u(){const{data:g,error:p}=await re.from("user_level").select("account_type, user_id").eq("username",a).eq("password",c).single();if(p){console.error(p);return}g.account_type=="student"?s(g.user_id):g.account_type=="staff"?n(g.user_id):console.error(g)}function f(){a=this.value,r(1,a)}function _(){c=this.value,r(2,c)}return t.$$.update=()=>{t.$$.dirty&32&&r(0,o=i?"":"active")},[o,a,c,l,u,i,f,_]}class Fd extends we{constructor(e){super(),ve(this,e,xd,Ud,be,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Uo;function Y(){return Uo.apply(null,arguments)}function Hd(t){Uo=t}function it(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ut(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vn(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(me(t,e))return!1;return!0}function Be(t){return t===void 0}function wt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Ir(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function xo(t,e){var r=[],s,n=t.length;for(s=0;s<n;++s)r.push(e(t[s],s));return r}function Dt(t,e){for(var r in e)me(e,r)&&(t[r]=e[r]);return me(e,"toString")&&(t.toString=e.toString),me(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ut(t,e,r,s){return ca(t,e,r,s,!0).utc()}function Wd(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function oe(t){return t._pf==null&&(t._pf=Wd()),t._pf}var zs;Array.prototype.some?zs=Array.prototype.some:zs=function(t){var e=Object(this),r=e.length>>>0,s;for(s=0;s<r;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function wn(t){var e=null,r=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=oe(t),r=zs.call(e.parsedDateParts,function(n){return n!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function fs(t){var e=ut(NaN);return t!=null?Dt(oe(e),t):oe(e).userInvalidated=!0,e}var Gi=Y.momentProperties=[],js=!1;function yn(t,e){var r,s,n,i=Gi.length;if(Be(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Be(e._i)||(t._i=e._i),Be(e._f)||(t._f=e._f),Be(e._l)||(t._l=e._l),Be(e._strict)||(t._strict=e._strict),Be(e._tzm)||(t._tzm=e._tzm),Be(e._isUTC)||(t._isUTC=e._isUTC),Be(e._offset)||(t._offset=e._offset),Be(e._pf)||(t._pf=oe(e)),Be(e._locale)||(t._locale=e._locale),i>0)for(r=0;r<i;r++)s=Gi[r],n=e[s],Be(n)||(t[s]=n);return t}function Yr(t){yn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),js===!1&&(js=!0,Y.updateOffset(this),js=!1)}function ot(t){return t instanceof Yr||t!=null&&t._isAMomentObject!=null}function Fo(t){Y.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function et(t,e){var r=!0;return Dt(function(){if(Y.deprecationHandler!=null&&Y.deprecationHandler(null,t),r){var s=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])me(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];s.push(n)}Fo(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return e.apply(this,arguments)},e)}var Ji={};function Ho(t,e){Y.deprecationHandler!=null&&Y.deprecationHandler(t,e),Ji[t]||(Fo(e),Ji[t]=!0)}Y.suppressDeprecationWarnings=!1;Y.deprecationHandler=null;function dt(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function qd(t){var e,r;for(r in t)me(t,r)&&(e=t[r],dt(e)?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Gs(t,e){var r=Dt({},t),s;for(s in e)me(e,s)&&(Ut(t[s])&&Ut(e[s])?(r[s]={},Dt(r[s],t[s]),Dt(r[s],e[s])):e[s]!=null?r[s]=e[s]:delete r[s]);for(s in t)me(t,s)&&!me(e,s)&&Ut(t[s])&&(r[s]=Dt({},r[s]));return r}function kn(t){t!=null&&this.set(t)}var Js;Object.keys?Js=Object.keys:Js=function(t){var e,r=[];for(e in t)me(t,e)&&r.push(e);return r};var Bd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Vd(t,e,r){var s=this._calendar[t]||this._calendar.sameElse;return dt(s)?s.call(e,r):s}function ct(t,e,r){var s=""+Math.abs(t),n=e-s.length,i=t>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var $n=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,As={},sr={};function Z(t,e,r,s){var n=s;typeof s=="string"&&(n=function(){return this[s]()}),t&&(sr[t]=n),e&&(sr[e[0]]=function(){return ct(n.apply(this,arguments),e[1],e[2])}),r&&(sr[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function zd(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Gd(t){var e=t.match($n),r,s;for(r=0,s=e.length;r<s;r++)sr[e[r]]?e[r]=sr[e[r]]:e[r]=zd(e[r]);return function(n){var i="",o;for(o=0;o<s;o++)i+=dt(e[o])?e[o].call(n,t):e[o];return i}}function Gr(t,e){return t.isValid()?(e=Wo(e,t.localeData()),As[e]=As[e]||Gd(e),As[e](t)):t.localeData().invalidDate()}function Wo(t,e){var r=5;function s(n){return e.longDateFormat(n)||n}for(Wr.lastIndex=0;r>=0&&Wr.test(t);)t=t.replace(Wr,s),Wr.lastIndex=0,r-=1;return t}var Jd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Kd(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match($n).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var Zd="Invalid date";function Qd(){return this._invalidDate}var Xd="%d",eh=/\d{1,2}/;function th(t){return this._ordinal.replace("%d",t)}var rh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function sh(t,e,r,s){var n=this._relativeTime[r];return dt(n)?n(t,e,r,s):n.replace(/%d/i,t)}function nh(t,e){var r=this._relativeTime[t>0?"future":"past"];return dt(r)?r(e):r.replace(/%s/i,e)}var Ki={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function tt(t){return typeof t=="string"?Ki[t]||Ki[t.toLowerCase()]:void 0}function Sn(t){var e={},r,s;for(s in t)me(t,s)&&(r=tt(s),r&&(e[r]=t[s]));return e}var ih={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function oh(t){var e=[],r;for(r in t)me(t,r)&&e.push({unit:r,priority:ih[r]});return e.sort(function(s,n){return s.priority-n.priority}),e}var qo=/\d/,Ke=/\d\d/,Bo=/\d{3}/,On=/\d{4}/,_s=/[+-]?\d{6}/,Te=/\d\d?/,Vo=/\d\d\d\d?/,zo=/\d\d\d\d\d\d?/,ms=/\d{1,3}/,Tn=/\d{1,4}/,ps=/[+-]?\d{1,6}/,dr=/\d+/,gs=/[+-]?\d+/,ah=/Z|[+-]\d\d:?\d\d/gi,bs=/Z|[+-]\d\d(?::?\d\d)?/gi,lh=/[+-]?\d+(\.\d{1,3})?/,Lr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,hr=/^[1-9]\d?/,Dn=/^([1-9]\d|\d)/,ss;ss={};function z(t,e,r){ss[t]=dt(e)?e:function(s,n){return s&&r?r:e}}function ch(t,e){return me(ss,t)?ss[t](e._strict,e._locale):new RegExp(uh(t))}function uh(t){return bt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,r,s,n,i){return r||s||n||i}))}function bt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Qe(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ce(t){var e=+t,r=0;return e!==0&&isFinite(e)&&(r=Qe(e)),r}var Ks={};function ye(t,e){var r,s=e,n;for(typeof t=="string"&&(t=[t]),wt(e)&&(s=function(i,o){o[e]=ce(i)}),n=t.length,r=0;r<n;r++)Ks[t[r]]=s}function Nr(t,e){ye(t,function(r,s,n,i){n._w=n._w||{},e(r,n._w,n,i)})}function dh(t,e,r){e!=null&&me(Ks,t)&&Ks[t](e,r._a,r,t)}function vs(t){return t%4===0&&t%100!==0||t%400===0}var xe=0,pt=1,lt=2,Ne=3,nt=4,gt=5,Nt=6,hh=7,fh=8;Z("Y",0,0,function(){var t=this.year();return t<=9999?ct(t,4):"+"+t});Z(0,["YY",2],0,function(){return this.year()%100});Z(0,["YYYY",4],0,"year");Z(0,["YYYYY",5],0,"year");Z(0,["YYYYYY",6,!0],0,"year");z("Y",gs);z("YY",Te,Ke);z("YYYY",Tn,On);z("YYYYY",ps,_s);z("YYYYYY",ps,_s);ye(["YYYYY","YYYYYY"],xe);ye("YYYY",function(t,e){e[xe]=t.length===2?Y.parseTwoDigitYear(t):ce(t)});ye("YY",function(t,e){e[xe]=Y.parseTwoDigitYear(t)});ye("Y",function(t,e){e[xe]=parseInt(t,10)});function $r(t){return vs(t)?366:365}Y.parseTwoDigitYear=function(t){return ce(t)+(ce(t)>68?1900:2e3)};var Go=fr("FullYear",!0);function _h(){return vs(this.year())}function fr(t,e){return function(r){return r!=null?(Jo(this,t,r),Y.updateOffset(this,e),this):Mr(this,t)}}function Mr(t,e){if(!t.isValid())return NaN;var r=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return s?r.getUTCSeconds():r.getSeconds();case"Minutes":return s?r.getUTCMinutes():r.getMinutes();case"Hours":return s?r.getUTCHours():r.getHours();case"Date":return s?r.getUTCDate():r.getDate();case"Day":return s?r.getUTCDay():r.getDay();case"Month":return s?r.getUTCMonth():r.getMonth();case"FullYear":return s?r.getUTCFullYear():r.getFullYear();default:return NaN}}function Jo(t,e,r){var s,n,i,o,l;if(!(!t.isValid()||isNaN(r))){switch(s=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?s.setUTCMilliseconds(r):s.setMilliseconds(r));case"Seconds":return void(n?s.setUTCSeconds(r):s.setSeconds(r));case"Minutes":return void(n?s.setUTCMinutes(r):s.setMinutes(r));case"Hours":return void(n?s.setUTCHours(r):s.setHours(r));case"Date":return void(n?s.setUTCDate(r):s.setDate(r));case"FullYear":break;default:return}i=r,o=t.month(),l=t.date(),l=l===29&&o===1&&!vs(i)?28:l,n?s.setUTCFullYear(i,o,l):s.setFullYear(i,o,l)}}function mh(t){return t=tt(t),dt(this[t])?this[t]():this}function ph(t,e){if(typeof t=="object"){t=Sn(t);var r=oh(t),s,n=r.length;for(s=0;s<n;s++)this[r[s].unit](t[r[s].unit])}else if(t=tt(t),dt(this[t]))return this[t](e);return this}function gh(t,e){return(t%e+e)%e}var Ie;Array.prototype.indexOf?Ie=Array.prototype.indexOf:Ie=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Mn(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=gh(e,12);return t+=(e-r)/12,r===1?vs(t)?29:28:31-r%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1});Z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Z("MMMM",0,0,function(t){return this.localeData().months(this,t)});z("M",Te,hr);z("MM",Te,Ke);z("MMM",function(t,e){return e.monthsShortRegex(t)});z("MMMM",function(t,e){return e.monthsRegex(t)});ye(["M","MM"],function(t,e){e[pt]=ce(t)-1});ye(["MMM","MMMM"],function(t,e,r,s){var n=r._locale.monthsParse(t,s,r._strict);n!=null?e[pt]=n:oe(r).invalidMonth=t});var bh="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ko="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,vh=Lr,wh=Lr;function yh(t,e){return t?it(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Zo).test(e)?"format":"standalone"][t.month()]:it(this._months)?this._months:this._months.standalone}function kh(t,e){return t?it(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Zo.test(e)?"format":"standalone"][t.month()]:it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function $h(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)i=ut([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(i,"").toLocaleLowerCase();return r?e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null))}function Sh(t,e,r){var s,n,i;if(this._monthsParseExact)return $h.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=ut([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(r&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!r&&this._monthsParse[s].test(t))return s}}function Qo(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=ce(e);else if(e=t.localeData().monthsParse(e),!wt(e))return t}var r=e,s=t.date();return s=s<29?s:Math.min(s,Mn(t.year(),r)),t._isUTC?t._d.setUTCMonth(r,s):t._d.setMonth(r,s),t}function Xo(t){return t!=null?(Qo(this,t),Y.updateOffset(this,!0),this):Mr(this,"Month")}function Oh(){return Mn(this.year(),this.month())}function Th(t){return this._monthsParseExact?(me(this,"_monthsRegex")||ea.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(me(this,"_monthsShortRegex")||(this._monthsShortRegex=vh),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Dh(t){return this._monthsParseExact?(me(this,"_monthsRegex")||ea.call(this),t?this._monthsStrictRegex:this._monthsRegex):(me(this,"_monthsRegex")||(this._monthsRegex=wh),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ea(){function t(a,c){return c.length-a.length}var e=[],r=[],s=[],n,i,o,l;for(n=0;n<12;n++)i=ut([2e3,n]),o=bt(this.monthsShort(i,"")),l=bt(this.months(i,"")),e.push(o),r.push(l),s.push(l),s.push(o);e.sort(t),r.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Mh(t,e,r,s,n,i,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,r,s,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,r,s,n,i,o),l}function Er(t){var e,r;return t<100&&t>=0?(r=Array.prototype.slice.call(arguments),r[0]=t+400,e=new Date(Date.UTC.apply(null,r)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ns(t,e,r){var s=7+e-r,n=(7+Er(t,0,s).getUTCDay()-e)%7;return-n+s-1}function ta(t,e,r,s,n){var i=(7+r-s)%7,o=ns(t,s,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=t-1,c=$r(a)+l):l>$r(t)?(a=t+1,c=l-$r(t)):(a=t,c=l),{year:a,dayOfYear:c}}function Cr(t,e,r){var s=ns(t.year(),e,r),n=Math.floor((t.dayOfYear()-s-1)/7)+1,i,o;return n<1?(o=t.year()-1,i=n+vt(o,e,r)):n>vt(t.year(),e,r)?(i=n-vt(t.year(),e,r),o=t.year()+1):(o=t.year(),i=n),{week:i,year:o}}function vt(t,e,r){var s=ns(t,e,r),n=ns(t+1,e,r);return($r(t)-s+n)/7}Z("w",["ww",2],"wo","week");Z("W",["WW",2],"Wo","isoWeek");z("w",Te,hr);z("ww",Te,Ke);z("W",Te,hr);z("WW",Te,Ke);Nr(["w","ww","W","WW"],function(t,e,r,s){e[s.substr(0,1)]=ce(t)});function Eh(t){return Cr(t,this._week.dow,this._week.doy).week}var Ch={dow:0,doy:6};function Ph(){return this._week.dow}function Rh(){return this._week.doy}function jh(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Ah(t){var e=Cr(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Z("d",0,"do","day");Z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Z("e",0,0,"weekday");Z("E",0,0,"isoWeekday");z("d",Te);z("e",Te);z("E",Te);z("dd",function(t,e){return e.weekdaysMinRegex(t)});z("ddd",function(t,e){return e.weekdaysShortRegex(t)});z("dddd",function(t,e){return e.weekdaysRegex(t)});Nr(["dd","ddd","dddd"],function(t,e,r,s){var n=r._locale.weekdaysParse(t,s,r._strict);n!=null?e.d=n:oe(r).invalidWeekday=t});Nr(["d","e","E"],function(t,e,r,s){e[s]=ce(t)});function Ih(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Yh(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function En(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Lh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ra="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Nh="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Uh=Lr,xh=Lr,Fh=Lr;function Hh(t,e){var r=it(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?En(r,this._week.dow):t?r[t.day()]:r}function Wh(t){return t===!0?En(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function qh(t){return t===!0?En(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Bh(t,e,r){var s,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)i=ut([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(i,"").toLocaleLowerCase();return r?e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1||(n=Ie.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ie.call(this._minWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Vh(t,e,r){var s,n,i;if(this._weekdaysParseExact)return Bh.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=ut([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(r&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(r&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!r&&this._weekdaysParse[s].test(t))return s}}function zh(t){if(!this.isValid())return t!=null?this:NaN;var e=Mr(this,"Day");return t!=null?(t=Ih(t,this.localeData()),this.add(t-e,"d")):e}function Gh(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Jh(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Yh(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Kh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(me(this,"_weekdaysRegex")||(this._weekdaysRegex=Uh),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Zh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(me(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=xh),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(me(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fh),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Cn(){function t(u,f){return f.length-u.length}var e=[],r=[],s=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ut([2e3,1]).day(i),l=bt(this.weekdaysMin(o,"")),a=bt(this.weekdaysShort(o,"")),c=bt(this.weekdays(o,"")),e.push(l),r.push(a),s.push(c),n.push(l),n.push(a),n.push(c);e.sort(t),r.sort(t),s.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Pn(){return this.hours()%12||12}function Xh(){return this.hours()||24}Z("H",["HH",2],0,"hour");Z("h",["hh",2],0,Pn);Z("k",["kk",2],0,Xh);Z("hmm",0,0,function(){return""+Pn.apply(this)+ct(this.minutes(),2)});Z("hmmss",0,0,function(){return""+Pn.apply(this)+ct(this.minutes(),2)+ct(this.seconds(),2)});Z("Hmm",0,0,function(){return""+this.hours()+ct(this.minutes(),2)});Z("Hmmss",0,0,function(){return""+this.hours()+ct(this.minutes(),2)+ct(this.seconds(),2)});function sa(t,e){Z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}sa("a",!0);sa("A",!1);function na(t,e){return e._meridiemParse}z("a",na);z("A",na);z("H",Te,Dn);z("h",Te,hr);z("k",Te,hr);z("HH",Te,Ke);z("hh",Te,Ke);z("kk",Te,Ke);z("hmm",Vo);z("hmmss",zo);z("Hmm",Vo);z("Hmmss",zo);ye(["H","HH"],Ne);ye(["k","kk"],function(t,e,r){var s=ce(t);e[Ne]=s===24?0:s});ye(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t});ye(["h","hh"],function(t,e,r){e[Ne]=ce(t),oe(r).bigHour=!0});ye("hmm",function(t,e,r){var s=t.length-2;e[Ne]=ce(t.substr(0,s)),e[nt]=ce(t.substr(s)),oe(r).bigHour=!0});ye("hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ne]=ce(t.substr(0,s)),e[nt]=ce(t.substr(s,2)),e[gt]=ce(t.substr(n)),oe(r).bigHour=!0});ye("Hmm",function(t,e,r){var s=t.length-2;e[Ne]=ce(t.substr(0,s)),e[nt]=ce(t.substr(s))});ye("Hmmss",function(t,e,r){var s=t.length-4,n=t.length-2;e[Ne]=ce(t.substr(0,s)),e[nt]=ce(t.substr(s,2)),e[gt]=ce(t.substr(n))});function ef(t){return(t+"").toLowerCase().charAt(0)==="p"}var tf=/[ap]\.?m?\.?/i,rf=fr("Hours",!0);function sf(t,e,r){return t>11?r?"pm":"PM":r?"am":"AM"}var ia={calendar:Bd,longDateFormat:Jd,invalidDate:Zd,ordinal:Xd,dayOfMonthOrdinalParse:eh,relativeTime:rh,months:bh,monthsShort:Ko,week:Ch,weekdays:Lh,weekdaysMin:Nh,weekdaysShort:ra,meridiemParse:tf},De={},pr={},Pr;function nf(t,e){var r,s=Math.min(t.length,e.length);for(r=0;r<s;r+=1)if(t[r]!==e[r])return r;return s}function Zi(t){return t&&t.toLowerCase().replace("_","-")}function of(t){for(var e=0,r,s,n,i;e<t.length;){for(i=Zi(t[e]).split("-"),r=i.length,s=Zi(t[e+1]),s=s?s.split("-"):null;r>0;){if(n=ws(i.slice(0,r).join("-")),n)return n;if(s&&s.length>=r&&nf(i,s)>=r-1)break;r--}e++}return Pr}function af(t){return!!(t&&t.match("^[^/\\\\]*$"))}function ws(t){var e=null,r;if(De[t]===void 0&&typeof Zr<"u"&&Zr&&Zr.exports&&af(t))try{e=Pr._abbr,r=require,r("./locale/"+t),Ct(e)}catch{De[t]=null}return De[t]}function Ct(t,e){var r;return t&&(Be(e)?r=kt(t):r=Rn(t,e),r?Pr=r:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Pr._abbr}function Rn(t,e){if(e!==null){var r,s=ia;if(e.abbr=t,De[t]!=null)Ho("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=De[t]._config;else if(e.parentLocale!=null)if(De[e.parentLocale]!=null)s=De[e.parentLocale]._config;else if(r=ws(e.parentLocale),r!=null)s=r._config;else return pr[e.parentLocale]||(pr[e.parentLocale]=[]),pr[e.parentLocale].push({name:t,config:e}),null;return De[t]=new kn(Gs(s,e)),pr[t]&&pr[t].forEach(function(n){Rn(n.name,n.config)}),Ct(t),De[t]}else return delete De[t],null}function lf(t,e){if(e!=null){var r,s,n=ia;De[t]!=null&&De[t].parentLocale!=null?De[t].set(Gs(De[t]._config,e)):(s=ws(t),s!=null&&(n=s._config),e=Gs(n,e),s==null&&(e.abbr=t),r=new kn(e),r.parentLocale=De[t],De[t]=r),Ct(t)}else De[t]!=null&&(De[t].parentLocale!=null?(De[t]=De[t].parentLocale,t===Ct()&&Ct(t)):De[t]!=null&&delete De[t]);return De[t]}function kt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Pr;if(!it(t)){if(e=ws(t),e)return e;t=[t]}return of(t)}function cf(){return Js(De)}function jn(t){var e,r=t._a;return r&&oe(t).overflow===-2&&(e=r[pt]<0||r[pt]>11?pt:r[lt]<1||r[lt]>Mn(r[xe],r[pt])?lt:r[Ne]<0||r[Ne]>24||r[Ne]===24&&(r[nt]!==0||r[gt]!==0||r[Nt]!==0)?Ne:r[nt]<0||r[nt]>59?nt:r[gt]<0||r[gt]>59?gt:r[Nt]<0||r[Nt]>999?Nt:-1,oe(t)._overflowDayOfYear&&(e<xe||e>lt)&&(e=lt),oe(t)._overflowWeeks&&e===-1&&(e=hh),oe(t)._overflowWeekday&&e===-1&&(e=fh),oe(t).overflow=e),t}var uf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,df=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hf=/Z|[+-]\d\d(?::?\d\d)?/,qr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Is=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ff=/^\/?Date\((-?\d+)/i,_f=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mf={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function oa(t){var e,r,s=t._i,n=uf.exec(s)||df.exec(s),i,o,l,a,c=qr.length,u=Is.length;if(n){for(oe(t).iso=!0,e=0,r=c;e<r;e++)if(qr[e][1].exec(n[1])){o=qr[e][0],i=qr[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(n[3]){for(e=0,r=u;e<r;e++)if(Is[e][1].exec(n[3])){l=(n[2]||" ")+Is[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(hf.exec(n[4]))a="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(a||""),In(t)}else t._isValid=!1}function pf(t,e,r,s,n,i){var o=[gf(t),Ko.indexOf(e),parseInt(r,10),parseInt(s,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function gf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function bf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vf(t,e,r){if(t){var s=ra.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(s!==n)return oe(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function wf(t,e,r){if(t)return mf[t];if(e)return 0;var s=parseInt(r,10),n=s%100,i=(s-n)/100;return i*60+n}function aa(t){var e=_f.exec(bf(t._i)),r;if(e){if(r=pf(e[4],e[3],e[2],e[5],e[6],e[7]),!vf(e[1],r,t))return;t._a=r,t._tzm=wf(e[8],e[9],e[10]),t._d=Er.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),oe(t).rfc2822=!0}else t._isValid=!1}function yf(t){var e=ff.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(oa(t),t._isValid===!1)delete t._isValid;else return;if(aa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Y.createFromInputFallback(t)}Y.createFromInputFallback=et("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Kt(t,e,r){return t??e??r}function kf(t){var e=new Date(Y.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function An(t){var e,r,s=[],n,i,o;if(!t._d){for(n=kf(t),t._w&&t._a[lt]==null&&t._a[pt]==null&&$f(t),t._dayOfYear!=null&&(o=Kt(t._a[xe],n[xe]),(t._dayOfYear>$r(o)||t._dayOfYear===0)&&(oe(t)._overflowDayOfYear=!0),r=Er(o,0,t._dayOfYear),t._a[pt]=r.getUTCMonth(),t._a[lt]=r.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ne]===24&&t._a[nt]===0&&t._a[gt]===0&&t._a[Nt]===0&&(t._nextDay=!0,t._a[Ne]=0),t._d=(t._useUTC?Er:Mh).apply(null,s),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ne]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(oe(t).weekdayMismatch=!0)}}function $f(t){var e,r,s,n,i,o,l,a,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,r=Kt(e.GG,t._a[xe],Cr(Oe(),1,4).year),s=Kt(e.W,1),n=Kt(e.E,1),(n<1||n>7)&&(a=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Cr(Oe(),i,o),r=Kt(e.gg,t._a[xe],c.year),s=Kt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),s<1||s>vt(r,i,o)?oe(t)._overflowWeeks=!0:a!=null?oe(t)._overflowWeekday=!0:(l=ta(r,s,n,i,o),t._a[xe]=l.year,t._dayOfYear=l.dayOfYear)}Y.ISO_8601=function(){};Y.RFC_2822=function(){};function In(t){if(t._f===Y.ISO_8601){oa(t);return}if(t._f===Y.RFC_2822){aa(t);return}t._a=[],oe(t).empty=!0;var e=""+t._i,r,s,n,i,o,l=e.length,a=0,c,u;for(n=Wo(t._f,t._locale).match($n)||[],u=n.length,r=0;r<u;r++)i=n[r],s=(e.match(ch(i,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&oe(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),a+=s.length),sr[i]?(s?oe(t).empty=!1:oe(t).unusedTokens.push(i),dh(i,s,t)):t._strict&&!s&&oe(t).unusedTokens.push(i);oe(t).charsLeftOver=l-a,e.length>0&&oe(t).unusedInput.push(e),t._a[Ne]<=12&&oe(t).bigHour===!0&&t._a[Ne]>0&&(oe(t).bigHour=void 0),oe(t).parsedDateParts=t._a.slice(0),oe(t).meridiem=t._meridiem,t._a[Ne]=Sf(t._locale,t._a[Ne],t._meridiem),c=oe(t).era,c!==null&&(t._a[xe]=t._locale.erasConvertYear(c,t._a[xe])),An(t),jn(t)}function Sf(t,e,r){var s;return r==null?e:t.meridiemHour!=null?t.meridiemHour(e,r):(t.isPM!=null&&(s=t.isPM(r),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function Of(t){var e,r,s,n,i,o,l=!1,a=t._f.length;if(a===0){oe(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=yn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],In(e),wn(e)&&(o=!0),i+=oe(e).charsLeftOver,i+=oe(e).unusedTokens.length*10,oe(e).score=i,l?i<s&&(s=i,r=e):(s==null||i<s||o)&&(s=i,r=e,o&&(l=!0));Dt(t,r||e)}function Tf(t){if(!t._d){var e=Sn(t._i),r=e.day===void 0?e.date:e.day;t._a=xo([e.year,e.month,r,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),An(t)}}function Df(t){var e=new Yr(jn(la(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function la(t){var e=t._i,r=t._f;return t._locale=t._locale||kt(t._l),e===null||r===void 0&&e===""?fs({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ot(e)?new Yr(jn(e)):(Ir(e)?t._d=e:it(r)?Of(t):r?In(t):Mf(t),wn(t)||(t._d=null),t))}function Mf(t){var e=t._i;Be(e)?t._d=new Date(Y.now()):Ir(e)?t._d=new Date(e.valueOf()):typeof e=="string"?yf(t):it(e)?(t._a=xo(e.slice(0),function(r){return parseInt(r,10)}),An(t)):Ut(e)?Tf(t):wt(e)?t._d=new Date(e):Y.createFromInputFallback(t)}function ca(t,e,r,s,n){var i={};return(e===!0||e===!1)&&(s=e,e=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(Ut(t)&&vn(t)||it(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=r,i._i=t,i._f=e,i._strict=s,Df(i)}function Oe(t,e,r,s){return ca(t,e,r,s,!1)}var Ef=et("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:fs()}),Cf=et("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:fs()});function ua(t,e){var r,s;if(e.length===1&&it(e[0])&&(e=e[0]),!e.length)return Oe();for(r=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](r))&&(r=e[s]);return r}function Pf(){var t=[].slice.call(arguments,0);return ua("isBefore",t)}function Rf(){var t=[].slice.call(arguments,0);return ua("isAfter",t)}var jf=function(){return Date.now?Date.now():+new Date},gr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Af(t){var e,r=!1,s,n=gr.length;for(e in t)if(me(t,e)&&!(Ie.call(gr,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<n;++s)if(t[gr[s]]){if(r)return!1;parseFloat(t[gr[s]])!==ce(t[gr[s]])&&(r=!0)}return!0}function If(){return this._isValid}function Yf(){return at(NaN)}function ys(t){var e=Sn(t),r=e.year||0,s=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Af(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+s*3+r*12,this._data={},this._locale=kt(),this._bubble()}function Jr(t){return t instanceof ys}function Zs(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Lf(t,e,r){var s=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,o;for(o=0;o<s;o++)ce(t[o])!==ce(e[o])&&i++;return i+n}function da(t,e){Z(t,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+ct(~~(r/60),2)+e+ct(~~r%60,2)})}da("Z",":");da("ZZ","");z("Z",bs);z("ZZ",bs);ye(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=Yn(bs,t)});var Nf=/([\+\-]|\d\d)/gi;function Yn(t,e){var r=(e||"").match(t),s,n,i;return r===null?null:(s=r[r.length-1]||[],n=(s+"").match(Nf)||["-",0,0],i=+(n[1]*60)+ce(n[2]),i===0?0:n[0]==="+"?i:-i)}function Ln(t,e){var r,s;return e._isUTC?(r=e.clone(),s=(ot(t)||Ir(t)?t.valueOf():Oe(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),Y.updateOffset(r,!1),r):Oe(t).local()}function Qs(t){return-Math.round(t._d.getTimezoneOffset())}Y.updateOffset=function(){};function Uf(t,e,r){var s=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Yn(bs,t),t===null)return this}else Math.abs(t)<16&&!r&&(t=t*60);return!this._isUTC&&e&&(n=Qs(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),s!==t&&(!e||this._changeInProgress?_a(this,at(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Y.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:Qs(this)}function xf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ff(t){return this.utcOffset(0,t)}function Hf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Qs(this),"m")),this}function Wf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Yn(ah,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function qf(t){return this.isValid()?(t=t?Oe(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Bf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Vf(){if(!Be(this._isDSTShifted))return this._isDSTShifted;var t={},e;return yn(t,this),t=la(t),t._a?(e=t._isUTC?ut(t._a):Oe(t._a),this._isDSTShifted=this.isValid()&&Lf(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function zf(){return this.isValid()?!this._isUTC:!1}function Gf(){return this.isValid()?this._isUTC:!1}function ha(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Jf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Kf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function at(t,e){var r=t,s=null,n,i,o;return Jr(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:wt(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(s=Jf.exec(t))?(n=s[1]==="-"?-1:1,r={y:0,d:ce(s[lt])*n,h:ce(s[Ne])*n,m:ce(s[nt])*n,s:ce(s[gt])*n,ms:ce(Zs(s[Nt]*1e3))*n}):(s=Kf.exec(t))?(n=s[1]==="-"?-1:1,r={y:It(s[2],n),M:It(s[3],n),w:It(s[4],n),d:It(s[5],n),h:It(s[6],n),m:It(s[7],n),s:It(s[8],n)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=Zf(Oe(r.from),Oe(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new ys(r),Jr(t)&&me(t,"_locale")&&(i._locale=t._locale),Jr(t)&&me(t,"_isValid")&&(i._isValid=t._isValid),i}at.fn=ys.prototype;at.invalid=Yf;function It(t,e){var r=t&&parseFloat(t.replace(",","."));return(isNaN(r)?0:r)*e}function Qi(t,e){var r={};return r.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function Zf(t,e){var r;return t.isValid()&&e.isValid()?(e=Ln(e,t),t.isBefore(e)?r=Qi(t,e):(r=Qi(e,t),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function fa(t,e){return function(r,s){var n,i;return s!==null&&!isNaN(+s)&&(Ho(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=s,s=i),n=at(r,s),_a(this,n,t),this}}function _a(t,e,r,s){var n=e._milliseconds,i=Zs(e._days),o=Zs(e._months);t.isValid()&&(s=s??!0,o&&Qo(t,Mr(t,"Month")+o*r),i&&Jo(t,"Date",Mr(t,"Date")+i*r),n&&t._d.setTime(t._d.valueOf()+n*r),s&&Y.updateOffset(t,i||o))}var Qf=fa(1,"add"),Xf=fa(-1,"subtract");function ma(t){return typeof t=="string"||t instanceof String}function e_(t){return ot(t)||Ir(t)||ma(t)||wt(t)||r_(t)||t_(t)||t===null||t===void 0}function t_(t){var e=Ut(t)&&!vn(t),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=s.length;for(n=0;n<o;n+=1)i=s[n],r=r||me(t,i);return e&&r}function r_(t){var e=it(t),r=!1;return e&&(r=t.filter(function(s){return!wt(s)&&ma(t)}).length===0),e&&r}function s_(t){var e=Ut(t)&&!vn(t),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<s.length;n+=1)i=s[n],r=r||me(t,i);return e&&r}function n_(t,e){var r=t.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function i_(t,e){arguments.length===1&&(arguments[0]?e_(arguments[0])?(t=arguments[0],e=void 0):s_(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var r=t||Oe(),s=Ln(r,this).startOf("day"),n=Y.calendarFormat(this,s)||"sameElse",i=e&&(dt(e[n])?e[n].call(this,r):e[n]);return this.format(i||this.localeData().calendar(n,this,Oe(r)))}function o_(){return new Yr(this)}function a_(t,e){var r=ot(t)?t:Oe(t);return this.isValid()&&r.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf()):!1}function l_(t,e){var r=ot(t)?t:Oe(t);return this.isValid()&&r.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf()):!1}function c_(t,e,r,s){var n=ot(t)?t:Oe(t),i=ot(e)?e:Oe(e);return this.isValid()&&n.isValid()&&i.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(n,r):!this.isBefore(n,r))&&(s[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function u_(t,e){var r=ot(t)?t:Oe(t),s;return this.isValid()&&r.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function d_(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function h_(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function f_(t,e,r){var s,n,i;if(!this.isValid())return NaN;if(s=Ln(t,this),!s.isValid())return NaN;switch(n=(s.utcOffset()-this.utcOffset())*6e4,e=tt(e),e){case"year":i=Kr(this,s)/12;break;case"month":i=Kr(this,s);break;case"quarter":i=Kr(this,s)/3;break;case"second":i=(this-s)/1e3;break;case"minute":i=(this-s)/6e4;break;case"hour":i=(this-s)/36e5;break;case"day":i=(this-s-n)/864e5;break;case"week":i=(this-s-n)/6048e5;break;default:i=this-s}return r?i:Qe(i)}function Kr(t,e){if(t.date()<e.date())return-Kr(e,t);var r=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(r,"months"),n,i;return e-s<0?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)||0}Y.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Y.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function __(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function m_(t){if(!this.isValid())return null;var e=t!==!0,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?Gr(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):dt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Gr(r,"Z")):Gr(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function p_(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",r,s,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),r="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(r+s+n+i)}function g_(t){t||(t=this.isUtc()?Y.defaultFormatUtc:Y.defaultFormat);var e=Gr(this,t);return this.localeData().postformat(e)}function b_(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Oe(t).isValid())?at({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function v_(t){return this.from(Oe(),t)}function w_(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Oe(t).isValid())?at({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function y_(t){return this.to(Oe(),t)}function pa(t){var e;return t===void 0?this._locale._abbr:(e=kt(t),e!=null&&(this._locale=e),this)}var ga=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function ba(){return this._locale}var is=1e3,nr=60*is,os=60*nr,va=(365*400+97)*24*os;function ir(t,e){return(t%e+e)%e}function wa(t,e,r){return t<100&&t>=0?new Date(t+400,e,r)-va:new Date(t,e,r).valueOf()}function ya(t,e,r){return t<100&&t>=0?Date.UTC(t+400,e,r)-va:Date.UTC(t,e,r)}function k_(t){var e,r;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?ya:wa,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ir(e+(this._isUTC?0:this.utcOffset()*nr),os);break;case"minute":e=this._d.valueOf(),e-=ir(e,nr);break;case"second":e=this._d.valueOf(),e-=ir(e,is);break}return this._d.setTime(e),Y.updateOffset(this,!0),this}function $_(t){var e,r;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?ya:wa,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=os-ir(e+(this._isUTC?0:this.utcOffset()*nr),os)-1;break;case"minute":e=this._d.valueOf(),e+=nr-ir(e,nr)-1;break;case"second":e=this._d.valueOf(),e+=is-ir(e,is)-1;break}return this._d.setTime(e),Y.updateOffset(this,!0),this}function S_(){return this._d.valueOf()-(this._offset||0)*6e4}function O_(){return Math.floor(this.valueOf()/1e3)}function T_(){return new Date(this.valueOf())}function D_(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function M_(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function E_(){return this.isValid()?this.toISOString():null}function C_(){return wn(this)}function P_(){return Dt({},oe(this))}function R_(){return oe(this).overflow}function j_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr");Z("NN",0,0,"eraAbbr");Z("NNN",0,0,"eraAbbr");Z("NNNN",0,0,"eraName");Z("NNNNN",0,0,"eraNarrow");Z("y",["y",1],"yo","eraYear");Z("y",["yy",2],0,"eraYear");Z("y",["yyy",3],0,"eraYear");Z("y",["yyyy",4],0,"eraYear");z("N",Nn);z("NN",Nn);z("NNN",Nn);z("NNNN",q_);z("NNNNN",B_);ye(["N","NN","NNN","NNNN","NNNNN"],function(t,e,r,s){var n=r._locale.erasParse(t,s,r._strict);n?oe(r).era=n:oe(r).invalidEra=t});z("y",dr);z("yy",dr);z("yyy",dr);z("yyyy",dr);z("yo",V_);ye(["y","yy","yyy","yyyy"],xe);ye(["yo"],function(t,e,r,s){var n;r._locale._eraYearOrdinalRegex&&(n=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[xe]=r._locale.eraYearOrdinalParse(t,n):e[xe]=parseInt(t,10)});function A_(t,e){var r,s,n,i=this._eras||kt("en")._eras;for(r=0,s=i.length;r<s;++r){switch(typeof i[r].since){case"string":n=Y(i[r].since).startOf("day"),i[r].since=n.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":n=Y(i[r].until).startOf("day").valueOf(),i[r].until=n.valueOf();break}}return i}function I_(t,e,r){var s,n,i=this.eras(),o,l,a;for(t=t.toUpperCase(),s=0,n=i.length;s<n;++s)if(o=i[s].name.toUpperCase(),l=i[s].abbr.toUpperCase(),a=i[s].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[s];break;case"NNNN":if(o===t)return i[s];break;case"NNNNN":if(a===t)return i[s];break}else if([o,l,a].indexOf(t)>=0)return i[s]}function Y_(t,e){var r=t.since<=t.until?1:-1;return e===void 0?Y(t.since).year():Y(t.since).year()+(e-t.offset)*r}function L_(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].name;return""}function N_(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].narrow;return""}function U_(){var t,e,r,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(r=this.clone().startOf("day").valueOf(),s[t].since<=r&&r<=s[t].until||s[t].until<=r&&r<=s[t].since)return s[t].abbr;return""}function x_(){var t,e,r,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(r=n[t].since<=n[t].until?1:-1,s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return(this.year()-Y(n[t].since).year())*r+n[t].offset;return this.year()}function F_(t){return me(this,"_erasNameRegex")||Un.call(this),t?this._erasNameRegex:this._erasRegex}function H_(t){return me(this,"_erasAbbrRegex")||Un.call(this),t?this._erasAbbrRegex:this._erasRegex}function W_(t){return me(this,"_erasNarrowRegex")||Un.call(this),t?this._erasNarrowRegex:this._erasRegex}function Nn(t,e){return e.erasAbbrRegex(t)}function q_(t,e){return e.erasNameRegex(t)}function B_(t,e){return e.erasNarrowRegex(t)}function V_(t,e){return e._eraYearOrdinalRegex||dr}function Un(){var t=[],e=[],r=[],s=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=bt(c[n].name),l=bt(c[n].abbr),a=bt(c[n].narrow),e.push(o),t.push(l),r.push(a),s.push(o),s.push(l),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100});Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ks(t,e){Z(0,[t,t.length],0,e)}ks("gggg","weekYear");ks("ggggg","weekYear");ks("GGGG","isoWeekYear");ks("GGGGG","isoWeekYear");z("G",gs);z("g",gs);z("GG",Te,Ke);z("gg",Te,Ke);z("GGGG",Tn,On);z("gggg",Tn,On);z("GGGGG",ps,_s);z("ggggg",ps,_s);Nr(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,s){e[s.substr(0,2)]=ce(t)});Nr(["gg","GG"],function(t,e,r,s){e[s]=Y.parseTwoDigitYear(t)});function z_(t){return ka.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function G_(t){return ka.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function J_(){return vt(this.year(),1,4)}function K_(){return vt(this.isoWeekYear(),1,4)}function Z_(){var t=this.localeData()._week;return vt(this.year(),t.dow,t.doy)}function Q_(){var t=this.localeData()._week;return vt(this.weekYear(),t.dow,t.doy)}function ka(t,e,r,s,n){var i;return t==null?Cr(this,s,n).year:(i=vt(t,s,n),e>i&&(e=i),X_.call(this,t,e,r,s,n))}function X_(t,e,r,s,n){var i=ta(t,e,r,s,n),o=Er(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Z("Q",0,"Qo","quarter");z("Q",qo);ye("Q",function(t,e){e[pt]=(ce(t)-1)*3});function em(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date");z("D",Te,hr);z("DD",Te,Ke);z("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ye(["D","DD"],lt);ye("Do",function(t,e){e[lt]=ce(t.match(Te)[0])});var $a=fr("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear");z("DDD",ms);z("DDDD",Bo);ye(["DDD","DDDD"],function(t,e,r){r._dayOfYear=ce(t)});function tm(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Z("m",["mm",2],0,"minute");z("m",Te,Dn);z("mm",Te,Ke);ye(["m","mm"],nt);var rm=fr("Minutes",!1);Z("s",["ss",2],0,"second");z("s",Te,Dn);z("ss",Te,Ke);ye(["s","ss"],gt);var sm=fr("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)});Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Z(0,["SSS",3],0,"millisecond");Z(0,["SSSS",4],0,function(){return this.millisecond()*10});Z(0,["SSSSS",5],0,function(){return this.millisecond()*100});Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});z("S",ms,qo);z("SS",ms,Ke);z("SSS",ms,Bo);var Mt,Sa;for(Mt="SSSS";Mt.length<=9;Mt+="S")z(Mt,dr);function nm(t,e){e[Nt]=ce(("0."+t)*1e3)}for(Mt="S";Mt.length<=9;Mt+="S")ye(Mt,nm);Sa=fr("Milliseconds",!1);Z("z",0,0,"zoneAbbr");Z("zz",0,0,"zoneName");function im(){return this._isUTC?"UTC":""}function om(){return this._isUTC?"Coordinated Universal Time":""}var L=Yr.prototype;L.add=Qf;L.calendar=i_;L.clone=o_;L.diff=f_;L.endOf=$_;L.format=g_;L.from=b_;L.fromNow=v_;L.to=w_;L.toNow=y_;L.get=mh;L.invalidAt=R_;L.isAfter=a_;L.isBefore=l_;L.isBetween=c_;L.isSame=u_;L.isSameOrAfter=d_;L.isSameOrBefore=h_;L.isValid=C_;L.lang=ga;L.locale=pa;L.localeData=ba;L.max=Cf;L.min=Ef;L.parsingFlags=P_;L.set=ph;L.startOf=k_;L.subtract=Xf;L.toArray=D_;L.toObject=M_;L.toDate=T_;L.toISOString=m_;L.inspect=p_;typeof Symbol<"u"&&Symbol.for!=null&&(L[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});L.toJSON=E_;L.toString=__;L.unix=O_;L.valueOf=S_;L.creationData=j_;L.eraName=L_;L.eraNarrow=N_;L.eraAbbr=U_;L.eraYear=x_;L.year=Go;L.isLeapYear=_h;L.weekYear=z_;L.isoWeekYear=G_;L.quarter=L.quarters=em;L.month=Xo;L.daysInMonth=Oh;L.week=L.weeks=jh;L.isoWeek=L.isoWeeks=Ah;L.weeksInYear=Z_;L.weeksInWeekYear=Q_;L.isoWeeksInYear=J_;L.isoWeeksInISOWeekYear=K_;L.date=$a;L.day=L.days=zh;L.weekday=Gh;L.isoWeekday=Jh;L.dayOfYear=tm;L.hour=L.hours=rf;L.minute=L.minutes=rm;L.second=L.seconds=sm;L.millisecond=L.milliseconds=Sa;L.utcOffset=Uf;L.utc=Ff;L.local=Hf;L.parseZone=Wf;L.hasAlignedHourOffset=qf;L.isDST=Bf;L.isLocal=zf;L.isUtcOffset=Gf;L.isUtc=ha;L.isUTC=ha;L.zoneAbbr=im;L.zoneName=om;L.dates=et("dates accessor is deprecated. Use date instead.",$a);L.months=et("months accessor is deprecated. Use month instead",Xo);L.years=et("years accessor is deprecated. Use year instead",Go);L.zone=et("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",xf);L.isDSTShifted=et("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Vf);function am(t){return Oe(t*1e3)}function lm(){return Oe.apply(null,arguments).parseZone()}function Oa(t){return t}var pe=kn.prototype;pe.calendar=Vd;pe.longDateFormat=Kd;pe.invalidDate=Qd;pe.ordinal=th;pe.preparse=Oa;pe.postformat=Oa;pe.relativeTime=sh;pe.pastFuture=nh;pe.set=qd;pe.eras=A_;pe.erasParse=I_;pe.erasConvertYear=Y_;pe.erasAbbrRegex=H_;pe.erasNameRegex=F_;pe.erasNarrowRegex=W_;pe.months=yh;pe.monthsShort=kh;pe.monthsParse=Sh;pe.monthsRegex=Dh;pe.monthsShortRegex=Th;pe.week=Eh;pe.firstDayOfYear=Rh;pe.firstDayOfWeek=Ph;pe.weekdays=Hh;pe.weekdaysMin=qh;pe.weekdaysShort=Wh;pe.weekdaysParse=Vh;pe.weekdaysRegex=Kh;pe.weekdaysShortRegex=Zh;pe.weekdaysMinRegex=Qh;pe.isPM=ef;pe.meridiem=sf;function as(t,e,r,s){var n=kt(),i=ut().set(s,e);return n[r](i,t)}function Ta(t,e,r){if(wt(t)&&(e=t,t=void 0),t=t||"",e!=null)return as(t,e,r,"month");var s,n=[];for(s=0;s<12;s++)n[s]=as(t,s,r,"month");return n}function xn(t,e,r,s){typeof t=="boolean"?(wt(e)&&(r=e,e=void 0),e=e||""):(e=t,r=e,t=!1,wt(e)&&(r=e,e=void 0),e=e||"");var n=kt(),i=t?n._week.dow:0,o,l=[];if(r!=null)return as(e,(r+i)%7,s,"day");for(o=0;o<7;o++)l[o]=as(e,(o+i)%7,s,"day");return l}function cm(t,e){return Ta(t,e,"months")}function um(t,e){return Ta(t,e,"monthsShort")}function dm(t,e,r){return xn(t,e,r,"weekdays")}function hm(t,e,r){return xn(t,e,r,"weekdaysShort")}function fm(t,e,r){return xn(t,e,r,"weekdaysMin")}Ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,r=ce(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+r}});Y.lang=et("moment.lang is deprecated. Use moment.locale instead.",Ct);Y.langData=et("moment.langData is deprecated. Use moment.localeData instead.",kt);var ht=Math.abs;function _m(){var t=this._data;return this._milliseconds=ht(this._milliseconds),this._days=ht(this._days),this._months=ht(this._months),t.milliseconds=ht(t.milliseconds),t.seconds=ht(t.seconds),t.minutes=ht(t.minutes),t.hours=ht(t.hours),t.months=ht(t.months),t.years=ht(t.years),this}function Da(t,e,r,s){var n=at(e,r);return t._milliseconds+=s*n._milliseconds,t._days+=s*n._days,t._months+=s*n._months,t._bubble()}function mm(t,e){return Da(this,t,e,1)}function pm(t,e){return Da(this,t,e,-1)}function Xi(t){return t<0?Math.floor(t):Math.ceil(t)}function gm(){var t=this._milliseconds,e=this._days,r=this._months,s=this._data,n,i,o,l,a;return t>=0&&e>=0&&r>=0||t<=0&&e<=0&&r<=0||(t+=Xi(Xs(r)+e)*864e5,e=0,r=0),s.milliseconds=t%1e3,n=Qe(t/1e3),s.seconds=n%60,i=Qe(n/60),s.minutes=i%60,o=Qe(i/60),s.hours=o%24,e+=Qe(o/24),a=Qe(Ma(e)),r+=a,e-=Xi(Xs(a)),l=Qe(r/12),r%=12,s.days=e,s.months=r,s.years=l,this}function Ma(t){return t*4800/146097}function Xs(t){return t*146097/4800}function bm(t){if(!this.isValid())return NaN;var e,r,s=this._milliseconds;if(t=tt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,r=this._months+Ma(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(Xs(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function $t(t){return function(){return this.as(t)}}var Ea=$t("ms"),vm=$t("s"),wm=$t("m"),ym=$t("h"),km=$t("d"),$m=$t("w"),Sm=$t("M"),Om=$t("Q"),Tm=$t("y"),Dm=Ea;function Mm(){return at(this)}function Em(t){return t=tt(t),this.isValid()?this[t+"s"]():NaN}function Ft(t){return function(){return this.isValid()?this._data[t]:NaN}}var Cm=Ft("milliseconds"),Pm=Ft("seconds"),Rm=Ft("minutes"),jm=Ft("hours"),Am=Ft("days"),Im=Ft("months"),Ym=Ft("years");function Lm(){return Qe(this.days()/7)}var ft=Math.round,Zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Nm(t,e,r,s,n){return n.relativeTime(e||1,!!r,t,s)}function Um(t,e,r,s){var n=at(t).abs(),i=ft(n.as("s")),o=ft(n.as("m")),l=ft(n.as("h")),a=ft(n.as("d")),c=ft(n.as("M")),u=ft(n.as("w")),f=ft(n.as("y")),_=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||a<=1&&["d"]||a<r.d&&["dd",a];return r.w!=null&&(_=_||u<=1&&["w"]||u<r.w&&["ww",u]),_=_||c<=1&&["M"]||c<r.M&&["MM",c]||f<=1&&["y"]||["yy",f],_[2]=e,_[3]=+t>0,_[4]=s,Nm.apply(null,_)}function xm(t){return t===void 0?ft:typeof t=="function"?(ft=t,!0):!1}function Fm(t,e){return Zt[t]===void 0?!1:e===void 0?Zt[t]:(Zt[t]=e,t==="s"&&(Zt.ss=e-1),!0)}function Hm(t,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=Zt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(r=t),typeof e=="object"&&(s=Object.assign({},Zt,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),n=this.localeData(),i=Um(this,!r,s,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Ys=Math.abs;function zt(t){return(t>0)-(t<0)||+t}function $s(){if(!this.isValid())return this.localeData().invalidDate();var t=Ys(this._milliseconds)/1e3,e=Ys(this._days),r=Ys(this._months),s,n,i,o,l=this.asSeconds(),a,c,u,f;return l?(s=Qe(t/60),n=Qe(s/60),t%=60,s%=60,i=Qe(r/12),r%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=zt(this._months)!==zt(l)?"-":"",u=zt(this._days)!==zt(l)?"-":"",f=zt(this._milliseconds)!==zt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(r?c+r+"M":"")+(e?u+e+"D":"")+(n||s||t?"T":"")+(n?f+n+"H":"")+(s?f+s+"M":"")+(t?f+o+"S":"")):"P0D"}var _e=ys.prototype;_e.isValid=If;_e.abs=_m;_e.add=mm;_e.subtract=pm;_e.as=bm;_e.asMilliseconds=Ea;_e.asSeconds=vm;_e.asMinutes=wm;_e.asHours=ym;_e.asDays=km;_e.asWeeks=$m;_e.asMonths=Sm;_e.asQuarters=Om;_e.asYears=Tm;_e.valueOf=Dm;_e._bubble=gm;_e.clone=Mm;_e.get=Em;_e.milliseconds=Cm;_e.seconds=Pm;_e.minutes=Rm;_e.hours=jm;_e.days=Am;_e.weeks=Lm;_e.months=Im;_e.years=Ym;_e.humanize=Hm;_e.toISOString=$s;_e.toString=$s;_e.toJSON=$s;_e.locale=pa;_e.localeData=ba;_e.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$s);_e.lang=ga;Z("X",0,0,"unix");Z("x",0,0,"valueOf");z("x",gs);z("X",lh);ye("X",function(t,e,r){r._d=new Date(parseFloat(t)*1e3)});ye("x",function(t,e,r){r._d=new Date(ce(t))});//! moment.js
Y.version="2.30.1";Hd(Oe);Y.fn=L;Y.min=Pf;Y.max=Rf;Y.now=jf;Y.utc=ut;Y.unix=am;Y.months=cm;Y.isDate=Ir;Y.locale=Ct;Y.invalid=fs;Y.duration=at;Y.isMoment=ot;Y.weekdays=dm;Y.parseZone=lm;Y.localeData=kt;Y.isDuration=Jr;Y.monthsShort=um;Y.weekdaysMin=fm;Y.defineLocale=Rn;Y.updateLocale=lf;Y.locales=cf;Y.weekdaysShort=hm;Y.normalizeUnits=tt;Y.relativeTimeRounding=xm;Y.relativeTimeThreshold=Fm;Y.calendarFormat=n_;Y.prototype=L;Y.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Wm(t){let e,r,s,n,i,o,l,a,c,u,f,_;const g=t[4].default,p=rn(g,t,t[3],null);return{c(){e=m("div"),r=m("label"),s=ie(t[0]),n=y(),i=m("div"),p&&p.c(),o=y(),l=m("div"),a=m("button"),c=ie(t[2]),d(r,"class","col-sm-4 col-md-3 col-form-label"),d(r,"for",t[1]),d(i,"class","col-sm-5 col-md-6 col-9"),d(a,"class","w-100 btn btn-outline-primary"),d(l,"class","col-sm-3 col-md-3 col-auto"),d(e,"class","mb-4 row justify-content-center")},m(b,v){C(b,e,v),h(e,r),h(r,s),h(e,n),h(e,i),p&&p.m(i,null),h(e,o),h(e,l),h(l,a),h(a,c),u=!0,f||(_=V(a,"click",t[5]),f=!0)},p(b,[v]){(!u||v&1)&&ge(s,b[0]),(!u||v&2)&&d(r,"for",b[1]),p&&p.p&&(!u||v&8)&&nn(p,g,b,b[3],u?sn(g,b[3],v,null):on(b[3]),null),(!u||v&4)&&ge(c,b[2])},i(b){u||(S(p,b),u=!0)},o(b){T(p,b),u=!1},d(b){b&&E(e),p&&p.d(b),f=!1,_()}}}function qm(t,e,r){let{$$slots:s={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){Us.call(this,t,c)}return t.$$set=c=>{"label"in c&&r(0,i=c.label),"id"in c&&r(1,o=c.id),"button"in c&&r(2,l=c.button),"$$scope"in c&&r(3,n=c.$$scope)},[i,o,l,n,s,a]}class Bm extends we{constructor(e){super(),ve(this,e,qm,Wm,be,{label:0,id:1,button:2})}}function Vm(t){let e,r,s,n,i,o,l,a;return{c(){e=m("div"),r=m("div"),s=m("b"),n=ie(t[0]),i=ie(":"),o=y(),l=m("div"),a=ie(t[1]),d(r,"class","col-sm-4 col-md-4"),d(l,"class","col-sm-8 col-md-8"),d(e,"class","mb-2 row")},m(c,u){C(c,e,u),h(e,r),h(r,s),h(s,n),h(s,i),h(e,o),h(e,l),h(l,a)},p(c,[u]){u&1&&ge(n,c[0]),u&2&&ge(a,c[1])},i:j,o:j,d(c){c&&E(e)}}}function zm(t,e,r){let{key:s}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&r(0,s=i.key),"value"in i&&r(1,n=i.value)},[s,n]}class We extends we{constructor(e){super(),ve(this,e,zm,Vm,be,{key:0,value:1})}}function Gm(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.textContent="Cannot Find Reservation",d(e,"class",r="form-control "+t[9]),d(e,"type","number"),d(e,"id","reserve"),d(e,"placeholder","e.g 300xxx"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[4]),C(l,s,a),C(l,n,a),i||(o=[V(e,"input",t[18]),V(e,"keyup",t[19])],i=!0)},p(l,a){a[0]&512&&r!==(r="form-control "+l[9])&&d(e,"class",r),a[0]&16&&ls(e.value)!==l[4]&&J(e,l[4])},d(l){l&&(E(e),E(s),E(n)),i=!1,$e(o)}}}function Jm(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.textContent="Cannot Find Student",d(e,"class",r="form-control "+t[10]),d(e,"type","text"),d(e,"id","stud-id"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[5]),C(l,s,a),C(l,n,a),i||(o=[V(e,"input",t[20]),V(e,"keyup",t[21])],i=!0)},p(l,a){a[0]&1024&&r!==(r="form-control "+l[10])&&d(e,"class",r),a[0]&32&&e.value!==l[5]&&J(e,l[5])},d(l){l&&(E(e),E(s),E(n)),i=!1,$e(o)}}}function Km(t){let e,r,s,n,i,o;return{c(){e=m("input"),s=y(),n=m("div"),n.textContent="Cannot Find Book",d(e,"class",r="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-barcode"),d(e,"placeholder","e.g 1000xxx"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),J(e,t[6]),C(l,s,a),C(l,n,a),i||(o=[V(e,"input",t[22]),V(e,"keyup",t[23])],i=!0)},p(l,a){a[0]&2048&&r!==(r="form-control "+l[11])&&d(e,"class",r),a[0]&64&&e.value!==l[6]&&J(e,l[6])},d(l){l&&(E(e),E(s),E(n)),i=!1,$e(o)}}}function eo(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M;return n=new We({props:{key:"Borrow ID",value:t[3]}}),o=new We({props:{key:"Name",value:t[7]}}),a=new We({props:{key:"Book Title",value:t[8]+" ("+t[6]+")"}}),u=new We({props:{key:"Staff Name",value:"Francis James E. Salles ("+t[14]+")"}}),_=new We({props:{key:"Borrow Date",value:Y(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new We({props:{key:"Return Due",value:Y(t[1]).format("MMMM DD, YYYY")+" ("+t[12]+" days)"}}),{c(){e=m("div"),r=m("h3"),r.textContent="Borrow Preview",s=y(),x(n.$$.fragment),i=y(),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),x(_.$$.fragment),g=y(),x(p.$$.fragment),b=y(),v=m("div"),w=m("button"),w.innerHTML='<i class="bi bi-arrow-up-circle"></i> Borrow',d(r,"class","py-4 text-center"),d(w,"class","btn btn-secondary"),d(v,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(k,D){C(k,e,D),h(e,r),h(e,s),N(n,e,null),h(e,i),N(o,e,null),h(e,l),N(a,e,null),h(e,c),N(u,e,null),h(e,f),N(_,e,null),h(e,g),N(p,e,null),h(e,b),h(e,v),h(v,w),$=!0,O||(M=V(w,"click",t[17]),O=!0)},p(k,D){const F={};D[0]&8&&(F.value=k[3]),n.$set(F);const A={};D[0]&128&&(A.value=k[7]),o.$set(A);const W={};D[0]&320&&(W.value=k[8]+" ("+k[6]+")"),a.$set(W);const q={};D[0]&1&&(q.value=Y(k[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(q);const R={};D[0]&4098&&(R.value=Y(k[1]).format("MMMM DD, YYYY")+" ("+k[12]+" days)"),p.$set(R)},i(k){$||(S(n.$$.fragment,k),S(o.$$.fragment,k),S(a.$$.fragment,k),S(u.$$.fragment,k),S(_.$$.fragment,k),S(p.$$.fragment,k),$=!0)},o(k){T(n.$$.fragment,k),T(o.$$.fragment,k),T(a.$$.fragment,k),T(u.$$.fragment,k),T(_.$$.fragment,k),T(p.$$.fragment,k),$=!1},d(k){k&&E(e),U(n),U(o),U(a),U(u),U(_),U(p),O=!1,M()}}}function Zm(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H,I,K,se,Q,ne,X,he,Ae,Pe,Re,Fe;r=new yt({props:{text:"Borrow Book"}}),o=new Bm({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[Gm]},$$scope:{ctx:t}}}),o.$on("click",t[16]),u=new Ye({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Jm]},$$scope:{ctx:t}}}),_=new Ye({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Km]},$$scope:{ctx:t}}});let fe=t[2]&&eo(t);return{c(){e=m("main"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),x(o.$$.fragment),l=y(),a=m("hr"),c=y(),x(u.$$.fragment),f=y(),x(_.$$.fragment),g=y(),p=m("div"),b=m("label"),b.textContent="Borrow Date:",v=y(),w=m("div"),$=m("input"),M=y(),k=m("div"),D=m("button"),D.textContent="Today",F=y(),A=m("div"),W=m("label"),W.textContent="Return Due:",q=y(),R=m("div"),P=m("input"),ee=y(),H=m("div"),I=m("button"),I.textContent=`~${en} Days`,K=y(),se=m("div"),Q=m("button"),Q.innerHTML='<i class="bi bi-receipt"></i> Preview',ne=y(),X=m("a"),X.innerHTML='<i class="bi bi-x-circle"></i> Cancel',he=y(),fe&&fe.c(),d(a,"class","mb-4"),d(b,"class","col-sm-4 col-md-3 col-form-label"),d(b,"for","borrow-date"),d($,"class","form-control"),d($,"type","datetime-local"),d($,"id","borrow-date"),d($,"max",O=Y(t[1]).format("YYYY-MM-DD HH:mm")),d(w,"class","col-sm-5 col-md-6 col-7"),d(D,"class","w-100 btn btn-outline-primary"),d(k,"class","col-sm-3 col-md-3 col-auto"),d(p,"class","mb-4 row justify-content-center"),d(W,"class","col-sm-4 col-md-3 col-form-label"),d(W,"for","return-date"),d(P,"class","form-control"),d(P,"type","date"),d(P,"id","return-date"),d(P,"min",B=Y(t[0]).format("YYYY-MM-DD")),d(R,"class","col-sm-5 col-md-6 col-7"),d(I,"class","w-100 btn btn-outline-primary"),d(H,"class","col-sm-3 col-md-3 col-auto"),d(A,"class","mb-4 row justify-content-center"),d(Q,"class","btn btn-success"),d(X,"href","./#/"),d(X,"class","btn btn-danger"),d(se,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(te,ue){C(te,e,ue),N(r,e,null),h(e,s),h(e,n),h(n,i),N(o,i,null),h(i,l),h(i,a),h(i,c),N(u,i,null),h(i,f),N(_,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),J($,t[0]),h(p,M),h(p,k),h(k,D),h(i,F),h(i,A),h(A,W),h(A,q),h(A,R),h(R,P),J(P,t[1]),h(A,ee),h(A,H),h(H,I),h(i,K),h(i,se),h(se,Q),h(se,ne),h(se,X),h(n,he),fe&&fe.m(n,null),Pe=!0,Re||(Fe=[V($,"input",t[24]),V(D,"click",t[25]),V(P,"input",t[26]),V(I,"click",t[27]),V(Q,"click",t[28])],Re=!0)},p(te,ue){const je={};ue[0]&528|ue[1]&2&&(je.$$scope={dirty:ue,ctx:te}),o.$set(je);const le={};ue[0]&1056|ue[1]&2&&(le.$$scope={dirty:ue,ctx:te}),u.$set(le);const G={};ue[0]&2112|ue[1]&2&&(G.$$scope={dirty:ue,ctx:te}),_.$set(G),(!Pe||ue[0]&2&&O!==(O=Y(te[1]).format("YYYY-MM-DD HH:mm")))&&d($,"max",O),ue[0]&1&&J($,te[0]),(!Pe||ue[0]&1&&B!==(B=Y(te[0]).format("YYYY-MM-DD")))&&d(P,"min",B),ue[0]&2&&J(P,te[1]),te[2]?fe?(fe.p(te,ue),ue[0]&4&&S(fe,1)):(fe=eo(te),fe.c(),S(fe,1),fe.m(n,null)):fe&&(Me(),T(fe,1,1,()=>{fe=null}),Ee())},i(te){Pe||(S(r.$$.fragment,te),S(o.$$.fragment,te),S(u.$$.fragment,te),S(_.$$.fragment,te),S(fe),te&&(Ae||Le(()=>{Ae=Ge(e,Je,{duration:500}),Ae.start()})),Pe=!0)},o(te){T(r.$$.fragment,te),T(o.$$.fragment,te),T(u.$$.fragment,te),T(_.$$.fragment,te),T(fe),Pe=!1},d(te){te&&E(e),U(r),U(o),U(u),U(_),fe&&fe.d(),Re=!1,$e(Fe)}}}const en=14;function to(){return"400"+Math.floor(Math.random()*9e3)}function Qm(t,e,r){let s,n;oo(t,rl,Q=>r(29,n=Q));const i=Y().format("YYYY-MM-DD HH:mm");let o=i,l=Y(i).add(en,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,f,_,g;const p=new URLSearchParams(n);f=p.get("reserve_id")||"",g=p.get("barcode")||"";let b,v,w,$,O;async function M(){const{data:Q,error:ne}=await re.from("account_details").select("fname, lname").eq("user_id",_).single();ne?(r(10,$="is-invalid"),console.error(ne)):r(7,b=`${Q.fname} ${Q.lname}`);const{data:X,error:he}=await re.from("library_holdings").select("books(title)").eq("barcode",g).single();he||!X?(r(11,O="is-invalid"),console.error(he)):r(8,v=X.books.title),(!he||!ne)&&(r(3,u=await F()),r(2,c=!c))}async function k(){const{data:Q,error:ne}=await re.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",f).eq("active",!0).single();ne||!Q?(r(9,w="is-invalid"),console.error(ne)):(r(5,_=Q.stud_id),r(6,g=Q.library_holdings.barcode),M())}async function D(){const{data:Q,error:ne}=await re.from("library_holdings").select("holding_id").eq("barcode",g).single();ne&&console.error(ne);const X=Y(o).format("YYYY-MM-DDTHH:MMZ"),he=Y(l).format("YYYY-MM-DDTHH:MMZ"),{error:Ae}=await re.from("book_borrow").insert({borrow_id:u,stud_id:_,holding_id:Q.holding_id,staff_id:a,borrow_date:X,due_date:he});if(Ae){console.error(Ae);return}const{data:Pe,error:Re}=await re.from("book_reservation").update({staff_id:a,release_date:X,active:!1}).eq("active",!0).eq("holding_id",Q.holding_id).select();if(console.log("updated Rows:",Pe),Re){console.error(Re);return}const{error:Fe}=await re.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",Q.holding_id);Fe&&console.error(Fe)}async function F(){let Q=to();const{data:ne,error:X}=await re.from("book_borrow").select().eq("borrow_id",Q);return console.log(ne),ne.length!=0&&(Q=to(),console.log("exists")),console.log(Q),Q}function A(){f=ls(this.value),r(4,f)}const W=()=>r(9,w="");function q(){_=this.value,r(5,_)}const R=()=>r(10,$="");function P(){g=this.value,r(6,g)}const B=()=>r(11,O="");function ee(){o=this.value,r(0,o)}const H=()=>r(0,o=i);function I(){l=this.value,r(1,l)}const K=()=>r(1,l=Y(o).add(en,"days").format("YYYY-MM-DD")),se=()=>{M()};return t.$$.update=()=>{t.$$.dirty[0]&3&&r(12,s=Y(l).diff(Y(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,f,_,g,b,v,w,$,O,s,i,a,M,k,D,A,W,q,R,P,B,ee,H,I,K,se]}class Xm extends we{constructor(e){super(),ve(this,e,Qm,Zm,be,{},null,[-1,-1])}}function ep(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-id")},m(n,i){C(n,e,i),J(e,t[2]),r||(s=V(e,"input",t[15]),r=!0)},p(n,i){i&4&&e.value!==n[2]&&J(e,n[2])},d(n){n&&E(e),r=!1,s()}}}function tp(t){let e,r,s,n,i,o,l;return{c(){e=m("select"),r=m("option"),r.textContent="New",s=m("option"),s.textContent="Good",n=m("option"),n.textContent="Fair",i=m("option"),i.textContent="Poor",r.__value="New",J(r,r.__value),s.__value="Good",J(s,s.__value),n.__value="Fair",J(n,n.__value),i.__value="Poor",J(i,i.__value),d(e,"class","form-select"),d(e,"id","book-condition"),t[9]===void 0&&Le(()=>t[16].call(e))},m(a,c){C(a,e,c),h(e,r),h(e,s),h(e,n),h(e,i),Jn(e,t[9],!0),o||(l=V(e,"change",t[16]),o=!0)},p(a,c){c&512&&Jn(e,a[9])},d(a){a&&E(e),o=!1,l()}}}function rp(t){let e,r,s;return{c(){e=m("textarea"),d(e,"class","form-control"),d(e,"rows","3"),d(e,"id","book-note")},m(n,i){C(n,e,i),J(e,t[8]),r||(s=V(e,"input",t[17]),r=!0)},p(n,i){i&256&&J(e,n[8])},d(n){n&&E(e),r=!1,s()}}}function sp(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q;n=new We({props:{key:"Borrow ID",value:t[2]}}),o=new We({props:{key:"Return ID",value:t[3]}}),a=new We({props:{key:"Name",value:t[7]+" ("+t[6]+")"}}),u=new We({props:{key:"Book Title",value:t[4]+" ("+t[5]+")"}}),_=new We({props:{key:"Condition",value:t[9]}});let R=t[8]&&ro(t);return b=new We({props:{key:"Received by",value:"Francis James E. Salles ("+t[12]+")"}}),w=new We({props:{key:"Return Due",value:Y(t[1]).format("MMMM DD, YYYY")}}),O=new We({props:{key:"Return Date",value:Y(t[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(t[10]>0?`+${t[10]}`:t[10])+" days)"}}),{c(){e=m("div"),r=m("h3"),r.textContent="Return Preview",s=y(),x(n.$$.fragment),i=y(),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),x(_.$$.fragment),g=y(),R&&R.c(),p=y(),x(b.$$.fragment),v=y(),x(w.$$.fragment),$=y(),x(O.$$.fragment),M=y(),k=m("div"),D=m("button"),D.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',d(r,"class","py-4 text-center"),d(D,"class","btn btn-secondary"),d(k,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(P,B){C(P,e,B),h(e,r),h(e,s),N(n,e,null),h(e,i),N(o,e,null),h(e,l),N(a,e,null),h(e,c),N(u,e,null),h(e,f),N(_,e,null),h(e,g),R&&R.m(e,null),h(e,p),N(b,e,null),h(e,v),N(w,e,null),h(e,$),N(O,e,null),h(e,M),h(e,k),h(k,D),A=!0,W||(q=V(D,"click",t[14]),W=!0)},p(P,B){const ee={};B&4&&(ee.value=P[2]),n.$set(ee);const H={};B&8&&(H.value=P[3]),o.$set(H);const I={};B&192&&(I.value=P[7]+" ("+P[6]+")"),a.$set(I);const K={};B&48&&(K.value=P[4]+" ("+P[5]+")"),u.$set(K);const se={};B&512&&(se.value=P[9]),_.$set(se),P[8]?R?(R.p(P,B),B&256&&S(R,1)):(R=ro(P),R.c(),S(R,1),R.m(e,p)):R&&(Me(),T(R,1,1,()=>{R=null}),Ee());const Q={};B&2&&(Q.value=Y(P[1]).format("MMMM DD, YYYY")),w.$set(Q);const ne={};B&1025&&(ne.value=Y(P[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(P[10]>0?`+${P[10]}`:P[10])+" days)"),O.$set(ne)},i(P){A||(S(n.$$.fragment,P),S(o.$$.fragment,P),S(a.$$.fragment,P),S(u.$$.fragment,P),S(_.$$.fragment,P),S(R),S(b.$$.fragment,P),S(w.$$.fragment,P),S(O.$$.fragment,P),P&&Le(()=>{A&&(F||(F=Zn(e,vi,{duration:400,y:-60},!0)),F.run(1))}),A=!0)},o(P){T(n.$$.fragment,P),T(o.$$.fragment,P),T(a.$$.fragment,P),T(u.$$.fragment,P),T(_.$$.fragment,P),T(R),T(b.$$.fragment,P),T(w.$$.fragment,P),T(O.$$.fragment,P),P&&(F||(F=Zn(e,vi,{duration:400,y:-60},!1)),F.run(0)),A=!1},d(P){P&&E(e),U(n),U(o),U(a),U(u),U(_),R&&R.d(),U(b),U(w),U(O),P&&F&&F.end(),W=!1,q()}}}function ro(t){let e,r;return e=new We({props:{key:"Return Note",value:t[8]}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},p(s,n){const i={};n&256&&(i.value=s[8]),e.$set(i)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function np(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B;r=new yt({props:{text:"Return Book"}}),o=new Ye({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[ep]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Condition:",id:"book-condition",$$slots:{default:[tp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Note:",id:"book-note",$$slots:{default:[rp]},$$scope:{ctx:t}}});let ee=sp(t);return{c(){e=m("main"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),_=m("div"),g=m("label"),g.textContent="Return Time:",p=y(),b=m("div"),v=m("input"),w=y(),$=m("div"),O=m("button"),O.textContent="Now",M=y(),k=m("div"),D=m("button"),D.innerHTML='<i class="bi bi-receipt"></i> Preview',F=y(),A=m("a"),A.innerHTML='<i class="bi bi-x-circle"></i> Cancel',W=y(),ee&&ee.c(),d(g,"class","col-sm-4 col-md-3 col-form-label"),d(g,"for","return-time"),d(v,"class","form-control"),d(v,"type","datetime-local"),d(v,"id","return-time"),d(b,"class","col-sm-5 col-md-6 col-7"),d(O,"class","w-100 btn btn-outline-primary"),d($,"class","col-sm-3 col-md-3 col-auto"),d(_,"class","mb-4 row justify-content-center"),d(D,"class","btn btn-success"),d(A,"href","./#/"),d(A,"class","btn btn-danger"),d(k,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(H,I){C(H,e,I),N(r,e,null),h(e,s),h(e,n),h(n,i),N(o,i,null),h(i,l),N(a,i,null),h(i,c),N(u,i,null),h(i,f),h(i,_),h(_,g),h(_,p),h(_,b),h(b,v),J(v,t[0]),h(_,w),h(_,$),h($,O),h(i,M),h(i,k),h(k,D),h(k,F),h(k,A),h(n,W),ee&&ee.m(n,null),R=!0,P||(B=[V(v,"input",t[18]),V(O,"click",t[19]),V(D,"click",t[13])],P=!0)},p(H,[I]){const K={};I&4194308&&(K.$$scope={dirty:I,ctx:H}),o.$set(K);const se={};I&4194816&&(se.$$scope={dirty:I,ctx:H}),a.$set(se);const Q={};I&4194560&&(Q.$$scope={dirty:I,ctx:H}),u.$set(Q),I&1&&J(v,H[0]),ee.p(H,I)},i(H){R||(S(r.$$.fragment,H),S(o.$$.fragment,H),S(a.$$.fragment,H),S(u.$$.fragment,H),S(ee),H&&(q||Le(()=>{q=Ge(e,Je,{duration:500}),q.start()})),R=!0)},o(H){T(r.$$.fragment,H),T(o.$$.fragment,H),T(a.$$.fragment,H),T(u.$$.fragment,H),T(ee),R=!1},d(H){H&&E(e),U(r),U(o),U(a),U(u),ee&&ee.d(),P=!1,$e(B)}}}function so(){return"500"+Math.floor(Math.random()*9e3)}function ip(t,e,r){let s,n=Y().format("YYYY-MM-DD HH:mm"),i=n,o=Y().subtract("5","days");const l=localStorage.getItem("user_id");let a,c,u,f,_,g,p,b;async function v(){const{data:A,error:W}=await re.rpc("getborrowinfo",{borrowid:a});console.error(W),console.table(A);let q=A[0];r(7,g=`${q.fname} ${q.lname}`),r(6,_=q.stud_id),r(4,u=q.title),r(5,f=q.barcode),r(1,o=q.due_date),r(3,c=await $())}async function w(){const{data:A,error:W}=await re.from("book_return").insert({return_id:await $(),borrow_id:a,staff_id:l,note:p,return_date:Y(i).format("YYYY-MM-DDTHH:MMZ"),condition:b}).select();if(W){console.error(W);return}console.table(A);const{data:q,error:R}=await re.from("library_holdings").update({status:"Available",condition:b}).eq("barcode",f).select(),{data:P,error:B}=await re.from("book_borrow").update({active:!1}).eq("borrow_id",a).select();if(R||B){console.error(R),console.error(B);return}console.log(q,P)}async function $(){let A=so();const{data:W,error:q}=await re.from("book_return").select().eq("return_id",A);return console.log(W),W.length!=0&&(A=so(),console.log("exists")),console.log(A),A}function O(){a=this.value,r(2,a)}function M(){b=xa(this),r(9,b)}function k(){p=this.value,r(8,p)}function D(){i=this.value,r(0,i)}const F=()=>r(0,i=n);return t.$$.update=()=>{t.$$.dirty&3&&r(10,s=Y(i).diff(Y(o).format("YYYY-MM-DD"),"days")*-1)},[i,o,a,c,u,f,_,g,p,b,s,n,l,v,w,O,M,k,D,F]}class op extends we{constructor(e){super(),ve(this,e,ip,np,be,{})}}function ap(t){let e,r;return{c(){e=m("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',d(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),cr(e,"height","70vh")},m(s,n){C(s,e,n)},p:j,i(s){s&&(r||Le(()=>{r=Ge(e,Je,{duration:500}),r.start()}))},o:j,d(s){s&&E(e)}}}class Ca extends we{constructor(e){super(),ve(this,e,null,ap,be,{})}}function lp(t){let e,r,s,n;return{c(){e=m("input"),d(e,"class",r="form-control "+t[7]),d(e,"type","text"),d(e,"id","author-name")},m(i,o){C(i,e,o),J(e,t[4]),s||(n=[V(e,"input",t[11]),V(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&d(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&E(e),s=!1,$e(n)}}}function cp(t){let e,r,s,n;return{c(){e=m("textarea"),d(e,"class",r="form-control "+t[8]),d(e,"id","author-bio"),d(e,"rows","4")},m(i,o){C(i,e,o),J(e,t[5]),s||(n=[V(e,"input",t[13]),V(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&d(e,"class",r),o&32&&J(e,i[5])},d(i){i&&E(e),s=!1,$e(n)}}}function up(t){let e,r,s,n;return{c(){e=m("input"),d(e,"type","text"),d(e,"id","author-link"),d(e,"class",r="form-control "+t[9])},m(i,o){C(i,e,o),J(e,t[6]),s||(n=[V(e,"input",t[15]),V(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&d(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&E(e),s=!1,$e(n)}}}function dp(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","author-pic"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[18](e),r||(s=V(e,"change",t[17]),r=!0)},p:j,d(n){n&&E(e),t[18](null),r=!1,s()}}}function hp(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H;return r=new yt({props:{text:"Add Author"}}),o=new Ye({props:{label:"Author Name:",id:"author-name",$$slots:{default:[lp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[cp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Author Link:",id:"author-link",$$slots:{default:[up]},$$scope:{ctx:t}}}),_=new Ye({props:{label:"Picture:",id:"author-pic",$$slots:{default:[dp]},$$scope:{ctx:t}}}),{c(){e=m("section"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),x(_.$$.fragment),g=y(),p=m("div"),b=m("label"),b.textContent="Preview:",v=y(),w=m("div"),$=m("img"),M=y(),k=m("button"),k.textContent="Remove",F=y(),A=m("div"),W=m("button"),W.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',q=y(),R=m("a"),R.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),qe($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(W,"class","btn btn-success"),d(R,"href","./#/"),d(A,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(I,K){C(I,e,K),N(r,e,null),h(e,s),h(e,n),h(n,i),N(o,i,null),h(i,l),N(a,i,null),h(i,c),N(u,i,null),h(i,f),N(_,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),h(w,M),h(w,k),h(i,F),h(i,A),h(A,W),h(A,q),h(A,R),B=!0,ee||(H=[V(k,"click",t[19]),V(W,"click",t[10])],ee=!0)},p(I,[K]){const se={};K&1048720&&(se.$$scope={dirty:K,ctx:I}),o.$set(se);const Q={};K&1048864&&(Q.$$scope={dirty:K,ctx:I}),a.$set(Q);const ne={};K&1049152&&(ne.$$scope={dirty:K,ctx:I}),u.$set(ne);const X={};K&1048579&&(X.$$scope={dirty:K,ctx:I}),_.$set(X),(!B||K&8&&!qe($.src,O=I[3]))&&d($,"src",O),(!B||K&4&&D!==(D="my-3 row "+I[2]))&&d(p,"class",D)},i(I){B||(S(r.$$.fragment,I),S(o.$$.fragment,I),S(a.$$.fragment,I),S(u.$$.fragment,I),S(_.$$.fragment,I),I&&(P||Le(()=>{P=Ge(e,Je,{duration:500}),P.start()})),B=!0)},o(I){T(r.$$.fragment,I),T(o.$$.fragment,I),T(a.$$.fragment,I),T(u.$$.fragment,I),T(_.$$.fragment,I),B=!1},d(I){I&&E(e),U(r),U(o),U(a),U(u),U(_),ee=!1,$e(H)}}}function fp(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,_;async function g(){r(7,u=l?"":"is-invalid"),r(8,f=a?"":"is-invalid"),r(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,r(4,l)}const b=()=>r(7,u="");function v(){a=this.value,r(5,a)}const w=()=>r(8,f="");function $(){c=this.value,r(6,c)}const O=()=>r(9,_="");function M(){s=this.files,r(0,s)}function k(F){or[F?"unshift":"push"](()=>{n=F,r(1,n)})}const D=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const F=URL.createObjectURL(s[0]);r(3,o=F)}else r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D]}class _p extends we{constructor(e){super(),ve(this,e,fp,hp,be,{})}}function mp(t){let e,r,s,n;return{c(){e=m("input"),d(e,"class",r="form-control "+t[7]),d(e,"type","text"),d(e,"id","publisher-name")},m(i,o){C(i,e,o),J(e,t[4]),s||(n=[V(e,"input",t[11]),V(e,"keyup",t[12])],s=!0)},p(i,o){o&128&&r!==(r="form-control "+i[7])&&d(e,"class",r),o&16&&e.value!==i[4]&&J(e,i[4])},d(i){i&&E(e),s=!1,$e(n)}}}function pp(t){let e,r,s,n;return{c(){e=m("textarea"),d(e,"class",r="form-control "+t[8]),d(e,"id","publisher-description"),d(e,"rows","4")},m(i,o){C(i,e,o),J(e,t[5]),s||(n=[V(e,"input",t[13]),V(e,"keyup",t[14])],s=!0)},p(i,o){o&256&&r!==(r="form-control "+i[8])&&d(e,"class",r),o&32&&J(e,i[5])},d(i){i&&E(e),s=!1,$e(n)}}}function gp(t){let e,r,s,n;return{c(){e=m("input"),d(e,"type","text"),d(e,"id","publisher-link"),d(e,"class",r="form-control "+t[9])},m(i,o){C(i,e,o),J(e,t[6]),s||(n=[V(e,"input",t[15]),V(e,"keyup",t[16])],s=!0)},p(i,o){o&512&&r!==(r="form-control "+i[9])&&d(e,"class",r),o&64&&e.value!==i[6]&&J(e,i[6])},d(i){i&&E(e),s=!1,$e(n)}}}function bp(t){let e,r,s;return{c(){e=m("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","publisher-pic"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[18](e),r||(s=V(e,"change",t[17]),r=!0)},p:j,d(n){n&&E(e),t[18](null),r=!1,s()}}}function vp(t){let e,r,s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D,F,A,W,q,R,P,B,ee,H;return r=new yt({props:{text:"Add Publisher"}}),o=new Ye({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[mp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[pp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[gp]},$$scope:{ctx:t}}}),_=new Ye({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[bp]},$$scope:{ctx:t}}}),{c(){e=m("section"),x(r.$$.fragment),s=y(),n=m("div"),i=m("div"),x(o.$$.fragment),l=y(),x(a.$$.fragment),c=y(),x(u.$$.fragment),f=y(),x(_.$$.fragment),g=y(),p=m("div"),b=m("label"),b.textContent="Preview:",v=y(),w=m("div"),$=m("img"),M=y(),k=m("button"),k.textContent="Remove",F=y(),A=m("div"),W=m("button"),W.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',q=y(),R=m("a"),R.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),qe($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(W,"class","btn btn-success"),d(R,"href","./#/"),d(A,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(I,K){C(I,e,K),N(r,e,null),h(e,s),h(e,n),h(n,i),N(o,i,null),h(i,l),N(a,i,null),h(i,c),N(u,i,null),h(i,f),N(_,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),h(w,M),h(w,k),h(i,F),h(i,A),h(A,W),h(A,q),h(A,R),B=!0,ee||(H=[V(k,"click",t[19]),V(W,"click",t[10])],ee=!0)},p(I,[K]){const se={};K&1048720&&(se.$$scope={dirty:K,ctx:I}),o.$set(se);const Q={};K&1048864&&(Q.$$scope={dirty:K,ctx:I}),a.$set(Q);const ne={};K&1049152&&(ne.$$scope={dirty:K,ctx:I}),u.$set(ne);const X={};K&1048579&&(X.$$scope={dirty:K,ctx:I}),_.$set(X),(!B||K&8&&!qe($.src,O=I[3]))&&d($,"src",O),(!B||K&4&&D!==(D="my-3 row "+I[2]))&&d(p,"class",D)},i(I){B||(S(r.$$.fragment,I),S(o.$$.fragment,I),S(a.$$.fragment,I),S(u.$$.fragment,I),S(_.$$.fragment,I),I&&(P||Le(()=>{P=Ge(e,Je,{duration:500}),P.start()})),B=!0)},o(I){T(r.$$.fragment,I),T(o.$$.fragment,I),T(a.$$.fragment,I),T(u.$$.fragment,I),T(_.$$.fragment,I),B=!1},d(I){I&&E(e),U(r),U(o),U(a),U(u),U(_),ee=!1,$e(H)}}}function wp(t,e,r){let s,n,i="d-none",o,l,a,c,u,f,_;async function g(){r(7,u=l?"":"is-invalid"),r(8,f=a?"":"is-invalid"),r(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,r(4,l)}const b=()=>r(7,u="");function v(){a=this.value,r(5,a)}const w=()=>r(8,f="");function $(){c=this.value,r(6,c)}const O=()=>r(9,_="");function M(){s=this.files,r(0,s)}function k(F){or[F?"unshift":"push"](()=>{n=F,r(1,n)})}const D=()=>{r(1,n.value="",n),r(0,s="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(s&&s[0]){console.log(s),r(2,i="");const F=URL.createObjectURL(s[0]);r(3,o=F)}else r(2,i="d-none")},[s,n,i,o,l,a,c,u,f,_,g,p,b,v,w,$,O,M,k,D]}class yp extends we{constructor(e){super(),ve(this,e,wp,vp,be,{})}}function kp(t){let e,r;return e=new dn({props:{routes:{"*":Fd}}}),{c(){x(e.$$.fragment)},m(s,n){N(e,s,n),r=!0},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){U(e,s)}}}function $p(t){let e,r,s,n;return e=new jo({}),s=new dn({props:{routes:{"/":Pd,"/book/:bookID":Yo,"/author/:authorID":Lo,"/publisher/:publisherID":No,"/search":rr,"/search/author":rr,"/search/publisher":rr,"/add-book":ld,"/add-author":_p,"/add-publisher":yp,"/borrow":Xm,"/return":op,"*":Ca}}}),{c(){x(e.$$.fragment),r=y(),x(s.$$.fragment)},m(i,o){N(e,i,o),C(i,r,o),N(s,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(s.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(s.$$.fragment,i),n=!1},d(i){i&&E(r),U(e,i),U(s,i)}}}function Sp(t){let e,r,s,n;return e=new jo({}),s=new dn({props:{routes:{"/":Su,"/book/:bookID":Yo,"/author/:authorID":Lo,"/publisher/:publisherID":No,"/search":rr,"/search/author":rr,"/search/publisher":rr,"*":Ca}}}),{c(){x(e.$$.fragment),r=y(),x(s.$$.fragment)},m(i,o){N(e,i,o),C(i,r,o),N(s,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(s.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(s.$$.fragment,i),n=!1},d(i){i&&E(r),U(e,i),U(s,i)}}}function Op(t){let e,r,s,n;const i=[Sp,$p,kp],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(t),r=o[e]=i[e](t),{c(){r.c(),s=ze()},m(a,c){o[e].m(a,c),C(a,s,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),r=o[e],r||(r=o[e]=i[e](a),r.c()),S(r,1),r.m(s.parentNode,s))},i(a){n||(S(r),n=!0)},o(a){T(r),n=!1},d(a){a&&E(s),o[e].d(a)}}}function Tp(t,e,r){let s;return Pt.subscribe(n=>{r(0,s=n);const i=s=="staff"?"153827":s=="client"?"263690":"";er.set(i),localStorage.setItem("user_id",i)}),[s]}class Dp extends we{constructor(e){super(),ve(this,e,Tp,Op,be,{})}}new Dp({target:document.getElementById("app")})});export default Mp();
