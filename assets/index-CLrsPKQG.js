var Ua=Object.defineProperty;var Ha=(r,e,t)=>e in r?Ua(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Fa=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var es=(r,e,t)=>(Ha(r,typeof e!="symbol"?e+"":e,t),t);var Pb=Fa((jb,bn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ne(){}const js=r=>r;function zr(r,e){for(const t in e)r[t]=e[t];return r}function Ba(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function _l(r){return r()}function wi(){return Object.create(null)}function we(r){r.forEach(_l)}function Xr(r){return typeof r=="function"}function Se(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let ln;function Ke(r,e){return r===e?!0:(ln||(ln=document.createElement("a")),ln.href=e,r===ln.href)}function Wa(r){return Object.keys(r).length===0}function ml(r,...e){if(r==null){for(const n of e)n(void 0);return ne}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rn(r,e,t){r.$$.on_destroy.push(ml(e,t))}function jn(r,e,t,n){if(r){const s=pl(r,e,t,n);return r[0](s)}}function pl(r,e,t,n){return r[1]&&n?zr(t.ctx.slice(),r[1](n(e))):t.ctx}function An(r,e,t,n){if(r[2]&&n){const s=r[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|s[l];return i}return e.dirty|s}return e.dirty}function In(r,e,t,n,s,i){if(s){const o=pl(e,t,n,i);r.p(o,s)}}function Ln(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function yi(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}const gl=typeof window<"u";let bl=gl?()=>window.performance.now():()=>Date.now(),As=gl?r=>requestAnimationFrame(r):ne;const kr=new Set;function vl(r){kr.forEach(e=>{e.c(r)||(kr.delete(e),e.f())}),kr.size!==0&&As(vl)}function wl(r){let e;return kr.size===0&&As(vl),{promise:new Promise(t=>{kr.add(e={c:r,f:t})}),abort(){kr.delete(e)}}}function u(r,e){r.appendChild(e)}function yl(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function qa(r){const e=h("style");return e.textContent="/* empty */",Va(yl(r),e),e.sheet}function Va(r,e){return u(r.head||r,e),e.sheet}function M(r,e,t){r.insertBefore(e,t||null)}function O(r){r.parentNode&&r.parentNode.removeChild(r)}function xe(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function h(r){return document.createElement(r)}function X(r){return document.createTextNode(r)}function b(){return X(" ")}function ze(){return X("")}function W(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function ft(r){return function(e){return e.preventDefault(),r.call(this,e)}}function c(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Xt(r){return r===""?null:+r}function za(r){return Array.from(r.childNodes)}function ae(r,e){e=""+e,r.data!==e&&(r.data=e)}function q(r,e){r.value=e??""}function Ge(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,"")}function vn(r,e,t){for(let n=0;n<r.options.length;n+=1){const s=r.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function ki(r){const e=r.querySelector(":checked");return e&&e.__value}function kl(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}function wn(r,e){return new r(e)}const yn=new Map;let kn=0;function Ga(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Ja(r,e){const t={stylesheet:qa(e),rules:{}};return yn.set(r,t),t}function ms(r,e,t,n,s,i,o,l=0){const a=16.666/n;let f=`{
`;for(let y=0;y<=1;y+=a){const v=e+(t-e)*i(y);f+=y*100+`%{${o(v,1-v)}}
`}const d=f+`100% {${o(t,1-t)}}
}`,_=`__svelte_${Ga(d)}_${l}`,m=yl(r),{stylesheet:w,rules:p}=yn.get(m)||Ja(m,r);p[_]||(p[_]=!0,w.insertRule(`@keyframes ${_} ${d}`,w.cssRules.length));const g=r.style.animation||"";return r.style.animation=`${g?`${g}, `:""}${_} ${n}ms linear ${s}ms 1 both`,kn+=1,_}function ps(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(r.style.animation=n.join(", "),kn-=s,kn||xa())}function xa(){As(()=>{kn||(yn.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&O(e)}),yn.clear())})}let Gr;function It(r){Gr=r}function en(){if(!Gr)throw new Error("Function called outside component initialization");return Gr}function Dt(r){en().$$.on_mount.push(r)}function Ka(r){en().$$.after_update.push(r)}function Za(r){en().$$.on_destroy.push(r)}function $l(){const r=en();return(e,t,{cancelable:n=!1}={})=>{const s=r.$$.callbacks[e];if(s){const i=kl(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(r,i)}),!i.defaultPrevented}return!0}}function $n(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const br=[],dt=[];let $r=[];const $i=[],Sl=Promise.resolve();let gs=!1;function Tl(){gs||(gs=!0,Sl.then(Ls))}function Is(){return Tl(),Sl}function Ye(r){$r.push(r)}const ts=new Set;let dr=0;function Ls(){if(dr!==0)return;const r=Gr;do{try{for(;dr<br.length;){const e=br[dr];dr++,It(e),Qa(e.$$)}}catch(e){throw br.length=0,dr=0,e}for(It(null),br.length=0,dr=0;dt.length;)dt.pop()();for(let e=0;e<$r.length;e+=1){const t=$r[e];ts.has(t)||(ts.add(t),t())}$r.length=0}while(br.length);for(;$i.length;)$i.pop()();gs=!1,ts.clear(),It(r)}function Qa(r){if(r.fragment!==null){r.update(),we(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Ye)}}function Xa(r){const e=[],t=[];$r.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),$r=e}let Yr;function Dl(){return Yr||(Yr=Promise.resolve(),Yr.then(()=>{Yr=null})),Yr}function Br(r,e,t){r.dispatchEvent(kl(`${e?"intro":"outro"}${t}`))}const hn=new Set;let Lt;function Ie(){Lt={r:0,c:[],p:Lt}}function Le(){Lt.r||we(Lt.c),Lt=Lt.p}function E(r,e){r&&r.i&&(hn.delete(r),r.i(e))}function A(r,e,t,n){if(r&&r.o){if(hn.has(r))return;hn.add(r),Lt.c.push(()=>{hn.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}const Ol={duration:0};function Ze(r,e,t){const n={direction:"in"};let s=e(r,t,n),i=!1,o,l,a=0;function f(){o&&ps(r,o)}function d(){const{delay:m=0,duration:w=300,easing:p=js,tick:g=ne,css:y}=s||Ol;y&&(o=ms(r,0,1,w,m,p,y,a++)),g(0,1);const v=bl()+m,D=v+w;l&&l.abort(),i=!0,Ye(()=>Br(r,!0,"start")),l=wl(k=>{if(i){if(k>=D)return g(1,0),Br(r,!0,"end"),f(),i=!1;if(k>=v){const T=p((k-v)/w);g(T,1-T)}}return i})}let _=!1;return{start(){_||(_=!0,ps(r),Xr(s)?(s=s(n),Dl().then(d)):d())},invalidate(){_=!1},end(){i&&(f(),i=!1)}}}function Ot(r,e,t,n){let i=e(r,t,{direction:"both"}),o=n?0:1,l=null,a=null,f=null,d;function _(){f&&ps(r,f)}function m(p,g){const y=p.b-o;return g*=Math.abs(y),{a:o,b:p.b,d:y,duration:g,start:p.start,end:p.start+g,group:p.group}}function w(p){const{delay:g=0,duration:y=300,easing:v=js,tick:D=ne,css:k}=i||Ol,T={start:bl()+g,b:p};p||(T.group=Lt,Lt.r+=1),"inert"in r&&(p?d!==void 0&&(r.inert=d):(d=r.inert,r.inert=!0)),l||a?a=T:(k&&(_(),f=ms(r,o,p,y,g,v,k)),p&&D(0,1),l=m(T,y),Ye(()=>Br(r,p,"start")),wl($=>{if(a&&$>a.start&&(l=m(a,y),a=null,Br(r,l.b,"start"),k&&(_(),f=ms(r,o,l.b,l.duration,0,v,i.css))),l){if($>=l.end)D(o=l.b,1-o),Br(r,l.b,"end"),a||(l.b?_():--l.group.r||we(l.group.c)),l=null;else if($>=l.start){const S=$-l.start;o=l.a+l.d*v(S/l.duration),D(o,1-o)}}return!!(l||a)}))}return{run(p){Xr(i)?Dl().then(()=>{i=i({direction:p?"in":"out"}),w(p)}):w(p)},end(){_(),l=a=null}}}function rs(r,e){const t=e.token={};function n(s,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const f=s&&(e.current=s)(a);let d=!1;e.block&&(e.blocks?e.blocks.forEach((_,m)=>{m!==i&&_&&(Ie(),A(_,1,1,()=>{e.blocks[m]===_&&(e.blocks[m]=null)}),Le())}):e.block.d(1),f.c(),E(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[i]=f),d&&Ls()}if(Ba(r)){const s=en();if(r.then(i=>{It(s),n(e.then,1,e.value,i),It(null)},i=>{if(It(s),n(e.catch,2,e.error,i),It(null),!e.hasCatch)throw i}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function ns(r,e,t){const n=e.slice(),{resolved:s}=r;r.current===r.then&&(n[r.value]=s),r.current===r.catch&&(n[r.error]=s),r.block.p(n,t)}function ke(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Sn(r,e){const t={},n={},s={$$scope:1};let i=r.length;for(;i--;){const o=r[i],l=e[i];if(l){for(const a in o)a in l||(n[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);r[i]=l}else for(const a in o)s[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function Tn(r){return typeof r=="object"&&r!==null?r:{}}function Q(r){r&&r.c()}function K(r,e,t){const{fragment:n,after_update:s}=r.$$;n&&n.m(e,t),Ye(()=>{const i=r.$$.on_mount.map(_l).filter(Xr);r.$$.on_destroy?r.$$.on_destroy.push(...i):we(i),r.$$.on_mount=[]}),s.forEach(Ye)}function Z(r,e){const t=r.$$;t.fragment!==null&&(Xa(t.after_update),we(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function eu(r,e){r.$$.dirty[0]===-1&&(br.push(r),Tl(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function De(r,e,t,n,s,i,o=null,l=[-1]){const a=Gr;It(r);const f=r.$$={fragment:null,ctx:[],props:i,update:ne,not_equal:s,bound:wi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:wi(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(r,e.props||{},(_,m,...w)=>{const p=w.length?w[0]:m;return f.ctx&&s(f.ctx[_],f.ctx[_]=p)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](p),d&&eu(r,_)),m}):[],f.update(),d=!0,we(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const _=za(e.target);f.fragment&&f.fragment.l(_),_.forEach(O)}else f.fragment&&f.fragment.c();e.intro&&E(r.$$.fragment),K(r,e.target,e.anchor),Ls()}It(a)}class Oe{constructor(){es(this,"$$");es(this,"$$set")}$destroy(){Z(this,1),this.$destroy=ne}$on(e,t){if(!Xr(t))return ne;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Wa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const tu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tu);const hr=[];function Cl(r,e){return{subscribe:Yn(r,e).subscribe}}function Yn(r,e=ne){let t;const n=new Set;function s(l){if(Se(r,l)&&(r=l,t)){const a=!hr.length;for(const f of n)f[1](),hr.push(f,r);if(a){for(let f=0;f<hr.length;f+=2)hr[f][0](hr[f+1]);hr.length=0}}}function i(l){s(l(r))}function o(l,a=ne){const f=[l,a];return n.add(f),n.size===1&&(t=e(s,i)||ne),l(r),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function Ml(r,e,t){const n=!Array.isArray(r),s=n?[r]:r;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Cl(t,(o,l)=>{let a=!1;const f=[];let d=0,_=ne;const m=()=>{if(d)return;_();const p=e(n?f[0]:f,o,l);i?o(p):_=Xr(p)?p:ne},w=s.map((p,g)=>ml(p,y=>{f[g]=y,d&=~(1<<g),a&&m()},()=>{d|=1<<g}));return a=!0,m(),function(){we(w),_(),a=!1}})}const Qt=Yn(localStorage.getItem("accType")),_n=Yn(localStorage.getItem("user_id"));window.addEventListener("storage",function(r){let e;_n.subscribe(t=>e=t),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Qt.set(""),_n.set("")):(_n.set(localStorage.getItem("user_id")),Qt.set(localStorage.getItem("accType"))))});function ru(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,n,s,i,o=[],l="",a=r.split("/");for(a[0]||a.shift();s=a.shift();)t=s[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~n?n:~i?i:s.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function nu(r){let e,t,n;const s=[r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<s.length;d+=1)f=zr(f,s[d]);return a!==void 0&&a&4&&(f=zr(f,Sn(s,[Tn(l[2])]))),{props:f}}return i&&(e=wn(i,o(r)),e.$on("routeEvent",r[7])),{c(){e&&Q(e.$$.fragment),t=ze()},m(l,a){e&&K(e,l,a),M(l,t,a),n=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Ie();const f=e;A(f.$$.fragment,1,0,()=>{Z(f,1)}),Le()}i?(e=wn(i,o(l,a)),e.$on("routeEvent",l[7]),Q(e.$$.fragment),E(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&4?Sn(s,[Tn(l[2])]):{};e.$set(f)}},i(l){n||(e&&E(e.$$.fragment,l),n=!0)},o(l){e&&A(e.$$.fragment,l),n=!1},d(l){l&&O(t),e&&Z(e,l)}}}function su(r){let e,t,n;const s=[{params:r[1]},r[2]];var i=r[0];function o(l,a){let f={};for(let d=0;d<s.length;d+=1)f=zr(f,s[d]);return a!==void 0&&a&6&&(f=zr(f,Sn(s,[a&2&&{params:l[1]},a&4&&Tn(l[2])]))),{props:f}}return i&&(e=wn(i,o(r)),e.$on("routeEvent",r[6])),{c(){e&&Q(e.$$.fragment),t=ze()},m(l,a){e&&K(e,l,a),M(l,t,a),n=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Ie();const f=e;A(f.$$.fragment,1,0,()=>{Z(f,1)}),Le()}i?(e=wn(i,o(l,a)),e.$on("routeEvent",l[6]),Q(e.$$.fragment),E(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else if(i){const f=a&6?Sn(s,[a&2&&{params:l[1]},a&4&&Tn(l[2])]):{};e.$set(f)}},i(l){n||(e&&E(e.$$.fragment,l),n=!0)},o(l){e&&A(e.$$.fragment,l),n=!1},d(l){l&&O(t),e&&Z(e,l)}}}function iu(r){let e,t,n,s;const i=[su,nu],o=[];function l(a,f){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,[f]){let d=e;e=l(a),e===d?o[e].p(a,f):(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function Si(){const r=window.location.href.indexOf("#/");let e=r>-1?window.location.href.substr(r+1):"/";const t=e.indexOf("?");let n="";return t>-1&&(n=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:n}}const Ys=Cl(null,function(e){e(Si());const t=()=>{e(Si())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}),ou=Ml(Ys,r=>r.location),Ns=Ml(Ys,r=>r.querystring),Ti=Yn(void 0);async function bs(){await Is(),window.history.back()}async function Dn(r){if(!r||r.length<1||r.charAt(0)!="/"&&r.indexOf("#/")!==0)throw Error("Invalid parameter location");await Is();const e=(r.charAt(0)=="#"?"":"#")+r;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function lu(r){r?window.scrollTo(r.__svelte_spa_router_scrollX,r.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function au(r,e,t){let{routes:n={}}=e,{prefix:s=""}=e,{restoreScrollState:i=!1}=e;class o{constructor($,S){if(!S||typeof S!="function"&&(typeof S!="object"||S._sveltesparouter!==!0))throw Error("Invalid component object");if(!$||typeof $=="string"&&($.length<1||$.charAt(0)!="/"&&$.charAt(0)!="*")||typeof $=="object"&&!($ instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:C,keys:P}=ru($);this.path=$,typeof S=="object"&&S._sveltesparouter===!0?(this.component=S.component,this.conditions=S.conditions||[],this.userData=S.userData,this.props=S.props||{}):(this.component=()=>Promise.resolve(S),this.conditions=[],this.props={}),this._pattern=C,this._keys=P}match($){if(s){if(typeof s=="string")if($.startsWith(s))$=$.substr(s.length)||"/";else return null;else if(s instanceof RegExp){const N=$.match(s);if(N&&N[0])$=$.substr(N[0].length)||"/";else return null}}const S=this._pattern.exec($);if(S===null)return null;if(this._keys===!1)return S;const C={};let P=0;for(;P<this._keys.length;){try{C[this._keys[P]]=decodeURIComponent(S[P+1]||"")||null}catch{C[this._keys[P]]=null}P++}return C}async checkConditions($){for(let S=0;S<this.conditions.length;S++)if(!await this.conditions[S]($))return!1;return!0}}const l=[];n instanceof Map?n.forEach((T,$)=>{l.push(new o($,T))}):Object.keys(n).forEach(T=>{l.push(new o(T,n[T]))});let a=null,f=null,d={};const _=$l();async function m(T,$){await Is(),_(T,$)}let w=null,p=null;i&&(p=T=>{T.state&&(T.state.__svelte_spa_router_scrollY||T.state.__svelte_spa_router_scrollX)?w=T.state:w=null},window.addEventListener("popstate",p),Ka(()=>{lu(w)}));let g=null,y=null;const v=Ys.subscribe(async T=>{g=T;let $=0;for(;$<l.length;){const S=l[$].match(T.location);if(!S){$++;continue}const C={route:l[$].path,location:T.location,querystring:T.querystring,userData:l[$].userData,params:S&&typeof S=="object"&&Object.keys(S).length?S:null};if(!await l[$].checkConditions(C)){t(0,a=null),y=null,m("conditionsFailed",C);return}m("routeLoading",Object.assign({},C));const P=l[$].component;if(y!=P){P.loading?(t(0,a=P.loading),y=P,t(1,f=P.loadingParams),t(2,d={}),m("routeLoaded",Object.assign({},C,{component:a,name:a.name,params:f}))):(t(0,a=null),y=null);const N=await P();if(T!=g)return;t(0,a=N&&N.default||N),y=P}S&&typeof S=="object"&&Object.keys(S).length?t(1,f=S):t(1,f=null),t(2,d=l[$].props),m("routeLoaded",Object.assign({},C,{component:a,name:a.name,params:f})).then(()=>{Ti.set(f)});return}t(0,a=null),y=null,Ti.set(void 0)});Za(()=>{v(),p&&window.removeEventListener("popstate",p)});function D(T){$n.call(this,r,T)}function k(T){$n.call(this,r,T)}return r.$$set=T=>{"routes"in T&&t(3,n=T.routes),"prefix"in T&&t(4,s=T.prefix),"restoreScrollState"in T&&t(5,i=T.restoreScrollState)},r.$$.update=()=>{r.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,f,d,n,s,i,D,k]}class Us extends Oe{constructor(e){super(),De(this,e,au,iu,Se,{routes:3,prefix:4,restoreScrollState:5})}}const uu="modulepreload",cu=function(r){return"/library/"+r},Di={},Mr=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(t.map(l=>{if(l=cu(l),l in Di)return;Di[l]=!0;const a=l.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":uu,a||(d.as="script",d.crossOrigin=""),d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((_,m)=>{d.addEventListener("load",_),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},fu=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Mr(()=>Promise.resolve().then(()=>tn),void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Hs extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class du extends Hs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hu extends Hs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _u extends Hs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vs;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(vs||(vs={}));var mu=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};class pu{constructor(e,{headers:t={},customFetch:n,region:s=vs.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=fu(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return mu(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let l={},{region:a}=t;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let f;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(p=>{throw new du(p)}),_=d.headers.get("x-relay-error");if(_&&_==="true")throw new hu(d);if(!d.ok)throw new _u(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return m==="application/json"?w=yield d.json():m==="application/octet-stream"?w=yield d.blob():m==="text/event-stream"?w=d:m==="multipart/form-data"?w=yield d.formData():w=yield d.text(),{data:w,error:null}}catch(s){return{data:null,error:s}}})}}var gu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=gu();const bu=Pr.fetch,Fs=Pr.fetch.bind(Pr),Pl=Pr.Headers,vu=Pr.Request,wu=Pr.Response,tn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pl,Request:vu,Response:wu,default:Fs,fetch:bu},Symbol.toStringTag,{value:"Module"}));class yu extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class ku{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Fs:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let f=null,d=null,_=null,m=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&y&&y.length>1&&(_=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(f={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,_=null,m=406,w="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await i.text();try{f=JSON.parse(g),Array.isArray(f)&&i.status===404&&(d=[],f=null,m=200,w="OK")}catch{i.status===404&&g===""?(m=204,w="No Content"):f={message:g}}if(f&&this.isMaybeSingle&&(!((a=f==null?void 0:f.details)===null||a===void 0)&&a.includes("0 rows"))&&(f=null,m=200,w="OK"),f&&this.shouldThrowOnError)throw new yu(f)}return{error:f,data:d,count:_,status:m,statusText:w}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class $u extends ku{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${f}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class vr extends $u{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Su{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new vr({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new vr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(a.length>0){const f=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new vr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new vr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new vr({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Tu="1.15.2",Du={"X-Client-Info":`postgrest-js/${Tu}`};class Bs{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Du),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Su(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Bs(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(([d,_])=>_!==void 0).map(([d,_])=>[d,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([d,_])=>{l.searchParams.append(d,_)})):(o="POST",a=t);const f=Object.assign({},this.headers);return i&&(f.Prefer=`count=${i}`),new vr({method:o,url:l,headers:f,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Ou="2.9.5",Cu={"X-Client-Info":`realtime-js/${Ou}`},Mu="1.0.0",El=1e4,Pu=1e3;var Sr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Sr||(Sr={}));var ot;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ot||(ot={}));var gt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(gt||(gt={}));var ws;(function(r){r.websocket="websocket"})(ws||(ws={}));var or;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(or||(or={}));class Rl{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Eu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const a=n.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:f}}}class ss{constructor(e,t,n={},s=El){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Oi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Oi||(Oi={}));class Wr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Wr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wr.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(f,d)=>{o[f]||(a[f]=d)}),this.map(o,(f,d)=>{const _=i[f];if(_){const m=d.map(y=>y.presence_ref),w=_.map(y=>y.presence_ref),p=d.filter(y=>w.indexOf(y.presence_ref)<0),g=_.filter(y=>m.indexOf(y.presence_ref)<0);p.length>0&&(l[f]=p),g.length>0&&(a[f]=g)}else l[f]=d}),this.syncDiff(i,{joins:l,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var f;const d=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(a),d.length>0){const _=e[l].map(w=>w.presence_ref),m=d.filter(w=>_.indexOf(w.presence_ref)<0);e[l].unshift(...m)}n(l,d,a)}),this.map(o,(l,a)=>{let f=e[l];if(!f)return;const d=a.map(_=>_.presence_ref);f=f.filter(_=>d.indexOf(_.presence_ref)<0),e[l]=f,s(l,f,a),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var He;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(He||(He={}));const Ci=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ru(o,r,e,s),i),{})},Ru=(r,e,t,n)=>{const s=e.find(l=>l.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?jl(i,o):ys(o)},jl=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Lu(e,t)}switch(r){case He.bool:return ju(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return Au(e);case He.json:case He.jsonb:return Iu(e);case He.timestamp:return Yu(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return ys(e);default:return ys(e)}},ys=r=>r,ju=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Au=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Iu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Lu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>jl(e,l))}return r},Yu=r=>typeof r=="string"?r.replace(" ","T"):r;var Mi;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Mi||(Mi={}));var Pi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(Pi||(Pi={}));var Ei;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ei||(Ei={}));class Ws{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new ss(this,gt.join,this.params,this.timeout),this.rejoinTimer=new Rl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Wr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(f=>e&&e("CHANNEL_ERROR",f)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:f})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),f===void 0){e&&e("SUBSCRIBED");return}else{const _=this.bindings.postgres_changes,m=(d=_==null?void 0:_.length)!==null&&d!==void 0?d:0,w=[];for(let p=0;p<m;p++){const g=_[p],{filter:{event:y,schema:v,table:D,filter:k}}=g,T=f&&f[p];if(T&&T.event===y&&T.schema===v&&T.table===D&&T.filter===k)w.push(Object.assign(Object.assign({},g),{id:T.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e("SUBSCRIBED");return}}).receive("error",f=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(n=this.socket.apiKey)!==null&&n!==void 0?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new ss(this,gt.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ss(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:f,join:d}=gt;if(n&&[l,a,f,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,t,n);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var p,g,y;return((p=w.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=w.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(w=>w.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(w=>{var p,g,y,v,D,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in w){const T=w.id,$=(p=w.filter)===null||p===void 0?void 0:p.event;return T&&((g=t.ids)===null||g===void 0?void 0:g.includes(T))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const T=(D=(v=w==null?void 0:w.filter)===null||v===void 0?void 0:v.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return T==="*"||T===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===o}).map(w=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:g,table:y,commit_timestamp:v,type:D,errors:k}=p;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:v,eventType:D,new:{},old:{},errors:k}),this._getPayloadRecords(p))}w.callback(m,n)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Ws.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gt.close,{},e)}_onError(e){this._on(gt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ci(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ci(e.columns,e.old_record)),t}}const Nu=()=>{},Uu=typeof WebSocket<"u";class Hu{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Cu,this.params={},this.timeout=El,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Nu,this.conn=null,this.sendBuffer=[],this.serializer=new Eu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Mr(()=>Promise.resolve().then(()=>tn),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ws.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Uu){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Fu(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Mr(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Sr.connecting:return or.Connecting;case Sr.open:return or.Open;case Sr.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}channel(e,t={config:{}}){const n=new Ws(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(gt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mu}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Fu{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Sr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class qs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Bu extends qs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ri extends qs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Wu=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};const Al=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Mr(()=>Promise.resolve().then(()=>tn),void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},qu=()=>Wu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mr(()=>Promise.resolve().then(()=>tn),void 0)).Response:Response});var Er=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};const is=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Vu=(r,e)=>Er(void 0,void 0,void 0,function*(){const t=yield qu();r instanceof t?r.json().then(n=>{e(new Bu(is(n),r.status||500))}).catch(n=>{e(new Ri(is(n),n))}):e(new Ri(is(r),r))}),zu=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function Nn(r,e,t,n,s,i){return Er(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,zu(e,n,s,i)).then(a=>{if(!a.ok)throw a;return n!=null&&n.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Vu(a,l))})})}function ks(r,e,t,n){return Er(this,void 0,void 0,function*(){return Nn(r,"GET",e,t,n)})}function Gt(r,e,t,n,s){return Er(this,void 0,void 0,function*(){return Nn(r,"POST",e,n,s,t)})}function Gu(r,e,t,n,s){return Er(this,void 0,void 0,function*(){return Nn(r,"PUT",e,n,s,t)})}function Il(r,e,t,n,s){return Er(this,void 0,void 0,function*(){return Nn(r,"DELETE",e,n,s,t)})}var ut=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};const Ju={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ji={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xu{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Al(s)}uploadOrUpdate(e,t,n,s){return ut(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ji),s),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl)):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),f=this._getFinalPath(a),d=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),_=yield d.json();return d.ok?{data:{path:a,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return ut(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const f=Object.assign({upsert:ji.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",f.cacheControl),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",f.cacheControl)):(a=n,d["cache-control"]=`max-age=${f.cacheControl}`,d["content-type"]=f.contentType);const _=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:d}),m=yield _.json();return _.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return ut(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const n=yield Gt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),i=s.searchParams.get("token");if(!i)throw new qs("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}update(e,t,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return ut(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}copy(e,t){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield Gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return ut(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Gt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return ut(this,void 0,void 0,function*(){try{const s=yield Gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}download(e,t){return ut(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ks(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&s.push(a);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${f}`)}}}remove(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}list(e,t,n){return ut(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ju),t),{prefix:e||""});return{data:yield Gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ku="2.5.5",Zu={"X-Client-Info":`storage-js/${Ku}`};var _r=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};class Qu{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Zu),t),this.fetch=Al(n)}listBuckets(){return _r(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}getBucket(e){return _r(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return _r(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return _r(this,void 0,void 0,function*(){try{return{data:yield Gu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return _r(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _r(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}}class Xu extends Qu{constructor(e,t={},n){super(e,t,n)}from(e){return new xu(this.url,this.headers,e,this.fetch)}}const ec="2.43.2";let Fr="";typeof Deno<"u"?Fr="deno":typeof document<"u"?Fr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fr="react-native":Fr="node";const tc={"X-Client-Info":`supabase-js-${Fr}/${ec}`},rc={headers:tc},nc={schema:"public"},sc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ic={};var oc=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};const lc=r=>{let e;return r?e=r:typeof fetch>"u"?e=Fs:e=fetch,(...t)=>e(...t)},ac=()=>typeof Headers>"u"?Pl:Headers,uc=(r,e,t)=>{const n=lc(t),s=ac();return(i,o)=>oc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:r;let f=new s(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",r),f.has("Authorization")||f.set("Authorization",`Bearer ${a}`),n(i,Object.assign(Object.assign({},o),{headers:f}))})};function cc(r){return r.replace(/\/$/,"")}function fc(r,e){const{db:t,auth:n,realtime:s,global:i}=r,{db:o,auth:l,realtime:a,global:f}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},a),s),global:Object.assign(Object.assign({},f),i)}}const Ll="2.64.2",dc="http://localhost:9999",hc="supabase.auth.token",_c={"X-Client-Info":`gotrue-js/${Ll}`},Ai=10,$s="X-Supabase-Api-Version",Yl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function mc(r){return Math.round(Date.now()/1e3)+r}function pc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const pt=()=>typeof document<"u",rr={tested:!1,writable:!1},qr=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function os(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const Nl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Mr(()=>Promise.resolve().then(()=>tn),void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},gc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ul=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},an=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ls=async(r,e)=>{await r.removeItem(e)};function bc(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,i,o,l,a,f,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)o=e.indexOf(r.charAt(d++)),l=e.indexOf(r.charAt(d++)),a=e.indexOf(r.charAt(d++)),f=e.indexOf(r.charAt(d++)),n=o<<2|l>>4,s=(l&15)<<4|a>>2,i=(a&3)<<6|f,t=t+String.fromCharCode(n),a!=64&&s!=0&&(t=t+String.fromCharCode(s)),f!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Un{constructor(){this.promise=new Un.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Un.promiseConstructor=Promise;function Ii(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(bc(n))}async function vc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function wc(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function yc(r){return("0"+r.toString(16)).substr(-2)}function kc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,yc).join("")}async function $c(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Sc(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await $c(r);return Sc(t)}async function mr(r,e,t=!1){const n=kc();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Ul(r,`${e}-code-verifier`,s);const i=await Tc(n);return[i,n===i?"plain":"s256"]}const Dc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Oc(r){const e=r.headers.get($s);if(!e||!e.match(Dc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Vs extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function $e(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Cc extends Vs{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Mc(r){return $e(r)&&r.name==="AuthApiError"}class Hl extends Vs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ur extends Vs{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class nr extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class as extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class un extends ur{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cn extends ur{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Li extends ur{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ss extends ur{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function us(r){return $e(r)&&r.name==="AuthRetryableFetchError"}class Yi extends ur{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Pc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const ir=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ec=[502,503,504];async function Ni(r){var e;if(!gc(r))throw new Ss(ir(r),0);if(Ec.includes(r.status))throw new Ss(ir(r),r.status);let t;try{t=await r.json()}catch(i){throw new Hl(ir(i),i)}let n;const s=Oc(r);if(s&&s.getTime()>=Yl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Yi(ir(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yi(ir(t),r.status,t.weak_password.reasons);throw new Cc(ir(t),r.status||500,n)}const Rc=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function Ce(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[$s]||(i[$s]=Yl["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await jc(r,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(a):{data:Object.assign({},a),error:null}}async function jc(r,e,t,n,s,i){const o=Rc(e,n,s,i);let l;try{l=await r(t,Object.assign({},o))}catch(a){throw console.error(a),new Ss(ir(a),0)}if(l.ok||await Ni(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(a){await Ni(a)}}function zt(r){var e;let t=null;Yc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=mc(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Ui(r){const e=zt(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Jt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ac(r){return{data:r,error:null}}function Ic(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=Pc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Lc(r){return r}function Yc(r){return r.access_token&&r.refresh_token&&r.expires_in}var Nc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class Uc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Nl(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jt})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Nc(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ic,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if($e(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(t){if($e(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,l,a;try{const f={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Lc});if(d.error)throw d.error;const _=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,w=(a=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return w.length>0&&(w.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);f[`${y}Page`]=g}),f.total=parseInt(m)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if($e(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(t){if($e(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jt})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jt})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if($e(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}}}const Hc={getItem:r=>qr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{qr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{qr()&&globalThis.localStorage.removeItem(r)}};function Hi(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Fc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pr={debug:!!(globalThis&&qr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fl extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bc extends Fl{}async function Wc(r,e,t){pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),pr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Bc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(pr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Fc();const qc={url:dc,storageKey:hc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_c,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Nr=30*1e3,Fi=3;async function Bi(r,e,t){return await t()}class Jr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jr.nextInstanceID,Jr.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qc),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Uc({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Nl(s.fetch),this.lock=s.lock||Bi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:pt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Wc:this.lock=Bi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:qr()?this.storage=Hc:(this.memoryStorage={},this.storage=Hi(this.memoryStorage)):(this.memoryStorage={},this.storage=Hi(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ll}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=pt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),(n==null?void 0:n.message)==="Identity is already linked"||(n==null?void 0:n.message)==="Identity is already linked to another user"?{error:n}:(await this._removeSession(),{error:n});const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $e(e)?{error:e}:{error:new Hl("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{await this._removeSession();const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:zt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{await this._removeSession();let i;if("email"in e){const{email:d,password:_,options:m}=e;let w=null,p=null;this.flowType==="pkce"&&([w,p]=await mr(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:_,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:w,code_challenge_method:p},xform:zt})}else if("phone"in e){const{phone:d,password:_,options:m}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:_,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:zt})}else throw new un("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(i){if($e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ui})}else throw new un("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new as}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await an(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/"),{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:zt});return await ls(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new as}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:zt}),{data:a,error:f}=l;return f?{data:{user:null,session:null},error:f}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new as}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:f})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let f=null,d=null;this.flowType==="pkce"&&([f,d]=await mr(this.storage,this.storageKey));const{error:_}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(n=a==null?void 0:a.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:f,code_challenge_method:d},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:l,options:a}=e,{data:f,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:d}}throw new un("You must provide either an email or phone number.")}catch(l){if($e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:zt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,f=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:f,session:a},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await mr(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ac})}catch(i){if($e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new nr;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new un("You must provide either an email or phone number and a type")}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await an(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,f,d){return!o&&f==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,f,d)}})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt}):await this._useSession(async t=>{var n,s,i;const{data:o,error:l}=t;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Jt})})}catch(t){if($e(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new nr;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await mr(this.storage,this.storageKey));const{data:f,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Jt});if(d)throw d;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Ii(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nr;const t=Date.now()/1e3;let n=t,s=!0,i=null;const o=Ii(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if($e(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new nr;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!pt())throw new cn("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new cn("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Li("Not a valid PKCE flow url.");const t=os(window.location.href);if(e){if(!t.code)throw new Li("No code detected.");const{data:D,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:D.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new cn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:f}=t;if(!i||!l||!o||!f)throw new cn("No session defined in URL");const d=Math.round(Date.now()/1e3),_=parseInt(l);let m=d+_;a&&(m=parseInt(a));const w=m-d;w*1e3<=Nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const p=m-_;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,m,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:_,expires_at:m,refresh_token:o,token_type:f,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(t){if($e(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=os(window.location.href);return!!(pt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=os(window.location.href),t=await an(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Mc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ls(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=pc(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await mr(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if($e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,a,f,d;const{data:_,error:m}=i;if(m)throw m;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",w,{headers:this.headers,jwt:(d=(f=_.session)===null||f===void 0?void 0:f.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return pt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($e(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await wc(async s=>(s>0&&await vc(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:zt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&us(i)&&Date.now()+o-n<Nr})}catch(n){if(this._debug(t,"error",n),$e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),pt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await an(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+Ai;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ai}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),us(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Un;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$e(i)){const o={session:null,error:i};return us(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ul(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ls(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Nr}ms, refresh threshold is ${Fi} ticks`),s<=Fi&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Fl)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await mr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:a}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if($e(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if($e(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if($e(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:d},error:null}}))}}Jr.nextInstanceID=0;const Vc=Jr;class zc extends Vc{constructor(e){super(e)}}var Gc=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{f(n.next(d))}catch(_){o(_)}}function a(d){try{f(n.throw(d))}catch(_){o(_)}}function f(d){d.done?i(d.value):s(d.value).then(l,a)}f((n=n.apply(r,e||[])).next())})};class Jc{constructor(e,t,n){var s,i,o,l,a,f,d,_;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const m=cc(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:nc,realtime:ic,auth:Object.assign(Object.assign({},sc),{storageKey:w}),global:rc},g=fc(n??{},p);this.storageKey=(i=(s=g.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=g.auth)!==null&&a!==void 0?a:{},this.headers,(f=g.global)===null||f===void 0?void 0:f.fetch),this.fetch=uc(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new Bs(`${m}/rest/v1`,{headers:this.headers,schema:(_=g.db)===null||_===void 0?void 0:_.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new pu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Gc(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,debug:l},a,f){var d;const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zc({url:this.authUrl,headers:Object.assign(Object.assign({},_),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:o,debug:l,fetch:f,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new Hu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xc=(r,e,t)=>new Jc(r,e,t),le=xc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function Wi(r){let e,t,n,s;return{c(){e=X(`|\r
          `),t=h("a"),t.innerHTML='<i class="bi bi-journal-arrow-up"></i> Borrow',n=b(),s=h("a"),s.innerHTML='<i class="bi bi-journal-arrow-down"></i> Return',c(t,"class","nav-link svelte-w9uiv3"),c(t,"href","./#/borrow"),c(s,"class","nav-link svelte-w9uiv3"),c(s,"href","./#/return")},m(i,o){M(i,e,o),M(i,t,o),M(i,n,o),M(i,s,o)},d(i){i&&(O(e),O(t),O(n),O(s))}}}function Kc(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee=r[0]=="staff"&&Wi();return{c(){e=h("nav"),t=h("div"),n=h("a"),n.innerHTML=`<i class="bi bi-book"></i>
      Zenodotus
      <small class="fs-6 text-white-50 ms-2 d-xl-inline d-none">CTADVDBL Project</small>`,s=b(),i=h("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=b(),l=h("div"),a=h("div"),f=h("a"),f.innerHTML='<i class="bi bi-house-door"></i> Home',d=b(),_=h("a"),_.innerHTML='<i class="bi bi-journal"></i> Books',m=b(),w=h("a"),w.innerHTML='<i class="bi bi-person"></i> Authors',p=b(),g=h("a"),g.innerHTML='<i class="bi bi-building"></i> Publishers',y=b(),ee&&ee.c(),v=X(`\r
        | \r
        `),D=h("li"),k=h("a"),T=h("i"),$=b(),S=X(r[1]),C=b(),P=h("ul"),N=h("li"),N.innerHTML='<a class="dropdown-item svelte-w9uiv3" href="./#/profile"><i class="bi bi-person-fill"></i> Profile</a>',L=b(),H=h("li"),I=h("a"),F=h("span"),x=X(" "),U=X(r[2]),Y=b(),B=h("li"),B.innerHTML='<hr class="dropdown-divider"/>',G=b(),V=h("li"),j=h("a"),j.innerHTML='<i class="bi bi-door-open-fill"></i> Log Out',c(n,"class","navbar-brand m-0 px-2 svelte-w9uiv3"),c(n,"href","./#/"),c(i,"class","navbar-toggler"),c(i,"type","button"),c(i,"data-bs-toggle","collapse"),c(i,"data-bs-target","#navbarContent"),c(f,"class","nav-link svelte-w9uiv3"),c(f,"href","./#/"),c(_,"class","nav-link svelte-w9uiv3"),c(_,"href","./#/search"),c(w,"class","nav-link svelte-w9uiv3"),c(w,"href","./#/search/author"),c(g,"class","nav-link svelte-w9uiv3"),c(g,"href","./#/search/publisher"),c(T,"class","bi bi-person-fill"),c(k,"class","nav-link dropdown-toggle svelte-w9uiv3"),c(k,"href","#"),c(k,"role","button"),c(k,"data-bs-toggle","dropdown"),c(k,"aria-expanded","false"),c(F,"class",R="bi bi-"+r[3]+" svelte-w9uiv3"),c(I,"class","dropdown-item svelte-w9uiv3"),c(I,"href","./#/"),c(j,"class","dropdown-item text-danger svelte-w9uiv3"),c(j,"href","./#/"),c(P,"class","dropdown-menu"),c(D,"class","nav-item dropdown"),c(a,"class","navbar-nav ms-auto text-center align-items-center svelte-w9uiv3"),c(l,"class","collapse navbar-collapse"),c(l,"id","navbarContent"),c(t,"class","container px-4 fw-semibold"),c(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow d-print-none")},m(te,ce){M(te,e,ce),u(e,t),u(t,n),u(t,s),u(t,i),u(t,o),u(t,l),u(l,a),u(a,f),u(a,d),u(a,_),u(a,m),u(a,w),u(a,p),u(a,g),u(a,y),ee&&ee.m(a,null),u(a,v),u(a,D),u(D,k),u(k,T),u(k,$),u(k,S),u(D,C),u(D,P),u(P,N),u(P,L),u(P,H),u(H,I),u(I,F),u(I,x),u(I,U),u(P,Y),u(P,B),u(P,G),u(P,V),u(V,j),J||(z=[W(I,"click",ft(r[4])),W(j,"click",r[5])],J=!0)},p(te,[ce]){te[0]=="staff"?ee||(ee=Wi(),ee.c(),ee.m(a,v)):ee&&(ee.d(1),ee=null),ce&2&&ae(S,te[1]),ce&8&&R!==(R="bi bi-"+te[3]+" svelte-w9uiv3")&&c(F,"class",R),ce&4&&ae(U,te[2])},i:ne,o:ne,d(te){te&&O(e),ee&&ee.d(),J=!1,we(z)}}}function Zc(r,e,t){let n,s,i,o=localStorage.getItem("user_id");Qt.subscribe(m=>t(0,i=m)),a();let l="";async function a(){const{data:m,error:w}=await le.from("account_details").select("lname").eq("user_id",o).single();w&&console.error(w),console.log(o,m),t(1,l=m.lname)}let f=localStorage.getItem("theme")||"light";function d(){t(6,f=f=="light"?"dark":"light"),localStorage.setItem("theme",f)}async function _(){if(i=="client"){const{error:m}=await le.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,stud_id:o});m&&console.error(m)}else{const{error:m}=await le.from("reports").insert({report_type:"Log Out",report_details:`${o} logged out`,staff_id:o});m&&console.error(m)}Qt.set(""),_n.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return r.$$.update=()=>{r.$$.dirty&64&&document.querySelector("body").setAttribute("data-bs-theme",f),r.$$.dirty&64&&t(3,n=f=="dark"?"brightness-high-fill":"moon-stars-fill"),r.$$.dirty&64&&t(2,s=f=="dark"?"Light Theme":"Dark Theme")},[i,l,s,n,d,_,f]}class Bl extends Oe{constructor(e){super(),De(this,e,Zc,Kc,Se,{})}}function Qc(r){let e;return{c(){e=h("section"),e.innerHTML='<div id="homeAdCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000"><div class="carousel-inner"><div class="carousel-item active"><img src="./carousel/1.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/2.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/3.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/4.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/5.jpg" class="d-block w-100" alt="..."/></div> <div class="carousel-item"><img src="./carousel/6.jpg" class="d-block w-100" alt="..."/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button> <button class="carousel-control-next" type="button" data-bs-target="#homeAdCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button></div>'},m(t,n){M(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&O(e)}}}class Xc extends Oe{constructor(e){super(),De(this,e,null,Qc,Se,{})}}function ef(r){let e,t,n,s;return{c(){e=h("img"),Ke(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[0]+".jpg")||c(e,"src",t),c(e,"alt","book cover"),c(e,"class","svelte-1a99e4f")},m(i,o){M(i,e,o),n||(s=W(e,"error",r[4]),n=!0)},p(i,o){o&1&&!Ke(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[0]+".jpg")&&c(e,"src",t)},d(i){i&&O(e),n=!1,s()}}}function tf(r){let e,t;return{c(){e=h("img"),Ke(e.src,t="./book-cover.png")||c(e,"src",t),c(e,"alt","book cover"),c(e,"class","svelte-1a99e4f")},m(n,s){M(n,e,s)},p:ne,d(n){n&&O(e)}}}function rf(r){let e,t,n,s,i,o,l,a,f,d,_,m;function w(y,v){return y[3]?tf:ef}let p=w(r),g=p(r);return{c(){e=h("div"),g.c(),t=b(),n=h("div"),s=h("h5"),i=h("a"),o=X(r[1]),a=b(),f=h("small"),d=h("i"),_=b(),m=X(r[2]),c(i,"class","stretched-link svelte-1a99e4f"),c(i,"href",l="./#/book/"+r[0]),c(s,"class","card-title"),c(d,"class","bi bi-person"),c(f,"class","card-text"),c(n,"class","card-body"),c(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(y,v){M(y,e,v),g.m(e,null),u(e,t),u(e,n),u(n,s),u(s,i),u(i,o),u(n,a),u(n,f),u(f,d),u(f,_),u(f,m)},p(y,[v]){p===(p=w(y))&&g?g.p(y,v):(g.d(1),g=p(y),g&&(g.c(),g.m(e,t))),v&2&&ae(o,y[1]),v&1&&l!==(l="./#/book/"+y[0])&&c(i,"href",l),v&4&&ae(m,y[2])},i:ne,o:ne,d(y){y&&O(e),g.d()}}}function nf(r,e,t){let{id:n=0}=e,{title:s}=e,{author:i}=e,o=!1;const l=()=>t(3,o=!0);return r.$$set=a=>{"id"in a&&t(0,n=a.id),"title"in a&&t(1,s=a.title),"author"in a&&t(2,i=a.author)},[n,s,i,o,l]}class Hn extends Oe{constructor(e){super(),De(this,e,nf,rf,Se,{id:0,title:1,author:2})}}function qi(r){let e,t,n,s,i,o,l;return{c(){e=h("div"),t=h("a"),n=h("button"),s=X(r[3]),i=b(),o=h("i"),c(o,"class","bi bi-arrow-right"),c(n,"class","btn btn-outline-primary btn-sm"),c(t,"href",l="./#/"+r[2]),c(e,"class","align-middle align-self-center")},m(a,f){M(a,e,f),u(e,t),u(t,n),u(n,s),u(n,i),u(n,o)},p(a,f){f&8&&ae(s,a[3]),f&4&&l!==(l="./#/"+a[2])&&c(t,"href",l)},d(a){a&&O(e)}}}function sf(r){let e,t,n,s,i,o,l,a,f,d,_=r[2]!==""&&qi(r);const m=r[5].default,w=jn(m,r,r[4],null);return{c(){e=h("section"),t=h("div"),n=h("h4"),s=h("i"),o=b(),l=X(r[0]),a=b(),_&&_.c(),f=b(),w&&w.c(),c(s,"class",i="bi bi-"+r[1]),c(n,"class","my-3"),c(t,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,g){M(p,e,g),u(e,t),u(t,n),u(n,s),u(n,o),u(n,l),u(t,a),_&&_.m(t,null),u(e,f),w&&w.m(e,null),d=!0},p(p,[g]){(!d||g&2&&i!==(i="bi bi-"+p[1]))&&c(s,"class",i),(!d||g&1)&&ae(l,p[0]),p[2]!==""?_?_.p(p,g):(_=qi(p),_.c(),_.m(t,null)):_&&(_.d(1),_=null),w&&w.p&&(!d||g&16)&&In(w,m,p,p[4],d?An(m,p[4],g,null):Ln(p[4]),null)},i(p){d||(E(w,p),d=!0)},o(p){A(w,p),d=!1},d(p){p&&O(e),_&&_.d(),w&&w.d(p)}}}function of(r,e,t){let{$$slots:n={},$$scope:s}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return r.$$set=f=>{"title"in f&&t(0,i=f.title),"icon"in f&&t(1,o=f.icon),"link"in f&&t(2,l=f.link),"linkText"in f&&t(3,a=f.linkText),"$$scope"in f&&t(4,s=f.$$scope)},[i,o,l,a,s,n]}class Tt extends Oe{constructor(e){super(),De(this,e,of,sf,Se,{title:0,icon:1,link:2,linkText:3})}}function lf(r){const e=r-1;return e*e*e+1}function Qe(r,{delay:e=0,duration:t=400,easing:n=js}={}){const s=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Ct(r,{delay:e=0,duration:t=400,easing:n=lf,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(r),a=+l.opacity,f=l.transform==="none"?"":l.transform,d=a*(1-o),[_,m]=yi(s),[w,p]=yi(i);return{delay:e,duration:t,easing:n,css:(g,y)=>`
			transform: ${f} translate(${(1-g)*_}${m}, ${(1-g)*w}${p});
			opacity: ${a-d*y}`}}function af(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',c(e,"class","d-flex justify-content-center")},m(t,n){M(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&O(e)}}}class er extends Oe{constructor(e){super(),De(this,e,null,af,Se,{})}}function uf(r){let e,t,n,s,i,o,l,a,f;return{c(){e=h("div"),t=h("img"),s=b(),i=h("div"),o=h("h6"),l=h("a"),a=X(r[0]),c(t,"class","object-fit-contain rounded my-2"),c(t,"height","150"),Ke(t.src,n="./default-profile.jpg")||c(t,"src",n),c(t,"alt","author"),c(l,"class","stretched-link svelte-1rzxrzv"),c(l,"href",f="./#/author/"+r[1]),c(o,"class","card-title text-center"),c(i,"class","card-body p-1"),c(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,_){M(d,e,_),u(e,t),u(e,s),u(e,i),u(i,o),u(o,l),u(l,a)},p(d,[_]){_&1&&ae(a,d[0]),_&2&&f!==(f="./#/author/"+d[1])&&c(l,"href",f)},i:ne,o:ne,d(d){d&&O(e)}}}function cf(r,e,t){let{name:n}=e,{id:s}=e;return r.$$set=i=>{"name"in i&&t(0,n=i.name),"id"in i&&t(1,s=i.id)},[n,s]}class Wl extends Oe{constructor(e){super(),De(this,e,cf,uf,Se,{name:0,id:1})}}function ff(r){let e,t,n,s,i,o,l,a,f;return{c(){e=h("div"),t=h("img"),s=b(),i=h("div"),o=h("h6"),l=h("a"),a=X(r[0]),c(t,"class","object-fit-contain rounded my-2"),c(t,"height","150"),Ke(t.src,n="./default-profile.jpg")||c(t,"src",n),c(t,"alt","publisher"),c(l,"class","stretched-link svelte-1rzxrzv"),c(l,"href",f="./#/publisher/"+r[1]),c(o,"class","card-title text-center"),c(i,"class","card-body p-1"),c(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(d,_){M(d,e,_),u(e,t),u(e,s),u(e,i),u(i,o),u(o,l),u(l,a)},p(d,[_]){_&1&&ae(a,d[0]),_&2&&f!==(f="./#/publisher/"+d[1])&&c(l,"href",f)},i:ne,o:ne,d(d){d&&O(e)}}}function df(r,e,t){let{name:n}=e,{id:s}=e;return r.$$set=i=>{"name"in i&&t(0,n=i.name),"id"in i&&t(1,s=i.id)},[n,s]}class ql extends Oe{constructor(e){super(),De(this,e,df,ff,Se,{name:0,id:1})}}function hf(r){let e,t,n,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),n=h("h2"),n.textContent="Error",s=b(),i=h("p"),o=X(r[0]),l=X(": "),a=X(r[1]),f=b(),d=h("a"),d.textContent="Reload",c(d,"href","./#/"),c(d,"class","fw-bold"),c(t,"class","text-center"),c(e,"class","d-flex align-items-center justify-content-center my-3")},m(_,m){M(_,e,m),u(e,t),u(t,n),u(t,s),u(t,i),u(i,o),u(i,l),u(i,a),u(t,f),u(t,d)},p(_,[m]){m&1&&ae(o,_[0]),m&2&&ae(a,_[1])},i:ne,o:ne,d(_){_&&O(e)}}}function _f(r,e,t){let{code:n="err"}=e,{message:s}=e;return r.$$set=i=>{"code"in i&&t(0,n=i.code),"message"in i&&t(1,s=i.message)},[n,s]}let Fn=class extends Oe{constructor(e){super(),De(this,e,_f,hf,Se,{code:0,message:1})}};function mf(r){let e,t,n,s,i,o,l,a,f,d,_;return{c(){e=h("div"),t=h("div"),n=h("h5"),s=h("a"),i=X(r[1]),l=b(),a=h("div"),f=h("span"),d=X(r[2]),c(s,"class","stretched-link svelte-9p7s9b"),c(s,"href",o="./#/book/"+r[0]),c(n,"class","card-title"),c(f,"class",_="badge rounded-pill text-bg-"+r[3]+" svelte-9p7s9b"),c(t,"class","card-body"),c(e,"class","card col-md-3 col-10 svelte-9p7s9b")},m(m,w){M(m,e,w),u(e,t),u(t,n),u(n,s),u(s,i),u(t,l),u(t,a),u(a,f),u(f,d)},p(m,[w]){w&2&&ae(i,m[1]),w&1&&o!==(o="./#/book/"+m[0])&&c(s,"href",o),w&4&&ae(d,m[2]),w&8&&_!==(_="badge rounded-pill text-bg-"+m[3]+" svelte-9p7s9b")&&c(f,"class",_)},i:ne,o:ne,d(m){m&&O(e)}}}function pf(r,e,t){let{id:n=0}=e,{title:s}=e,{label:i}=e,{color:o}=e;return r.$$set=l=>{"id"in l&&t(0,n=l.id),"title"in l&&t(1,s=l.title),"label"in l&&t(2,i=l.label),"color"in l&&t(3,o=l.color)},[n,s,i,o]}class gf extends Oe{constructor(e){super(),De(this,e,pf,mf,Se,{id:0,title:1,label:2,color:3})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Vl;function re(){return Vl.apply(null,arguments)}function bf(r){Vl=r}function vt(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function ar(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function Ee(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function zs(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(Ee(r,e))return!1;return!0}function nt(r){return r===void 0}function Ft(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function rn(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function zl(r,e){var t=[],n,s=r.length;for(n=0;n<s;++n)t.push(e(r[n],n));return t}function xt(r,e){for(var t in e)Ee(e,t)&&(r[t]=e[t]);return Ee(e,"toString")&&(r.toString=e.toString),Ee(e,"valueOf")&&(r.valueOf=e.valueOf),r}function Pt(r,e,t,n){return ma(r,e,t,n,!0).utc()}function vf(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ve(r){return r._pf==null&&(r._pf=vf()),r._pf}var Ts;Array.prototype.some?Ts=Array.prototype.some:Ts=function(r){var e=Object(this),t=e.length>>>0,n;for(n=0;n<t;n++)if(n in e&&r.call(this,e[n],n,e))return!0;return!1};function Gs(r){var e=null,t=!1,n=r._d&&!isNaN(r._d.getTime());if(n&&(e=ve(r),t=Ts.call(e.parsedDateParts,function(s){return s!=null}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=n;else return n;return r._isValid}function Bn(r){var e=Pt(NaN);return r!=null?xt(ve(e),r):ve(e).userInvalidated=!0,e}var Vi=re.momentProperties=[],cs=!1;function Js(r,e){var t,n,s,i=Vi.length;if(nt(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),nt(e._i)||(r._i=e._i),nt(e._f)||(r._f=e._f),nt(e._l)||(r._l=e._l),nt(e._strict)||(r._strict=e._strict),nt(e._tzm)||(r._tzm=e._tzm),nt(e._isUTC)||(r._isUTC=e._isUTC),nt(e._offset)||(r._offset=e._offset),nt(e._pf)||(r._pf=ve(e)),nt(e._locale)||(r._locale=e._locale),i>0)for(t=0;t<i;t++)n=Vi[t],s=e[n],nt(s)||(r[n]=s);return r}function nn(r){Js(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),cs===!1&&(cs=!0,re.updateOffset(this),cs=!1)}function wt(r){return r instanceof nn||r!=null&&r._isAMomentObject!=null}function Gl(r){re.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function ht(r,e){var t=!0;return xt(function(){if(re.deprecationHandler!=null&&re.deprecationHandler(null,r),t){var n=[],s,i,o,l=arguments.length;for(i=0;i<l;i++){if(s="",typeof arguments[i]=="object"){s+=`
[`+i+"] ";for(o in arguments[0])Ee(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[i];n.push(s)}Gl(r+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var zi={};function Jl(r,e){re.deprecationHandler!=null&&re.deprecationHandler(r,e),zi[r]||(Gl(e),zi[r]=!0)}re.suppressDeprecationWarnings=!1;re.deprecationHandler=null;function Et(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function wf(r){var e,t;for(t in r)Ee(r,t)&&(e=r[t],Et(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Ds(r,e){var t=xt({},r),n;for(n in e)Ee(e,n)&&(ar(r[n])&&ar(e[n])?(t[n]={},xt(t[n],r[n]),xt(t[n],e[n])):e[n]!=null?t[n]=e[n]:delete t[n]);for(n in r)Ee(r,n)&&!Ee(e,n)&&ar(r[n])&&(t[n]=xt({},t[n]));return t}function xs(r){r!=null&&this.set(r)}var Os;Object.keys?Os=Object.keys:Os=function(r){var e,t=[];for(e in r)Ee(r,e)&&t.push(e);return t};var yf={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function kf(r,e,t){var n=this._calendar[r]||this._calendar.sameElse;return Et(n)?n.call(e,t):n}function Mt(r,e,t){var n=""+Math.abs(r),s=e-n.length,i=r>=0;return(i?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var Ks=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,fn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,fs={},Tr={};function ge(r,e,t,n){var s=n;typeof n=="string"&&(s=function(){return this[n]()}),r&&(Tr[r]=s),e&&(Tr[e[0]]=function(){return Mt(s.apply(this,arguments),e[1],e[2])}),t&&(Tr[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),r)})}function $f(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Sf(r){var e=r.match(Ks),t,n;for(t=0,n=e.length;t<n;t++)Tr[e[t]]?e[t]=Tr[e[t]]:e[t]=$f(e[t]);return function(s){var i="",o;for(o=0;o<n;o++)i+=Et(e[o])?e[o].call(s,r):e[o];return i}}function mn(r,e){return r.isValid()?(e=xl(e,r.localeData()),fs[e]=fs[e]||Sf(e),fs[e](r)):r.localeData().invalidDate()}function xl(r,e){var t=5;function n(s){return e.longDateFormat(s)||s}for(fn.lastIndex=0;t>=0&&fn.test(r);)r=r.replace(fn,n),fn.lastIndex=0,t-=1;return r}var Tf={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Df(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(Ks).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[r])}var Of="Invalid date";function Cf(){return this._invalidDate}var Mf="%d",Pf=/\d{1,2}/;function Ef(r){return this._ordinal.replace("%d",r)}var Rf={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function jf(r,e,t,n){var s=this._relativeTime[t];return Et(s)?s(r,e,t,n):s.replace(/%d/i,r)}function Af(r,e){var t=this._relativeTime[r>0?"future":"past"];return Et(t)?t(e):t.replace(/%s/i,e)}var Gi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function _t(r){return typeof r=="string"?Gi[r]||Gi[r.toLowerCase()]:void 0}function Zs(r){var e={},t,n;for(n in r)Ee(r,n)&&(t=_t(n),t&&(e[t]=r[n]));return e}var If={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Lf(r){var e=[],t;for(t in r)Ee(r,t)&&e.push({unit:t,priority:If[t]});return e.sort(function(n,s){return n.priority-s.priority}),e}var Kl=/\d/,lt=/\d\d/,Zl=/\d{3}/,Qs=/\d{4}/,Wn=/[+-]?\d{6}/,Be=/\d\d?/,Ql=/\d\d\d\d?/,Xl=/\d\d\d\d\d\d?/,qn=/\d{1,3}/,Xs=/\d{1,4}/,Vn=/[+-]?\d{1,6}/,Rr=/\d+/,zn=/[+-]?\d+/,Yf=/Z|[+-]\d\d:?\d\d/gi,Gn=/Z|[+-]\d\d(?::?\d\d)?/gi,Nf=/[+-]?\d+(\.\d{1,3})?/,sn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,jr=/^[1-9]\d?/,ei=/^([1-9]\d|\d)/,On;On={};function he(r,e,t){On[r]=Et(e)?e:function(n,s){return n&&t?t:e}}function Uf(r,e){return Ee(On,r)?On[r](e._strict,e._locale):new RegExp(Hf(r))}function Hf(r){return Ut(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i}))}function Ut(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ct(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function Te(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=ct(e)),t}var Cs={};function Ne(r,e){var t,n=e,s;for(typeof r=="string"&&(r=[r]),Ft(e)&&(n=function(i,o){o[e]=Te(i)}),s=r.length,t=0;t<s;t++)Cs[r[t]]=n}function on(r,e){Ne(r,function(t,n,s,i){s._w=s._w||{},e(t,s._w,s,i)})}function Ff(r,e,t){e!=null&&Ee(Cs,r)&&Cs[r](e,t._a,t,r)}function Jn(r){return r%4===0&&r%100!==0||r%400===0}var et=0,Yt=1,$t=2,Je=3,bt=4,Nt=5,lr=6,Bf=7,Wf=8;ge("Y",0,0,function(){var r=this.year();return r<=9999?Mt(r,4):"+"+r});ge(0,["YY",2],0,function(){return this.year()%100});ge(0,["YYYY",4],0,"year");ge(0,["YYYYY",5],0,"year");ge(0,["YYYYYY",6,!0],0,"year");he("Y",zn);he("YY",Be,lt);he("YYYY",Xs,Qs);he("YYYYY",Vn,Wn);he("YYYYYY",Vn,Wn);Ne(["YYYYY","YYYYYY"],et);Ne("YYYY",function(r,e){e[et]=r.length===2?re.parseTwoDigitYear(r):Te(r)});Ne("YY",function(r,e){e[et]=re.parseTwoDigitYear(r)});Ne("Y",function(r,e){e[et]=parseInt(r,10)});function Vr(r){return Jn(r)?366:365}re.parseTwoDigitYear=function(r){return Te(r)+(Te(r)>68?1900:2e3)};var ea=Ar("FullYear",!0);function qf(){return Jn(this.year())}function Ar(r,e){return function(t){return t!=null?(ta(this,r,t),re.updateOffset(this,e),this):xr(this,r)}}function xr(r,e){if(!r.isValid())return NaN;var t=r._d,n=r._isUTC;switch(e){case"Milliseconds":return n?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return n?t.getUTCSeconds():t.getSeconds();case"Minutes":return n?t.getUTCMinutes():t.getMinutes();case"Hours":return n?t.getUTCHours():t.getHours();case"Date":return n?t.getUTCDate():t.getDate();case"Day":return n?t.getUTCDay():t.getDay();case"Month":return n?t.getUTCMonth():t.getMonth();case"FullYear":return n?t.getUTCFullYear():t.getFullYear();default:return NaN}}function ta(r,e,t){var n,s,i,o,l;if(!(!r.isValid()||isNaN(t))){switch(n=r._d,s=r._isUTC,e){case"Milliseconds":return void(s?n.setUTCMilliseconds(t):n.setMilliseconds(t));case"Seconds":return void(s?n.setUTCSeconds(t):n.setSeconds(t));case"Minutes":return void(s?n.setUTCMinutes(t):n.setMinutes(t));case"Hours":return void(s?n.setUTCHours(t):n.setHours(t));case"Date":return void(s?n.setUTCDate(t):n.setDate(t));case"FullYear":break;default:return}i=t,o=r.month(),l=r.date(),l=l===29&&o===1&&!Jn(i)?28:l,s?n.setUTCFullYear(i,o,l):n.setFullYear(i,o,l)}}function Vf(r){return r=_t(r),Et(this[r])?this[r]():this}function zf(r,e){if(typeof r=="object"){r=Zs(r);var t=Lf(r),n,s=t.length;for(n=0;n<s;n++)this[t[n].unit](r[t[n].unit])}else if(r=_t(r),Et(this[r]))return this[r](e);return this}function Gf(r,e){return(r%e+e)%e}var Ve;Array.prototype.indexOf?Ve=Array.prototype.indexOf:Ve=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function ti(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=Gf(e,12);return r+=(e-t)/12,t===1?Jn(r)?29:28:31-t%7%2}ge("M",["MM",2],"Mo",function(){return this.month()+1});ge("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)});ge("MMMM",0,0,function(r){return this.localeData().months(this,r)});he("M",Be,jr);he("MM",Be,lt);he("MMM",function(r,e){return e.monthsShortRegex(r)});he("MMMM",function(r,e){return e.monthsRegex(r)});Ne(["M","MM"],function(r,e){e[Yt]=Te(r)-1});Ne(["MMM","MMMM"],function(r,e,t,n){var s=t._locale.monthsParse(r,n,t._strict);s!=null?e[Yt]=s:ve(t).invalidMonth=r});var Jf="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ra="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),na=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xf=sn,Kf=sn;function Zf(r,e){return r?vt(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||na).test(e)?"format":"standalone"][r.month()]:vt(this._months)?this._months:this._months.standalone}function Qf(r,e){return r?vt(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[na.test(e)?"format":"standalone"][r.month()]:vt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Xf(r,e,t){var n,s,i,o=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=Pt([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return t?e==="MMM"?(s=Ve.call(this._shortMonthsParse,o),s!==-1?s:null):(s=Ve.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=Ve.call(this._shortMonthsParse,o),s!==-1?s:(s=Ve.call(this._longMonthsParse,o),s!==-1?s:null)):(s=Ve.call(this._longMonthsParse,o),s!==-1?s:(s=Ve.call(this._shortMonthsParse,o),s!==-1?s:null))}function ed(r,e,t){var n,s,i;if(this._monthsParseExact)return Xf.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=Pt([2e3,n]),t&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[n]&&(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[n].test(r))return n;if(t&&e==="MMM"&&this._shortMonthsParse[n].test(r))return n;if(!t&&this._monthsParse[n].test(r))return n}}function sa(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=Te(e);else if(e=r.localeData().monthsParse(e),!Ft(e))return r}var t=e,n=r.date();return n=n<29?n:Math.min(n,ti(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,n):r._d.setMonth(t,n),r}function ia(r){return r!=null?(sa(this,r),re.updateOffset(this,!0),this):xr(this,"Month")}function td(){return ti(this.year(),this.month())}function rd(r){return this._monthsParseExact?(Ee(this,"_monthsRegex")||oa.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(Ee(this,"_monthsShortRegex")||(this._monthsShortRegex=xf),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function nd(r){return this._monthsParseExact?(Ee(this,"_monthsRegex")||oa.call(this),r?this._monthsStrictRegex:this._monthsRegex):(Ee(this,"_monthsRegex")||(this._monthsRegex=Kf),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function oa(){function r(a,f){return f.length-a.length}var e=[],t=[],n=[],s,i,o,l;for(s=0;s<12;s++)i=Pt([2e3,s]),o=Ut(this.monthsShort(i,"")),l=Ut(this.months(i,"")),e.push(o),t.push(l),n.push(l),n.push(o);e.sort(r),t.sort(r),n.sort(r),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function sd(r,e,t,n,s,i,o){var l;return r<100&&r>=0?(l=new Date(r+400,e,t,n,s,i,o),isFinite(l.getFullYear())&&l.setFullYear(r)):l=new Date(r,e,t,n,s,i,o),l}function Kr(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function Cn(r,e,t){var n=7+e-t,s=(7+Kr(r,0,n).getUTCDay()-e)%7;return-s+n-1}function la(r,e,t,n,s){var i=(7+t-n)%7,o=Cn(r,n,s),l=1+7*(e-1)+i+o,a,f;return l<=0?(a=r-1,f=Vr(a)+l):l>Vr(r)?(a=r+1,f=l-Vr(r)):(a=r,f=l),{year:a,dayOfYear:f}}function Zr(r,e,t){var n=Cn(r.year(),e,t),s=Math.floor((r.dayOfYear()-n-1)/7)+1,i,o;return s<1?(o=r.year()-1,i=s+Ht(o,e,t)):s>Ht(r.year(),e,t)?(i=s-Ht(r.year(),e,t),o=r.year()+1):(o=r.year(),i=s),{week:i,year:o}}function Ht(r,e,t){var n=Cn(r,e,t),s=Cn(r+1,e,t);return(Vr(r)-n+s)/7}ge("w",["ww",2],"wo","week");ge("W",["WW",2],"Wo","isoWeek");he("w",Be,jr);he("ww",Be,lt);he("W",Be,jr);he("WW",Be,lt);on(["w","ww","W","WW"],function(r,e,t,n){e[n.substr(0,1)]=Te(r)});function id(r){return Zr(r,this._week.dow,this._week.doy).week}var od={dow:0,doy:6};function ld(){return this._week.dow}function ad(){return this._week.doy}function ud(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function cd(r){var e=Zr(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}ge("d",0,"do","day");ge("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)});ge("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)});ge("dddd",0,0,function(r){return this.localeData().weekdays(this,r)});ge("e",0,0,"weekday");ge("E",0,0,"isoWeekday");he("d",Be);he("e",Be);he("E",Be);he("dd",function(r,e){return e.weekdaysMinRegex(r)});he("ddd",function(r,e){return e.weekdaysShortRegex(r)});he("dddd",function(r,e){return e.weekdaysRegex(r)});on(["dd","ddd","dddd"],function(r,e,t,n){var s=t._locale.weekdaysParse(r,n,t._strict);s!=null?e.d=s:ve(t).invalidWeekday=r});on(["d","e","E"],function(r,e,t,n){e[n]=Te(r)});function fd(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function dd(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function ri(r,e){return r.slice(e,7).concat(r.slice(0,e))}var hd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),aa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_d="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),md=sn,pd=sn,gd=sn;function bd(r,e){var t=vt(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?ri(t,this._week.dow):r?t[r.day()]:t}function vd(r){return r===!0?ri(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function wd(r){return r===!0?ri(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function yd(r,e,t){var n,s,i,o=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=Pt([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return t?e==="dddd"?(s=Ve.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=Ve.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=Ve.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=Ve.call(this._weekdaysParse,o),s!==-1||(s=Ve.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=Ve.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=Ve.call(this._shortWeekdaysParse,o),s!==-1||(s=Ve.call(this._weekdaysParse,o),s!==-1)?s:(s=Ve.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=Ve.call(this._minWeekdaysParse,o),s!==-1||(s=Ve.call(this._weekdaysParse,o),s!==-1)?s:(s=Ve.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function kd(r,e,t){var n,s,i;if(this._weekdaysParseExact)return yd.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=Pt([2e3,1]).day(n),t&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[n].test(r))return n;if(t&&e==="ddd"&&this._shortWeekdaysParse[n].test(r))return n;if(t&&e==="dd"&&this._minWeekdaysParse[n].test(r))return n;if(!t&&this._weekdaysParse[n].test(r))return n}}function $d(r){if(!this.isValid())return r!=null?this:NaN;var e=xr(this,"Day");return r!=null?(r=fd(r,this.localeData()),this.add(r-e,"d")):e}function Sd(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function Td(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=dd(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Dd(r){return this._weekdaysParseExact?(Ee(this,"_weekdaysRegex")||ni.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(Ee(this,"_weekdaysRegex")||(this._weekdaysRegex=md),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function Od(r){return this._weekdaysParseExact?(Ee(this,"_weekdaysRegex")||ni.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ee(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=pd),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Cd(r){return this._weekdaysParseExact?(Ee(this,"_weekdaysRegex")||ni.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ee(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=gd),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ni(){function r(d,_){return _.length-d.length}var e=[],t=[],n=[],s=[],i,o,l,a,f;for(i=0;i<7;i++)o=Pt([2e3,1]).day(i),l=Ut(this.weekdaysMin(o,"")),a=Ut(this.weekdaysShort(o,"")),f=Ut(this.weekdays(o,"")),e.push(l),t.push(a),n.push(f),s.push(l),s.push(a),s.push(f);e.sort(r),t.sort(r),n.sort(r),s.sort(r),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function si(){return this.hours()%12||12}function Md(){return this.hours()||24}ge("H",["HH",2],0,"hour");ge("h",["hh",2],0,si);ge("k",["kk",2],0,Md);ge("hmm",0,0,function(){return""+si.apply(this)+Mt(this.minutes(),2)});ge("hmmss",0,0,function(){return""+si.apply(this)+Mt(this.minutes(),2)+Mt(this.seconds(),2)});ge("Hmm",0,0,function(){return""+this.hours()+Mt(this.minutes(),2)});ge("Hmmss",0,0,function(){return""+this.hours()+Mt(this.minutes(),2)+Mt(this.seconds(),2)});function ua(r,e){ge(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ua("a",!0);ua("A",!1);function ca(r,e){return e._meridiemParse}he("a",ca);he("A",ca);he("H",Be,ei);he("h",Be,jr);he("k",Be,jr);he("HH",Be,lt);he("hh",Be,lt);he("kk",Be,lt);he("hmm",Ql);he("hmmss",Xl);he("Hmm",Ql);he("Hmmss",Xl);Ne(["H","HH"],Je);Ne(["k","kk"],function(r,e,t){var n=Te(r);e[Je]=n===24?0:n});Ne(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r});Ne(["h","hh"],function(r,e,t){e[Je]=Te(r),ve(t).bigHour=!0});Ne("hmm",function(r,e,t){var n=r.length-2;e[Je]=Te(r.substr(0,n)),e[bt]=Te(r.substr(n)),ve(t).bigHour=!0});Ne("hmmss",function(r,e,t){var n=r.length-4,s=r.length-2;e[Je]=Te(r.substr(0,n)),e[bt]=Te(r.substr(n,2)),e[Nt]=Te(r.substr(s)),ve(t).bigHour=!0});Ne("Hmm",function(r,e,t){var n=r.length-2;e[Je]=Te(r.substr(0,n)),e[bt]=Te(r.substr(n))});Ne("Hmmss",function(r,e,t){var n=r.length-4,s=r.length-2;e[Je]=Te(r.substr(0,n)),e[bt]=Te(r.substr(n,2)),e[Nt]=Te(r.substr(s))});function Pd(r){return(r+"").toLowerCase().charAt(0)==="p"}var Ed=/[ap]\.?m?\.?/i,Rd=Ar("Hours",!0);function jd(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var fa={calendar:yf,longDateFormat:Tf,invalidDate:Of,ordinal:Mf,dayOfMonthOrdinalParse:Pf,relativeTime:Rf,months:Jf,monthsShort:ra,week:od,weekdays:hd,weekdaysMin:_d,weekdaysShort:aa,meridiemParse:Ed},We={},Ur={},Qr;function Ad(r,e){var t,n=Math.min(r.length,e.length);for(t=0;t<n;t+=1)if(r[t]!==e[t])return t;return n}function Ji(r){return r&&r.toLowerCase().replace("_","-")}function Id(r){for(var e=0,t,n,s,i;e<r.length;){for(i=Ji(r[e]).split("-"),t=i.length,n=Ji(r[e+1]),n=n?n.split("-"):null;t>0;){if(s=xn(i.slice(0,t).join("-")),s)return s;if(n&&n.length>=t&&Ad(i,n)>=t-1)break;t--}e++}return Qr}function Ld(r){return!!(r&&r.match("^[^/\\\\]*$"))}function xn(r){var e=null,t;if(We[r]===void 0&&typeof bn<"u"&&bn&&bn.exports&&Ld(r))try{e=Qr._abbr,t=require,t("./locale/"+r),Zt(e)}catch{We[r]=null}return We[r]}function Zt(r,e){var t;return r&&(nt(e)?t=Bt(r):t=ii(r,e),t?Qr=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),Qr._abbr}function ii(r,e){if(e!==null){var t,n=fa;if(e.abbr=r,We[r]!=null)Jl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=We[r]._config;else if(e.parentLocale!=null)if(We[e.parentLocale]!=null)n=We[e.parentLocale]._config;else if(t=xn(e.parentLocale),t!=null)n=t._config;else return Ur[e.parentLocale]||(Ur[e.parentLocale]=[]),Ur[e.parentLocale].push({name:r,config:e}),null;return We[r]=new xs(Ds(n,e)),Ur[r]&&Ur[r].forEach(function(s){ii(s.name,s.config)}),Zt(r),We[r]}else return delete We[r],null}function Yd(r,e){if(e!=null){var t,n,s=fa;We[r]!=null&&We[r].parentLocale!=null?We[r].set(Ds(We[r]._config,e)):(n=xn(r),n!=null&&(s=n._config),e=Ds(s,e),n==null&&(e.abbr=r),t=new xs(e),t.parentLocale=We[r],We[r]=t),Zt(r)}else We[r]!=null&&(We[r].parentLocale!=null?(We[r]=We[r].parentLocale,r===Zt()&&Zt(r)):We[r]!=null&&delete We[r]);return We[r]}function Bt(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return Qr;if(!vt(r)){if(e=xn(r),e)return e;r=[r]}return Id(r)}function Nd(){return Os(We)}function oi(r){var e,t=r._a;return t&&ve(r).overflow===-2&&(e=t[Yt]<0||t[Yt]>11?Yt:t[$t]<1||t[$t]>ti(t[et],t[Yt])?$t:t[Je]<0||t[Je]>24||t[Je]===24&&(t[bt]!==0||t[Nt]!==0||t[lr]!==0)?Je:t[bt]<0||t[bt]>59?bt:t[Nt]<0||t[Nt]>59?Nt:t[lr]<0||t[lr]>999?lr:-1,ve(r)._overflowDayOfYear&&(e<et||e>$t)&&(e=$t),ve(r)._overflowWeeks&&e===-1&&(e=Bf),ve(r)._overflowWeekday&&e===-1&&(e=Wf),ve(r).overflow=e),r}var Ud=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fd=/Z|[+-]\d\d(?::?\d\d)?/,dn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ds=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bd=/^\/?Date\((-?\d+)/i,Wd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function da(r){var e,t,n=r._i,s=Ud.exec(n)||Hd.exec(n),i,o,l,a,f=dn.length,d=ds.length;if(s){for(ve(r).iso=!0,e=0,t=f;e<t;e++)if(dn[e][1].exec(s[1])){o=dn[e][0],i=dn[e][2]!==!1;break}if(o==null){r._isValid=!1;return}if(s[3]){for(e=0,t=d;e<t;e++)if(ds[e][1].exec(s[3])){l=(s[2]||" ")+ds[e][0];break}if(l==null){r._isValid=!1;return}}if(!i&&l!=null){r._isValid=!1;return}if(s[4])if(Fd.exec(s[4]))a="Z";else{r._isValid=!1;return}r._f=o+(l||"")+(a||""),ai(r)}else r._isValid=!1}function Vd(r,e,t,n,s,i){var o=[zd(r),ra.indexOf(e),parseInt(t,10),parseInt(n,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function zd(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function Gd(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Jd(r,e,t){if(r){var n=aa.indexOf(r),s=new Date(e[0],e[1],e[2]).getDay();if(n!==s)return ve(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function xd(r,e,t){if(r)return qd[r];if(e)return 0;var n=parseInt(t,10),s=n%100,i=(n-s)/100;return i*60+s}function ha(r){var e=Wd.exec(Gd(r._i)),t;if(e){if(t=Vd(e[4],e[3],e[2],e[5],e[6],e[7]),!Jd(e[1],t,r))return;r._a=t,r._tzm=xd(e[8],e[9],e[10]),r._d=Kr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),ve(r).rfc2822=!0}else r._isValid=!1}function Kd(r){var e=Bd.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(da(r),r._isValid===!1)delete r._isValid;else return;if(ha(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:re.createFromInputFallback(r)}re.createFromInputFallback=ht("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function wr(r,e,t){return r??e??t}function Zd(r){var e=new Date(re.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function li(r){var e,t,n=[],s,i,o;if(!r._d){for(s=Zd(r),r._w&&r._a[$t]==null&&r._a[Yt]==null&&Qd(r),r._dayOfYear!=null&&(o=wr(r._a[et],s[et]),(r._dayOfYear>Vr(o)||r._dayOfYear===0)&&(ve(r)._overflowDayOfYear=!0),t=Kr(o,0,r._dayOfYear),r._a[Yt]=t.getUTCMonth(),r._a[$t]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=n[e]=s[e];for(;e<7;e++)r._a[e]=n[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[Je]===24&&r._a[bt]===0&&r._a[Nt]===0&&r._a[lr]===0&&(r._nextDay=!0,r._a[Je]=0),r._d=(r._useUTC?Kr:sd).apply(null,n),i=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[Je]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==i&&(ve(r).weekdayMismatch=!0)}}function Qd(r){var e,t,n,s,i,o,l,a,f;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,t=wr(e.GG,r._a[et],Zr(Fe(),1,4).year),n=wr(e.W,1),s=wr(e.E,1),(s<1||s>7)&&(a=!0)):(i=r._locale._week.dow,o=r._locale._week.doy,f=Zr(Fe(),i,o),t=wr(e.gg,r._a[et],f.year),n=wr(e.w,f.week),e.d!=null?(s=e.d,(s<0||s>6)&&(a=!0)):e.e!=null?(s=e.e+i,(e.e<0||e.e>6)&&(a=!0)):s=i),n<1||n>Ht(t,i,o)?ve(r)._overflowWeeks=!0:a!=null?ve(r)._overflowWeekday=!0:(l=la(t,n,s,i,o),r._a[et]=l.year,r._dayOfYear=l.dayOfYear)}re.ISO_8601=function(){};re.RFC_2822=function(){};function ai(r){if(r._f===re.ISO_8601){da(r);return}if(r._f===re.RFC_2822){ha(r);return}r._a=[],ve(r).empty=!0;var e=""+r._i,t,n,s,i,o,l=e.length,a=0,f,d;for(s=xl(r._f,r._locale).match(Ks)||[],d=s.length,t=0;t<d;t++)i=s[t],n=(e.match(Uf(i,r))||[])[0],n&&(o=e.substr(0,e.indexOf(n)),o.length>0&&ve(r).unusedInput.push(o),e=e.slice(e.indexOf(n)+n.length),a+=n.length),Tr[i]?(n?ve(r).empty=!1:ve(r).unusedTokens.push(i),Ff(i,n,r)):r._strict&&!n&&ve(r).unusedTokens.push(i);ve(r).charsLeftOver=l-a,e.length>0&&ve(r).unusedInput.push(e),r._a[Je]<=12&&ve(r).bigHour===!0&&r._a[Je]>0&&(ve(r).bigHour=void 0),ve(r).parsedDateParts=r._a.slice(0),ve(r).meridiem=r._meridiem,r._a[Je]=Xd(r._locale,r._a[Je],r._meridiem),f=ve(r).era,f!==null&&(r._a[et]=r._locale.erasConvertYear(f,r._a[et])),li(r),oi(r)}function Xd(r,e,t){var n;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(n=r.isPM(t),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function eh(r){var e,t,n,s,i,o,l=!1,a=r._f.length;if(a===0){ve(r).invalidFormat=!0,r._d=new Date(NaN);return}for(s=0;s<a;s++)i=0,o=!1,e=Js({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[s],ai(e),Gs(e)&&(o=!0),i+=ve(e).charsLeftOver,i+=ve(e).unusedTokens.length*10,ve(e).score=i,l?i<n&&(n=i,t=e):(n==null||i<n||o)&&(n=i,t=e,o&&(l=!0));xt(r,t||e)}function th(r){if(!r._d){var e=Zs(r._i),t=e.day===void 0?e.date:e.day;r._a=zl([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),li(r)}}function rh(r){var e=new nn(oi(_a(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _a(r){var e=r._i,t=r._f;return r._locale=r._locale||Bt(r._l),e===null||t===void 0&&e===""?Bn({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),wt(e)?new nn(oi(e)):(rn(e)?r._d=e:vt(t)?eh(r):t?ai(r):nh(r),Gs(r)||(r._d=null),r))}function nh(r){var e=r._i;nt(e)?r._d=new Date(re.now()):rn(e)?r._d=new Date(e.valueOf()):typeof e=="string"?Kd(r):vt(e)?(r._a=zl(e.slice(0),function(t){return parseInt(t,10)}),li(r)):ar(e)?th(r):Ft(e)?r._d=new Date(e):re.createFromInputFallback(r)}function ma(r,e,t,n,s){var i={};return(e===!0||e===!1)&&(n=e,e=void 0),(t===!0||t===!1)&&(n=t,t=void 0),(ar(r)&&zs(r)||vt(r)&&r.length===0)&&(r=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=t,i._i=r,i._f=e,i._strict=n,rh(i)}function Fe(r,e,t,n){return ma(r,e,t,n,!1)}var sh=ht("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Fe.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:Bn()}),ih=ht("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=Fe.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:Bn()});function pa(r,e){var t,n;if(e.length===1&&vt(e[0])&&(e=e[0]),!e.length)return Fe();for(t=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][r](t))&&(t=e[n]);return t}function oh(){var r=[].slice.call(arguments,0);return pa("isBefore",r)}function lh(){var r=[].slice.call(arguments,0);return pa("isAfter",r)}var ah=function(){return Date.now?Date.now():+new Date},Hr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function uh(r){var e,t=!1,n,s=Hr.length;for(e in r)if(Ee(r,e)&&!(Ve.call(Hr,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(n=0;n<s;++n)if(r[Hr[n]]){if(t)return!1;parseFloat(r[Hr[n]])!==Te(r[Hr[n]])&&(t=!0)}return!0}function ch(){return this._isValid}function fh(){return yt(NaN)}function Kn(r){var e=Zs(r),t=e.year||0,n=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,f=e.second||0,d=e.millisecond||0;this._isValid=uh(e),this._milliseconds=+d+f*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+s+n*3+t*12,this._data={},this._locale=Bt(),this._bubble()}function pn(r){return r instanceof Kn}function Ms(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function dh(r,e,t){var n=Math.min(r.length,e.length),s=Math.abs(r.length-e.length),i=0,o;for(o=0;o<n;o++)Te(r[o])!==Te(e[o])&&i++;return i+s}function ga(r,e){ge(r,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+Mt(~~(t/60),2)+e+Mt(~~t%60,2)})}ga("Z",":");ga("ZZ","");he("Z",Gn);he("ZZ",Gn);Ne(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=ui(Gn,r)});var hh=/([\+\-]|\d\d)/gi;function ui(r,e){var t=(e||"").match(r),n,s,i;return t===null?null:(n=t[t.length-1]||[],s=(n+"").match(hh)||["-",0,0],i=+(s[1]*60)+Te(s[2]),i===0?0:s[0]==="+"?i:-i)}function ci(r,e){var t,n;return e._isUTC?(t=e.clone(),n=(wt(r)||rn(r)?r.valueOf():Fe(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+n),re.updateOffset(t,!1),t):Fe(r).local()}function Ps(r){return-Math.round(r._d.getTimezoneOffset())}re.updateOffset=function(){};function _h(r,e,t){var n=this._offset||0,s;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=ui(Gn,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(s=Ps(this)),this._offset=r,this._isUTC=!0,s!=null&&this.add(s,"m"),n!==r&&(!e||this._changeInProgress?wa(this,yt(r-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Ps(this)}function mh(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function ph(r){return this.utcOffset(0,r)}function gh(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(Ps(this),"m")),this}function bh(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=ui(Yf,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function vh(r){return this.isValid()?(r=r?Fe(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function wh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function yh(){if(!nt(this._isDSTShifted))return this._isDSTShifted;var r={},e;return Js(r,this),r=_a(r),r._a?(e=r._isUTC?Pt(r._a):Fe(r._a),this._isDSTShifted=this.isValid()&&dh(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kh(){return this.isValid()?!this._isUTC:!1}function $h(){return this.isValid()?this._isUTC:!1}function ba(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Sh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Th=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function yt(r,e){var t=r,n=null,s,i,o;return pn(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:Ft(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(n=Sh.exec(r))?(s=n[1]==="-"?-1:1,t={y:0,d:Te(n[$t])*s,h:Te(n[Je])*s,m:Te(n[bt])*s,s:Te(n[Nt])*s,ms:Te(Ms(n[lr]*1e3))*s}):(n=Th.exec(r))?(s=n[1]==="-"?-1:1,t={y:sr(n[2],s),M:sr(n[3],s),w:sr(n[4],s),d:sr(n[5],s),h:sr(n[6],s),m:sr(n[7],s),s:sr(n[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=Dh(Fe(t.from),Fe(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),i=new Kn(t),pn(r)&&Ee(r,"_locale")&&(i._locale=r._locale),pn(r)&&Ee(r,"_isValid")&&(i._isValid=r._isValid),i}yt.fn=Kn.prototype;yt.invalid=fh;function sr(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function xi(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function Dh(r,e){var t;return r.isValid()&&e.isValid()?(e=ci(e,r),r.isBefore(e)?t=xi(r,e):(t=xi(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function va(r,e){return function(t,n){var s,i;return n!==null&&!isNaN(+n)&&(Jl(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=n,n=i),s=yt(t,n),wa(this,s,r),this}}function wa(r,e,t,n){var s=e._milliseconds,i=Ms(e._days),o=Ms(e._months);r.isValid()&&(n=n??!0,o&&sa(r,xr(r,"Month")+o*t),i&&ta(r,"Date",xr(r,"Date")+i*t),s&&r._d.setTime(r._d.valueOf()+s*t),n&&re.updateOffset(r,i||o))}var Oh=va(1,"add"),Ch=va(-1,"subtract");function ya(r){return typeof r=="string"||r instanceof String}function Mh(r){return wt(r)||rn(r)||ya(r)||Ft(r)||Eh(r)||Ph(r)||r===null||r===void 0}function Ph(r){var e=ar(r)&&!zs(r),t=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,i,o=n.length;for(s=0;s<o;s+=1)i=n[s],t=t||Ee(r,i);return e&&t}function Eh(r){var e=vt(r),t=!1;return e&&(t=r.filter(function(n){return!Ft(n)&&ya(r)}).length===0),e&&t}function Rh(r){var e=ar(r)&&!zs(r),t=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,i;for(s=0;s<n.length;s+=1)i=n[s],t=t||Ee(r,i);return e&&t}function jh(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Ah(r,e){arguments.length===1&&(arguments[0]?Mh(arguments[0])?(r=arguments[0],e=void 0):Rh(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||Fe(),n=ci(t,this).startOf("day"),s=re.calendarFormat(this,n)||"sameElse",i=e&&(Et(e[s])?e[s].call(this,t):e[s]);return this.format(i||this.localeData().calendar(s,this,Fe(t)))}function Ih(){return new nn(this)}function Lh(r,e){var t=wt(r)?r:Fe(r);return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Yh(r,e){var t=wt(r)?r:Fe(r);return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Nh(r,e,t,n){var s=wt(r)?r:Fe(r),i=wt(e)?e:Fe(e);return this.isValid()&&s.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(n[1]===")"?this.isBefore(i,t):!this.isAfter(i,t))):!1}function Uh(r,e){var t=wt(r)?r:Fe(r),n;return this.isValid()&&t.isValid()?(e=_t(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(n=t.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function Hh(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function Fh(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function Bh(r,e,t){var n,s,i;if(!this.isValid())return NaN;if(n=ci(r,this),!n.isValid())return NaN;switch(s=(n.utcOffset()-this.utcOffset())*6e4,e=_t(e),e){case"year":i=gn(this,n)/12;break;case"month":i=gn(this,n);break;case"quarter":i=gn(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-s)/864e5;break;case"week":i=(this-n-s)/6048e5;break;default:i=this-n}return t?i:ct(i)}function gn(r,e){if(r.date()<e.date())return-gn(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),n=r.clone().add(t,"months"),s,i;return e-n<0?(s=r.clone().add(t-1,"months"),i=(e-n)/(n-s)):(s=r.clone().add(t+1,"months"),i=(e-n)/(s-n)),-(t+i)||0}re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Wh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qh(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?mn(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Et(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",mn(t,"Z")):mn(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Vh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,n,s,i;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(t+n+s+i)}function zh(r){r||(r=this.isUtc()?re.defaultFormatUtc:re.defaultFormat);var e=mn(this,r);return this.localeData().postformat(e)}function Gh(r,e){return this.isValid()&&(wt(r)&&r.isValid()||Fe(r).isValid())?yt({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Jh(r){return this.from(Fe(),r)}function xh(r,e){return this.isValid()&&(wt(r)&&r.isValid()||Fe(r).isValid())?yt({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Kh(r){return this.to(Fe(),r)}function ka(r){var e;return r===void 0?this._locale._abbr:(e=Bt(r),e!=null&&(this._locale=e),this)}var $a=ht("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function Sa(){return this._locale}var Mn=1e3,Dr=60*Mn,Pn=60*Dr,Ta=(365*400+97)*24*Pn;function Or(r,e){return(r%e+e)%e}function Da(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-Ta:new Date(r,e,t).valueOf()}function Oa(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-Ta:Date.UTC(r,e,t)}function Zh(r){var e,t;if(r=_t(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Oa:Da,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Or(e+(this._isUTC?0:this.utcOffset()*Dr),Pn);break;case"minute":e=this._d.valueOf(),e-=Or(e,Dr);break;case"second":e=this._d.valueOf(),e-=Or(e,Mn);break}return this._d.setTime(e),re.updateOffset(this,!0),this}function Qh(r){var e,t;if(r=_t(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Oa:Da,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Pn-Or(e+(this._isUTC?0:this.utcOffset()*Dr),Pn)-1;break;case"minute":e=this._d.valueOf(),e+=Dr-Or(e,Dr)-1;break;case"second":e=this._d.valueOf(),e+=Mn-Or(e,Mn)-1;break}return this._d.setTime(e),re.updateOffset(this,!0),this}function Xh(){return this._d.valueOf()-(this._offset||0)*6e4}function e_(){return Math.floor(this.valueOf()/1e3)}function t_(){return new Date(this.valueOf())}function r_(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function n_(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function s_(){return this.isValid()?this.toISOString():null}function i_(){return Gs(this)}function o_(){return xt({},ve(this))}function l_(){return ve(this).overflow}function a_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ge("N",0,0,"eraAbbr");ge("NN",0,0,"eraAbbr");ge("NNN",0,0,"eraAbbr");ge("NNNN",0,0,"eraName");ge("NNNNN",0,0,"eraNarrow");ge("y",["y",1],"yo","eraYear");ge("y",["yy",2],0,"eraYear");ge("y",["yyy",3],0,"eraYear");ge("y",["yyyy",4],0,"eraYear");he("N",fi);he("NN",fi);he("NNN",fi);he("NNNN",v_);he("NNNNN",w_);Ne(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,n){var s=t._locale.erasParse(r,n,t._strict);s?ve(t).era=s:ve(t).invalidEra=r});he("y",Rr);he("yy",Rr);he("yyy",Rr);he("yyyy",Rr);he("yo",y_);Ne(["y","yy","yyy","yyyy"],et);Ne(["yo"],function(r,e,t,n){var s;t._locale._eraYearOrdinalRegex&&(s=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[et]=t._locale.eraYearOrdinalParse(r,s):e[et]=parseInt(r,10)});function u_(r,e){var t,n,s,i=this._eras||Bt("en")._eras;for(t=0,n=i.length;t<n;++t){switch(typeof i[t].since){case"string":s=re(i[t].since).startOf("day"),i[t].since=s.valueOf();break}switch(typeof i[t].until){case"undefined":i[t].until=1/0;break;case"string":s=re(i[t].until).startOf("day").valueOf(),i[t].until=s.valueOf();break}}return i}function c_(r,e,t){var n,s,i=this.eras(),o,l,a;for(r=r.toUpperCase(),n=0,s=i.length;n<s;++n)if(o=i[n].name.toUpperCase(),l=i[n].abbr.toUpperCase(),a=i[n].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(l===r)return i[n];break;case"NNNN":if(o===r)return i[n];break;case"NNNNN":if(a===r)return i[n];break}else if([o,l,a].indexOf(r)>=0)return i[n]}function f_(r,e){var t=r.since<=r.until?1:-1;return e===void 0?re(r.since).year():re(r.since).year()+(e-r.offset)*t}function d_(){var r,e,t,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),n[r].since<=t&&t<=n[r].until||n[r].until<=t&&t<=n[r].since)return n[r].name;return""}function h_(){var r,e,t,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),n[r].since<=t&&t<=n[r].until||n[r].until<=t&&t<=n[r].since)return n[r].narrow;return""}function __(){var r,e,t,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),n[r].since<=t&&t<=n[r].until||n[r].until<=t&&t<=n[r].since)return n[r].abbr;return""}function m_(){var r,e,t,n,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=s[r].since<=s[r].until?1:-1,n=this.clone().startOf("day").valueOf(),s[r].since<=n&&n<=s[r].until||s[r].until<=n&&n<=s[r].since)return(this.year()-re(s[r].since).year())*t+s[r].offset;return this.year()}function p_(r){return Ee(this,"_erasNameRegex")||di.call(this),r?this._erasNameRegex:this._erasRegex}function g_(r){return Ee(this,"_erasAbbrRegex")||di.call(this),r?this._erasAbbrRegex:this._erasRegex}function b_(r){return Ee(this,"_erasNarrowRegex")||di.call(this),r?this._erasNarrowRegex:this._erasRegex}function fi(r,e){return e.erasAbbrRegex(r)}function v_(r,e){return e.erasNameRegex(r)}function w_(r,e){return e.erasNarrowRegex(r)}function y_(r,e){return e._eraYearOrdinalRegex||Rr}function di(){var r=[],e=[],t=[],n=[],s,i,o,l,a,f=this.eras();for(s=0,i=f.length;s<i;++s)o=Ut(f[s].name),l=Ut(f[s].abbr),a=Ut(f[s].narrow),e.push(o),r.push(l),t.push(a),n.push(o),n.push(l),n.push(a);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ge(0,["gg",2],0,function(){return this.weekYear()%100});ge(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Zn(r,e){ge(0,[r,r.length],0,e)}Zn("gggg","weekYear");Zn("ggggg","weekYear");Zn("GGGG","isoWeekYear");Zn("GGGGG","isoWeekYear");he("G",zn);he("g",zn);he("GG",Be,lt);he("gg",Be,lt);he("GGGG",Xs,Qs);he("gggg",Xs,Qs);he("GGGGG",Vn,Wn);he("ggggg",Vn,Wn);on(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,n){e[n.substr(0,2)]=Te(r)});on(["gg","GG"],function(r,e,t,n){e[n]=re.parseTwoDigitYear(r)});function k_(r){return Ca.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function $_(r){return Ca.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function S_(){return Ht(this.year(),1,4)}function T_(){return Ht(this.isoWeekYear(),1,4)}function D_(){var r=this.localeData()._week;return Ht(this.year(),r.dow,r.doy)}function O_(){var r=this.localeData()._week;return Ht(this.weekYear(),r.dow,r.doy)}function Ca(r,e,t,n,s){var i;return r==null?Zr(this,n,s).year:(i=Ht(r,n,s),e>i&&(e=i),C_.call(this,r,e,t,n,s))}function C_(r,e,t,n,s){var i=la(r,e,t,n,s),o=Kr(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ge("Q",0,"Qo","quarter");he("Q",Kl);Ne("Q",function(r,e){e[Yt]=(Te(r)-1)*3});function M_(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}ge("D",["DD",2],"Do","date");he("D",Be,jr);he("DD",Be,lt);he("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ne(["D","DD"],$t);Ne("Do",function(r,e){e[$t]=Te(r.match(Be)[0])});var Ma=Ar("Date",!0);ge("DDD",["DDDD",3],"DDDo","dayOfYear");he("DDD",qn);he("DDDD",Zl);Ne(["DDD","DDDD"],function(r,e,t){t._dayOfYear=Te(r)});function P_(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}ge("m",["mm",2],0,"minute");he("m",Be,ei);he("mm",Be,lt);Ne(["m","mm"],bt);var E_=Ar("Minutes",!1);ge("s",["ss",2],0,"second");he("s",Be,ei);he("ss",Be,lt);Ne(["s","ss"],Nt);var R_=Ar("Seconds",!1);ge("S",0,0,function(){return~~(this.millisecond()/100)});ge(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ge(0,["SSS",3],0,"millisecond");ge(0,["SSSS",4],0,function(){return this.millisecond()*10});ge(0,["SSSSS",5],0,function(){return this.millisecond()*100});ge(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ge(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ge(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ge(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});he("S",qn,Kl);he("SS",qn,lt);he("SSS",qn,Zl);var Kt,Pa;for(Kt="SSSS";Kt.length<=9;Kt+="S")he(Kt,Rr);function j_(r,e){e[lr]=Te(("0."+r)*1e3)}for(Kt="S";Kt.length<=9;Kt+="S")Ne(Kt,j_);Pa=Ar("Milliseconds",!1);ge("z",0,0,"zoneAbbr");ge("zz",0,0,"zoneName");function A_(){return this._isUTC?"UTC":""}function I_(){return this._isUTC?"Coordinated Universal Time":""}var oe=nn.prototype;oe.add=Oh;oe.calendar=Ah;oe.clone=Ih;oe.diff=Bh;oe.endOf=Qh;oe.format=zh;oe.from=Gh;oe.fromNow=Jh;oe.to=xh;oe.toNow=Kh;oe.get=Vf;oe.invalidAt=l_;oe.isAfter=Lh;oe.isBefore=Yh;oe.isBetween=Nh;oe.isSame=Uh;oe.isSameOrAfter=Hh;oe.isSameOrBefore=Fh;oe.isValid=i_;oe.lang=$a;oe.locale=ka;oe.localeData=Sa;oe.max=ih;oe.min=sh;oe.parsingFlags=o_;oe.set=zf;oe.startOf=Zh;oe.subtract=Ch;oe.toArray=r_;oe.toObject=n_;oe.toDate=t_;oe.toISOString=qh;oe.inspect=Vh;typeof Symbol<"u"&&Symbol.for!=null&&(oe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});oe.toJSON=s_;oe.toString=Wh;oe.unix=e_;oe.valueOf=Xh;oe.creationData=a_;oe.eraName=d_;oe.eraNarrow=h_;oe.eraAbbr=__;oe.eraYear=m_;oe.year=ea;oe.isLeapYear=qf;oe.weekYear=k_;oe.isoWeekYear=$_;oe.quarter=oe.quarters=M_;oe.month=ia;oe.daysInMonth=td;oe.week=oe.weeks=ud;oe.isoWeek=oe.isoWeeks=cd;oe.weeksInYear=D_;oe.weeksInWeekYear=O_;oe.isoWeeksInYear=S_;oe.isoWeeksInISOWeekYear=T_;oe.date=Ma;oe.day=oe.days=$d;oe.weekday=Sd;oe.isoWeekday=Td;oe.dayOfYear=P_;oe.hour=oe.hours=Rd;oe.minute=oe.minutes=E_;oe.second=oe.seconds=R_;oe.millisecond=oe.milliseconds=Pa;oe.utcOffset=_h;oe.utc=ph;oe.local=gh;oe.parseZone=bh;oe.hasAlignedHourOffset=vh;oe.isDST=wh;oe.isLocal=kh;oe.isUtcOffset=$h;oe.isUtc=ba;oe.isUTC=ba;oe.zoneAbbr=A_;oe.zoneName=I_;oe.dates=ht("dates accessor is deprecated. Use date instead.",Ma);oe.months=ht("months accessor is deprecated. Use month instead",ia);oe.years=ht("years accessor is deprecated. Use year instead",ea);oe.zone=ht("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mh);oe.isDSTShifted=ht("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",yh);function L_(r){return Fe(r*1e3)}function Y_(){return Fe.apply(null,arguments).parseZone()}function Ea(r){return r}var Re=xs.prototype;Re.calendar=kf;Re.longDateFormat=Df;Re.invalidDate=Cf;Re.ordinal=Ef;Re.preparse=Ea;Re.postformat=Ea;Re.relativeTime=jf;Re.pastFuture=Af;Re.set=wf;Re.eras=u_;Re.erasParse=c_;Re.erasConvertYear=f_;Re.erasAbbrRegex=g_;Re.erasNameRegex=p_;Re.erasNarrowRegex=b_;Re.months=Zf;Re.monthsShort=Qf;Re.monthsParse=ed;Re.monthsRegex=nd;Re.monthsShortRegex=rd;Re.week=id;Re.firstDayOfYear=ad;Re.firstDayOfWeek=ld;Re.weekdays=bd;Re.weekdaysMin=wd;Re.weekdaysShort=vd;Re.weekdaysParse=kd;Re.weekdaysRegex=Dd;Re.weekdaysShortRegex=Od;Re.weekdaysMinRegex=Cd;Re.isPM=Pd;Re.meridiem=jd;function En(r,e,t,n){var s=Bt(),i=Pt().set(n,e);return s[t](i,r)}function Ra(r,e,t){if(Ft(r)&&(e=r,r=void 0),r=r||"",e!=null)return En(r,e,t,"month");var n,s=[];for(n=0;n<12;n++)s[n]=En(r,n,t,"month");return s}function hi(r,e,t,n){typeof r=="boolean"?(Ft(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,Ft(e)&&(t=e,e=void 0),e=e||"");var s=Bt(),i=r?s._week.dow:0,o,l=[];if(t!=null)return En(e,(t+i)%7,n,"day");for(o=0;o<7;o++)l[o]=En(e,(o+i)%7,n,"day");return l}function N_(r,e){return Ra(r,e,"months")}function U_(r,e){return Ra(r,e,"monthsShort")}function H_(r,e,t){return hi(r,e,t,"weekdays")}function F_(r,e,t){return hi(r,e,t,"weekdaysShort")}function B_(r,e,t){return hi(r,e,t,"weekdaysMin")}Zt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=Te(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}});re.lang=ht("moment.lang is deprecated. Use moment.locale instead.",Zt);re.langData=ht("moment.langData is deprecated. Use moment.localeData instead.",Bt);var jt=Math.abs;function W_(){var r=this._data;return this._milliseconds=jt(this._milliseconds),this._days=jt(this._days),this._months=jt(this._months),r.milliseconds=jt(r.milliseconds),r.seconds=jt(r.seconds),r.minutes=jt(r.minutes),r.hours=jt(r.hours),r.months=jt(r.months),r.years=jt(r.years),this}function ja(r,e,t,n){var s=yt(e,t);return r._milliseconds+=n*s._milliseconds,r._days+=n*s._days,r._months+=n*s._months,r._bubble()}function q_(r,e){return ja(this,r,e,1)}function V_(r,e){return ja(this,r,e,-1)}function Ki(r){return r<0?Math.floor(r):Math.ceil(r)}function z_(){var r=this._milliseconds,e=this._days,t=this._months,n=this._data,s,i,o,l,a;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=Ki(Es(t)+e)*864e5,e=0,t=0),n.milliseconds=r%1e3,s=ct(r/1e3),n.seconds=s%60,i=ct(s/60),n.minutes=i%60,o=ct(i/60),n.hours=o%24,e+=ct(o/24),a=ct(Aa(e)),t+=a,e-=Ki(Es(a)),l=ct(t/12),t%=12,n.days=e,n.months=t,n.years=l,this}function Aa(r){return r*4800/146097}function Es(r){return r*146097/4800}function G_(r){if(!this.isValid())return NaN;var e,t,n=this._milliseconds;if(r=_t(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+n/864e5,t=this._months+Aa(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(Es(this._months)),r){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+r)}}function Wt(r){return function(){return this.as(r)}}var Ia=Wt("ms"),J_=Wt("s"),x_=Wt("m"),K_=Wt("h"),Z_=Wt("d"),Q_=Wt("w"),X_=Wt("M"),em=Wt("Q"),tm=Wt("y"),rm=Ia;function nm(){return yt(this)}function sm(r){return r=_t(r),this.isValid()?this[r+"s"]():NaN}function cr(r){return function(){return this.isValid()?this._data[r]:NaN}}var im=cr("milliseconds"),om=cr("seconds"),lm=cr("minutes"),am=cr("hours"),um=cr("days"),cm=cr("months"),fm=cr("years");function dm(){return ct(this.days()/7)}var At=Math.round,yr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function hm(r,e,t,n,s){return s.relativeTime(e||1,!!t,r,n)}function _m(r,e,t,n){var s=yt(r).abs(),i=At(s.as("s")),o=At(s.as("m")),l=At(s.as("h")),a=At(s.as("d")),f=At(s.as("M")),d=At(s.as("w")),_=At(s.as("y")),m=i<=t.ss&&["s",i]||i<t.s&&["ss",i]||o<=1&&["m"]||o<t.m&&["mm",o]||l<=1&&["h"]||l<t.h&&["hh",l]||a<=1&&["d"]||a<t.d&&["dd",a];return t.w!=null&&(m=m||d<=1&&["w"]||d<t.w&&["ww",d]),m=m||f<=1&&["M"]||f<t.M&&["MM",f]||_<=1&&["y"]||["yy",_],m[2]=e,m[3]=+r>0,m[4]=n,hm.apply(null,m)}function mm(r){return r===void 0?At:typeof r=="function"?(At=r,!0):!1}function pm(r,e){return yr[r]===void 0?!1:e===void 0?yr[r]:(yr[r]=e,r==="s"&&(yr.ss=e-1),!0)}function gm(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,n=yr,s,i;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(n=Object.assign({},yr,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),s=this.localeData(),i=_m(this,!t,n,s),t&&(i=s.pastFuture(+this,i)),s.postformat(i)}var hs=Math.abs;function gr(r){return(r>0)-(r<0)||+r}function Qn(){if(!this.isValid())return this.localeData().invalidDate();var r=hs(this._milliseconds)/1e3,e=hs(this._days),t=hs(this._months),n,s,i,o,l=this.asSeconds(),a,f,d,_;return l?(n=ct(r/60),s=ct(n/60),r%=60,n%=60,i=ct(t/12),t%=12,o=r?r.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",f=gr(this._months)!==gr(l)?"-":"",d=gr(this._days)!==gr(l)?"-":"",_=gr(this._milliseconds)!==gr(l)?"-":"",a+"P"+(i?f+i+"Y":"")+(t?f+t+"M":"")+(e?d+e+"D":"")+(s||n||r?"T":"")+(s?_+s+"H":"")+(n?_+n+"M":"")+(r?_+o+"S":"")):"P0D"}var Pe=Kn.prototype;Pe.isValid=ch;Pe.abs=W_;Pe.add=q_;Pe.subtract=V_;Pe.as=G_;Pe.asMilliseconds=Ia;Pe.asSeconds=J_;Pe.asMinutes=x_;Pe.asHours=K_;Pe.asDays=Z_;Pe.asWeeks=Q_;Pe.asMonths=X_;Pe.asQuarters=em;Pe.asYears=tm;Pe.valueOf=rm;Pe._bubble=z_;Pe.clone=nm;Pe.get=sm;Pe.milliseconds=im;Pe.seconds=om;Pe.minutes=lm;Pe.hours=am;Pe.days=um;Pe.weeks=dm;Pe.months=cm;Pe.years=fm;Pe.humanize=gm;Pe.toISOString=Qn;Pe.toString=Qn;Pe.toJSON=Qn;Pe.locale=ka;Pe.localeData=Sa;Pe.toIsoString=ht("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qn);Pe.lang=$a;ge("X",0,0,"unix");ge("x",0,0,"valueOf");he("x",zn);he("X",Nf);Ne("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)});Ne("x",function(r,e,t){t._d=new Date(Te(r))});//! moment.js
re.version="2.30.1";bf(Fe);re.fn=oe;re.min=oh;re.max=lh;re.now=ah;re.utc=Pt;re.unix=L_;re.months=N_;re.isDate=rn;re.locale=Zt;re.invalid=Bn;re.duration=yt;re.isMoment=wt;re.weekdays=H_;re.parseZone=Y_;re.localeData=Bt;re.isDuration=pn;re.monthsShort=U_;re.weekdaysMin=B_;re.defineLocale=ii;re.updateLocale=Yd;re.locales=Nd;re.weekdaysShort=F_;re.normalizeUnits=_t;re.relativeTimeRounding=mm;re.relativeTimeThreshold=pm;re.calendarFormat=jh;re.prototype=oe;re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Zi(r,e,t){const n=r.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function Qi(r,e,t){const n=r.slice();return n[13]=e[t][0],n[17]=e[t][1],n}function Xi(r,e,t){const n=r.slice();return n[13]=e[t][0],n[20]=e[t][1],n}function eo(r,e,t){const n=r.slice();return n[13]=e[t][0],n[23]=e[t][1],n}function bm(r){let e,t;return e=new Fn({props:{message:r[7]}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&128&&(i.message=n[7]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function vm(r){let e,t;return e=new Tt({props:{title:"Account Inventory",icon:"backpack2",$$slots:{default:[wm]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&67108872&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function to(r){let e,t;return e=new gf({props:{id:r[23].book_id,title:r[23].title,label:r[23].status=="Borrowed"?`Due: ${re(r[23].due_date).format("MM-DD-YYYY")}`:"Reserved",color:r[23].status=="Borrowed"?"danger":"secondary"}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&8&&(i.id=n[23].book_id),s&8&&(i.title=n[23].title),s&8&&(i.label=n[23].status=="Borrowed"?`Due: ${re(n[23].due_date).format("MM-DD-YYYY")}`:"Reserved"),s&8&&(i.color=n[23].status=="Borrowed"?"danger":"secondary"),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function wm(r){let e,t,n=ke(Object.entries(r[3])),s=[];for(let o=0;o<n.length;o+=1)s[o]=to(eo(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row justify-content-center justify-content-md-start")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&8){n=ke(Object.entries(o[3]));let a;for(a=0;a<n.length;a+=1){const f=eo(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=to(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function ym(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function km(r){let e,t;return e=new Fn({props:{message:r[4]}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&16&&(i.message=n[4]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function $m(r){let e,t,n=ke(Object.entries(r[0])),s=[];for(let o=0;o<n.length;o+=1)s[o]=ro(Xi(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&1){n=ke(Object.entries(o[0]));let a;for(a=0;a<n.length;a+=1){const f=Xi(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=ro(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function ro(r){let e,t;return e=new Hn({props:{title:r[20].title,id:r[20].book_id,author:r[20].author}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.title=n[20].title),s&1&&(i.id=n[20].book_id),s&1&&(i.author=n[20].author),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Sm(r){let e,t,n,s;const i=[$m,km,ym],o=[];function l(a,f){return a[0]?0:a[4]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function Tm(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Dm(r){let e,t;return e=new Fn({props:{message:r[5]}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&32&&(i.message=n[5]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Om(r){let e,t,n=ke(Object.entries(r[1])),s=[];for(let o=0;o<n.length;o+=1)s[o]=no(Qi(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){n=ke(Object.entries(o[1]));let a;for(a=0;a<n.length;a+=1){const f=Qi(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=no(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function no(r){let e,t;return e=new Wl({props:{id:r[17].author_id,name:r[17].name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.id=n[17].author_id),s&2&&(i.name=n[17].name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Cm(r){let e,t,n,s;const i=[Om,Dm,Tm],o=[];function l(a,f){return a[1]?0:a[5]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function Mm(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Pm(r){let e,t;return e=new Fn({props:{message:r[6]}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&64&&(i.message=n[6]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Em(r){let e,t,n=ke(Object.entries(r[2])),s=[];for(let o=0;o<n.length;o+=1)s[o]=so(Zi(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row justify-content-around")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&4){n=ke(Object.entries(o[2]));let a;for(a=0;a<n.length;a+=1){const f=Zi(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=so(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function so(r){let e,t;return e=new ql({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&4&&(i.id=n[14].publisher_id),s&4&&(i.name=n[14].name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Rm(r){let e,t,n,s;const i=[Em,Pm,Mm],o=[];function l(a,f){return a[2]?0:a[6]?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function jm(r){let e,t,n,s,i,o,l,a,f,d,_,m,w;t=new Xc({});const p=[vm,bm],g=[];function y(v,D){return v[3]&&v[3].length!=0?0:v[7]?1:-1}return~(s=y(r))&&(i=g[s]=p[s](r)),l=new Tt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[Sm]},$$scope:{ctx:r}}}),f=new Tt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[Cm]},$$scope:{ctx:r}}}),_=new Tt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[Rm]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),n=b(),i&&i.c(),o=b(),Q(l.$$.fragment),a=b(),Q(f.$$.fragment),d=b(),Q(_.$$.fragment),c(e,"class","container mb-5")},m(v,D){M(v,e,D),K(t,e,null),u(e,n),~s&&g[s].m(e,null),u(e,o),K(l,e,null),u(e,a),K(f,e,null),u(e,d),K(_,e,null),w=!0},p(v,[D]){let k=s;s=y(v),s===k?~s&&g[s].p(v,D):(i&&(Ie(),A(g[k],1,1,()=>{g[k]=null}),Le()),~s?(i=g[s],i?i.p(v,D):(i=g[s]=p[s](v),i.c()),E(i,1),i.m(e,o)):i=null);const T={};D&67108881&&(T.$$scope={dirty:D,ctx:v}),l.$set(T);const $={};D&67108898&&($.$$scope={dirty:D,ctx:v}),f.$set($);const S={};D&67108932&&(S.$$scope={dirty:D,ctx:v}),_.$set(S)},i(v){w||(E(t.$$.fragment,v),E(i),E(l.$$.fragment,v),E(f.$$.fragment,v),E(_.$$.fragment,v),v&&(m||Ye(()=>{m=Ze(e,Qe,{duration:500}),m.start()})),w=!0)},o(v){A(t.$$.fragment,v),A(i),A(l.$$.fragment,v),A(f.$$.fragment,v),A(_.$$.fragment,v),w=!1},d(v){v&&O(e),Z(t),~s&&g[s].d(),Z(l),Z(f),Z(_)}}}function Am(r,e,t){const n=localStorage.getItem("user_id")||"";let s,i,o,l,a,f,d,_;async function m(){const{data:y,error:v}=await le.rpc("get_books");t(0,s=y),t(4,a=v?v.message:"")}async function w(){const{data:y,error:v}=await le.rpc("get_authors");t(1,i=y),t(5,f=v?v.message:"")}async function p(){const{data:y,error:v}=await le.rpc("get_publishers");t(2,o=y),t(6,d=v||"")}async function g(){const{data:y,error:v}=await le.rpc("get_inventory",{loggedid:n});t(3,l=y),console.log(l),t(7,_=v||"")}return m(),w(),p(),g(),[s,i,o,l,a,f,d,_]}class Im extends Oe{constructor(e){super(),De(this,e,Am,jm,Se,{})}}function io(r){let e,t,n;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-printer"></i> Print',c(e,"class","btn btn-outline-primary btn-sm col-1")},m(s,i){M(s,e,i),t||(n=W(e,"click",r[3]),t=!0)},p:ne,d(s){s&&O(e),t=!1,n()}}}function Lm(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$=r[1]&&io(r);return{c(){e=h("div"),t=h("div"),n=h("button"),n.innerHTML='<i class="bi bi-arrow-left-circle"></i>',s=b(),i=h("div"),o=h("h4"),l=X(r[0]),a=b(),$&&$.c(),f=b(),d=h("div"),_=h("h1"),_.innerHTML=`<b><i class="bi bi-book"></i>
      Zenodotus</b>`,m=b(),w=h("h6"),w.textContent="CTADVDBL Project",p=b(),g=h("h4"),y=X(r[0]),v=b(),D=h("small"),D.textContent=`Printed by: Staff #${localStorage.getItem("user_id")}`,c(n,"class","btn"),Ge(n,"font-size","1.5em"),c(o,"class","my-auto"),c(t,"class","d-flex align-items-center"),c(e,"class","d-flex border-bottom border-1 my-3 align-items-center d-print-none justify-content-between"),c(_,"class","m-0"),c(g,"class","mb-0"),c(d,"class","justify-content-center align-items-center d-none d-print-flex flex-column mt-3")},m(S,C){M(S,e,C),u(e,t),u(t,n),u(t,s),u(t,i),u(i,o),u(o,l),u(e,a),$&&$.m(e,null),M(S,f,C),M(S,d,C),u(d,_),u(d,m),u(d,w),u(d,p),u(d,g),u(g,y),u(d,v),u(d,D),k||(T=W(n,"click",r[2]),k=!0)},p(S,[C]){C&1&&ae(l,S[0]),S[1]?$?$.p(S,C):($=io(S),$.c(),$.m(e,null)):$&&($.d(1),$=null),C&1&&ae(y,S[0])},i:ne,o:ne,d(S){S&&(O(e),O(f),O(d)),$&&$.d(),k=!1,T()}}}function Ym(r,e,t){let{text:n}=e,{print:s=!1}=e;const i=()=>bs(),o=()=>window.print();return r.$$set=l=>{"text"in l&&t(0,n=l.text),"print"in l&&t(1,s=l.print)},[n,s,i,o]}class st extends Oe{constructor(e){super(),De(this,e,Ym,Lm,Se,{text:0,print:1})}}function Nm(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T;const $=r[5].default,S=jn($,r,r[4],null);return{c(){e=h("div"),t=h("div"),n=h("div"),s=h("div"),i=h("h1"),o=X(r[0]),l=b(),a=h("button"),f=b(),d=h("div"),S&&S.c(),_=b(),m=h("div"),w=h("button"),p=X(r[3]),g=b(),y=h("button"),v=X(r[2]),c(i,"class","modal-title fs-5"),c(i,"id","exampleModalLabel"),c(a,"type","button"),c(a,"class","btn-close"),c(a,"data-bs-dismiss","modal"),c(a,"aria-label","Close"),c(s,"class","modal-header"),c(d,"class","modal-body"),c(w,"type","button"),c(w,"class","btn btn-secondary"),c(w,"data-bs-dismiss","modal"),c(y,"type","button"),c(y,"class","btn btn-primary"),c(y,"data-bs-dismiss","modal"),c(m,"class","modal-footer"),c(n,"class","modal-content"),c(t,"class","modal-dialog"),c(e,"class","modal fade"),c(e,"id",r[1]),c(e,"tabindex","-1"),c(e,"aria-hidden","true")},m(C,P){M(C,e,P),u(e,t),u(t,n),u(n,s),u(s,i),u(i,o),u(s,l),u(s,a),u(n,f),u(n,d),S&&S.m(d,null),u(n,_),u(n,m),u(m,w),u(w,p),u(m,g),u(m,y),u(y,v),D=!0,k||(T=W(y,"click",r[6]),k=!0)},p(C,[P]){(!D||P&1)&&ae(o,C[0]),S&&S.p&&(!D||P&16)&&In(S,$,C,C[4],D?An($,C[4],P,null):Ln(C[4]),null),(!D||P&8)&&ae(p,C[3]),(!D||P&4)&&ae(v,C[2]),(!D||P&2)&&c(e,"id",C[1])},i(C){D||(E(S,C),D=!0)},o(C){A(S,C),D=!1},d(C){C&&O(e),S&&S.d(C),k=!1,T()}}}function Um(r,e,t){let{$$slots:n={},$$scope:s}=e,{title:i="Modal"}=e,{id:o="modal"}=e,{pButton:l="Confirm"}=e,{sButton:a="Cancel"}=e;function f(d){$n.call(this,r,d)}return r.$$set=d=>{"title"in d&&t(0,i=d.title),"id"in d&&t(1,o=d.id),"pButton"in d&&t(2,l=d.pButton),"sButton"in d&&t(3,a=d.sButton),"$$scope"in d&&t(4,s=d.$$scope)},[i,o,l,a,s,n,f]}class Hm extends Oe{constructor(e){super(),De(this,e,Um,Nm,Se,{title:0,id:1,pButton:2,sButton:3})}}function Fm(r){let e,t,n;return{c(){e=h("div"),t=h("div"),t.innerHTML=`<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try
        again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>`,c(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","70vh"),c(e,"class","position-absolute top-50 start-50 translate-middle z-2"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","100vh")},m(s,i){M(s,e,i),u(e,t)},p:ne,i(s){s&&(n||Ye(()=>{n=Ze(t,Qe,{duration:500}),n.start()}))},o:ne,d(s){s&&O(e)}}}class _i extends Oe{constructor(e){super(),De(this,e,null,Fm,Se,{})}}function Bm(r){let e,t,n,s,i,o;const l=r[3].default,a=jn(l,r,r[2],null);return{c(){e=h("div"),t=h("label"),n=X(r[0]),s=b(),i=h("div"),a&&a.c(),c(t,"class","col-sm-4 col-md-3 col-form-label"),c(t,"for",r[1]),c(i,"class","col-sm-8 col-md-9"),c(e,"class","mb-4 row")},m(f,d){M(f,e,d),u(e,t),u(t,n),u(e,s),u(e,i),a&&a.m(i,null),o=!0},p(f,[d]){(!o||d&1)&&ae(n,f[0]),(!o||d&2)&&c(t,"for",f[1]),a&&a.p&&(!o||d&4)&&In(a,l,f,f[2],o?An(l,f[2],d,null):Ln(f[2]),null)},i(f){o||(E(a,f),o=!0)},o(f){A(a,f),o=!1},d(f){f&&O(e),a&&a.d(f)}}}function Wm(r,e,t){let{$$slots:n={},$$scope:s}=e,{label:i}=e,{id:o}=e;return r.$$set=l=>{"label"in l&&t(0,i=l.label),"id"in l&&t(1,o=l.id),"$$scope"in l&&t(2,s=l.$$scope)},[i,o,s,n]}class Ae extends Oe{constructor(e){super(),De(this,e,Wm,Bm,Se,{label:0,id:1})}}function qm(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee;return{c(){e=h("div"),t=h("div"),n=h("h1"),n.textContent="Book Deletion",s=b(),i=h("div"),i.innerHTML='<p class="my-0">This action will delete all records of this book in the database including book details, library holdings, and reports.</p> <div class="text-secondary">If you want to hide the book from students, you can make the book <b>private</b></div>',o=b(),l=h("div"),a=X("Please enter your password and name of the book "),f=h("b"),d=X('"'),_=X(r[0]),m=X('"'),w=X(" to confirm deletion."),p=b(),g=h("div"),y=h("label"),y.textContent="Password:",v=b(),D=h("div"),k=h("input"),$=b(),S=h("div"),S.textContent="Wrong Password",C=b(),P=h("div"),N=h("label"),N.textContent="Book Name:",L=b(),H=h("div"),I=h("input"),R=b(),x=h("div"),x.textContent="Book Name does not match",U=b(),Y=h("div"),B=h("button"),B.textContent="Confirm",G=b(),V=h("button"),V.textContent="Cancel",c(n,"class","text-danger"),c(i,"class","text-center mb-4"),c(l,"class","mb-4"),c(y,"class","col-4 col-form-label"),c(y,"for","password"),c(k,"class",T="form-control "+r[3]),c(k,"type","password"),c(k,"id","password"),c(S,"class","invalid-feedback"),c(D,"class","col-8 "),c(g,"class","mb-4 row col-4"),c(N,"class","col-4 col-form-label"),c(N,"for","bookname"),c(I,"class",F="form-control "+r[4]),c(I,"type","text"),c(I,"id","bookname"),c(x,"class","invalid-feedback"),c(H,"class","col-8 "),c(P,"class","mb-4 row col-4"),c(B,"class","btn btn-danger"),c(V,"class","btn btn-outline-success"),c(t,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ge(t,"height","90vh"),c(e,"class","position-fixed top-50 start-50 translate-middle z-2 hid"),Ge(e,"background-color","var(--bs-body-bg)"),Ge(e,"width","100vw"),Ge(e,"height","102vh"),Ge(e,"padding","0")},m(te,ce){M(te,e,ce),u(e,t),u(t,n),u(t,s),u(t,i),u(t,o),u(t,l),u(l,a),u(l,f),u(f,d),u(f,_),u(f,m),u(l,w),u(t,p),u(t,g),u(g,y),u(g,v),u(g,D),u(D,k),q(k,r[1]),u(D,$),u(D,S),u(t,C),u(t,P),u(P,N),u(P,L),u(P,H),u(H,I),q(I,r[2]),u(H,R),u(H,x),u(t,U),u(t,Y),u(Y,B),u(Y,G),u(Y,V),J=!0,z||(ee=[W(k,"keyup",r[8]),W(k,"input",r[9]),W(I,"keyup",r[10]),W(I,"input",r[11]),W(B,"click",r[6]),W(V,"click",r[12])],z=!0)},p(te,[ce]){(!J||ce&1)&&ae(_,te[0]),(!J||ce&8&&T!==(T="form-control "+te[3]))&&c(k,"class",T),ce&2&&k.value!==te[1]&&q(k,te[1]),(!J||ce&16&&F!==(F="form-control "+te[4]))&&c(I,"class",F),ce&4&&I.value!==te[2]&&q(I,te[2])},i(te){J||(te&&Ye(()=>{J&&(j||(j=Ot(e,Ct,{duration:400,y:-900},!0)),j.run(1))}),J=!0)},o(te){te&&(j||(j=Ot(e,Ct,{duration:400,y:-900},!1)),j.run(0)),J=!1},d(te){te&&O(e),te&&j&&j.end(),z=!1,we(ee)}}}function Vm(r,e,t){let{bookTitle:n}=e,{bookID:s}=e;const i=$l();let o,l,a,f;async function d(){l!=n&&t(4,f="is-invalid");const{data:y,error:v}=await le.from("user_level").select("user_id").eq("user_id",localStorage.getItem("user_id")).eq("password",o).single();if(v&&(console.error(v),t(3,a="is-invalid")),a||f)return;const{error:D}=await le.rpc("delete_book",{id:s});if(D)console.error(D),alert(`Failed to delete: ${D.message}`);else{const{error:k}=await le.from("reports").insert({report_type:"Delete",report_details:`All data of ${n} have been deleted`,staff_id:localStorage.getItem("user_id")});k&&console.error(k),alert(`Successfully deleted all data of ${n}`)}}const _=()=>t(3,a="");function m(){o=this.value,t(1,o)}const w=()=>t(4,f="");function p(){l=this.value,t(2,l)}const g=()=>i("cancel");return r.$$set=y=>{"bookTitle"in y&&t(0,n=y.bookTitle),"bookID"in y&&t(7,s=y.bookID)},[n,o,l,a,f,i,d,s,_,m,w,p,g]}class zm extends Oe{constructor(e){super(),De(this,e,Vm,qm,Se,{bookTitle:0,bookID:7})}}function oo(r,e,t){const n=r.slice();return n[33]=e[t][0],n[34]=e[t][1],n}function lo(r,e,t){const n=r.slice();return n[33]=e[t][0],n[37]=e[t][1],n}function ao(r){let e,t;return e=new _i({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Gm(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Jm(r){let e,t,n,s,i,o=r[3].isbn+"",l,a,f,d,_,m,w=r[3].title+"",p,g,y,v,D=r[3].description+"",k,T,$,S,C,P,N=r[3].author.name+"",L,H,I,F,R,x,U,Y=r[3].publisher.name+"",B,G,V,j,J,z,ee,te,ce,de,me=r[3].shelf_number+"",Me;function _e(be,ye){return be[10]?Km:xm}let se=_e(r),fe=se(r),pe=r[1]=="client"&&uo(r),ue=r[1]=="staff"&&co(r),ie=r[4]&&fo(r);return{c(){e=h("div"),t=h("div"),fe.c(),n=b(),s=h("small"),i=X("ISBN: "),l=X(o),a=b(),pe&&pe.c(),f=b(),d=h("div"),_=h("div"),m=h("h1"),p=X(w),g=b(),ue&&ue.c(),y=b(),v=h("p"),k=X(D),T=b(),$=h("p"),S=h("b"),S.textContent="Author:",C=b(),P=h("a"),L=X(N),I=b(),F=h("p"),R=h("b"),R.textContent="Publisher:",x=b(),U=h("a"),B=X(Y),V=b(),j=h("p"),J=h("b"),J.textContent="Category:",z=b(),ie&&ie.c(),ee=b(),te=h("p"),ce=h("b"),ce.textContent="Shelf No.:",de=b(),Me=X(me),c(s,"class","text-secondary"),c(t,"class","d-flex flex-column justify-content-center align-items-center gap-2"),c(m,"id","book-title"),c(m,"class","flex-fill"),c(_,"class","d-flex justify-content-between align-items-center flex-column flex-sm-row"),c(v,"id","book-description"),c(P,"href",H="./#/author/"+r[3].author.author_id),c(U,"href",G="./#/publisher/"+r[3].publisher.publisher_id),c(d,"id","details-container"),c(d,"class","container mt-md-0 mt-3"),c(e,"class","d-md-flex d-block")},m(be,ye){M(be,e,ye),u(e,t),fe.m(t,null),u(t,n),u(t,s),u(s,i),u(s,l),u(t,a),pe&&pe.m(t,null),u(e,f),u(e,d),u(d,_),u(_,m),u(m,p),u(_,g),ue&&ue.m(_,null),u(d,y),u(d,v),u(v,k),u(d,T),u(d,$),u($,S),u($,C),u($,P),u(P,L),u(d,I),u(d,F),u(F,R),u(F,x),u(F,U),u(U,B),u(d,V),u(d,j),u(j,J),u(j,z),ie&&ie.m(j,null),u(d,ee),u(d,te),u(te,ce),u(te,de),u(te,Me)},p(be,ye){se===(se=_e(be))&&fe?fe.p(be,ye):(fe.d(1),fe=se(be),fe&&(fe.c(),fe.m(t,n))),ye[0]&8&&o!==(o=be[3].isbn+"")&&ae(l,o),be[1]=="client"?pe?pe.p(be,ye):(pe=uo(be),pe.c(),pe.m(t,null)):pe&&(pe.d(1),pe=null),ye[0]&8&&w!==(w=be[3].title+"")&&ae(p,w),be[1]=="staff"?ue?ue.p(be,ye):(ue=co(be),ue.c(),ue.m(_,null)):ue&&(ue.d(1),ue=null),ye[0]&8&&D!==(D=be[3].description+"")&&ae(k,D),ye[0]&8&&N!==(N=be[3].author.name+"")&&ae(L,N),ye[0]&8&&H!==(H="./#/author/"+be[3].author.author_id)&&c(P,"href",H),ye[0]&8&&Y!==(Y=be[3].publisher.name+"")&&ae(B,Y),ye[0]&8&&G!==(G="./#/publisher/"+be[3].publisher.publisher_id)&&c(U,"href",G),be[4]?ie?ie.p(be,ye):(ie=fo(be),ie.c(),ie.m(j,null)):ie&&(ie.d(1),ie=null),ye[0]&8&&me!==(me=be[3].shelf_number+"")&&ae(Me,me)},i:ne,o:ne,d(be){be&&O(e),fe.d(),pe&&pe.d(),ue&&ue.d(),ie&&ie.d()}}}function xm(r){let e,t,n,s;return{c(){e=h("img"),c(e,"id","img-cover"),c(e,"class","border p-3"),Ke(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+r[3].book_id+".jpg")||c(e,"src",t),c(e,"alt","book cover"),c(e,"height","300"),c(e,"width","300"),Ge(e,"object-fit","contain")},m(i,o){M(i,e,o),n||(s=W(e,"error",r[22]),n=!0)},p(i,o){o[0]&8&&!Ke(e.src,t="https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/"+i[3].book_id+".jpg")&&c(e,"src",t)},d(i){i&&O(e),n=!1,s()}}}function Km(r){let e,t;return{c(){e=h("img"),c(e,"id","img-cover"),c(e,"class","border p-3"),Ke(e.src,t="./book-cover.png")||c(e,"src",t),c(e,"alt","book cover"),c(e,"height","300"),c(e,"width","300"),Ge(e,"object-fit","contain")},m(n,s){M(n,e,s)},p:ne,d(n){n&&O(e)}}}function uo(r){let e;function t(i,o){return i[7]?ep:i[0]?Xm:i[8]==0?Qm:Zm}let n=t(r),s=n(r);return{c(){s.c(),e=ze()},m(i,o){s.m(i,o),M(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&O(e),s.d(i)}}}function Zm(r){let e,t,n;return{c(){e=h("button"),e.textContent="Reserve",e.disabled=!1,c(e,"class","btn btn-primary w-50")},m(s,i){M(s,e,i),t||(n=W(e,"click",r[15]),t=!0)},p:ne,d(s){s&&O(e),t=!1,n()}}}function Qm(r){let e;return{c(){e=h("button"),e.textContent="Unavailable",e.disabled=!0,c(e,"class","btn btn-secondary w-50")},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function Xm(r){let e,t,n,s,i,o,l;return{c(){e=h("button"),t=h("i"),n=b(),s=X(r[12]),c(t,"class","bi bi-x-circle"),c(e,"class",i="btn "+r[9]+" w-75")},m(a,f){M(a,e,f),u(e,t),u(e,n),u(e,s),o||(l=[W(e,"mouseenter",r[23]),W(e,"mouseleave",r[24]),W(e,"click",r[16])],o=!0)},p(a,f){f[0]&4096&&ae(s,a[12]),f[0]&512&&i!==(i="btn "+a[9]+" w-75")&&c(e,"class",i)},d(a){a&&O(e),o=!1,we(l)}}}function ep(r){let e,t,n,s;return{c(){e=h("button"),t=X("Borrowed (#"),n=X(r[7]),s=X(")"),c(e,"class","btn btn-secondary w-75"),e.disabled=!0},m(i,o){M(i,e,o),u(e,t),u(e,n),u(e,s)},p(i,o){o[0]&128&&ae(n,i[7])},d(i){i&&O(e)}}}function co(r){let e,t,n,s,i,o,l,a,f,d;function _(p,g){if(p[3].storage_type=="public")return rp;if(p[3].storage_type=="private")return tp}let m=_(r),w=m&&m(r);return{c(){e=h("div"),t=h("a"),n=h("button"),n.innerHTML='<i class="bi bi-pencil-square"></i> <div class="d-inline">Edit Details</div>',s=b(),i=h("span"),i.textContent="|",o=b(),w&&w.c(),l=b(),a=h("button"),a.innerHTML='<i class="bi bi-trash3-fill"></i> <div class="d-none d-sm-inline"></div>',c(n,"class","btn btn-outline-primary"),c(t,"href","./#/update-book?id="+r[13]),c(i,"class","mx-2"),c(a,"class","btn btn-outline-danger"),c(a,"title","Delete Permanently"),c(e,"class","d-print-none")},m(p,g){M(p,e,g),u(e,t),u(t,n),u(e,s),u(e,i),u(e,o),w&&w.m(e,null),u(e,l),u(e,a),f||(d=W(a,"click",r[18]),f=!0)},p(p,g){m===(m=_(p))&&w?w.p(p,g):(w&&w.d(1),w=m&&m(p),w&&(w.c(),w.m(e,l)))},d(p){p&&O(e),w&&w.d(),f=!1,d()}}}function tp(r){let e,t,n;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-lock-fill"></i>',c(e,"class","btn btn-outline-primary"),c(e,"title","Change to public")},m(s,i){M(s,e,i),t||(n=W(e,"click",r[19]),t=!0)},p:ne,d(s){s&&O(e),t=!1,n()}}}function rp(r){let e,t,n;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-globe-americas"></i>',c(e,"class","btn btn-outline-primary"),c(e,"title","Change to private")},m(s,i){M(s,e,i),t||(n=W(e,"click",r[20]),t=!0)},p:ne,d(s){s&&O(e),t=!1,n()}}}function fo(r){let e,t=ke(Object.entries(r[4])),n=[];for(let s=0;s<t.length;s+=1)n[s]=ho(lo(r,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ze()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);M(s,e,i)},p(s,i){if(i[0]&16){t=ke(Object.entries(s[4]));let o;for(o=0;o<t.length;o+=1){const l=lo(s,t,o);n[o]?n[o].p(l,i):(n[o]=ho(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function ho(r){let e,t=r[37].category.name+"",n,s;return{c(){e=h("a"),n=X(t),s=X(`\r
                `),c(e,"href","./#/")},m(i,o){M(i,e,o),u(e,n),M(i,s,o)},p(i,o){o[0]&16&&t!==(t=i[37].category.name+"")&&ae(n,t)},d(i){i&&(O(e),O(s))}}}function _o(r){let e,t;return e=new Tt({props:{title:"Status",icon:"journal",$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s[0]&96|s[1]&512&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function mo(r){let e;function t(i,o){return i[6].length<=0?sp:np}let n=t(r),s=n(r);return{c(){s.c(),e=ze()},m(i,o){s.m(i,o),M(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&O(e),s.d(i)}}}function np(r){let e,t,n,s,i=ke(Object.entries(r[6])),o=[];for(let l=0;l<i.length;l+=1)o[l]=po(oo(r,i,l));return{c(){e=h("table"),t=h("thead"),t.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',n=b(),s=h("tbody");for(let l=0;l<o.length;l+=1)o[l].c();c(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){M(l,e,a),u(e,t),u(e,n),u(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(l,a){if(a[0]&64){i=ke(Object.entries(l[6]));let f;for(f=0;f<i.length;f+=1){const d=oo(l,i,f);o[f]?o[f].p(d,a):(o[f]=po(d),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&O(e),xe(o,l)}}}function sp(r){let e;return{c(){e=h("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy above</small>",c(e,"class","text-center my-5")},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function po(r){let e,t,n=r[34].barcode+"",s,i,o,l=r[34].status!="Available"?`${r[34].fname} ${r[34].lname}`:"--",a,f,d,_=r[34].status+"",m,w,p=r[34].status=="Reserved"?`(${r[34].reservation_id})`:r[34].status=="Borrowed"?`(${r[34].borrow_id})`:"",g,y,v,D,k,T,$=r[34].status=="Borrowed"?"Return":"Borrow",S,C,P,N,L;return{c(){e=h("tr"),t=h("td"),s=X(n),i=b(),o=h("td"),a=X(l),f=b(),d=h("td"),m=X(_),w=b(),g=X(p),v=b(),D=h("td"),k=h("a"),T=h("small"),S=X($),C=b(),P=h("i"),L=b(),c(d,"class",y=r[34].status=="Available"?"text-bg-success":r[34].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),c(P,"class","bi bi-box-arrow-up-right"),c(k,"href",N=r[34].status=="Available"?`./#/borrow?barcode=${r[34].barcode}`:r[34].status=="Reserved"?`./#/borrow?reserve_id=${r[34].reservation_id}`:`./#/return?borrow_id=${r[34].borrow_id}`),c(k,"class","btn btn-outline-primary btn-sm")},m(H,I){M(H,e,I),u(e,t),u(t,s),u(e,i),u(e,o),u(o,a),u(e,f),u(e,d),u(d,m),u(d,w),u(d,g),u(e,v),u(e,D),u(D,k),u(k,T),u(T,S),u(T,C),u(T,P),u(e,L)},p(H,I){I[0]&64&&n!==(n=H[34].barcode+"")&&ae(s,n),I[0]&64&&l!==(l=H[34].status!="Available"?`${H[34].fname} ${H[34].lname}`:"--")&&ae(a,l),I[0]&64&&_!==(_=H[34].status+"")&&ae(m,_),I[0]&64&&p!==(p=H[34].status=="Reserved"?`(${H[34].reservation_id})`:H[34].status=="Borrowed"?`(${H[34].borrow_id})`:"")&&ae(g,p),I[0]&64&&y!==(y=H[34].status=="Available"?"text-bg-success":H[34].status=="Reserved"?"text-bg-secondary":"text-bg-danger")&&c(d,"class",y),I[0]&64&&$!==($=H[34].status=="Borrowed"?"Return":"Borrow")&&ae(S,$),I[0]&64&&N!==(N=H[34].status=="Available"?`./#/borrow?barcode=${H[34].barcode}`:H[34].status=="Reserved"?`./#/borrow?reserve_id=${H[34].reservation_id}`:`./#/return?borrow_id=${H[34].borrow_id}`)&&c(k,"href",N)},d(H){H&&O(e)}}}function ip(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p=r[6]&&mo(r);return{c(){e=h("div"),t=h("label"),t.textContent="Add Copy:",n=b(),s=h("div"),i=h("input"),o=b(),l=h("button"),l.textContent="Generate",a=b(),f=h("button"),f.textContent="Add",d=b(),p&&p.c(),_=ze(),c(t,"for","copy"),c(t,"class","form=control col-auto"),c(i,"type","text"),c(i,"class","form-control"),c(i,"id","copy"),c(i,"placeholder","Barcode Number"),c(s,"class","col-4"),c(l,"class","btn btn-outline-primary col-1"),c(f,"class","btn btn-primary col-1"),c(e,"class","row justify-content-center align-items-center my-3 gap-2")},m(g,y){M(g,e,y),u(e,t),u(e,n),u(e,s),u(s,i),q(i,r[5]),u(e,o),u(e,l),u(e,a),u(e,f),M(g,d,y),p&&p.m(g,y),M(g,_,y),m||(w=[W(i,"input",r[25]),W(l,"click",r[17]),W(f,"click",r[14])],m=!0)},p(g,y){y[0]&32&&i.value!==g[5]&&q(i,g[5]),g[6]?p?p.p(g,y):(p=mo(g),p.c(),p.m(_.parentNode,_)):p&&(p.d(1),p=null)},d(g){g&&(O(e),O(d),O(_)),p&&p.d(g),m=!1,we(w)}}}function go(r){let e,t;return e=new zm({props:{bookID:r[13],bookTitle:r[3].title}}),e.$on("cancel",r[18]),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s[0]&8&&(i.bookTitle=n[3].title),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function op(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g=r[2]&&ao();s=new st({props:{text:"Book Details"}});const y=[Jm,Gm],v=[];function D($,S){return $[3]?0:1}o=D(r),l=v[o]=y[o](r);let k=r[1]=="staff"&&_o(r),T=r[11]&&go(r);return{c(){e=h("main"),g&&g.c(),t=b(),n=h("section"),Q(s.$$.fragment),i=b(),l.c(),a=b(),k&&k.c(),f=b(),d=h("div"),m=b(),T&&T.c(),w=ze(),c(d,"class","my-5"),c(e,"class","container")},m($,S){M($,e,S),g&&g.m(e,null),u(e,t),u(e,n),K(s,n,null),u(n,i),v[o].m(n,null),u(e,a),k&&k.m(e,null),u(e,f),u(e,d),M($,m,S),T&&T.m($,S),M($,w,S),p=!0},p($,S){$[2]?g?S[0]&4&&E(g,1):(g=ao(),g.c(),E(g,1),g.m(e,t)):g&&(Ie(),A(g,1,1,()=>{g=null}),Le());let C=o;o=D($),o===C?v[o].p($,S):(Ie(),A(v[C],1,1,()=>{v[C]=null}),Le(),l=v[o],l?l.p($,S):(l=v[o]=y[o]($),l.c()),E(l,1),l.m(n,null)),$[1]=="staff"?k?(k.p($,S),S[0]&2&&E(k,1)):(k=_o($),k.c(),E(k,1),k.m(e,f)):k&&(Ie(),A(k,1,1,()=>{k=null}),Le()),$[11]?T?(T.p($,S),S[0]&2048&&E(T,1)):(T=go($),T.c(),E(T,1),T.m(w.parentNode,w)):T&&(Ie(),A(T,1,1,()=>{T=null}),Le())},i($){p||(E(g),E(s.$$.fragment,$),E(l),E(k),$&&(_||Ye(()=>{_=Ze(e,Qe,{duration:500}),_.start()})),E(T),p=!0)},o($){A(g),A(s.$$.fragment,$),A(l),A(k),A(T),p=!1},d($){$&&(O(e),O(m),O(w)),g&&g.d(),Z(s),v[o].d(),k&&k.d(),T&&T.d($)}}}function bo(){return 3e6+Math.floor(Math.random()*9e3)}function vo(){return"1000"+Math.floor(Math.random()*9e3)}function lp(r,e,t){let n,s;Qt.subscribe(V=>t(1,s=V));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a=!1,f,d;async function _(){const{data:V,error:j}=await le.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",l);console.table(V[0]),t(3,f=V[0]),V.length==0&&t(2,a=!0),s=="client"&&f.storage_type=="private"&&Dn("/invalid-link");const{data:J,error:z}=await le.from("books_category").select("category(category_id, name)").eq("book_id",l);console.log("category",J),z&&console.error(z),J.length==0?(t(4,d={0:{category:{name:"Uncategorized",id:0}}}),console.log("category",d)):t(4,d=J)}Dt(_);let m="";async function w(){const{data:V,error:j}=await le.rpc("get_holdings",{bookid:l});j&&console.error(j),console.table(V),t(6,g=V)}async function p(){if(!m.startsWith("1000")||m.length!=8||isNaN(Number(m))){alert("Invalid format");return}const{data:V}=await le.from("library_holdings").select().eq("barcode",m);if(V.length!=0)return;const{error:j}=await le.from("library_holdings").insert({book_id:l,barcode:m});if(j){console.error(j),alert(j.message);return}t(5,m="")}let g;s=="staff"&&(w(),le.channel("holdings").on("postgres_changes",{event:"*",schema:"public",table:"library_holdings"},w).subscribe());let y,v,D=0,k="btn-secondary";s=="client"&&(S(),v||(T(),$()));async function T(){const{data:V,error:j}=await le.rpc("isreserved",{bookid:l,studid:i});t(0,y=V)}async function $(){const{data:V,error:j}=await le.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");t(8,D=V.length)}async function S(){const{data:V,error:j}=await le.rpc("isborrowed",{bookid:l,studid:i});t(7,v=V)}async function C(){const{data:V,error:j}=await le.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(j){console.error(j);return}const{error:J}=await le.from("book_reservation").insert({reservation_id:await N(),stud_id:i,holding_id:V.holding_id});if(J){console.error(J);return}const{data:z,error:ee}=await le.from("library_holdings").update({status:"Reserved"}).eq("barcode",V.barcode).select("holding_id").single();if(ee){console.error(ee);return}T()}async function P(){const{data:V,error:j}=await le.from("book_reservation").update({active:!1}).eq("reservation_id",y).select().single(),{error:J}=await le.from("library_holdings").update({status:"Available"}).eq("holding_id",V.holding_id);!j||!J?(T(),$()):(console.error(j),console.error(J))}async function N(){let V=bo();const{data:j,error:J}=await le.from("book_reservation").select().eq("reservation_id",V);return console.log(j),j.length!=0&&(V=bo(),console.log("exists")),console.log(V),V}async function L(){let V=vo();const{data:j,error:J}=await le.from("book_borrow").select().eq("borrow_id",V);console.log(j),j.length!=0&&(V=vo(),console.log("exists")),t(5,m=V)}let H=!1,I=!1;function F(){t(11,I=!I)}async function R(){const{data:V,error:j}=await le.from("books").update({storage_type:"public"}).eq("book_id",l);if(j){alert(j);return}t(3,f.storage_type="public",f),t(3,f)}async function x(){const{data:V,error:j}=await le.from("books").update({storage_type:"private"}).eq("book_id",l);if(j){alert(j);return}t(3,f.storage_type="private",f),t(3,f)}const U=()=>t(10,H=!0),Y=()=>{t(12,n="Cancel Reservation"),t(9,k="btn-danger")},B=()=>{t(12,n=`Reserved (#${y})`),t(9,k="btn-secondary")};function G(){m=this.value,t(5,m)}return r.$$set=V=>{"params"in V&&t(21,o=V.params)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(12,n=`Reserved (${y})`)},[y,s,a,f,d,m,g,v,D,k,H,I,n,l,p,C,P,L,F,R,x,o,U,Y,B,G]}class La extends Oe{constructor(e){super(),De(this,e,lp,op,Se,{params:21},null,[-1,-1])}}function wo(r,e,t){const n=r.slice();return n[35]=e[t][0],n[36]=e[t][1],n}function yo(r,e,t){const n=r.slice();return n[35]=e[t][0],n[40]=e[t][1],n}function ko(r,e,t){const n=r.slice();return n[35]=e[t][0],n[44]=e[t][1],n}function ap(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","text"),c(e,"id","book-name"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[4]),t||(n=W(e,"input",r[18]),t=!0)},p(s,i){i[0]&16&&e.value!==s[4]&&q(e,s[4])},d(s){s&&O(e),t=!1,n()}}}function up(r){let e,t,n;return{c(){e=h("textarea"),c(e,"class","form-control"),c(e,"id","book-description"),c(e,"rows","6"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[5]),t||(n=W(e,"input",r[19]),t=!0)},p(s,i){i[0]&32&&q(e,s[5])},d(s){s&&O(e),t=!1,n()}}}function cp(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","file"),c(e,"id","book-cover"),c(e,"accept","image/*")},m(s,i){M(s,e,i),r[21](e),t||(n=W(e,"change",r[20]),t=!0)},p:ne,d(s){s&&O(e),r[21](null),t=!1,n()}}}function fp(r){let e,t,n,s,i,o,l,a;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=b(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","categories"),c(e,"class",t="form-control "+r[11]),c(e,"type","text"),c(e,"id","book-category"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","form-text"),c(o,"class","invalid-feedback")},m(f,d){M(f,e,d),q(e,r[6]),M(f,n,d),M(f,s,d),M(f,i,d),M(f,o,d),l||(a=[W(e,"input",r[23]),W(e,"keyup",r[24])],l=!0)},p(f,d){d[0]&2048&&t!==(t="form-control "+f[11])&&c(e,"class",t),d[0]&64&&e.value!==f[6]&&q(e,f[6])},d(f){f&&(O(e),O(n),O(s),O(i),O(o)),l=!1,we(a)}}}function dp(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","authors"),c(e,"class",t="form-control "+r[12]),c(e,"type","text"),c(e,"id","book-author"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[7]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[25]),W(e,"keyup",r[26])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&c(e,"class",t),a[0]&128&&e.value!==l[7]&&q(e,l[7])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function hp(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","publishers"),c(e,"class",t="form-control "+r[13]),c(e,"type","text"),c(e,"id","book-publisher"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[8]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[27]),W(e,"keyup",r[28])],i=!0)},p(l,a){a[0]&8192&&t!==(t="form-control "+l[13])&&c(e,"class",t),a[0]&256&&e.value!==l[8]&&q(e,l[8])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function _p(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","number"),c(e,"id","book-shelf"),c(e,"autocomplete","off"),c(e,"min","0"),c(e,"max","6"),e.required=!0},m(s,i){M(s,e,i),q(e,r[9]),t||(n=W(e,"input",r[29]),t=!0)},p(s,i){i[0]&512&&Xt(e.value)!==s[9]&&q(e,s[9])},d(s){s&&O(e),t=!1,n()}}}function mp(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","text"),c(e,"id","book-isbn"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[10]),t||(n=W(e,"input",r[30]),t=!0)},p(s,i){i[0]&1024&&e.value!==s[10]&&q(e,s[10])},d(s){s&&O(e),t=!1,n()}}}function pp(r){return{c:ne,m:ne,p:ne,d:ne}}function gp(r){let e,t=ke(Object.entries(r[43])),n=[];for(let s=0;s<t.length;s+=1)n[s]=$o(ko(r,t,s));return{c(){e=h("datalist");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"id","authors")},m(s,i){M(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&32768){t=ke(Object.entries(s[43]));let o;for(o=0;o<t.length;o+=1){const l=ko(s,t,o);n[o]?n[o].p(l,i):(n[o]=$o(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function $o(r){let e;return{c(){e=h("option"),e.__value=r[44].name,q(e,e.__value)},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function bp(r){return{c:ne,m:ne,p:ne,d:ne}}function vp(r){return{c:ne,m:ne,p:ne,d:ne}}function wp(r){let e,t=ke(Object.entries(r[39])),n=[];for(let s=0;s<t.length;s+=1)n[s]=So(yo(r,t,s));return{c(){e=h("datalist");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"id","publishers")},m(s,i){M(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&65536){t=ke(Object.entries(s[39]));let o;for(o=0;o<t.length;o+=1){const l=yo(s,t,o);n[o]?n[o].p(l,i):(n[o]=So(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function So(r){let e;return{c(){e=h("option"),e.__value=r[40].name,q(e,e.__value)},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function yp(r){return{c:ne,m:ne,p:ne,d:ne}}function kp(r){return{c:ne,m:ne,p:ne,d:ne}}function $p(r){let e,t=ke(Object.entries(r[34])),n=[];for(let s=0;s<t.length;s+=1)n[s]=To(wo(r,t,s));return{c(){e=h("datalist");for(let s=0;s<n.length;s+=1)n[s].c();c(e,"id","categories")},m(s,i){M(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&131072){t=ke(Object.entries(s[34]));let o;for(o=0;o<t.length;o+=1){const l=wo(s,t,o);n[o]?n[o].p(l,i):(n[o]=To(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function To(r){let e;return{c(){e=h("option"),e.__value=r[36].name,q(e,e.__value)},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function Sp(r){return{c:ne,m:ne,p:ne,d:ne}}function Tp(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me,Me,_e;t=new st({props:{text:"Add Book"}}),l=new Ae({props:{label:"Book Title:",id:"book-name",$$slots:{default:[ap]},$$scope:{ctx:r}}}),f=new Ae({props:{label:"Book Description:",id:"book-description",$$slots:{default:[up]},$$scope:{ctx:r}}}),_=new Ae({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[cp]},$$scope:{ctx:r}}}),P=new Ae({props:{label:"Category:",id:"book-category",$$slots:{default:[fp]},$$scope:{ctx:r}}}),L=new Ae({props:{label:"Author: ",id:"book-author",$$slots:{default:[dp]},$$scope:{ctx:r}}}),I=new Ae({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[hp]},$$scope:{ctx:r}}}),R=new Ae({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[_p]},$$scope:{ctx:r}}}),U=new Ae({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[mp]},$$scope:{ctx:r}}});let se={ctx:r,current:null,token:null,hasCatch:!1,pending:bp,then:gp,catch:pp,value:43};rs(r[15](),se);let fe={ctx:r,current:null,token:null,hasCatch:!1,pending:yp,then:wp,catch:vp,value:39};rs(r[16](),fe);let pe={ctx:r,current:null,token:null,hasCatch:!1,pending:Sp,then:$p,catch:kp,value:34};return rs(r[17](),pe),{c(){e=h("section"),Q(t.$$.fragment),n=b(),s=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=b(),Q(f.$$.fragment),d=b(),Q(_.$$.fragment),m=b(),w=h("div"),p=h("label"),p.textContent="Preview:",g=b(),y=h("div"),v=h("img"),k=b(),T=h("button"),T.textContent="Remove",S=b(),C=h("div"),Q(P.$$.fragment),N=b(),Q(L.$$.fragment),H=b(),Q(I.$$.fragment),F=b(),Q(R.$$.fragment),x=b(),Q(U.$$.fragment),Y=b(),B=h("div"),G=h("button"),G.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',V=b(),j=h("button"),j.innerHTML='<i class="bi bi-plus-circle"></i> Reset',J=b(),z=h("a"),z.innerHTML='<button class="btn btn-danger" type="button"><i class="bi bi-x-circle"></i> Cancel</button>',ee=b(),se.block.c(),te=b(),fe.block.c(),ce=b(),pe.block.c(),c(p,"for","cover-preview"),c(p,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ke(v.src,D=r[3])||c(v,"src",D),c(v,"alt","Preview"),c(v,"id","cover-preview"),c(v,"height","150"),c(T,"class","btn btn-sm btn-danger"),c(y,"class","col-sm-8 col-md-9"),c(y,"id","preview-div"),c(w,"class",$="my-3 row "+r[2]),c(o,"class","col-sm-12 col-lg-6"),c(C,"class","col-sm-12 col-lg-6"),c(i,"class","row justify-content-center"),c(G,"class","btn btn-success"),c(G,"type","submit"),c(j,"class","btn btn-secondary"),c(j,"type","reset"),c(z,"href","./#/"),c(B,"class","my-3"),c(e,"class","my-1 container")},m(ue,ie){M(ue,e,ie),K(t,e,null),u(e,n),u(e,s),u(s,i),u(i,o),K(l,o,null),u(o,a),K(f,o,null),u(o,d),K(_,o,null),u(o,m),u(o,w),u(w,p),u(w,g),u(w,y),u(y,v),u(y,k),u(y,T),u(i,S),u(i,C),K(P,C,null),u(C,N),K(L,C,null),u(C,H),K(I,C,null),u(C,F),K(R,C,null),u(C,x),K(U,C,null),u(s,Y),u(s,B),u(B,G),u(B,V),u(B,j),u(B,J),u(B,z),u(e,ee),se.block.m(e,se.anchor=null),se.mount=()=>e,se.anchor=te,u(e,te),fe.block.m(e,fe.anchor=null),fe.mount=()=>e,fe.anchor=ce,u(e,ce),pe.block.m(e,pe.anchor=null),pe.mount=()=>e,pe.anchor=null,me=!0,Me||(_e=[W(T,"click",r[22]),W(j,"click",r[31]),W(s,"submit",ft(r[14]))],Me=!0)},p(ue,ie){r=ue;const be={};ie[0]&16|ie[1]&65536&&(be.$$scope={dirty:ie,ctx:r}),l.$set(be);const ye={};ie[0]&32|ie[1]&65536&&(ye.$$scope={dirty:ie,ctx:r}),f.$set(ye);const tr={};ie[0]&3|ie[1]&65536&&(tr.$$scope={dirty:ie,ctx:r}),_.$set(tr),(!me||ie[0]&8&&!Ke(v.src,D=r[3]))&&c(v,"src",D),(!me||ie[0]&4&&$!==($="my-3 row "+r[2]))&&c(w,"class",$);const kt={};ie[0]&2112|ie[1]&65536&&(kt.$$scope={dirty:ie,ctx:r}),P.$set(kt);const je={};ie[0]&4224|ie[1]&65536&&(je.$$scope={dirty:ie,ctx:r}),L.$set(je);const qe={};ie[0]&8448|ie[1]&65536&&(qe.$$scope={dirty:ie,ctx:r}),I.$set(qe);const it={};ie[0]&512|ie[1]&65536&&(it.$$scope={dirty:ie,ctx:r}),R.$set(it);const qt={};ie[0]&1024|ie[1]&65536&&(qt.$$scope={dirty:ie,ctx:r}),U.$set(qt),ns(se,r,ie),ns(fe,r,ie),ns(pe,r,ie)},i(ue){me||(E(t.$$.fragment,ue),E(l.$$.fragment,ue),E(f.$$.fragment,ue),E(_.$$.fragment,ue),E(P.$$.fragment,ue),E(L.$$.fragment,ue),E(I.$$.fragment,ue),E(R.$$.fragment,ue),E(U.$$.fragment,ue),ue&&(de||Ye(()=>{de=Ze(e,Qe,{duration:500}),de.start()})),me=!0)},o(ue){A(t.$$.fragment,ue),A(l.$$.fragment,ue),A(f.$$.fragment,ue),A(_.$$.fragment,ue),A(P.$$.fragment,ue),A(L.$$.fragment,ue),A(I.$$.fragment,ue),A(R.$$.fragment,ue),A(U.$$.fragment,ue),me=!1},d(ue){ue&&O(e),Z(t),Z(l),Z(f),Z(_),Z(P),Z(L),Z(I),Z(R),Z(U),se.block.d(),se.token=null,se=null,fe.block.d(),fe.token=null,fe=null,pe.block.d(),pe.token=null,pe=null,Me=!1,we(_e)}}}function Dp(r,e,t){let n,s,i="d-none",o,l,a,f="",d,_,m,w,p=[],g,y,v;async function D(){const{data:j,error:J}=await le.from("author").select("author_id").eq("name",d).single(),{data:z,error:ee}=await le.from("publisher").select("publisher_id").eq("name",_).single();let te=!0;if((J||!j)&&(t(12,y="is-invalid"),te=!1),(ee||!z)&&(t(13,v="is-invalid"),te=!1),!await k()){if(p.length!=0)return;t(11,g="is-invalid"),te=!1}if(!te)return;const{data:ce,error:de}=await le.from("books").insert({title:l,description:a,author_id:j.author_id,publisher_id:z.publisher_id,shelf_number:m,isbn:w}).select("book_id").single();if(de){console.error(de),alert(de.message);return}let me=!0;for(const Me in p){const{data:_e,error:se}=await le.from("books_category").insert({book_id:ce.book_id,category_id:p[Me]});se&&(console.error(se),me=!1)}if(alert(`Successfully Added ${l}!`),me||alert("Had problem while adding categories, Update book later"),n&&n[0]){const{data:Me,error:_e}=await le.storage.from("books").upload(`${ce.book_id}.jpg`,n[0]);_e&&console.error(_e)}}async function k(){if(f=="")return!1;let j=!0,J=[],z=f.split(",").map(ee=>ee.trim());for(const ee of z){const{data:te,error:ce}=await le.from("category").select("category_id").eq("name",ee).single();ce?(j=!1,console.error(ce)):J.push(te.category_id),console.log(j)}return console.log(z,J),p=j?J:[],console.log(j,p),j}async function T(){const{data:j,error:J}=await le.from("author").select("name").order("name",{ascending:!0});return j}async function $(){const{data:j,error:J}=await le.from("publisher").select("name").order("name",{ascending:!0});return j}async function S(){const{data:j,error:J}=await le.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return j}function C(){l=this.value,t(4,l)}function P(){a=this.value,t(5,a)}function N(){n=this.files,t(0,n)}function L(j){dt[j?"unshift":"push"](()=>{s=j,t(1,s)})}const H=()=>{t(1,s.value="",s),t(0,n="")};function I(){f=this.value,t(6,f)}const F=()=>t(11,g="");function R(){d=this.value,t(7,d)}const x=()=>t(12,y="");function U(){_=this.value,t(8,_)}const Y=()=>t(13,v="");function B(){m=Xt(this.value),t(9,m)}function G(){w=this.value,t(10,w)}const V=()=>{t(1,s.value="",s),t(0,n="")};return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(n&&n[0]){t(2,i="");const j=URL.createObjectURL(n[0]);t(3,o=j)}else t(2,i="d-none")},[n,s,i,o,l,a,f,d,_,m,w,g,y,v,D,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V]}class Op extends Oe{constructor(e){super(),De(this,e,Dp,Tp,Se,{},null,[-1,-1])}}function Do(r,e,t){const n=r.slice();return n[5]=e[t][0],n[6]=e[t][1],n}function Cp(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Mp(r){let e,t,n=r[0].name+"",s,i,o,l,a,f,d,_,m=r[0].link+"",w,p;function g(D,k){return D[0].bio==null?Ep:Pp}let y=g(r),v=y(r);return{c(){e=h("div"),t=h("h1"),s=X(n),i=b(),o=h("p"),v.c(),l=b(),a=h("p"),f=h("b"),f.textContent="Website:",d=b(),_=h("a"),w=X(m),c(t,"class","mb-2 pb-2"),c(o,"class",""),c(_,"href",p=r[0].link),c(e,"class","container")},m(D,k){M(D,e,k),u(e,t),u(t,s),u(e,i),u(e,o),v.m(o,null),u(e,l),u(e,a),u(a,f),u(a,d),u(a,_),u(_,w)},p(D,k){k&1&&n!==(n=D[0].name+"")&&ae(s,n),y===(y=g(D))&&v?v.p(D,k):(v.d(1),v=y(D),v&&(v.c(),v.m(o,null))),k&1&&m!==(m=D[0].link+"")&&ae(w,m),k&1&&p!==(p=D[0].link)&&c(_,"href",p)},i:ne,o:ne,d(D){D&&O(e),v.d()}}}function Pp(r){let e=r[0].bio+"",t;return{c(){t=X(e)},m(n,s){M(n,t,s)},p(n,s){s&1&&e!==(e=n[0].bio+"")&&ae(t,e)},d(n){n&&O(t)}}}function Ep(r){let e;return{c(){e=h("span"),e.textContent="No Bio",c(e,"class","text-secondary")},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function Rp(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function jp(r){let e,t,n=ke(Object.entries(r[1])),s=[];for(let o=0;o<n.length;o+=1)s[o]=Oo(Do(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){n=ke(Object.entries(o[1]));let a;for(a=0;a<n.length;a+=1){const f=Do(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=Oo(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function Oo(r){let e,t;return e=new Hn({props:{title:r[6].title,id:r[6].book_id,author:r[6].publisher.name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.title=n[6].title),s&2&&(i.id=n[6].book_id),s&2&&(i.author=n[6].publisher.name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Ap(r){let e,t,n,s;const i=[jp,Rp],o=[];function l(a,f){return a[1]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,f){let d=e;e=l(a),e===d?o[e].p(a,f):(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t?t.p(a,f):(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function Ip(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g;n=new st({props:{text:"Author Details"}});const y=[Mp,Cp],v=[];function D(k,T){return k[0]?0:1}return d=D(r),_=v[d]=y[d](r),w=new Tt({props:{title:"Books",icon:"journal",$$slots:{default:[Ap]},$$scope:{ctx:r}}}),{c(){e=h("main"),t=h("section"),Q(n.$$.fragment),s=b(),i=h("div"),o=h("div"),l=h("img"),f=b(),_.c(),m=b(),Q(w.$$.fragment),c(l,"class","border p-3"),Ke(l.src,a=Lp)||c(l,"src",a),c(l,"alt","author"),c(l,"height","300"),c(l,"width","300"),Ge(l,"object-fit","contain"),c(o,"class","d-flex justify-content-center my-1"),c(i,"class","d-md-flex d-block"),c(e,"class","container")},m(k,T){M(k,e,T),u(e,t),K(n,t,null),u(t,s),u(t,i),u(i,o),u(o,l),u(i,f),v[d].m(i,null),u(e,m),K(w,e,null),g=!0},p(k,[T]){let $=d;d=D(k),d===$?v[d].p(k,T):(Ie(),A(v[$],1,1,()=>{v[$]=null}),Le(),_=v[d],_?_.p(k,T):(_=v[d]=y[d](k),_.c()),E(_,1),_.m(i,null));const S={};T&514&&(S.$$scope={dirty:T,ctx:k}),w.$set(S)},i(k){g||(E(n.$$.fragment,k),E(_),E(w.$$.fragment,k),k&&(p||Ye(()=>{p=Ze(e,Qe,{duration:500}),p.start()})),g=!0)},o(k){A(n.$$.fragment,k),A(_),A(w.$$.fragment,k),g=!1},d(k){k&&O(e),Z(n),v[d].d(),Z(w)}}}let Lp="./default-profile.jpg";function Yp(r,e,t){let{params:n}=e,s=n.authorID,i,o;async function l(){const{data:a,error:f}=await le.from("author").select().eq("author_id",s);console.log(a),t(0,i=a[0]);const{data:d,error:_}=await le.from("books").select("book_id, title, publisher(name)").eq("author_id",s);console.log(d),t(1,o=d)}return Dt(l),r.$$set=a=>{"params"in a&&t(2,n=a.params)},[i,o,n]}class Ya extends Oe{constructor(e){super(),De(this,e,Yp,Ip,Se,{params:2})}}function Co(r,e,t){const n=r.slice();return n[5]=e[t][0],n[6]=e[t][1],n}function Mo(r){let e,t,n=r[0].name+"",s,i,o,l,a,f,d,_,m=r[0].link+"",w,p;function g(D,k){return D[0].description==null?Up:Np}let y=g(r),v=y(r);return{c(){e=h("div"),t=h("h1"),s=X(n),i=b(),o=h("p"),v.c(),l=b(),a=h("p"),f=h("b"),f.textContent="Website:",d=b(),_=h("a"),w=X(m),c(t,"class","mb-2 pb-2"),c(o,"class",""),c(_,"href",p="https://"+r[0].link),c(_,"id","publisher-website"),c(e,"class","container")},m(D,k){M(D,e,k),u(e,t),u(t,s),u(e,i),u(e,o),v.m(o,null),u(e,l),u(e,a),u(a,f),u(a,d),u(a,_),u(_,w)},p(D,k){k&1&&n!==(n=D[0].name+"")&&ae(s,n),y===(y=g(D))&&v?v.p(D,k):(v.d(1),v=y(D),v&&(v.c(),v.m(o,null))),k&1&&m!==(m=D[0].link+"")&&ae(w,m),k&1&&p!==(p="https://"+D[0].link)&&c(_,"href",p)},d(D){D&&O(e),v.d()}}}function Np(r){let e=r[0].description+"",t;return{c(){t=X(e)},m(n,s){M(n,t,s)},p(n,s){s&1&&e!==(e=n[0].description+"")&&ae(t,e)},d(n){n&&O(t)}}}function Up(r){let e,t=r[0].description+"",n;return{c(){e=h("span"),n=X(t)},m(s,i){M(s,e,i),u(e,n)},p(s,i){i&1&&t!==(t=s[0].description+"")&&ae(n,t)},d(s){s&&O(e)}}}function Hp(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Fp(r){let e,t,n=ke(Object.entries(r[1])),s=[];for(let o=0;o<n.length;o+=1)s[o]=Po(Co(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){e=h("div");for(let o=0;o<s.length;o+=1)s[o].c();c(e,"class","row")},m(o,l){M(o,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,l){if(l&2){n=ke(Object.entries(o[1]));let a;for(a=0;a<n.length;a+=1){const f=Co(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=Po(f),s[a].c(),E(s[a],1),s[a].m(e,null))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function Po(r){let e,t;return e=new Hn({props:{title:r[6].title,id:r[6].book_id,author:r[6].author.name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.title=n[6].title),s&2&&(i.id=n[6].book_id),s&2&&(i.author=n[6].author.name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Bp(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y;t=new st({props:{text:"Publisher Details"}});let v=r[0]&&Mo(r);m=new Tt({props:{title:"Books",icon:"journal"}});const D=[Fp,Hp],k=[];function T($,S){return $[1]?0:1}return p=T(r),g=k[p]=D[p](r),{c(){e=h("section"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),o=h("img"),a=b(),v&&v.c(),d=b(),_=h("section"),Q(m.$$.fragment),w=b(),g.c(),c(o,"id","img-cover"),c(o,"class","border p-3"),Ke(o.src,l=Wp)||c(o,"src",l),c(o,"alt","publisher"),c(o,"height","300"),c(o,"width","300"),Ge(o,"object-fit","contain"),c(i,"id","publisher-cover"),c(i,"class","d-flex justify-content-center my-1"),c(s,"class","d-md-flex d-block"),c(e,"class","container"),c(_,"class","container")},m($,S){M($,e,S),K(t,e,null),u(e,n),u(e,s),u(s,i),u(i,o),u(s,a),v&&v.m(s,null),M($,d,S),M($,_,S),K(m,_,null),u(_,w),k[p].m(_,null),y=!0},p($,[S]){$[0]?v?v.p($,S):(v=Mo($),v.c(),v.m(s,null)):v&&(v.d(1),v=null);let C=p;p=T($),p===C?k[p].p($,S):(Ie(),A(k[C],1,1,()=>{k[C]=null}),Le(),g=k[p],g?g.p($,S):(g=k[p]=D[p]($),g.c()),E(g,1),g.m(_,null))},i($){y||(E(t.$$.fragment,$),$&&(f||Ye(()=>{f=Ze(e,Qe,{duration:500}),f.start()})),E(m.$$.fragment,$),E(g),y=!0)},o($){A(t.$$.fragment,$),A(m.$$.fragment,$),A(g),y=!1},d($){$&&(O(e),O(d),O(_)),Z(t),v&&v.d(),Z(m),k[p].d()}}}let Wp="./default-profile.jpg";function qp(r,e,t){let{params:n}=e,s=n.publisherID,i,o;async function l(){const{data:a,error:f}=await le.from("publisher").select().eq("publisher_id",s);console.log(a),t(0,i=a[0]);const{data:d,error:_}=await le.from("books").select("book_id, title, author(name)").eq("publisher_id",s);console.log(d),t(1,o=d)}return Dt(l),r.$$set=a=>{"params"in a&&t(2,n=a.params)},[i,o,n]}class Na extends Oe{constructor(e){super(),De(this,e,qp,Bp,Se,{params:2})}}function Vp(r){let e,t,n,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("div"),n=h("i"),i=b(),o=h("div"),l=h("h5"),a=h("a"),f=X(r[0]),c(n,"class",s="bi bi-"+r[2]),c(t,"class","d-flex justify-content-center"),Ge(t,"font-size","3em"),c(a,"class","stretched-link svelte-1vxezln"),c(a,"href",d="./#/"+r[1]),c(l,"class","card-title text-center my-2"),c(o,"class","card-body p-1"),c(e,"class","card col-lg-2 col-5 border-1 py-2 svelte-1vxezln")},m(_,m){M(_,e,m),u(e,t),u(t,n),u(e,i),u(e,o),u(o,l),u(l,a),u(a,f)},p(_,[m]){m&4&&s!==(s="bi bi-"+_[2])&&c(n,"class",s),m&1&&ae(f,_[0]),m&2&&d!==(d="./#/"+_[1])&&c(a,"href",d)},i:ne,o:ne,d(_){_&&O(e)}}}function zp(r,e,t){let{name:n}=e,{link:s}=e,{icon:i=""}=e;return r.$$set=o=>{"name"in o&&t(0,n=o.name),"link"in o&&t(1,s=o.link),"icon"in o&&t(2,i=o.icon)},[n,s,i]}class St extends Oe{constructor(e){super(),De(this,e,zp,Vp,Se,{name:0,link:1,icon:2})}}function Gp(r){let e,t,n,s,i;return t=new St({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),s=new St({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=h("div"),Q(t.$$.fragment),n=b(),Q(s.$$.fragment),c(e,"class","row justify-content-center gap-4")},m(o,l){M(o,e,l),K(t,e,null),u(e,n),K(s,e,null),i=!0},p:ne,i(o){i||(E(t.$$.fragment,o),E(s.$$.fragment,o),i=!0)},o(o){A(t.$$.fragment,o),A(s.$$.fragment,o),i=!1},d(o){o&&O(e),Z(t),Z(s)}}}function Jp(r){let e,t,n,s,i,o,l,a,f;return t=new St({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),s=new St({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new St({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),a=new St({props:{name:"Manage Categories",link:"",icon:"collection"}}),{c(){e=h("div"),Q(t.$$.fragment),n=b(),Q(s.$$.fragment),i=b(),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),c(e,"class","row justify-content-center gap-5")},m(d,_){M(d,e,_),K(t,e,null),u(e,n),K(s,e,null),u(e,i),K(o,e,null),u(e,l),K(a,e,null),f=!0},p:ne,i(d){f||(E(t.$$.fragment,d),E(s.$$.fragment,d),E(o.$$.fragment,d),E(a.$$.fragment,d),f=!0)},o(d){A(t.$$.fragment,d),A(s.$$.fragment,d),A(o.$$.fragment,d),A(a.$$.fragment,d),f=!1},d(d){d&&O(e),Z(t),Z(s),Z(o),Z(a)}}}function xp(r){let e,t,n,s,i,o,l,a,f;return t=new St({props:{name:"Books Report",link:"book-report",icon:"journals"}}),s=new St({props:{name:"Students Report",link:"student-report",icon:"person-fill"}}),o=new St({props:{name:"Payments Report",link:"payment-report",icon:"cash"}}),a=new St({props:{name:"System Log",link:"reports",icon:"arrow-left-right"}}),{c(){e=h("div"),Q(t.$$.fragment),n=b(),Q(s.$$.fragment),i=b(),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),c(e,"class","row justify-content-center gap-5 mb-5")},m(d,_){M(d,e,_),K(t,e,null),u(e,n),K(s,e,null),u(e,i),K(o,e,null),u(e,l),K(a,e,null),f=!0},p:ne,i(d){f||(E(t.$$.fragment,d),E(s.$$.fragment,d),E(o.$$.fragment,d),E(a.$$.fragment,d),f=!0)},o(d){A(t.$$.fragment,d),A(s.$$.fragment,d),A(o.$$.fragment,d),A(a.$$.fragment,d),f=!1},d(d){d&&O(e),Z(t),Z(s),Z(o),Z(a)}}}function Kp(r){let e,t,n,s,i,o,l,a;return t=new Tt({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Gp]},$$scope:{ctx:r}}}),s=new Tt({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Jp]},$$scope:{ctx:r}}}),o=new Tt({props:{title:"Reports",icon:"receipt",$$slots:{default:[xp]},$$scope:{ctx:r}}}),{c(){e=h("main"),Q(t.$$.fragment),n=b(),Q(s.$$.fragment),i=b(),Q(o.$$.fragment),c(e,"class","container")},m(f,d){M(f,e,d),K(t,e,null),u(e,n),K(s,e,null),u(e,i),K(o,e,null),a=!0},p(f,[d]){const _={};d&1&&(_.$$scope={dirty:d,ctx:f}),t.$set(_);const m={};d&1&&(m.$$scope={dirty:d,ctx:f}),s.$set(m);const w={};d&1&&(w.$$scope={dirty:d,ctx:f}),o.$set(w)},i(f){a||(E(t.$$.fragment,f),E(s.$$.fragment,f),E(o.$$.fragment,f),f&&(l||Ye(()=>{l=Ze(e,Qe,{duration:500}),l.start()})),a=!0)},o(f){A(t.$$.fragment,f),A(s.$$.fragment,f),A(o.$$.fragment,f),a=!1},d(f){f&&O(e),Z(t),Z(s),Z(o)}}}class Zp extends Oe{constructor(e){super(),De(this,e,null,Kp,Se,{})}}function Eo(r,e,t){const n=r.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function Ro(r,e,t){const n=r.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function jo(r,e,t){const n=r.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function Ao(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S;return{c(){e=h("div"),t=h("div"),t.textContent="Category:",n=b(),s=h("div"),i=h("select"),o=h("option"),o.textContent="All",l=h("option"),l.textContent="Technology",a=h("option"),a.textContent="Educational",f=b(),d=h("div"),d.textContent="Sort by:",_=b(),m=h("div"),w=h("select"),p=h("option"),p.textContent="Total",g=h("option"),g.textContent="Available",y=h("option"),y.textContent="Reserved",v=h("option"),v.textContent="Borrowed",D=b(),k=h("div"),T=h("select"),$=h("option"),$.textContent="Ascending",S=h("option"),S.textContent="Descending",o.__value="all",q(o,o.__value),l.__value="tech",q(l,l.__value),a.__value="all",q(a,a.__value),c(i,"name","category"),c(i,"class","form-select"),p.__value="",q(p,p.__value),g.__value="",q(g,g.__value),y.__value="",q(y,y.__value),v.__value="",q(v,v.__value),c(w,"name","filter"),c(w,"class","form-select"),$.__value="",q($,$.__value),S.__value="",q(S,S.__value),c(T,"name","order"),c(T,"class","form-select"),c(e,"class","d-flex justify-content-end align-items-center gap-2")},m(C,P){M(C,e,P),u(e,t),u(e,n),u(e,s),u(s,i),u(i,o),u(i,l),u(i,a),u(e,f),u(e,d),u(e,_),u(e,m),u(m,w),u(w,p),u(w,g),u(w,y),u(w,v),u(e,D),u(e,k),u(k,T),u(T,$),u(T,S)},d(C){C&&O(e)}}}function Qp(r){let e,t;return e=new er({}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p:ne,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Xp(r){let e;return{c(){e=h("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h2>No Results</h2></div>',c(e,"class","d-flex justify-content-center mt-5")},m(t,n){M(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&O(e)}}}function eg(r){let e,t,n=ke(Object.entries(r[2].publisher)),s=[];for(let o=0;o<n.length;o+=1)s[o]=Io(Eo(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ze()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){n=ke(Object.entries(o[2].publisher));let a;for(a=0;a<n.length;a+=1){const f=Eo(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=Io(f),s[a].c(),E(s[a],1),s[a].m(e.parentNode,e))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function tg(r){let e,t,n=ke(Object.entries(r[2].author)),s=[];for(let o=0;o<n.length;o+=1)s[o]=Lo(Ro(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ze()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){n=ke(Object.entries(o[2].author));let a;for(a=0;a<n.length;a+=1){const f=Ro(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=Lo(f),s[a].c(),E(s[a],1),s[a].m(e.parentNode,e))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function rg(r){let e,t,n=ke(Object.entries(r[2].books)),s=[];for(let o=0;o<n.length;o+=1)s[o]=Yo(jo(r,n,o));const i=o=>A(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ze()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);M(o,e,l),t=!0},p(o,l){if(l&4){n=ke(Object.entries(o[2].books));let a;for(a=0;a<n.length;a+=1){const f=jo(o,n,a);s[a]?(s[a].p(f,l),E(s[a],1)):(s[a]=Yo(f),s[a].c(),E(s[a],1),s[a].m(e.parentNode,e))}for(Ie(),a=n.length;a<s.length;a+=1)i(a);Le()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)E(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)A(s[l]);t=!1},d(o){o&&O(e),xe(s,o)}}}function Io(r){let e,t;return e=new ql({props:{id:r[14].publisher_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&4&&(i.id=n[14].publisher_id),s&4&&(i.name=n[14].name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Lo(r){let e,t;return e=new Wl({props:{id:r[14].author_id,name:r[14].name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&4&&(i.id=n[14].author_id),s&4&&(i.name=n[14].name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Yo(r){let e,t;return e=new Hn({props:{title:r[14].title,id:r[14].book_id,author:r[14].author.name}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s&4&&(i.title=n[14].title),s&4&&(i.id=n[14].book_id),s&4&&(i.author=n[14].author.name),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function ng(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N;t=new st({props:{text:"Library Holdings"}});let L=r[3]&&r[3].value=="books"&&Ao();const H=[rg,tg,eg,Xp,Qp],I=[];function F(R,x){return R[2].books.length>0?0:R[2].author.length>0?1:R[2].publisher.length>0?2:R[0]?4:3}return T=F(r),$=I[T]=H[T](r),{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),o=h("select"),l=h("option"),l.textContent="Books",a=h("option"),a.textContent="Author",f=h("option"),f.textContent="Publisher",d=b(),_=h("div"),m=h("input"),w=b(),p=h("button"),p.innerHTML='<i class="bi bi-search"></i>',g=b(),L&&L.c(),y=b(),v=h("hr"),D=b(),k=h("div"),$.c(),l.selected=!0,l.__value="books",q(l,l.__value),a.__value="author",q(a,a.__value),f.__value="publisher",q(f,f.__value),c(o,"name","searchtype"),c(o,"class","form-select"),c(i,"class","col-auto col-md-2 p-0 pe-md-4"),c(m,"class","form-control form-control-lg"),c(m,"type","search"),c(m,"placeholder","Search"),c(m,"name","Search"),c(_,"class","col-6 col-md-6 p-0"),c(p,"class","btn btn-lg btn-success col-auto col-md-1"),c(p,"type","submit"),c(s,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),c(k,"class","row"),c(e,"class","container")},m(R,x){M(R,e,x),K(t,e,null),u(e,n),u(e,s),u(s,i),u(i,o),u(o,l),u(o,a),u(o,f),r[5](o),u(s,d),u(s,_),u(_,m),q(m,r[1]),u(s,w),u(s,p),u(e,g),L&&L.m(e,null),u(e,y),u(e,v),u(e,D),u(e,k),I[T].m(k,null),C=!0,P||(N=[W(o,"change",r[4]),W(m,"input",r[6]),W(m,"keyup",r[7]),W(p,"click",r[4])],P=!0)},p(R,[x]){x&2&&m.value!==R[1]&&q(m,R[1]),R[3]&&R[3].value=="books"?L||(L=Ao(),L.c(),L.m(e,y)):L&&(L.d(1),L=null);let U=T;T=F(R),T===U?I[T].p(R,x):(Ie(),A(I[U],1,1,()=>{I[U]=null}),Le(),$=I[T],$?$.p(R,x):($=I[T]=H[T](R),$.c()),E($,1),$.m(k,null))},i(R){C||(E(t.$$.fragment,R),E($),R&&(S||Ye(()=>{S=Ze(e,Qe,{duration:500}),S.start()})),C=!0)},o(R){A(t.$$.fragment,R),A($),C=!1},d(R){R&&O(e),Z(t),r[5](null),L&&L.d(),I[T].d(),P=!1,we(N)}}}function sg(r,e,t){let n;Rn(r,ou,y=>t(9,n=y));let s=!0;function i(){switch(n){case"/search/author":t(3,_.value="author",_);break;case"/search/publisher":t(3,_.value="publisher",_);break;default:t(3,_.value="books",_)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",f="",d={books:[],author:[],publisher:[]},_;async function m(){t(0,s=!0),a=_.value,console.log(a);const{data:y,error:v}=await le.from(a).select(o[a]).ilike(l[a],`%${f}%`);v&&console.log(v),t(2,d.books=[],d),t(2,d.author=[],d),t(2,d.publisher=[],d),t(2,d[a]=y,d),t(2,d),t(0,s=!1),console.log(s,d)}Dt(i),Dt(m);function w(y){dt[y?"unshift":"push"](()=>{_=y,t(3,_)})}function p(){f=this.value,t(1,f)}return[s,f,d,_,m,w,p,y=>y.key==="Enter"&&m()]}class Cr extends Oe{constructor(e){super(),De(this,e,sg,ng,Se,{})}}function No(r){let e,t;return{c(){e=h("div"),t=X(r[6]),c(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(n,s){M(n,e,s),u(e,t)},p(n,s){s[0]&64&&ae(t,n[6])},d(n){n&&O(e)}}}function ig(r){let e;return{c(){e=X("Log In")},m(t,n){M(t,e,n)},d(t){t&&O(e)}}}function og(r){let e;return{c(){e=h("div"),c(e,"class","spinner-border spinner-border-sm"),c(e,"role","status")},m(t,n){M(t,e,n)},d(t){t&&O(e)}}}function lg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me,Me,_e,se,fe,pe,ue,ie,be,ye,tr,kt,je,qe,it,qt,at,mi,Ir,pi,Rt,gi,bi,fr,Vt,Lr,Xn,vi,rt=r[8]&&Uo(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Register",n=b(),s=h("form"),rt&&rt.c(),i=b(),o=h("div"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person-bounding-box"></i>',f=b(),d=h("input"),_=b(),m=h("label"),m.textContent="Student ID",w=b(),p=h("div"),g=h("span"),g.innerHTML='<i class="bi bi-person-vcard-fill"></i>',y=b(),v=h("input"),D=b(),k=h("label"),k.textContent="First Name",T=b(),$=h("div"),S=h("span"),S.innerHTML='<i class="bi bi-person-vcard-fill"></i>',C=b(),P=h("input"),N=b(),L=h("label"),L.textContent="Last Name",H=b(),I=h("div"),F=h("span"),F.innerHTML='<i class="bi bi-envelope"></i>',R=b(),x=h("input"),U=b(),Y=h("label"),Y.textContent="Email",B=b(),G=h("div"),V=h("div"),j=h("span"),j.innerHTML='<i class="bi bi-telephone-fill"></i>',J=b(),z=h("input"),ee=b(),te=h("label"),te.textContent="Contact",ce=b(),de=h("div"),me=h("span"),me.innerHTML='<i class="bi bi-geo-alt-fill"></i>',Me=b(),_e=h("input"),se=b(),fe=h("label"),fe.textContent="Address",pe=b(),ue=h("div"),ie=h("span"),ie.innerHTML='<i class="bi bi-calendar"></i>',be=b(),ye=h("input"),tr=b(),kt=h("label"),kt.textContent="Year Level",je=b(),qe=h("div"),it=h("span"),it.innerHTML='<i class="bi bi-mortarboard-fill"></i>',qt=b(),at=h("input"),mi=b(),Ir=h("label"),Ir.textContent="Course",pi=b(),Rt=h("button"),gi=X("Proceed"),bi=b(),fr=h("a"),fr.textContent="Back",c(t,"class","svelte-1h623o7"),c(a,"class","icon svelte-1h623o7"),c(d,"type","text"),c(d,"id","sID"),c(d,"name","hidden"),d.required=!0,c(d,"minlength","6"),c(d,"maxlength","6"),c(d,"autocomplete","off"),c(d,"class","svelte-1h623o7"),c(m,"for","sID"),c(m,"class","svelte-1h623o7"),c(l,"class","input-box svelte-1h623o7"),c(g,"class","icon svelte-1h623o7"),c(v,"type","text"),c(v,"id","fname"),c(v,"name","hidden"),v.required=!0,c(v,"autocomplete","off"),c(v,"class","svelte-1h623o7"),c(k,"for","fname"),c(k,"class","svelte-1h623o7"),c(p,"class","input-box svelte-1h623o7"),c(S,"class","icon svelte-1h623o7"),c(P,"type","text"),c(P,"id","lname"),c(P,"name","hidden"),P.required=!0,c(P,"autocomplete","off"),c(P,"class","svelte-1h623o7"),c(L,"for","lname"),c(L,"class","svelte-1h623o7"),c($,"class","input-box svelte-1h623o7"),c(F,"class","icon svelte-1h623o7"),c(x,"type","email"),c(x,"id","email"),c(x,"name","hidden"),x.required=!0,c(x,"autocomplete","off"),c(x,"class","svelte-1h623o7"),c(Y,"for","email"),c(Y,"class","svelte-1h623o7"),c(I,"class","input-box svelte-1h623o7"),c(o,"class","col-12 col-sm-6"),c(j,"class","icon svelte-1h623o7"),c(z,"type","tel"),c(z,"id","contact"),c(z,"name","hidden"),c(z,"minlength","11"),c(z,"maxlength","11"),z.required=!0,c(z,"autocomplete","off"),c(z,"class","svelte-1h623o7"),c(te,"for","contact"),c(te,"class","svelte-1h623o7"),c(V,"class","input-box svelte-1h623o7"),c(me,"class","icon svelte-1h623o7"),c(_e,"type","text"),c(_e,"id","address"),c(_e,"name","hidden"),_e.required=!0,c(_e,"autocomplete","off"),c(_e,"class","svelte-1h623o7"),c(fe,"for","address"),c(fe,"class","svelte-1h623o7"),c(de,"class","input-box svelte-1h623o7"),c(ie,"class","icon svelte-1h623o7"),c(ye,"type","number"),c(ye,"id","yearLevel"),c(ye,"name","hidden"),c(ye,"max","4"),c(ye,"min","1"),ye.required=!0,c(ye,"autocomplete","off"),c(ye,"class","svelte-1h623o7"),c(kt,"for","yearLevel"),c(kt,"class","svelte-1h623o7"),c(ue,"class","input-box svelte-1h623o7"),c(it,"class","icon svelte-1h623o7"),c(at,"type","text"),c(at,"id","course"),c(at,"name","hidden"),at.required=!0,c(at,"autocomplete","off"),c(at,"class","svelte-1h623o7"),c(Ir,"for","course"),c(Ir,"class","svelte-1h623o7"),c(qe,"class","input-box svelte-1h623o7"),c(G,"class","col-12 col-sm-6"),c(Rt,"type","submit"),c(Rt,"class","bton w-50 svelte-1h623o7"),c(Rt,"name","hidden"),c(Rt,"id","Proceed"),Rt.disabled=cg,c(s,"class","row justify-content-center"),c(fr,"href","./#/"),c(fr,"class","mt-2 svelte-1h623o7"),c(e,"class","form-box register d-flex flex-column justify-content-center text-center svelte-1h623o7"),c(e,"style","height")},m(Ue,mt){M(Ue,e,mt),u(e,t),u(e,n),u(e,s),rt&&rt.m(s,null),u(s,i),u(s,o),u(o,l),u(l,a),u(l,f),u(l,d),q(d,r[12]),u(l,_),u(l,m),u(o,w),u(o,p),u(p,g),u(p,y),u(p,v),q(v,r[13]),u(p,D),u(p,k),u(o,T),u(o,$),u($,S),u($,C),u($,P),q(P,r[14]),u($,N),u($,L),u(o,H),u(o,I),u(I,F),u(I,R),u(I,x),q(x,r[17]),u(I,U),u(I,Y),u(s,B),u(s,G),u(G,V),u(V,j),u(V,J),u(V,z),q(z,r[15]),u(V,ee),u(V,te),u(G,ce),u(G,de),u(de,me),u(de,Me),u(de,_e),q(_e,r[16]),u(de,se),u(de,fe),u(G,pe),u(G,ue),u(ue,ie),u(ue,be),u(ue,ye),q(ye,r[18]),u(ue,tr),u(ue,kt),u(G,je),u(G,qe),u(qe,it),u(qe,qt),u(qe,at),q(at,r[19]),u(qe,mi),u(qe,Ir),u(s,pi),u(s,Rt),u(Rt,gi),u(e,bi),u(e,fr),Lr=!0,Xn||(vi=[W(d,"input",r[41]),W(v,"input",r[42]),W(P,"input",r[43]),W(x,"input",r[44]),W(z,"input",r[45]),W(_e,"input",r[46]),W(ye,"input",r[47]),W(at,"input",r[48]),W(Rt,"click",fg),W(s,"submit",ft(r[29])),W(fr,"click",r[49])],Xn=!0)},p(Ue,mt){Ue[8]?rt?rt.p(Ue,mt):(rt=Uo(Ue),rt.c(),rt.m(s,i)):rt&&(rt.d(1),rt=null),mt[0]&4096&&d.value!==Ue[12]&&q(d,Ue[12]),mt[0]&8192&&v.value!==Ue[13]&&q(v,Ue[13]),mt[0]&16384&&P.value!==Ue[14]&&q(P,Ue[14]),mt[0]&131072&&x.value!==Ue[17]&&q(x,Ue[17]),mt[0]&32768&&q(z,Ue[15]),mt[0]&65536&&_e.value!==Ue[16]&&q(_e,Ue[16]),mt[0]&262144&&Xt(ye.value)!==Ue[18]&&q(ye,Ue[18]),mt[0]&524288&&at.value!==Ue[19]&&q(at,Ue[19])},i(Ue){Lr||(Ue&&Ye(()=>{Lr&&(Vt||(Vt=Ot(e,Ct,{duration:600,y:500},!0)),Vt.run(1))}),Lr=!0)},o(Ue){Ue&&(Vt||(Vt=Ot(e,Ct,{duration:600,y:500},!1)),Vt.run(0)),Lr=!1},d(Ue){Ue&&O(e),rt&&rt.d(),Ue&&Vt&&Vt.end(),Xn=!1,we(vi)}}}function ag(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me,Me,_e=r[7]&&Ho(r);return{c(){e=h("div"),t=h("h2"),t.textContent="Registration",n=b(),_e&&_e.c(),s=b(),i=h("form"),o=h("div"),l=h("span"),l.innerHTML='<i class="bi bi-person"></i>',a=b(),f=h("input"),d=b(),_=h("label"),_.textContent="Username",m=b(),w=h("div"),p=h("span"),g=h("a"),y=h("i"),D=b(),k=h("input"),$=b(),S=h("label"),S.textContent="Password",C=b(),P=h("div"),N=h("span"),L=h("a"),H=h("i"),F=b(),R=h("input"),U=b(),Y=h("label"),Y.textContent="Confirm Password",B=b(),G=h("button"),V=X("Next"),j=b(),J=h("div"),z=h("p"),ee=X("Already have an account? "),te=h("a"),te.textContent="Login",c(t,"class","svelte-1h623o7"),c(l,"class","icon svelte-1h623o7"),c(f,"type","text"),c(f,"id","registerUsername"),f.required=!0,c(f,"autocomplete","off"),c(f,"class","svelte-1h623o7"),c(_,"for","registerUsername"),c(_,"class","svelte-1h623o7"),c(o,"class","input-box svelte-1h623o7"),c(y,"class",v="bi bi-"+(r[21]?"eye-slash":"eye")),c(g,"href","./#/"),c(g,"class","svelte-1h623o7"),c(p,"class","icon svelte-1h623o7"),c(p,"id","showPass2"),c(k,"minlength","6"),c(k,"type",T=r[21]?"text":"password"),c(k,"id","registerPass"),k.required=!0,c(k,"autocomplete","off"),c(k,"maxlength","16"),c(k,"class","svelte-1h623o7"),c(S,"for","registerPass"),c(S,"class","svelte-1h623o7"),c(w,"class","input-box svelte-1h623o7"),c(H,"class",I="bi bi-"+(r[22]?"eye-slash":"eye")),c(L,"href","./#/"),c(L,"class","svelte-1h623o7"),c(N,"class","icon svelte-1h623o7"),c(N,"id","showPass3"),c(R,"type",x=r[22]?"text":"password"),c(R,"id","registerConfirm"),R.required=!0,c(R,"autocomplete","off"),c(R,"class","svelte-1h623o7"),c(Y,"for","registerConfirm"),c(Y,"class","svelte-1h623o7"),c(P,"class","input-box svelte-1h623o7"),G.disabled=r[2],c(G,"type","submit"),c(G,"class","bton svelte-1h623o7"),c(G,"id","registerBtn"),c(te,"href","./#/"),c(te,"class","login-link svelte-1h623o7"),c(J,"class","login-register svelte-1h623o7"),c(e,"class","form-box register svelte-1h623o7")},m(se,fe){M(se,e,fe),u(e,t),u(e,n),_e&&_e.m(e,null),u(e,s),u(e,i),u(i,o),u(o,l),u(o,a),u(o,f),q(f,r[9]),u(o,d),u(o,_),u(i,m),u(i,w),u(w,p),u(p,g),u(g,y),u(w,D),u(w,k),u(w,$),u(w,S),u(i,C),u(i,P),u(P,N),u(N,L),u(L,H),u(P,F),u(P,R),u(P,U),u(P,Y),u(i,B),u(i,G),u(G,V),u(i,j),u(i,J),u(J,z),u(z,ee),u(z,te),de=!0,me||(Me=[W(f,"keyup",r[35]),W(f,"input",r[36]),W(g,"click",ft(r[37])),W(k,"keyup",r[38]),W(L,"click",ft(r[39])),W(R,"keyup",r[40]),W(te,"click",r[26]),W(i,"submit",ft(r[28]))],me=!0)},p(se,fe){se[7]?_e?_e.p(se,fe):(_e=Ho(se),_e.c(),_e.m(e,s)):_e&&(_e.d(1),_e=null),fe[0]&512&&f.value!==se[9]&&q(f,se[9]),(!de||fe[0]&2097152&&v!==(v="bi bi-"+(se[21]?"eye-slash":"eye")))&&c(y,"class",v),(!de||fe[0]&2097152&&T!==(T=se[21]?"text":"password"))&&c(k,"type",T),(!de||fe[0]&4194304&&I!==(I="bi bi-"+(se[22]?"eye-slash":"eye")))&&c(H,"class",I),(!de||fe[0]&4194304&&x!==(x=se[22]?"text":"password"))&&c(R,"type",x),(!de||fe[0]&4)&&(G.disabled=se[2])},i(se){de||(se&&Ye(()=>{de&&(ce||(ce=Ot(e,Ct,{duration:600,y:500},!0)),ce.run(1))}),de=!0)},o(se){se&&(ce||(ce=Ot(e,Ct,{duration:600,y:500},!1)),ce.run(0)),de=!1},d(se){se&&O(e),_e&&_e.d(),se&&ce&&ce.end(),me=!1,we(Me)}}}function Uo(r){let e,t,n;return{c(){e=h("div"),t=h("div"),n=X(r[8]),c(t,"class","alert alert-danger w-50 text-center p-1 m-0 svelte-1h623o7"),c(e,"class","d-flex justify-content-center")},m(s,i){M(s,e,i),u(e,t),u(t,n)},p(s,i){i[0]&256&&ae(n,s[8])},d(s){s&&O(e)}}}function Ho(r){let e,t;return{c(){e=h("div"),t=X(r[7]),c(e,"class","alert alert-danger p-1 text-center svelte-1h623o7")},m(n,s){M(n,e,s),u(e,t)},p(n,s){s[0]&128&&ae(t,n[7])},d(n){n&&O(e)}}}function ug(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me=r[6]&&No(r);function Me(ie,be){return ie[1]?og:ig}let _e=Me(r),se=_e(r);const fe=[ag,lg],pe=[];function ue(ie,be){return ie[0]?1:0}return Y=ue(r),B=pe[Y]=fe[Y](r),{c(){e=h("main"),t=h("div"),n=h("div"),s=h("h2"),s.textContent="Login",i=b(),o=h("form"),l=h("div"),a=h("span"),a.innerHTML='<i class="bi bi-person"></i>',f=b(),d=h("input"),_=b(),m=h("label"),m.textContent="Username",w=b(),p=h("div"),g=h("a"),y=h("span"),v=h("i"),k=b(),T=h("input"),S=b(),C=h("label"),C.textContent="Password",P=b(),me&&me.c(),N=b(),L=h("button"),se.c(),H=b(),I=h("div"),F=h("p"),R=X("Don't have an account? "),x=h("a"),x.textContent="Register",U=b(),B.c(),V=b(),j=h("div"),J=h("button"),J.textContent="Client",z=b(),ee=h("button"),ee.textContent="Staff",c(s,"class","svelte-1h623o7"),c(a,"class","icon svelte-1h623o7"),c(d,"type","text"),c(d,"id","usernameLogin"),d.required=!0,c(d,"autocomplete","off"),c(d,"class","svelte-1h623o7"),c(m,"for","usernameLogin"),c(m,"class","svelte-1h623o7"),c(l,"class","input-box svelte-1h623o7"),c(v,"class",D="bi bi-"+(r[20]?"eye-slash":"eye")),c(y,"class","icon svelte-1h623o7"),c(g,"href","./#/"),c(g,"class","svelte-1h623o7"),c(T,"minlength","6"),c(T,"maxlength","12"),c(T,"type",$=r[20]?"text":"password"),c(T,"id","passwordLogin"),T.required=!0,c(T,"autocomplete","off"),c(T,"class","svelte-1h623o7"),c(C,"for","passwordLogin"),c(C,"class","svelte-1h623o7"),c(p,"class","input-box svelte-1h623o7"),L.disabled=r[1],c(L,"type","submit"),c(L,"class","bton svelte-1h623o7"),c(L,"id","loginBton"),c(x,"href","./#/"),c(x,"class","register-link svelte-1h623o7"),c(I,"class","login-register svelte-1h623o7"),c(o,"id","form"),c(n,"class","form-box login svelte-1h623o7"),c(t,"class",G="wrapper "+r[3]+" active-popup "+r[23]+" svelte-1h623o7"),c(J,"class","m-2 btn btn-primary btn-lg"),c(ee,"class","m-2 btn btn-danger btn-lg"),c(j,"class","d-none"),Ge(e,"background","url('./login-bg.jpg') no-repeat"),Ge(e,"background-size","cover"),Ge(e,"background-position","center"),Ge(e,"background-position-y","5%"),c(e,"class","svelte-1h623o7")},m(ie,be){M(ie,e,be),u(e,t),u(t,n),u(n,s),u(n,i),u(n,o),u(o,l),u(l,a),u(l,f),u(l,d),q(d,r[4]),u(l,_),u(l,m),u(o,w),u(o,p),u(p,g),u(g,y),u(y,v),u(p,k),u(p,T),u(p,S),u(p,C),u(o,P),me&&me.m(o,null),u(o,N),u(o,L),se.m(L,null),u(o,H),u(o,I),u(I,F),u(F,R),u(F,x),u(t,U),pe[Y].m(t,null),u(e,V),u(e,j),u(j,J),u(j,z),u(j,ee),ce||(de=[W(d,"input",r[31]),W(d,"keyup",r[32]),W(g,"click",ft(r[33])),W(T,"input",r[34]),W(x,"click",r[26]),W(o,"submit",ft(r[27])),W(J,"click",r[50]),W(ee,"click",r[51])],ce=!0)},p(ie,be){be[0]&16&&d.value!==ie[4]&&q(d,ie[4]),be[0]&1048576&&D!==(D="bi bi-"+(ie[20]?"eye-slash":"eye"))&&c(v,"class",D),be[0]&1048576&&$!==($=ie[20]?"text":"password")&&c(T,"type",$),ie[6]?me?me.p(ie,be):(me=No(ie),me.c(),me.m(o,N)):me&&(me.d(1),me=null),_e!==(_e=Me(ie))&&(se.d(1),se=_e(ie),se&&(se.c(),se.m(L,null))),be[0]&2&&(L.disabled=ie[1]);let ye=Y;Y=ue(ie),Y===ye?pe[Y].p(ie,be):(Ie(),A(pe[ye],1,1,()=>{pe[ye]=null}),Le(),B=pe[Y],B?B.p(ie,be):(B=pe[Y]=fe[Y](ie),B.c()),E(B,1),B.m(t,null)),be[0]&8388616&&G!==(G="wrapper "+ie[3]+" active-popup "+ie[23]+" svelte-1h623o7")&&c(t,"class",G)},i(ie){E(B),ie&&(te||Ye(()=>{te=Ze(e,Qe,{duration:500}),te.start()}))},o(ie){A(B)},d(ie){ie&&O(e),me&&me.d(),se.d(),pe[Y].d(),ce=!1,we(de)}}}let cg=!1;function _s(r){return r.target.value}const fg=()=>{};function dg(r,e,t){let n;document.querySelector("body").setAttribute("data-bs-theme","dark"),Dn("/");async function s(je){const{error:qe}=await le.from("reports").insert({report_type:"Log In",report_details:`${_} logged in`,staff_id:je});qe&&console.error(qe),Qt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",je)}async function i(je){const{error:qe}=await le.from("reports").insert({report_type:"Log In",report_details:`${_} logged in`,staff_id:je});qe&&console.error(qe),Qt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",je)}let o=!1,l=!1,a=!0,f="";function d(){t(30,a=!a)}let _,m;async function w(){console.log("CLicked"),t(1,o=!0);const{data:je,error:qe}=await le.from("user_level").select("account_type, user_id").eq("username",_).eq("password",m).maybeSingle();if(t(1,o=!1),qe){console.error(qe);return}if(!je&&await g(_)){t(6,y="Wrong password.");return}else if(!je){t(6,y="User does not exist.");return}je.account_type=="student"?s(je.user_id):je.account_type=="staff"?i(je.user_id):console.error(je)}let p=!1;async function g(je){const{data:qe,error:it}=await le.from("user_level").select().eq("username",je);return it&&console.error(it),qe.length>0}let y,v,D,k,T,$,S,C,P,N,L,H,I,F;async function R(){t(2,l=!0);let je=await g(k);if(t(2,l=!1),je){t(7,v="Username already exists.");return}else if(T!=$){t(7,v="Password does not match.");return}t(0,p=!p)}async function x(){const{data:je,error:qe}=await le.from("user_level").select().eq("user_id",S);if(je.length!=0){t(8,D="Student ID already exists");return}const{error:it}=await le.rpc("register_student",{userinput:k,passinput:T,idinput:S,fnameinput:C,lnameinput:P,addressinput:L,contactinput:N,emailinput:H,yearinput:I,courseinput:F});if(it){console.error(it);return}const{error:qt}=await le.from("reports").insert({report_type:"Register",report_details:`${C} created new account with id #${S}`,stud_id:S});qt&&console.error(qt),alert("Successfully created an account! Logging in..."),s(S)}let U=!1,Y=!1,B=!1;function G(){_=this.value,t(4,_)}const V=()=>t(6,y=""),j=()=>t(20,U=!U),J=je=>{t(6,y=""),t(5,m=_s(je))},z=()=>t(7,v="");function ee(){k=this.value,t(9,k)}const te=()=>t(21,Y=!Y),ce=je=>{t(7,v=""),t(10,T=_s(je))},de=()=>t(22,B=!B),me=je=>{t(7,v=""),t(11,$=_s(je))};function Me(){S=this.value,t(12,S)}function _e(){C=this.value,t(13,C)}function se(){P=this.value,t(14,P)}function fe(){H=this.value,t(17,H)}function pe(){N=this.value,t(15,N)}function ue(){L=this.value,t(16,L)}function ie(){I=Xt(this.value),t(18,I)}function be(){F=this.value,t(19,F)}const ye=()=>t(0,p=!p),tr=()=>s("263690"),kt=()=>i("153827");return r.$$.update=()=>{r.$$.dirty[0]&1073741824&&t(3,f=a?"":"active"),r.$$.dirty[0]&1073741825&&t(23,n=p&&!a?"moreinfo":"")},[p,o,l,f,_,m,y,v,D,k,T,$,S,C,P,N,L,H,I,F,U,Y,B,n,s,i,d,w,R,x,a,G,V,j,J,z,ee,te,ce,de,me,Me,_e,se,fe,pe,ue,ie,be,ye,tr,kt]}class hg extends Oe{constructor(e){super(),De(this,e,dg,ug,Se,{},null,[-1,-1])}}function _g(r){let e,t,n,s,i,o,l,a,f,d,_,m;const w=r[4].default,p=jn(w,r,r[3],null);return{c(){e=h("div"),t=h("label"),n=X(r[0]),s=b(),i=h("div"),p&&p.c(),o=b(),l=h("div"),a=h("button"),f=X(r[2]),c(t,"class","col-sm-4 col-md-3 col-form-label"),c(t,"for",r[1]),c(i,"class","col-sm-5 col-md-6 col-9"),c(a,"class","w-100 btn btn-outline-primary"),c(l,"class","col-sm-3 col-md-3 col-auto"),c(e,"class","mb-4 row justify-content-center")},m(g,y){M(g,e,y),u(e,t),u(t,n),u(e,s),u(e,i),p&&p.m(i,null),u(e,o),u(e,l),u(l,a),u(a,f),d=!0,_||(m=W(a,"click",r[5]),_=!0)},p(g,[y]){(!d||y&1)&&ae(n,g[0]),(!d||y&2)&&c(t,"for",g[1]),p&&p.p&&(!d||y&8)&&In(p,w,g,g[3],d?An(w,g[3],y,null):Ln(g[3]),null),(!d||y&4)&&ae(f,g[2])},i(g){d||(E(p,g),d=!0)},o(g){A(p,g),d=!1},d(g){g&&O(e),p&&p.d(g),_=!1,m()}}}function mg(r,e,t){let{$$slots:n={},$$scope:s}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(f){$n.call(this,r,f)}return r.$$set=f=>{"label"in f&&t(0,i=f.label),"id"in f&&t(1,o=f.id),"button"in f&&t(2,l=f.button),"$$scope"in f&&t(3,s=f.$$scope)},[i,o,l,s,n,a]}class pg extends Oe{constructor(e){super(),De(this,e,mg,_g,Se,{label:0,id:1,button:2})}}function gg(r){let e,t,n,s,i,o,l,a;return{c(){e=h("div"),t=h("div"),n=h("b"),s=X(r[0]),i=X(":"),o=b(),l=h("div"),a=X(r[1]),c(t,"class","col-sm-4 col-md-4"),c(l,"class","col-sm-8 col-md-8"),c(e,"class","mb-2 row")},m(f,d){M(f,e,d),u(e,t),u(t,n),u(n,s),u(n,i),u(e,o),u(e,l),u(l,a)},p(f,[d]){d&1&&ae(s,f[0]),d&2&&ae(a,f[1])},i:ne,o:ne,d(f){f&&O(e)}}}function bg(r,e,t){let{key:n}=e,{value:s}=e;return r.$$set=i=>{"key"in i&&t(0,n=i.key),"value"in i&&t(1,s=i.value)},[n,s]}class tt extends Oe{constructor(e){super(),De(this,e,bg,gg,Se,{key:0,value:1})}}function vg(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Cannot Find Reservation",c(e,"class",t="form-control "+r[10]),c(e,"type","number"),c(e,"id","reserve"),c(e,"placeholder","e.g 300xxx"),e.disabled=r[3],c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[5]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[19]),W(e,"keyup",r[20])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&c(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&32&&Xt(e.value)!==l[5]&&q(e,l[5])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function wg(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Cannot Find Student",c(e,"class",t="form-control "+r[11]),c(e,"type","text"),c(e,"id","stud-id"),c(e,"placeholder","e.g 2xxxxx"),e.disabled=r[3],c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[6]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[22]),W(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&2048&&t!==(t="form-control "+l[11])&&c(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&64&&e.value!==l[6]&&q(e,l[6])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function yg(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Cannot Find Book",c(e,"class",t="form-control "+r[12]),c(e,"type","text"),c(e,"id","book-barcode"),c(e,"placeholder","e.g 1000xxx"),e.disabled=r[3],c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[7]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[24]),W(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&4096&&t!==(t="form-control "+l[12])&&c(e,"class",t),a[0]&8&&(e.disabled=l[3]),a[0]&128&&e.value!==l[7]&&q(e,l[7])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function Fo(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$;return s=new tt({props:{key:"Borrow ID",value:r[4]}}),o=new tt({props:{key:"Name",value:r[8]}}),a=new tt({props:{key:"Book Title",value:r[9]+" ("+r[7]+")"}}),d=new tt({props:{key:"Staff Name",value:r[2]+" ("+r[15]+")"}}),m=new tt({props:{key:"Borrow Date",value:re(r[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new tt({props:{key:"Return Due",value:re(r[1]).format("MMMM DD, YYYY")+" ("+r[13]+" days)"}}),{c(){e=h("div"),t=h("h3"),t.textContent="Borrow Preview",n=b(),Q(s.$$.fragment),i=b(),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),w=b(),Q(p.$$.fragment),g=b(),y=h("div"),v=h("button"),v.innerHTML='<i class="bi bi-arrow-up-circle"></i> Confirm',c(t,"class","py-4 text-center"),c(v,"class","btn btn-success"),c(y,"class","float-end my-2"),c(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(S,C){M(S,e,C),u(e,t),u(e,n),K(s,e,null),u(e,i),K(o,e,null),u(e,l),K(a,e,null),u(e,f),K(d,e,null),u(e,_),K(m,e,null),u(e,w),K(p,e,null),u(e,g),u(e,y),u(y,v),k=!0,T||($=W(v,"click",r[18]),T=!0)},p(S,C){const P={};C[0]&16&&(P.value=S[4]),s.$set(P);const N={};C[0]&256&&(N.value=S[8]),o.$set(N);const L={};C[0]&640&&(L.value=S[9]+" ("+S[7]+")"),a.$set(L);const H={};C[0]&4&&(H.value=S[2]+" ("+S[15]+")"),d.$set(H);const I={};C[0]&1&&(I.value=re(S[0]).format("MMMM DD, YYYY - hh:mm a")),m.$set(I);const F={};C[0]&8194&&(F.value=re(S[1]).format("MMMM DD, YYYY")+" ("+S[13]+" days)"),p.$set(F)},i(S){k||(E(s.$$.fragment,S),E(o.$$.fragment,S),E(a.$$.fragment,S),E(d.$$.fragment,S),E(m.$$.fragment,S),E(p.$$.fragment,S),S&&Ye(()=>{k&&(D||(D=Ot(e,Ct,{duration:400,y:-60},!0)),D.run(1))}),k=!0)},o(S){A(s.$$.fragment,S),A(o.$$.fragment,S),A(a.$$.fragment,S),A(d.$$.fragment,S),A(m.$$.fragment,S),A(p.$$.fragment,S),S&&(D||(D=Ot(e,Ct,{duration:400,y:-60},!1)),D.run(0)),k=!1},d(S){S&&O(e),Z(s),Z(o),Z(a),Z(d),Z(m),Z(p),S&&D&&D.end(),T=!1,$()}}}function kg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me,Me;t=new st({props:{text:"Borrow Book"}}),o=new pg({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[vg]},$$scope:{ctx:r}}}),o.$on("click",r[21]),d=new Ae({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[wg]},$$scope:{ctx:r}}}),m=new Ae({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[yg]},$$scope:{ctx:r}}});let _e=r[3]&&Fo(r);return{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),Q(o.$$.fragment),l=b(),a=h("hr"),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),w=b(),p=h("div"),g=h("label"),g.textContent="Borrow Date:",y=b(),v=h("div"),D=h("input"),T=b(),$=h("div"),S=h("button"),S.textContent="Today",C=b(),P=h("div"),N=h("label"),N.textContent="Return Due:",L=b(),H=h("div"),I=h("input"),R=b(),x=h("div"),U=h("button"),U.textContent=`~${Rs} Days`,Y=b(),B=h("div"),G=h("button"),V=h("i"),j=X(" Borrow"),z=b(),ee=h("a"),ee.innerHTML='<i class="bi bi-x-circle"></i> Cancel',te=b(),_e&&_e.c(),c(a,"class","mb-4"),c(g,"class","col-sm-4 col-md-3 col-form-label"),c(g,"for","borrow-date"),c(D,"class","form-control"),c(D,"type","datetime-local"),c(D,"id","borrow-date"),c(D,"max",k=re(r[1]).format("YYYY-MM-DD HH:mm")),c(v,"class","col-sm-5 col-md-6 col-7"),c(S,"class","w-100 btn btn-outline-primary"),c($,"class","col-sm-3 col-md-3 col-auto"),c(p,"class","mb-4 row justify-content-center"),c(N,"class","col-sm-4 col-md-3 col-form-label"),c(N,"for","return-date"),c(I,"class","form-control"),c(I,"type","date"),c(I,"id","return-date"),c(I,"min",F=re(r[0]).format("YYYY-MM-DD")),c(H,"class","col-sm-5 col-md-6 col-7"),c(U,"class","w-100 btn btn-outline-primary"),c(x,"class","col-sm-3 col-md-3 col-auto"),c(P,"class","mb-4 row justify-content-center"),c(V,"class","bi bi-receipt"),c(G,"class",J="btn btn-"+(r[3]?"secondary":"success")),c(ee,"href","./#/"),c(ee,"class","btn btn-danger"),c(B,"class","float-end"),c(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),c(s,"class","row justify-content-around"),c(e,"class","container")},m(se,fe){M(se,e,fe),K(t,e,null),u(e,n),u(e,s),u(s,i),K(o,i,null),u(i,l),u(i,a),u(i,f),K(d,i,null),u(i,_),K(m,i,null),u(i,w),u(i,p),u(p,g),u(p,y),u(p,v),u(v,D),q(D,r[0]),u(p,T),u(p,$),u($,S),u(i,C),u(i,P),u(P,N),u(P,L),u(P,H),u(H,I),q(I,r[1]),u(P,R),u(P,x),u(x,U),u(i,Y),u(i,B),u(B,G),u(G,V),u(G,j),u(B,z),u(B,ee),u(s,te),_e&&_e.m(s,null),de=!0,me||(Me=[W(D,"input",r[26]),W(S,"click",r[27]),W(I,"input",r[28]),W(U,"click",r[29]),W(G,"click",r[30])],me=!0)},p(se,fe){const pe={};fe[0]&1064|fe[1]&8&&(pe.$$scope={dirty:fe,ctx:se}),o.$set(pe);const ue={};fe[0]&2120|fe[1]&8&&(ue.$$scope={dirty:fe,ctx:se}),d.$set(ue);const ie={};fe[0]&4232|fe[1]&8&&(ie.$$scope={dirty:fe,ctx:se}),m.$set(ie),(!de||fe[0]&2&&k!==(k=re(se[1]).format("YYYY-MM-DD HH:mm")))&&c(D,"max",k),fe[0]&1&&q(D,se[0]),(!de||fe[0]&1&&F!==(F=re(se[0]).format("YYYY-MM-DD")))&&c(I,"min",F),fe[0]&2&&q(I,se[1]),(!de||fe[0]&8&&J!==(J="btn btn-"+(se[3]?"secondary":"success")))&&c(G,"class",J),se[3]?_e?(_e.p(se,fe),fe[0]&8&&E(_e,1)):(_e=Fo(se),_e.c(),E(_e,1),_e.m(s,null)):_e&&(Ie(),A(_e,1,1,()=>{_e=null}),Le())},i(se){de||(E(t.$$.fragment,se),E(o.$$.fragment,se),E(d.$$.fragment,se),E(m.$$.fragment,se),E(_e),se&&(ce||Ye(()=>{ce=Ze(e,Qe,{duration:500}),ce.start()})),de=!0)},o(se){A(t.$$.fragment,se),A(o.$$.fragment,se),A(d.$$.fragment,se),A(m.$$.fragment,se),A(_e),de=!1},d(se){se&&O(e),Z(t),Z(o),Z(d),Z(m),_e&&_e.d(),me=!1,we(Me)}}}const Rs=14;function Bo(){return"400"+Math.floor(Math.random()*9e3)}function $g(r,e,t){let n,s;Rn(r,Ns,j=>t(31,s=j));const i=re().format("YYYY-MM-DD HH:mm");let o=i,l=re(i).add(Rs,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let f,d=!1,_,m,w,p;const g=new URLSearchParams(s);m=g.get("reserve_id")||"",p=g.get("barcode")||"";let y,v,D,k,T;async function $(){d&&t(3,d=!1);const{data:j,error:J}=await le.from("account_details").select("fname, lname").eq("user_id",w).single();J?(t(11,k="is-invalid"),console.error(J)):t(8,y=`${j.fname} ${j.lname}`);const{data:z,error:ee}=await le.from("account_details").select("fname, lname").eq("user_id",a).single();ee?console.error(ee):t(2,f=`${z.fname} ${z.lname}`);const{data:te,error:ce}=await le.from("library_holdings").select("books(title)").eq("barcode",p).single();ce||!te?(t(12,T="is-invalid"),console.error(ce)):t(9,v=te.books.title),(!ce||!J)&&(t(4,_=await P()),t(3,d=!0))}async function S(){const{data:j,error:J}=await le.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",m).eq("active",!0).single();J||!j?(t(10,D="is-invalid"),console.error(J)):(t(6,w=j.stud_id),t(7,p=j.library_holdings.barcode),$())}async function C(){const{data:j,error:J}=await le.from("library_holdings").select("holding_id").eq("barcode",p).single();J&&console.error(J);const z=re(o).format("YYYY-MM-DDTHH:MMZ"),ee=re(l).format("YYYY-MM-DDTHH:MMZ"),{error:te}=await le.from("book_borrow").insert({borrow_id:_,stud_id:w,holding_id:j.holding_id,staff_id:a,borrow_date:z,due_date:ee});if(te){console.error(te);return}const{data:ce,error:de}=await le.from("book_reservation").update({staff_id:a,release_date:z,active:!1}).eq("active",!0).eq("holding_id",j.holding_id).select();if(console.log("updated Rows:",ce),de){console.error(de);return}const{error:me}=await le.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",j.holding_id);if(me){console.error(me);return}const{error:Me}=await le.from("reports").insert({report_type:"Borrow Book",report_details:`"${v}" borrowed`,holding_id:j.holding_id,staff_id:a,stud_id:w});Me&&console.error(Me),alert(`${y} successfully borrowed ${v}!`),t(3,d=!1),t(5,m=""),t(6,w=""),t(7,p="")}async function P(){let j=Bo();const{data:J,error:z}=await le.from("book_borrow").select().eq("borrow_id",j);return console.log(J),J.length!=0&&(j=Bo(),console.log("exists")),console.log(j),j}function N(){m=Xt(this.value),t(5,m)}const L=()=>t(10,D=""),H=()=>{d||S()};function I(){w=this.value,t(6,w)}const F=()=>t(11,k="");function R(){p=this.value,t(7,p)}const x=()=>t(12,T="");function U(){o=this.value,t(0,o)}const Y=()=>t(0,o=i);function B(){l=this.value,t(1,l)}const G=()=>t(1,l=re(o).add(Rs,"days").format("YYYY-MM-DD")),V=()=>{$()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(13,n=re(l).diff(re(o).format("YYYY-MM-DD"),"days"))},[o,l,f,d,_,m,w,p,y,v,D,k,T,n,i,a,$,S,C,N,L,H,I,F,R,x,U,Y,B,G,V]}class Sg extends Oe{constructor(e){super(),De(this,e,$g,kg,Se,{},null,[-1,-1])}}function Tg(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Borrow ID not found.",c(e,"class",t="form-control "+r[4]),e.disabled=r[5],c(e,"type","text"),c(e,"id","book-id"),c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[3]),M(l,n,a),M(l,s,a),i||(o=[W(e,"keyup",r[21]),W(e,"input",r[22])],i=!0)},p(l,a){a[0]&16&&t!==(t="form-control "+l[4])&&c(e,"class",t),a[0]&32&&(e.disabled=l[5]),a[0]&8&&e.value!==l[3]&&q(e,l[3])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function Dg(r){let e,t,n,s,i,o,l;return{c(){e=h("select"),t=h("option"),t.textContent="New",n=h("option"),n.textContent="Good",s=h("option"),s.textContent="Fair",i=h("option"),i.textContent="Poor",t.__value="New",q(t,t.__value),n.__value="Good",q(n,n.__value),s.__value="Fair",q(s,s.__value),i.__value="Poor",q(i,i.__value),c(e,"class","form-select"),c(e,"id","book-condition"),r[12]===void 0&&Ye(()=>r[23].call(e))},m(a,f){M(a,e,f),u(e,t),u(e,n),u(e,s),u(e,i),vn(e,r[12],!0),o||(l=W(e,"change",r[23]),o=!0)},p(a,f){f[0]&4096&&vn(e,a[12])},d(a){a&&O(e),o=!1,l()}}}function Og(r){let e,t,n;return{c(){e=h("textarea"),c(e,"class","form-control"),c(e,"rows","3"),c(e,"id","book-note")},m(s,i){M(s,e,i),q(e,r[11]),t||(n=W(e,"input",r[24]),t=!0)},p(s,i){i[0]&2048&&q(e,s[11])},d(s){s&&O(e),t=!1,n()}}}function Wo(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P;s=new tt({props:{key:"Borrow ID",value:r[3]}}),o=new tt({props:{key:"Return ID",value:r[6]}}),a=new tt({props:{key:"Name",value:r[10]+" ("+r[9]+")"}}),d=new tt({props:{key:"Book Title",value:r[7]+" ("+r[8]+")"}}),m=new tt({props:{key:"Condition",value:r[12]}});let N=r[11]&&qo(r);g=new tt({props:{key:"Received by",value:"Francis James E. Salles ("+r[17]+")"}}),v=new tt({props:{key:"Return Due",value:re(r[1]).format("MMMM DD, YYYY")}}),k=new tt({props:{key:"Return Date",value:re(r[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(r[2]>0?`+${r[2]}`:r[2])+" days)"}});let L=r[2]<0&&Vo(r);function H(R,x){return R[2]>=0?Mg:Cg}let I=H(r),F=I(r);return{c(){e=h("div"),t=h("h3"),t.textContent="Return Preview",n=b(),Q(s.$$.fragment),i=b(),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),w=b(),N&&N.c(),p=b(),Q(g.$$.fragment),y=b(),Q(v.$$.fragment),D=b(),Q(k.$$.fragment),T=b(),L&&L.c(),$=b(),S=h("div"),F.c(),c(t,"class","py-4 text-center"),c(S,"class","float-end my-2"),c(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(R,x){M(R,e,x),u(e,t),u(e,n),K(s,e,null),u(e,i),K(o,e,null),u(e,l),K(a,e,null),u(e,f),K(d,e,null),u(e,_),K(m,e,null),u(e,w),N&&N.m(e,null),u(e,p),K(g,e,null),u(e,y),K(v,e,null),u(e,D),K(k,e,null),u(e,T),L&&L.m(e,null),u(e,$),u(e,S),F.m(S,null),P=!0},p(R,x){const U={};x[0]&8&&(U.value=R[3]),s.$set(U);const Y={};x[0]&64&&(Y.value=R[6]),o.$set(Y);const B={};x[0]&1536&&(B.value=R[10]+" ("+R[9]+")"),a.$set(B);const G={};x[0]&384&&(G.value=R[7]+" ("+R[8]+")"),d.$set(G);const V={};x[0]&4096&&(V.value=R[12]),m.$set(V),R[11]?N?(N.p(R,x),x[0]&2048&&E(N,1)):(N=qo(R),N.c(),E(N,1),N.m(e,p)):N&&(Ie(),A(N,1,1,()=>{N=null}),Le());const j={};x[0]&2&&(j.value=re(R[1]).format("MMMM DD, YYYY")),v.$set(j);const J={};x[0]&5&&(J.value=re(R[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(R[2]>0?`+${R[2]}`:R[2])+" days)"),k.$set(J),R[2]<0?L?L.p(R,x):(L=Vo(R),L.c(),L.m(e,$)):L&&(L.d(1),L=null),I===(I=H(R))&&F?F.p(R,x):(F.d(1),F=I(R),F&&(F.c(),F.m(S,null)))},i(R){P||(E(s.$$.fragment,R),E(o.$$.fragment,R),E(a.$$.fragment,R),E(d.$$.fragment,R),E(m.$$.fragment,R),E(N),E(g.$$.fragment,R),E(v.$$.fragment,R),E(k.$$.fragment,R),R&&Ye(()=>{P&&(C||(C=Ot(e,Ct,{duration:400,y:-60},!0)),C.run(1))}),P=!0)},o(R){A(s.$$.fragment,R),A(o.$$.fragment,R),A(a.$$.fragment,R),A(d.$$.fragment,R),A(m.$$.fragment,R),A(N),A(g.$$.fragment,R),A(v.$$.fragment,R),A(k.$$.fragment,R),R&&(C||(C=Ot(e,Ct,{duration:400,y:-60},!1)),C.run(0)),P=!1},d(R){R&&O(e),Z(s),Z(o),Z(a),Z(d),Z(m),N&&N.d(),Z(g),Z(v),Z(k),L&&L.d(),F.d(),R&&C&&C.end()}}}function qo(r){let e,t;return e=new tt({props:{key:"Return Note",value:r[11]}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},p(n,s){const i={};s[0]&2048&&(i.value=n[11]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Vo(r){let e,t,n,s,i,o;return{c(){e=h("div"),t=h("div"),t.innerHTML="<b>Late Return Fee:</b>",n=b(),s=h("div"),i=X(r[15]),o=X(" pesos"),c(t,"class","col-sm-4 col-md-4"),c(s,"class","col-sm-8 col-md-8"),c(e,"class","mb-2 row")},m(l,a){M(l,e,a),u(e,t),u(e,n),u(e,s),u(s,i),u(s,o)},p(l,a){a[0]&32768&&ae(i,l[15])},d(l){l&&O(e)}}}function Cg(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-cash"></i> Pay and Return Book',c(e,"class","btn btn-danger"),c(e,"data-bs-toggle","modal"),c(e,"data-bs-target","#payModal")},m(t,n){M(t,e,n)},p:ne,d(t){t&&O(e)}}}function Mg(r){let e,t,n;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',c(e,"class","btn btn-success")},m(s,i){M(s,e,i),t||(n=W(e,"click",r[19]),t=!0)},p:ne,d(s){s&&O(e),t=!1,n()}}}function Pg(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","text"),c(e,"id","ref")},m(s,i){M(s,e,i),q(e,r[13]),t||(n=W(e,"input",r[27]),t=!0)},p(s,i){i[0]&8192&&e.value!==s[13]&&q(e,s[13])},d(s){s&&O(e),t=!1,n()}}}function Eg(r){let e,t,n,s,i,o;return{c(){e=h("select"),t=h("option"),t.textContent="Cash",n=h("option"),n.textContent="GCash",s=h("option"),s.textContent="Bank Transfer",t.__value="cash",q(t,t.__value),n.__value="GCash",q(n,n.__value),s.__value="bank",q(s,s.__value),c(e,"name","payment_method"),c(e,"class","form-select"),c(e,"id","payment_method"),r[14]===void 0&&Ye(()=>r[28].call(e))},m(l,a){M(l,e,a),u(e,t),u(e,n),u(e,s),vn(e,r[14],!0),i||(o=W(e,"change",r[28]),i=!0)},p(l,a){a[0]&16384&&vn(e,l[14])},d(l){l&&O(e),i=!1,o()}}}function Rg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w;return d=new Ae({props:{label:"Ref No.:",id:"ref",$$slots:{default:[Pg]},$$scope:{ctx:r}}}),m=new Ae({props:{label:"Payment Method:",id:"payment_method",$$slots:{default:[Eg]},$$scope:{ctx:r}}}),{c(){e=h("div"),t=h("div"),t.textContent="Amount to pay:",n=b(),s=h("h1"),i=X(""),o=X(r[15]),l=b(),a=h("hr"),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),c(s,"class","text-center"),c(a,"class","my-4"),c(e,"class","container row")},m(p,g){M(p,e,g),u(e,t),u(e,n),u(e,s),u(s,i),u(s,o),u(e,l),u(e,a),u(e,f),K(d,e,null),u(e,_),K(m,e,null),w=!0},p(p,g){(!w||g[0]&32768)&&ae(o,p[15]);const y={};g[0]&8192|g[1]&8&&(y.$$scope={dirty:g,ctx:p}),d.$set(y);const v={};g[0]&16384|g[1]&8&&(v.$$scope={dirty:g,ctx:p}),m.$set(v)},i(p){w||(E(d.$$.fragment,p),E(m.$$.fragment,p),w=!0)},o(p){A(d.$$.fragment,p),A(m.$$.fragment,p),w=!1},d(p){p&&O(e),Z(d),Z(m)}}}function jg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B;t=new st({props:{text:"Return Book"}}),o=new Ae({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Tg]},$$scope:{ctx:r}}}),a=new Ae({props:{label:"Condition:",id:"book-condition",$$slots:{default:[Dg]},$$scope:{ctx:r}}}),d=new Ae({props:{label:"Note:",id:"book-note",$$slots:{default:[Og]},$$scope:{ctx:r}}});let G=r[5]&&Wo(r);return R=new Hm({props:{title:"Process Payment",id:"payModal",pButton:"Return and Pay",$$slots:{default:[Rg]},$$scope:{ctx:r}}}),R.$on("click",r[29]),{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),f=b(),Q(d.$$.fragment),_=b(),m=h("div"),w=h("label"),w.textContent="Return Time:",p=b(),g=h("div"),y=h("input"),v=b(),D=h("div"),k=h("button"),k.textContent="Now",T=b(),$=h("div"),S=h("button"),C=h("i"),P=X(" Preview"),L=b(),H=h("a"),H.innerHTML='<i class="bi bi-x-circle"></i> Cancel',I=b(),G&&G.c(),F=b(),Q(R.$$.fragment),c(w,"class","col-sm-4 col-md-3 col-form-label"),c(w,"for","return-time"),c(y,"class","form-control"),c(y,"type","datetime-local"),c(y,"id","return-time"),c(g,"class","col-sm-5 col-md-6 col-7"),c(k,"class","w-100 btn btn-outline-primary"),c(D,"class","col-sm-3 col-md-3 col-auto"),c(m,"class","mb-4 row justify-content-center"),c(C,"class","bi bi-receipt"),c(S,"class",N="btn btn-"+(r[5]?"secondary":"success")),c(H,"href","./#/"),c(H,"class","btn btn-danger"),c($,"class","float-end"),c(i,"class","col-sm-12 col-lg-6 mb-sm-4"),c(s,"class","row justify-content-around"),c(e,"class","container")},m(V,j){M(V,e,j),K(t,e,null),u(e,n),u(e,s),u(s,i),K(o,i,null),u(i,l),K(a,i,null),u(i,f),K(d,i,null),u(i,_),u(i,m),u(m,w),u(m,p),u(m,g),u(g,y),q(y,r[0]),u(m,v),u(m,D),u(D,k),u(i,T),u(i,$),u($,S),u(S,C),u(S,P),u($,L),u($,H),u(s,I),G&&G.m(s,null),u(e,F),K(R,e,null),U=!0,Y||(B=[W(y,"input",r[25]),W(k,"click",r[26]),W(S,"click",r[18])],Y=!0)},p(V,j){const J={};j[0]&56|j[1]&8&&(J.$$scope={dirty:j,ctx:V}),o.$set(J);const z={};j[0]&4096|j[1]&8&&(z.$$scope={dirty:j,ctx:V}),a.$set(z);const ee={};j[0]&2048|j[1]&8&&(ee.$$scope={dirty:j,ctx:V}),d.$set(ee),j[0]&1&&q(y,V[0]),(!U||j[0]&32&&N!==(N="btn btn-"+(V[5]?"secondary":"success")))&&c(S,"class",N),V[5]?G?(G.p(V,j),j[0]&32&&E(G,1)):(G=Wo(V),G.c(),E(G,1),G.m(s,null)):G&&(Ie(),A(G,1,1,()=>{G=null}),Le());const te={};j[0]&57344|j[1]&8&&(te.$$scope={dirty:j,ctx:V}),R.$set(te)},i(V){U||(E(t.$$.fragment,V),E(o.$$.fragment,V),E(a.$$.fragment,V),E(d.$$.fragment,V),E(G),E(R.$$.fragment,V),V&&(x||Ye(()=>{x=Ze(e,Qe,{duration:500}),x.start()})),U=!0)},o(V){A(t.$$.fragment,V),A(o.$$.fragment,V),A(a.$$.fragment,V),A(d.$$.fragment,V),A(G),A(R.$$.fragment,V),U=!1},d(V){V&&O(e),Z(t),Z(o),Z(a),Z(d),G&&G.d(),Z(R),Y=!1,we(B)}}}function zo(){return"500"+Math.floor(Math.random()*9e3)}function Ag(r,e,t){let n,s,i;Rn(r,Ns,j=>t(31,i=j));let o=re().format("YYYY-MM-DD HH:mm"),l=o,a="";const f=localStorage.getItem("user_id");let d,_="";d=new URLSearchParams(i).get("borrow_id")||"";let w=!1,p,g,y,v,D,k="",T;async function $(){if(w){t(5,w=!1);return}const{data:j,error:J}=await le.from("book_borrow").select().eq("borrow_id",d).eq("active",!0).maybeSingle();if(!j){t(4,_="is-invalid");return}const{data:z,error:ee}=await le.rpc("getborrowinfo",{borrowid:d});ee&&console.error(ee),console.table(z);let te=z[0];t(10,D=`${te.fname} ${te.lname}`),t(9,v=te.stud_id),t(7,g=te.title),t(8,y=te.barcode),t(1,a=te.due_date),t(6,p=await H()),t(5,w=!0)}async function S(){const{data:j,error:J}=await le.from("book_return").insert({return_id:p,borrow_id:d,staff_id:f,note:k,return_date:re(l).format("YYYY-MM-DDTHH:MMZ"),condition:T}).select();if(J)return console.error(J),!1;console.table(j);const{data:z,error:ee}=await le.from("library_holdings").update({status:"Available",condition:T}).eq("barcode",y).select(),{data:te,error:ce}=await le.from("book_borrow").update({active:!1}).eq("borrow_id",d).select();if(ee||ce)return console.error(ee),console.error(ce),!1;const{error:de}=await le.from("reports").insert({report_type:"Book Return",report_details:`"${g}" returned with ${n>0?`+${n}`:n} days on due`,payment_id:N,return_id:p,staff_id:f,stud_id:v});return de&&console.error(de),alert(`Successfully Returned ${g}(${y})`),t(5,w=!1),t(3,d=""),N=null,!0}let C="",P,N=null;async function L(){if(C.trim()==""){alert("Please enter Reference Number");return}if(!await S())return;const{data:j,error:J}=await le.from("payments").insert({return_id:p,ref_num:C,amount:s,method:P}).select("payment_id").single();N=j.payment_id,J&&(console.error(J),alert("Payment Failed"))}async function H(){let j=zo();const{data:J,error:z}=await le.from("book_return").select().eq("return_id",j);return console.log(J),J.length!=0&&(j=zo(),console.log("exists")),console.log(j),j}const I=()=>t(4,_="");function F(){d=this.value,t(3,d)}function R(){T=ki(this),t(12,T)}function x(){k=this.value,t(11,k)}function U(){l=this.value,t(0,l)}const Y=()=>t(0,l=o);function B(){C=this.value,t(13,C)}function G(){P=ki(this),t(14,P)}const V=()=>{L()};return r.$$.update=()=>{r.$$.dirty[0]&3&&t(2,n=re(l).diff(re(a),"days")*-1),r.$$.dirty[0]&4&&t(15,s=n*-50)},[l,a,n,d,_,w,p,g,y,v,D,k,T,C,P,s,o,f,$,S,L,I,F,R,x,U,Y,B,G,V]}class Ig extends Oe{constructor(e){super(),De(this,e,Ag,jg,Se,{},null,[-1,-1])}}function Lg(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Author Name is Required",c(e,"class",t="form-control "+r[7]),c(e,"type","text"),c(e,"id","author-name"),c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[4]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[11]),W(e,"keyup",r[12])],i=!0)},p(l,a){a&128&&t!==(t="form-control "+l[7])&&c(e,"class",t),a&16&&e.value!==l[4]&&q(e,l[4])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function Yg(r){let e,t,n,s;return{c(){e=h("textarea"),c(e,"class",t="form-control "+r[8]),c(e,"id","author-bio"),c(e,"rows","4")},m(i,o){M(i,e,o),q(e,r[5]),n||(s=[W(e,"input",r[13]),W(e,"keyup",r[14])],n=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&c(e,"class",t),o&32&&q(e,i[5])},d(i){i&&O(e),n=!1,we(s)}}}function Ng(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Author Link is Required",c(e,"type","text"),c(e,"id","author-link"),c(e,"class",t="form-control "+r[9]),c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[6]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[15]),W(e,"keyup",r[16])],i=!0)},p(l,a){a&512&&t!==(t="form-control "+l[9])&&c(e,"class",t),a&64&&e.value!==l[6]&&q(e,l[6])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function Ug(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","file"),c(e,"id","author-pic"),c(e,"accept","image/*")},m(s,i){M(s,e,i),r[18](e),t||(n=W(e,"change",r[17]),t=!0)},p:ne,d(s){s&&O(e),r[18](null),t=!1,n()}}}function Hg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x;return t=new st({props:{text:"Add Author"}}),o=new Ae({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Lg]},$$scope:{ctx:r}}}),a=new Ae({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[Yg]},$$scope:{ctx:r}}}),d=new Ae({props:{label:"Author Link:",id:"author-link",$$slots:{default:[Ng]},$$scope:{ctx:r}}}),m=new Ae({props:{label:"Picture:",id:"author-pic",$$slots:{default:[Ug]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),w=b(),p=h("div"),g=h("label"),g.textContent="Preview:",y=b(),v=h("div"),D=h("img"),T=b(),$=h("button"),$.textContent="Remove",C=b(),P=h("div"),N=h("button"),N.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',L=b(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',c(g,"for","cover-preview"),c(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ke(D.src,k=r[3])||c(D,"src",k),c(D,"alt","Preview"),c(D,"id","cover-preview"),c(D,"height","150"),c($,"class","btn btn-sm btn-danger"),c(v,"class","col-sm-8 col-md-9"),c(v,"id","preview-div"),c(p,"class",S="my-3 row "+r[2]),c(N,"class","btn btn-success"),c(H,"href","./#/"),c(P,"class","float-end"),c(i,"class","col-sm-12 col-lg-6"),c(s,"class","justify-content-around row"),c(e,"class","container")},m(U,Y){M(U,e,Y),K(t,e,null),u(e,n),u(e,s),u(s,i),K(o,i,null),u(i,l),K(a,i,null),u(i,f),K(d,i,null),u(i,_),K(m,i,null),u(i,w),u(i,p),u(p,g),u(p,y),u(p,v),u(v,D),u(v,T),u(v,$),u(i,C),u(i,P),u(P,N),u(P,L),u(P,H),F=!0,R||(x=[W($,"click",r[19]),W(N,"click",r[10])],R=!0)},p(U,[Y]){const B={};Y&1048720&&(B.$$scope={dirty:Y,ctx:U}),o.$set(B);const G={};Y&1048864&&(G.$$scope={dirty:Y,ctx:U}),a.$set(G);const V={};Y&1049152&&(V.$$scope={dirty:Y,ctx:U}),d.$set(V);const j={};Y&1048579&&(j.$$scope={dirty:Y,ctx:U}),m.$set(j),(!F||Y&8&&!Ke(D.src,k=U[3]))&&c(D,"src",k),(!F||Y&4&&S!==(S="my-3 row "+U[2]))&&c(p,"class",S)},i(U){F||(E(t.$$.fragment,U),E(o.$$.fragment,U),E(a.$$.fragment,U),E(d.$$.fragment,U),E(m.$$.fragment,U),U&&(I||Ye(()=>{I=Ze(e,Qe,{duration:500}),I.start()})),F=!0)},o(U){A(t.$$.fragment,U),A(o.$$.fragment,U),A(a.$$.fragment,U),A(d.$$.fragment,U),A(m.$$.fragment,U),F=!1},d(U){U&&O(e),Z(t),Z(o),Z(a),Z(d),Z(m),R=!1,we(x)}}}function Fg(r,e,t){let n,s,i="d-none",o,l,a="",f,d,_,m;async function w(){if(t(7,d=l?"":"is-invalid"),t(9,m=f?"":"is-invalid"),console.log(d,_,m),d||_||m)return;const{error:C}=await le.from("author").insert({name:l,bio:a,link:f});if(C){console.error(C);return}const{error:P}=await le.from("reports").insert({report_type:"Add Author",report_details:`Added ${l}`,staff_id:localStorage.getItem("user_id")});P&&console.error(P)}function p(){l=this.value,t(4,l)}const g=()=>t(7,d="");function y(){a=this.value,t(5,a)}const v=()=>t(8,_="");function D(){f=this.value,t(6,f)}const k=()=>t(9,m="");function T(){n=this.files,t(0,n)}function $(C){dt[C?"unshift":"push"](()=>{s=C,t(1,s)})}const S=()=>{t(1,s.value="",s),t(0,n="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(n&&n[0]){console.log(n),t(2,i="");const C=URL.createObjectURL(n[0]);t(3,o=C)}else t(2,i="d-none")},[n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S]}class Bg extends Oe{constructor(e){super(),De(this,e,Fg,Hg,Se,{})}}function Wg(r){let e,t,n,s;return{c(){e=h("input"),c(e,"class",t="form-control "+r[7]),c(e,"type","text"),c(e,"id","publisher-name")},m(i,o){M(i,e,o),q(e,r[4]),n||(s=[W(e,"input",r[11]),W(e,"keyup",r[12])],n=!0)},p(i,o){o&128&&t!==(t="form-control "+i[7])&&c(e,"class",t),o&16&&e.value!==i[4]&&q(e,i[4])},d(i){i&&O(e),n=!1,we(s)}}}function qg(r){let e,t,n,s;return{c(){e=h("textarea"),c(e,"class",t="form-control "+r[8]),c(e,"id","publisher-description"),c(e,"rows","4")},m(i,o){M(i,e,o),q(e,r[5]),n||(s=[W(e,"input",r[13]),W(e,"keyup",r[14])],n=!0)},p(i,o){o&256&&t!==(t="form-control "+i[8])&&c(e,"class",t),o&32&&q(e,i[5])},d(i){i&&O(e),n=!1,we(s)}}}function Vg(r){let e,t,n,s;return{c(){e=h("input"),c(e,"type","text"),c(e,"id","publisher-link"),c(e,"class",t="form-control "+r[9])},m(i,o){M(i,e,o),q(e,r[6]),n||(s=[W(e,"input",r[15]),W(e,"keyup",r[16])],n=!0)},p(i,o){o&512&&t!==(t="form-control "+i[9])&&c(e,"class",t),o&64&&e.value!==i[6]&&q(e,i[6])},d(i){i&&O(e),n=!1,we(s)}}}function zg(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","file"),c(e,"id","publisher-pic"),c(e,"accept","image/*")},m(s,i){M(s,e,i),r[18](e),t||(n=W(e,"change",r[17]),t=!0)},p:ne,d(s){s&&O(e),r[18](null),t=!1,n()}}}function Gg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x;return t=new st({props:{text:"Add Publisher"}}),o=new Ae({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[Wg]},$$scope:{ctx:r}}}),a=new Ae({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[qg]},$$scope:{ctx:r}}}),d=new Ae({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[Vg]},$$scope:{ctx:r}}}),m=new Ae({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[zg]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),Q(o.$$.fragment),l=b(),Q(a.$$.fragment),f=b(),Q(d.$$.fragment),_=b(),Q(m.$$.fragment),w=b(),p=h("div"),g=h("label"),g.textContent="Preview:",y=b(),v=h("div"),D=h("img"),T=b(),$=h("button"),$.textContent="Remove",C=b(),P=h("div"),N=h("button"),N.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',L=b(),H=h("a"),H.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',c(g,"for","cover-preview"),c(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ke(D.src,k=r[3])||c(D,"src",k),c(D,"alt","Preview"),c(D,"id","cover-preview"),c(D,"height","150"),c($,"class","btn btn-sm btn-danger"),c(v,"class","col-sm-8 col-md-9"),c(v,"id","preview-div"),c(p,"class",S="my-3 row "+r[2]),c(N,"class","btn btn-success"),c(H,"href","./#/"),c(P,"class","float-end"),c(i,"class","col-sm-12 col-lg-6"),c(s,"class","justify-content-around row"),c(e,"class","container")},m(U,Y){M(U,e,Y),K(t,e,null),u(e,n),u(e,s),u(s,i),K(o,i,null),u(i,l),K(a,i,null),u(i,f),K(d,i,null),u(i,_),K(m,i,null),u(i,w),u(i,p),u(p,g),u(p,y),u(p,v),u(v,D),u(v,T),u(v,$),u(i,C),u(i,P),u(P,N),u(P,L),u(P,H),F=!0,R||(x=[W($,"click",r[19]),W(N,"click",r[10])],R=!0)},p(U,[Y]){const B={};Y&1048720&&(B.$$scope={dirty:Y,ctx:U}),o.$set(B);const G={};Y&1048864&&(G.$$scope={dirty:Y,ctx:U}),a.$set(G);const V={};Y&1049152&&(V.$$scope={dirty:Y,ctx:U}),d.$set(V);const j={};Y&1048579&&(j.$$scope={dirty:Y,ctx:U}),m.$set(j),(!F||Y&8&&!Ke(D.src,k=U[3]))&&c(D,"src",k),(!F||Y&4&&S!==(S="my-3 row "+U[2]))&&c(p,"class",S)},i(U){F||(E(t.$$.fragment,U),E(o.$$.fragment,U),E(a.$$.fragment,U),E(d.$$.fragment,U),E(m.$$.fragment,U),U&&(I||Ye(()=>{I=Ze(e,Qe,{duration:500}),I.start()})),F=!0)},o(U){A(t.$$.fragment,U),A(o.$$.fragment,U),A(a.$$.fragment,U),A(d.$$.fragment,U),A(m.$$.fragment,U),F=!1},d(U){U&&O(e),Z(t),Z(o),Z(a),Z(d),Z(m),R=!1,we(x)}}}function Jg(r,e,t){let n,s,i="d-none",o,l,a,f,d,_,m;async function w(){t(7,d=l?"":"is-invalid"),t(8,_=a?"":"is-invalid"),t(9,m=f?"":"is-invalid"),console.log(d,_,m)}function p(){l=this.value,t(4,l)}const g=()=>t(7,d="");function y(){a=this.value,t(5,a)}const v=()=>t(8,_="");function D(){f=this.value,t(6,f)}const k=()=>t(9,m="");function T(){n=this.files,t(0,n)}function $(C){dt[C?"unshift":"push"](()=>{s=C,t(1,s)})}const S=()=>{t(1,s.value="",s),t(0,n="")};return r.$$.update=()=>{if(r.$$.dirty&1)if(n&&n[0]){console.log(n),t(2,i="");const C=URL.createObjectURL(n[0]);t(3,o=C)}else t(2,i="d-none")},[n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S]}class xg extends Oe{constructor(e){super(),De(this,e,Jg,Gg,Se,{})}}function Go(r,e,t){const n=r.slice();return n[12]=e[t][0],n[13]=e[t][1],n}function Jo(r){let e,t,n,s,i=r[6].bookscount+"",o,l,a,f,d,_,m=r[6].holdingscount+"",w,p,g,y,v,D,k=r[6].lowest+"",T,$,S,C,P,N,L=r[6].highest+"",H;return{c(){e=h("div"),t=h("div"),t.textContent="# of Books",n=b(),s=h("h1"),o=X(i),l=b(),a=h("div"),f=h("div"),f.textContent="# of Library Holdings",d=b(),_=h("h1"),w=X(m),p=b(),g=h("div"),y=h("div"),y.textContent="Lowest Book Copies",v=b(),D=h("h1"),T=X(k),$=b(),S=h("div"),C=h("div"),C.textContent="Highest Borrowing Activity",P=b(),N=h("h1"),H=X(L)},m(I,F){M(I,e,F),u(e,t),u(e,n),u(e,s),u(s,o),M(I,l,F),M(I,a,F),u(a,f),u(a,d),u(a,_),u(_,w),M(I,p,F),M(I,g,F),u(g,y),u(g,v),u(g,D),u(D,T),M(I,$,F),M(I,S,F),u(S,C),u(S,P),u(S,N),u(N,H)},p(I,F){F&64&&i!==(i=I[6].bookscount+"")&&ae(o,i),F&64&&m!==(m=I[6].holdingscount+"")&&ae(w,m),F&64&&k!==(k=I[6].lowest+"")&&ae(T,k),F&64&&L!==(L=I[6].highest+"")&&ae(H,L)},d(I){I&&(O(e),O(l),O(a),O(p),O(g),O($),O(S))}}}function xo(r){let e,t,n,s;return{c(){e=h("b"),e.textContent="Search Query:",t=b(),n=h("span"),s=X(r[3])},m(i,o){M(i,e,o),M(i,t,o),M(i,n,o),u(n,s)},p(i,o){o&8&&ae(s,i[3])},d(i){i&&(O(e),O(t),O(n))}}}function Ko(r){let e,t=ke(Object.entries(r[0])),n=[];for(let s=0;s<t.length;s+=1)n[s]=Zo(Go(r,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ze()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=ke(Object.entries(s[0]));let o;for(o=0;o<t.length;o+=1){const l=Go(s,t,o);n[o]?n[o].p(l,i):(n[o]=Zo(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function Zo(r){let e,t,n=r[13].isbn+"",s,i,o,l=r[13].title+"",a,f,d,_=r[13].available+"",m,w,p,g=r[13].reserved+"",y,v,D,k=r[13].borrowed+"",T,$,S,C=r[13].total+"",P,N;return{c(){e=h("tr"),t=h("td"),s=X(n),i=b(),o=h("td"),a=X(l),f=b(),d=h("td"),m=X(_),w=b(),p=h("td"),y=X(g),v=b(),D=h("td"),T=X(k),$=b(),S=h("td"),P=X(C),N=b(),c(t,"class","d-md-table-cell  svelte-1cmatm3"),c(o,"class","svelte-1cmatm3"),c(d,"class","svelte-1cmatm3"),c(p,"class","svelte-1cmatm3"),c(D,"class","svelte-1cmatm3"),c(S,"class","fw-bold svelte-1cmatm3")},m(L,H){M(L,e,H),u(e,t),u(t,s),u(e,i),u(e,o),u(o,a),u(e,f),u(e,d),u(d,m),u(e,w),u(e,p),u(p,y),u(e,v),u(e,D),u(D,T),u(e,$),u(e,S),u(S,P),u(e,N)},p(L,H){H&1&&n!==(n=L[13].isbn+"")&&ae(s,n),H&1&&l!==(l=L[13].title+"")&&ae(a,l),H&1&&_!==(_=L[13].available+"")&&ae(m,_),H&1&&g!==(g=L[13].reserved+"")&&ae(y,g),H&1&&k!==(k=L[13].borrowed+"")&&ae(T,k),H&1&&C!==(C=L[13].total+"")&&ae(P,C)},d(L){L&&O(e)}}}function Kg(r){let e,t,n,s,i,o,l,a,f,d,_,m,w=r[5].toUpperCase()+"",p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J,z,ee,te,ce,de,me,Me,_e;t=new st({props:{text:"Books Report",print:!0}});let se=r[6]&&Jo(r),fe=r[3]&&xo(r),pe=r[0]&&Ko(r);return{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),se&&se.c(),i=b(),o=h("div"),l=h("b"),l.textContent="Sorted by:",a=b(),f=h("span"),d=X(r[2]),_=b(),m=h("i"),p=X(w),g=b(),fe&&fe.c(),y=b(),v=h("div"),D=h("div"),D.textContent="Sort by:",k=b(),T=h("div"),$=h("select"),S=h("option"),S.textContent="Title",C=h("option"),C.textContent="Total",P=h("option"),P.textContent="Available",N=h("option"),N.textContent="Reserved",L=h("option"),L.textContent="Borrowed",H=b(),I=h("div"),F=h("select"),R=h("option"),R.textContent="Ascending",x=h("option"),x.textContent="Descending",U=b(),Y=h("form"),B=h("input"),G=b(),V=h("button"),V.innerHTML='<i class="bi bi-search"></i>',j=b(),J=h("div"),z=h("table"),ee=h("thead"),ee.innerHTML='<tr class="sticky-top"><th class="py-3 col-2 d-md-table-cell svelte-1cmatm3">ISBN</th> <th class="py-3 col-5 svelte-1cmatm3">Book Title</th> <th class="py-3 col-1 text-bg-success svelte-1cmatm3">Available</th> <th class="py-3 col-1 text-bg-secondary svelte-1cmatm3">Reserved</th> <th class="py-3 col-1 text-bg-danger svelte-1cmatm3">Borrowed</th> <th class="py-3 col-1 text-bg-primary svelte-1cmatm3">Total</th></tr>',te=b(),ce=h("tbody"),pe&&pe.c(),c(s,"class","d-flex justify-content-center gap-5 my-3"),c(o,"class","d-none d-print-flex align-items-center gap-2 my-3"),S.__value="Title",q(S,S.__value),C.__value="Total",q(C,C.__value),P.__value="Available",q(P,P.__value),N.__value="Reserved",q(N,N.__value),L.__value="Borrowed",q(L,L.__value),c($,"name","filter"),c($,"class","form-select"),R.__value="asc",q(R,R.__value),x.__value="desc",q(x,x.__value),c(F,"name","order"),c(F,"class","form-select"),c(B,"type","text"),c(B,"placeholder","Search title..."),c(B,"name","search"),c(B,"class","form-control"),c(V,"type","submit"),c(V,"class","btn btn-outline-success"),c(Y,"class","d-flex ms-3"),c(v,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),c(z,"class","table table-bordered table-striped table-hover text-center align-middle"),c(J,"class",""),c(e,"class","container")},m(ue,ie){M(ue,e,ie),K(t,e,null),u(e,n),u(e,s),se&&se.m(s,null),u(e,i),u(e,o),u(o,l),u(o,a),u(o,f),u(f,d),u(f,_),u(f,m),u(m,p),u(o,g),fe&&fe.m(o,null),u(e,y),u(e,v),u(v,D),u(v,k),u(v,T),u(T,$),u($,S),u($,C),u($,P),u($,N),u($,L),r[8]($),u(v,H),u(v,I),u(I,F),u(F,R),u(F,x),r[9](F),u(v,U),u(v,Y),u(Y,B),q(B,r[3]),u(Y,G),u(Y,V),u(e,j),u(e,J),u(J,z),u(z,ee),u(z,te),u(z,ce),pe&&pe.m(ce,null),me=!0,Me||(_e=[W($,"change",r[7]),W(F,"change",r[7]),W(B,"input",r[10]),W(V,"click",r[7]),W(Y,"submit",ft(Zg))],Me=!0)},p(ue,[ie]){ue[6]?se?se.p(ue,ie):(se=Jo(ue),se.c(),se.m(s,null)):se&&(se.d(1),se=null),(!me||ie&4)&&ae(d,ue[2]),(!me||ie&32)&&w!==(w=ue[5].toUpperCase()+"")&&ae(p,w),ue[3]?fe?fe.p(ue,ie):(fe=xo(ue),fe.c(),fe.m(o,null)):fe&&(fe.d(1),fe=null),ie&8&&B.value!==ue[3]&&q(B,ue[3]),ue[0]?pe?pe.p(ue,ie):(pe=Ko(ue),pe.c(),pe.m(ce,null)):pe&&(pe.d(1),pe=null)},i(ue){me||(E(t.$$.fragment,ue),ue&&(de||Ye(()=>{de=Ze(e,Qe,{duration:500}),de.start()})),me=!0)},o(ue){A(t.$$.fragment,ue),me=!1},d(ue){ue&&O(e),Z(t),se&&se.d(),fe&&fe.d(),r[8](null),r[9](null),pe&&pe.d(),Me=!1,we(_e)}}}const Zg=()=>{};function Qg(r,e,t){let n,s,i="total",o="",l,a="asc",f;async function d(){t(2,i=s.value),t(5,a=l.value);const{data:g,error:y}=await le.rpc("getbooksreport",{sortby:i,search:o});if(y){console.error(y);return}a=="asc"&&g.sort((v,D)=>v[i.toLowerCase()]-D[i.toLowerCase()]),i=="Title"&&a=="asc"&&g.sort(function(v,D){let k=v.title.toUpperCase(),T=D.title.toUpperCase();return k<T?-1:k>T?1:0}),i=="Title"&&a=="desc"&&g.sort(function(v,D){let k=v.title.toUpperCase(),T=D.title.toUpperCase();return k>T?-1:k<T?1:0}),t(0,n=g)}Dt(d),Dt(_);async function _(){const{data:g,error:y}=await le.rpc("booksummary").single();y&&console.error(y),t(6,f=g)}function m(g){dt[g?"unshift":"push"](()=>{s=g,t(1,s)})}function w(g){dt[g?"unshift":"push"](()=>{l=g,t(4,l)})}function p(){o=this.value,t(3,o)}return[n,s,i,o,l,a,f,d,m,w,p]}class Xg extends Oe{constructor(e){super(),De(this,e,Qg,Kg,Se,{})}}function Qo(r,e,t){const n=r.slice();return n[3]=e[t],n}function Xo(r){let e,t,n,s,i,o=r[1].total+"",l,a,f,d,_,m,w=r[1].count+"",p,g,y,v,D,k,T=r[1].average+"",$,S,C,P,N,L,H=r[1].highest+"",I;return{c(){e=h("div"),t=h("div"),t.textContent="Overall Total Payment",n=b(),s=h("h1"),i=X(""),l=X(o),a=b(),f=h("div"),d=h("div"),d.textContent="Total Late Returns",_=b(),m=h("h1"),p=X(w),g=b(),y=h("div"),v=h("div"),v.textContent="Average Payment",D=b(),k=h("h1"),$=X(T),S=b(),C=h("div"),P=h("div"),P.textContent="Highest Payment",N=b(),L=h("h1"),I=X(H)},m(F,R){M(F,e,R),u(e,t),u(e,n),u(e,s),u(s,i),u(s,l),M(F,a,R),M(F,f,R),u(f,d),u(f,_),u(f,m),u(m,p),M(F,g,R),M(F,y,R),u(y,v),u(y,D),u(y,k),u(k,$),M(F,S,R),M(F,C,R),u(C,P),u(C,N),u(C,L),u(L,I)},p(F,R){R&2&&o!==(o=F[1].total+"")&&ae(l,o),R&2&&w!==(w=F[1].count+"")&&ae(p,w),R&2&&T!==(T=F[1].average+"")&&ae($,T),R&2&&H!==(H=F[1].highest+"")&&ae(I,H)},d(F){F&&(O(e),O(a),O(f),O(g),O(y),O(S),O(C))}}}function el(r){let e,t=ke(r[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tl(Qo(r,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ze()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=ke(s[0]);let o;for(o=0;o<t.length;o+=1){const l=Qo(s,t,o);n[o]?n[o].p(l,i):(n[o]=tl(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function tl(r){let e,t,n=r[3].ref_num+"",s,i,o,l=r[3].fname+"",a,f,d=r[3].lname+"",_,m,w,p,g=r[3].amount+"",y,v,D,k=r[3].amount/50+"",T,$;return{c(){e=h("tr"),t=h("td"),s=X(n),i=b(),o=h("td"),a=X(l),f=b(),_=X(d),m=b(),w=h("td"),p=X(""),y=X(g),v=b(),D=h("td"),T=X(k),$=b()},m(S,C){M(S,e,C),u(e,t),u(t,s),u(e,i),u(e,o),u(o,a),u(o,f),u(o,_),u(e,m),u(e,w),u(w,p),u(w,y),u(e,v),u(e,D),u(D,T),u(e,$)},p(S,C){C&1&&n!==(n=S[3].ref_num+"")&&ae(s,n),C&1&&l!==(l=S[3].fname+"")&&ae(a,l),C&1&&d!==(d=S[3].lname+"")&&ae(_,d),C&1&&g!==(g=S[3].amount+"")&&ae(y,g),C&1&&k!==(k=S[3].amount/50+"")&&ae(T,k)},d(S){S&&O(e)}}}function eb(r){let e,t,n,s,i,o,l,a,f,d,_;t=new st({props:{text:"Payments Report",print:!0}});let m=r[1]&&Xo(r),w=r[0]&&el(r);return{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),m&&m.c(),i=b(),o=h("table"),l=h("thead"),l.innerHTML='<tr><th class="col-3">Reference No.</th> <th>Student Name</th> <th class="col-2">Amount</th> <th class="col-2">Days Late</th></tr>',a=b(),f=h("tbody"),w&&w.c(),c(s,"class","d-flex justify-content-center gap-5 my-3"),c(o,"class","table table-bordered table-striped text-center"),c(e,"class","container")},m(p,g){M(p,e,g),K(t,e,null),u(e,n),u(e,s),m&&m.m(s,null),u(e,i),u(e,o),u(o,l),u(o,a),u(o,f),w&&w.m(f,null),_=!0},p(p,[g]){p[1]?m?m.p(p,g):(m=Xo(p),m.c(),m.m(s,null)):m&&(m.d(1),m=null),p[0]?w?w.p(p,g):(w=el(p),w.c(),w.m(f,null)):w&&(w.d(1),w=null)},i(p){_||(E(t.$$.fragment,p),p&&(d||Ye(()=>{d=Ze(e,Qe,{duration:500}),d.start()})),_=!0)},o(p){A(t.$$.fragment,p),_=!1},d(p){p&&O(e),Z(t),m&&m.d(),w&&w.d()}}}function tb(r,e,t){let n,s;async function i(){const{data:o,error:l}=await le.rpc("getpayments");l&&console.error(l),t(0,n=o);const{data:a,error:f}=await le.rpc("paymentreport").single();f&&console.error(f),t(1,s=a)}return Dt(i),[n,s]}class rb extends Oe{constructor(e){super(),De(this,e,tb,eb,Se,{})}}function rl(r,e,t){const n=r.slice();return n[10]=e[t],n}function nb(r){let e,t;return{c(){e=h("option"),e.textContent="Ascending",t=h("option"),t.textContent="Descending",e.__value="",q(e,e.__value),t.__value="",q(t,t.__value)},m(n,s){M(n,e,s),M(n,t,s)},d(n){n&&(O(e),O(t))}}}function sb(r){let e,t;return{c(){e=h("option"),e.textContent="Borrowed",t=h("option"),t.textContent="Reserved",e.__value="",q(e,e.__value),t.__value="",q(t,t.__value)},m(n,s){M(n,e,s),M(n,t,s)},d(n){n&&(O(e),O(t))}}}function nl(r){let e,t=ke(r[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=il(rl(r,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ze()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=ke(s[0]);let o;for(o=0;o<t.length;o+=1){const l=rl(s,t,o);n[o]?n[o].p(l,i):(n[o]=il(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function sl(r){let e;return{c(){e=h("button"),e.innerHTML='<i class="bi bi-trash-fill"></i>',c(e,"class","btn btn-sm btn-outline-danger")},m(t,n){M(t,e,n)},d(t){t&&O(e)}}}function il(r){let e,t,n=(r[10].bb_stud_id||r[10].br_stud_id)+"",s,i,o,l=r[10].fname+"",a,f,d=r[10].lname+"",_,m,w,p,g=r[10].title+"",y,v,D,k,T=r[10].status+"",$,S,C,P=re(r[10].date_reserved||r[10].due_date).format("MM-DD-YYYY")+"",N,L,H,I,F,R,x,U,Y,B,G,V,j=r[10].status=="Reserved"&&sl();return{c(){e=h("tr"),t=h("td"),s=X(n),i=b(),o=h("td"),a=X(l),f=b(),_=X(d),m=b(),w=h("td"),p=h("a"),y=X(g),D=b(),k=h("td"),$=X(T),S=b(),C=h("td"),N=X(P),L=b(),H=h("td"),I=h("a"),F=h("button"),F.innerHTML='<i class="bi bi-envelope-fill"></i>',x=b(),U=h("a"),Y=h("button"),Y.innerHTML='<i class="bi bi-telephone-fill"></i>',G=b(),j&&j.c(),V=b(),c(p,"href",v="./#/book/"+r[10].book_id),c(F,"class","btn btn-sm btn-outline-primary"),c(I,"href",R="mailto:"+r[10].email),c(Y,"class","btn btn-sm btn-outline-success"),c(U,"href",B="tel:"+r[10].contact),c(H,"class","d-print-none")},m(J,z){M(J,e,z),u(e,t),u(t,s),u(e,i),u(e,o),u(o,a),u(o,f),u(o,_),u(e,m),u(e,w),u(w,p),u(p,y),u(e,D),u(e,k),u(k,$),u(e,S),u(e,C),u(C,N),u(e,L),u(e,H),u(H,I),u(I,F),u(H,x),u(H,U),u(U,Y),u(H,G),j&&j.m(H,null),u(e,V)},p(J,z){z&1&&n!==(n=(J[10].bb_stud_id||J[10].br_stud_id)+"")&&ae(s,n),z&1&&l!==(l=J[10].fname+"")&&ae(a,l),z&1&&d!==(d=J[10].lname+"")&&ae(_,d),z&1&&g!==(g=J[10].title+"")&&ae(y,g),z&1&&v!==(v="./#/book/"+J[10].book_id)&&c(p,"href",v),z&1&&T!==(T=J[10].status+"")&&ae($,T),z&1&&P!==(P=re(J[10].date_reserved||J[10].due_date).format("MM-DD-YYYY")+"")&&ae(N,P),z&1&&R!==(R="mailto:"+J[10].email)&&c(I,"href",R),z&1&&B!==(B="tel:"+J[10].contact)&&c(U,"href",B),J[10].status=="Reserved"?j||(j=sl(),j.c(),j.m(H,null)):j&&(j.d(1),j=null)},d(J){J&&O(e),j&&j.d()}}}function ib(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U,Y,B,G;t=new st({props:{text:"Student Inventory Report",print:!0}});function V(ee,te){return ee[2]=="status"?sb:nb}let j=V(r),J=j(r),z=r[0]&&nl(r);return{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("div"),i.textContent="Filters:",o=b(),l=h("div"),a=h("select"),f=h("option"),f.textContent="Student Name",d=h("option"),d.textContent="Book Title",_=h("option"),_.textContent="Status",m=h("option"),m.textContent="Due Date",w=b(),p=h("div"),g=h("select"),J.c(),y=b(),v=h("form"),D=h("div"),D.textContent="Search:",k=b(),T=h("select"),$=h("option"),$.textContent="Student Name",S=h("option"),S.textContent="Book Title",C=b(),P=h("input"),N=b(),L=h("button"),L.innerHTML='<i class="bi bi-search"></i>',H=b(),I=h("table"),F=h("thead"),F.innerHTML='<tr class="align-middle"><th>Student ID</th> <th>Student Name</th> <th>Book</th> <th>Status</th> <th>Due Date</th> <th class="d-print-none">Actions</th></tr>',R=b(),x=h("tbody"),z&&z.c(),f.__value="fname",q(f,f.__value),d.__value="title",q(d,d.__value),_.__value="status",q(_,_.__value),m.__value="",q(m,m.__value),c(a,"name","filter"),c(a,"class","form-select"),c(g,"name","order"),c(g,"class","form-select"),$.__value="fname",q($,$.__value),S.__value="title",q(S,S.__value),c(T,"name","filter"),c(T,"class","form-select"),c(P,"type","text"),c(P,"placeholder","Search..."),c(P,"name","search"),c(P,"class","form-control"),c(L,"type","submit"),c(L,"class","btn btn-outline-success"),c(v,"class","d-flex ms-3 align-items-center gap-2"),c(s,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),c(I,"class","table table=striped table-bordered text-center"),c(e,"class","container")},m(ee,te){M(ee,e,te),K(t,e,null),u(e,n),u(e,s),u(s,i),u(s,o),u(s,l),u(l,a),u(a,f),u(a,d),u(a,_),u(a,m),r[5](a),u(s,w),u(s,p),u(p,g),J.m(g,null),u(s,y),u(s,v),u(v,D),u(v,k),u(v,T),u(T,$),u(T,S),r[7](T),u(v,C),u(v,P),q(P,r[4]),u(v,N),u(v,L),u(e,H),u(e,I),u(I,F),u(I,R),u(I,x),z&&z.m(x,null),Y=!0,B||(G=[W(a,"change",r[6]),W(T,"change",ob),W(P,"input",r[8]),W(v,"submit",ft(lb))],B=!0)},p(ee,[te]){j!==(j=V(ee))&&(J.d(1),J=j(ee),J&&(J.c(),J.m(g,null))),te&16&&P.value!==ee[4]&&q(P,ee[4]),ee[0]?z?z.p(ee,te):(z=nl(ee),z.c(),z.m(x,null)):z&&(z.d(1),z=null)},i(ee){Y||(E(t.$$.fragment,ee),ee&&(U||Ye(()=>{U=Ze(e,Qe,{duration:500}),U.start()})),Y=!0)},o(ee){A(t.$$.fragment,ee),Y=!1},d(ee){ee&&O(e),Z(t),r[5](null),J.d(),r[7](null),z&&z.d(),B=!1,we(G)}}}const ob=()=>{},lb=()=>{};function ab(r,e,t){let n,s={value:""},i="",o,l;async function a(){const{data:w,error:p}=await le.rpc("getstudentreport");p&&console.error(p),t(0,n=w),console.log(w)}a();function f(w){dt[w?"unshift":"push"](()=>{s=w,t(1,s)})}const d=()=>{t(2,i=s.value),console.log(i)};function _(w){dt[w?"unshift":"push"](()=>{o=w,t(3,o)})}function m(){l=this.value,t(4,l)}return[n,s,i,o,l,f,d,_,m]}class ub extends Oe{constructor(e){super(),De(this,e,ab,ib,Se,{})}}function ol(r,e,t){const n=r.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function ll(r,e,t){const n=r.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function al(r){let e,t,n,s;return{c(){e=h("b"),e.textContent="Search Query:",t=b(),n=h("span"),s=X(r[4])},m(i,o){M(i,e,o),M(i,t,o),M(i,n,o),u(n,s)},p(i,o){o&16&&ae(s,i[4])},d(i){i&&(O(e),O(t),O(n))}}}function ul(r){let e,t,n,s,i=ke(Object.entries(r[1])),o=[];for(let l=0;l<i.length;l+=1)o[l]=cl(ll(r,i,l));return{c(){e=h("select"),t=h("option"),t.textContent="All";for(let l=0;l<o.length;l+=1)o[l].c();t.__value="all",q(t,t.__value),c(e,"name","filter"),c(e,"class","form-select")},m(l,a){M(l,e,a),u(e,t);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);r[6](e),n||(s=W(e,"change",r[7]),n=!0)},p(l,a){if(a&2){i=ke(Object.entries(l[1]));let f;for(f=0;f<i.length;f+=1){const d=ll(l,i,f);o[f]?o[f].p(d,a):(o[f]=cl(d),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(l){l&&O(e),xe(o,l),r[6](null),n=!1,s()}}}function cl(r){let e,t=r[12].report_type+"",n,s;return{c(){e=h("option"),n=X(t),e.__value=s=r[12].report_type,q(e,e.__value)},m(i,o){M(i,e,o),u(e,n)},p(i,o){o&2&&t!==(t=i[12].report_type+"")&&ae(n,t),o&2&&s!==(s=i[12].report_type)&&(e.__value=s,q(e,e.__value))},d(i){i&&O(e)}}}function fl(r){let e,t=ke(Object.entries(r[0])),n=[];for(let s=0;s<t.length;s+=1)n[s]=dl(ol(r,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ze()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);M(s,e,i)},p(s,i){if(i&1){t=ke(Object.entries(s[0]));let o;for(o=0;o<t.length;o+=1){const l=ol(s,t,o);n[o]?n[o].p(l,i):(n[o]=dl(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&O(e),xe(n,s)}}}function dl(r){let e,t,n=re(r[12].report_time).format("MM-DD-YYYY hh:mm a")+"",s,i,o,l=(r[12].staffname||"--")+"",a,f,d,_=(r[12].studentname||"--")+"",m,w,p,g=r[12].report_type+"",y,v,D,k,T=r[12].report_details+"",$,S;return{c(){e=h("tr"),t=h("td"),s=X(n),i=b(),o=h("td"),a=X(l),f=b(),d=h("td"),m=X(_),w=b(),p=h("td"),y=X(g),v=b(),D=h("td"),k=h("small"),$=X(T),S=b(),c(D,"class","fs-6")},m(C,P){M(C,e,P),u(e,t),u(t,s),u(e,i),u(e,o),u(o,a),u(e,f),u(e,d),u(d,m),u(e,w),u(e,p),u(p,y),u(e,v),u(e,D),u(D,k),u(k,$),u(e,S)},p(C,P){P&1&&n!==(n=re(C[12].report_time).format("MM-DD-YYYY hh:mm a")+"")&&ae(s,n),P&1&&l!==(l=(C[12].staffname||"--")+"")&&ae(a,l),P&1&&_!==(_=(C[12].studentname||"--")+"")&&ae(m,_),P&1&&g!==(g=C[12].report_type+"")&&ae(y,g),P&1&&T!==(T=C[12].report_details+"")&&ae($,T)},d(C){C&&O(e)}}}function cb(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F;t=new st({props:{text:"System Log",print:!0}});let R=r[4]&&al(r),x=r[1]&&ul(r),U=r[0]&&fl(r);return{c(){e=h("main"),Q(t.$$.fragment),n=b(),s=h("div"),i=h("b"),i.textContent="Filter:",o=b(),l=h("span"),a=X(r[3]),f=b(),R&&R.c(),d=b(),_=h("div"),m=h("div"),m.textContent="Transaction:",w=b(),p=h("div"),x&&x.c(),g=b(),y=h("form"),v=h("input"),D=b(),k=h("button"),k.innerHTML='<i class="bi bi-search"></i>',T=b(),$=h("div"),S=h("table"),C=h("thead"),C.innerHTML="<tr><th>Time</th> <th>Staff</th> <th>Student</th> <th>Transaction</th> <th>Details</th></tr>",P=b(),N=h("tbody"),U&&U.c(),c(s,"class","d-none d-print-flex align-items-center gap-2 my-3"),c(v,"type","text"),c(v,"placeholder","Search Details..."),c(v,"name","search"),c(v,"class","form-control"),c(k,"type","submit"),c(k,"class","btn btn-outline-success"),c(y,"class","d-flex ms-3"),c(_,"class","d-flex justify-content-end align-items-center gap-2 mb-3 d-print-none"),c(S,"class","table table=striped table-bordered text-center"),c(e,"class","container")},m(Y,B){M(Y,e,B),K(t,e,null),u(e,n),u(e,s),u(s,i),u(s,o),u(s,l),u(l,a),u(s,f),R&&R.m(s,null),u(e,d),u(e,_),u(_,m),u(_,w),u(_,p),x&&x.m(p,null),u(_,g),u(_,y),u(y,v),q(v,r[4]),u(y,D),u(y,k),u(e,T),u(e,$),u($,S),u(S,C),u(S,P),u(S,N),U&&U.m(N,null),H=!0,I||(F=[W(v,"input",r[8]),W(y,"submit",ft(r[9]))],I=!0)},p(Y,[B]){(!H||B&8)&&ae(a,Y[3]),Y[4]?R?R.p(Y,B):(R=al(Y),R.c(),R.m(s,null)):R&&(R.d(1),R=null),Y[1]?x?x.p(Y,B):(x=ul(Y),x.c(),x.m(p,null)):x&&(x.d(1),x=null),B&16&&v.value!==Y[4]&&q(v,Y[4]),Y[0]?U?U.p(Y,B):(U=fl(Y),U.c(),U.m(N,null)):U&&(U.d(1),U=null)},i(Y){H||(E(t.$$.fragment,Y),Y&&(L||Ye(()=>{L=Ze(e,Qe,{duration:500}),L.start()})),H=!0)},o(Y){A(t.$$.fragment,Y),H=!1},d(Y){Y&&O(e),Z(t),R&&R.d(),x&&x.d(),U&&U.d(),I=!1,we(F)}}}function fb(r,e,t){let n,s,i={value:"all"},o,l="";async function a(){t(3,o=i.value);const{data:p,error:g}=await le.rpc("getreports",{filter:o,search:l});g&&console.error(g),t(0,n=p)}async function f(){const{data:p,error:g}=await le.rpc("getreporttypes");g&&console.error(g),t(1,s=p)}Dt(a),Dt(f);function d(p){dt[p?"unshift":"push"](()=>{i=p,t(2,i),t(1,s)})}const _=()=>a();function m(){l=this.value,t(4,l)}return[n,s,i,o,l,a,d,_,m,()=>a()]}class db extends Oe{constructor(e){super(),De(this,e,fb,cb,Se,{})}}function hb(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","text"),c(e,"id","book-name"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[1]),t||(n=W(e,"input",r[14]),t=!0)},p(s,i){i[0]&2&&e.value!==s[1]&&q(e,s[1])},d(s){s&&O(e),t=!1,n()}}}function _b(r){let e,t,n;return{c(){e=h("textarea"),c(e,"class","form-control"),c(e,"id","book-description"),c(e,"rows","6"),c(e,"autocomplete","off")},m(s,i){M(s,e,i),q(e,r[2]),t||(n=W(e,"input",r[15]),t=!0)},p(s,i){i[0]&4&&q(e,s[2])},d(s){s&&O(e),t=!1,n()}}}function mb(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","file"),c(e,"id","book-cover"),c(e,"accept","image/*")},m(s,i){M(s,e,i),r[17](e),t||(n=W(e,"change",r[16]),t=!0)},p:ne,d(s){s&&O(e),r[17](null),t=!1,n()}}}function hl(r){let e,t,n,s,i,o,l,a,f,d;return{c(){e=h("div"),t=h("label"),t.textContent="Preview:",n=b(),s=h("div"),i=h("img"),l=b(),a=h("button"),a.textContent="Remove",c(t,"for","cover-preview"),c(t,"class","col-sm-4 col-md-3 col-form-label align-self-center"),Ke(i.src,o=r[12])||c(i,"src",o),c(i,"alt","Preview"),c(i,"id","cover-preview"),c(i,"height","150"),c(a,"class","btn btn-sm btn-danger"),c(s,"class","col-sm-8 col-md-9"),c(s,"id","preview-div"),c(e,"class","my-3 row")},m(_,m){M(_,e,m),u(e,t),u(e,n),u(e,s),u(s,i),u(s,l),u(s,a),f||(d=[W(i,"error",r[18]),W(a,"click",r[19])],f=!0)},p(_,m){m[0]&4096&&!Ke(i.src,o=_[12])&&c(i,"src",o)},d(_){_&&O(e),f=!1,we(d)}}}function pb(r){let e,t,n,s,i,o,l,a;return{c(){e=h("input"),n=b(),s=h("div"),s.textContent="Use comma to separate multiple categories. e.g(Science, Technology)",i=b(),o=h("div"),o.innerHTML='Category Not Found. Check format and spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","categories"),c(e,"class",t="form-control "+r[8]),c(e,"type","text"),c(e,"id","book-category"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","form-text"),c(o,"class","invalid-feedback")},m(f,d){M(f,e,d),q(e,r[3]),M(f,n,d),M(f,s,d),M(f,i,d),M(f,o,d),l||(a=[W(e,"input",r[20]),W(e,"keyup",r[21])],l=!0)},p(f,d){d[0]&256&&t!==(t="form-control "+f[8])&&c(e,"class",t),d[0]&8&&e.value!==f[3]&&q(e,f[3])},d(f){f&&(O(e),O(n),O(s),O(i),O(o)),l=!1,we(a)}}}function gb(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","authors"),c(e,"class",t="form-control "+r[9]),c(e,"type","text"),c(e,"id","book-author"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[4]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[22]),W(e,"keyup",r[23])],i=!0)},p(l,a){a[0]&512&&t!==(t="form-control "+l[9])&&c(e,"class",t),a[0]&16&&e.value!==l[4]&&q(e,l[4])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function bb(r){let e,t,n,s,i,o;return{c(){e=h("input"),n=b(),s=h("div"),s.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',c(e,"list","publishers"),c(e,"class",t="form-control "+r[10]),c(e,"type","text"),c(e,"id","book-publisher"),c(e,"autocomplete","off"),e.required=!0,c(s,"class","invalid-feedback")},m(l,a){M(l,e,a),q(e,r[5]),M(l,n,a),M(l,s,a),i||(o=[W(e,"input",r[24]),W(e,"keyup",r[25])],i=!0)},p(l,a){a[0]&1024&&t!==(t="form-control "+l[10])&&c(e,"class",t),a[0]&32&&e.value!==l[5]&&q(e,l[5])},d(l){l&&(O(e),O(n),O(s)),i=!1,we(o)}}}function vb(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","number"),c(e,"id","book-shelf"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[6]),t||(n=W(e,"input",r[26]),t=!0)},p(s,i){i[0]&64&&Xt(e.value)!==s[6]&&q(e,s[6])},d(s){s&&O(e),t=!1,n()}}}function wb(r){let e,t,n;return{c(){e=h("input"),c(e,"class","form-control"),c(e,"type","text"),c(e,"id","book-isbn"),c(e,"autocomplete","off"),e.required=!0},m(s,i){M(s,e,i),q(e,r[7]),t||(n=W(e,"input",r[27]),t=!0)},p(s,i){i[0]&128&&e.value!==s[7]&&q(e,s[7])},d(s){s&&O(e),t=!1,n()}}}function yb(r){let e,t,n,s,i,o,l,a,f,d,_,m,w,p,g,y,v,D,k,T,$,S,C,P,N,L,H,I,F,R,x,U;t=new st({props:{text:"Update Book"}}),l=new Ae({props:{label:"Book Title:",id:"book-name",$$slots:{default:[hb]},$$scope:{ctx:r}}}),f=new Ae({props:{label:"Book Description:",id:"book-description",$$slots:{default:[_b]},$$scope:{ctx:r}}}),_=new Ae({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[mb]},$$scope:{ctx:r}}});let Y=r[12]&&hl(r);return g=new Ae({props:{label:"Category:",id:"book-category",$$slots:{default:[pb]},$$scope:{ctx:r}}}),v=new Ae({props:{label:"Author: ",id:"book-author",$$slots:{default:[gb]},$$scope:{ctx:r}}}),k=new Ae({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[bb]},$$scope:{ctx:r}}}),$=new Ae({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[vb]},$$scope:{ctx:r}}}),C=new Ae({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[wb]},$$scope:{ctx:r}}}),{c(){e=h("section"),Q(t.$$.fragment),n=b(),s=h("form"),i=h("div"),o=h("div"),Q(l.$$.fragment),a=b(),Q(f.$$.fragment),d=b(),Q(_.$$.fragment),m=b(),Y&&Y.c(),w=b(),p=h("div"),Q(g.$$.fragment),y=b(),Q(v.$$.fragment),D=b(),Q(k.$$.fragment),T=b(),Q($.$$.fragment),S=b(),Q(C.$$.fragment),P=b(),N=h("div"),L=h("button"),L.innerHTML='<i class="bi bi-arrow-clockwise"></i> Update Book',H=b(),I=h("button"),I.innerHTML='<i class="bi bi-x-circle"></i> Cancel',c(o,"class","col-sm-12 col-lg-6"),c(p,"class","col-sm-12 col-lg-6"),c(i,"class","row justify-content-center"),c(L,"class","btn btn-success"),c(L,"type","submit"),c(I,"class","btn btn-danger"),c(I,"type","button"),c(N,"class","my-3"),c(e,"class","my-1 container")},m(B,G){M(B,e,G),K(t,e,null),u(e,n),u(e,s),u(s,i),u(i,o),K(l,o,null),u(o,a),K(f,o,null),u(o,d),K(_,o,null),u(o,m),Y&&Y.m(o,null),u(i,w),u(i,p),K(g,p,null),u(p,y),K(v,p,null),u(p,D),K(k,p,null),u(p,T),K($,p,null),u(p,S),K(C,p,null),u(s,P),u(s,N),u(N,L),u(N,H),u(N,I),R=!0,x||(U=[W(I,"click",r[28]),W(s,"submit",ft(r[13]))],x=!0)},p(B,G){const V={};G[0]&2|G[1]&64&&(V.$$scope={dirty:G,ctx:B}),l.$set(V);const j={};G[0]&4|G[1]&64&&(j.$$scope={dirty:G,ctx:B}),f.$set(j);const J={};G[0]&2049|G[1]&64&&(J.$$scope={dirty:G,ctx:B}),_.$set(J),B[12]?Y?Y.p(B,G):(Y=hl(B),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null);const z={};G[0]&264|G[1]&64&&(z.$$scope={dirty:G,ctx:B}),g.$set(z);const ee={};G[0]&528|G[1]&64&&(ee.$$scope={dirty:G,ctx:B}),v.$set(ee);const te={};G[0]&1056|G[1]&64&&(te.$$scope={dirty:G,ctx:B}),k.$set(te);const ce={};G[0]&64|G[1]&64&&(ce.$$scope={dirty:G,ctx:B}),$.$set(ce);const de={};G[0]&128|G[1]&64&&(de.$$scope={dirty:G,ctx:B}),C.$set(de)},i(B){R||(E(t.$$.fragment,B),E(l.$$.fragment,B),E(f.$$.fragment,B),E(_.$$.fragment,B),E(g.$$.fragment,B),E(v.$$.fragment,B),E(k.$$.fragment,B),E($.$$.fragment,B),E(C.$$.fragment,B),B&&(F||Ye(()=>{F=Ze(e,Qe,{duration:500}),F.start()})),R=!0)},o(B){A(t.$$.fragment,B),A(l.$$.fragment,B),A(f.$$.fragment,B),A(_.$$.fragment,B),A(g.$$.fragment,B),A(v.$$.fragment,B),A(k.$$.fragment,B),A($.$$.fragment,B),A(C.$$.fragment,B),R=!1},d(B){B&&O(e),Z(t),Z(l),Z(f),Z(_),Y&&Y.d(),Z(g),Z(v),Z(k),Z($),Z(C),x=!1,we(U)}}}function kb(r,e,t){let n;Rn(r,Ns,z=>t(31,n=z));const i=new URLSearchParams(n).get("id");i?T():Dn("#/invalid-link");let o,l,a,f,d,_,m,w,p,g,y,v,D,k=`https://oatzrwezibkcabfwxppo.supabase.co/storage/v1/object/public/books/${i}.jpg`;async function T(){const{data:z,error:ee}=await le.from("books").select("*, author(author_id, name), publisher(publisher_id, name)").eq("book_id",i).single();if(ee){console.error(ee),Dn("#/invalid-link");return}t(1,o=z.title),t(2,l=z.description),t(4,f=z.author.name),t(5,d=z.publisher.name),t(6,_=z.shelf_number),t(7,m=z.isbn)}async function $(){if(!await S())return;const{error:z}=await le.rpc("updatebook",{bookid:i,titlevalue:o,descriptionvalue:l,author_name:f,publisher_name:d,shelf_numbervalue:_,isbnvalue:m});if(v&&v[0]){const{data:de,error:me}=await le.storage.from("books").upload(`${i}.jpg`,v[0],{upsert:!0});me&&console.error(me)}else{const{data:de,error:me}=await le.storage.from("books").remove([`${i}.jpg`]);me&&console.error(me)}if(z){console.error(z),alert(z.details),alert(z.hint);return}alert("Succesfully Updated");const{error:ee}=await le.from("books_category").delete().eq("book_id",i);ee&&console.error(ee);let te=!0;for(const de in w){console.log(de);const{data:me,error:Me}=await le.from("books_category").insert({book_id:i,category_id:w[de]});Me&&(console.error(Me),te=!1)}te||alert("Had problem while pushing categories, Update book later");const{error:ce}=await le.from("reports").insert({report_type:"Update Book",report_details:`Changed Details of ${o}`,book_id:i,staff_id:localStorage.getItem("user_id")});ce&&console.error(ce),bs()}async function S(){const{data:z,error:ee}=await le.from("author").select("author_id").eq("name",f).single(),{data:te,error:ce}=await le.from("publisher").select("publisher_id").eq("name",d).single();let de=!0;if((ee||!z)&&(t(9,g="is-invalid"),de=!1),(ce||!te)&&(t(10,y="is-invalid"),de=!1),!await C()){if(w.length!=0)return;t(8,p="is-invalid"),de=!1}return de}async function C(){if(a=="")return!1;let z=!0,ee=[],te=a.split(",").map(ce=>ce.trim());console.log(te);for(const ce of te){console.log(ce);const{data:de,error:me}=await le.from("category").select("category_id").eq("name",ce).single();me?(z=!1,console.error(me)):ee.push(de.category_id),console.log(z)}return console.log(te,ee),w=z?ee:[],console.log(z,w),z}function P(){o=this.value,t(1,o)}function N(){l=this.value,t(2,l)}function L(){v=this.files,t(0,v)}function H(z){dt[z?"unshift":"push"](()=>{D=z,t(11,D)})}const I=()=>t(12,k=""),F=()=>{t(11,D.value="",D),t(0,v=""),t(12,k="")};function R(){a=this.value,t(3,a)}const x=()=>t(8,p="");function U(){f=this.value,t(4,f)}const Y=()=>t(9,g="");function B(){d=this.value,t(5,d)}const G=()=>t(10,y="");function V(){_=Xt(this.value),t(6,_)}function j(){m=this.value,t(7,m)}const J=()=>bs();return r.$$.update=()=>{if(r.$$.dirty[0]&1)if(v&&v[0]){console.log(v);const z=URL.createObjectURL(v[0]);t(12,k=z)}else console.log(v)},[v,o,l,a,f,d,_,m,p,g,y,D,k,$,P,N,L,H,I,F,R,x,U,Y,B,G,V,j,J]}class $b extends Oe{constructor(e){super(),De(this,e,kb,yb,Se,{},null,[-1,-1])}}function Sb(r){let e,t;return e=new Us({props:{routes:{"*":hg}}}),{c(){Q(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Tb(r){let e,t,n,s;return e=new Bl({}),n=new Us({props:{routes:{"/":Zp,"/book/:bookID":La,"/author/:authorID":Ya,"/publisher/:publisherID":Na,"/search":Cr,"/search/author":Cr,"/search/publisher":Cr,"/add-book":Op,"/add-author":Bg,"/add-publisher":xg,"/borrow":Sg,"/return":Ig,"/book-report":Xg,"/payment-report":rb,"/student-report":ub,"/reports":db,"/update-book":$b,"*":_i}}}),{c(){Q(e.$$.fragment),t=b(),Q(n.$$.fragment)},m(i,o){K(e,i,o),M(i,t,o),K(n,i,o),s=!0},i(i){s||(E(e.$$.fragment,i),E(n.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),A(n.$$.fragment,i),s=!1},d(i){i&&O(t),Z(e,i),Z(n,i)}}}function Db(r){let e,t,n,s;return e=new Bl({}),n=new Us({props:{routes:{"/":Im,"/book/:bookID":La,"/author/:authorID":Ya,"/publisher/:publisherID":Na,"/search":Cr,"/search/author":Cr,"/search/publisher":Cr,"*":_i}}}),{c(){Q(e.$$.fragment),t=b(),Q(n.$$.fragment)},m(i,o){K(e,i,o),M(i,t,o),K(n,i,o),s=!0},i(i){s||(E(e.$$.fragment,i),E(n.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),A(n.$$.fragment,i),s=!1},d(i){i&&O(t),Z(e,i),Z(n,i)}}}function Ob(r){let e,t,n,s;const i=[Db,Tb,Sb],o=[];function l(a,f){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=ze()},m(a,f){o[e].m(a,f),M(a,n,f),s=!0},p(a,[f]){let d=e;e=l(a),e!==d&&(Ie(),A(o[d],1,1,()=>{o[d]=null}),Le(),t=o[e],t||(t=o[e]=i[e](a),t.c()),E(t,1),t.m(n.parentNode,n))},i(a){s||(E(t),s=!0)},o(a){A(t),s=!1},d(a){a&&O(n),o[e].d(a)}}}function Cb(r,e,t){let n;return Qt.subscribe(s=>{t(0,n=s)}),[n]}class Mb extends Oe{constructor(e){super(),De(this,e,Cb,Ob,Se,{})}}new Mb({target:document.getElementById("app")})});export default Pb();
