var Ca=Object.defineProperty;var Pa=(t,e,s)=>e in t?Ca(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ja=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Sr=(t,e,s)=>(Pa(t,typeof e!="symbol"?e+"":e,s),s);var Mp=ja((Pp,Zs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function P(){}const tn=t=>t;function Ss(t,e){for(const s in e)t[s]=e[s];return t}function Ra(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function ro(t){return t()}function zn(){return Object.create(null)}function $e(t){t.forEach(ro)}function js(t){return typeof t=="function"}function be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Us;function We(t,e){return t===e?!0:(Us||(Us=document.createElement("a")),Us.href=e,t===Us.href)}function Aa(t){return Object.keys(t).length===0}function no(t,...e){if(t==null){for(const r of e)r(void 0);return P}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function io(t,e,s){t.$$.on_destroy.push(no(e,s))}function sn(t,e,s,r){if(t){const n=oo(t,e,s,r);return t[0](n)}}function oo(t,e,s,r){return t[1]&&r?Ss(s.ctx.slice(),t[1](r(e))):s.ctx}function rn(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function nn(t,e,s,r,n,i){if(n){const o=oo(e,s,r,i);t.p(o,n)}}function on(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}function Gn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const ao=typeof window<"u";let lo=ao?()=>window.performance.now():()=>Date.now(),an=ao?t=>requestAnimationFrame(t):P;const Qt=new Set;function co(t){Qt.forEach(e=>{e.c(t)||(Qt.delete(e),e.f())}),Qt.size!==0&&an(co)}function uo(t){let e;return Qt.size===0&&an(co),{promise:new Promise(s=>{Qt.add(e={c:t,f:s})}),abort(){Qt.delete(e)}}}function h(t,e){t.appendChild(e)}function ho(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ia(t){const e=_("style");return e.textContent="/* empty */",Ya(ho(t),e),e.sheet}function Ya(t,e){return h(t.head||t,e),e.sheet}function C(t,e,s){t.insertBefore(e,s||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Xe(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function _(t){return document.createElement(t)}function se(t){return document.createTextNode(t)}function y(){return se(" ")}function ze(){return se("")}function q(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function La(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function lr(t){return t===""?null:+t}function Na(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.data!==e&&(t.data=e)}function G(t,e){t.value=e??""}function cs(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function Jn(t,e,s){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}(!s||e!==void 0)&&(t.selectedIndex=-1)}function Ua(t){const e=t.querySelector(":checked");return e&&e.__value}function fo(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function Qs(t,e){return new t(e)}const Xs=new Map;let er=0;function xa(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function Fa(t,e){const s={stylesheet:Ia(e),rules:{}};return Xs.set(t,s),s}function Lr(t,e,s,r,n,i,o,l=0){const a=16.666/r;let c=`{
`;for(let v=0;v<=1;v+=a){const w=e+(s-e)*i(v);c+=v*100+`%{${o(w,1-w)}}
`}const u=c+`100% {${o(s,1-s)}}
}`,f=`__svelte_${xa(u)}_${l}`,m=ho(t),{stylesheet:g,rules:p}=Xs.get(m)||Fa(m,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${r}ms linear ${n}ms 1 both`,er+=1,f}function Nr(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),er-=n,er||Ha())}function Ha(){an(()=>{er||(Xs.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),Xs.clear())})}let Os;function _t(t){Os=t}function Rs(){if(!Os)throw new Error("Function called outside component initialization");return Os}function Ts(t){Rs().$$.on_mount.push(t)}function Wa(t){Rs().$$.after_update.push(t)}function qa(t){Rs().$$.on_destroy.push(t)}function Ba(){const t=Rs();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=fo(e,s,{cancelable:r});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Ur(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const Gt=[],os=[];let Xt=[];const Kn=[],_o=Promise.resolve();let xr=!1;function mo(){xr||(xr=!0,_o.then(cn))}function ln(){return mo(),_o}function Le(t){Xt.push(t)}const Or=new Set;let Ht=0;function cn(){if(Ht!==0)return;const t=Os;do{try{for(;Ht<Gt.length;){const e=Gt[Ht];Ht++,_t(e),Va(e.$$)}}catch(e){throw Gt.length=0,Ht=0,e}for(_t(null),Gt.length=0,Ht=0;os.length;)os.pop()();for(let e=0;e<Xt.length;e+=1){const s=Xt[e];Or.has(s)||(Or.add(s),s())}Xt.length=0}while(Gt.length);for(;Kn.length;)Kn.pop()();xr=!1,Or.clear(),_t(t)}function Va(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function za(t){const e=[],s=[];Xt.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),Xt=e}let _s;function po(){return _s||(_s=Promise.resolve(),_s.then(()=>{_s=null})),_s}function vs(t,e,s){t.dispatchEvent(fo(`${e?"intro":"outro"}${s}`))}const Bs=new Set;let mt;function Me(){mt={r:0,c:[],p:mt}}function Ee(){mt.r||$e(mt.c),mt=mt.p}function S(t,e){t&&t.i&&(Bs.delete(t),t.i(e))}function T(t,e,s,r){if(t&&t.o){if(Bs.has(t))return;Bs.add(t),mt.c.push(()=>{Bs.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const go={duration:0};function Ge(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,o,l,a=0;function c(){o&&Nr(t,o)}function u(){const{delay:m=0,duration:g=300,easing:p=tn,tick:b=P,css:v}=n||go;v&&(o=Lr(t,0,1,g,m,p,v,a++)),b(0,1);const w=lo()+m,$=w+g;l&&l.abort(),i=!0,Le(()=>vs(t,!0,"start")),l=uo(O=>{if(i){if(O>=$)return b(1,0),vs(t,!0,"end"),c(),i=!1;if(O>=w){const M=p((O-w)/g);b(M,1-M)}}return i})}let f=!1;return{start(){f||(f=!0,Nr(t),js(n)?(n=n(r),po().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Zn(t,e,s,r){let i=e(t,s,{direction:"both"}),o=r?0:1,l=null,a=null,c=null,u;function f(){c&&Nr(t,c)}function m(p,b){const v=p.b-o;return b*=Math.abs(v),{a:o,b:p.b,d:v,duration:b,start:p.start,end:p.start+b,group:p.group}}function g(p){const{delay:b=0,duration:v=300,easing:w=tn,tick:$=P,css:O}=i||go,M={start:lo()+b,b:p};p||(M.group=mt,mt.r+=1),"inert"in t&&(p?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),l||a?a=M:(O&&(f(),c=Lr(t,o,p,v,b,w,O)),p&&$(0,1),l=m(M,v),Le(()=>vs(t,p,"start")),uo(k=>{if(a&&k>a.start&&(l=m(a,v),a=null,vs(t,l.b,"start"),O&&(f(),c=Lr(t,o,l.b,l.duration,0,w,i.css))),l){if(k>=l.end)$(o=l.b,1-o),vs(t,l.b,"end"),a||(l.b?f():--l.group.r||$e(l.group.c)),l=null;else if(k>=l.start){const D=k-l.start;o=l.a+l.d*w(D/l.duration),$(o,1-o)}}return!!(l||a)}))}return{run(p){js(i)?po().then(()=>{i=i({direction:p?"in":"out"}),g(p)}):g(p)},end(){f(),l=a=null}}}function Vs(t,e){const s=e.token={};function r(n,i,o,l){if(e.token!==s)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,m)=>{m!==i&&f&&(Me(),T(f,1,1,()=>{e.blocks[m]===f&&(e.blocks[m]=null)}),Ee())}):e.block.d(1),c.c(),S(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&cn()}if(Ra(t)){const n=Rs();if(t.then(i=>{_t(n),r(e.then,1,e.value,i),_t(null)},i=>{if(_t(n),r(e.catch,2,e.error,i),_t(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function zs(t,e,s){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,s)}function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function tr(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const a in o)a in l||(r[a]=1);for(const a in l)n[a]||(s[a]=l[a],n[a]=1);t[i]=l}else for(const a in o)n[a]=1}for(const o in r)o in s||(s[o]=void 0);return s}function sr(t){return typeof t=="object"&&t!==null?t:{}}function U(t){t&&t.c()}function L(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),Le(()=>{const i=t.$$.on_mount.map(ro).filter(js);t.$$.on_destroy?t.$$.on_destroy.push(...i):$e(i),t.$$.on_mount=[]}),n.forEach(Le)}function N(t,e){const s=t.$$;s.fragment!==null&&(za(s.after_update),$e(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Ga(t,e){t.$$.dirty[0]===-1&&(Gt.push(t),mo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,s,r,n,i,o=null,l=[-1]){const a=Os;_t(t);const c=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:n,bound:zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:zn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(f,m,...g)=>{const p=g.length?g[0]:m;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&Ga(t,f)),m}):[],c.update(),u=!0,$e(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=Na(e.target);c.fragment&&c.fragment.l(f),f.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&S(t.$$.fragment),L(t,e.target,e.anchor),cn()}_t(a)}class we{constructor(){Sr(this,"$$");Sr(this,"$$set")}$destroy(){N(this,1),this.$destroy=P}$on(e,s){if(!js(s))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Aa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ja="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ja);const Wt=[];function bo(t,e){return{subscribe:cr(t,e).subscribe}}function cr(t,e=P){let s;const r=new Set;function n(l){if(be(t,l)&&(t=l,s)){const a=!Wt.length;for(const c of r)c[1](),Wt.push(c,t);if(a){for(let c=0;c<Wt.length;c+=2)Wt[c][0](Wt[c+1]);Wt.length=0}}}function i(l){n(l(t))}function o(l,a=P){const c=[l,a];return r.add(c),r.size===1&&(s=e(n,i)||P),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:o}}function vo(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return bo(s,(o,l)=>{let a=!1;const c=[];let u=0,f=P;const m=()=>{if(u)return;f();const p=e(r?c[0]:c,o,l);i?o(p):f=js(p)?p:P},g=n.map((p,b)=>no(p,v=>{c[b]=v,u&=~(1<<b),a&&m()},()=>{u|=1<<b}));return a=!0,m(),function(){$e(g),f(),a=!1}})}const Pt=cr(localStorage.getItem("accType")),es=cr(localStorage.getItem("user_id"));window.addEventListener("storage",function(t){let e;es.subscribe(s=>e=s),localStorage.getItem("user_id")!=e&&(localStorage.getItem("user_id")==""?(Pt.set(""),es.set("")):(es.set(localStorage.getItem("user_id")),Pt.set(localStorage.getItem("accType"))))});function Ka(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,o=[],l="",a=t.split("/");for(a[0]||a.shift();n=a.shift();)s=n[0],s==="*"?(o.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),o.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Za(t){let e,s,r;const n=[t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Ss(c,n[u]);return a!==void 0&&a&4&&(c=Ss(c,tr(n,[sr(l[2])]))),{props:c}}return i&&(e=Qs(i,o(t)),e.$on("routeEvent",t[7])),{c(){e&&U(e.$$.fragment),s=ze()},m(l,a){e&&L(e,l,a),C(l,s,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Me();const c=e;T(c.$$.fragment,1,0,()=>{N(c,1)}),Ee()}i?(e=Qs(i,o(l,a)),e.$on("routeEvent",l[7]),U(e.$$.fragment),S(e.$$.fragment,1),L(e,s.parentNode,s)):e=null}else if(i){const c=a&4?tr(n,[sr(l[2])]):{};e.$set(c)}},i(l){r||(e&&S(e.$$.fragment,l),r=!0)},o(l){e&&T(e.$$.fragment,l),r=!1},d(l){l&&E(s),e&&N(e,l)}}}function Qa(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function o(l,a){let c={};for(let u=0;u<n.length;u+=1)c=Ss(c,n[u]);return a!==void 0&&a&6&&(c=Ss(c,tr(n,[a&2&&{params:l[1]},a&4&&sr(l[2])]))),{props:c}}return i&&(e=Qs(i,o(t)),e.$on("routeEvent",t[6])),{c(){e&&U(e.$$.fragment),s=ze()},m(l,a){e&&L(e,l,a),C(l,s,a),r=!0},p(l,a){if(a&1&&i!==(i=l[0])){if(e){Me();const c=e;T(c.$$.fragment,1,0,()=>{N(c,1)}),Ee()}i?(e=Qs(i,o(l,a)),e.$on("routeEvent",l[6]),U(e.$$.fragment),S(e.$$.fragment,1),L(e,s.parentNode,s)):e=null}else if(i){const c=a&6?tr(n,[a&2&&{params:l[1]},a&4&&sr(l[2])]):{};e.$set(c)}},i(l){r||(e&&S(e.$$.fragment,l),r=!0)},o(l){e&&T(e.$$.fragment,l),r=!1},d(l){l&&E(s),e&&N(e,l)}}}function Xa(t){let e,s,r,n;const i=[Qa,Za],o=[];function l(a,c){return a[1]?0:1}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function Qn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const un=bo(null,function(e){e(Qn());const s=()=>{e(Qn())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),el=vo(un,t=>t.location),tl=vo(un,t=>t.querystring),Xn=cr(void 0);async function sl(){await ln(),window.history.back()}async function rl(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await ln();const e=(t.charAt(0)=="#"?"":"#")+t;try{const s={...history.state};delete s.__svelte_spa_router_scrollX,delete s.__svelte_spa_router_scrollY,window.history.replaceState(s,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function nl(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function il(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class o{constructor(k,D){if(!D||typeof D!="function"&&(typeof D!="object"||D._sveltesparouter!==!0))throw Error("Invalid component object");if(!k||typeof k=="string"&&(k.length<1||k.charAt(0)!="/"&&k.charAt(0)!="*")||typeof k=="object"&&!(k instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:F,keys:x}=Ka(k);this.path=k,typeof D=="object"&&D._sveltesparouter===!0?(this.component=D.component,this.conditions=D.conditions||[],this.userData=D.userData,this.props=D.props||{}):(this.component=()=>Promise.resolve(D),this.conditions=[],this.props={}),this._pattern=F,this._keys=x}match(k){if(n){if(typeof n=="string")if(k.startsWith(n))k=k.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const H=k.match(n);if(H&&H[0])k=k.substr(H[0].length)||"/";else return null}}const D=this._pattern.exec(k);if(D===null)return null;if(this._keys===!1)return D;const F={};let x=0;for(;x<this._keys.length;){try{F[this._keys[x]]=decodeURIComponent(D[x+1]||"")||null}catch{F[this._keys[x]]=null}x++}return F}async checkConditions(k){for(let D=0;D<this.conditions.length;D++)if(!await this.conditions[D](k))return!1;return!0}}const l=[];r instanceof Map?r.forEach((M,k)=>{l.push(new o(k,M))}):Object.keys(r).forEach(M=>{l.push(new o(M,r[M]))});let a=null,c=null,u={};const f=Ba();async function m(M,k){await ln(),f(M,k)}let g=null,p=null;i&&(p=M=>{M.state&&(M.state.__svelte_spa_router_scrollY||M.state.__svelte_spa_router_scrollX)?g=M.state:g=null},window.addEventListener("popstate",p),Wa(()=>{nl(g)}));let b=null,v=null;const w=un.subscribe(async M=>{b=M;let k=0;for(;k<l.length;){const D=l[k].match(M.location);if(!D){k++;continue}const F={route:l[k].path,location:M.location,querystring:M.querystring,userData:l[k].userData,params:D&&typeof D=="object"&&Object.keys(D).length?D:null};if(!await l[k].checkConditions(F)){s(0,a=null),v=null,m("conditionsFailed",F);return}m("routeLoading",Object.assign({},F));const x=l[k].component;if(v!=x){x.loading?(s(0,a=x.loading),v=x,s(1,c=x.loadingParams),s(2,u={}),m("routeLoaded",Object.assign({},F,{component:a,name:a.name,params:c}))):(s(0,a=null),v=null);const H=await x();if(M!=b)return;s(0,a=H&&H.default||H),v=x}D&&typeof D=="object"&&Object.keys(D).length?s(1,c=D):s(1,c=null),s(2,u=l[k].props),m("routeLoaded",Object.assign({},F,{component:a,name:a.name,params:c})).then(()=>{Xn.set(c)});return}s(0,a=null),v=null,Xn.set(void 0)});qa(()=>{w(),p&&window.removeEventListener("popstate",p)});function $(M){Ur.call(this,t,M)}function O(M){Ur.call(this,t,M)}return t.$$set=M=>{"routes"in M&&s(3,r=M.routes),"prefix"in M&&s(4,n=M.prefix),"restoreScrollState"in M&&s(5,i=M.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[a,c,u,r,n,i,$,O]}class dn extends we{constructor(e){super(),ve(this,e,il,Xa,be,{routes:3,prefix:4,restoreScrollState:5})}}const ol="modulepreload",al=function(t){return"/library/"+t},ei={},as=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=al(l),l in ei)return;ei[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ol,a||(u.as="script",u.crossOrigin=""),u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),a)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},ll=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>As),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class hn extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class cl extends hn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ul extends hn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dl extends hn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fr||(Fr={}));var hl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class fl{constructor(e,{headers:s={},customFetch:r,region:n=Fr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=ll(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return hl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let l={},{region:a}=s;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new cl(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new ul(u);if(!u.ok)throw new dl(u);let m=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var _l=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ls=_l();const ml=ls.fetch,fn=ls.fetch.bind(ls),wo=ls.Headers,pl=ls.Request,gl=ls.Response,As=Object.freeze(Object.defineProperty({__proto__:null,Headers:wo,Request:pl,Response:gl,default:fn,fetch:ml},Symbol.toStringTag,{value:"Module"}));class bl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class vl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,f=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,g="OK")}catch{i.status===404&&b===""?(m=204,g="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new bl(c)}return{error:c,data:u,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class wl extends vl{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Jt extends wl{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class yl{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Jt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Jt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Jt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const kl="1.15.2",$l={"X-Client-Info":`postgrest-js/${kl}`};class _n{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},$l),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new yl(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||n?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(o="POST",a=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Jt({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const Sl="2.9.5",Ol={"X-Client-Info":`realtime-js/${Sl}`},Tl="1.0.0",yo=1e4,Dl=1e3;var ts;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ts||(ts={}));var Ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ve||(Ve={}));var rt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rt||(rt={}));var Hr;(function(t){t.websocket="websocket"})(Hr||(Hr={}));var Lt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lt||(Lt={}));class ko{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ml{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+n));o=o+n;const a=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Tr{constructor(e,s,r={},n=yo){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ti;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ti||(ti={}));class ws{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ws.syncState(this.state,n,i,o),this.pendingDiffs.forEach(a=>{this.state=ws.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ws.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const m=u.map(v=>v.presence_ref),g=f.map(v=>v.presence_ref),p=u.filter(v=>g.indexOf(v.presence_ref)<0),b=f.filter(v=>m.indexOf(v.presence_ref)<0);p.length>0&&(l[c]=p),b.length>0&&(a[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const f=e[l].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...m)}r(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,a),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ke||(ke={}));const si=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=El(o,t,e,n),i),{})},El=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?$o(i,o):Wr(o)},$o=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Rl(e,s)}switch(t){case ke.bool:return Cl(e);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return Pl(e);case ke.json:case ke.jsonb:return jl(e);case ke.timestamp:return Al(e);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Wr(e);default:return Wr(e)}},Wr=t=>t,Cl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Pl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},jl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>$o(e,l))}return t},Al=t=>typeof t=="string"?t.replace(" ","T"):t;var ri;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ri||(ri={}));var ni;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(ni||(ni={}));var ii;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ii||(ii={}));class mn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new Tr(this,rt.join,this.params,this.timeout),this.rejoinTimer=new ko(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ws(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,m=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<m;p++){const b=f[p],{filter:{event:v,schema:w,table:$,filter:O}}=b,M=c&&c[p];if(M&&M.event===v&&M.schema===w&&M.table===$&&M.filter===O)g.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ve.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Tr(this,rt.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Tr(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=rt;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,s,r);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,b,v;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(b=g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,b,v,w,$,O;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const M=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return M&&((b=s.ids)===null||b===void 0?void 0:b.includes(M))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const M=($=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return M==="*"||M===((O=s==null?void 0:s.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:v,commit_timestamp:w,type:$,errors:O}=p;m=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:w,eventType:$,new:{},old:{},errors:O}),this._getPayloadRecords(p))}g.callback(m,r)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&mn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rt.close,{},e)}_onError(e){this._on(rt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=si(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=si(e.columns,e.old_record)),s}}const Il=()=>{},Yl=typeof WebSocket<"u";class Ll{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Ol,this.params={},this.timeout=yo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Il,this.conn=null,this.sendBuffer=[],this.serializer=new Ml,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>as(()=>Promise.resolve().then(()=>As),void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Hr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ko(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Yl){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Nl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),as(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return Lt.Connecting;case ts.open:return Lt.Open;case ts.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}channel(e,s={config:{}}){const r=new mn(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(rt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tl}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;(o&&o===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(rt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Dl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Nl{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ts.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ul extends pn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class oi extends pn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var xl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const So=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>As),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Fl=()=>xl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>As),void 0)).Response:Response});var us=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hl=(t,e)=>us(void 0,void 0,void 0,function*(){const s=yield Fl();t instanceof s?t.json().then(r=>{e(new Ul(Dr(r),t.status||500))}).catch(r=>{e(new oi(Dr(r),r))}):e(new oi(Dr(t),t))}),Wl=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function ur(t,e,s,r,n,i){return us(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Wl(e,r,n,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Hl(a,l))})})}function qr(t,e,s,r){return us(this,void 0,void 0,function*(){return ur(t,"GET",e,s,r)})}function Ot(t,e,s,r,n){return us(this,void 0,void 0,function*(){return ur(t,"POST",e,r,n,s)})}function ql(t,e,s,r,n){return us(this,void 0,void 0,function*(){return ur(t,"PUT",e,r,n,s)})}function Oo(t,e,s,r,n){return us(this,void 0,void 0,function*(){return ur(t,"DELETE",e,r,n,s)})}var Ze=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Bl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ai={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vl{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=So(n)}uploadOrUpdate(e,s,r,n){return Ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ai),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(s),c=this._getFinalPath(a),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield u.json();return u.ok?{data:{path:a,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let a;const c=Object.assign({upsert:ai.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Ue(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield Ot(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new pn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}update(e,s,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}copy(e,s){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ot(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Ze(this,void 0,void 0,function*(){try{const n=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}download(e,s){return Ze(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield qr(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}list(e,s,r){return Ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Bl),s),{prefix:e||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const zl="2.5.5",Gl={"X-Client-Info":`storage-js/${zl}`};var qt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class Jl{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Gl),s),this.fetch=So(r)}listBuckets(){return qt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return qt(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return qt(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}deleteBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}}class Kl extends Jl{constructor(e,s={},r){super(e,s,r)}from(e){return new Vl(this.url,this.headers,e,this.fetch)}}const Zl="2.43.2";let bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";const Ql={"X-Client-Info":`supabase-js-${bs}/${Zl}`},Xl={headers:Ql},ec={schema:"public"},tc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sc={};var rc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const nc=t=>{let e;return t?e=t:typeof fetch>"u"?e=fn:e=fetch,(...s)=>e(...s)},ic=()=>typeof Headers>"u"?wo:Headers,oc=(t,e,s)=>{const r=nc(s),n=ic();return(i,o)=>rc(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function ac(t){return t.replace(/\/$/,"")}function lc(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),n),global:Object.assign(Object.assign({},c),i)}}const To="2.64.2",cc="http://localhost:9999",uc="supabase.auth.token",dc={"X-Client-Info":`gotrue-js/${To}`},li=10,Br="X-Supabase-Api-Version",Do={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function hc(t){return Math.round(Date.now()/1e3)+t}function fc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const st=()=>typeof document<"u",Rt={tested:!1,writable:!1},ys=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rt.tested)return Rt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Rt.tested=!0,Rt.writable=!0}catch{Rt.tested=!0,Rt.writable=!1}return Rt.writable};function Mr(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const Mo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>as(()=>Promise.resolve().then(()=>As),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},_c=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Eo=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},xs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Er=async(t,e)=>{await t.removeItem(e)};function mc(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,o,l,a,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|l>>4,n=(l&15)<<4|a>>2,i=(a&3)<<6|c,s=s+String.fromCharCode(r),a!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class dr{constructor(){this.promise=new dr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}dr.promiseConstructor=Promise;function ci(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(mc(r))}async function pc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gc(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function bc(t){return("0"+t.toString(16)).substr(-2)}function vc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,bc).join("")}async function wc(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function yc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await wc(t);return yc(s)}async function Bt(t,e,s=!1){const r=vc();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await Eo(t,`${e}-code-verifier`,n);const i=await kc(r);return[i,r===i?"plain":"s256"]}const $c=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sc(t){const e=t.headers.get(Br);if(!e||!e.match($c))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class gn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Oc extends gn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Tc(t){return ae(t)&&t.name==="AuthApiError"}class Co extends gn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xt extends gn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class At extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Cr extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fs extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hs extends xt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ui extends xt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vr extends xt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Pr(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class di extends xt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var Dc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Yt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Mc=[502,503,504];async function hi(t){var e;if(!_c(t))throw new Vr(Yt(t),0);if(Mc.includes(t.status))throw new Vr(Yt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Co(Yt(i),i)}let r;const n=Sc(t);if(n&&n.getTime()>=Do["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new di(Yt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new di(Yt(s),t.status,s.weak_password.reasons);throw new Oc(Yt(s),t.status||500,r)}const Ec=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function de(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Br]||(i[Br]=Do["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await Cc(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function Cc(t,e,s,r,n,i){const o=Ec(e,r,n,i);let l;try{l=await t(s,Object.assign({},o))}catch(a){throw console.error(a),new Vr(Yt(a),0)}if(l.ok||await hi(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await hi(a)}}function St(t){var e;let s=null;Ac(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=hc(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function fi(t){const e=St(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Tt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Pc(t){return{data:t,error:null}}function jc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Dc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Rc(t){return t}function Ac(t){return t.access_token&&t.refresh_token&&t.expires_in}var Ic=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class Yc{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Mo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Tt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Ic(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:jc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ae(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Rc});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return g.length>0&&(g.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=b}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tt})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Tt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Tt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}}const Lc={getItem:t=>ys()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ys()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ys()&&globalThis.localStorage.removeItem(t)}};function _i(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Nc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&ys()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Po extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Uc extends Po{}async function xc(t,e,s){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Uc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Nc();const Fc={url:cc,storageKey:uc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ms=30*1e3,mi=3;async function pi(t,e,s){return await s()}class Ds{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Fc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Yc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Mo(n.fetch),this.lock=n.lock||pi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:st()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=xc:this.lock=pi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ys()?this.storage=Lc:(this.memoryStorage={},this.storage=_i(this.memoryStorage)):(this.memoryStorage={},this.storage=_i(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${To}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=st()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ae(e)?{error:e}:{error:new Co("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:St}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Bt(this.storage,this.storageKey)),i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},xform:St})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:St})}else throw new Fs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fi})}else throw new Fs("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Cr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await xs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:o}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:St});return await Er(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Cr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,l=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:St}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Cr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Bt(this.storage,this.storageKey));const{error:f}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Fs("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:St});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Bt(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Pc})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new At;const{error:n}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await de(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:l}=await de(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Fs("You must provide either an email or phone number and a type")}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const o=this.suppressGetSessionWarning;e=new Proxy(e,{get(a,c,u){return!o&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new At}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Tt})})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new At;const o=n.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Bt(this.storage,this.storageKey));const{data:c,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Tt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return ci(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new At;const s=Date.now()/1e3;let r=s,n=!0,i=null;const o=ci(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ae(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!st())throw new Hs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Hs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ui("Not a valid PKCE flow url.");const s=Mr(window.location.href);if(e){if(!s.code)throw new ui("No code detected.");const{data:$,error:O}=await this._exchangeCodeForSession(s.code);if(O)throw O;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:$.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new Hs(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=s;if(!i||!l||!o||!c)throw new Hs("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;a&&(m=parseInt(a));const g=m-u;g*1e3<=ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=m-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,m,u);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const w={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:s.type},error:null}}catch(s){if(ae(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Mr(window.location.href);return!!(st()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Mr(window.location.href),s=await xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Tc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Er(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=fc(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Bt(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,l,a,c,u;const{data:f,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return st()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ae(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await gc(async n=>(n>0&&await pc(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:St})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Pr(i)&&Date.now()+o-r<ms})}catch(r){if(this._debug(s,"error",r),ae(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),st()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await xs(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+li;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${li}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Pr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new At;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new dr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new At;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),ae(i)){const o={session:null,error:i};return Pr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Eo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Er(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ms);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ms}ms, refresh threshold is ${mi} ticks`),n<=mi&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Po)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Bt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:l,error:a}=await de(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}Ds.nextInstanceID=0;const Hc=Ds;class Wc extends Hc{constructor(e){super(e)}}var qc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(f){o(f)}}function a(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class Bc{constructor(e,s,r){var n,i,o,l,a,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=ac(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:ec,realtime:sc,auth:Object.assign(Object.assign({},tc),{storageKey:g}),global:Xl},b=lc(r??{},p);this.storageKey=(i=(n=b.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=b.auth)!==null&&a!==void 0?a:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=oc(s,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new _n(`${m}/rest/v1`,{headers:this.headers,schema:(f=b.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new fl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Kl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return qc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,debug:l},a,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wc({url:this.authUrl,headers:Object.assign(Object.assign({},f),a),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Ll(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Vc=(t,e,s)=>new Bc(t,e,s),oe=Vc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function gi(t){let e;return{c(){e=_("a"),e.textContent="Add book",d(e,"class","nav-link svelte-kdejnj"),d(e,"href","./#/add-book")},m(s,r){C(s,e,r)},d(s){s&&E(e)}}}function zc(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W,R,J,ne,Q,ie,X=t[0]=="staff"&&gi();return{c(){e=_("nav"),s=_("div"),r=_("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=y(),i=_("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',o=y(),l=_("div"),a=_("div"),c=_("a"),c.textContent="Books",u=y(),f=_("a"),f.textContent="Authors",m=y(),g=_("a"),g.textContent="Publishers",p=y(),X&&X.c(),b=y(),v=_("li"),w=_("a"),$=_("i"),O=y(),M=se(t[1]),k=y(),D=_("ul"),F=_("li"),F.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Profile</a>',x=y(),H=_("li"),H.innerHTML='<a class="dropdown-item disabled svelte-kdejnj" href="#">Settings</a>',j=y(),I=_("li"),I.innerHTML='<hr class="dropdown-divider"/>',V=y(),K=_("li"),ee=_("a"),ee.textContent="Log Out",W=y(),R=_("button"),J=_("span"),d(r,"class","navbar-brand m-0 px-2 svelte-kdejnj"),d(r,"href","./#/"),d(i,"class","navbar-toggler"),d(i,"type","button"),d(i,"data-bs-toggle","collapse"),d(i,"data-bs-target","#navbarContent"),d(c,"class","nav-link svelte-kdejnj"),d(c,"href","./#/search"),d(f,"class","nav-link svelte-kdejnj"),d(f,"href","./#/search/author"),d(g,"class","nav-link svelte-kdejnj"),d(g,"href","./#/search/publisher"),d($,"class","bi bi-person-fill"),d(w,"class","nav-link dropdown-toggle svelte-kdejnj"),d(w,"href","#"),d(w,"role","button"),d(w,"data-bs-toggle","dropdown"),d(w,"aria-expanded","false"),d(ee,"class","dropdown-item text-danger svelte-kdejnj"),d(ee,"href","./#/"),d(D,"class","dropdown-menu"),d(v,"class","nav-item dropdown"),d(J,"class",ne="bi bi-"+t[2]+" svelte-kdejnj"),d(R,"title","Switch theme"),d(R,"class","px-1 border-0 bg-transparent nav-link svelte-kdejnj"),d(a,"class","navbar-nav ms-auto text-center svelte-kdejnj"),d(l,"class","collapse navbar-collapse"),d(l,"id","navbarContent"),d(s,"class","container px-4 fw-semibold"),d(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(he,Ae){C(he,e,Ae),h(e,s),h(s,r),h(s,n),h(s,i),h(s,o),h(s,l),h(l,a),h(a,c),h(a,u),h(a,f),h(a,m),h(a,g),h(a,p),X&&X.m(a,null),h(a,b),h(a,v),h(v,w),h(w,$),h(w,O),h(w,M),h(v,k),h(v,D),h(D,F),h(D,x),h(D,H),h(D,j),h(D,I),h(D,V),h(D,K),h(K,ee),h(a,W),h(a,R),h(R,J),Q||(ie=[q(ee,"click",t[4]),q(R,"click",t[3])],Q=!0)},p(he,[Ae]){he[0]=="staff"?X||(X=gi(),X.c(),X.m(a,b)):X&&(X.d(1),X=null),Ae&2&&ge(M,he[1]),Ae&4&&ne!==(ne="bi bi-"+he[2]+" svelte-kdejnj")&&d(J,"class",ne)},i:P,o:P,d(he){he&&E(e),X&&X.d(),Q=!1,$e(ie)}}}function Gc(t,e,s){let r,n,i;Pt.subscribe(f=>s(0,n=f)),es.subscribe(f=>i=f);let o;async function l(){const{data:f,error:m}=await oe.from("account_details").select("lname").eq("user_id",i).single();m&&console.error(m),s(1,o=f.lname)}l();let a=localStorage.getItem("theme")||"light";function c(){s(5,a=a=="light"?"dark":"light"),localStorage.setItem("theme",a)}function u(){Pt.set(""),es.set(""),localStorage.removeItem("accType"),localStorage.removeItem("user_id")}return t.$$.update=()=>{t.$$.dirty&32&&document.querySelector("body").setAttribute("data-bs-theme",a),t.$$.dirty&32&&s(2,r=a=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,o,r,c,u,a]}class jo extends we{constructor(e){super(),ve(this,e,Gc,zc,be,{})}}function Jc(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$;return{c(){e=_("section"),s=_("div"),r=_("div"),n=_("div"),i=_("img"),l=y(),a=_("div"),c=_("img"),f=y(),m=_("div"),g=_("img"),b=y(),v=_("button"),v.innerHTML='<span class="carousel-control-prev-icon"></span>',w=y(),$=_("button"),$.innerHTML='<span class="carousel-control-next-icon"></span>',We(i.src,o=jr)||d(i,"src",o),d(i,"class","d-block w-100"),d(i,"alt","..."),d(n,"class","carousel-item active"),We(c.src,u=jr)||d(c,"src",u),d(c,"class","d-block w-100"),d(c,"alt","..."),d(a,"class","carousel-item"),We(g.src,p=jr)||d(g,"src",p),d(g,"class","d-block w-100"),d(g,"alt","..."),d(m,"class","carousel-item"),d(r,"class","carousel-inner"),d(v,"class","carousel-control-prev"),d(v,"type","button"),d(v,"data-bs-target","#homeAdCarousel"),d(v,"data-bs-slide","prev"),d($,"class","carousel-control-next"),d($,"type","button"),d($,"data-bs-target","#homeAdCarousel"),d($,"data-bs-slide","next"),d(s,"id","homeAdCarousel"),d(s,"class","carousel slide"),d(s,"data-bs-ride","carousel"),d(s,"data-bs-interval","8000")},m(O,M){C(O,e,M),h(e,s),h(s,r),h(r,n),h(n,i),h(r,l),h(r,a),h(a,c),h(r,f),h(r,m),h(m,g),h(s,b),h(s,v),h(s,w),h(s,$)},p:P,i:P,o:P,d(O){O&&E(e)}}}let jr="./cover.jpg";class Kc extends we{constructor(e){super(),ve(this,e,null,Jc,be,{})}}function Zc(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p;return{c(){e=_("div"),s=_("img"),n=y(),i=_("div"),o=_("h5"),l=_("a"),a=se(t[1]),u=y(),f=_("small"),m=_("i"),g=y(),p=se(t[2]),We(s.src,r=t[3])||d(s,"src",r),d(s,"alt","book cover"),d(s,"class","svelte-1a99e4f"),d(l,"class","stretched-link svelte-1a99e4f"),d(l,"href",c="./#/book/"+t[0]),d(o,"class","card-title"),d(m,"class","bi bi-person"),d(f,"class","card-text"),d(i,"class","card-body"),d(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(b,v){C(b,e,v),h(e,s),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a),h(i,u),h(i,f),h(f,m),h(f,g),h(f,p)},p(b,[v]){v&2&&ge(a,b[1]),v&1&&c!==(c="./#/book/"+b[0])&&d(l,"href",c),v&4&&ge(p,b[2])},i:P,o:P,d(b){b&&E(e)}}}function Qc(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e,o=r>4?"./book-cover.png":`./${r}.jpg`;return t.$$set=l=>{"id"in l&&s(0,r=l.id),"title"in l&&s(1,n=l.title),"author"in l&&s(2,i=l.author)},[r,n,i,o]}class hr extends we{constructor(e){super(),ve(this,e,Qc,Zc,be,{id:0,title:1,author:2})}}function bi(t){let e,s,r,n,i,o,l;return{c(){e=_("div"),s=_("a"),r=_("button"),n=se(t[3]),i=y(),o=_("i"),d(o,"class","bi bi-arrow-right"),d(r,"class","btn btn-outline-primary btn-sm"),d(s,"href",l="./#/"+t[2]),d(e,"class","align-middle align-self-center")},m(a,c){C(a,e,c),h(e,s),h(s,r),h(r,n),h(r,i),h(r,o)},p(a,c){c&8&&ge(n,a[3]),c&4&&l!==(l="./#/"+a[2])&&d(s,"href",l)},d(a){a&&E(e)}}}function Xc(t){let e,s,r,n,i,o,l,a,c,u,f=t[2]!==""&&bi(t);const m=t[5].default,g=sn(m,t,t[4],null);return{c(){e=_("section"),s=_("div"),r=_("h4"),n=_("i"),o=y(),l=se(t[0]),a=y(),f&&f.c(),c=y(),g&&g.c(),d(n,"class",i="bi bi-"+t[1]),d(r,"class","my-3"),d(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,b){C(p,e,b),h(e,s),h(s,r),h(r,n),h(r,o),h(r,l),h(s,a),f&&f.m(s,null),h(e,c),g&&g.m(e,null),u=!0},p(p,[b]){(!u||b&2&&i!==(i="bi bi-"+p[1]))&&d(n,"class",i),(!u||b&1)&&ge(l,p[0]),p[2]!==""?f?f.p(p,b):(f=bi(p),f.c(),f.m(s,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||b&16)&&nn(g,m,p,p[4],u?rn(m,p[4],b,null):on(p[4]),null)},i(p){u||(S(g,p),u=!0)},o(p){T(g,p),u=!1},d(p){p&&E(e),f&&f.d(),g&&g.d(p)}}}function eu(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:o}=e,{link:l=""}=e,{linkText:a="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,o=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,a=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,o,l,a,n,r]}class Et extends we{constructor(e){super(),ve(this,e,eu,Xc,be,{title:0,icon:1,link:2,linkText:3})}}function tu(t){const e=t-1;return e*e*e+1}function Je(t,{delay:e=0,duration:s=400,easing:r=tn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function vi(t,{delay:e=0,duration:s=400,easing:r=tu,x:n=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,u=a*(1-o),[f,m]=Gn(n),[g,p]=Gn(i);return{delay:e,duration:s,easing:r,css:(b,v)=>`
			transform: ${c} translate(${(1-b)*f}${m}, ${(1-b)*g}${p});
			opacity: ${a-u*v}`}}function su(t){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',d(e,"class","d-flex justify-content-center")},m(s,r){C(s,e,r)},p:P,i:P,o:P,d(s){s&&E(e)}}}class jt extends we{constructor(e){super(),ve(this,e,null,su,be,{})}}function ru(t){let e,s,r,n,i,o,l,a,c;return{c(){e=_("div"),s=_("img"),n=y(),i=_("div"),o=_("h6"),l=_("a"),a=se(t[0]),d(s,"class","object-fit-contain rounded my-2"),d(s,"height","150"),We(s.src,r="./default-profile.jpg")||d(s,"src",r),d(s,"alt","author"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/author/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){C(u,e,f),h(e,s),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&d(l,"href",c)},i:P,o:P,d(u){u&&E(e)}}}function nu(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class Ro extends we{constructor(e){super(),ve(this,e,nu,ru,be,{name:0,id:1})}}function iu(t){let e,s,r,n,i,o,l,a,c;return{c(){e=_("div"),s=_("img"),n=y(),i=_("div"),o=_("h6"),l=_("a"),a=se(t[0]),d(s,"class","object-fit-contain rounded my-2"),d(s,"height","150"),We(s.src,r="./default-profile.jpg")||d(s,"src",r),d(s,"alt","publisher"),d(l,"class","stretched-link svelte-1rzxrzv"),d(l,"href",c="./#/publisher/"+t[1]),d(o,"class","card-title text-center"),d(i,"class","card-body p-1"),d(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){C(u,e,f),h(e,s),h(e,n),h(e,i),h(i,o),h(o,l),h(l,a)},p(u,[f]){f&1&&ge(a,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&d(l,"href",c)},i:P,o:P,d(u){u&&E(e)}}}function ou(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class Ao extends we{constructor(e){super(),ve(this,e,ou,iu,be,{name:0,id:1})}}function au(t){let e,s,r,n,i,o,l,a,c,u;return{c(){e=_("div"),s=_("div"),r=_("h2"),r.textContent="Error",n=y(),i=_("p"),o=se(t[0]),l=se(": "),a=se(t[1]),c=y(),u=_("a"),u.textContent="Reload",d(u,"href","./#/"),d(u,"class","fw-bold"),d(s,"class","text-center"),d(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,m){C(f,e,m),h(e,s),h(s,r),h(s,n),h(s,i),h(i,o),h(i,l),h(i,a),h(s,c),h(s,u)},p(f,[m]){m&1&&ge(o,f[0]),m&2&&ge(a,f[1])},i:P,o:P,d(f){f&&E(e)}}}function lu(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let bn=class extends we{constructor(e){super(),ve(this,e,lu,au,be,{code:0,message:1})}};function wi(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function yi(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function ki(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function cu(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function uu(t){let e,s;return e=new bn({props:{message:t[3]}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function du(t){let e,s,r=Ce(Object.entries(t[0])),n=[];for(let o=0;o<r.length;o+=1)n[o]=$i(ki(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&1){r=Ce(Object.entries(o[0]));let a;for(a=0;a<r.length;a+=1){const c=ki(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=$i(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function $i(t){let e,s;return e=new hr({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function hu(t){let e,s,r,n;const i=[du,uu,cu],o=[];function l(a,c){return a[0]?0:a[3]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function fu(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function _u(t){let e,s;return e=new bn({props:{message:t[4]}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function mu(t){let e,s,r=Ce(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Si(yi(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=yi(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Si(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Si(t){let e,s;return e=new Ro({props:{id:t[13].author_id,name:t[13].name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function pu(t){let e,s,r,n;const i=[mu,_u,fu],o=[];function l(a,c){return a[1]?0:a[4]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function gu(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function bu(t){let e,s;return e=new bn({props:{message:t[5]}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function vu(t){let e,s,r=Ce(Object.entries(t[2])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Oi(wi(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row justify-content-around")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2]));let a;for(a=0;a<r.length;a+=1){const c=wi(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Oi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Oi(t){let e,s;return e=new Ao({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function wu(t){let e,s,r,n;const i=[vu,bu,gu],o=[];function l(a,c){return a[2]?0:a[5]?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function yu(t){let e,s,r,n,i,o,l,a,c,u;return s=new Kc({}),n=new Et({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[hu]},$$scope:{ctx:t}}}),o=new Et({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[pu]},$$scope:{ctx:t}}}),a=new Et({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[wu]},$$scope:{ctx:t}}}),{c(){e=_("main"),U(s.$$.fragment),r=y(),U(n.$$.fragment),i=y(),U(o.$$.fragment),l=y(),U(a.$$.fragment),d(e,"class","container mb-5")},m(f,m){C(f,e,m),L(s,e,null),h(e,r),L(n,e,null),h(e,i),L(o,e,null),h(e,l),L(a,e,null),u=!0},p(f,[m]){const g={};m&524297&&(g.$$scope={dirty:m,ctx:f}),n.$set(g);const p={};m&524306&&(p.$$scope={dirty:m,ctx:f}),o.$set(p);const b={};m&524324&&(b.$$scope={dirty:m,ctx:f}),a.$set(b)},i(f){u||(S(s.$$.fragment,f),S(n.$$.fragment,f),S(o.$$.fragment,f),S(a.$$.fragment,f),f&&(c||Le(()=>{c=Ge(e,Je,{duration:500}),c.start()})),u=!0)},o(f){T(s.$$.fragment,f),T(n.$$.fragment,f),T(o.$$.fragment,f),T(a.$$.fragment,f),u=!1},d(f){f&&E(e),N(s),N(n),N(o),N(a)}}}function ku(t,e,s){let r,n,i,o,l,a;async function c(){const{data:m,error:g}=await oe.rpc("get_books");s(0,r=m),s(3,o=g?g.message:"")}async function u(){const{data:m,error:g}=await oe.rpc("get_authors");s(1,n=m),s(4,l=g?g.message:"")}async function f(){const{data:m,error:g}=await oe.rpc("get_publishers");s(2,i=m),s(5,a=g||"")}return c(),u(),f(),[r,n,i,o,l,a]}class $u extends we{constructor(e){super(),ve(this,e,ku,yu,be,{})}}function Su(t){let e,s,r,n,i,o,l,a;return{c(){e=_("div"),s=_("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=y(),n=_("div"),i=_("h4"),o=se(t[0]),d(s,"class","btn"),cs(s,"font-size","1.5em"),d(i,"class","my-auto"),d(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){C(c,e,u),h(e,s),h(e,r),h(e,n),h(n,i),h(i,o),l||(a=q(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&ge(o,c[0])},i:P,o:P,d(c){c&&E(e),l=!1,a()}}}function Ou(t,e,s){let{text:r}=e;const n=()=>sl();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class yt extends we{constructor(e){super(),ve(this,e,Ou,Su,be,{text:0})}}function Ti(t,e,s){const r=t.slice();return r[25]=e[s][0],r[26]=e[s][1],r}function Tu(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function Du(t){let e,s,r,n,i,o,l,a=t[2].isbn+"",c,u,f,m,g,p=t[2].title+"",b,v,w,$=t[2].description+"",O,M,k,D,F,x,H=t[2].author.name+"",j,I,V,K,ee,W,R,J=t[2].publisher.name+"",ne,Q,ie,X,he,Ae,Pe=t[2].category.name+"",je,Fe,fe,te,ue,Re=t[2].shelf_number+"",le,z=t[1]=="client"&&Di(t);return{c(){e=_("div"),s=_("div"),r=_("img"),i=y(),o=_("small"),l=se("ISBN: "),c=se(a),u=y(),z&&z.c(),f=y(),m=_("div"),g=_("h1"),b=se(p),v=y(),w=_("p"),O=se($),M=y(),k=_("p"),D=_("b"),D.textContent="Author:",F=y(),x=_("a"),j=se(H),V=y(),K=_("p"),ee=_("b"),ee.textContent="Publisher:",W=y(),R=_("a"),ne=se(J),ie=y(),X=_("p"),he=_("b"),he.textContent="Category:",Ae=y(),je=se(Pe),Fe=y(),fe=_("p"),te=_("b"),te.textContent="Shelf No.:",ue=y(),le=se(Re),d(r,"id","img-cover"),d(r,"class","border p-3"),We(r.src,n=t[12])||d(r,"src",n),d(r,"alt","book cover"),d(r,"height","300"),d(r,"width","300"),cs(r,"object-fit","contain"),d(o,"class","text-secondary"),d(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),d(g,"id","book-title"),d(g,"class","mb-2 pb-2"),d(w,"id","book-description"),d(x,"href",I="./#/author/"+t[2].author.author_id),d(R,"href",Q="./#/publisher/"+t[2].publisher.publisher_id),d(m,"id","details-container"),d(m,"class","container mt-md-0 mt-3"),d(e,"class","d-md-flex d-block")},m(Se,He){C(Se,e,He),h(e,s),h(s,r),h(s,i),h(s,o),h(o,l),h(o,c),h(s,u),z&&z.m(s,null),h(e,f),h(e,m),h(m,g),h(g,b),h(m,v),h(m,w),h(w,O),h(m,M),h(m,k),h(k,D),h(k,F),h(k,x),h(x,j),h(m,V),h(m,K),h(K,ee),h(K,W),h(K,R),h(R,ne),h(m,ie),h(m,X),h(X,he),h(X,Ae),h(X,je),h(m,Fe),h(m,fe),h(fe,te),h(fe,ue),h(fe,le)},p(Se,He){He&4&&a!==(a=Se[2].isbn+"")&&ge(c,a),Se[1]=="client"?z?z.p(Se,He):(z=Di(Se),z.c(),z.m(s,null)):z&&(z.d(1),z=null),He&4&&p!==(p=Se[2].title+"")&&ge(b,p),He&4&&$!==($=Se[2].description+"")&&ge(O,$),He&4&&H!==(H=Se[2].author.name+"")&&ge(j,H),He&4&&I!==(I="./#/author/"+Se[2].author.author_id)&&d(x,"href",I),He&4&&J!==(J=Se[2].publisher.name+"")&&ge(ne,J),He&4&&Q!==(Q="./#/publisher/"+Se[2].publisher.publisher_id)&&d(R,"href",Q),He&4&&Pe!==(Pe=Se[2].category.name+"")&&ge(je,Pe),He&4&&Re!==(Re=Se[2].shelf_number+"")&&ge(le,Re)},i:P,o:P,d(Se){Se&&E(e),z&&z.d()}}}function Di(t){let e;function s(i,o){return i[4]?Pu:i[0]?Cu:i[5]==0?Eu:Mu}let r=s(t),n=r(t);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),C(i,e,o)},p(i,o){r===(r=s(i))&&n?n.p(i,o):(n.d(1),n=r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&E(e),n.d(i)}}}function Mu(t){let e,s,r;return{c(){e=_("button"),e.textContent="Reserve",e.disabled=!1,d(e,"class","btn btn-primary w-50")},m(n,i){C(n,e,i),s||(r=q(e,"click",t[10]),s=!0)},p:P,d(n){n&&E(e),s=!1,r()}}}function Eu(t){let e;return{c(){e=_("button"),e.textContent="Unavailable",e.disabled=!0,d(e,"class","btn btn-secondary w-50")},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function Cu(t){let e,s,r,n,i,o,l;return{c(){e=_("button"),s=_("i"),r=y(),n=se(t[7]),d(s,"class","bi bi-x-circle"),d(e,"class",i="btn "+t[6]+" w-75")},m(a,c){C(a,e,c),h(e,s),h(e,r),h(e,n),o||(l=[q(e,"mouseenter",t[14]),q(e,"mouseleave",t[15]),q(e,"click",t[11])],o=!0)},p(a,c){c&128&&ge(n,a[7]),c&64&&i!==(i="btn "+a[6]+" w-75")&&d(e,"class",i)},d(a){a&&E(e),o=!1,$e(l)}}}function Pu(t){let e,s,r,n;return{c(){e=_("button"),s=se("Borrowed (#"),r=se(t[4]),n=se(")"),d(e,"class","btn btn-secondary w-75")},m(i,o){C(i,e,o),h(e,s),h(e,r),h(e,n)},p(i,o){o&16&&ge(r,i[4])},d(i){i&&E(e)}}}function Mi(t){let e,s;return e=new Et({props:{title:"Status",icon:"journal",$$slots:{default:[Lu]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&536870920&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function ju(t){return{c:P,m:P,p:P,d:P}}function Ru(t){let e;function s(i,o){return i[24].length<=0?Iu:Au}let n=s(t)(t);return{c(){n.c(),e=ze()},m(i,o){n.m(i,o),C(i,e,o)},p(i,o){n.p(i,o)},d(i){i&&E(e),n.d(i)}}}function Au(t){let e,s,r,n,i=Ce(Object.entries(t[24])),o=[];for(let l=0;l<i.length;l+=1)o[l]=Ei(Ti(t,i,l));return{c(){e=_("table"),s=_("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=y(),n=_("tbody");for(let l=0;l<o.length;l+=1)o[l].c();d(e,"class","table table-bordered table-striped text-center align-middle")},m(l,a){C(l,e,a),h(e,s),h(e,r),h(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(l,a){if(a&256){i=Ce(Object.entries(l[24]));let c;for(c=0;c<i.length;c+=1){const u=Ti(l,i,c);o[c]?o[c].p(u,a):(o[c]=Ei(u),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&E(e),Xe(o,l)}}}function Iu(t){let e;return{c(){e=_("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",d(e,"class","text-center my-5")},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function Ei(t){let e,s,r,n,i,o,l=t[26].status+"",a,c,u=t[26].reservation_id?`(${t[26].reservation_id})`:t[26].borrow_id?`(${t[26].borrow_id})`:"",f,m,g,p,b,v;return{c(){e=_("tr"),s=_("td"),s.textContent=`${t[26].barcode}`,r=y(),n=_("td"),n.textContent=`${t[26].status!="Available"?`${t[26].fname} ${t[26].lname}`:"--"}`,i=y(),o=_("td"),a=se(l),c=y(),f=se(u),m=y(),g=_("td"),p=_("a"),b=_("small"),b.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',v=y(),d(o,"class",t[26].status=="Available"?"text-bg-success":t[26].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),d(p,"href",t[26].status=="Available"?`./#/borrow?barcode=${t[26].barcode}`:t[26].status=="Reserved"?`./#/borrow?reserve_id=${t[26].reservation_id}`:"text-bg-danger"),d(p,"class","btn btn-outline-primary btn-sm")},m(w,$){C(w,e,$),h(e,s),h(e,r),h(e,n),h(e,i),h(e,o),h(o,a),h(o,c),h(o,f),h(e,m),h(e,g),h(g,p),h(p,b),h(e,v)},p:P,d(w){w&&E(e)}}}function Yu(t){return{c:P,m:P,p:P,d:P}}function Lu(t){let e,s,r,n,i,o,l,a,c,u,f={ctx:t,current:null,token:null,hasCatch:!1,pending:Yu,then:Ru,catch:ju,value:24};return Vs(t[8](),f),{c(){f.block.c(),e=y(),s=_("div"),r=_("label"),r.textContent="Add Copy:",n=y(),i=_("div"),o=_("input"),l=y(),a=_("button"),a.textContent="Add",d(r,"for","copy"),d(r,"class","form=control col-auto"),d(o,"type","text"),d(o,"class","form-control"),d(o,"id","copy"),d(o,"placeholder","Barcode Number"),d(i,"class","col-4"),d(a,"class","btn btn-primary col-2"),d(s,"class","row justify-content-center align-items-center")},m(m,g){f.block.m(m,f.anchor=g),f.mount=()=>e.parentNode,f.anchor=e,C(m,e,g),C(m,s,g),h(s,r),h(s,n),h(s,i),h(i,o),G(o,t[3]),h(s,l),h(s,a),c||(u=[q(o,"input",t[16]),q(a,"click",t[9])],c=!0)},p(m,g){t=m,zs(f,t,g),g&8&&o.value!==t[3]&&G(o,t[3])},d(m){m&&(E(e),E(s)),f.block.d(m),f.token=null,f=null,c=!1,$e(u)}}}function Nu(t){let e,s,r,n,i,o,l,a,c,u,f;r=new yt({props:{text:"Book Details"}});const m=[Du,Tu],g=[];function p(v,w){return v[2]?0:1}i=p(t),o=g[i]=m[i](t);let b=t[1]=="staff"&&Mi(t);return{c(){e=_("main"),s=_("section"),U(r.$$.fragment),n=y(),o.c(),l=y(),b&&b.c(),a=y(),c=_("div"),d(c,"class","my-5"),d(e,"class","container")},m(v,w){C(v,e,w),h(e,s),L(r,s,null),h(s,n),g[i].m(s,null),h(e,l),b&&b.m(e,null),h(e,a),h(e,c),f=!0},p(v,[w]){let $=i;i=p(v),i===$?g[i].p(v,w):(Me(),T(g[$],1,1,()=>{g[$]=null}),Ee(),o=g[i],o?o.p(v,w):(o=g[i]=m[i](v),o.c()),S(o,1),o.m(s,null)),v[1]=="staff"?b?(b.p(v,w),w&2&&S(b,1)):(b=Mi(v),b.c(),S(b,1),b.m(e,a)):b&&(Me(),T(b,1,1,()=>{b=null}),Ee())},i(v){f||(S(r.$$.fragment,v),S(o),S(b),v&&(u||Le(()=>{u=Ge(e,Je,{duration:500}),u.start()})),f=!0)},o(v){T(r.$$.fragment,v),T(o),T(b),f=!1},d(v){v&&E(e),N(r),g[i].d(),b&&b.d()}}}function Ci(){return 3e6+Math.floor(Math.random()*1e4)}function Uu(t,e,s){let r,n;Pt.subscribe(I=>s(1,n=I));const i=localStorage.getItem("user_id");let{params:o}=e;const l=o.bookID;let a;async function c(){const{data:I,error:V}=await oe.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",l);console.table(I[0]),s(2,a=I[0])}Ts(c);let u;async function f(){const{data:I,error:V}=await oe.rpc("get_holdings",{bookid:l});return V&&console.error(V),console.table(I),I}async function m(){const{data:I}=await oe.from("library_holdings").select().eq("barcode",u);I.length==0&&(await oe.from("library_holdings").insert({book_id:l,barcode:u}),f())}let g,p,b=0,v="btn-secondary";n=="client"&&(O(),p||(w(),$()));async function w(){const{data:I,error:V}=await oe.rpc("isreserved",{bookid:l,studid:i});s(0,g=I)}async function $(){const{data:I,error:V}=await oe.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available");s(5,b=I.length)}async function O(){const{data:I,error:V}=await oe.rpc("isborrowed",{bookid:l,studid:i});s(4,p=I)}async function M(){const{data:I,error:V}=await oe.from("library_holdings").select("barcode, holding_id").eq("book_id",l).eq("status","Available").limit(1).single();if(V){console.error(V);return}const{error:K}=await oe.from("book_reservation").insert({reservation_id:await D(),stud_id:i,holding_id:I.holding_id});if(K){console.error(K);return}const{data:ee,error:W}=await oe.from("library_holdings").update({status:"Reserved"}).eq("barcode",I.barcode).select("holding_id").single();if(W){console.error(W);return}w()}async function k(){const{data:I,error:V}=await oe.from("book_reservation").update({active:!1}).eq("reservation_id",g).select().single(),{error:K}=await oe.from("library_holdings").update({status:"Available"}).eq("holding_id",I.holding_id);!V||!K?(w(),$()):(console.error(V),console.error(K))}async function D(){let I=Ci();const{data:V,error:K}=await oe.from("book_reservation").select().eq("reservation_id",I);return console.log(V),V.length!=0&&(I=Ci(),console.log("exists")),console.log(I),I}let F=l>4?"./book-cover.png":`./${l}.jpg`;const x=()=>{s(7,r="Cancel Reservation"),s(6,v="btn-danger")},H=()=>{s(7,r=`Reserved (#${g})`),s(6,v="btn-secondary")};function j(){u=this.value,s(3,u)}return t.$$set=I=>{"params"in I&&s(13,o=I.params)},t.$$.update=()=>{t.$$.dirty&1&&s(7,r=`Reserved (${g})`)},[g,n,a,u,p,b,v,r,f,m,M,k,F,o,x,H,j]}class Io extends we{constructor(e){super(),ve(this,e,Uu,Nu,be,{params:13})}}function xu(t){let e,s,r,n,i,o;const l=t[3].default,a=sn(l,t,t[2],null);return{c(){e=_("div"),s=_("label"),r=se(t[0]),n=y(),i=_("div"),a&&a.c(),d(s,"class","col-sm-4 col-md-3 col-form-label"),d(s,"for",t[1]),d(i,"class","col-sm-8 col-md-9"),d(e,"class","mb-4 row")},m(c,u){C(c,e,u),h(e,s),h(s,r),h(e,n),h(e,i),a&&a.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&ge(r,c[0]),(!o||u&2)&&d(s,"for",c[1]),a&&a.p&&(!o||u&4)&&nn(a,l,c,c[2],o?rn(l,c[2],u,null):on(c[2]),null)},i(c){o||(S(a,c),o=!0)},o(c){T(a,c),o=!1},d(c){c&&E(e),a&&a.d(c)}}}function Fu(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,o=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,o,n,r]}class Ye extends we{constructor(e){super(),ve(this,e,Fu,xu,be,{label:0,id:1})}}function Pi(t,e,s){const r=t.slice();return r[29]=e[s][0],r[30]=e[s][1],r}function ji(t,e,s){const r=t.slice();return r[29]=e[s][0],r[34]=e[s][1],r}function Ri(t,e,s){const r=t.slice();return r[29]=e[s][0],r[38]=e[s][1],r}function Hu(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-name"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),G(e,t[4]),s||(r=q(e,"input",t[18]),s=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&G(e,n[4])},d(n){n&&E(e),s=!1,r()}}}function Wu(t){let e,s,r;return{c(){e=_("textarea"),d(e,"class","form-control"),d(e,"id","book-description"),d(e,"rows","6"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),G(e,t[5]),s||(r=q(e,"input",t[19]),s=!0)},p(n,i){i[0]&32&&G(e,n[5])},d(n){n&&E(e),s=!1,r()}}}function qu(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","book-cover"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[21](e),s||(r=q(e,"change",t[20]),s=!0)},p:P,d(n){n&&E(e),t[21](null),s=!1,r()}}}function Bu(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","categories"),d(e,"class",s="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-category"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[6]),C(l,r,a),C(l,n,a),i||(o=q(e,"input",t[23]),i=!0)},p(l,a){a[0]&2048&&s!==(s="form-control "+l[11])&&d(e,"class",s),a[0]&64&&e.value!==l[6]&&G(e,l[6])},d(l){l&&(E(e),E(r),E(n)),i=!1,o()}}}function Vu(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","authors"),d(e,"class",s="form-control "+t[12]),d(e,"type","text"),d(e,"id","book-author"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[7]),C(l,r,a),C(l,n,a),i||(o=q(e,"input",t[24]),i=!0)},p(l,a){a[0]&4096&&s!==(s="form-control "+l[12])&&d(e,"class",s),a[0]&128&&e.value!==l[7]&&G(e,l[7])},d(l){l&&(E(e),E(r),E(n)),i=!1,o()}}}function zu(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',d(e,"list","publishers"),d(e,"class",s="form-control "+t[13]),d(e,"type","text"),d(e,"id","book-publisher"),d(e,"autocomplete","off"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[8]),C(l,r,a),C(l,n,a),i||(o=q(e,"input",t[25]),i=!0)},p(l,a){a[0]&8192&&s!==(s="form-control "+l[13])&&d(e,"class",s),a[0]&256&&e.value!==l[8]&&G(e,l[8])},d(l){l&&(E(e),E(r),E(n)),i=!1,o()}}}function Gu(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","number"),d(e,"id","book-shelf"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),G(e,t[9]),s||(r=q(e,"input",t[26]),s=!0)},p(n,i){i[0]&512&&lr(e.value)!==n[9]&&G(e,n[9])},d(n){n&&E(e),s=!1,r()}}}function Ju(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-isbn"),d(e,"autocomplete","off")},m(n,i){C(n,e,i),G(e,t[10]),s||(r=q(e,"input",t[27]),s=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&G(e,n[10])},d(n){n&&E(e),s=!1,r()}}}function Ku(t){return{c:P,m:P,p:P,d:P}}function Zu(t){let e,s=Ce(Object.entries(t[37])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ai(Ri(t,s,n));return{c(){e=_("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","authors")},m(n,i){C(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&32768){s=Ce(Object.entries(n[37]));let o;for(o=0;o<s.length;o+=1){const l=Ri(n,s,o);r[o]?r[o].p(l,i):(r[o]=Ai(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&E(e),Xe(r,n)}}}function Ai(t){let e;return{c(){e=_("option"),e.__value=t[38].name,G(e,e.__value)},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function Qu(t){return{c:P,m:P,p:P,d:P}}function Xu(t){return{c:P,m:P,p:P,d:P}}function ed(t){let e,s=Ce(Object.entries(t[33])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ii(ji(t,s,n));return{c(){e=_("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","publishers")},m(n,i){C(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&65536){s=Ce(Object.entries(n[33]));let o;for(o=0;o<s.length;o+=1){const l=ji(n,s,o);r[o]?r[o].p(l,i):(r[o]=Ii(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&E(e),Xe(r,n)}}}function Ii(t){let e;return{c(){e=_("option"),e.__value=t[34].name,G(e,e.__value)},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function td(t){return{c:P,m:P,p:P,d:P}}function sd(t){return{c:P,m:P,p:P,d:P}}function rd(t){let e,s=Ce(Object.entries(t[28])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Yi(Pi(t,s,n));return{c(){e=_("datalist");for(let n=0;n<r.length;n+=1)r[n].c();d(e,"id","categories")},m(n,i){C(n,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,i){if(i[0]&131072){s=Ce(Object.entries(n[28]));let o;for(o=0;o<s.length;o+=1){const l=Pi(n,s,o);r[o]?r[o].p(l,i):(r[o]=Yi(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}},d(n){n&&E(e),Xe(r,n)}}}function Yi(t){let e;return{c(){e=_("option"),e.__value=t[30].name,G(e,e.__value)},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function nd(t){return{c:P,m:P,p:P,d:P}}function id(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W,R,J,ne,Q,ie,X,he,Ae,Pe,je,Fe,fe;s=new yt({props:{text:"Add Book"}}),o=new Ye({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Hu]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Wu]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[qu]},$$scope:{ctx:t}}}),F=new Ye({props:{label:"Category:",id:"book-category",$$slots:{default:[Bu]},$$scope:{ctx:t}}}),H=new Ye({props:{label:"Author: ",id:"book-author",$$slots:{default:[Vu]},$$scope:{ctx:t}}}),I=new Ye({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[zu]},$$scope:{ctx:t}}}),K=new Ye({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Gu]},$$scope:{ctx:t}}}),W=new Ye({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Ju]},$$scope:{ctx:t}}});let te={ctx:t,current:null,token:null,hasCatch:!1,pending:Qu,then:Zu,catch:Ku,value:37};Vs(t[15](),te);let ue={ctx:t,current:null,token:null,hasCatch:!1,pending:td,then:ed,catch:Xu,value:33};Vs(t[16](),ue);let Re={ctx:t,current:null,token:null,hasCatch:!1,pending:nd,then:rd,catch:sd,value:28};return Vs(t[17](),Re),{c(){e=_("section"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),m=_("div"),g=_("label"),g.textContent="Preview:",p=y(),b=_("div"),v=_("img"),$=y(),O=_("button"),O.textContent="Remove",k=y(),D=_("div"),U(F.$$.fragment),x=y(),U(H.$$.fragment),j=y(),U(I.$$.fragment),V=y(),U(K.$$.fragment),ee=y(),U(W.$$.fragment),R=y(),J=_("div"),ne=_("button"),ne.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',Q=y(),ie=_("a"),ie.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',X=y(),te.block.c(),he=y(),ue.block.c(),Ae=y(),Re.block.c(),d(g,"for","cover-preview"),d(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We(v.src,w=t[3])||d(v,"src",w),d(v,"alt","Preview"),d(v,"id","cover-preview"),d(v,"height","150"),d(O,"class","btn btn-sm btn-danger"),d(b,"class","col-sm-8 col-md-9"),d(b,"id","preview-div"),d(m,"class",M="my-3 row "+t[2]),d(i,"class","col-sm-12 col-lg-6"),d(D,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-center"),d(ne,"class","btn btn-success"),d(ie,"href","./#/"),d(J,"class","my-3"),d(e,"class","my-1 container")},m(le,z){C(le,e,z),L(s,e,null),h(e,r),h(e,n),h(n,i),L(o,i,null),h(i,l),L(a,i,null),h(i,c),L(u,i,null),h(i,f),h(i,m),h(m,g),h(m,p),h(m,b),h(b,v),h(b,$),h(b,O),h(n,k),h(n,D),L(F,D,null),h(D,x),L(H,D,null),h(D,j),L(I,D,null),h(D,V),L(K,D,null),h(D,ee),L(W,D,null),h(e,R),h(e,J),h(J,ne),h(J,Q),h(J,ie),h(e,X),te.block.m(e,te.anchor=null),te.mount=()=>e,te.anchor=he,h(e,he),ue.block.m(e,ue.anchor=null),ue.mount=()=>e,ue.anchor=Ae,h(e,Ae),Re.block.m(e,Re.anchor=null),Re.mount=()=>e,Re.anchor=null,je=!0,Fe||(fe=[q(O,"click",t[22]),q(ne,"click",t[14])],Fe=!0)},p(le,z){t=le;const Se={};z[0]&16|z[1]&1024&&(Se.$$scope={dirty:z,ctx:t}),o.$set(Se);const He={};z[0]&32|z[1]&1024&&(He.$$scope={dirty:z,ctx:t}),a.$set(He);const Fn={};z[0]&3|z[1]&1024&&(Fn.$$scope={dirty:z,ctx:t}),u.$set(Fn),(!je||z[0]&8&&!We(v.src,w=t[3]))&&d(v,"src",w),(!je||z[0]&4&&M!==(M="my-3 row "+t[2]))&&d(m,"class",M);const Hn={};z[0]&2112|z[1]&1024&&(Hn.$$scope={dirty:z,ctx:t}),F.$set(Hn);const Wn={};z[0]&4224|z[1]&1024&&(Wn.$$scope={dirty:z,ctx:t}),H.$set(Wn);const qn={};z[0]&8448|z[1]&1024&&(qn.$$scope={dirty:z,ctx:t}),I.$set(qn);const Bn={};z[0]&512|z[1]&1024&&(Bn.$$scope={dirty:z,ctx:t}),K.$set(Bn);const Vn={};z[0]&1024|z[1]&1024&&(Vn.$$scope={dirty:z,ctx:t}),W.$set(Vn),zs(te,t,z),zs(ue,t,z),zs(Re,t,z)},i(le){je||(S(s.$$.fragment,le),S(o.$$.fragment,le),S(a.$$.fragment,le),S(u.$$.fragment,le),S(F.$$.fragment,le),S(H.$$.fragment,le),S(I.$$.fragment,le),S(K.$$.fragment,le),S(W.$$.fragment,le),le&&(Pe||Le(()=>{Pe=Ge(e,Je,{duration:500}),Pe.start()})),je=!0)},o(le){T(s.$$.fragment,le),T(o.$$.fragment,le),T(a.$$.fragment,le),T(u.$$.fragment,le),T(F.$$.fragment,le),T(H.$$.fragment,le),T(I.$$.fragment,le),T(K.$$.fragment,le),T(W.$$.fragment,le),je=!1},d(le){le&&E(e),N(s),N(o),N(a),N(u),N(F),N(H),N(I),N(K),N(W),te.block.d(),te.token=null,te=null,ue.block.d(),ue.token=null,ue=null,Re.block.d(),Re.token=null,Re=null,Fe=!1,$e(fe)}}}function od(t,e,s){let r,n,i="d-none",o,l,a,c,u,f,m,g,p,b,v;async function w(){const{data:W,error:R}=await oe.from("author").select("author_id").eq("name",u).single(),{data:J,error:ne}=await oe.from("publisher").select("publisher_id").eq("name",f).single(),{data:Q,error:ie}=await oe.from("category").select("category_id").eq("name",c).single();let X=!0;if((R||!W)&&(s(12,b="is-invalid"),X=!1),(ne||!J)&&(s(13,v="is-invalid"),X=!1),(ie||!Q)&&(s(11,p="is-invalid"),X=!1),!X)return;const{error:he}=await oe.from("books").insert({title:l,description:a,category_id:Q.category_id,author_id:W.author_id,publisher_id:J.publisher_id,shelf_number:m,isbn:g});he?console.error(he):alert(`Successfully Added ${l}!`)}async function $(){const{data:W,error:R}=await oe.from("author").select("name").order("name",{ascending:!0});return W}async function O(){const{data:W,error:R}=await oe.from("publisher").select("name").order("name",{ascending:!0});return W}async function M(){const{data:W,error:R}=await oe.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return W}function k(){l=this.value,s(4,l)}function D(){a=this.value,s(5,a)}function F(){r=this.files,s(0,r)}function x(W){os[W?"unshift":"push"](()=>{n=W,s(1,n)})}const H=()=>{s(1,n.value="",n),s(0,r="")};function j(){c=this.value,s(6,c)}function I(){u=this.value,s(7,u)}function V(){f=this.value,s(8,f)}function K(){m=lr(this.value),s(9,m)}function ee(){g=this.value,s(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(r&&r[0]){console.log(r),s(2,i="");const W=URL.createObjectURL(r[0]);s(3,o=W)}else console.log(r),s(2,i="d-none")},[r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee]}class ad extends we{constructor(e){super(),ve(this,e,od,id,be,{},null,[-1,-1])}}function Li(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function ld(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function cd(t){let e,s,r=t[0].name+"",n,i,o,l,a,c,u,f,m=t[0].email+"",g,p;function b($,O){return $[0].bio==null?dd:ud}let v=b(t),w=v(t);return{c(){e=_("div"),s=_("h1"),n=se(r),i=y(),o=_("p"),w.c(),l=y(),a=_("p"),c=_("b"),c.textContent="Website:",u=y(),f=_("a"),g=se(m),d(s,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="mailto:"+t[0].email),d(e,"class","container")},m($,O){C($,e,O),h(e,s),h(s,n),h(e,i),h(e,o),w.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&r!==(r=$[0].name+"")&&ge(n,r),v===(v=b($))&&w?w.p($,O):(w.d(1),w=v($),w&&(w.c(),w.m(o,null))),O&1&&m!==(m=$[0].email+"")&&ge(g,m),O&1&&p!==(p="mailto:"+$[0].email)&&d(f,"href",p)},i:P,o:P,d($){$&&E(e),w.d()}}}function ud(t){let e=t[0].bio+"",s;return{c(){s=se(e)},m(r,n){C(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ge(s,e)},d(r){r&&E(s)}}}function dd(t){let e;return{c(){e=_("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function hd(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function fd(t){let e,s,r=Ce(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Ni(Li(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Li(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Ni(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Ni(t){let e,s;return e=new hr({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function _d(t){let e,s,r,n;const i=[fd,hd],o=[];function l(a,c){return a[1]?0:1}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s?s.p(a,c):(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function md(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b;r=new yt({props:{text:"Author Details"}});const v=[cd,ld],w=[];function $(O,M){return O[0]?0:1}return u=$(t),f=w[u]=v[u](t),g=new Et({props:{title:"Books",icon:"journal",$$slots:{default:[_d]},$$scope:{ctx:t}}}),{c(){e=_("main"),s=_("section"),U(r.$$.fragment),n=y(),i=_("div"),o=_("div"),l=_("img"),c=y(),f.c(),m=y(),U(g.$$.fragment),d(l,"class","border p-3"),We(l.src,a=pd)||d(l,"src",a),d(l,"alt","author"),d(l,"height","300"),d(l,"width","300"),cs(l,"object-fit","contain"),d(o,"class","d-flex justify-content-center my-1"),d(i,"class","d-md-flex d-block"),d(e,"class","container")},m(O,M){C(O,e,M),h(e,s),L(r,s,null),h(s,n),h(s,i),h(i,o),h(o,l),h(i,c),w[u].m(i,null),h(e,m),L(g,e,null),b=!0},p(O,[M]){let k=u;u=$(O),u===k?w[u].p(O,M):(Me(),T(w[k],1,1,()=>{w[k]=null}),Ee(),f=w[u],f?f.p(O,M):(f=w[u]=v[u](O),f.c()),S(f,1),f.m(i,null));const D={};M&514&&(D.$$scope={dirty:M,ctx:O}),g.$set(D)},i(O){b||(S(r.$$.fragment,O),S(f),S(g.$$.fragment,O),O&&(p||Le(()=>{p=Ge(e,Je,{duration:500}),p.start()})),b=!0)},o(O){T(r.$$.fragment,O),T(f),T(g.$$.fragment,O),b=!1},d(O){O&&E(e),N(r),w[u].d(),N(g)}}}let pd="./default-profile.jpg";function gd(t,e,s){let{params:r}=e,n=r.authorID,i,o;async function l(){const{data:a,error:c}=await oe.from("author").select().eq("author_id",n);console.log(a),s(0,i=a[0]);const{data:u,error:f}=await oe.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,o=u)}return Ts(l),t.$$set=a=>{"params"in a&&s(2,r=a.params)},[i,o,r]}class Yo extends we{constructor(e){super(),ve(this,e,gd,md,be,{params:2})}}function Ui(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function xi(t){let e,s,r=t[0].name+"",n,i,o,l,a,c,u,f,m=t[0].email+"",g,p;function b($,O){return $[0].bio==null?vd:bd}let v=b(t),w=v(t);return{c(){e=_("div"),s=_("h1"),n=se(r),i=y(),o=_("p"),w.c(),l=y(),a=_("p"),c=_("b"),c.textContent="Website:",u=y(),f=_("a"),g=se(m),d(s,"class","mb-2 pb-2"),d(o,"class",""),d(f,"href",p="https://"+t[0].email),d(f,"id","publisher-website"),d(e,"class","container")},m($,O){C($,e,O),h(e,s),h(s,n),h(e,i),h(e,o),w.m(o,null),h(e,l),h(e,a),h(a,c),h(a,u),h(a,f),h(f,g)},p($,O){O&1&&r!==(r=$[0].name+"")&&ge(n,r),v===(v=b($))&&w?w.p($,O):(w.d(1),w=v($),w&&(w.c(),w.m(o,null))),O&1&&m!==(m=$[0].email+"")&&ge(g,m),O&1&&p!==(p="https://"+$[0].email)&&d(f,"href",p)},d($){$&&E(e),w.d()}}}function bd(t){let e=t[0].bio+"",s;return{c(){s=se(e)},m(r,n){C(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ge(s,e)},d(r){r&&E(s)}}}function vd(t){let e;return{c(){e=_("span"),e.textContent="No Description",d(e,"class","text-secondary")},m(s,r){C(s,e,r)},p:P,d(s){s&&E(e)}}}function wd(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function yd(t){let e,s,r=Ce(Object.entries(t[1])),n=[];for(let o=0;o<r.length;o+=1)n[o]=Fi(Ui(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){e=_("div");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class","row")},m(o,l){C(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,l){if(l&2){r=Ce(Object.entries(o[1]));let a;for(a=0;a<r.length;a+=1){const c=Ui(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Fi(c),n[a].c(),S(n[a],1),n[a].m(e,null))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Fi(t){let e,s;return e=new hr({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function kd(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v;s=new yt({props:{text:"Publisher Details"}});let w=t[0]&&xi(t);m=new Et({props:{title:"Books",icon:"journal"}});const $=[yd,wd],O=[];function M(k,D){return k[1]?0:1}return p=M(t),b=O[p]=$[p](t),{c(){e=_("section"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),o=_("img"),a=y(),w&&w.c(),u=y(),f=_("section"),U(m.$$.fragment),g=y(),b.c(),d(o,"id","img-cover"),d(o,"class","border p-3"),We(o.src,l=$d)||d(o,"src",l),d(o,"alt","publisher"),d(o,"height","300"),d(o,"width","300"),cs(o,"object-fit","contain"),d(i,"id","publisher-cover"),d(i,"class","d-flex justify-content-center my-1"),d(n,"class","d-md-flex d-block"),d(e,"class","container"),d(f,"class","container")},m(k,D){C(k,e,D),L(s,e,null),h(e,r),h(e,n),h(n,i),h(i,o),h(n,a),w&&w.m(n,null),C(k,u,D),C(k,f,D),L(m,f,null),h(f,g),O[p].m(f,null),v=!0},p(k,[D]){k[0]?w?w.p(k,D):(w=xi(k),w.c(),w.m(n,null)):w&&(w.d(1),w=null);let F=p;p=M(k),p===F?O[p].p(k,D):(Me(),T(O[F],1,1,()=>{O[F]=null}),Ee(),b=O[p],b?b.p(k,D):(b=O[p]=$[p](k),b.c()),S(b,1),b.m(f,null))},i(k){v||(S(s.$$.fragment,k),k&&(c||Le(()=>{c=Ge(e,Je,{duration:500}),c.start()})),S(m.$$.fragment,k),S(b),v=!0)},o(k){T(s.$$.fragment,k),T(m.$$.fragment,k),T(b),v=!1},d(k){k&&(E(e),E(u),E(f)),N(s),w&&w.d(),N(m),O[p].d()}}}let $d="./default-profile.jpg";function Sd(t,e,s){let{params:r}=e,n=r.publisherID,i,o;async function l(){const{data:a,error:c}=await oe.from("publisher").select().eq("publisher_id",n);console.log(a),s(0,i=a[0]);const{data:u,error:f}=await oe.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,o=u)}return Ts(l),t.$$set=a=>{"params"in a&&s(2,r=a.params)},[i,o,r]}class Lo extends we{constructor(e){super(),ve(this,e,Sd,kd,be,{params:2})}}function Od(t){let e,s,r,n,i,o,l,a,c,u;return{c(){e=_("div"),s=_("div"),r=_("i"),i=y(),o=_("div"),l=_("h5"),a=_("a"),c=se(t[0]),d(r,"class",n="bi bi-"+t[2]),d(s,"class","d-flex justify-content-center"),cs(s,"font-size","3em"),d(a,"class","stretched-link svelte-1vxezln"),d(a,"href",u="./#/"+t[1]),d(l,"class","card-title text-center my-2"),d(o,"class","card-body p-1"),d(e,"class","card col-md-3 col-5 border-1 py-2 svelte-1vxezln")},m(f,m){C(f,e,m),h(e,s),h(s,r),h(e,i),h(e,o),h(o,l),h(l,a),h(a,c)},p(f,[m]){m&4&&n!==(n="bi bi-"+f[2])&&d(r,"class",n),m&1&&ge(c,f[0]),m&2&&u!==(u="./#/"+f[1])&&d(a,"href",u)},i:P,o:P,d(f){f&&E(e)}}}function Td(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=o=>{"name"in o&&s(0,r=o.name),"link"in o&&s(1,n=o.link),"icon"in o&&s(2,i=o.icon)},[r,n,i]}class ks extends we{constructor(e){super(),ve(this,e,Td,Od,be,{name:0,link:1,icon:2})}}function Dd(t){let e,s,r,n,i;return s=new ks({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),n=new ks({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),{c(){e=_("div"),U(s.$$.fragment),r=y(),U(n.$$.fragment),d(e,"class","row justify-content-center gap-2")},m(o,l){C(o,e,l),L(s,e,null),h(e,r),L(n,e,null),i=!0},p:P,i(o){i||(S(s.$$.fragment,o),S(n.$$.fragment,o),i=!0)},o(o){T(s.$$.fragment,o),T(n.$$.fragment,o),i=!1},d(o){o&&E(e),N(s),N(n)}}}function Md(t){let e,s,r,n,i,o,l;return s=new ks({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),n=new ks({props:{name:"Add Author",link:"add-author",icon:"person-fill-add"}}),o=new ks({props:{name:"Add Publisher",link:"add-publisher",icon:"building-add"}}),{c(){e=_("div"),U(s.$$.fragment),r=y(),U(n.$$.fragment),i=y(),U(o.$$.fragment),d(e,"class","row justify-content-center gap-4")},m(a,c){C(a,e,c),L(s,e,null),h(e,r),L(n,e,null),h(e,i),L(o,e,null),l=!0},p:P,i(a){l||(S(s.$$.fragment,a),S(n.$$.fragment,a),S(o.$$.fragment,a),l=!0)},o(a){T(s.$$.fragment,a),T(n.$$.fragment,a),T(o.$$.fragment,a),l=!1},d(a){a&&E(e),N(s),N(n),N(o)}}}function Ed(t){let e,s,r,n,i,o;return s=new Et({props:{title:"Welcome!",icon:"wrench-adjustable",$$slots:{default:[Dd]},$$scope:{ctx:t}}}),n=new Et({props:{title:"Add Data",icon:"plus-circle",$$slots:{default:[Md]},$$scope:{ctx:t}}}),{c(){e=_("main"),U(s.$$.fragment),r=y(),U(n.$$.fragment),d(e,"class","container")},m(l,a){C(l,e,a),L(s,e,null),h(e,r),L(n,e,null),o=!0},p(l,[a]){const c={};a&1&&(c.$$scope={dirty:a,ctx:l}),s.$set(c);const u={};a&1&&(u.$$scope={dirty:a,ctx:l}),n.$set(u)},i(l){o||(S(s.$$.fragment,l),S(n.$$.fragment,l),l&&(i||Le(()=>{i=Ge(e,Je,{duration:500}),i.start()})),o=!0)},o(l){T(s.$$.fragment,l),T(n.$$.fragment,l),o=!1},d(l){l&&E(e),N(s),N(n)}}}class Cd extends we{constructor(e){super(),ve(this,e,null,Ed,be,{})}}function Hi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Wi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function qi(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Pd(t){let e,s;return e=new jt({}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function jd(t){let e;return{c(){e=_("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',d(e,"class","d-flex justify-content-center")},m(s,r){C(s,e,r)},p:P,i:P,o:P,d(s){s&&E(e)}}}function Rd(t){let e,s,r=Ce(Object.entries(t[2].publisher)),n=[];for(let o=0;o<r.length;o+=1)n[o]=Bi(Hi(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),s=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].publisher));let a;for(a=0;a<r.length;a+=1){const c=Hi(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Bi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Ad(t){let e,s,r=Ce(Object.entries(t[2].author)),n=[];for(let o=0;o<r.length;o+=1)n[o]=Vi(Wi(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),s=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].author));let a;for(a=0;a<r.length;a+=1){const c=Wi(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=Vi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Id(t){let e,s,r=Ce(Object.entries(t[2].books)),n=[];for(let o=0;o<r.length;o+=1)n[o]=zi(qi(t,r,o));const i=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ze()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);C(o,e,l),s=!0},p(o,l){if(l&4){r=Ce(Object.entries(o[2].books));let a;for(a=0;a<r.length;a+=1){const c=qi(o,r,a);n[a]?(n[a].p(c,l),S(n[a],1)):(n[a]=zi(c),n[a].c(),S(n[a],1),n[a].m(e.parentNode,e))}for(Me(),a=r.length;a<n.length;a+=1)i(a);Ee()}},i(o){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(o){o&&E(e),Xe(n,o)}}}function Bi(t){let e,s;return e=new Ao({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function Vi(t){let e,s;return e=new Ro({props:{id:t[14].author_id,name:t[14].name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function zi(t){let e,s;return e=new hr({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function Yd(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D;s=new yt({props:{text:"Library Holdings"}});const F=[Id,Ad,Rd,jd,Pd],x=[];function H(j,I){return j[2].books.length>0?0:j[2].author.length>0?1:j[2].publisher.length>0?2:j[0]?4:3}return w=H(t),$=x[w]=F[w](t),{c(){e=_("main"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),o=_("select"),l=_("option"),l.textContent="Books",a=_("option"),a.textContent="Author",c=_("option"),c.textContent="Publisher",u=y(),f=_("div"),m=_("input"),g=y(),p=_("button"),p.innerHTML='<i class="bi bi-search"></i>',b=y(),v=_("div"),$.c(),l.selected=!0,l.__value="books",G(l,l.__value),a.__value="author",G(a,a.__value),c.__value="publisher",G(c,c.__value),d(o,"name","searchtype"),d(o,"class","form-select"),d(i,"class","col-auto col-md-2 p-0 pe-md-4"),d(m,"class","form-control form-control-lg"),d(m,"type","search"),d(m,"placeholder","Search"),d(m,"name","Search"),d(f,"class","col-6 col-md-6 p-0"),d(p,"class","btn btn-lg btn-success col-auto col-md-1"),d(p,"type","submit"),d(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),d(v,"class","row"),d(e,"class","container")},m(j,I){C(j,e,I),L(s,e,null),h(e,r),h(e,n),h(n,i),h(i,o),h(o,l),h(o,a),h(o,c),t[5](o),h(n,u),h(n,f),h(f,m),G(m,t[1]),h(n,g),h(n,p),h(e,b),h(e,v),x[w].m(v,null),M=!0,k||(D=[q(o,"change",t[4]),q(m,"input",t[6]),q(m,"keyup",t[7]),q(p,"click",t[4])],k=!0)},p(j,[I]){I&2&&m.value!==j[1]&&G(m,j[1]);let V=w;w=H(j),w===V?x[w].p(j,I):(Me(),T(x[V],1,1,()=>{x[V]=null}),Ee(),$=x[w],$?$.p(j,I):($=x[w]=F[w](j),$.c()),S($,1),$.m(v,null))},i(j){M||(S(s.$$.fragment,j),S($),j&&(O||Le(()=>{O=Ge(e,Je,{duration:500}),O.start()})),M=!0)},o(j){T(s.$$.fragment,j),T($),M=!1},d(j){j&&E(e),N(s),t[5](null),x[w].d(),k=!1,$e(D)}}}function Ld(t,e,s){let r;io(t,el,v=>s(9,r=v));let n=!0;function i(){switch(r){case"/search/author":s(3,f.value="author",f);break;case"/search/publisher":s(3,f.value="publisher",f);break;default:s(3,f.value="books",f)}}const o={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let a="books",c="",u={books:[],author:[],publisher:[]},f;async function m(){s(0,n=!0),a=f.value,console.log(a);const{data:v,error:w}=await oe.from(a).select(o[a]).ilike(l[a],`%${c}%`);w&&console.log(w),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[a]=v,u),s(2,u),s(0,n=!1),console.log(n,u)}Ts(i),Ts(m);function g(v){os[v?"unshift":"push"](()=>{f=v,s(3,f)})}function p(){c=this.value,s(1,c)}return[n,c,u,f,m,g,p,v=>v.key==="Enter"&&m()]}class ss extends we{constructor(e){super(),ve(this,e,Ld,Yd,be,{})}}function Nd(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W,R,J,ne,Q,ie,X,he,Ae,Pe,je,Fe,fe,te,ue,Re,le;return{c(){e=_("main"),s=_("div"),r=_("div"),n=_("h2"),n.textContent="Login",i=y(),o=_("form"),l=_("div"),a=_("span"),a.innerHTML='<ion-icon name="person-circle"></ion-icon>',c=y(),u=_("input"),f=y(),m=_("label"),m.textContent="Username",g=y(),p=_("div"),b=_("span"),b.innerHTML='<ion-icon name="lock-closed"></ion-icon>',v=y(),w=_("input"),$=y(),O=_("label"),O.textContent="Password",M=y(),k=_("button"),k.textContent="Login",D=y(),F=_("div"),x=_("p"),H=se("Don't have an account? "),j=_("a"),j.textContent="Register",I=y(),V=_("div"),K=_("h2"),K.textContent="Registration",ee=y(),W=_("form"),R=_("div"),R.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="person-circle"></ion-icon></span> <input type="text" name="none" id="registerUsername" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerUsername" class="svelte-tapssc">Username</label>',J=y(),ne=_("div"),ne.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="call"></ion-icon></span> <input type="tel" id="registerNumber" required="" autocomplete="off" class="svelte-tapssc"/> <label for="registerNumber" class="svelte-tapssc">Mobile Number</label>',Q=y(),ie=_("div"),ie.innerHTML='<span class="icon svelte-tapssc"><ion-icon name="lock-closed"></ion-icon></span> <input type="password" id="registerPassword" required="" autocomplete="off" name="none" class="svelte-tapssc"/> <label for="registerPassword" class="svelte-tapssc">Password</label>',X=y(),he=_("button"),he.textContent="Register",Ae=y(),Pe=_("div"),je=_("p"),Fe=se("Already have an account? "),fe=_("a"),fe.textContent="Log in",d(n,"class","svelte-tapssc"),d(a,"class","icon svelte-tapssc"),d(u,"type","text"),d(u,"id","usernameLogin"),u.required=!0,d(u,"autocomplete","off"),d(u,"class","svelte-tapssc"),d(m,"for","usernameLogin"),d(m,"class","svelte-tapssc"),d(l,"class","input-box svelte-tapssc"),d(b,"class","icon svelte-tapssc"),d(w,"type","password"),d(w,"id","passwordLogin"),w.required=!0,d(w,"autocomplete","off"),d(w,"class","svelte-tapssc"),d(O,"for","passwordLogin"),d(O,"class","svelte-tapssc"),d(p,"class","input-box svelte-tapssc"),d(k,"type","submit"),d(k,"class","bton svelte-tapssc"),d(k,"id","loginBton"),d(j,"href","./#/"),d(j,"class","register-link svelte-tapssc"),d(F,"class","login-register svelte-tapssc"),d(o,"id","form"),d(r,"class","form-box login svelte-tapssc"),d(K,"class","svelte-tapssc"),d(R,"class","input-box svelte-tapssc"),d(ne,"class","input-box svelte-tapssc"),d(ie,"class","input-box svelte-tapssc"),d(he,"type","submit"),d(he,"class","bton svelte-tapssc"),d(he,"id","registerBtn"),d(fe,"href","./#/"),d(fe,"class","login-link svelte-tapssc"),d(Pe,"class","login-register svelte-tapssc"),d(W,"autocomplete","off"),d(V,"class","form-box register svelte-tapssc"),d(s,"class",te="wrapper "+t[0]+" active-popup svelte-tapssc"),d(e,"class","svelte-tapssc")},m(z,Se){C(z,e,Se),h(e,s),h(s,r),h(r,n),h(r,i),h(r,o),h(o,l),h(l,a),h(l,c),h(l,u),G(u,t[1]),h(l,f),h(l,m),h(o,g),h(o,p),h(p,b),h(p,v),h(p,w),G(w,t[2]),h(p,$),h(p,O),h(o,M),h(o,k),h(o,D),h(o,F),h(F,x),h(x,H),h(x,j),h(s,I),h(s,V),h(V,K),h(V,ee),h(V,W),h(W,R),h(W,J),h(W,ne),h(W,Q),h(W,ie),h(W,X),h(W,he),h(W,Ae),h(W,Pe),h(Pe,je),h(je,Fe),h(je,fe),Re||(le=[q(u,"input",t[6]),q(w,"input",t[7]),q(k,"click",t[4]),q(j,"click",t[3]),q(o,"submit",La(t[4])),q(fe,"click",t[3])],Re=!0)},p(z,[Se]){Se&2&&u.value!==z[1]&&G(u,z[1]),Se&4&&w.value!==z[2]&&G(w,z[2]),Se&1&&te!==(te="wrapper "+z[0]+" active-popup svelte-tapssc")&&d(s,"class",te)},i(z){z&&(ue||Le(()=>{ue=Ge(e,Je,{duration:500}),ue.start()}))},o:P,d(z){z&&E(e),Re=!1,$e(le)}}}function Ud(t,e,s){document.querySelector("body").setAttribute("data-bs-theme","dark"),rl("/");function r(g){Pt.set("client"),localStorage.setItem("accType","client"),localStorage.setItem("user_id",g)}function n(g){Pt.set("staff"),localStorage.setItem("accType","staff"),localStorage.setItem("user_id",g)}let i=!0,o="";function l(){s(5,i=!i)}let a,c;async function u(){const{data:g,error:p}=await oe.from("user_level").select("account_type, user_id").eq("username",a).eq("password",c).single();if(p){console.error(p);return}g.account_type=="student"?r(g.user_id):g.account_type=="staff"?n(g.user_id):console.error(g)}function f(){a=this.value,s(1,a)}function m(){c=this.value,s(2,c)}return t.$$.update=()=>{t.$$.dirty&32&&s(0,o=i?"":"active")},[o,a,c,l,u,i,f,m]}class xd extends we{constructor(e){super(),ve(this,e,Ud,Nd,be,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var No;function A(){return No.apply(null,arguments)}function Fd(t){No=t}function it(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ut(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vn(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(me(t,e))return!1;return!0}function qe(t){return t===void 0}function wt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Is(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Uo(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function Dt(t,e){for(var s in e)me(e,s)&&(t[s]=e[s]);return me(e,"toString")&&(t.toString=e.toString),me(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ut(t,e,s,r){return la(t,e,s,r,!0).utc()}function Hd(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function re(t){return t._pf==null&&(t._pf=Hd()),t._pf}var zr;Array.prototype.some?zr=Array.prototype.some:zr=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function wn(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=re(t),s=zr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function fr(t){var e=ut(NaN);return t!=null?Dt(re(e),t):re(e).userInvalidated=!0,e}var Gi=A.momentProperties=[],Rr=!1;function yn(t,e){var s,r,n,i=Gi.length;if(qe(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),qe(e._i)||(t._i=e._i),qe(e._f)||(t._f=e._f),qe(e._l)||(t._l=e._l),qe(e._strict)||(t._strict=e._strict),qe(e._tzm)||(t._tzm=e._tzm),qe(e._isUTC)||(t._isUTC=e._isUTC),qe(e._offset)||(t._offset=e._offset),qe(e._pf)||(t._pf=re(e)),qe(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=Gi[s],n=e[r],qe(n)||(t[r]=n);return t}function Ys(t){yn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Rr===!1&&(Rr=!0,A.updateOffset(this),Rr=!1)}function ot(t){return t instanceof Ys||t!=null&&t._isAMomentObject!=null}function xo(t){A.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function et(t,e){var s=!0;return Dt(function(){if(A.deprecationHandler!=null&&A.deprecationHandler(null,t),s){var r=[],n,i,o,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(o in arguments[0])me(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}xo(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Ji={};function Fo(t,e){A.deprecationHandler!=null&&A.deprecationHandler(t,e),Ji[t]||(xo(e),Ji[t]=!0)}A.suppressDeprecationWarnings=!1;A.deprecationHandler=null;function dt(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Wd(t){var e,s;for(s in t)me(t,s)&&(e=t[s],dt(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Gr(t,e){var s=Dt({},t),r;for(r in e)me(e,r)&&(Ut(t[r])&&Ut(e[r])?(s[r]={},Dt(s[r],t[r]),Dt(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)me(t,r)&&!me(e,r)&&Ut(t[r])&&(s[r]=Dt({},s[r]));return s}function kn(t){t!=null&&this.set(t)}var Jr;Object.keys?Jr=Object.keys:Jr=function(t){var e,s=[];for(e in t)me(t,e)&&s.push(e);return s};var qd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Bd(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return dt(r)?r.call(e,s):r}function ct(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var $n=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ws=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ar={},rs={};function Z(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(rs[t]=n),e&&(rs[e[0]]=function(){return ct(n.apply(this,arguments),e[1],e[2])}),s&&(rs[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function Vd(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function zd(t){var e=t.match($n),s,r;for(s=0,r=e.length;s<r;s++)rs[e[s]]?e[s]=rs[e[s]]:e[s]=Vd(e[s]);return function(n){var i="",o;for(o=0;o<r;o++)i+=dt(e[o])?e[o].call(n,t):e[o];return i}}function Gs(t,e){return t.isValid()?(e=Ho(e,t.localeData()),Ar[e]=Ar[e]||zd(e),Ar[e](t)):t.localeData().invalidDate()}function Ho(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(Ws.lastIndex=0;s>=0&&Ws.test(t);)t=t.replace(Ws,r),Ws.lastIndex=0,s-=1;return t}var Gd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Jd(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match($n).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Kd="Invalid date";function Zd(){return this._invalidDate}var Qd="%d",Xd=/\d{1,2}/;function eh(t){return this._ordinal.replace("%d",t)}var th={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function sh(t,e,s,r){var n=this._relativeTime[s];return dt(n)?n(t,e,s,r):n.replace(/%d/i,t)}function rh(t,e){var s=this._relativeTime[t>0?"future":"past"];return dt(s)?s(e):s.replace(/%s/i,e)}var Ki={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function tt(t){return typeof t=="string"?Ki[t]||Ki[t.toLowerCase()]:void 0}function Sn(t){var e={},s,r;for(r in t)me(t,r)&&(s=tt(r),s&&(e[s]=t[r]));return e}var nh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function ih(t){var e=[],s;for(s in t)me(t,s)&&e.push({unit:s,priority:nh[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var Wo=/\d/,Ke=/\d\d/,qo=/\d{3}/,On=/\d{4}/,_r=/[+-]?\d{6}/,Te=/\d\d?/,Bo=/\d\d\d\d?/,Vo=/\d\d\d\d\d\d?/,mr=/\d{1,3}/,Tn=/\d{1,4}/,pr=/[+-]?\d{1,6}/,ds=/\d+/,gr=/[+-]?\d+/,oh=/Z|[+-]\d\d:?\d\d/gi,br=/Z|[+-]\d\d(?::?\d\d)?/gi,ah=/[+-]?\d+(\.\d{1,3})?/,Ls=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,hs=/^[1-9]\d?/,Dn=/^([1-9]\d|\d)/,rr;rr={};function B(t,e,s){rr[t]=dt(e)?e:function(r,n){return r&&s?s:e}}function lh(t,e){return me(rr,t)?rr[t](e._strict,e._locale):new RegExp(ch(t))}function ch(t){return bt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function bt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Qe(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ce(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=Qe(e)),s}var Kr={};function ye(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),wt(e)&&(r=function(i,o){o[e]=ce(i)}),n=t.length,s=0;s<n;s++)Kr[t[s]]=r}function Ns(t,e){ye(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function uh(t,e,s){e!=null&&me(Kr,t)&&Kr[t](e,s._a,s,t)}function vr(t){return t%4===0&&t%100!==0||t%400===0}var xe=0,pt=1,lt=2,Ne=3,nt=4,gt=5,Nt=6,dh=7,hh=8;Z("Y",0,0,function(){var t=this.year();return t<=9999?ct(t,4):"+"+t});Z(0,["YY",2],0,function(){return this.year()%100});Z(0,["YYYY",4],0,"year");Z(0,["YYYYY",5],0,"year");Z(0,["YYYYYY",6,!0],0,"year");B("Y",gr);B("YY",Te,Ke);B("YYYY",Tn,On);B("YYYYY",pr,_r);B("YYYYYY",pr,_r);ye(["YYYYY","YYYYYY"],xe);ye("YYYY",function(t,e){e[xe]=t.length===2?A.parseTwoDigitYear(t):ce(t)});ye("YY",function(t,e){e[xe]=A.parseTwoDigitYear(t)});ye("Y",function(t,e){e[xe]=parseInt(t,10)});function $s(t){return vr(t)?366:365}A.parseTwoDigitYear=function(t){return ce(t)+(ce(t)>68?1900:2e3)};var zo=fs("FullYear",!0);function fh(){return vr(this.year())}function fs(t,e){return function(s){return s!=null?(Go(this,t,s),A.updateOffset(this,e),this):Ms(this,t)}}function Ms(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Go(t,e,s){var r,n,i,o,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,o=t.month(),l=t.date(),l=l===29&&o===1&&!vr(i)?28:l,n?r.setUTCFullYear(i,o,l):r.setFullYear(i,o,l)}}function _h(t){return t=tt(t),dt(this[t])?this[t]():this}function mh(t,e){if(typeof t=="object"){t=Sn(t);var s=ih(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=tt(t),dt(this[t]))return this[t](e);return this}function ph(t,e){return(t%e+e)%e}var Ie;Array.prototype.indexOf?Ie=Array.prototype.indexOf:Ie=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Mn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=ph(e,12);return t+=(e-s)/12,s===1?vr(t)?29:28:31-s%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1});Z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Z("MMMM",0,0,function(t){return this.localeData().months(this,t)});B("M",Te,hs);B("MM",Te,Ke);B("MMM",function(t,e){return e.monthsShortRegex(t)});B("MMMM",function(t,e){return e.monthsRegex(t)});ye(["M","MM"],function(t,e){e[pt]=ce(t)-1});ye(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[pt]=n:re(s).invalidMonth=t});var gh="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Jo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ko=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,bh=Ls,vh=Ls;function wh(t,e){return t?it(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ko).test(e)?"format":"standalone"][t.month()]:it(this._months)?this._months:this._months.standalone}function yh(t,e){return t?it(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ko.test(e)?"format":"standalone"][t.month()]:it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function kh(t,e,s){var r,n,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=ut([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null):e==="MMM"?(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:(n=Ie.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Ie.call(this._longMonthsParse,o),n!==-1?n:(n=Ie.call(this._shortMonthsParse,o),n!==-1?n:null))}function $h(t,e,s){var r,n,i;if(this._monthsParseExact)return kh.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=ut([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function Zo(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=ce(e);else if(e=t.localeData().monthsParse(e),!wt(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,Mn(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function Qo(t){return t!=null?(Zo(this,t),A.updateOffset(this,!0),this):Ms(this,"Month")}function Sh(){return Mn(this.year(),this.month())}function Oh(t){return this._monthsParseExact?(me(this,"_monthsRegex")||Xo.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(me(this,"_monthsShortRegex")||(this._monthsShortRegex=bh),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Th(t){return this._monthsParseExact?(me(this,"_monthsRegex")||Xo.call(this),t?this._monthsStrictRegex:this._monthsRegex):(me(this,"_monthsRegex")||(this._monthsRegex=vh),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Xo(){function t(a,c){return c.length-a.length}var e=[],s=[],r=[],n,i,o,l;for(n=0;n<12;n++)i=ut([2e3,n]),o=bt(this.monthsShort(i,"")),l=bt(this.months(i,"")),e.push(o),s.push(l),r.push(l),r.push(o);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Dh(t,e,s,r,n,i,o){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,o),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,o),l}function Es(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function nr(t,e,s){var r=7+e-s,n=(7+Es(t,0,r).getUTCDay()-e)%7;return-n+r-1}function ea(t,e,s,r,n){var i=(7+s-r)%7,o=nr(t,r,n),l=1+7*(e-1)+i+o,a,c;return l<=0?(a=t-1,c=$s(a)+l):l>$s(t)?(a=t+1,c=l-$s(t)):(a=t,c=l),{year:a,dayOfYear:c}}function Cs(t,e,s){var r=nr(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,o;return n<1?(o=t.year()-1,i=n+vt(o,e,s)):n>vt(t.year(),e,s)?(i=n-vt(t.year(),e,s),o=t.year()+1):(o=t.year(),i=n),{week:i,year:o}}function vt(t,e,s){var r=nr(t,e,s),n=nr(t+1,e,s);return($s(t)-r+n)/7}Z("w",["ww",2],"wo","week");Z("W",["WW",2],"Wo","isoWeek");B("w",Te,hs);B("ww",Te,Ke);B("W",Te,hs);B("WW",Te,Ke);Ns(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=ce(t)});function Mh(t){return Cs(t,this._week.dow,this._week.doy).week}var Eh={dow:0,doy:6};function Ch(){return this._week.dow}function Ph(){return this._week.doy}function jh(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Rh(t){var e=Cs(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Z("d",0,"do","day");Z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Z("e",0,0,"weekday");Z("E",0,0,"isoWeekday");B("d",Te);B("e",Te);B("E",Te);B("dd",function(t,e){return e.weekdaysMinRegex(t)});B("ddd",function(t,e){return e.weekdaysShortRegex(t)});B("dddd",function(t,e){return e.weekdaysRegex(t)});Ns(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:re(s).invalidWeekday=t});Ns(["d","e","E"],function(t,e,s,r){e[r]=ce(t)});function Ah(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Ih(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function En(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Yh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ta="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Lh="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nh=Ls,Uh=Ls,xh=Ls;function Fh(t,e){var s=it(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?En(s,this._week.dow):t?s[t.day()]:s}function Hh(t){return t===!0?En(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Wh(t){return t===!0?En(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function qh(t,e,s){var r,n,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=ut([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1?n:null):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null):e==="dddd"?(n=Ie.call(this._weekdaysParse,o),n!==-1||(n=Ie.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):e==="ddd"?(n=Ie.call(this._shortWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Ie.call(this._minWeekdaysParse,o),n!==-1||(n=Ie.call(this._weekdaysParse,o),n!==-1)?n:(n=Ie.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function Bh(t,e,s){var r,n,i;if(this._weekdaysParseExact)return qh.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=ut([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function Vh(t){if(!this.isValid())return t!=null?this:NaN;var e=Ms(this,"Day");return t!=null?(t=Ah(t,this.localeData()),this.add(t-e,"d")):e}function zh(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Gh(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Ih(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Jh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(me(this,"_weekdaysRegex")||(this._weekdaysRegex=Nh),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Kh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(me(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Uh),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Zh(t){return this._weekdaysParseExact?(me(this,"_weekdaysRegex")||Cn.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(me(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xh),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Cn(){function t(u,f){return f.length-u.length}var e=[],s=[],r=[],n=[],i,o,l,a,c;for(i=0;i<7;i++)o=ut([2e3,1]).day(i),l=bt(this.weekdaysMin(o,"")),a=bt(this.weekdaysShort(o,"")),c=bt(this.weekdays(o,"")),e.push(l),s.push(a),r.push(c),n.push(l),n.push(a),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Pn(){return this.hours()%12||12}function Qh(){return this.hours()||24}Z("H",["HH",2],0,"hour");Z("h",["hh",2],0,Pn);Z("k",["kk",2],0,Qh);Z("hmm",0,0,function(){return""+Pn.apply(this)+ct(this.minutes(),2)});Z("hmmss",0,0,function(){return""+Pn.apply(this)+ct(this.minutes(),2)+ct(this.seconds(),2)});Z("Hmm",0,0,function(){return""+this.hours()+ct(this.minutes(),2)});Z("Hmmss",0,0,function(){return""+this.hours()+ct(this.minutes(),2)+ct(this.seconds(),2)});function sa(t,e){Z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}sa("a",!0);sa("A",!1);function ra(t,e){return e._meridiemParse}B("a",ra);B("A",ra);B("H",Te,Dn);B("h",Te,hs);B("k",Te,hs);B("HH",Te,Ke);B("hh",Te,Ke);B("kk",Te,Ke);B("hmm",Bo);B("hmmss",Vo);B("Hmm",Bo);B("Hmmss",Vo);ye(["H","HH"],Ne);ye(["k","kk"],function(t,e,s){var r=ce(t);e[Ne]=r===24?0:r});ye(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});ye(["h","hh"],function(t,e,s){e[Ne]=ce(t),re(s).bigHour=!0});ye("hmm",function(t,e,s){var r=t.length-2;e[Ne]=ce(t.substr(0,r)),e[nt]=ce(t.substr(r)),re(s).bigHour=!0});ye("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ne]=ce(t.substr(0,r)),e[nt]=ce(t.substr(r,2)),e[gt]=ce(t.substr(n)),re(s).bigHour=!0});ye("Hmm",function(t,e,s){var r=t.length-2;e[Ne]=ce(t.substr(0,r)),e[nt]=ce(t.substr(r))});ye("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ne]=ce(t.substr(0,r)),e[nt]=ce(t.substr(r,2)),e[gt]=ce(t.substr(n))});function Xh(t){return(t+"").toLowerCase().charAt(0)==="p"}var ef=/[ap]\.?m?\.?/i,tf=fs("Hours",!0);function sf(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var na={calendar:qd,longDateFormat:Gd,invalidDate:Kd,ordinal:Qd,dayOfMonthOrdinalParse:Xd,relativeTime:th,months:gh,monthsShort:Jo,week:Eh,weekdays:Yh,weekdaysMin:Lh,weekdaysShort:ta,meridiemParse:ef},De={},ps={},Ps;function rf(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function Zi(t){return t&&t.toLowerCase().replace("_","-")}function nf(t){for(var e=0,s,r,n,i;e<t.length;){for(i=Zi(t[e]).split("-"),s=i.length,r=Zi(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=wr(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&rf(i,r)>=s-1)break;s--}e++}return Ps}function of(t){return!!(t&&t.match("^[^/\\\\]*$"))}function wr(t){var e=null,s;if(De[t]===void 0&&typeof Zs<"u"&&Zs&&Zs.exports&&of(t))try{e=Ps._abbr,s=require,s("./locale/"+t),Ct(e)}catch{De[t]=null}return De[t]}function Ct(t,e){var s;return t&&(qe(e)?s=kt(t):s=jn(t,e),s?Ps=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ps._abbr}function jn(t,e){if(e!==null){var s,r=na;if(e.abbr=t,De[t]!=null)Fo("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=De[t]._config;else if(e.parentLocale!=null)if(De[e.parentLocale]!=null)r=De[e.parentLocale]._config;else if(s=wr(e.parentLocale),s!=null)r=s._config;else return ps[e.parentLocale]||(ps[e.parentLocale]=[]),ps[e.parentLocale].push({name:t,config:e}),null;return De[t]=new kn(Gr(r,e)),ps[t]&&ps[t].forEach(function(n){jn(n.name,n.config)}),Ct(t),De[t]}else return delete De[t],null}function af(t,e){if(e!=null){var s,r,n=na;De[t]!=null&&De[t].parentLocale!=null?De[t].set(Gr(De[t]._config,e)):(r=wr(t),r!=null&&(n=r._config),e=Gr(n,e),r==null&&(e.abbr=t),s=new kn(e),s.parentLocale=De[t],De[t]=s),Ct(t)}else De[t]!=null&&(De[t].parentLocale!=null?(De[t]=De[t].parentLocale,t===Ct()&&Ct(t)):De[t]!=null&&delete De[t]);return De[t]}function kt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ps;if(!it(t)){if(e=wr(t),e)return e;t=[t]}return nf(t)}function lf(){return Jr(De)}function Rn(t){var e,s=t._a;return s&&re(t).overflow===-2&&(e=s[pt]<0||s[pt]>11?pt:s[lt]<1||s[lt]>Mn(s[xe],s[pt])?lt:s[Ne]<0||s[Ne]>24||s[Ne]===24&&(s[nt]!==0||s[gt]!==0||s[Nt]!==0)?Ne:s[nt]<0||s[nt]>59?nt:s[gt]<0||s[gt]>59?gt:s[Nt]<0||s[Nt]>999?Nt:-1,re(t)._overflowDayOfYear&&(e<xe||e>lt)&&(e=lt),re(t)._overflowWeeks&&e===-1&&(e=dh),re(t)._overflowWeekday&&e===-1&&(e=hh),re(t).overflow=e),t}var cf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,uf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,df=/Z|[+-]\d\d(?::?\d\d)?/,qs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ir=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],hf=/^\/?Date\((-?\d+)/i,ff=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_f={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ia(t){var e,s,r=t._i,n=cf.exec(r)||uf.exec(r),i,o,l,a,c=qs.length,u=Ir.length;if(n){for(re(t).iso=!0,e=0,s=c;e<s;e++)if(qs[e][1].exec(n[1])){o=qs[e][0],i=qs[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(Ir[e][1].exec(n[3])){l=(n[2]||" ")+Ir[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(df.exec(n[4]))a="Z";else{t._isValid=!1;return}t._f=o+(l||"")+(a||""),In(t)}else t._isValid=!1}function mf(t,e,s,r,n,i){var o=[pf(t),Jo.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}function pf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function gf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bf(t,e,s){if(t){var r=ta.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return re(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function vf(t,e,s){if(t)return _f[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function oa(t){var e=ff.exec(gf(t._i)),s;if(e){if(s=mf(e[4],e[3],e[2],e[5],e[6],e[7]),!bf(e[1],s,t))return;t._a=s,t._tzm=vf(e[8],e[9],e[10]),t._d=Es.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),re(t).rfc2822=!0}else t._isValid=!1}function wf(t){var e=hf.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ia(t),t._isValid===!1)delete t._isValid;else return;if(oa(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:A.createFromInputFallback(t)}A.createFromInputFallback=et("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Kt(t,e,s){return t??e??s}function yf(t){var e=new Date(A.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function An(t){var e,s,r=[],n,i,o;if(!t._d){for(n=yf(t),t._w&&t._a[lt]==null&&t._a[pt]==null&&kf(t),t._dayOfYear!=null&&(o=Kt(t._a[xe],n[xe]),(t._dayOfYear>$s(o)||t._dayOfYear===0)&&(re(t)._overflowDayOfYear=!0),s=Es(o,0,t._dayOfYear),t._a[pt]=s.getUTCMonth(),t._a[lt]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ne]===24&&t._a[nt]===0&&t._a[gt]===0&&t._a[Nt]===0&&(t._nextDay=!0,t._a[Ne]=0),t._d=(t._useUTC?Es:Dh).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ne]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(re(t).weekdayMismatch=!0)}}function kf(t){var e,s,r,n,i,o,l,a,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,o=4,s=Kt(e.GG,t._a[xe],Cs(Oe(),1,4).year),r=Kt(e.W,1),n=Kt(e.E,1),(n<1||n>7)&&(a=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,c=Cs(Oe(),i,o),s=Kt(e.gg,t._a[xe],c.year),r=Kt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(a=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(a=!0)):n=i),r<1||r>vt(s,i,o)?re(t)._overflowWeeks=!0:a!=null?re(t)._overflowWeekday=!0:(l=ea(s,r,n,i,o),t._a[xe]=l.year,t._dayOfYear=l.dayOfYear)}A.ISO_8601=function(){};A.RFC_2822=function(){};function In(t){if(t._f===A.ISO_8601){ia(t);return}if(t._f===A.RFC_2822){oa(t);return}t._a=[],re(t).empty=!0;var e=""+t._i,s,r,n,i,o,l=e.length,a=0,c,u;for(n=Ho(t._f,t._locale).match($n)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(lh(i,t))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&re(t).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),a+=r.length),rs[i]?(r?re(t).empty=!1:re(t).unusedTokens.push(i),uh(i,r,t)):t._strict&&!r&&re(t).unusedTokens.push(i);re(t).charsLeftOver=l-a,e.length>0&&re(t).unusedInput.push(e),t._a[Ne]<=12&&re(t).bigHour===!0&&t._a[Ne]>0&&(re(t).bigHour=void 0),re(t).parsedDateParts=t._a.slice(0),re(t).meridiem=t._meridiem,t._a[Ne]=$f(t._locale,t._a[Ne],t._meridiem),c=re(t).era,c!==null&&(t._a[xe]=t._locale.erasConvertYear(c,t._a[xe])),An(t),Rn(t)}function $f(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function Sf(t){var e,s,r,n,i,o,l=!1,a=t._f.length;if(a===0){re(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<a;n++)i=0,o=!1,e=yn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],In(e),wn(e)&&(o=!0),i+=re(e).charsLeftOver,i+=re(e).unusedTokens.length*10,re(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||o)&&(r=i,s=e,o&&(l=!0));Dt(t,s||e)}function Of(t){if(!t._d){var e=Sn(t._i),s=e.day===void 0?e.date:e.day;t._a=Uo([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),An(t)}}function Tf(t){var e=new Ys(Rn(aa(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function aa(t){var e=t._i,s=t._f;return t._locale=t._locale||kt(t._l),e===null||s===void 0&&e===""?fr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ot(e)?new Ys(Rn(e)):(Is(e)?t._d=e:it(s)?Sf(t):s?In(t):Df(t),wn(t)||(t._d=null),t))}function Df(t){var e=t._i;qe(e)?t._d=new Date(A.now()):Is(e)?t._d=new Date(e.valueOf()):typeof e=="string"?wf(t):it(e)?(t._a=Uo(e.slice(0),function(s){return parseInt(s,10)}),An(t)):Ut(e)?Of(t):wt(e)?t._d=new Date(e):A.createFromInputFallback(t)}function la(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Ut(t)&&vn(t)||it(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,Tf(i)}function Oe(t,e,s,r){return la(t,e,s,r,!1)}var Mf=et("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:fr()}),Ef=et("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Oe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:fr()});function ca(t,e){var s,r;if(e.length===1&&it(e[0])&&(e=e[0]),!e.length)return Oe();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function Cf(){var t=[].slice.call(arguments,0);return ca("isBefore",t)}function Pf(){var t=[].slice.call(arguments,0);return ca("isAfter",t)}var jf=function(){return Date.now?Date.now():+new Date},gs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rf(t){var e,s=!1,r,n=gs.length;for(e in t)if(me(t,e)&&!(Ie.call(gs,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[gs[r]]){if(s)return!1;parseFloat(t[gs[r]])!==ce(t[gs[r]])&&(s=!0)}return!0}function Af(){return this._isValid}function If(){return at(NaN)}function yr(t){var e=Sn(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,a=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Rf(e),this._milliseconds=+u+c*1e3+a*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=kt(),this._bubble()}function Js(t){return t instanceof yr}function Zr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Yf(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,o;for(o=0;o<r;o++)ce(t[o])!==ce(e[o])&&i++;return i+n}function ua(t,e){Z(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+ct(~~(s/60),2)+e+ct(~~s%60,2)})}ua("Z",":");ua("ZZ","");B("Z",br);B("ZZ",br);ye(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Yn(br,t)});var Lf=/([\+\-]|\d\d)/gi;function Yn(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(Lf)||["-",0,0],i=+(n[1]*60)+ce(n[2]),i===0?0:n[0]==="+"?i:-i)}function Ln(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(ot(t)||Is(t)?t.valueOf():Oe(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),A.updateOffset(s,!1),s):Oe(t).local()}function Qr(t){return-Math.round(t._d.getTimezoneOffset())}A.updateOffset=function(){};function Nf(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Yn(br,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=Qr(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?fa(this,at(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,A.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Qr(this)}function Uf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function xf(t){return this.utcOffset(0,t)}function Ff(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Qr(this),"m")),this}function Hf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Yn(oh,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Wf(t){return this.isValid()?(t=t?Oe(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function qf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bf(){if(!qe(this._isDSTShifted))return this._isDSTShifted;var t={},e;return yn(t,this),t=aa(t),t._a?(e=t._isUTC?ut(t._a):Oe(t._a),this._isDSTShifted=this.isValid()&&Yf(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Vf(){return this.isValid()?!this._isUTC:!1}function zf(){return this.isValid()?this._isUTC:!1}function da(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Gf=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function at(t,e){var s=t,r=null,n,i,o;return Js(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:wt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=Gf.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:ce(r[lt])*n,h:ce(r[Ne])*n,m:ce(r[nt])*n,s:ce(r[gt])*n,ms:ce(Zr(r[Nt]*1e3))*n}):(r=Jf.exec(t))?(n=r[1]==="-"?-1:1,s={y:It(r[2],n),M:It(r[3],n),w:It(r[4],n),d:It(r[5],n),h:It(r[6],n),m:It(r[7],n),s:It(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(o=Kf(Oe(s.from),Oe(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),i=new yr(s),Js(t)&&me(t,"_locale")&&(i._locale=t._locale),Js(t)&&me(t,"_isValid")&&(i._isValid=t._isValid),i}at.fn=yr.prototype;at.invalid=If;function It(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Qi(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Kf(t,e){var s;return t.isValid()&&e.isValid()?(e=Ln(e,t),t.isBefore(e)?s=Qi(t,e):(s=Qi(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function ha(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(Fo(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=at(s,r),fa(this,n,t),this}}function fa(t,e,s,r){var n=e._milliseconds,i=Zr(e._days),o=Zr(e._months);t.isValid()&&(r=r??!0,o&&Zo(t,Ms(t,"Month")+o*s),i&&Go(t,"Date",Ms(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&A.updateOffset(t,i||o))}var Zf=ha(1,"add"),Qf=ha(-1,"subtract");function _a(t){return typeof t=="string"||t instanceof String}function Xf(t){return ot(t)||Is(t)||_a(t)||wt(t)||t_(t)||e_(t)||t===null||t===void 0}function e_(t){var e=Ut(t)&&!vn(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,o=r.length;for(n=0;n<o;n+=1)i=r[n],s=s||me(t,i);return e&&s}function t_(t){var e=it(t),s=!1;return e&&(s=t.filter(function(r){return!wt(r)&&_a(t)}).length===0),e&&s}function s_(t){var e=Ut(t)&&!vn(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||me(t,i);return e&&s}function r_(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function n_(t,e){arguments.length===1&&(arguments[0]?Xf(arguments[0])?(t=arguments[0],e=void 0):s_(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||Oe(),r=Ln(s,this).startOf("day"),n=A.calendarFormat(this,r)||"sameElse",i=e&&(dt(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,Oe(s)))}function i_(){return new Ys(this)}function o_(t,e){var s=ot(t)?t:Oe(t);return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function a_(t,e){var s=ot(t)?t:Oe(t);return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function l_(t,e,s,r){var n=ot(t)?t:Oe(t),i=ot(e)?e:Oe(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function c_(t,e){var s=ot(t)?t:Oe(t),r;return this.isValid()&&s.isValid()?(e=tt(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function u_(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function d_(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function h_(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=Ln(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=tt(e),e){case"year":i=Ks(this,r)/12;break;case"month":i=Ks(this,r);break;case"quarter":i=Ks(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:Qe(i)}function Ks(t,e){if(t.date()<e.date())return-Ks(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";A.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function f_(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function __(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Gs(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):dt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Gs(s,"Z")):Gs(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function m_(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function p_(t){t||(t=this.isUtc()?A.defaultFormatUtc:A.defaultFormat);var e=Gs(this,t);return this.localeData().postformat(e)}function g_(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Oe(t).isValid())?at({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function b_(t){return this.from(Oe(),t)}function v_(t,e){return this.isValid()&&(ot(t)&&t.isValid()||Oe(t).isValid())?at({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function w_(t){return this.to(Oe(),t)}function ma(t){var e;return t===void 0?this._locale._abbr:(e=kt(t),e!=null&&(this._locale=e),this)}var pa=et("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function ga(){return this._locale}var ir=1e3,ns=60*ir,or=60*ns,ba=(365*400+97)*24*or;function is(t,e){return(t%e+e)%e}function va(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-ba:new Date(t,e,s).valueOf()}function wa(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-ba:Date.UTC(t,e,s)}function y_(t){var e,s;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?wa:va,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=is(e+(this._isUTC?0:this.utcOffset()*ns),or);break;case"minute":e=this._d.valueOf(),e-=is(e,ns);break;case"second":e=this._d.valueOf(),e-=is(e,ir);break}return this._d.setTime(e),A.updateOffset(this,!0),this}function k_(t){var e,s;if(t=tt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?wa:va,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=or-is(e+(this._isUTC?0:this.utcOffset()*ns),or)-1;break;case"minute":e=this._d.valueOf(),e+=ns-is(e,ns)-1;break;case"second":e=this._d.valueOf(),e+=ir-is(e,ir)-1;break}return this._d.setTime(e),A.updateOffset(this,!0),this}function $_(){return this._d.valueOf()-(this._offset||0)*6e4}function S_(){return Math.floor(this.valueOf()/1e3)}function O_(){return new Date(this.valueOf())}function T_(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function D_(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function M_(){return this.isValid()?this.toISOString():null}function E_(){return wn(this)}function C_(){return Dt({},re(this))}function P_(){return re(this).overflow}function j_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr");Z("NN",0,0,"eraAbbr");Z("NNN",0,0,"eraAbbr");Z("NNNN",0,0,"eraName");Z("NNNNN",0,0,"eraNarrow");Z("y",["y",1],"yo","eraYear");Z("y",["yy",2],0,"eraYear");Z("y",["yyy",3],0,"eraYear");Z("y",["yyyy",4],0,"eraYear");B("N",Nn);B("NN",Nn);B("NNN",Nn);B("NNNN",W_);B("NNNNN",q_);ye(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?re(s).era=n:re(s).invalidEra=t});B("y",ds);B("yy",ds);B("yyy",ds);B("yyyy",ds);B("yo",B_);ye(["y","yy","yyy","yyyy"],xe);ye(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[xe]=s._locale.eraYearOrdinalParse(t,n):e[xe]=parseInt(t,10)});function R_(t,e){var s,r,n,i=this._eras||kt("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=A(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=A(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function A_(t,e,s){var r,n,i=this.eras(),o,l,a;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(o=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),a=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(o===t)return i[r];break;case"NNNNN":if(a===t)return i[r];break}else if([o,l,a].indexOf(t)>=0)return i[r]}function I_(t,e){var s=t.since<=t.until?1:-1;return e===void 0?A(t.since).year():A(t.since).year()+(e-t.offset)*s}function Y_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function L_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function N_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function U_(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-A(n[t].since).year())*s+n[t].offset;return this.year()}function x_(t){return me(this,"_erasNameRegex")||Un.call(this),t?this._erasNameRegex:this._erasRegex}function F_(t){return me(this,"_erasAbbrRegex")||Un.call(this),t?this._erasAbbrRegex:this._erasRegex}function H_(t){return me(this,"_erasNarrowRegex")||Un.call(this),t?this._erasNarrowRegex:this._erasRegex}function Nn(t,e){return e.erasAbbrRegex(t)}function W_(t,e){return e.erasNameRegex(t)}function q_(t,e){return e.erasNarrowRegex(t)}function B_(t,e){return e._eraYearOrdinalRegex||ds}function Un(){var t=[],e=[],s=[],r=[],n,i,o,l,a,c=this.eras();for(n=0,i=c.length;n<i;++n)o=bt(c[n].name),l=bt(c[n].abbr),a=bt(c[n].narrow),e.push(o),t.push(l),s.push(a),r.push(o),r.push(l),r.push(a);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100});Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function kr(t,e){Z(0,[t,t.length],0,e)}kr("gggg","weekYear");kr("ggggg","weekYear");kr("GGGG","isoWeekYear");kr("GGGGG","isoWeekYear");B("G",gr);B("g",gr);B("GG",Te,Ke);B("gg",Te,Ke);B("GGGG",Tn,On);B("gggg",Tn,On);B("GGGGG",pr,_r);B("ggggg",pr,_r);Ns(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=ce(t)});Ns(["gg","GG"],function(t,e,s,r){e[r]=A.parseTwoDigitYear(t)});function V_(t){return ya.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function z_(t){return ya.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function G_(){return vt(this.year(),1,4)}function J_(){return vt(this.isoWeekYear(),1,4)}function K_(){var t=this.localeData()._week;return vt(this.year(),t.dow,t.doy)}function Z_(){var t=this.localeData()._week;return vt(this.weekYear(),t.dow,t.doy)}function ya(t,e,s,r,n){var i;return t==null?Cs(this,r,n).year:(i=vt(t,r,n),e>i&&(e=i),Q_.call(this,t,e,s,r,n))}function Q_(t,e,s,r,n){var i=ea(t,e,s,r,n),o=Es(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Z("Q",0,"Qo","quarter");B("Q",Wo);ye("Q",function(t,e){e[pt]=(ce(t)-1)*3});function X_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date");B("D",Te,hs);B("DD",Te,Ke);B("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});ye(["D","DD"],lt);ye("Do",function(t,e){e[lt]=ce(t.match(Te)[0])});var ka=fs("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear");B("DDD",mr);B("DDDD",qo);ye(["DDD","DDDD"],function(t,e,s){s._dayOfYear=ce(t)});function em(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Z("m",["mm",2],0,"minute");B("m",Te,Dn);B("mm",Te,Ke);ye(["m","mm"],nt);var tm=fs("Minutes",!1);Z("s",["ss",2],0,"second");B("s",Te,Dn);B("ss",Te,Ke);ye(["s","ss"],gt);var sm=fs("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)});Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Z(0,["SSS",3],0,"millisecond");Z(0,["SSSS",4],0,function(){return this.millisecond()*10});Z(0,["SSSSS",5],0,function(){return this.millisecond()*100});Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});B("S",mr,Wo);B("SS",mr,Ke);B("SSS",mr,qo);var Mt,$a;for(Mt="SSSS";Mt.length<=9;Mt+="S")B(Mt,ds);function rm(t,e){e[Nt]=ce(("0."+t)*1e3)}for(Mt="S";Mt.length<=9;Mt+="S")ye(Mt,rm);$a=fs("Milliseconds",!1);Z("z",0,0,"zoneAbbr");Z("zz",0,0,"zoneName");function nm(){return this._isUTC?"UTC":""}function im(){return this._isUTC?"Coordinated Universal Time":""}var Y=Ys.prototype;Y.add=Zf;Y.calendar=n_;Y.clone=i_;Y.diff=h_;Y.endOf=k_;Y.format=p_;Y.from=g_;Y.fromNow=b_;Y.to=v_;Y.toNow=w_;Y.get=_h;Y.invalidAt=P_;Y.isAfter=o_;Y.isBefore=a_;Y.isBetween=l_;Y.isSame=c_;Y.isSameOrAfter=u_;Y.isSameOrBefore=d_;Y.isValid=E_;Y.lang=pa;Y.locale=ma;Y.localeData=ga;Y.max=Ef;Y.min=Mf;Y.parsingFlags=C_;Y.set=mh;Y.startOf=y_;Y.subtract=Qf;Y.toArray=T_;Y.toObject=D_;Y.toDate=O_;Y.toISOString=__;Y.inspect=m_;typeof Symbol<"u"&&Symbol.for!=null&&(Y[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Y.toJSON=M_;Y.toString=f_;Y.unix=S_;Y.valueOf=$_;Y.creationData=j_;Y.eraName=Y_;Y.eraNarrow=L_;Y.eraAbbr=N_;Y.eraYear=U_;Y.year=zo;Y.isLeapYear=fh;Y.weekYear=V_;Y.isoWeekYear=z_;Y.quarter=Y.quarters=X_;Y.month=Qo;Y.daysInMonth=Sh;Y.week=Y.weeks=jh;Y.isoWeek=Y.isoWeeks=Rh;Y.weeksInYear=K_;Y.weeksInWeekYear=Z_;Y.isoWeeksInYear=G_;Y.isoWeeksInISOWeekYear=J_;Y.date=ka;Y.day=Y.days=Vh;Y.weekday=zh;Y.isoWeekday=Gh;Y.dayOfYear=em;Y.hour=Y.hours=tf;Y.minute=Y.minutes=tm;Y.second=Y.seconds=sm;Y.millisecond=Y.milliseconds=$a;Y.utcOffset=Nf;Y.utc=xf;Y.local=Ff;Y.parseZone=Hf;Y.hasAlignedHourOffset=Wf;Y.isDST=qf;Y.isLocal=Vf;Y.isUtcOffset=zf;Y.isUtc=da;Y.isUTC=da;Y.zoneAbbr=nm;Y.zoneName=im;Y.dates=et("dates accessor is deprecated. Use date instead.",ka);Y.months=et("months accessor is deprecated. Use month instead",Qo);Y.years=et("years accessor is deprecated. Use year instead",zo);Y.zone=et("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Uf);Y.isDSTShifted=et("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bf);function om(t){return Oe(t*1e3)}function am(){return Oe.apply(null,arguments).parseZone()}function Sa(t){return t}var pe=kn.prototype;pe.calendar=Bd;pe.longDateFormat=Jd;pe.invalidDate=Zd;pe.ordinal=eh;pe.preparse=Sa;pe.postformat=Sa;pe.relativeTime=sh;pe.pastFuture=rh;pe.set=Wd;pe.eras=R_;pe.erasParse=A_;pe.erasConvertYear=I_;pe.erasAbbrRegex=F_;pe.erasNameRegex=x_;pe.erasNarrowRegex=H_;pe.months=wh;pe.monthsShort=yh;pe.monthsParse=$h;pe.monthsRegex=Th;pe.monthsShortRegex=Oh;pe.week=Mh;pe.firstDayOfYear=Ph;pe.firstDayOfWeek=Ch;pe.weekdays=Fh;pe.weekdaysMin=Wh;pe.weekdaysShort=Hh;pe.weekdaysParse=Bh;pe.weekdaysRegex=Jh;pe.weekdaysShortRegex=Kh;pe.weekdaysMinRegex=Zh;pe.isPM=Xh;pe.meridiem=sf;function ar(t,e,s,r){var n=kt(),i=ut().set(r,e);return n[s](i,t)}function Oa(t,e,s){if(wt(t)&&(e=t,t=void 0),t=t||"",e!=null)return ar(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=ar(t,r,s,"month");return n}function xn(t,e,s,r){typeof t=="boolean"?(wt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,wt(e)&&(s=e,e=void 0),e=e||"");var n=kt(),i=t?n._week.dow:0,o,l=[];if(s!=null)return ar(e,(s+i)%7,r,"day");for(o=0;o<7;o++)l[o]=ar(e,(o+i)%7,r,"day");return l}function lm(t,e){return Oa(t,e,"months")}function cm(t,e){return Oa(t,e,"monthsShort")}function um(t,e,s){return xn(t,e,s,"weekdays")}function dm(t,e,s){return xn(t,e,s,"weekdaysShort")}function hm(t,e,s){return xn(t,e,s,"weekdaysMin")}Ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=ce(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});A.lang=et("moment.lang is deprecated. Use moment.locale instead.",Ct);A.langData=et("moment.langData is deprecated. Use moment.localeData instead.",kt);var ht=Math.abs;function fm(){var t=this._data;return this._milliseconds=ht(this._milliseconds),this._days=ht(this._days),this._months=ht(this._months),t.milliseconds=ht(t.milliseconds),t.seconds=ht(t.seconds),t.minutes=ht(t.minutes),t.hours=ht(t.hours),t.months=ht(t.months),t.years=ht(t.years),this}function Ta(t,e,s,r){var n=at(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function _m(t,e){return Ta(this,t,e,1)}function mm(t,e){return Ta(this,t,e,-1)}function Xi(t){return t<0?Math.floor(t):Math.ceil(t)}function pm(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,o,l,a;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=Xi(Xr(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=Qe(t/1e3),r.seconds=n%60,i=Qe(n/60),r.minutes=i%60,o=Qe(i/60),r.hours=o%24,e+=Qe(o/24),a=Qe(Da(e)),s+=a,e-=Xi(Xr(a)),l=Qe(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function Da(t){return t*4800/146097}function Xr(t){return t*146097/4800}function gm(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=tt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+Da(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(Xr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function $t(t){return function(){return this.as(t)}}var Ma=$t("ms"),bm=$t("s"),vm=$t("m"),wm=$t("h"),ym=$t("d"),km=$t("w"),$m=$t("M"),Sm=$t("Q"),Om=$t("y"),Tm=Ma;function Dm(){return at(this)}function Mm(t){return t=tt(t),this.isValid()?this[t+"s"]():NaN}function Ft(t){return function(){return this.isValid()?this._data[t]:NaN}}var Em=Ft("milliseconds"),Cm=Ft("seconds"),Pm=Ft("minutes"),jm=Ft("hours"),Rm=Ft("days"),Am=Ft("months"),Im=Ft("years");function Ym(){return Qe(this.days()/7)}var ft=Math.round,Zt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Lm(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function Nm(t,e,s,r){var n=at(t).abs(),i=ft(n.as("s")),o=ft(n.as("m")),l=ft(n.as("h")),a=ft(n.as("d")),c=ft(n.as("M")),u=ft(n.as("w")),f=ft(n.as("y")),m=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||o<=1&&["m"]||o<s.m&&["mm",o]||l<=1&&["h"]||l<s.h&&["hh",l]||a<=1&&["d"]||a<s.d&&["dd",a];return s.w!=null&&(m=m||u<=1&&["w"]||u<s.w&&["ww",u]),m=m||c<=1&&["M"]||c<s.M&&["MM",c]||f<=1&&["y"]||["yy",f],m[2]=e,m[3]=+t>0,m[4]=r,Lm.apply(null,m)}function Um(t){return t===void 0?ft:typeof t=="function"?(ft=t,!0):!1}function xm(t,e){return Zt[t]===void 0?!1:e===void 0?Zt[t]:(Zt[t]=e,t==="s"&&(Zt.ss=e-1),!0)}function Fm(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Zt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Zt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=Nm(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Yr=Math.abs;function zt(t){return(t>0)-(t<0)||+t}function $r(){if(!this.isValid())return this.localeData().invalidDate();var t=Yr(this._milliseconds)/1e3,e=Yr(this._days),s=Yr(this._months),r,n,i,o,l=this.asSeconds(),a,c,u,f;return l?(r=Qe(t/60),n=Qe(r/60),t%=60,r%=60,i=Qe(s/12),s%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",a=l<0?"-":"",c=zt(this._months)!==zt(l)?"-":"",u=zt(this._days)!==zt(l)?"-":"",f=zt(this._milliseconds)!==zt(l)?"-":"",a+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?f+n+"H":"")+(r?f+r+"M":"")+(t?f+o+"S":"")):"P0D"}var _e=yr.prototype;_e.isValid=Af;_e.abs=fm;_e.add=_m;_e.subtract=mm;_e.as=gm;_e.asMilliseconds=Ma;_e.asSeconds=bm;_e.asMinutes=vm;_e.asHours=wm;_e.asDays=ym;_e.asWeeks=km;_e.asMonths=$m;_e.asQuarters=Sm;_e.asYears=Om;_e.valueOf=Tm;_e._bubble=pm;_e.clone=Dm;_e.get=Mm;_e.milliseconds=Em;_e.seconds=Cm;_e.minutes=Pm;_e.hours=jm;_e.days=Rm;_e.weeks=Ym;_e.months=Am;_e.years=Im;_e.humanize=Fm;_e.toISOString=$r;_e.toString=$r;_e.toJSON=$r;_e.locale=ma;_e.localeData=ga;_e.toIsoString=et("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$r);_e.lang=pa;Z("X",0,0,"unix");Z("x",0,0,"valueOf");B("x",gr);B("X",ah);ye("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});ye("x",function(t,e,s){s._d=new Date(ce(t))});//! moment.js
A.version="2.30.1";Fd(Oe);A.fn=Y;A.min=Cf;A.max=Pf;A.now=jf;A.utc=ut;A.unix=om;A.months=lm;A.isDate=Is;A.locale=Ct;A.invalid=fr;A.duration=at;A.isMoment=ot;A.weekdays=um;A.parseZone=am;A.localeData=kt;A.isDuration=Js;A.monthsShort=cm;A.weekdaysMin=hm;A.defineLocale=jn;A.updateLocale=af;A.locales=lf;A.weekdaysShort=dm;A.normalizeUnits=tt;A.relativeTimeRounding=Um;A.relativeTimeThreshold=xm;A.calendarFormat=r_;A.prototype=Y;A.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Hm(t){let e,s,r,n,i,o,l,a,c,u,f,m;const g=t[4].default,p=sn(g,t,t[3],null);return{c(){e=_("div"),s=_("label"),r=se(t[0]),n=y(),i=_("div"),p&&p.c(),o=y(),l=_("div"),a=_("button"),c=se(t[2]),d(s,"class","col-sm-4 col-md-3 col-form-label"),d(s,"for",t[1]),d(i,"class","col-sm-5 col-md-6 col-9"),d(a,"class","w-100 btn btn-outline-primary"),d(l,"class","col-sm-3 col-md-3 col-auto"),d(e,"class","mb-4 row justify-content-center")},m(b,v){C(b,e,v),h(e,s),h(s,r),h(e,n),h(e,i),p&&p.m(i,null),h(e,o),h(e,l),h(l,a),h(a,c),u=!0,f||(m=q(a,"click",t[5]),f=!0)},p(b,[v]){(!u||v&1)&&ge(r,b[0]),(!u||v&2)&&d(s,"for",b[1]),p&&p.p&&(!u||v&8)&&nn(p,g,b,b[3],u?rn(g,b[3],v,null):on(b[3]),null),(!u||v&4)&&ge(c,b[2])},i(b){u||(S(p,b),u=!0)},o(b){T(p,b),u=!1},d(b){b&&E(e),p&&p.d(b),f=!1,m()}}}function Wm(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:o}=e,{button:l}=e;function a(c){Ur.call(this,t,c)}return t.$$set=c=>{"label"in c&&s(0,i=c.label),"id"in c&&s(1,o=c.id),"button"in c&&s(2,l=c.button),"$$scope"in c&&s(3,n=c.$$scope)},[i,o,l,n,r,a]}class qm extends we{constructor(e){super(),ve(this,e,Wm,Hm,be,{label:0,id:1,button:2})}}function Bm(t){let e,s,r,n,i,o,l,a;return{c(){e=_("div"),s=_("div"),r=_("b"),n=se(t[0]),i=se(":"),o=y(),l=_("div"),a=se(t[1]),d(s,"class","col-sm-4 col-md-4"),d(l,"class","col-sm-8 col-md-8"),d(e,"class","mb-2 row")},m(c,u){C(c,e,u),h(e,s),h(s,r),h(r,n),h(r,i),h(e,o),h(e,l),h(l,a)},p(c,[u]){u&1&&ge(n,c[0]),u&2&&ge(a,c[1])},i:P,o:P,d(c){c&&E(e)}}}function Vm(t,e,s){let{key:r}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&s(0,r=i.key),"value"in i&&s(1,n=i.value)},[r,n]}class Be extends we{constructor(e){super(),ve(this,e,Vm,Bm,be,{key:0,value:1})}}function zm(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.textContent="Cannot Find Reservation",d(e,"class",s="form-control "+t[9]),d(e,"type","number"),d(e,"id","reserve"),d(e,"placeholder","e.g 300xxx"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[4]),C(l,r,a),C(l,n,a),i||(o=[q(e,"input",t[18]),q(e,"keyup",t[19])],i=!0)},p(l,a){a[0]&512&&s!==(s="form-control "+l[9])&&d(e,"class",s),a[0]&16&&lr(e.value)!==l[4]&&G(e,l[4])},d(l){l&&(E(e),E(r),E(n)),i=!1,$e(o)}}}function Gm(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.textContent="Cannot Find Student",d(e,"class",s="form-control "+t[10]),d(e,"type","text"),d(e,"id","stud-id"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[5]),C(l,r,a),C(l,n,a),i||(o=[q(e,"input",t[20]),q(e,"keyup",t[21])],i=!0)},p(l,a){a[0]&1024&&s!==(s="form-control "+l[10])&&d(e,"class",s),a[0]&32&&e.value!==l[5]&&G(e,l[5])},d(l){l&&(E(e),E(r),E(n)),i=!1,$e(o)}}}function Jm(t){let e,s,r,n,i,o;return{c(){e=_("input"),r=y(),n=_("div"),n.textContent="Cannot Find Book",d(e,"class",s="form-control "+t[11]),d(e,"type","text"),d(e,"id","book-barcode"),d(e,"placeholder","e.g 1000xxx"),d(n,"class","invalid-feedback")},m(l,a){C(l,e,a),G(e,t[6]),C(l,r,a),C(l,n,a),i||(o=[q(e,"input",t[22]),q(e,"keyup",t[23])],i=!0)},p(l,a){a[0]&2048&&s!==(s="form-control "+l[11])&&d(e,"class",s),a[0]&64&&e.value!==l[6]&&G(e,l[6])},d(l){l&&(E(e),E(r),E(n)),i=!1,$e(o)}}}function eo(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M;return n=new Be({props:{key:"Borrow ID",value:t[3]}}),o=new Be({props:{key:"Name",value:t[7]}}),a=new Be({props:{key:"Book Title",value:t[8]+" ("+t[6]+")"}}),u=new Be({props:{key:"Staff Name",value:"Francis James E. Salles ("+t[14]+")"}}),m=new Be({props:{key:"Borrow Date",value:A(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new Be({props:{key:"Return Due",value:A(t[1]).format("MMMM DD, YYYY")+" ("+t[12]+" days)"}}),{c(){e=_("div"),s=_("h3"),s.textContent="Borrow Preview",r=y(),U(n.$$.fragment),i=y(),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),U(m.$$.fragment),g=y(),U(p.$$.fragment),b=y(),v=_("div"),w=_("button"),w.innerHTML='<i class="bi bi-arrow-up-circle"></i> Borrow',d(s,"class","py-4 text-center"),d(w,"class","btn btn-secondary"),d(v,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(k,D){C(k,e,D),h(e,s),h(e,r),L(n,e,null),h(e,i),L(o,e,null),h(e,l),L(a,e,null),h(e,c),L(u,e,null),h(e,f),L(m,e,null),h(e,g),L(p,e,null),h(e,b),h(e,v),h(v,w),$=!0,O||(M=q(w,"click",t[17]),O=!0)},p(k,D){const F={};D[0]&8&&(F.value=k[3]),n.$set(F);const x={};D[0]&128&&(x.value=k[7]),o.$set(x);const H={};D[0]&320&&(H.value=k[8]+" ("+k[6]+")"),a.$set(H);const j={};D[0]&1&&(j.value=A(k[0]).format("MMMM DD, YYYY - hh:mm a")),m.$set(j);const I={};D[0]&4098&&(I.value=A(k[1]).format("MMMM DD, YYYY")+" ("+k[12]+" days)"),p.$set(I)},i(k){$||(S(n.$$.fragment,k),S(o.$$.fragment,k),S(a.$$.fragment,k),S(u.$$.fragment,k),S(m.$$.fragment,k),S(p.$$.fragment,k),$=!0)},o(k){T(n.$$.fragment,k),T(o.$$.fragment,k),T(a.$$.fragment,k),T(u.$$.fragment,k),T(m.$$.fragment,k),T(p.$$.fragment,k),$=!1},d(k){k&&E(e),N(n),N(o),N(a),N(u),N(m),N(p),O=!1,M()}}}function Km(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W,R,J,ne,Q,ie,X,he,Ae,Pe,je,Fe;s=new yt({props:{text:"Borrow Book"}}),o=new qm({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[zm]},$$scope:{ctx:t}}}),o.$on("click",t[16]),u=new Ye({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Gm]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Jm]},$$scope:{ctx:t}}});let fe=t[2]&&eo(t);return{c(){e=_("main"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),U(o.$$.fragment),l=y(),a=_("hr"),c=y(),U(u.$$.fragment),f=y(),U(m.$$.fragment),g=y(),p=_("div"),b=_("label"),b.textContent="Borrow Date:",v=y(),w=_("div"),$=_("input"),M=y(),k=_("div"),D=_("button"),D.textContent="Today",F=y(),x=_("div"),H=_("label"),H.textContent="Return Due:",j=y(),I=_("div"),V=_("input"),ee=y(),W=_("div"),R=_("button"),R.textContent=`~${en} Days`,J=y(),ne=_("div"),Q=_("button"),Q.innerHTML='<i class="bi bi-receipt"></i> Preview',ie=y(),X=_("a"),X.innerHTML='<i class="bi bi-x-circle"></i> Cancel',he=y(),fe&&fe.c(),d(a,"class","mb-4"),d(b,"class","col-sm-4 col-md-3 col-form-label"),d(b,"for","borrow-date"),d($,"class","form-control"),d($,"type","datetime-local"),d($,"id","borrow-date"),d($,"max",O=A(t[1]).format("YYYY-MM-DD HH:mm")),d(w,"class","col-sm-5 col-md-6 col-7"),d(D,"class","w-100 btn btn-outline-primary"),d(k,"class","col-sm-3 col-md-3 col-auto"),d(p,"class","mb-4 row justify-content-center"),d(H,"class","col-sm-4 col-md-3 col-form-label"),d(H,"for","return-date"),d(V,"class","form-control"),d(V,"type","date"),d(V,"id","return-date"),d(V,"min",K=A(t[0]).format("YYYY-MM-DD")),d(I,"class","col-sm-5 col-md-6 col-7"),d(R,"class","w-100 btn btn-outline-primary"),d(W,"class","col-sm-3 col-md-3 col-auto"),d(x,"class","mb-4 row justify-content-center"),d(Q,"class","btn btn-success"),d(X,"href","./#/"),d(X,"class","btn btn-danger"),d(ne,"class","float-end"),d(i,"class","col-sm-12 col-lg-6 mb-3 mb-lg-0"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(te,ue){C(te,e,ue),L(s,e,null),h(e,r),h(e,n),h(n,i),L(o,i,null),h(i,l),h(i,a),h(i,c),L(u,i,null),h(i,f),L(m,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),G($,t[0]),h(p,M),h(p,k),h(k,D),h(i,F),h(i,x),h(x,H),h(x,j),h(x,I),h(I,V),G(V,t[1]),h(x,ee),h(x,W),h(W,R),h(i,J),h(i,ne),h(ne,Q),h(ne,ie),h(ne,X),h(n,he),fe&&fe.m(n,null),Pe=!0,je||(Fe=[q($,"input",t[24]),q(D,"click",t[25]),q(V,"input",t[26]),q(R,"click",t[27]),q(Q,"click",t[28])],je=!0)},p(te,ue){const Re={};ue[0]&528|ue[1]&2&&(Re.$$scope={dirty:ue,ctx:te}),o.$set(Re);const le={};ue[0]&1056|ue[1]&2&&(le.$$scope={dirty:ue,ctx:te}),u.$set(le);const z={};ue[0]&2112|ue[1]&2&&(z.$$scope={dirty:ue,ctx:te}),m.$set(z),(!Pe||ue[0]&2&&O!==(O=A(te[1]).format("YYYY-MM-DD HH:mm")))&&d($,"max",O),ue[0]&1&&G($,te[0]),(!Pe||ue[0]&1&&K!==(K=A(te[0]).format("YYYY-MM-DD")))&&d(V,"min",K),ue[0]&2&&G(V,te[1]),te[2]?fe?(fe.p(te,ue),ue[0]&4&&S(fe,1)):(fe=eo(te),fe.c(),S(fe,1),fe.m(n,null)):fe&&(Me(),T(fe,1,1,()=>{fe=null}),Ee())},i(te){Pe||(S(s.$$.fragment,te),S(o.$$.fragment,te),S(u.$$.fragment,te),S(m.$$.fragment,te),S(fe),te&&(Ae||Le(()=>{Ae=Ge(e,Je,{duration:500}),Ae.start()})),Pe=!0)},o(te){T(s.$$.fragment,te),T(o.$$.fragment,te),T(u.$$.fragment,te),T(m.$$.fragment,te),T(fe),Pe=!1},d(te){te&&E(e),N(s),N(o),N(u),N(m),fe&&fe.d(),je=!1,$e(Fe)}}}const en=14;function to(){return"400"+Math.floor(Math.random()*1e4)}function Zm(t,e,s){let r,n;io(t,tl,Q=>s(29,n=Q));const i=A().format("YYYY-MM-DD HH:mm");let o=i,l=A(i).add(en,"days").format("YYYY-MM-DD");const a=localStorage.getItem("user_id");let c=!1,u,f,m,g;const p=new URLSearchParams(n);f=p.get("reserve_id")||"",g=p.get("barcode")||"";let b,v,w,$,O;async function M(){const{data:Q,error:ie}=await oe.from("account_details").select("fname, lname").eq("user_id",m).single();ie?(s(10,$="is-invalid"),console.error(ie)):s(7,b=`${Q.fname} ${Q.lname}`);const{data:X,error:he}=await oe.from("library_holdings").select("books(title)").eq("barcode",g).single();he||!X?(s(11,O="is-invalid"),console.error(he)):s(8,v=X.books.title),(!he||!ie)&&(s(3,u=await F()),s(2,c=!c))}async function k(){const{data:Q,error:ie}=await oe.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",f).eq("active",!0).single();ie||!Q?(s(9,w="is-invalid"),console.error(ie)):(s(5,m=Q.stud_id),s(6,g=Q.library_holdings.barcode),M())}async function D(){const{data:Q,error:ie}=await oe.from("library_holdings").select("holding_id").eq("barcode",g).single();ie&&console.error(ie);const X=A(o).format("YYYY-MM-DDTHH:MMZ"),he=A(l).format("YYYY-MM-DDTHH:MMZ"),{error:Ae}=await oe.from("book_borrow").insert({borrow_id:u,stud_id:m,holding_id:Q.holding_id,staff_id:a,borrow_date:X,due_date:he});if(Ae){console.error(Ae);return}const{data:Pe,error:je}=await oe.from("book_reservation").update({staff_id:a,release_date:X,active:!1}).eq("active",!0).eq("holding_id",Q.holding_id).select();if(console.log("updated Rows:",Pe),je){console.error(je);return}const{error:Fe}=await oe.from("library_holdings").update({status:"Borrowed"}).eq("holding_id",Q.holding_id);Fe&&console.error(Fe)}F();async function F(){let Q=to();const{data:ie,error:X}=await oe.from("book_borrow").select().eq("borrow_id",Q);return console.log(ie),ie.length!=0&&(Q=to(),console.log("exists")),console.log(Q),Q}function x(){f=lr(this.value),s(4,f)}const H=()=>s(9,w="");function j(){m=this.value,s(5,m)}const I=()=>s(10,$="");function V(){g=this.value,s(6,g)}const K=()=>s(11,O="");function ee(){o=this.value,s(0,o)}const W=()=>s(0,o=i);function R(){l=this.value,s(1,l)}const J=()=>s(1,l=A(o).add(en,"days").format("YYYY-MM-DD")),ne=()=>{M()};return t.$$.update=()=>{t.$$.dirty[0]&3&&s(12,r=A(l).diff(A(o).format("YYYY-MM-DD"),"days"))},[o,l,c,u,f,m,g,b,v,w,$,O,r,i,a,M,k,D,x,H,j,I,V,K,ee,W,R,J,ne]}class Qm extends we{constructor(e){super(),ve(this,e,Zm,Km,be,{},null,[-1,-1])}}function Xm(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","text"),d(e,"id","book-id")},m(n,i){C(n,e,i),G(e,t[2]),s||(r=q(e,"input",t[13]),s=!0)},p(n,i){i&4&&e.value!==n[2]&&G(e,n[2])},d(n){n&&E(e),s=!1,r()}}}function ep(t){let e,s,r,n,i,o,l;return{c(){e=_("select"),s=_("option"),s.textContent="New",r=_("option"),r.textContent="Good",n=_("option"),n.textContent="Fair",i=_("option"),i.textContent="Poor",s.__value="New",G(s,s.__value),r.__value="Good",G(r,r.__value),n.__value="Fair",G(n,n.__value),i.__value="Poor",G(i,i.__value),d(e,"class","form-select"),d(e,"id","book-condition"),t[8]===void 0&&Le(()=>t[14].call(e))},m(a,c){C(a,e,c),h(e,s),h(e,r),h(e,n),h(e,i),Jn(e,t[8],!0),o||(l=q(e,"change",t[14]),o=!0)},p(a,c){c&256&&Jn(e,a[8])},d(a){a&&E(e),o=!1,l()}}}function tp(t){let e,s,r;return{c(){e=_("textarea"),d(e,"class","form-control"),d(e,"rows","3"),d(e,"id","book-note")},m(n,i){C(n,e,i),G(e,t[7]),s||(r=q(e,"input",t[15]),s=!0)},p(n,i){i&128&&G(e,n[7])},d(n){n&&E(e),s=!1,r()}}}function sp(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x;n=new Be({props:{key:"Borrow ID",value:t[2]}}),o=new Be({props:{key:"Name",value:t[6]+" ("+t[5]+")"}}),a=new Be({props:{key:"Book Title",value:t[3]+" ("+t[4]+")"}}),u=new Be({props:{key:"Condition",value:t[8]}});let H=t[7]&&so(t);return g=new Be({props:{key:"Received by",value:"Francis James E. Salles ("+t[11]+")"}}),b=new Be({props:{key:"Return Due",value:A(t[1]).format("MMMM DD, YYYY")}}),w=new Be({props:{key:"Return Date",value:A(t[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(t[9]>0?`+${t[9]}`:t[9])+" days)"}}),{c(){e=_("div"),s=_("h3"),s.textContent="Borrow Preview",r=y(),U(n.$$.fragment),i=y(),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),H&&H.c(),m=y(),U(g.$$.fragment),p=y(),U(b.$$.fragment),v=y(),U(w.$$.fragment),$=y(),O=_("div"),M=_("button"),M.innerHTML='<i class="bi bi-arrow-up-circle"></i> Return',d(s,"class","py-4 text-center"),d(M,"class","btn btn-secondary"),d(O,"class","float-end my-2"),d(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(j,I){C(j,e,I),h(e,s),h(e,r),L(n,e,null),h(e,i),L(o,e,null),h(e,l),L(a,e,null),h(e,c),L(u,e,null),h(e,f),H&&H.m(e,null),h(e,m),L(g,e,null),h(e,p),L(b,e,null),h(e,v),L(w,e,null),h(e,$),h(e,O),h(O,M),D=!0,F||(x=q(M,"click",np),F=!0)},p(j,I){const V={};I&4&&(V.value=j[2]),n.$set(V);const K={};I&96&&(K.value=j[6]+" ("+j[5]+")"),o.$set(K);const ee={};I&24&&(ee.value=j[3]+" ("+j[4]+")"),a.$set(ee);const W={};I&256&&(W.value=j[8]),u.$set(W),j[7]?H?(H.p(j,I),I&128&&S(H,1)):(H=so(j),H.c(),S(H,1),H.m(e,m)):H&&(Me(),T(H,1,1,()=>{H=null}),Ee());const R={};I&2&&(R.value=A(j[1]).format("MMMM DD, YYYY")),b.$set(R);const J={};I&513&&(J.value=A(j[0]).format("MMMM DD, YYYY hh:mm a")+" ("+(j[9]>0?`+${j[9]}`:j[9])+" days)"),w.$set(J)},i(j){D||(S(n.$$.fragment,j),S(o.$$.fragment,j),S(a.$$.fragment,j),S(u.$$.fragment,j),S(H),S(g.$$.fragment,j),S(b.$$.fragment,j),S(w.$$.fragment,j),j&&Le(()=>{D&&(k||(k=Zn(e,vi,{duration:400,y:-60},!0)),k.run(1))}),D=!0)},o(j){T(n.$$.fragment,j),T(o.$$.fragment,j),T(a.$$.fragment,j),T(u.$$.fragment,j),T(H),T(g.$$.fragment,j),T(b.$$.fragment,j),T(w.$$.fragment,j),j&&(k||(k=Zn(e,vi,{duration:400,y:-60},!1)),k.run(0)),D=!1},d(j){j&&E(e),N(n),N(o),N(a),N(u),H&&H.d(),N(g),N(b),N(w),j&&k&&k.end(),F=!1,x()}}}function so(t){let e,s;return e=new Be({props:{key:"Return Note",value:t[7]}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},p(r,n){const i={};n&128&&(i.value=r[7]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function rp(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K;s=new yt({props:{text:"Return Book"}}),o=new Ye({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Xm]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Condition:",id:"book-condition",$$slots:{default:[ep]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Note:",id:"book-note",$$slots:{default:[tp]},$$scope:{ctx:t}}});let ee=sp(t);return{c(){e=_("main"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),m=_("div"),g=_("label"),g.textContent="Return Time:",p=y(),b=_("div"),v=_("input"),w=y(),$=_("div"),O=_("button"),O.textContent="Now",M=y(),k=_("div"),D=_("button"),D.innerHTML='<i class="bi bi-receipt"></i> Preview',F=y(),x=_("a"),x.innerHTML='<i class="bi bi-x-circle"></i> Cancel',H=y(),ee&&ee.c(),d(g,"class","col-sm-4 col-md-3 col-form-label"),d(g,"for","return-time"),d(v,"class","form-control"),d(v,"type","datetime-local"),d(v,"id","return-time"),d(b,"class","col-sm-5 col-md-6 col-7"),d(O,"class","w-100 btn btn-outline-primary"),d($,"class","col-sm-3 col-md-3 col-auto"),d(m,"class","mb-4 row justify-content-center"),d(D,"class","btn btn-success"),d(x,"href","./#/"),d(x,"class","btn btn-danger"),d(k,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","row justify-content-around"),d(e,"class","container")},m(W,R){C(W,e,R),L(s,e,null),h(e,r),h(e,n),h(n,i),L(o,i,null),h(i,l),L(a,i,null),h(i,c),L(u,i,null),h(i,f),h(i,m),h(m,g),h(m,p),h(m,b),h(b,v),G(v,t[0]),h(m,w),h(m,$),h($,O),h(i,M),h(i,k),h(k,D),h(k,F),h(k,x),h(n,H),ee&&ee.m(n,null),I=!0,V||(K=[q(v,"input",t[16]),q(O,"click",t[17]),q(D,"click",t[12])],V=!0)},p(W,[R]){const J={};R&262148&&(J.$$scope={dirty:R,ctx:W}),o.$set(J);const ne={};R&262400&&(ne.$$scope={dirty:R,ctx:W}),a.$set(ne);const Q={};R&262272&&(Q.$$scope={dirty:R,ctx:W}),u.$set(Q),R&1&&G(v,W[0]),ee.p(W,R)},i(W){I||(S(s.$$.fragment,W),S(o.$$.fragment,W),S(a.$$.fragment,W),S(u.$$.fragment,W),S(ee),W&&(j||Le(()=>{j=Ge(e,Je,{duration:500}),j.start()})),I=!0)},o(W){T(s.$$.fragment,W),T(o.$$.fragment,W),T(a.$$.fragment,W),T(u.$$.fragment,W),T(ee),I=!1},d(W){W&&E(e),N(s),N(o),N(a),N(u),ee&&ee.d(),V=!1,$e(K)}}}function np(){}function ip(t,e,s){let r,n=A().format("YYYY-MM-DD HH:mm"),i=n,o=A().subtract("5","days");const l=localStorage.getItem("user_id");let a,c,u,f,m,g,p;async function b(){const{data:k,error:D}=await oe.rpc("getborrowinfo",{borrowid:a});console.error(D),console.table(k);let F=k[0];s(6,m=`${F.fname} ${F.lname}`),s(5,f=F.stud_id),s(3,c=F.title),s(4,u=F.barcode),s(1,o=F.due_date)}function v(){a=this.value,s(2,a)}function w(){p=Ua(this),s(8,p)}function $(){g=this.value,s(7,g)}function O(){i=this.value,s(0,i)}const M=()=>s(0,i=n);return t.$$.update=()=>{t.$$.dirty&3&&s(9,r=A(i).diff(A(o).format("YYYY-MM-DD"),"days")*-1)},[i,o,a,c,u,f,m,g,p,r,n,l,b,v,w,$,O,M]}class op extends we{constructor(e){super(),ve(this,e,ip,rp,be,{})}}function ap(t){let e,s;return{c(){e=_("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',d(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),cs(e,"height","70vh")},m(r,n){C(r,e,n)},p:P,i(r){r&&(s||Le(()=>{s=Ge(e,Je,{duration:500}),s.start()}))},o:P,d(r){r&&E(e)}}}class Ea extends we{constructor(e){super(),ve(this,e,null,ap,be,{})}}function lp(t){let e,s,r,n;return{c(){e=_("input"),d(e,"class",s="form-control "+t[7]),d(e,"type","text"),d(e,"id","author-name")},m(i,o){C(i,e,o),G(e,t[4]),r||(n=[q(e,"input",t[11]),q(e,"keyup",t[12])],r=!0)},p(i,o){o&128&&s!==(s="form-control "+i[7])&&d(e,"class",s),o&16&&e.value!==i[4]&&G(e,i[4])},d(i){i&&E(e),r=!1,$e(n)}}}function cp(t){let e,s,r,n;return{c(){e=_("textarea"),d(e,"class",s="form-control "+t[8]),d(e,"id","author-bio"),d(e,"rows","4")},m(i,o){C(i,e,o),G(e,t[5]),r||(n=[q(e,"input",t[13]),q(e,"keyup",t[14])],r=!0)},p(i,o){o&256&&s!==(s="form-control "+i[8])&&d(e,"class",s),o&32&&G(e,i[5])},d(i){i&&E(e),r=!1,$e(n)}}}function up(t){let e,s,r,n;return{c(){e=_("input"),d(e,"type","text"),d(e,"id","author-link"),d(e,"class",s="form-control "+t[9])},m(i,o){C(i,e,o),G(e,t[6]),r||(n=[q(e,"input",t[15]),q(e,"keyup",t[16])],r=!0)},p(i,o){o&512&&s!==(s="form-control "+i[9])&&d(e,"class",s),o&64&&e.value!==i[6]&&G(e,i[6])},d(i){i&&E(e),r=!1,$e(n)}}}function dp(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","author-pic"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[18](e),s||(r=q(e,"change",t[17]),s=!0)},p:P,d(n){n&&E(e),t[18](null),s=!1,r()}}}function hp(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W;return s=new yt({props:{text:"Add Author"}}),o=new Ye({props:{label:"Author Name:",id:"author-name",$$slots:{default:[lp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[cp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Author Link:",id:"author-link",$$slots:{default:[up]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Picture:",id:"author-pic",$$slots:{default:[dp]},$$scope:{ctx:t}}}),{c(){e=_("section"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),U(m.$$.fragment),g=y(),p=_("div"),b=_("label"),b.textContent="Preview:",v=y(),w=_("div"),$=_("img"),M=y(),k=_("button"),k.textContent="Remove",F=y(),x=_("div"),H=_("button"),H.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',j=y(),I=_("a"),I.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(H,"class","btn btn-success"),d(I,"href","./#/"),d(x,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(R,J){C(R,e,J),L(s,e,null),h(e,r),h(e,n),h(n,i),L(o,i,null),h(i,l),L(a,i,null),h(i,c),L(u,i,null),h(i,f),L(m,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),h(w,M),h(w,k),h(i,F),h(i,x),h(x,H),h(x,j),h(x,I),K=!0,ee||(W=[q(k,"click",t[19]),q(H,"click",t[10])],ee=!0)},p(R,[J]){const ne={};J&1048720&&(ne.$$scope={dirty:J,ctx:R}),o.$set(ne);const Q={};J&1048864&&(Q.$$scope={dirty:J,ctx:R}),a.$set(Q);const ie={};J&1049152&&(ie.$$scope={dirty:J,ctx:R}),u.$set(ie);const X={};J&1048579&&(X.$$scope={dirty:J,ctx:R}),m.$set(X),(!K||J&8&&!We($.src,O=R[3]))&&d($,"src",O),(!K||J&4&&D!==(D="my-3 row "+R[2]))&&d(p,"class",D)},i(R){K||(S(s.$$.fragment,R),S(o.$$.fragment,R),S(a.$$.fragment,R),S(u.$$.fragment,R),S(m.$$.fragment,R),R&&(V||Le(()=>{V=Ge(e,Je,{duration:500}),V.start()})),K=!0)},o(R){T(s.$$.fragment,R),T(o.$$.fragment,R),T(a.$$.fragment,R),T(u.$$.fragment,R),T(m.$$.fragment,R),K=!1},d(R){R&&E(e),N(s),N(o),N(a),N(u),N(m),ee=!1,$e(W)}}}function fp(t,e,s){let r,n,i="d-none",o,l,a,c,u,f,m;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=a?"":"is-invalid"),s(9,m=c?"":"is-invalid"),console.log(u,f,m)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function v(){a=this.value,s(5,a)}const w=()=>s(8,f="");function $(){c=this.value,s(6,c)}const O=()=>s(9,m="");function M(){r=this.files,s(0,r)}function k(F){os[F?"unshift":"push"](()=>{n=F,s(1,n)})}const D=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const F=URL.createObjectURL(r[0]);s(3,o=F)}else s(2,i="d-none")},[r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D]}class _p extends we{constructor(e){super(),ve(this,e,fp,hp,be,{})}}function mp(t){let e,s,r,n;return{c(){e=_("input"),d(e,"class",s="form-control "+t[7]),d(e,"type","text"),d(e,"id","publisher-name")},m(i,o){C(i,e,o),G(e,t[4]),r||(n=[q(e,"input",t[11]),q(e,"keyup",t[12])],r=!0)},p(i,o){o&128&&s!==(s="form-control "+i[7])&&d(e,"class",s),o&16&&e.value!==i[4]&&G(e,i[4])},d(i){i&&E(e),r=!1,$e(n)}}}function pp(t){let e,s,r,n;return{c(){e=_("textarea"),d(e,"class",s="form-control "+t[8]),d(e,"id","publisher-description"),d(e,"rows","4")},m(i,o){C(i,e,o),G(e,t[5]),r||(n=[q(e,"input",t[13]),q(e,"keyup",t[14])],r=!0)},p(i,o){o&256&&s!==(s="form-control "+i[8])&&d(e,"class",s),o&32&&G(e,i[5])},d(i){i&&E(e),r=!1,$e(n)}}}function gp(t){let e,s,r,n;return{c(){e=_("input"),d(e,"type","text"),d(e,"id","publisher-link"),d(e,"class",s="form-control "+t[9])},m(i,o){C(i,e,o),G(e,t[6]),r||(n=[q(e,"input",t[15]),q(e,"keyup",t[16])],r=!0)},p(i,o){o&512&&s!==(s="form-control "+i[9])&&d(e,"class",s),o&64&&e.value!==i[6]&&G(e,i[6])},d(i){i&&E(e),r=!1,$e(n)}}}function bp(t){let e,s,r;return{c(){e=_("input"),d(e,"class","form-control"),d(e,"type","file"),d(e,"id","publisher-pic"),d(e,"accept","image/*")},m(n,i){C(n,e,i),t[18](e),s||(r=q(e,"change",t[17]),s=!0)},p:P,d(n){n&&E(e),t[18](null),s=!1,r()}}}function vp(t){let e,s,r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D,F,x,H,j,I,V,K,ee,W;return s=new yt({props:{text:"Add Publisher"}}),o=new Ye({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[mp]},$$scope:{ctx:t}}}),a=new Ye({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[pp]},$$scope:{ctx:t}}}),u=new Ye({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[gp]},$$scope:{ctx:t}}}),m=new Ye({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[bp]},$$scope:{ctx:t}}}),{c(){e=_("section"),U(s.$$.fragment),r=y(),n=_("div"),i=_("div"),U(o.$$.fragment),l=y(),U(a.$$.fragment),c=y(),U(u.$$.fragment),f=y(),U(m.$$.fragment),g=y(),p=_("div"),b=_("label"),b.textContent="Preview:",v=y(),w=_("div"),$=_("img"),M=y(),k=_("button"),k.textContent="Remove",F=y(),x=_("div"),H=_("button"),H.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',j=y(),I=_("a"),I.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',d(b,"for","cover-preview"),d(b,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We($.src,O=t[3])||d($,"src",O),d($,"alt","Preview"),d($,"id","cover-preview"),d($,"height","150"),d(k,"class","btn btn-sm btn-danger"),d(w,"class","col-sm-8 col-md-9"),d(w,"id","preview-div"),d(p,"class",D="my-3 row "+t[2]),d(H,"class","btn btn-success"),d(I,"href","./#/"),d(x,"class","float-end"),d(i,"class","col-sm-12 col-lg-6"),d(n,"class","justify-content-around row"),d(e,"class","container")},m(R,J){C(R,e,J),L(s,e,null),h(e,r),h(e,n),h(n,i),L(o,i,null),h(i,l),L(a,i,null),h(i,c),L(u,i,null),h(i,f),L(m,i,null),h(i,g),h(i,p),h(p,b),h(p,v),h(p,w),h(w,$),h(w,M),h(w,k),h(i,F),h(i,x),h(x,H),h(x,j),h(x,I),K=!0,ee||(W=[q(k,"click",t[19]),q(H,"click",t[10])],ee=!0)},p(R,[J]){const ne={};J&1048720&&(ne.$$scope={dirty:J,ctx:R}),o.$set(ne);const Q={};J&1048864&&(Q.$$scope={dirty:J,ctx:R}),a.$set(Q);const ie={};J&1049152&&(ie.$$scope={dirty:J,ctx:R}),u.$set(ie);const X={};J&1048579&&(X.$$scope={dirty:J,ctx:R}),m.$set(X),(!K||J&8&&!We($.src,O=R[3]))&&d($,"src",O),(!K||J&4&&D!==(D="my-3 row "+R[2]))&&d(p,"class",D)},i(R){K||(S(s.$$.fragment,R),S(o.$$.fragment,R),S(a.$$.fragment,R),S(u.$$.fragment,R),S(m.$$.fragment,R),R&&(V||Le(()=>{V=Ge(e,Je,{duration:500}),V.start()})),K=!0)},o(R){T(s.$$.fragment,R),T(o.$$.fragment,R),T(a.$$.fragment,R),T(u.$$.fragment,R),T(m.$$.fragment,R),K=!1},d(R){R&&E(e),N(s),N(o),N(a),N(u),N(m),ee=!1,$e(W)}}}function wp(t,e,s){let r,n,i="d-none",o,l,a,c,u,f,m;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=a?"":"is-invalid"),s(9,m=c?"":"is-invalid"),console.log(u,f,m)}function p(){l=this.value,s(4,l)}const b=()=>s(7,u="");function v(){a=this.value,s(5,a)}const w=()=>s(8,f="");function $(){c=this.value,s(6,c)}const O=()=>s(9,m="");function M(){r=this.files,s(0,r)}function k(F){os[F?"unshift":"push"](()=>{n=F,s(1,n)})}const D=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const F=URL.createObjectURL(r[0]);s(3,o=F)}else s(2,i="d-none")},[r,n,i,o,l,a,c,u,f,m,g,p,b,v,w,$,O,M,k,D]}class yp extends we{constructor(e){super(),ve(this,e,wp,vp,be,{})}}function kp(t){let e,s;return e=new dn({props:{routes:{"*":xd}}}),{c(){U(e.$$.fragment)},m(r,n){L(e,r,n),s=!0},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){N(e,r)}}}function $p(t){let e,s,r,n;return e=new jo({}),r=new dn({props:{routes:{"/":Cd,"/book/:bookID":Io,"/author/:authorID":Yo,"/publisher/:publisherID":Lo,"/search":ss,"/search/author":ss,"/search/publisher":ss,"/add-book":ad,"/add-author":_p,"/add-publisher":yp,"/borrow":Qm,"/return":op,"*":Ea}}}),{c(){U(e.$$.fragment),s=y(),U(r.$$.fragment)},m(i,o){L(e,i,o),C(i,s,o),L(r,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(r.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),n=!1},d(i){i&&E(s),N(e,i),N(r,i)}}}function Sp(t){let e,s,r,n;return e=new jo({}),r=new dn({props:{routes:{"/":$u,"/book/:bookID":Io,"/author/:authorID":Yo,"/publisher/:publisherID":Lo,"/search":ss,"/search/author":ss,"/search/publisher":ss,"*":Ea}}}),{c(){U(e.$$.fragment),s=y(),U(r.$$.fragment)},m(i,o){L(e,i,o),C(i,s,o),L(r,i,o),n=!0},i(i){n||(S(e.$$.fragment,i),S(r.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),n=!1},d(i){i&&E(s),N(e,i),N(r,i)}}}function Op(t){let e,s,r,n;const i=[Sp,$p,kp],o=[];function l(a,c){return a[0]=="client"?0:a[0]=="staff"?1:2}return e=l(t),s=o[e]=i[e](t),{c(){s.c(),r=ze()},m(a,c){o[e].m(a,c),C(a,r,c),n=!0},p(a,[c]){let u=e;e=l(a),e!==u&&(Me(),T(o[u],1,1,()=>{o[u]=null}),Ee(),s=o[e],s||(s=o[e]=i[e](a),s.c()),S(s,1),s.m(r.parentNode,r))},i(a){n||(S(s),n=!0)},o(a){T(s),n=!1},d(a){a&&E(r),o[e].d(a)}}}function Tp(t,e,s){let r;return Pt.subscribe(n=>{s(0,r=n);const i=r=="staff"?"153827":r=="client"?"263690":"";es.set(i),localStorage.setItem("user_id",i)}),[r]}class Dp extends we{constructor(e){super(),ve(this,e,Tp,Op,be,{})}}new Dp({target:document.getElementById("app")})});export default Mp();
