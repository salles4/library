var bo=Object.defineProperty;var vo=(t,e,s)=>e in t?bo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var yo=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Dr=(t,e,s)=>(vo(t,typeof e!="symbol"?e+"":e,s),s);var vp=yo((kp,Js)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function P(){}const zi=t=>t;function ks(t,e){for(const s in e)t[s]=e[s];return t}function wo(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Gi(t){return t()}function Fn(){return Object.create(null)}function Me(t){t.forEach(Gi)}function ar(t){return typeof t=="function"}function ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ls;function We(t,e){return t===e?!0:(Ls||(Ls=document.createElement("a")),Ls.href=e,t===Ls.href)}function ko(t){return Object.keys(t).length===0}function Ji(t,...e){if(t==null){for(const r of e)r(void 0);return P}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function Ki(t,e,s){t.$$.on_destroy.push(Ji(e,s))}function or(t,e,s,r){if(t){const n=Zi(t,e,s,r);return t[0](n)}}function Zi(t,e,s,r){return t[1]&&r?ks(s.ctx.slice(),t[1](r(e))):s.ctx}function lr(t,e,s,r){if(t[2]&&r){const n=t[2](r(s));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],a=Math.max(e.dirty.length,n.length);for(let l=0;l<a;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function cr(t,e,s,r,n,i){if(n){const a=Zi(e,s,r,i);t.p(a,n)}}function ur(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let r=0;r<s;r++)e[r]=-1;return e}return-1}const Qi=typeof window<"u";let $o=Qi?()=>window.performance.now():()=>Date.now(),sn=Qi?t=>requestAnimationFrame(t):P;const Xt=new Set;function Xi(t){Xt.forEach(e=>{e.c(t)||(Xt.delete(e),e.f())}),Xt.size!==0&&sn(Xi)}function So(t){let e;return Xt.size===0&&sn(Xi),{promise:new Promise(s=>{Xt.add(e={c:t,f:s})}),abort(){Xt.delete(e)}}}function d(t,e){t.appendChild(e)}function ea(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Oo(t){const e=m("style");return e.textContent="/* empty */",To(ea(t),e),e.sheet}function To(t,e){return d(t.head||t,e),e.sheet}function E(t,e,s){t.insertBefore(e,s||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function Ze(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function m(t){return document.createElement(t)}function K(t){return document.createTextNode(t)}function k(){return K(" ")}function Qe(){return K("")}function H(t,e,s,r){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)}function Do(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function hr(t){return t===""?null:+t}function Mo(t){return Array.from(t.childNodes)}function ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function V(t,e){t.value=e??""}function Ut(t,e,s,r){s==null?t.style.removeProperty(e):t.style.setProperty(e,s,"")}function ta(t,e,{bubbles:s=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:s,cancelable:r})}function Ks(t,e){return new t(e)}const Zs=new Map;let Qs=0;function Eo(t){let e=5381,s=t.length;for(;s--;)e=(e<<5)-e^t.charCodeAt(s);return e>>>0}function Co(t,e){const s={stylesheet:Oo(e),rules:{}};return Zs.set(t,s),s}function Po(t,e,s,r,n,i,a,l=0){const o=16.666/r;let c=`{
`;for(let b=0;b<=1;b+=o){const w=e+(s-e)*i(b);c+=b*100+`%{${a(w,1-w)}}
`}const u=c+`100% {${a(s,1-s)}}
}`,f=`__svelte_${Eo(u)}_${l}`,_=ea(t),{stylesheet:g,rules:p}=Zs.get(_)||Co(_,t);p[f]||(p[f]=!0,g.insertRule(`@keyframes ${f} ${u}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${f} ${r}ms linear ${n}ms 1 both`,Qs+=1,f}function Wn(t,e){const s=(t.style.animation||"").split(", "),r=s.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=s.length-r.length;n&&(t.style.animation=r.join(", "),Qs-=n,Qs||Ro())}function Ro(){sn(()=>{Qs||(Zs.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&M(e)}),Zs.clear())})}let $s;function _t(t){$s=t}function Cs(){if(!$s)throw new Error("Function called outside component initialization");return $s}function Ss(t){Cs().$$.on_mount.push(t)}function jo(t){Cs().$$.after_update.push(t)}function Ao(t){Cs().$$.on_destroy.push(t)}function Io(){const t=Cs();return(e,s,{cancelable:r=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=ta(e,s,{cancelable:r});return n.slice().forEach(a=>{a.call(t,i)}),!i.defaultPrevented}return!0}}function xr(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(r=>r.call(this,e))}const Jt=[],as=[];let es=[];const Hn=[],sa=Promise.resolve();let Fr=!1;function ra(){Fr||(Fr=!0,sa.then(rn))}function na(){return ra(),sa}function Ne(t){es.push(t)}const Mr=new Set;let Wt=0;function rn(){if(Wt!==0)return;const t=$s;do{try{for(;Wt<Jt.length;){const e=Jt[Wt];Wt++,_t(e),Lo(e.$$)}}catch(e){throw Jt.length=0,Wt=0,e}for(_t(null),Jt.length=0,Wt=0;as.length;)as.pop()();for(let e=0;e<es.length;e+=1){const s=es[e];Mr.has(s)||(Mr.add(s),s())}es.length=0}while(Jt.length);for(;Hn.length;)Hn.pop()();Fr=!1,Mr.clear(),_t(t)}function Lo(t){if(t.fragment!==null){t.update(),Me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function Yo(t){const e=[],s=[];es.forEach(r=>t.indexOf(r)===-1?e.push(r):s.push(r)),s.forEach(r=>r()),es=e}let _s;function No(){return _s||(_s=Promise.resolve(),_s.then(()=>{_s=null})),_s}function Bn(t,e,s){t.dispatchEvent(ta(`intro${s}`))}const Hs=new Set;let Lt;function ke(){Lt={r:0,c:[],p:Lt}}function $e(){Lt.r||Me(Lt.c),Lt=Lt.p}function S(t,e){t&&t.i&&(Hs.delete(t),t.i(e))}function T(t,e,s,r){if(t&&t.o){if(Hs.has(t))return;Hs.add(t),Lt.c.push(()=>{Hs.delete(t),r&&(s&&t.d(1),r())}),t.o(e)}else r&&r()}const Uo={duration:0};function Ve(t,e,s){const r={direction:"in"};let n=e(t,s,r),i=!1,a,l,o=0;function c(){a&&Wn(t,a)}function u(){const{delay:_=0,duration:g=300,easing:p=zi,tick:y=P,css:b}=n||Uo;b&&(a=Po(t,0,1,g,_,p,b,o++)),y(0,1);const w=$o()+_,v=w+g;l&&l.abort(),i=!0,Ne(()=>Bn(t,!0,"start")),l=So($=>{if(i){if($>=v)return y(1,0),Bn(t,!0,"end"),c(),i=!1;if($>=w){const D=p(($-w)/g);y(D,1-D)}}return i})}let f=!1;return{start(){f||(f=!0,Wn(t),ar(n)?(n=n(r),No().then(u)):u())},invalidate(){f=!1},end(){i&&(c(),i=!1)}}}function Bs(t,e){const s=e.token={};function r(n,i,a,l){if(e.token!==s)return;e.resolved=l;let o=e.ctx;a!==void 0&&(o=o.slice(),o[a]=l);const c=n&&(e.current=n)(o);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==i&&f&&(ke(),T(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),$e())}):e.block.d(1),c.c(),S(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&rn()}if(wo(t)){const n=Cs();if(t.then(i=>{_t(n),r(e.then,1,e.value,i),_t(null)},i=>{if(_t(n),r(e.catch,2,e.error,i),_t(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function qs(t,e,s){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,s)}function De(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Xs(t,e){const s={},r={},n={$$scope:1};let i=t.length;for(;i--;){const a=t[i],l=e[i];if(l){for(const o in a)o in l||(r[o]=1);for(const o in l)n[o]||(s[o]=l[o],n[o]=1);t[i]=l}else for(const o in a)n[o]=1}for(const a in r)a in s||(s[a]=void 0);return s}function er(t){return typeof t=="object"&&t!==null?t:{}}function L(t){t&&t.c()}function A(t,e,s){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,s),Ne(()=>{const i=t.$$.on_mount.map(Gi).filter(ar);t.$$.on_destroy?t.$$.on_destroy.push(...i):Me(i),t.$$.on_mount=[]}),n.forEach(Ne)}function I(t,e){const s=t.$$;s.fragment!==null&&(Yo(s.after_update),Me(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function xo(t,e){t.$$.dirty[0]===-1&&(Jt.push(t),ra(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,s,r,n,i,a=null,l=[-1]){const o=$s;_t(t);const c=t.$$={fragment:null,ctx:[],props:i,update:P,not_equal:n,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Fn(),dirty:l,skip_bound:!1,root:e.target||o.$$.root};a&&a(c.root);let u=!1;if(c.ctx=s?s(t,e.props||{},(f,_,...g)=>{const p=g.length?g[0]:_;return c.ctx&&n(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&xo(t,f)),_}):[],c.update(),u=!0,Me(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=Mo(e.target);c.fragment&&c.fragment.l(f),f.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&S(t.$$.fragment),A(t,e.target,e.anchor),rn()}_t(o)}class de{constructor(){Dr(this,"$$");Dr(this,"$$set")}$destroy(){I(this,1),this.$destroy=P}$on(e,s){if(!ar(s))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(s),()=>{const n=r.indexOf(s);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!ko(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fo);const Ht=[];function ia(t,e){return{subscribe:dr(t,e).subscribe}}function dr(t,e=P){let s;const r=new Set;function n(l){if(ue(t,l)&&(t=l,s)){const o=!Ht.length;for(const c of r)c[1](),Ht.push(c,t);if(o){for(let c=0;c<Ht.length;c+=2)Ht[c][0](Ht[c+1]);Ht.length=0}}}function i(l){n(l(t))}function a(l,o=P){const c=[l,o];return r.add(c),r.size===1&&(s=e(n,i)||P),l(t),()=>{r.delete(c),r.size===0&&s&&(s(),s=null)}}return{set:n,update:i,subscribe:a}}function aa(t,e,s){const r=!Array.isArray(t),n=r?[t]:t;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return ia(s,(a,l)=>{let o=!1;const c=[];let u=0,f=P;const _=()=>{if(u)return;f();const p=e(r?c[0]:c,a,l);i?a(p):f=ar(p)?p:P},g=n.map((p,y)=>Ji(p,b=>{c[y]=b,u&=~(1<<y),o&&_()},()=>{u|=1<<y}));return o=!0,_(),function(){Me(g),f(),o=!1}})}const os=dr(localStorage.getItem("accType")),Wo=dr(localStorage.getItem("user_id"));function Ho(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,r,n,i,a=[],l="",o=t.split("/");for(o[0]||o.shift();n=o.shift();)s=n[0],s==="*"?(a.push("wild"),l+="/(.*)"):s===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~r?r:~i?i:n.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+"/?$","i")}}function Bo(t){let e,s,r;const n=[t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ks(c,n[u]);return o!==void 0&&o&4&&(c=ks(c,Xs(n,[er(l[2])]))),{props:c}}return i&&(e=Ks(i,a(t)),e.$on("routeEvent",t[7])),{c(){e&&L(e.$$.fragment),s=Qe()},m(l,o){e&&A(e,l,o),E(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){ke();const c=e;T(c.$$.fragment,1,0,()=>{I(c,1)}),$e()}i?(e=Ks(i,a(l,o)),e.$on("routeEvent",l[7]),L(e.$$.fragment),S(e.$$.fragment,1),A(e,s.parentNode,s)):e=null}else if(i){const c=o&4?Xs(n,[er(l[2])]):{};e.$set(c)}},i(l){r||(e&&S(e.$$.fragment,l),r=!0)},o(l){e&&T(e.$$.fragment,l),r=!1},d(l){l&&M(s),e&&I(e,l)}}}function qo(t){let e,s,r;const n=[{params:t[1]},t[2]];var i=t[0];function a(l,o){let c={};for(let u=0;u<n.length;u+=1)c=ks(c,n[u]);return o!==void 0&&o&6&&(c=ks(c,Xs(n,[o&2&&{params:l[1]},o&4&&er(l[2])]))),{props:c}}return i&&(e=Ks(i,a(t)),e.$on("routeEvent",t[6])),{c(){e&&L(e.$$.fragment),s=Qe()},m(l,o){e&&A(e,l,o),E(l,s,o),r=!0},p(l,o){if(o&1&&i!==(i=l[0])){if(e){ke();const c=e;T(c.$$.fragment,1,0,()=>{I(c,1)}),$e()}i?(e=Ks(i,a(l,o)),e.$on("routeEvent",l[6]),L(e.$$.fragment),S(e.$$.fragment,1),A(e,s.parentNode,s)):e=null}else if(i){const c=o&6?Xs(n,[o&2&&{params:l[1]},o&4&&er(l[2])]):{};e.$set(c)}},i(l){r||(e&&S(e.$$.fragment,l),r=!0)},o(l){e&&T(e.$$.fragment,l),r=!1},d(l){l&&M(s),e&&I(e,l)}}}function Vo(t){let e,s,r,n;const i=[qo,Bo],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e===u?a[e].p(o,c):(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function qn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const s=e.indexOf("?");let r="";return s>-1&&(r=e.substr(s+1),e=e.substr(0,s)),{location:e,querystring:r}}const nn=ia(null,function(e){e(qn());const s=()=>{e(qn())};return window.addEventListener("hashchange",s,!1),function(){window.removeEventListener("hashchange",s,!1)}}),zo=aa(nn,t=>t.location),Go=aa(nn,t=>t.querystring),Vn=dr(void 0);async function Jo(){await na(),window.history.back()}function Ko(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Zo(t,e,s){let{routes:r={}}=e,{prefix:n=""}=e,{restoreScrollState:i=!1}=e;class a{constructor(O,C){if(!C||typeof C!="function"&&(typeof C!="object"||C._sveltesparouter!==!0))throw Error("Invalid component object");if(!O||typeof O=="string"&&(O.length<1||O.charAt(0)!="/"&&O.charAt(0)!="*")||typeof O=="object"&&!(O instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:N,keys:U}=Ho(O);this.path=O,typeof C=="object"&&C._sveltesparouter===!0?(this.component=C.component,this.conditions=C.conditions||[],this.userData=C.userData,this.props=C.props||{}):(this.component=()=>Promise.resolve(C),this.conditions=[],this.props={}),this._pattern=N,this._keys=U}match(O){if(n){if(typeof n=="string")if(O.startsWith(n))O=O.substr(n.length)||"/";else return null;else if(n instanceof RegExp){const q=O.match(n);if(q&&q[0])O=O.substr(q[0].length)||"/";else return null}}const C=this._pattern.exec(O);if(C===null)return null;if(this._keys===!1)return C;const N={};let U=0;for(;U<this._keys.length;){try{N[this._keys[U]]=decodeURIComponent(C[U+1]||"")||null}catch{N[this._keys[U]]=null}U++}return N}async checkConditions(O){for(let C=0;C<this.conditions.length;C++)if(!await this.conditions[C](O))return!1;return!0}}const l=[];r instanceof Map?r.forEach((D,O)=>{l.push(new a(O,D))}):Object.keys(r).forEach(D=>{l.push(new a(D,r[D]))});let o=null,c=null,u={};const f=Io();async function _(D,O){await na(),f(D,O)}let g=null,p=null;i&&(p=D=>{D.state&&(D.state.__svelte_spa_router_scrollY||D.state.__svelte_spa_router_scrollX)?g=D.state:g=null},window.addEventListener("popstate",p),jo(()=>{Ko(g)}));let y=null,b=null;const w=nn.subscribe(async D=>{y=D;let O=0;for(;O<l.length;){const C=l[O].match(D.location);if(!C){O++;continue}const N={route:l[O].path,location:D.location,querystring:D.querystring,userData:l[O].userData,params:C&&typeof C=="object"&&Object.keys(C).length?C:null};if(!await l[O].checkConditions(N)){s(0,o=null),b=null,_("conditionsFailed",N);return}_("routeLoading",Object.assign({},N));const U=l[O].component;if(b!=U){U.loading?(s(0,o=U.loading),b=U,s(1,c=U.loadingParams),s(2,u={}),_("routeLoaded",Object.assign({},N,{component:o,name:o.name,params:c}))):(s(0,o=null),b=null);const q=await U();if(D!=y)return;s(0,o=q&&q.default||q),b=U}C&&typeof C=="object"&&Object.keys(C).length?s(1,c=C):s(1,c=null),s(2,u=l[O].props),_("routeLoaded",Object.assign({},N,{component:o,name:o.name,params:c})).then(()=>{Vn.set(c)});return}s(0,o=null),b=null,Vn.set(void 0)});Ao(()=>{w(),p&&window.removeEventListener("popstate",p)});function v(D){xr.call(this,t,D)}function $(D){xr.call(this,t,D)}return t.$$set=D=>{"routes"in D&&s(3,r=D.routes),"prefix"in D&&s(4,n=D.prefix),"restoreScrollState"in D&&s(5,i=D.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[o,c,u,r,n,i,v,$]}class an extends de{constructor(e){super(),he(this,e,Zo,Vo,ue,{routes:3,prefix:4,restoreScrollState:5})}}function zn(t){let e;return{c(){e=m("a"),e.textContent="Add book",h(e,"class","nav-link svelte-oup04o"),h(e,"href","./#/add-book")},m(s,r){E(s,e,r)},d(s){s&&M(e)}}}function Qo(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D=localStorage.getItem("user_id")+"",O,C,N,U,q,F,z,ee,Z,fe,G,Y,B,ce,ge,Ee,_e,be=t[0]=="staff"&&zn();return{c(){e=m("nav"),s=m("div"),r=m("a"),r.innerHTML=`<i class="bi bi-book"></i> 
      Library System
      <small class="fs-6 text-white-50 ms-2 d-sm-inline d-none">CTADVDBL Project</small>`,n=k(),i=m("button"),i.innerHTML='<span class="navbar-toggler-icon"></span>',a=k(),l=m("div"),o=m("div"),c=m("a"),c.textContent="Books",u=k(),f=m("a"),f.textContent="Authors",_=k(),g=m("a"),g.textContent="Publishers",p=k(),be&&be.c(),y=k(),b=m("li"),w=m("a"),v=m("i"),$=k(),O=K(D),C=k(),N=m("ul"),U=m("li"),U.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Profile</a>',q=k(),F=m("li"),F.innerHTML='<a class="dropdown-item disabled svelte-oup04o" href="#">Settings</a>',z=k(),ee=m("li"),ee.innerHTML='<hr class="dropdown-divider"/>',Z=k(),fe=m("li"),G=m("a"),G.textContent="Log Out",Y=k(),B=m("button"),ce=m("span"),h(r,"class","navbar-brand m-0 svelte-oup04o"),h(r,"href","./#/"),h(i,"class","navbar-toggler"),h(i,"type","button"),h(i,"data-bs-toggle","collapse"),h(i,"data-bs-target","#navbarContent"),h(c,"class","nav-link svelte-oup04o"),h(c,"href","./#/search"),h(f,"class","nav-link svelte-oup04o"),h(f,"href","./#/search/author"),h(g,"class","nav-link svelte-oup04o"),h(g,"href","./#/search/publisher"),h(v,"class","bi bi-person-fill"),h(w,"class","nav-link dropdown-toggle svelte-oup04o"),h(w,"href","#"),h(w,"role","button"),h(w,"data-bs-toggle","dropdown"),h(w,"aria-expanded","false"),h(G,"class","dropdown-item text-danger"),h(G,"href","./#/"),h(N,"class","dropdown-menu"),h(b,"class","nav-item dropdown"),h(ce,"class",ge="bi bi-"+t[1]+" svelte-oup04o"),h(B,"title","Switch theme"),h(B,"class","px-1 border-0 bg-transparent nav-link svelte-oup04o"),h(o,"class","navbar-nav ms-auto svelte-oup04o"),h(l,"class","collapse navbar-collapse"),h(l,"id","navbarContent"),h(s,"class","container px-4 fw-semibold"),h(e,"class","navbar navbar-expand-lg bg-primary bg-gradient shadow")},m(Ye,Ae){E(Ye,e,Ae),d(e,s),d(s,r),d(s,n),d(s,i),d(s,a),d(s,l),d(l,o),d(o,c),d(o,u),d(o,f),d(o,_),d(o,g),d(o,p),be&&be.m(o,null),d(o,y),d(o,b),d(b,w),d(w,v),d(w,$),d(w,O),d(b,C),d(b,N),d(N,U),d(N,q),d(N,F),d(N,z),d(N,ee),d(N,Z),d(N,fe),d(fe,G),d(o,Y),d(o,B),d(B,ce),Ee||(_e=[H(G,"click",t[3]),H(B,"click",t[2])],Ee=!0)},p(Ye,[Ae]){Ye[0]=="staff"?be||(be=zn(),be.c(),be.m(o,y)):be&&(be.d(1),be=null),Ae&2&&ge!==(ge="bi bi-"+Ye[1]+" svelte-oup04o")&&h(ce,"class",ge)},i:P,o:P,d(Ye){Ye&&M(e),be&&be.d(),Ee=!1,Me(_e)}}}function Xo(t,e,s){let r,n;os.subscribe(o=>s(0,n=o));let i=localStorage.getItem("theme")||"light";function a(){s(4,i=i=="light"?"dark":"light"),localStorage.setItem("theme",i)}function l(){os.set(""),localStorage.removeItem("accType")}return t.$$.update=()=>{t.$$.dirty&16&&document.querySelector("body").setAttribute("data-bs-theme",i),t.$$.dirty&16&&s(1,r=i=="dark"?"moon-stars-fill":"brightness-high-fill")},[n,r,a,l,i]}class oa extends de{constructor(e){super(),he(this,e,Xo,Qo,ue,{})}}function el(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v;return{c(){e=m("section"),s=m("div"),r=m("div"),n=m("div"),i=m("img"),l=k(),o=m("div"),c=m("img"),f=k(),_=m("div"),g=m("img"),y=k(),b=m("button"),b.innerHTML='<span class="carousel-control-prev-icon"></span>',w=k(),v=m("button"),v.innerHTML='<span class="carousel-control-next-icon"></span>',We(i.src,a=Er)||h(i,"src",a),h(i,"class","d-block w-100"),h(i,"alt","..."),h(n,"class","carousel-item active"),We(c.src,u=Er)||h(c,"src",u),h(c,"class","d-block w-100"),h(c,"alt","..."),h(o,"class","carousel-item"),We(g.src,p=Er)||h(g,"src",p),h(g,"class","d-block w-100"),h(g,"alt","..."),h(_,"class","carousel-item"),h(r,"class","carousel-inner"),h(b,"class","carousel-control-prev"),h(b,"type","button"),h(b,"data-bs-target","#homeAdCarousel"),h(b,"data-bs-slide","prev"),h(v,"class","carousel-control-next"),h(v,"type","button"),h(v,"data-bs-target","#homeAdCarousel"),h(v,"data-bs-slide","next"),h(s,"id","homeAdCarousel"),h(s,"class","carousel slide"),h(s,"data-bs-ride","carousel"),h(s,"data-bs-interval","8000")},m($,D){E($,e,D),d(e,s),d(s,r),d(r,n),d(n,i),d(r,l),d(r,o),d(o,c),d(r,f),d(r,_),d(_,g),d(s,y),d(s,b),d(s,w),d(s,v)},p:P,i:P,o:P,d($){$&&M(e)}}}let Er="./cover.jpg";class tl extends de{constructor(e){super(),he(this,e,null,el,ue,{})}}function sl(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h5"),l=m("a"),o=K(t[1]),u=k(),f=m("small"),_=m("i"),g=k(),p=K(t[2]),We(s.src,r=t[3])||h(s,"src",r),h(s,"alt","book cover"),h(s,"class","svelte-1a99e4f"),h(l,"class","stretched-link svelte-1a99e4f"),h(l,"href",c="./#/book/"+t[0]),h(a,"class","card-title"),h(_,"class","bi bi-person"),h(f,"class","card-text"),h(i,"class","card-body"),h(e,"class","card col-md-3 col-6 svelte-1a99e4f")},m(y,b){E(y,e,b),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o),d(i,u),d(i,f),d(f,_),d(f,g),d(f,p)},p(y,[b]){b&2&&ae(o,y[1]),b&1&&c!==(c="./#/book/"+y[0])&&h(l,"href",c),b&4&&ae(p,y[2])},i:P,o:P,d(y){y&&M(e)}}}function rl(t,e,s){let{id:r=0}=e,{title:n}=e,{author:i}=e,a=r>4?"./book-cover.png":`./${r}.jpg`;return t.$$set=l=>{"id"in l&&s(0,r=l.id),"title"in l&&s(1,n=l.title),"author"in l&&s(2,i=l.author)},[r,n,i,a]}class fr extends de{constructor(e){super(),he(this,e,rl,sl,ue,{id:0,title:1,author:2})}}function Gn(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("a"),r=m("button"),n=K(t[3]),i=k(),a=m("i"),h(a,"class","bi bi-arrow-right"),h(r,"class","btn btn-outline-primary btn-sm"),h(s,"href",l="./#/"+t[2]),h(e,"class","align-middle align-self-center")},m(o,c){E(o,e,c),d(e,s),d(s,r),d(r,n),d(r,i),d(r,a)},p(o,c){c&8&&ae(n,o[3]),c&4&&l!==(l="./#/"+o[2])&&h(s,"href",l)},d(o){o&&M(e)}}}function nl(t){let e,s,r,n,i,a,l,o,c,u,f=t[2]!==""&&Gn(t);const _=t[5].default,g=or(_,t,t[4],null);return{c(){e=m("section"),s=m("div"),r=m("h4"),n=m("i"),a=k(),l=K(t[0]),o=k(),f&&f.c(),c=k(),g&&g.c(),h(n,"class",i="bi bi-"+t[1]),h(r,"class","my-3"),h(s,"class","border-bottom border-2 d-flex justify-content-between mb-2")},m(p,y){E(p,e,y),d(e,s),d(s,r),d(r,n),d(r,a),d(r,l),d(s,o),f&&f.m(s,null),d(e,c),g&&g.m(e,null),u=!0},p(p,[y]){(!u||y&2&&i!==(i="bi bi-"+p[1]))&&h(n,"class",i),(!u||y&1)&&ae(l,p[0]),p[2]!==""?f?f.p(p,y):(f=Gn(p),f.c(),f.m(s,null)):f&&(f.d(1),f=null),g&&g.p&&(!u||y&16)&&cr(g,_,p,p[4],u?lr(_,p[4],y,null):ur(p[4]),null)},i(p){u||(S(g,p),u=!0)},o(p){T(g,p),u=!1},d(p){p&&M(e),f&&f.d(),g&&g.d(p)}}}function il(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i}=e,{icon:a}=e,{link:l=""}=e,{linkText:o="See All"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"icon"in c&&s(1,a=c.icon),"link"in c&&s(2,l=c.link),"linkText"in c&&s(3,o=c.linkText),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class Mt extends de{constructor(e){super(),he(this,e,il,nl,ue,{title:0,icon:1,link:2,linkText:3})}}const al="modulepreload",ol=function(t){return"/library/"+t},Jn={},ls=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(s.map(l=>{if(l=ol(l),l in Jn)return;Jn[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":al,o||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),o)return new Promise((f,_)=>{u.addEventListener("load",f),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},ll=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ls(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class on extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class cl extends on{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ul extends on{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hl extends on{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Wr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Wr||(Wr={}));var dl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class fl{constructor(e,{headers:s={},customFetch:r,region:n=Wr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=ll(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return dl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=s;let l={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(l["x-region"]=o);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(l["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(l["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(p=>{throw new cl(p)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new ul(u);if(!u.ok)throw new hl(u);let _=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield u.json():_==="application/octet-stream"?g=yield u.blob():_==="text/event-stream"?g=u:_==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var _l=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cs=_l();const ml=cs.fetch,ln=cs.fetch.bind(cs),la=cs.Headers,pl=cs.Request,gl=cs.Response,Ps=Object.freeze(Object.defineProperty({__proto__:null,Headers:la,Request:pl,Response:gl,default:ln,fetch:ml},Symbol.toStringTag,{value:"Module"}));class bl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class vl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ln:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,o;let c=null,u=null,f=null,_=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,_=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{c=JSON.parse(y),Array.isArray(c)&&i.status===404&&(u=[],c=null,_=200,g="OK")}catch{i.status===404&&y===""?(_=204,g="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((o=c==null?void 0:c.details)===null||o===void 0)&&o.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new bl(c)}return{error:c,data:u,count:f,status:_,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,o;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}}class yl extends vl{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const o=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Kt extends yl{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}}class wl{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(a.length>0){const l=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new Kt({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Kt({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new Kt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Kt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const kl="1.15.2",$l={"X-Client-Info":`postgrest-js/${kl}`};class cn{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},$l),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new wl(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new cn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let o;r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{l.searchParams.append(u,f)})):(a="POST",o=s);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Kt({method:a,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const Sl="2.9.5",Ol={"X-Client-Info":`realtime-js/${Sl}`},Tl="1.0.0",ca=1e4,Dl=1e3;var ts;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ts||(ts={}));var qe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(qe||(qe={}));var st;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(st||(st={}));var Hr;(function(t){t.websocket="websocket"})(Hr||(Hr={}));var It;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(It||(It={}));class ua{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ml{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+n));a=a+n;const o=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class Cr{constructor(e,s,r={},n=ca){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Kn||(Kn={}));class vs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,n,i,a),this.pendingDiffs.forEach(o=>{this.state=vs.syncDiff(this.state,o,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=vs.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),a=this.transformState(s),l={},o={};return this.map(i,(c,u)=>{a[c]||(o[c]=u)}),this.map(a,(c,u)=>{const f=i[c];if(f){const _=u.map(b=>b.presence_ref),g=f.map(b=>b.presence_ref),p=u.filter(b=>g.indexOf(b.presence_ref)<0),y=f.filter(b=>_.indexOf(b.presence_ref)<0);p.length>0&&(l[c]=p),y.length>0&&(o[c]=y)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:o},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,o)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(o),u.length>0){const f=e[l].map(g=>g.presence_ref),_=u.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(..._)}r(l,u,o)}),this.map(a,(l,o)=>{let c=e[l];if(!c)return;const u=o.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=c,n(l,c,o),c.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ye||(ye={}));const Zn=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=El(a,t,e,n),i),{})},El=(t,e,s,r)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,a=s[t];return i&&!r.includes(i)?ha(i,a):Br(a)},ha=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return jl(e,s)}switch(t){case ye.bool:return Cl(e);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return Pl(e);case ye.json:case ye.jsonb:return Rl(e);case ye.timestamp:return Al(e);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return Br(e);default:return Br(e)}},Br=t=>t,Cl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Pl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Rl=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},jl=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>ha(e,l))}return t},Al=t=>typeof t=="string"?t.replace(" ","T"):t;var Qn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Qn||(Qn={}));var Xn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(Xn||(Xn={}));var ei;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ei||(ei={}));class un{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},s.config),this.timeout=this.socket.timeout,this.joinPush=new Cr(this,st.join,this.params,this.timeout),this.rejoinTimer=new ua(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new vs(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},o={broadcast:i,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,_=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let p=0;p<_;p++){const y=f[p],{filter:{event:b,schema:w,table:v,filter:$}}=y,D=c&&c[p];if(D&&D.event===b&&D.schema===w&&D.table===v&&D.filter===$)g.push(Object.assign(Object.assign({},y),{id:D.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(o){return o.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,o;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qe.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new Cr(this,st.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Cr(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:o,leave:c,join:u}=st;if(r&&[l,o,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,s,r);if(s&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var p,y,b;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(y=g.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(g=>g.callback(_,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,y,b,w,v,$;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const D=g.id,O=(p=g.filter)===null||p===void 0?void 0:p.event;return D&&((y=s.ids)===null||y===void 0?void 0:y.includes(D))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const D=(v=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return D==="*"||D===(($=s==null?void 0:s.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:y,table:b,commit_timestamp:w,type:v,errors:$}=p;_=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:w,eventType:v,new:{},old:{},errors:$}),this._getPayloadRecords(p))}g.callback(_,r)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&un.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(st.close,{},e)}_onError(e){this._on(st.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Zn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Zn(e.columns,e.old_record)),s}}const Il=()=>{},Ll=typeof WebSocket<"u";class Yl{constructor(e,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Ol,this.params={},this.timeout=ca,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Il,this.conn=null,this.sendBuffer=[],this.serializer=new Ml,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>ls(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:o})=>o(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${Hr.websocket}`,s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ua(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ll){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Nl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ls(()=>import("./browser-BImCA5dO.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return It.Connecting;case ts.open:return It.Open;case ts.closing:return It.Closing;default:return It.Closed}}isConnected(){return this.connectionState()===It.Open}channel(e,s={config:{}}){const r=new un(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(st.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tl}))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:a}=s;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(st.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Dl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Nl{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ts.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class hn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ul extends hn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ti extends hn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var xl=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const da=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ls(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Fl=()=>xl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ls(()=>Promise.resolve().then(()=>Ps),void 0)).Response:Response});var us=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const Pr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Wl=(t,e)=>us(void 0,void 0,void 0,function*(){const s=yield Fl();t instanceof s?t.json().then(r=>{e(new Ul(Pr(r),t.status||500))}).catch(r=>{e(new ti(Pr(r),r))}):e(new ti(Pr(t),t))}),Hl=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};function _r(t,e,s,r,n,i){return us(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,Hl(e,r,n,i)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>a(o)).catch(o=>Wl(o,l))})})}function qr(t,e,s,r){return us(this,void 0,void 0,function*(){return _r(t,"GET",e,s,r)})}function St(t,e,s,r,n){return us(this,void 0,void 0,function*(){return _r(t,"POST",e,r,n,s)})}function Bl(t,e,s,r,n){return us(this,void 0,void 0,function*(){return _r(t,"PUT",e,r,n,s)})}function fa(t,e,s,r,n){return us(this,void 0,void 0,function*(){return _r(t,"DELETE",e,r,n,s)})}var Je=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const ql={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},si={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vl{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=da(n)}uploadOrUpdate(e,s,r,n){return Je(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},si),n),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl)):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType);const o=this._removeEmptyFolders(s),c=this._getFinalPath(o),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:o,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(xe(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let o;const c=Object.assign({upsert:si.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",c.cacheControl)):(o=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:o,headers:u}),_=yield f.json();return f.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(xe(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e){return Je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=yield St(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new hn("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}update(e,s,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s){return Je(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}copy(e,s){return Je(this,void 0,void 0,function*(){try{return{data:{path:(yield St(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s},{headers:this.headers})).Key},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,r){return Je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield St(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Je(this,void 0,void 0,function*(){try{const n=yield St(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}download(e,s){return Je(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield qr(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Je(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}list(e,s,r){return Je(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ql),s),{prefix:e||""});return{data:yield St(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const zl="2.5.5",Gl={"X-Client-Info":`storage-js/${zl}`};var Bt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class Jl{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Gl),s),this.fetch=da(r)}listBuckets(){return Bt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Bt(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Bt(this,void 0,void 0,function*(){try{return{data:yield Bl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}})}}class Kl extends Jl{constructor(e,s={},r){super(e,s,r)}from(e){return new Vl(this.url,this.headers,e,this.fetch)}}const Zl="2.43.2";let bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";const Ql={"X-Client-Info":`supabase-js-${bs}/${Zl}`},Xl={headers:Ql},ec={schema:"public"},tc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sc={};var rc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};const nc=t=>{let e;return t?e=t:typeof fetch>"u"?e=ln:e=fetch,(...s)=>e(...s)},ic=()=>typeof Headers>"u"?la:Headers,ac=(t,e,s)=>{const r=nc(s),n=ic();return(i,a)=>rc(void 0,void 0,void 0,function*(){var l;const o=(l=yield e())!==null&&l!==void 0?l:t;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};function oc(t){return t.replace(/\/$/,"")}function lc(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:a,auth:l,realtime:o,global:c}=e;return{db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},o),n),global:Object.assign(Object.assign({},c),i)}}const _a="2.64.2",cc="http://localhost:9999",uc="supabase.auth.token",hc={"X-Client-Info":`gotrue-js/${_a}`},ri=10,Vr="X-Supabase-Api-Version",ma={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function dc(t){return Math.round(Date.now()/1e3)+t}function fc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const tt=()=>typeof document<"u",Pt={tested:!1,writable:!1},ys=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pt.tested)return Pt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pt.tested=!0,Pt.writable=!0}catch{Pt.tested=!0,Pt.writable=!1}return Pt.writable};function Rr(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const pa=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ls(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},_c=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ga=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Ys=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},jr=async(t,e)=>{await t.removeItem(e)};function mc(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,a,l,o,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=a<<2|l>>4,n=(l&15)<<4|o>>2,i=(o&3)<<6|c,s=s+String.fromCharCode(r),o!=64&&n!=0&&(s=s+String.fromCharCode(n)),c!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class mr{constructor(){this.promise=new mr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}mr.promiseConstructor=Promise;function ni(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(mc(r))}async function pc(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gc(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function bc(t){return("0"+t.toString(16)).substr(-2)}function vc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,bc).join("")}async function yc(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function wc(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await yc(t);return wc(s)}async function qt(t,e,s=!1){const r=vc();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ga(t,`${e}-code-verifier`,n);const i=await kc(r);return[i,r===i?"plain":"s256"]}const $c=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sc(t){const e=t.headers.get(Vr);if(!e||!e.match($c))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class dn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Oc extends dn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Tc(t){return te(t)&&t.name==="AuthApiError"}class ba extends dn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class xt extends dn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Rt extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ar extends xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ns extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Us extends xt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ii extends xt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zr extends xt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Ir(t){return te(t)&&t.name==="AuthRetryableFetchError"}class ai extends xt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var Dc=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const At=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Mc=[502,503,504];async function oi(t){var e;if(!_c(t))throw new zr(At(t),0);if(Mc.includes(t.status))throw new zr(At(t),t.status);let s;try{s=await t.json()}catch(i){throw new ba(At(i),i)}let r;const n=Sc(t);if(n&&n.getTime()>=ma["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new ai(At(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ai(At(s),t.status,s.weak_password.reasons);throw new Oc(At(s),t.status||500,r)}const Ec=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function re(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Vr]||(i[Vr]=ma["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",o=await Cc(t,e,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function Cc(t,e,s,r,n,i){const a=Ec(e,r,n,i);let l;try{l=await t(s,Object.assign({},a))}catch(o){throw console.error(o),new zr(At(o),0)}if(l.ok||await oi(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await oi(o)}}function $t(t){var e;let s=null;Ac(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=dc(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function li(t){const e=$t(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ot(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Pc(t){return{data:t,error:null}}function Rc(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,a=Dc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},o=Object.assign({},a);return{data:{properties:l,user:o},error:null}}function jc(t){return t}function Ac(t){return t.access_token&&t.refresh_token&&t.expires_in}var Ic=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class Lc{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=pa(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ot})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Ic(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Rc,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(te(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ot})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,a,l,o;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:jc});if(u.error)throw u.error;const f=await u.json(),_=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(o=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return g.length>0&&(g.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);c[`${b}Page`]=y}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(te(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ot})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ot})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ot})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(te(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}}const Yc={getItem:t=>ys()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ys()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ys()&&globalThis.localStorage.removeItem(t)}};function ci(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Nc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vt={debug:!!(globalThis&&ys()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class va extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Uc extends va{}async function xc(t,e,s){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Vt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Uc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Vt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}Nc();const Fc={url:cc,storageKey:uc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},ms=30*1e3,ui=3;async function hi(t,e,s){return await s()}class Os{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Os.nextInstanceID,Os.nextInstanceID+=1,this.instanceID>0&&tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Fc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Lc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=pa(n.fetch),this.lock=n.lock||hi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:tt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=xc:this.lock=hi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ys()?this.storage=Yc:(this.memoryStorage={},this.storage=ci(this.memoryStorage)):(this.memoryStorage={},this.storage=ci(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_a}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=tt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:n,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return te(e)?{error:e}:{error:new ba("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{await this._removeSession();const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:$t}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:f,options:_}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await qt(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:f,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:g,code_challenge_method:p},xform:$t})}else if("phone"in e){const{phone:u,password:f,options:_}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(n=_==null?void 0:_.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:$t})}else throw new Ns("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const o=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:li})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:li})}else throw new Ns("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ar}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Ys(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/"),{data:i,error:a}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:$t});return await jr(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ar}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=e,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:$t}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Ar}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:o}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await qt(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:o}=e,{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(a=o==null?void 0:o.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ns("You must provide either an email or phone number.")}catch(l){if(te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:$t});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,c=a.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await qt(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Pc})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Rt;const{error:n}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:l}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ns("You must provide either an email or phone number and a type")}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Ys(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(o,c,u){return!a&&c==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(o,c,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async s=>{var r,n,i;const{data:a,error:l}=s;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Rt;const a=n.session;let l=null,o=null;this.flowType==="pkce"&&e.email!=null&&([l,o]=await qt(this.storage,this.storageKey));const{data:c,error:u}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:o}),jwt:a.access_token,xform:Ot});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return ni(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const a=ni(e.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(te(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Rt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!tt())throw new Us("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Us("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ii("Not a valid PKCE flow url.");const s=Rr(window.location.href);if(e){if(!s.code)throw new ii("No code detected.");const{data:v,error:$}=await this._exchangeCodeForSession(s.code);if($)throw $;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:v.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new Us(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:o,token_type:c}=s;if(!i||!l||!a||!c)throw new Us("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let _=u+f;o&&(_=parseInt(o));const g=_-u;g*1e3<=ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=_-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,_,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,_,u);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:_,refresh_token:a,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:s.type},error:null}}catch(s){if(te(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=Rr(window.location.href);return!!(tt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Rr(window.location.href),s=await Ys(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Tc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await jr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=fc(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await qt(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,l,o,c,u;const{data:f,error:_}=i;if(_)throw _;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return tt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await gc(async n=>(n>0&&await pc(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$t})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Ir(i)&&Date.now()+a-r<ms})}catch(r){if(this._debug(s,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),tt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Ys(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+ri;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${ri}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Ir(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new mr;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Rt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),te(i)){const a={session:null,error:i};return Ir(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(o){i.push(o)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ga(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await jr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ms);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ms}ms, refresh threshold is ${ui} ticks`),n<=ui&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof va)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await re(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(te(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(te(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}}Os.nextInstanceID=0;const Wc=Os;class Hc extends Wc{constructor(e){super(e)}}var Bc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{c(r.next(u))}catch(f){a(f)}}function o(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):n(u.value).then(l,o)}c((r=r.apply(t,e||[])).next())})};class qc{constructor(e,s,r){var n,i,a,l,o,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const _=oc(e);this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,this.functionsUrl=`${_}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:ec,realtime:sc,auth:Object.assign(Object.assign({},tc),{storageKey:g}),global:Xl},y=lc(r??{},p);this.storageKey=(i=(n=y.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=y.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((o=y.auth)!==null&&o!==void 0?o:{},this.headers,(c=y.global)===null||c===void 0?void 0:c.fetch),this.fetch=ac(s,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new cn(`${_}/rest/v1`,{headers:this.headers,schema:(f=y.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new fl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Kl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Bc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,debug:l},o,c){var u;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hc({url:this.authUrl,headers:Object.assign(Object.assign({},f),o),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Yl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Vc=(t,e,s)=>new qc(t,e,s),we=Vc("https://oatzrwezibkcabfwxppo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdHpyd2V6aWJrY2FiZnd4cHBvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxMzYwOTE3MSwiZXhwIjoyMDI5MTg1MTcxfQ.u2HUJZ-hGi8Jk97FWI-hiQ3NpyMMM7V6hHQaL_Gvx1s");function ze(t,{delay:e=0,duration:s=400,easing:r=zi}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:r,css:i=>`opacity: ${i*n}`}}function zc(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-grow text-primary m-5" role="status"></div>',h(e,"class","d-flex justify-content-center")},m(s,r){E(s,e,r)},p:P,i:P,o:P,d(s){s&&M(e)}}}class Ct extends de{constructor(e){super(),he(this,e,null,zc,ue,{})}}function Gc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h6"),l=m("a"),o=K(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),We(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","author"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/author/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){E(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&ae(o,u[0]),f&2&&c!==(c="./#/author/"+u[1])&&h(l,"href",c)},i:P,o:P,d(u){u&&M(e)}}}function Jc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class ya extends de{constructor(e){super(),he(this,e,Jc,Gc,ue,{name:0,id:1})}}function Kc(t){let e,s,r,n,i,a,l,o,c;return{c(){e=m("div"),s=m("img"),n=k(),i=m("div"),a=m("h6"),l=m("a"),o=K(t[0]),h(s,"class","object-fit-contain rounded my-2"),h(s,"height","150"),We(s.src,r="./default-profile.jpg")||h(s,"src",r),h(s,"alt","publisher"),h(l,"class","stretched-link svelte-1rzxrzv"),h(l,"href",c="./#/publisher/"+t[1]),h(a,"class","card-title text-center"),h(i,"class","card-body p-1"),h(e,"class","card col-md-2 col-4 border-1 svelte-1rzxrzv")},m(u,f){E(u,e,f),d(e,s),d(e,n),d(e,i),d(i,a),d(a,l),d(l,o)},p(u,[f]){f&1&&ae(o,u[0]),f&2&&c!==(c="./#/publisher/"+u[1])&&h(l,"href",c)},i:P,o:P,d(u){u&&M(e)}}}function Zc(t,e,s){let{name:r}=e,{id:n}=e;return t.$$set=i=>{"name"in i&&s(0,r=i.name),"id"in i&&s(1,n=i.id)},[r,n]}class wa extends de{constructor(e){super(),he(this,e,Zc,Kc,ue,{name:0,id:1})}}function Qc(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("h2"),r.textContent="Error",n=k(),i=m("p"),a=K(t[0]),l=K(": "),o=K(t[1]),c=k(),u=m("a"),u.textContent="Reload",h(u,"href","./#/"),h(u,"class","fw-bold"),h(s,"class","text-center"),h(e,"class","d-flex align-items-center justify-content-center my-3")},m(f,_){E(f,e,_),d(e,s),d(s,r),d(s,n),d(s,i),d(i,a),d(i,l),d(i,o),d(s,c),d(s,u)},p(f,[_]){_&1&&ae(a,f[0]),_&2&&ae(o,f[1])},i:P,o:P,d(f){f&&M(e)}}}function Xc(t,e,s){let{code:r="err"}=e,{message:n}=e;return t.$$set=i=>{"code"in i&&s(0,r=i.code),"message"in i&&s(1,n=i.message)},[r,n]}let fn=class extends de{constructor(e){super(),he(this,e,Xc,Qc,ue,{code:0,message:1})}};function di(t,e,s){const r=t.slice();return r[9]=e[s][0],r[10]=e[s][1],r}function fi(t,e,s){const r=t.slice();return r[9]=e[s][0],r[13]=e[s][1],r}function _i(t,e,s){const r=t.slice();return r[9]=e[s][0],r[16]=e[s][1],r}function eu(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function tu(t){let e,s;return e=new fn({props:{message:t[3]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&8&&(i.message=r[3]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function su(t){let e,s,r=De(Object.entries(t[0])),n=[];for(let a=0;a<r.length;a+=1)n[a]=mi(_i(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){E(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&1){r=De(Object.entries(a[0]));let o;for(o=0;o<r.length;o+=1){const c=_i(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=mi(c),n[o].c(),S(n[o],1),n[o].m(e,null))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function mi(t){let e,s;return e=new fr({props:{title:t[16].title,id:t[16].book_id,author:t[16].author}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&1&&(i.title=r[16].title),n&1&&(i.id=r[16].book_id),n&1&&(i.author=r[16].author),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ru(t){let e,s,r,n;const i=[su,tu,eu],a=[];function l(o,c){return o[0]?0:o[3]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function nu(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function iu(t){let e,s;return e=new fn({props:{message:t[4]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&16&&(i.message=r[4]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function au(t){let e,s,r=De(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=pi(fi(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){E(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=De(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=fi(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=pi(c),n[o].c(),S(n[o],1),n[o].m(e,null))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function pi(t){let e,s;return e=new ya({props:{id:t[13].author_id,name:t[13].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.id=r[13].author_id),n&2&&(i.name=r[13].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ou(t){let e,s,r,n;const i=[au,iu,nu],a=[];function l(o,c){return o[1]?0:o[4]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function lu(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function cu(t){let e,s;return e=new fn({props:{message:t[5]}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&32&&(i.message=r[5]),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function uu(t){let e,s,r=De(Object.entries(t[2])),n=[];for(let a=0;a<r.length;a+=1)n[a]=gi(di(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row justify-content-around")},m(a,l){E(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&4){r=De(Object.entries(a[2]));let o;for(o=0;o<r.length;o+=1){const c=di(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=gi(c),n[o].c(),S(n[o],1),n[o].m(e,null))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function gi(t){let e,s;return e=new wa({props:{id:t[10].publisher_id,name:t[10].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[10].publisher_id),n&4&&(i.name=r[10].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function hu(t){let e,s,r,n;const i=[uu,cu,lu],a=[];function l(o,c){return o[2]?0:o[5]?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function du(t){let e,s,r,n,i,a,l,o,c,u;return s=new tl({}),n=new Mt({props:{title:"Books",icon:"journal",link:"search/",$$slots:{default:[ru]},$$scope:{ctx:t}}}),a=new Mt({props:{title:"Authors",icon:"person",link:"search/author",$$slots:{default:[ou]},$$scope:{ctx:t}}}),o=new Mt({props:{title:"Publishers",icon:"building",link:"search/publisher",$$slots:{default:[hu]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=k(),L(n.$$.fragment),i=k(),L(a.$$.fragment),l=k(),L(o.$$.fragment),h(e,"class","container mb-5")},m(f,_){E(f,e,_),A(s,e,null),d(e,r),A(n,e,null),d(e,i),A(a,e,null),d(e,l),A(o,e,null),u=!0},p(f,[_]){const g={};_&524297&&(g.$$scope={dirty:_,ctx:f}),n.$set(g);const p={};_&524306&&(p.$$scope={dirty:_,ctx:f}),a.$set(p);const y={};_&524324&&(y.$$scope={dirty:_,ctx:f}),o.$set(y)},i(f){u||(S(s.$$.fragment,f),S(n.$$.fragment,f),S(a.$$.fragment,f),S(o.$$.fragment,f),f&&(c||Ne(()=>{c=Ve(e,ze,{duration:500}),c.start()})),u=!0)},o(f){T(s.$$.fragment,f),T(n.$$.fragment,f),T(a.$$.fragment,f),T(o.$$.fragment,f),u=!1},d(f){f&&M(e),I(s),I(n),I(a),I(o)}}}function fu(t,e,s){let r,n,i,a,l,o;async function c(){const{data:_,error:g}=await we.rpc("get_books");s(0,r=_),s(3,a=g?g.message:"")}async function u(){const{data:_,error:g}=await we.rpc("get_authors");s(1,n=_),s(4,l=g?g.message:"")}async function f(){const{data:_,error:g}=await we.rpc("get_publishers");s(2,i=_),s(5,o=g||"")}return c(),u(),f(),[r,n,i,a,l,o]}class _u extends de{constructor(e){super(),he(this,e,fu,du,ue,{})}}function mu(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("button"),s.innerHTML='<i class="bi bi-arrow-left-circle"></i>',r=k(),n=m("div"),i=m("h4"),a=K(t[0]),h(s,"class","btn"),Ut(s,"font-size","1.5em"),h(i,"class","my-auto"),h(e,"class","d-flex border-bottom border-1 my-3 align-items-center")},m(c,u){E(c,e,u),d(e,s),d(e,r),d(e,n),d(n,i),d(i,a),l||(o=H(s,"click",t[1]),l=!0)},p(c,[u]){u&1&&ae(a,c[0])},i:P,o:P,d(c){c&&M(e),l=!1,o()}}}function pu(t,e,s){let{text:r}=e;const n=()=>Jo();return t.$$set=i=>{"text"in i&&s(0,r=i.text)},[r,n]}class yt extends de{constructor(e){super(),he(this,e,pu,mu,ue,{text:0})}}function gu(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v;const $=t[5].default,D=or($,t,t[4],null);return{c(){e=m("div"),s=m("div"),r=m("div"),n=m("div"),i=m("h1"),a=K(t[0]),l=k(),o=m("button"),c=k(),u=m("div"),D&&D.c(),f=k(),_=m("div"),g=m("button"),p=K(t[3]),y=k(),b=m("button"),w=K(t[2]),h(i,"class","modal-title fs-5"),h(i,"id","exampleModalLabel"),h(o,"type","button"),h(o,"class","btn-close"),h(o,"data-bs-dismiss","modal"),h(o,"aria-label","Close"),h(n,"class","modal-header"),h(u,"class","modal-body"),h(g,"type","button"),h(g,"class","btn btn-secondary"),h(g,"data-bs-dismiss","modal"),h(b,"type","button"),h(b,"class","btn btn-primary"),h(_,"class","modal-footer"),h(r,"class","modal-content"),h(s,"class","modal-dialog"),h(e,"class","modal fade"),h(e,"id",t[1]),h(e,"tabindex","-1"),h(e,"aria-hidden","true")},m(O,C){E(O,e,C),d(e,s),d(s,r),d(r,n),d(n,i),d(i,a),d(n,l),d(n,o),d(r,c),d(r,u),D&&D.m(u,null),d(r,f),d(r,_),d(_,g),d(g,p),d(_,y),d(_,b),d(b,w),v=!0},p(O,[C]){(!v||C&1)&&ae(a,O[0]),D&&D.p&&(!v||C&16)&&cr(D,$,O,O[4],v?lr($,O[4],C,null):ur(O[4]),null),(!v||C&8)&&ae(p,O[3]),(!v||C&4)&&ae(w,O[2]),(!v||C&2)&&h(e,"id",O[1])},i(O){v||(S(D,O),v=!0)},o(O){T(D,O),v=!1},d(O){O&&M(e),D&&D.d(O)}}}function bu(t,e,s){let{$$slots:r={},$$scope:n}=e,{title:i="Modal"}=e,{id:a="modal"}=e,{pButton:l="Confirm"}=e,{sButton:o="Cancel"}=e;return t.$$set=c=>{"title"in c&&s(0,i=c.title),"id"in c&&s(1,a=c.id),"pButton"in c&&s(2,l=c.pButton),"sButton"in c&&s(3,o=c.sButton),"$$scope"in c&&s(4,n=c.$$scope)},[i,a,l,o,n,r]}class vu extends de{constructor(e){super(),he(this,e,bu,gu,ue,{title:0,id:1,pButton:2,sButton:3})}}function bi(t,e,s){const r=t.slice();return r[18]=e[s][0],r[19]=e[s][1],r}function yu(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function wu(t){let e,s,r,n,i,a,l,o=t[1].isbn+"",c,u,f,_,g,p=t[1].title+"",y,b,w,v=t[1].description+"",$,D,O,C,N,U,q=t[1].author.name+"",F,z,ee,Z,fe,G,Y,B=t[1].publisher.name+"",ce,ge,Ee,_e,be,Ye,Ae=t[1].category.name+"",He,ht,ve,X,me,Le=t[1].shelf_number+"",ie,J,Ce=t[0]=="client"&&vi(t);return{c(){e=m("div"),s=m("div"),r=m("img"),i=k(),a=m("small"),l=K("ISBN: "),c=K(o),u=k(),Ce&&Ce.c(),f=k(),_=m("div"),g=m("h1"),y=K(p),b=k(),w=m("p"),$=K(v),D=k(),O=m("p"),C=m("b"),C.textContent="Author:",N=k(),U=m("a"),F=K(q),ee=k(),Z=m("p"),fe=m("b"),fe.textContent="Publisher:",G=k(),Y=m("a"),ce=K(B),Ee=k(),_e=m("p"),be=m("b"),be.textContent="Category:",Ye=k(),He=K(Ae),ht=k(),ve=m("p"),X=m("b"),X.textContent="Shelf#:",me=k(),ie=K(Le),h(r,"id","img-cover"),h(r,"class","border p-3"),We(r.src,n=t[9])||h(r,"src",n),h(r,"alt","book cover"),h(r,"height","300"),h(r,"width","300"),Ut(r,"object-fit","contain"),h(a,"class","text-secondary"),h(s,"class","d-flex flex-column justify-content-center align-items-center gap-2"),h(g,"id","book-title"),h(g,"class","mb-2 pb-2"),h(w,"id","book-description"),h(U,"href",z="./#/author/"+t[1].author.author_id),h(Y,"href",ge="./#/publisher/"+t[1].publisher.publisher_id),h(_,"id","details-container"),h(_,"class","container"),h(e,"class","d-md-flex d-block")},m(Pe,Ue){E(Pe,e,Ue),d(e,s),d(s,r),d(s,i),d(s,a),d(a,l),d(a,c),d(s,u),Ce&&Ce.m(s,null),d(e,f),d(e,_),d(_,g),d(g,y),d(_,b),d(_,w),d(w,$),d(_,D),d(_,O),d(O,C),d(O,N),d(O,U),d(U,F),d(_,ee),d(_,Z),d(Z,fe),d(Z,G),d(Z,Y),d(Y,ce),d(_,Ee),d(_,_e),d(_e,be),d(_e,Ye),d(_e,He),d(_,ht),d(_,ve),d(ve,X),d(ve,me),d(ve,ie),J=!0},p(Pe,Ue){(!J||Ue&2)&&o!==(o=Pe[1].isbn+"")&&ae(c,o),Pe[0]=="client"?Ce?(Ce.p(Pe,Ue),Ue&1&&S(Ce,1)):(Ce=vi(Pe),Ce.c(),S(Ce,1),Ce.m(s,null)):Ce&&(ke(),T(Ce,1,1,()=>{Ce=null}),$e()),(!J||Ue&2)&&p!==(p=Pe[1].title+"")&&ae(y,p),(!J||Ue&2)&&v!==(v=Pe[1].description+"")&&ae($,v),(!J||Ue&2)&&q!==(q=Pe[1].author.name+"")&&ae(F,q),(!J||Ue&2&&z!==(z="./#/author/"+Pe[1].author.author_id))&&h(U,"href",z),(!J||Ue&2)&&B!==(B=Pe[1].publisher.name+"")&&ae(ce,B),(!J||Ue&2&&ge!==(ge="./#/publisher/"+Pe[1].publisher.publisher_id))&&h(Y,"href",ge),(!J||Ue&2)&&Ae!==(Ae=Pe[1].category.name+"")&&ae(He,Ae),(!J||Ue&2)&&Le!==(Le=Pe[1].shelf_number+"")&&ae(ie,Le)},i(Pe){J||(S(Ce),J=!0)},o(Pe){T(Ce),J=!1},d(Pe){Pe&&M(e),Ce&&Ce.d()}}}function vi(t){let e,s,r;function n(l,o){return l[3]?Su:l[4]==0?$u:ku}let i=n(t),a=i(t);return s=new vu({props:{id:"reserve",$$slots:{default:[Ou]},$$scope:{ctx:t}}}),{c(){a.c(),e=k(),L(s.$$.fragment)},m(l,o){a.m(l,o),E(l,e,o),A(s,l,o),r=!0},p(l,o){i===(i=n(l))&&a?a.p(l,o):(a.d(1),a=i(l),a&&(a.c(),a.m(e.parentNode,e)));const c={};o&4194336&&(c.$$scope={dirty:o,ctx:l}),s.$set(c)},i(l){r||(S(s.$$.fragment,l),r=!0)},o(l){T(s.$$.fragment,l),r=!1},d(l){l&&M(e),a.d(l),I(s,l)}}}function ku(t){let e,s,r;return{c(){e=m("button"),e.textContent="Reserve",e.disabled=!1,h(e,"class","btn btn-primary w-50"),h(e,"data-bs-toggle","modal"),h(e,"data-bs-target","#reserve")},m(n,i){E(n,e,i),s||(r=H(e,"click",t[8]),s=!0)},p:P,d(n){n&&M(e),s=!1,r()}}}function $u(t){let e;return{c(){e=m("button"),e.textContent="Unavailable",e.disabled=!0,h(e,"class","btn btn-secondary w-50")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function Su(t){let e,s,r,n;return{c(){e=m("button"),s=K("Reserved ("),r=K(t[3]),n=K(")"),e.disabled=!0,h(e,"class","btn btn-secondary w-75"),h(e,"data-bs-toggle","modal"),h(e,"data-bs-target","#reserve")},m(i,a){E(i,e,a),d(e,s),d(e,r),d(e,n)},p(i,a){a&8&&ae(r,i[3])},d(i){i&&M(e)}}}function Ou(t){let e,s;return{c(){e=m("div"),s=K(t[5])},m(r,n){E(r,e,n),d(e,s)},p(r,n){n&32&&ae(s,r[5])},d(r){r&&M(e)}}}function yi(t){let e,s;return e=new Mt({props:{title:"To Do",icon:"check2-square",$$slots:{default:[Tu]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Tu(t){let e;return{c(){e=m("div"),e.textContent="a",h(e,"class","my-5")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function wi(t){let e,s;return e=new Mt({props:{title:"Status",icon:"journal",$$slots:{default:[Ru]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4194308&&(i.$$scope={dirty:n,ctx:r}),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Du(t){return{c:P,m:P,p:P,d:P}}function Mu(t){let e;function s(i,a){return i[17].length<=0?Cu:Eu}let n=s(t)(t);return{c(){n.c(),e=Qe()},m(i,a){n.m(i,a),E(i,e,a)},p(i,a){n.p(i,a)},d(i){i&&M(e),n.d(i)}}}function Eu(t){let e,s,r,n,i=De(Object.entries(t[17])),a=[];for(let l=0;l<i.length;l+=1)a[l]=ki(bi(t,i,l));return{c(){e=m("table"),s=m("thead"),s.innerHTML='<tr><th class="py-3 col-3">Barcode</th> <th class="py-3 col-5">Student</th> <th class="py-3 col-2">Status</th> <th class="py-3 col-1">Actions</th></tr>',r=k(),n=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();h(e,"class","table table-bordered table-striped text-center align-middle")},m(l,o){E(l,e,o),d(e,s),d(e,r),d(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(n,null)},p(l,o){if(o&64){i=De(Object.entries(l[17]));let c;for(c=0;c<i.length;c+=1){const u=bi(l,i,c);a[c]?a[c].p(u,o):(a[c]=ki(u),a[c].c(),a[c].m(n,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}},d(l){l&&M(e),Ze(a,l)}}}function Cu(t){let e;return{c(){e=m("div"),e.innerHTML="<h3>No Library Holdings.</h3> <small>Add a copy below</small>",h(e,"class","text-center my-5")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function ki(t){let e,s,r,n,i,a,l=t[19].status+"",o,c,u=t[19].reservation_id?`(${t[19].reservation_id})`:"",f,_,g,p,y,b;return{c(){e=m("tr"),s=m("td"),s.textContent=`${t[19].barcode}`,r=k(),n=m("td"),n.textContent=`${t[19].status!="Available"?`${t[19].fname} ${t[19].lname}`:"--"}`,i=k(),a=m("td"),o=K(l),c=k(),f=K(u),_=k(),g=m("td"),p=m("a"),y=m("small"),y.innerHTML='Borrow <i class="bi bi-box-arrow-up-right"></i>',b=k(),h(a,"class",t[19].status=="Available"?"text-bg-success":t[19].status=="Reserved"?"text-bg-secondary":"text-bg-danger"),h(p,"href","./#/borrow?barcode="+t[19].barcode),h(p,"class","btn btn-outline-primary btn-sm")},m(w,v){E(w,e,v),d(e,s),d(e,r),d(e,n),d(e,i),d(e,a),d(a,o),d(a,c),d(a,f),d(e,_),d(e,g),d(g,p),d(p,y),d(e,b)},p:P,d(w){w&&M(e)}}}function Pu(t){return{c:P,m:P,p:P,d:P}}function Ru(t){let e,s,r,n,i,a,l,o,c,u,f={ctx:t,current:null,token:null,hasCatch:!1,pending:Pu,then:Mu,catch:Du,value:17};return Bs(t[6](),f),{c(){f.block.c(),e=k(),s=m("div"),r=m("label"),r.textContent="Add Copy:",n=k(),i=m("div"),a=m("input"),l=k(),o=m("button"),o.textContent="Add",h(r,"for","copy"),h(r,"class","form=control col-auto"),h(a,"type","text"),h(a,"class","form-control"),h(a,"placeholder","Barcode Number"),h(i,"class","col-4"),h(o,"class","btn btn-primary col-2"),h(s,"class","row justify-content-center align-items-center")},m(_,g){f.block.m(_,f.anchor=g),f.mount=()=>e.parentNode,f.anchor=e,E(_,e,g),E(_,s,g),d(s,r),d(s,n),d(s,i),d(i,a),V(a,t[2]),d(s,l),d(s,o),c||(u=[H(a,"input",t[11]),H(o,"click",t[7])],c=!0)},p(_,g){t=_,qs(f,t,g),g&4&&a.value!==t[2]&&V(a,t[2])},d(_){_&&(M(e),M(s)),f.block.d(_),f.token=null,f=null,c=!1,Me(u)}}}function ju(t){let e,s,r,n,i,a,l,o,c,u,f,_;r=new yt({props:{text:"Book Details"}});const g=[wu,yu],p=[];function y(v,$){return v[1]?0:1}i=y(t),a=p[i]=g[i](t);let b=t[0]=="client"&&yi(t),w=t[0]=="staff"&&wi(t);return{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=k(),a.c(),l=k(),b&&b.c(),o=k(),w&&w.c(),c=k(),u=m("div"),h(u,"class","my-5"),h(e,"class","container")},m(v,$){E(v,e,$),d(e,s),A(r,s,null),d(s,n),p[i].m(s,null),d(e,l),b&&b.m(e,null),d(e,o),w&&w.m(e,null),d(e,c),d(e,u),_=!0},p(v,[$]){let D=i;i=y(v),i===D?p[i].p(v,$):(ke(),T(p[D],1,1,()=>{p[D]=null}),$e(),a=p[i],a?a.p(v,$):(a=p[i]=g[i](v),a.c()),S(a,1),a.m(s,null)),v[0]=="client"?b?$&1&&S(b,1):(b=yi(v),b.c(),S(b,1),b.m(e,o)):b&&(ke(),T(b,1,1,()=>{b=null}),$e()),v[0]=="staff"?w?(w.p(v,$),$&1&&S(w,1)):(w=wi(v),w.c(),S(w,1),w.m(e,c)):w&&(ke(),T(w,1,1,()=>{w=null}),$e())},i(v){_||(S(r.$$.fragment,v),S(a),S(b),S(w),v&&(f||Ne(()=>{f=Ve(e,ze,{duration:500}),f.start()})),_=!0)},o(v){T(r.$$.fragment,v),T(a),T(b),T(w),_=!1},d(v){v&&M(e),I(r),p[i].d(),b&&b.d(),w&&w.d()}}}function Au(t,e,s){let r;os.subscribe($=>s(0,r=$));const n=localStorage.getItem("user_id");let{params:i}=e;const a=i.bookID;let l;async function o(){const{data:$,error:D}=await we.from("books").select("*, author(author_id, name), publisher(publisher_id, name), category(name)").eq("book_id",a);console.log($),s(1,l=$[0])}Ss(o);let c;async function u(){const{data:$,error:D}=await we.rpc("get_holdings",{bookid:a});return D&&console.error(D),console.log($),$}async function f(){await we.from("library_holdings").insert({book_id:a,barcode:c}),u()}let _,g=0;async function p(){const{data:$,error:D}=await we.rpc("isreserved",{bookid:a,studid:n});console.error(D),s(3,_=$)}r=="client"&&p();async function y(){const{data:$,error:D}=await we.from("library_holdings").select("barcode, holding_id").eq("book_id",a).eq("status","Available").limit(1).single();if(D){console.error(D);return}s(5,b+=`
 ${$.barcode}`);const{error:O}=await we.from("book_reservation").insert({stud_id:n,holding_id:$.holding_id});if(O){console.error(O);return}const{data:C,error:N}=await we.from("library_holdings").update({status:"Reserved"}).eq("barcode",$.barcode).select("holding_id").single();if(N){console.error(N);return}p(),s(5,b+=`
 ${C.holding_id}`)}let b="",w=a>4?"./book-cover.png":`./${a}.jpg`;function v(){c=this.value,s(2,c)}return t.$$set=$=>{"params"in $&&s(10,i=$.params)},[r,l,c,_,g,b,u,f,y,w,i,v]}class ka extends de{constructor(e){super(),he(this,e,Au,ju,ue,{params:10})}}function Iu(t){let e,s,r,n,i,a;const l=t[3].default,o=or(l,t,t[2],null);return{c(){e=m("div"),s=m("label"),r=K(t[0]),n=k(),i=m("div"),o&&o.c(),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-8 col-md-9"),h(e,"class","mb-4 row")},m(c,u){E(c,e,u),d(e,s),d(s,r),d(e,n),d(e,i),o&&o.m(i,null),a=!0},p(c,[u]){(!a||u&1)&&ae(r,c[0]),(!a||u&2)&&h(s,"for",c[1]),o&&o.p&&(!a||u&4)&&cr(o,l,c,c[2],a?lr(l,c[2],u,null):ur(c[2]),null)},i(c){a||(S(o,c),a=!0)},o(c){T(o,c),a=!1},d(c){c&&M(e),o&&o.d(c)}}}function Lu(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e;return t.$$set=l=>{"label"in l&&s(0,i=l.label),"id"in l&&s(1,a=l.id),"$$scope"in l&&s(2,n=l.$$scope)},[i,a,n,r]}class je extends de{constructor(e){super(),he(this,e,Lu,Iu,ue,{label:0,id:1})}}function $i(t,e,s){const r=t.slice();return r[29]=e[s][0],r[30]=e[s][1],r}function Si(t,e,s){const r=t.slice();return r[29]=e[s][0],r[34]=e[s][1],r}function Oi(t,e,s){const r=t.slice();return r[29]=e[s][0],r[38]=e[s][1],r}function Yu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-name")},m(n,i){E(n,e,i),V(e,t[4]),s||(r=H(e,"input",t[18]),s=!0)},p(n,i){i[0]&16&&e.value!==n[4]&&V(e,n[4])},d(n){n&&M(e),s=!1,r()}}}function Nu(t){let e,s,r;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"id","book-description"),h(e,"rows","6")},m(n,i){E(n,e,i),V(e,t[5]),s||(r=H(e,"input",t[19]),s=!0)},p(n,i){i[0]&32&&V(e,n[5])},d(n){n&&M(e),s=!1,r()}}}function Uu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","book-cover"),h(e,"accept","image/*")},m(n,i){E(n,e,i),t[21](e),s||(r=H(e,"change",t[20]),s=!0)},p:P,d(n){n&&M(e),t[21](null),s=!1,r()}}}function xu(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Category Not Found. Check spelling or <a target="_blank" href="./#/add-category">add new category. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","categories"),h(e,"class",s="form-control "+t[11]),h(e,"type","text"),h(e,"id","book-category"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[6]),E(l,r,o),E(l,n,o),i||(a=H(e,"input",t[23]),i=!0)},p(l,o){o[0]&2048&&s!==(s="form-control "+l[11])&&h(e,"class",s),o[0]&64&&e.value!==l[6]&&V(e,l[6])},d(l){l&&(M(e),M(r),M(n)),i=!1,a()}}}function Fu(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Author Not Found. Check spelling or <a target="_blank" href="./#/add-author">add new author. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","authors"),h(e,"class",s="form-control "+t[12]),h(e,"type","text"),h(e,"id","book-author"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[7]),E(l,r,o),E(l,n,o),i||(a=H(e,"input",t[24]),i=!0)},p(l,o){o[0]&4096&&s!==(s="form-control "+l[12])&&h(e,"class",s),o[0]&128&&e.value!==l[7]&&V(e,l[7])},d(l){l&&(M(e),M(r),M(n)),i=!1,a()}}}function Wu(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.innerHTML='Publisher Not Found. Check spelling or <a target="_blank" href="./#/add-publisher">add new publisher. <i class="bi bi-box-arrow-up-right"></i></a>',h(e,"list","publishers"),h(e,"class",s="form-control "+t[13]),h(e,"type","text"),h(e,"id","book-publisher"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[8]),E(l,r,o),E(l,n,o),i||(a=H(e,"input",t[25]),i=!0)},p(l,o){o[0]&8192&&s!==(s="form-control "+l[13])&&h(e,"class",s),o[0]&256&&e.value!==l[8]&&V(e,l[8])},d(l){l&&(M(e),M(r),M(n)),i=!1,a()}}}function Hu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","number"),h(e,"id","book-shelf")},m(n,i){E(n,e,i),V(e,t[9]),s||(r=H(e,"input",t[26]),s=!0)},p(n,i){i[0]&512&&hr(e.value)!==n[9]&&V(e,n[9])},d(n){n&&M(e),s=!1,r()}}}function Bu(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-isbn")},m(n,i){E(n,e,i),V(e,t[10]),s||(r=H(e,"input",t[27]),s=!0)},p(n,i){i[0]&1024&&e.value!==n[10]&&V(e,n[10])},d(n){n&&M(e),s=!1,r()}}}function qu(t){return{c:P,m:P,p:P,d:P}}function Vu(t){let e,s=De(Object.entries(t[37])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ti(Oi(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","authors")},m(n,i){E(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&32768){s=De(Object.entries(n[37]));let a;for(a=0;a<s.length;a+=1){const l=Oi(n,s,a);r[a]?r[a].p(l,i):(r[a]=Ti(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&M(e),Ze(r,n)}}}function Ti(t){let e;return{c(){e=m("option"),e.__value=t[38].name,V(e,e.__value)},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function zu(t){return{c:P,m:P,p:P,d:P}}function Gu(t){return{c:P,m:P,p:P,d:P}}function Ju(t){let e,s=De(Object.entries(t[33])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Di(Si(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","publishers")},m(n,i){E(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&65536){s=De(Object.entries(n[33]));let a;for(a=0;a<s.length;a+=1){const l=Si(n,s,a);r[a]?r[a].p(l,i):(r[a]=Di(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&M(e),Ze(r,n)}}}function Di(t){let e;return{c(){e=m("option"),e.__value=t[34].name,V(e,e.__value)},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function Ku(t){return{c:P,m:P,p:P,d:P}}function Zu(t){return{c:P,m:P,p:P,d:P}}function Qu(t){let e,s=De(Object.entries(t[28])),r=[];for(let n=0;n<s.length;n+=1)r[n]=Mi($i(t,s,n));return{c(){e=m("datalist");for(let n=0;n<r.length;n+=1)r[n].c();h(e,"id","categories")},m(n,i){E(n,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,i){if(i[0]&131072){s=De(Object.entries(n[28]));let a;for(a=0;a<s.length;a+=1){const l=$i(n,s,a);r[a]?r[a].p(l,i):(r[a]=Mi(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(n){n&&M(e),Ze(r,n)}}}function Mi(t){let e;return{c(){e=m("option"),e.__value=t[30].name,V(e,e.__value)},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function Xu(t){return{c:P,m:P,p:P,d:P}}function eh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q,F,z,ee,Z,fe,G,Y,B,ce,ge,Ee,_e,be,Ye,Ae,He,ht,ve;s=new yt({props:{text:"Add Book"}}),a=new je({props:{label:"Book Title:",id:"book-name",$$slots:{default:[Yu]},$$scope:{ctx:t}}}),o=new je({props:{label:"Book Description:",id:"book-description",$$slots:{default:[Nu]},$$scope:{ctx:t}}}),u=new je({props:{label:"Book Cover:",id:"book-cover",$$slots:{default:[Uu]},$$scope:{ctx:t}}}),N=new je({props:{label:"Category:",id:"book-category",$$slots:{default:[xu]},$$scope:{ctx:t}}}),q=new je({props:{label:"Author: ",id:"book-author",$$slots:{default:[Fu]},$$scope:{ctx:t}}}),z=new je({props:{label:"Publisher: ",id:"book-publisher",$$slots:{default:[Wu]},$$scope:{ctx:t}}}),Z=new je({props:{label:"Shelf #: ",id:"book-shelf",$$slots:{default:[Hu]},$$scope:{ctx:t}}}),G=new je({props:{label:"ISBN: ",id:"book-isbn",$$slots:{default:[Bu]},$$scope:{ctx:t}}});let X={ctx:t,current:null,token:null,hasCatch:!1,pending:zu,then:Vu,catch:qu,value:37};Bs(t[15](),X);let me={ctx:t,current:null,token:null,hasCatch:!1,pending:Ku,then:Ju,catch:Gu,value:33};Bs(t[16](),me);let Le={ctx:t,current:null,token:null,hasCatch:!1,pending:Xu,then:Qu,catch:Zu,value:28};return Bs(t[17](),Le),{c(){e=m("section"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),L(a.$$.fragment),l=k(),L(o.$$.fragment),c=k(),L(u.$$.fragment),f=k(),_=m("div"),g=m("label"),g.textContent="Preview:",p=k(),y=m("div"),b=m("img"),v=k(),$=m("button"),$.textContent="Remove",O=k(),C=m("div"),L(N.$$.fragment),U=k(),L(q.$$.fragment),F=k(),L(z.$$.fragment),ee=k(),L(Z.$$.fragment),fe=k(),L(G.$$.fragment),Y=k(),B=m("div"),ce=m("button"),ce.innerHTML='<i class="bi bi-plus-circle"></i> Add Book',ge=k(),Ee=m("a"),Ee.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',_e=k(),X.block.c(),be=k(),me.block.c(),Ye=k(),Le.block.c(),h(g,"for","cover-preview"),h(g,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We(b.src,w=t[3])||h(b,"src",w),h(b,"alt","Preview"),h(b,"id","cover-preview"),h(b,"height","150"),h($,"class","btn btn-sm btn-danger"),h(y,"class","col-sm-8 col-md-9"),h(y,"id","preview-div"),h(_,"class",D="my-3 row "+t[2]),h(i,"class","col-sm-12 col-lg-6"),h(C,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(ce,"class","btn btn-success"),h(Ee,"href","./#/"),h(B,"class","my-3"),h(e,"class","my-1 container")},m(ie,J){E(ie,e,J),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,y),d(y,b),d(y,v),d(y,$),d(n,O),d(n,C),A(N,C,null),d(C,U),A(q,C,null),d(C,F),A(z,C,null),d(C,ee),A(Z,C,null),d(C,fe),A(G,C,null),d(e,Y),d(e,B),d(B,ce),d(B,ge),d(B,Ee),d(e,_e),X.block.m(e,X.anchor=null),X.mount=()=>e,X.anchor=be,d(e,be),me.block.m(e,me.anchor=null),me.mount=()=>e,me.anchor=Ye,d(e,Ye),Le.block.m(e,Le.anchor=null),Le.mount=()=>e,Le.anchor=null,He=!0,ht||(ve=[H($,"click",t[22]),H(ce,"click",t[14])],ht=!0)},p(ie,J){t=ie;const Ce={};J[0]&16|J[1]&1024&&(Ce.$$scope={dirty:J,ctx:t}),a.$set(Ce);const Pe={};J[0]&32|J[1]&1024&&(Pe.$$scope={dirty:J,ctx:t}),o.$set(Pe);const Ue={};J[0]&3|J[1]&1024&&(Ue.$$scope={dirty:J,ctx:t}),u.$set(Ue),(!He||J[0]&8&&!We(b.src,w=t[3]))&&h(b,"src",w),(!He||J[0]&4&&D!==(D="my-3 row "+t[2]))&&h(_,"class",D);const Ln={};J[0]&2112|J[1]&1024&&(Ln.$$scope={dirty:J,ctx:t}),N.$set(Ln);const Yn={};J[0]&4224|J[1]&1024&&(Yn.$$scope={dirty:J,ctx:t}),q.$set(Yn);const Nn={};J[0]&8448|J[1]&1024&&(Nn.$$scope={dirty:J,ctx:t}),z.$set(Nn);const Un={};J[0]&512|J[1]&1024&&(Un.$$scope={dirty:J,ctx:t}),Z.$set(Un);const xn={};J[0]&1024|J[1]&1024&&(xn.$$scope={dirty:J,ctx:t}),G.$set(xn),qs(X,t,J),qs(me,t,J),qs(Le,t,J)},i(ie){He||(S(s.$$.fragment,ie),S(a.$$.fragment,ie),S(o.$$.fragment,ie),S(u.$$.fragment,ie),S(N.$$.fragment,ie),S(q.$$.fragment,ie),S(z.$$.fragment,ie),S(Z.$$.fragment,ie),S(G.$$.fragment,ie),ie&&(Ae||Ne(()=>{Ae=Ve(e,ze,{duration:500}),Ae.start()})),He=!0)},o(ie){T(s.$$.fragment,ie),T(a.$$.fragment,ie),T(o.$$.fragment,ie),T(u.$$.fragment,ie),T(N.$$.fragment,ie),T(q.$$.fragment,ie),T(z.$$.fragment,ie),T(Z.$$.fragment,ie),T(G.$$.fragment,ie),He=!1},d(ie){ie&&M(e),I(s),I(a),I(o),I(u),I(N),I(q),I(z),I(Z),I(G),X.block.d(),X.token=null,X=null,me.block.d(),me.token=null,me=null,Le.block.d(),Le.token=null,Le=null,ht=!1,Me(ve)}}}function th(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_,g,p,y,b;async function w(){const{data:G,error:Y}=await we.from("author").select("author_id").eq("name",u).single(),{data:B,error:ce}=await we.from("publisher").select("publisher_id").eq("name",f).single(),{data:ge,error:Ee}=await we.from("category").select("category_id").eq("name",c).single();let _e=!0;if((Y||!G)&&(s(12,y="is-invalid"),_e=!1),(ce||!B)&&(s(13,b="is-invalid"),_e=!1),(Ee||!ge)&&(s(11,p="is-invalid"),_e=!1),!_e)return;const{error:be}=await we.from("books").insert({title:l,description:o,category_id:ge.category_id,author_id:G.author_id,publisher_id:B.publisher_id,shelf_number:_,isbn:g});be?console.error(be):alert(`Successfully Added ${l}!`)}async function v(){const{data:G,error:Y}=await we.from("author").select("name").order("name",{ascending:!0});return G}async function $(){const{data:G,error:Y}=await we.from("publisher").select("name").order("name",{ascending:!0});return G}async function D(){const{data:G,error:Y}=await we.from("category").select("name").neq("name","Uncategorized").order("name",{ascending:!0});return G}function O(){l=this.value,s(4,l)}function C(){o=this.value,s(5,o)}function N(){r=this.files,s(0,r)}function U(G){as[G?"unshift":"push"](()=>{n=G,s(1,n)})}const q=()=>{s(1,n.value="",n),s(0,r="")};function F(){c=this.value,s(6,c)}function z(){u=this.value,s(7,u)}function ee(){f=this.value,s(8,f)}function Z(){_=hr(this.value),s(9,_)}function fe(){g=this.value,s(10,g)}return t.$$.update=()=>{if(t.$$.dirty[0]&1)if(r&&r[0]){console.log(r),s(2,i="");const G=URL.createObjectURL(r[0]);s(3,a=G)}else console.log(r),s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q,F,z,ee,Z,fe]}class sh extends de{constructor(e){super(),he(this,e,th,eh,ue,{},null,[-1,-1])}}function Ei(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function rh(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function nh(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function y(v,$){return v[0].bio==null?ah:ih}let b=y(t),w=b(t);return{c(){e=m("div"),s=m("h1"),n=K(r),i=k(),a=m("p"),w.c(),l=k(),o=m("p"),c=m("b"),c.textContent="Website:",u=k(),f=m("a"),g=K(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="mailto:"+t[0].email),h(e,"class","container")},m(v,$){E(v,e,$),d(e,s),d(s,n),d(e,i),d(e,a),w.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(v,$){$&1&&r!==(r=v[0].name+"")&&ae(n,r),b===(b=y(v))&&w?w.p(v,$):(w.d(1),w=b(v),w&&(w.c(),w.m(a,null))),$&1&&_!==(_=v[0].email+"")&&ae(g,_),$&1&&p!==(p="mailto:"+v[0].email)&&h(f,"href",p)},i:P,o:P,d(v){v&&M(e),w.d()}}}function ih(t){let e=t[0].bio+"",s;return{c(){s=K(e)},m(r,n){E(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ae(s,e)},d(r){r&&M(s)}}}function ah(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function oh(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function lh(t){let e,s,r=De(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ci(Ei(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){E(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=De(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=Ei(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=Ci(c),n[o].c(),S(n[o],1),n[o].m(e,null))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function Ci(t){let e,s;return e=new fr({props:{title:t[6].title,id:t[6].book_id,author:t[6].publisher.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].publisher.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ch(t){let e,s,r,n;const i=[lh,oh],a=[];function l(o,c){return o[1]?0:1}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s?s.p(o,c):(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function uh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y;r=new yt({props:{text:"Author Details"}});const b=[nh,rh],w=[];function v($,D){return $[0]?0:1}return u=v(t),f=w[u]=b[u](t),g=new Mt({props:{title:"Books",icon:"journal",$$slots:{default:[ch]},$$scope:{ctx:t}}}),{c(){e=m("main"),s=m("section"),L(r.$$.fragment),n=k(),i=m("div"),a=m("div"),l=m("img"),c=k(),f.c(),_=k(),L(g.$$.fragment),h(l,"class","border p-3"),We(l.src,o=hh)||h(l,"src",o),h(l,"alt","author"),h(l,"height","300"),h(l,"width","300"),Ut(l,"object-fit","contain"),h(a,"class","d-flex justify-content-center my-1"),h(i,"class","d-md-flex d-block"),h(e,"class","container")},m($,D){E($,e,D),d(e,s),A(r,s,null),d(s,n),d(s,i),d(i,a),d(a,l),d(i,c),w[u].m(i,null),d(e,_),A(g,e,null),y=!0},p($,[D]){let O=u;u=v($),u===O?w[u].p($,D):(ke(),T(w[O],1,1,()=>{w[O]=null}),$e(),f=w[u],f?f.p($,D):(f=w[u]=b[u]($),f.c()),S(f,1),f.m(i,null));const C={};D&514&&(C.$$scope={dirty:D,ctx:$}),g.$set(C)},i($){y||(S(r.$$.fragment,$),S(f),S(g.$$.fragment,$),$&&(p||Ne(()=>{p=Ve(e,ze,{duration:500}),p.start()})),y=!0)},o($){T(r.$$.fragment,$),T(f),T(g.$$.fragment,$),y=!1},d($){$&&M(e),I(r),w[u].d(),I(g)}}}let hh="./default-profile.jpg";function dh(t,e,s){let{params:r}=e,n=r.authorID,i,a;async function l(){const{data:o,error:c}=await we.from("author").select().eq("author_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await we.from("books").select("book_id, title, publisher(name)").eq("author_id",n);console.log(u),s(1,a=u)}return Ss(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class $a extends de{constructor(e){super(),he(this,e,dh,uh,ue,{params:2})}}function Pi(t,e,s){const r=t.slice();return r[5]=e[s][0],r[6]=e[s][1],r}function Ri(t){let e,s,r=t[0].name+"",n,i,a,l,o,c,u,f,_=t[0].email+"",g,p;function y(v,$){return v[0].bio==null?_h:fh}let b=y(t),w=b(t);return{c(){e=m("div"),s=m("h1"),n=K(r),i=k(),a=m("p"),w.c(),l=k(),o=m("p"),c=m("b"),c.textContent="Website:",u=k(),f=m("a"),g=K(_),h(s,"class","mb-2 pb-2"),h(a,"class",""),h(f,"href",p="https://"+t[0].email),h(f,"id","publisher-website"),h(e,"class","container")},m(v,$){E(v,e,$),d(e,s),d(s,n),d(e,i),d(e,a),w.m(a,null),d(e,l),d(e,o),d(o,c),d(o,u),d(o,f),d(f,g)},p(v,$){$&1&&r!==(r=v[0].name+"")&&ae(n,r),b===(b=y(v))&&w?w.p(v,$):(w.d(1),w=b(v),w&&(w.c(),w.m(a,null))),$&1&&_!==(_=v[0].email+"")&&ae(g,_),$&1&&p!==(p="https://"+v[0].email)&&h(f,"href",p)},d(v){v&&M(e),w.d()}}}function fh(t){let e=t[0].bio+"",s;return{c(){s=K(e)},m(r,n){E(r,s,n)},p(r,n){n&1&&e!==(e=r[0].bio+"")&&ae(s,e)},d(r){r&&M(s)}}}function _h(t){let e;return{c(){e=m("span"),e.textContent="No Description",h(e,"class","text-secondary")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function mh(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function ph(t){let e,s,r=De(Object.entries(t[1])),n=[];for(let a=0;a<r.length;a+=1)n[a]=ji(Pi(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){e=m("div");for(let a=0;a<n.length;a+=1)n[a].c();h(e,"class","row")},m(a,l){E(a,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);s=!0},p(a,l){if(l&2){r=De(Object.entries(a[1]));let o;for(o=0;o<r.length;o+=1){const c=Pi(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=ji(c),n[o].c(),S(n[o],1),n[o].m(e,null))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function ji(t){let e,s;return e=new fr({props:{title:t[6].title,id:t[6].book_id,author:t[6].author.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&2&&(i.title=r[6].title),n&2&&(i.id=r[6].book_id),n&2&&(i.author=r[6].author.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function gh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b;s=new yt({props:{text:"Publisher Details"}});let w=t[0]&&Ri(t);_=new Mt({props:{title:"Books",icon:"journal"}});const v=[ph,mh],$=[];function D(O,C){return O[1]?0:1}return p=D(t),y=$[p]=v[p](t),{c(){e=m("section"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),a=m("img"),o=k(),w&&w.c(),u=k(),f=m("section"),L(_.$$.fragment),g=k(),y.c(),h(a,"id","img-cover"),h(a,"class","border p-3"),We(a.src,l=bh)||h(a,"src",l),h(a,"alt","publisher"),h(a,"height","300"),h(a,"width","300"),Ut(a,"object-fit","contain"),h(i,"id","publisher-cover"),h(i,"class","d-flex justify-content-center my-1"),h(n,"class","d-md-flex d-block"),h(e,"class","container"),h(f,"class","container")},m(O,C){E(O,e,C),A(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(n,o),w&&w.m(n,null),E(O,u,C),E(O,f,C),A(_,f,null),d(f,g),$[p].m(f,null),b=!0},p(O,[C]){O[0]?w?w.p(O,C):(w=Ri(O),w.c(),w.m(n,null)):w&&(w.d(1),w=null);let N=p;p=D(O),p===N?$[p].p(O,C):(ke(),T($[N],1,1,()=>{$[N]=null}),$e(),y=$[p],y?y.p(O,C):(y=$[p]=v[p](O),y.c()),S(y,1),y.m(f,null))},i(O){b||(S(s.$$.fragment,O),O&&(c||Ne(()=>{c=Ve(e,ze,{duration:500}),c.start()})),S(_.$$.fragment,O),S(y),b=!0)},o(O){T(s.$$.fragment,O),T(_.$$.fragment,O),T(y),b=!1},d(O){O&&(M(e),M(u),M(f)),I(s),w&&w.d(),I(_),$[p].d()}}}let bh="./default-profile.jpg";function vh(t,e,s){let{params:r}=e,n=r.publisherID,i,a;async function l(){const{data:o,error:c}=await we.from("publisher").select().eq("publisher_id",n);console.log(o),s(0,i=o[0]);const{data:u,error:f}=await we.from("books").select("book_id, title, author(name)").eq("publisher_id",n);console.log(u),s(1,a=u)}return Ss(l),t.$$set=o=>{"params"in o&&s(2,r=o.params)},[i,a,r]}class Sa extends de{constructor(e){super(),he(this,e,vh,gh,ue,{params:2})}}function yh(t){let e,s,r,n,i,a,l,o,c,u;return{c(){e=m("div"),s=m("div"),r=m("i"),i=k(),a=m("div"),l=m("h5"),o=m("a"),c=K(t[0]),h(r,"class",n="bi bi-"+t[2]),h(s,"class","d-flex justify-content-center"),Ut(s,"font-size","4em"),h(o,"class","stretched-link svelte-1vxezln"),h(o,"href",u="./#/"+t[1]),h(l,"class","card-title text-center my-3"),h(a,"class","card-body p-1"),h(e,"class","card col-md-3 col-6 border-1 py-4 svelte-1vxezln")},m(f,_){E(f,e,_),d(e,s),d(s,r),d(e,i),d(e,a),d(a,l),d(l,o),d(o,c)},p(f,[_]){_&4&&n!==(n="bi bi-"+f[2])&&h(r,"class",n),_&1&&ae(c,f[0]),_&2&&u!==(u="./#/"+f[1])&&h(o,"href",u)},i:P,o:P,d(f){f&&M(e)}}}function wh(t,e,s){let{name:r}=e,{link:n}=e,{icon:i=""}=e;return t.$$set=a=>{"name"in a&&s(0,r=a.name),"link"in a&&s(1,n=a.link),"icon"in a&&s(2,i=a.icon)},[r,n,i]}class xs extends de{constructor(e){super(),he(this,e,wh,yh,ue,{name:0,link:1,icon:2})}}function kh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g;return s=new Mt({props:{title:"Welcome!",icon:"wrench-adjustable"}}),i=new xs({props:{name:"Borrow",link:"borrow",icon:"journal-arrow-up"}}),l=new xs({props:{name:"Return",link:"return",icon:"journal-arrow-down"}}),c=new xs({props:{name:"Add Book",link:"add-book",icon:"journal-plus"}}),f=new xs({props:{name:"Manage",link:"manage",icon:"journal-album"}}),{c(){e=m("main"),L(s.$$.fragment),r=k(),n=m("div"),L(i.$$.fragment),a=k(),L(l.$$.fragment),o=k(),L(c.$$.fragment),u=k(),L(f.$$.fragment),h(n,"class","row"),h(e,"class","container")},m(p,y){E(p,e,y),A(s,e,null),d(e,r),d(e,n),A(i,n,null),d(n,a),A(l,n,null),d(n,o),A(c,n,null),d(n,u),A(f,n,null),g=!0},p:P,i(p){g||(S(s.$$.fragment,p),S(i.$$.fragment,p),S(l.$$.fragment,p),S(c.$$.fragment,p),S(f.$$.fragment,p),p&&(_||Ne(()=>{_=Ve(e,ze,{duration:500}),_.start()})),g=!0)},o(p){T(s.$$.fragment,p),T(i.$$.fragment,p),T(l.$$.fragment,p),T(c.$$.fragment,p),T(f.$$.fragment,p),g=!1},d(p){p&&M(e),I(s),I(i),I(l),I(c),I(f)}}}class $h extends de{constructor(e){super(),he(this,e,null,kh,ue,{})}}function Ai(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Ii(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Li(t,e,s){const r=t.slice();return r[13]=e[s][0],r[14]=e[s][1],r}function Sh(t){let e,s;return e=new Ct({}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p:P,i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Oh(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><h1><i class="bi bi-patch-question"></i></h1> <h4>No Results</h4></div>',h(e,"class","d-flex justify-content-center")},m(s,r){E(s,e,r)},p:P,i:P,o:P,d(s){s&&M(e)}}}function Th(t){let e,s,r=De(Object.entries(t[2].publisher)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Yi(Ai(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);E(a,e,l),s=!0},p(a,l){if(l&4){r=De(Object.entries(a[2].publisher));let o;for(o=0;o<r.length;o+=1){const c=Ai(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=Yi(c),n[o].c(),S(n[o],1),n[o].m(e.parentNode,e))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function Dh(t){let e,s,r=De(Object.entries(t[2].author)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ni(Ii(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);E(a,e,l),s=!0},p(a,l){if(l&4){r=De(Object.entries(a[2].author));let o;for(o=0;o<r.length;o+=1){const c=Ii(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=Ni(c),n[o].c(),S(n[o],1),n[o].m(e.parentNode,e))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function Mh(t){let e,s,r=De(Object.entries(t[2].books)),n=[];for(let a=0;a<r.length;a+=1)n[a]=Ui(Li(t,r,a));const i=a=>T(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Qe()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);E(a,e,l),s=!0},p(a,l){if(l&4){r=De(Object.entries(a[2].books));let o;for(o=0;o<r.length;o+=1){const c=Li(a,r,o);n[o]?(n[o].p(c,l),S(n[o],1)):(n[o]=Ui(c),n[o].c(),S(n[o],1),n[o].m(e.parentNode,e))}for(ke(),o=r.length;o<n.length;o+=1)i(o);$e()}},i(a){if(!s){for(let l=0;l<r.length;l+=1)S(n[l]);s=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)T(n[l]);s=!1},d(a){a&&M(e),Ze(n,a)}}}function Yi(t){let e,s;return e=new wa({props:{id:t[14].publisher_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].publisher_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Ni(t){let e,s;return e=new ya({props:{id:t[14].author_id,name:t[14].name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.id=r[14].author_id),n&4&&(i.name=r[14].name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Ui(t){let e,s;return e=new fr({props:{title:t[14].title,id:t[14].book_id,author:t[14].author.name}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},p(r,n){const i={};n&4&&(i.title=r[14].title),n&4&&(i.id=r[14].book_id),n&4&&(i.author=r[14].author.name),e.$set(i)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function Eh(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C;s=new yt({props:{text:"Library Holdings"}});const N=[Mh,Dh,Th,Oh,Sh],U=[];function q(F,z){return F[2].books.length>0?0:F[2].author.length>0?1:F[2].publisher.length>0?2:F[0]?4:3}return w=q(t),v=U[w]=N[w](t),{c(){e=m("main"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),a=m("select"),l=m("option"),l.textContent="Books",o=m("option"),o.textContent="Author",c=m("option"),c.textContent="Publisher",u=k(),f=m("div"),_=m("input"),g=k(),p=m("button"),p.innerHTML='<i class="bi bi-search"></i>',y=k(),b=m("div"),v.c(),l.selected=!0,l.__value="books",V(l,l.__value),o.__value="author",V(o,o.__value),c.__value="publisher",V(c,c.__value),h(a,"name","searchtype"),h(a,"class","form-select"),h(i,"class","col-auto col-md-2 p-0 pe-md-4"),h(_,"class","form-control form-control-lg"),h(_,"type","search"),h(_,"placeholder","Search"),h(_,"name","Search"),h(f,"class","col-6 col-md-6 p-0"),h(p,"class","btn btn-lg btn-success col-auto col-md-1"),h(p,"type","submit"),h(n,"class","row justify-content-center align-items-center my-4 mx-auto col-12"),h(b,"class","row"),h(e,"class","container")},m(F,z){E(F,e,z),A(s,e,null),d(e,r),d(e,n),d(n,i),d(i,a),d(a,l),d(a,o),d(a,c),t[5](a),d(n,u),d(n,f),d(f,_),V(_,t[1]),d(n,g),d(n,p),d(e,y),d(e,b),U[w].m(b,null),D=!0,O||(C=[H(a,"change",t[4]),H(_,"input",t[6]),H(_,"keyup",t[7]),H(p,"click",t[4])],O=!0)},p(F,[z]){z&2&&_.value!==F[1]&&V(_,F[1]);let ee=w;w=q(F),w===ee?U[w].p(F,z):(ke(),T(U[ee],1,1,()=>{U[ee]=null}),$e(),v=U[w],v?v.p(F,z):(v=U[w]=N[w](F),v.c()),S(v,1),v.m(b,null))},i(F){D||(S(s.$$.fragment,F),S(v),F&&($||Ne(()=>{$=Ve(e,ze,{duration:500}),$.start()})),D=!0)},o(F){T(s.$$.fragment,F),T(v),D=!1},d(F){F&&M(e),I(s),t[5](null),U[w].d(),O=!1,Me(C)}}}function Ch(t,e,s){let r;Ki(t,zo,b=>s(9,r=b));let n=!0;function i(){switch(r){case"/search/author":s(3,f.value="author",f);break;case"/search/publisher":s(3,f.value="publisher",f);break;default:s(3,f.value="books",f)}}const a={books:"book_id, title, author(name)",author:"author_id, name",publisher:"publisher_id, name"},l={books:"title",author:"name",publisher:"name"};let o="books",c="",u={books:[],author:[],publisher:[]},f;async function _(){s(0,n=!0),o=f.value,console.log(o);const{data:b,error:w}=await we.from(o).select(a[o]).ilike(l[o],`%${c}%`);w&&console.log(w),s(2,u.books=[],u),s(2,u.author=[],u),s(2,u.publisher=[],u),s(2,u[o]=b,u),s(2,u),s(0,n=!1),console.log(n,u)}Ss(i),Ss(_);function g(b){as[b?"unshift":"push"](()=>{f=b,s(3,f)})}function p(){c=this.value,s(1,c)}return[n,c,u,f,_,g,p,b=>b.key==="Enter"&&_()]}class ss extends de{constructor(e){super(),he(this,e,Ch,Eh,ue,{})}}function Ph(t){let e,s,r,n,i,a,l;return{c(){e=m("div"),s=m("button"),s.textContent="Client",r=k(),n=m("button"),n.textContent="Staff",h(s,"class","m-2 btn btn-primary btn-lg"),h(n,"class","m-2 btn btn-danger btn-lg"),h(e,"class","d-flex justify-content-center align-items-center"),Ut(e,"height","90vh")},m(o,c){E(o,e,c),d(e,s),d(e,r),d(e,n),a||(l=[H(s,"click",t[0]),H(n,"click",t[1])],a=!0)},p:P,i(o){o&&(i||Ne(()=>{i=Ve(e,ze,{duration:500}),i.start()}))},o:P,d(o){o&&M(e),a=!1,Me(l)}}}function Rh(t){return document.querySelector("body").setAttribute("data-bs-theme","dark"),[()=>{os.set("client"),localStorage.setItem("accType","client")},()=>{os.set("staff"),localStorage.setItem("accType","staff")}]}class jh extends de{constructor(e){super(),he(this,e,Rh,Ph,ue,{})}}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Oa;function j(){return Oa.apply(null,arguments)}function Ah(t){Oa=t}function nt(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Nt(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _n(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(oe(t,e))return!1;return!0}function Be(t){return t===void 0}function vt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Rs(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ta(t,e){var s=[],r,n=t.length;for(r=0;r<n;++r)s.push(e(t[r],r));return s}function Tt(t,e){for(var s in e)oe(e,s)&&(t[s]=e[s]);return oe(e,"toString")&&(t.toString=e.toString),oe(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ct(t,e,s,r){return Ja(t,e,s,r,!0).utc()}function Ih(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Q(t){return t._pf==null&&(t._pf=Ih()),t._pf}var Gr;Array.prototype.some?Gr=Array.prototype.some:Gr=function(t){var e=Object(this),s=e.length>>>0,r;for(r=0;r<s;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function mn(t){var e=null,s=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=Q(t),s=Gr.call(e.parsedDateParts,function(n){return n!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function pr(t){var e=ct(NaN);return t!=null?Tt(Q(e),t):Q(e).userInvalidated=!0,e}var xi=j.momentProperties=[],Lr=!1;function pn(t,e){var s,r,n,i=xi.length;if(Be(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Be(e._i)||(t._i=e._i),Be(e._f)||(t._f=e._f),Be(e._l)||(t._l=e._l),Be(e._strict)||(t._strict=e._strict),Be(e._tzm)||(t._tzm=e._tzm),Be(e._isUTC)||(t._isUTC=e._isUTC),Be(e._offset)||(t._offset=e._offset),Be(e._pf)||(t._pf=Q(e)),Be(e._locale)||(t._locale=e._locale),i>0)for(s=0;s<i;s++)r=xi[s],n=e[r],Be(n)||(t[r]=n);return t}function js(t){pn(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Lr===!1&&(Lr=!0,j.updateOffset(this),Lr=!1)}function it(t){return t instanceof js||t!=null&&t._isAMomentObject!=null}function Da(t){j.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Xe(t,e){var s=!0;return Tt(function(){if(j.deprecationHandler!=null&&j.deprecationHandler(null,t),s){var r=[],n,i,a,l=arguments.length;for(i=0;i<l;i++){if(n="",typeof arguments[i]=="object"){n+=`
[`+i+"] ";for(a in arguments[0])oe(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[i];r.push(n)}Da(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var Fi={};function Ma(t,e){j.deprecationHandler!=null&&j.deprecationHandler(t,e),Fi[t]||(Da(e),Fi[t]=!0)}j.suppressDeprecationWarnings=!1;j.deprecationHandler=null;function ut(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Lh(t){var e,s;for(s in t)oe(t,s)&&(e=t[s],ut(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Jr(t,e){var s=Tt({},t),r;for(r in e)oe(e,r)&&(Nt(t[r])&&Nt(e[r])?(s[r]={},Tt(s[r],t[r]),Tt(s[r],e[r])):e[r]!=null?s[r]=e[r]:delete s[r]);for(r in t)oe(t,r)&&!oe(e,r)&&Nt(t[r])&&(s[r]=Tt({},s[r]));return s}function gn(t){t!=null&&this.set(t)}var Kr;Object.keys?Kr=Object.keys:Kr=function(t){var e,s=[];for(e in t)oe(t,e)&&s.push(e);return s};var Yh={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Nh(t,e,s){var r=this._calendar[t]||this._calendar.sameElse;return ut(r)?r.call(e,s):r}function lt(t,e,s){var r=""+Math.abs(t),n=e-r.length,i=t>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var bn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Fs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yr={},rs={};function W(t,e,s,r){var n=r;typeof r=="string"&&(n=function(){return this[r]()}),t&&(rs[t]=n),e&&(rs[e[0]]=function(){return lt(n.apply(this,arguments),e[1],e[2])}),s&&(rs[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function Uh(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function xh(t){var e=t.match(bn),s,r;for(s=0,r=e.length;s<r;s++)rs[e[s]]?e[s]=rs[e[s]]:e[s]=Uh(e[s]);return function(n){var i="",a;for(a=0;a<r;a++)i+=ut(e[a])?e[a].call(n,t):e[a];return i}}function Vs(t,e){return t.isValid()?(e=Ea(e,t.localeData()),Yr[e]=Yr[e]||xh(e),Yr[e](t)):t.localeData().invalidDate()}function Ea(t,e){var s=5;function r(n){return e.longDateFormat(n)||n}for(Fs.lastIndex=0;s>=0&&Fs.test(t);)t=t.replace(Fs,r),Fs.lastIndex=0,s-=1;return t}var Fh={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Wh(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(bn).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Hh="Invalid date";function Bh(){return this._invalidDate}var qh="%d",Vh=/\d{1,2}/;function zh(t){return this._ordinal.replace("%d",t)}var Gh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Jh(t,e,s,r){var n=this._relativeTime[s];return ut(n)?n(t,e,s,r):n.replace(/%d/i,t)}function Kh(t,e){var s=this._relativeTime[t>0?"future":"past"];return ut(s)?s(e):s.replace(/%s/i,e)}var Wi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function et(t){return typeof t=="string"?Wi[t]||Wi[t.toLowerCase()]:void 0}function vn(t){var e={},s,r;for(r in t)oe(t,r)&&(s=et(r),s&&(e[s]=t[r]));return e}var Zh={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Qh(t){var e=[],s;for(s in t)oe(t,s)&&e.push({unit:s,priority:Zh[s]});return e.sort(function(r,n){return r.priority-n.priority}),e}var Ca=/\d/,Ge=/\d\d/,Pa=/\d{3}/,yn=/\d{4}/,gr=/[+-]?\d{6}/,Oe=/\d\d?/,Ra=/\d\d\d\d?/,ja=/\d\d\d\d\d\d?/,br=/\d{1,3}/,wn=/\d{1,4}/,vr=/[+-]?\d{1,6}/,hs=/\d+/,yr=/[+-]?\d+/,Xh=/Z|[+-]\d\d:?\d\d/gi,wr=/Z|[+-]\d\d(?::?\d\d)?/gi,ed=/[+-]?\d+(\.\d{1,3})?/,As=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ds=/^[1-9]\d?/,kn=/^([1-9]\d|\d)/,tr;tr={};function x(t,e,s){tr[t]=ut(e)?e:function(r,n){return r&&s?s:e}}function td(t,e){return oe(tr,t)?tr[t](e._strict,e._locale):new RegExp(sd(t))}function sd(t){return gt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,r,n,i){return s||r||n||i}))}function gt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ke(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function se(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=Ke(e)),s}var Zr={};function pe(t,e){var s,r=e,n;for(typeof t=="string"&&(t=[t]),vt(e)&&(r=function(i,a){a[e]=se(i)}),n=t.length,s=0;s<n;s++)Zr[t[s]]=r}function Is(t,e){pe(t,function(s,r,n,i){n._w=n._w||{},e(s,n._w,n,i)})}function rd(t,e,s){e!=null&&oe(Zr,t)&&Zr[t](e,s._a,s,t)}function kr(t){return t%4===0&&t%100!==0||t%400===0}var Fe=0,mt=1,ot=2,Ie=3,rt=4,pt=5,Yt=6,nd=7,id=8;W("Y",0,0,function(){var t=this.year();return t<=9999?lt(t,4):"+"+t});W(0,["YY",2],0,function(){return this.year()%100});W(0,["YYYY",4],0,"year");W(0,["YYYYY",5],0,"year");W(0,["YYYYYY",6,!0],0,"year");x("Y",yr);x("YY",Oe,Ge);x("YYYY",wn,yn);x("YYYYY",vr,gr);x("YYYYYY",vr,gr);pe(["YYYYY","YYYYYY"],Fe);pe("YYYY",function(t,e){e[Fe]=t.length===2?j.parseTwoDigitYear(t):se(t)});pe("YY",function(t,e){e[Fe]=j.parseTwoDigitYear(t)});pe("Y",function(t,e){e[Fe]=parseInt(t,10)});function ws(t){return kr(t)?366:365}j.parseTwoDigitYear=function(t){return se(t)+(se(t)>68?1900:2e3)};var Aa=fs("FullYear",!0);function ad(){return kr(this.year())}function fs(t,e){return function(s){return s!=null?(Ia(this,t,s),j.updateOffset(this,e),this):Ts(this,t)}}function Ts(t,e){if(!t.isValid())return NaN;var s=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return r?s.getUTCSeconds():s.getSeconds();case"Minutes":return r?s.getUTCMinutes():s.getMinutes();case"Hours":return r?s.getUTCHours():s.getHours();case"Date":return r?s.getUTCDate():s.getDate();case"Day":return r?s.getUTCDay():s.getDay();case"Month":return r?s.getUTCMonth():s.getMonth();case"FullYear":return r?s.getUTCFullYear():s.getFullYear();default:return NaN}}function Ia(t,e,s){var r,n,i,a,l;if(!(!t.isValid()||isNaN(s))){switch(r=t._d,n=t._isUTC,e){case"Milliseconds":return void(n?r.setUTCMilliseconds(s):r.setMilliseconds(s));case"Seconds":return void(n?r.setUTCSeconds(s):r.setSeconds(s));case"Minutes":return void(n?r.setUTCMinutes(s):r.setMinutes(s));case"Hours":return void(n?r.setUTCHours(s):r.setHours(s));case"Date":return void(n?r.setUTCDate(s):r.setDate(s));case"FullYear":break;default:return}i=s,a=t.month(),l=t.date(),l=l===29&&a===1&&!kr(i)?28:l,n?r.setUTCFullYear(i,a,l):r.setFullYear(i,a,l)}}function od(t){return t=et(t),ut(this[t])?this[t]():this}function ld(t,e){if(typeof t=="object"){t=vn(t);var s=Qh(t),r,n=s.length;for(r=0;r<n;r++)this[s[r].unit](t[s[r].unit])}else if(t=et(t),ut(this[t]))return this[t](e);return this}function cd(t,e){return(t%e+e)%e}var Re;Array.prototype.indexOf?Re=Array.prototype.indexOf:Re=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function $n(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=cd(e,12);return t+=(e-s)/12,s===1?kr(t)?29:28:31-s%7%2}W("M",["MM",2],"Mo",function(){return this.month()+1});W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});W("MMMM",0,0,function(t){return this.localeData().months(this,t)});x("M",Oe,ds);x("MM",Oe,Ge);x("MMM",function(t,e){return e.monthsShortRegex(t)});x("MMMM",function(t,e){return e.monthsRegex(t)});pe(["M","MM"],function(t,e){e[mt]=se(t)-1});pe(["MMM","MMMM"],function(t,e,s,r){var n=s._locale.monthsParse(t,r,s._strict);n!=null?e[mt]=n:Q(s).invalidMonth=t});var ud="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),La="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ya=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hd=As,dd=As;function fd(t,e){return t?nt(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ya).test(e)?"format":"standalone"][t.month()]:nt(this._months)?this._months:this._months.standalone}function _d(t,e){return t?nt(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ya.test(e)?"format":"standalone"][t.month()]:nt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function md(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=ct([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return s?e==="MMM"?(n=Re.call(this._shortMonthsParse,a),n!==-1?n:null):(n=Re.call(this._longMonthsParse,a),n!==-1?n:null):e==="MMM"?(n=Re.call(this._shortMonthsParse,a),n!==-1?n:(n=Re.call(this._longMonthsParse,a),n!==-1?n:null)):(n=Re.call(this._longMonthsParse,a),n!==-1?n:(n=Re.call(this._shortMonthsParse,a),n!==-1?n:null))}function pd(t,e,s){var r,n,i;if(this._monthsParseExact)return md.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=ct([2e3,r]),s&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!s&&!this._monthsParse[r]&&(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(s&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!s&&this._monthsParse[r].test(t))return r}}function Na(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=se(e);else if(e=t.localeData().monthsParse(e),!vt(e))return t}var s=e,r=t.date();return r=r<29?r:Math.min(r,$n(t.year(),s)),t._isUTC?t._d.setUTCMonth(s,r):t._d.setMonth(s,r),t}function Ua(t){return t!=null?(Na(this,t),j.updateOffset(this,!0),this):Ts(this,"Month")}function gd(){return $n(this.year(),this.month())}function bd(t){return this._monthsParseExact?(oe(this,"_monthsRegex")||xa.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(oe(this,"_monthsShortRegex")||(this._monthsShortRegex=hd),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vd(t){return this._monthsParseExact?(oe(this,"_monthsRegex")||xa.call(this),t?this._monthsStrictRegex:this._monthsRegex):(oe(this,"_monthsRegex")||(this._monthsRegex=dd),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function xa(){function t(o,c){return c.length-o.length}var e=[],s=[],r=[],n,i,a,l;for(n=0;n<12;n++)i=ct([2e3,n]),a=gt(this.monthsShort(i,"")),l=gt(this.months(i,"")),e.push(a),s.push(l),r.push(l),r.push(a);e.sort(t),s.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function yd(t,e,s,r,n,i,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,r,n,i,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,r,n,i,a),l}function Ds(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function sr(t,e,s){var r=7+e-s,n=(7+Ds(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Fa(t,e,s,r,n){var i=(7+s-r)%7,a=sr(t,r,n),l=1+7*(e-1)+i+a,o,c;return l<=0?(o=t-1,c=ws(o)+l):l>ws(t)?(o=t+1,c=l-ws(t)):(o=t,c=l),{year:o,dayOfYear:c}}function Ms(t,e,s){var r=sr(t.year(),e,s),n=Math.floor((t.dayOfYear()-r-1)/7)+1,i,a;return n<1?(a=t.year()-1,i=n+bt(a,e,s)):n>bt(t.year(),e,s)?(i=n-bt(t.year(),e,s),a=t.year()+1):(a=t.year(),i=n),{week:i,year:a}}function bt(t,e,s){var r=sr(t,e,s),n=sr(t+1,e,s);return(ws(t)-r+n)/7}W("w",["ww",2],"wo","week");W("W",["WW",2],"Wo","isoWeek");x("w",Oe,ds);x("ww",Oe,Ge);x("W",Oe,ds);x("WW",Oe,Ge);Is(["w","ww","W","WW"],function(t,e,s,r){e[r.substr(0,1)]=se(t)});function wd(t){return Ms(t,this._week.dow,this._week.doy).week}var kd={dow:0,doy:6};function $d(){return this._week.dow}function Sd(){return this._week.doy}function Od(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Td(t){var e=Ms(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}W("d",0,"do","day");W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});W("e",0,0,"weekday");W("E",0,0,"isoWeekday");x("d",Oe);x("e",Oe);x("E",Oe);x("dd",function(t,e){return e.weekdaysMinRegex(t)});x("ddd",function(t,e){return e.weekdaysShortRegex(t)});x("dddd",function(t,e){return e.weekdaysRegex(t)});Is(["dd","ddd","dddd"],function(t,e,s,r){var n=s._locale.weekdaysParse(t,r,s._strict);n!=null?e.d=n:Q(s).invalidWeekday=t});Is(["d","e","E"],function(t,e,s,r){e[r]=se(t)});function Dd(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Md(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Sn(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Wa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pd=As,Rd=As,jd=As;function Ad(t,e){var s=nt(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Sn(s,this._week.dow):t?s[t.day()]:s}function Id(t){return t===!0?Sn(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Ld(t){return t===!0?Sn(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Yd(t,e,s){var r,n,i,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=ct([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return s?e==="dddd"?(n=Re.call(this._weekdaysParse,a),n!==-1?n:null):e==="ddd"?(n=Re.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=Re.call(this._minWeekdaysParse,a),n!==-1?n:null):e==="dddd"?(n=Re.call(this._weekdaysParse,a),n!==-1||(n=Re.call(this._shortWeekdaysParse,a),n!==-1)?n:(n=Re.call(this._minWeekdaysParse,a),n!==-1?n:null)):e==="ddd"?(n=Re.call(this._shortWeekdaysParse,a),n!==-1||(n=Re.call(this._weekdaysParse,a),n!==-1)?n:(n=Re.call(this._minWeekdaysParse,a),n!==-1?n:null)):(n=Re.call(this._minWeekdaysParse,a),n!==-1||(n=Re.call(this._weekdaysParse,a),n!==-1)?n:(n=Re.call(this._shortWeekdaysParse,a),n!==-1?n:null))}function Nd(t,e,s){var r,n,i;if(this._weekdaysParseExact)return Yd.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=ct([2e3,1]).day(r),s&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(s&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(s&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!s&&this._weekdaysParse[r].test(t))return r}}function Ud(t){if(!this.isValid())return t!=null?this:NaN;var e=Ts(this,"Day");return t!=null?(t=Dd(t,this.localeData()),this.add(t-e,"d")):e}function xd(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Fd(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Md(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Wd(t){return this._weekdaysParseExact?(oe(this,"_weekdaysRegex")||On.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(oe(this,"_weekdaysRegex")||(this._weekdaysRegex=Pd),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Hd(t){return this._weekdaysParseExact?(oe(this,"_weekdaysRegex")||On.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(oe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Rd),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Bd(t){return this._weekdaysParseExact?(oe(this,"_weekdaysRegex")||On.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(oe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jd),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function On(){function t(u,f){return f.length-u.length}var e=[],s=[],r=[],n=[],i,a,l,o,c;for(i=0;i<7;i++)a=ct([2e3,1]).day(i),l=gt(this.weekdaysMin(a,"")),o=gt(this.weekdaysShort(a,"")),c=gt(this.weekdays(a,"")),e.push(l),s.push(o),r.push(c),n.push(l),n.push(o),n.push(c);e.sort(t),s.sort(t),r.sort(t),n.sort(t),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Tn(){return this.hours()%12||12}function qd(){return this.hours()||24}W("H",["HH",2],0,"hour");W("h",["hh",2],0,Tn);W("k",["kk",2],0,qd);W("hmm",0,0,function(){return""+Tn.apply(this)+lt(this.minutes(),2)});W("hmmss",0,0,function(){return""+Tn.apply(this)+lt(this.minutes(),2)+lt(this.seconds(),2)});W("Hmm",0,0,function(){return""+this.hours()+lt(this.minutes(),2)});W("Hmmss",0,0,function(){return""+this.hours()+lt(this.minutes(),2)+lt(this.seconds(),2)});function Ha(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Ha("a",!0);Ha("A",!1);function Ba(t,e){return e._meridiemParse}x("a",Ba);x("A",Ba);x("H",Oe,kn);x("h",Oe,ds);x("k",Oe,ds);x("HH",Oe,Ge);x("hh",Oe,Ge);x("kk",Oe,Ge);x("hmm",Ra);x("hmmss",ja);x("Hmm",Ra);x("Hmmss",ja);pe(["H","HH"],Ie);pe(["k","kk"],function(t,e,s){var r=se(t);e[Ie]=r===24?0:r});pe(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});pe(["h","hh"],function(t,e,s){e[Ie]=se(t),Q(s).bigHour=!0});pe("hmm",function(t,e,s){var r=t.length-2;e[Ie]=se(t.substr(0,r)),e[rt]=se(t.substr(r)),Q(s).bigHour=!0});pe("hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ie]=se(t.substr(0,r)),e[rt]=se(t.substr(r,2)),e[pt]=se(t.substr(n)),Q(s).bigHour=!0});pe("Hmm",function(t,e,s){var r=t.length-2;e[Ie]=se(t.substr(0,r)),e[rt]=se(t.substr(r))});pe("Hmmss",function(t,e,s){var r=t.length-4,n=t.length-2;e[Ie]=se(t.substr(0,r)),e[rt]=se(t.substr(r,2)),e[pt]=se(t.substr(n))});function Vd(t){return(t+"").toLowerCase().charAt(0)==="p"}var zd=/[ap]\.?m?\.?/i,Gd=fs("Hours",!0);function Jd(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var qa={calendar:Yh,longDateFormat:Fh,invalidDate:Hh,ordinal:qh,dayOfMonthOrdinalParse:Vh,relativeTime:Gh,months:ud,monthsShort:La,week:kd,weekdays:Ed,weekdaysMin:Cd,weekdaysShort:Wa,meridiemParse:zd},Te={},ps={},Es;function Kd(t,e){var s,r=Math.min(t.length,e.length);for(s=0;s<r;s+=1)if(t[s]!==e[s])return s;return r}function Hi(t){return t&&t.toLowerCase().replace("_","-")}function Zd(t){for(var e=0,s,r,n,i;e<t.length;){for(i=Hi(t[e]).split("-"),s=i.length,r=Hi(t[e+1]),r=r?r.split("-"):null;s>0;){if(n=$r(i.slice(0,s).join("-")),n)return n;if(r&&r.length>=s&&Kd(i,r)>=s-1)break;s--}e++}return Es}function Qd(t){return!!(t&&t.match("^[^/\\\\]*$"))}function $r(t){var e=null,s;if(Te[t]===void 0&&typeof Js<"u"&&Js&&Js.exports&&Qd(t))try{e=Es._abbr,s=require,s("./locale/"+t),Et(e)}catch{Te[t]=null}return Te[t]}function Et(t,e){var s;return t&&(Be(e)?s=wt(t):s=Dn(t,e),s?Es=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Es._abbr}function Dn(t,e){if(e!==null){var s,r=qa;if(e.abbr=t,Te[t]!=null)Ma("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Te[t]._config;else if(e.parentLocale!=null)if(Te[e.parentLocale]!=null)r=Te[e.parentLocale]._config;else if(s=$r(e.parentLocale),s!=null)r=s._config;else return ps[e.parentLocale]||(ps[e.parentLocale]=[]),ps[e.parentLocale].push({name:t,config:e}),null;return Te[t]=new gn(Jr(r,e)),ps[t]&&ps[t].forEach(function(n){Dn(n.name,n.config)}),Et(t),Te[t]}else return delete Te[t],null}function Xd(t,e){if(e!=null){var s,r,n=qa;Te[t]!=null&&Te[t].parentLocale!=null?Te[t].set(Jr(Te[t]._config,e)):(r=$r(t),r!=null&&(n=r._config),e=Jr(n,e),r==null&&(e.abbr=t),s=new gn(e),s.parentLocale=Te[t],Te[t]=s),Et(t)}else Te[t]!=null&&(Te[t].parentLocale!=null?(Te[t]=Te[t].parentLocale,t===Et()&&Et(t)):Te[t]!=null&&delete Te[t]);return Te[t]}function wt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Es;if(!nt(t)){if(e=$r(t),e)return e;t=[t]}return Zd(t)}function ef(){return Kr(Te)}function Mn(t){var e,s=t._a;return s&&Q(t).overflow===-2&&(e=s[mt]<0||s[mt]>11?mt:s[ot]<1||s[ot]>$n(s[Fe],s[mt])?ot:s[Ie]<0||s[Ie]>24||s[Ie]===24&&(s[rt]!==0||s[pt]!==0||s[Yt]!==0)?Ie:s[rt]<0||s[rt]>59?rt:s[pt]<0||s[pt]>59?pt:s[Yt]<0||s[Yt]>999?Yt:-1,Q(t)._overflowDayOfYear&&(e<Fe||e>ot)&&(e=ot),Q(t)._overflowWeeks&&e===-1&&(e=nd),Q(t)._overflowWeekday&&e===-1&&(e=id),Q(t).overflow=e),t}var tf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rf=/Z|[+-]\d\d(?::?\d\d)?/,Ws=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Nr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],nf=/^\/?Date\((-?\d+)/i,af=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,of={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Va(t){var e,s,r=t._i,n=tf.exec(r)||sf.exec(r),i,a,l,o,c=Ws.length,u=Nr.length;if(n){for(Q(t).iso=!0,e=0,s=c;e<s;e++)if(Ws[e][1].exec(n[1])){a=Ws[e][0],i=Ws[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(n[3]){for(e=0,s=u;e<s;e++)if(Nr[e][1].exec(n[3])){l=(n[2]||" ")+Nr[e][0];break}if(l==null){t._isValid=!1;return}}if(!i&&l!=null){t._isValid=!1;return}if(n[4])if(rf.exec(n[4]))o="Z";else{t._isValid=!1;return}t._f=a+(l||"")+(o||""),Cn(t)}else t._isValid=!1}function lf(t,e,s,r,n,i){var a=[cf(t),La.indexOf(e),parseInt(s,10),parseInt(r,10),parseInt(n,10)];return i&&a.push(parseInt(i,10)),a}function cf(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function uf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function hf(t,e,s){if(t){var r=Wa.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return Q(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function df(t,e,s){if(t)return of[t];if(e)return 0;var r=parseInt(s,10),n=r%100,i=(r-n)/100;return i*60+n}function za(t){var e=af.exec(uf(t._i)),s;if(e){if(s=lf(e[4],e[3],e[2],e[5],e[6],e[7]),!hf(e[1],s,t))return;t._a=s,t._tzm=df(e[8],e[9],e[10]),t._d=Ds.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Q(t).rfc2822=!0}else t._isValid=!1}function ff(t){var e=nf.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Va(t),t._isValid===!1)delete t._isValid;else return;if(za(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:j.createFromInputFallback(t)}j.createFromInputFallback=Xe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Zt(t,e,s){return t??e??s}function _f(t){var e=new Date(j.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function En(t){var e,s,r=[],n,i,a;if(!t._d){for(n=_f(t),t._w&&t._a[ot]==null&&t._a[mt]==null&&mf(t),t._dayOfYear!=null&&(a=Zt(t._a[Fe],n[Fe]),(t._dayOfYear>ws(a)||t._dayOfYear===0)&&(Q(t)._overflowDayOfYear=!0),s=Ds(a,0,t._dayOfYear),t._a[mt]=s.getUTCMonth(),t._a[ot]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ie]===24&&t._a[rt]===0&&t._a[pt]===0&&t._a[Yt]===0&&(t._nextDay=!0,t._a[Ie]=0),t._d=(t._useUTC?Ds:yd).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ie]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(Q(t).weekdayMismatch=!0)}}function mf(t){var e,s,r,n,i,a,l,o,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(i=1,a=4,s=Zt(e.GG,t._a[Fe],Ms(Se(),1,4).year),r=Zt(e.W,1),n=Zt(e.E,1),(n<1||n>7)&&(o=!0)):(i=t._locale._week.dow,a=t._locale._week.doy,c=Ms(Se(),i,a),s=Zt(e.gg,t._a[Fe],c.year),r=Zt(e.w,c.week),e.d!=null?(n=e.d,(n<0||n>6)&&(o=!0)):e.e!=null?(n=e.e+i,(e.e<0||e.e>6)&&(o=!0)):n=i),r<1||r>bt(s,i,a)?Q(t)._overflowWeeks=!0:o!=null?Q(t)._overflowWeekday=!0:(l=Fa(s,r,n,i,a),t._a[Fe]=l.year,t._dayOfYear=l.dayOfYear)}j.ISO_8601=function(){};j.RFC_2822=function(){};function Cn(t){if(t._f===j.ISO_8601){Va(t);return}if(t._f===j.RFC_2822){za(t);return}t._a=[],Q(t).empty=!0;var e=""+t._i,s,r,n,i,a,l=e.length,o=0,c,u;for(n=Ea(t._f,t._locale).match(bn)||[],u=n.length,s=0;s<u;s++)i=n[s],r=(e.match(td(i,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&Q(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),o+=r.length),rs[i]?(r?Q(t).empty=!1:Q(t).unusedTokens.push(i),rd(i,r,t)):t._strict&&!r&&Q(t).unusedTokens.push(i);Q(t).charsLeftOver=l-o,e.length>0&&Q(t).unusedInput.push(e),t._a[Ie]<=12&&Q(t).bigHour===!0&&t._a[Ie]>0&&(Q(t).bigHour=void 0),Q(t).parsedDateParts=t._a.slice(0),Q(t).meridiem=t._meridiem,t._a[Ie]=pf(t._locale,t._a[Ie],t._meridiem),c=Q(t).era,c!==null&&(t._a[Fe]=t._locale.erasConvertYear(c,t._a[Fe])),En(t),Mn(t)}function pf(t,e,s){var r;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(r=t.isPM(s),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function gf(t){var e,s,r,n,i,a,l=!1,o=t._f.length;if(o===0){Q(t).invalidFormat=!0,t._d=new Date(NaN);return}for(n=0;n<o;n++)i=0,a=!1,e=pn({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],Cn(e),mn(e)&&(a=!0),i+=Q(e).charsLeftOver,i+=Q(e).unusedTokens.length*10,Q(e).score=i,l?i<r&&(r=i,s=e):(r==null||i<r||a)&&(r=i,s=e,a&&(l=!0));Tt(t,s||e)}function bf(t){if(!t._d){var e=vn(t._i),s=e.day===void 0?e.date:e.day;t._a=Ta([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),En(t)}}function vf(t){var e=new js(Mn(Ga(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ga(t){var e=t._i,s=t._f;return t._locale=t._locale||wt(t._l),e===null||s===void 0&&e===""?pr({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),it(e)?new js(Mn(e)):(Rs(e)?t._d=e:nt(s)?gf(t):s?Cn(t):yf(t),mn(t)||(t._d=null),t))}function yf(t){var e=t._i;Be(e)?t._d=new Date(j.now()):Rs(e)?t._d=new Date(e.valueOf()):typeof e=="string"?ff(t):nt(e)?(t._a=Ta(e.slice(0),function(s){return parseInt(s,10)}),En(t)):Nt(e)?bf(t):vt(e)?t._d=new Date(e):j.createFromInputFallback(t)}function Ja(t,e,s,r,n){var i={};return(e===!0||e===!1)&&(r=e,e=void 0),(s===!0||s===!1)&&(r=s,s=void 0),(Nt(t)&&_n(t)||nt(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=n,i._l=s,i._i=t,i._f=e,i._strict=r,vf(i)}function Se(t,e,s,r){return Ja(t,e,s,r,!1)}var wf=Xe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:pr()}),kf=Xe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:pr()});function Ka(t,e){var s,r;if(e.length===1&&nt(e[0])&&(e=e[0]),!e.length)return Se();for(s=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](s))&&(s=e[r]);return s}function $f(){var t=[].slice.call(arguments,0);return Ka("isBefore",t)}function Sf(){var t=[].slice.call(arguments,0);return Ka("isAfter",t)}var Of=function(){return Date.now?Date.now():+new Date},gs=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Tf(t){var e,s=!1,r,n=gs.length;for(e in t)if(oe(t,e)&&!(Re.call(gs,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<n;++r)if(t[gs[r]]){if(s)return!1;parseFloat(t[gs[r]])!==se(t[gs[r]])&&(s=!0)}return!0}function Df(){return this._isValid}function Mf(){return at(NaN)}function Sr(t){var e=vn(t),s=e.year||0,r=e.quarter||0,n=e.month||0,i=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,o=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Tf(e),this._milliseconds=+u+c*1e3+o*6e4+l*1e3*60*60,this._days=+a+i*7,this._months=+n+r*3+s*12,this._data={},this._locale=wt(),this._bubble()}function zs(t){return t instanceof Sr}function Qr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Ef(t,e,s){var r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),i=0,a;for(a=0;a<r;a++)se(t[a])!==se(e[a])&&i++;return i+n}function Za(t,e){W(t,0,0,function(){var s=this.utcOffset(),r="+";return s<0&&(s=-s,r="-"),r+lt(~~(s/60),2)+e+lt(~~s%60,2)})}Za("Z",":");Za("ZZ","");x("Z",wr);x("ZZ",wr);pe(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=Pn(wr,t)});var Cf=/([\+\-]|\d\d)/gi;function Pn(t,e){var s=(e||"").match(t),r,n,i;return s===null?null:(r=s[s.length-1]||[],n=(r+"").match(Cf)||["-",0,0],i=+(n[1]*60)+se(n[2]),i===0?0:n[0]==="+"?i:-i)}function Rn(t,e){var s,r;return e._isUTC?(s=e.clone(),r=(it(t)||Rs(t)?t.valueOf():Se(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+r),j.updateOffset(s,!1),s):Se(t).local()}function Xr(t){return-Math.round(t._d.getTimezoneOffset())}j.updateOffset=function(){};function Pf(t,e,s){var r=this._offset||0,n;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Pn(wr,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(n=Xr(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),r!==t&&(!e||this._changeInProgress?eo(this,at(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,j.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Xr(this)}function Rf(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function jf(t){return this.utcOffset(0,t)}function Af(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Xr(this),"m")),this}function If(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Pn(Xh,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Lf(t){return this.isValid()?(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Yf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Nf(){if(!Be(this._isDSTShifted))return this._isDSTShifted;var t={},e;return pn(t,this),t=Ga(t),t._a?(e=t._isUTC?ct(t._a):Se(t._a),this._isDSTShifted=this.isValid()&&Ef(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Uf(){return this.isValid()?!this._isUTC:!1}function xf(){return this.isValid()?this._isUTC:!1}function Qa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ff=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Wf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function at(t,e){var s=t,r=null,n,i,a;return zs(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:vt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(r=Ff.exec(t))?(n=r[1]==="-"?-1:1,s={y:0,d:se(r[ot])*n,h:se(r[Ie])*n,m:se(r[rt])*n,s:se(r[pt])*n,ms:se(Qr(r[Yt]*1e3))*n}):(r=Wf.exec(t))?(n=r[1]==="-"?-1:1,s={y:jt(r[2],n),M:jt(r[3],n),w:jt(r[4],n),d:jt(r[5],n),h:jt(r[6],n),m:jt(r[7],n),s:jt(r[8],n)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=Hf(Se(s.from),Se(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),i=new Sr(s),zs(t)&&oe(t,"_locale")&&(i._locale=t._locale),zs(t)&&oe(t,"_isValid")&&(i._isValid=t._isValid),i}at.fn=Sr.prototype;at.invalid=Mf;function jt(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Bi(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Hf(t,e){var s;return t.isValid()&&e.isValid()?(e=Rn(e,t),t.isBefore(e)?s=Bi(t,e):(s=Bi(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function Xa(t,e){return function(s,r){var n,i;return r!==null&&!isNaN(+r)&&(Ma(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=r,r=i),n=at(s,r),eo(this,n,t),this}}function eo(t,e,s,r){var n=e._milliseconds,i=Qr(e._days),a=Qr(e._months);t.isValid()&&(r=r??!0,a&&Na(t,Ts(t,"Month")+a*s),i&&Ia(t,"Date",Ts(t,"Date")+i*s),n&&t._d.setTime(t._d.valueOf()+n*s),r&&j.updateOffset(t,i||a))}var Bf=Xa(1,"add"),qf=Xa(-1,"subtract");function to(t){return typeof t=="string"||t instanceof String}function Vf(t){return it(t)||Rs(t)||to(t)||vt(t)||Gf(t)||zf(t)||t===null||t===void 0}function zf(t){var e=Nt(t)&&!_n(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,i,a=r.length;for(n=0;n<a;n+=1)i=r[n],s=s||oe(t,i);return e&&s}function Gf(t){var e=nt(t),s=!1;return e&&(s=t.filter(function(r){return!vt(r)&&to(t)}).length===0),e&&s}function Jf(t){var e=Nt(t)&&!_n(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,i;for(n=0;n<r.length;n+=1)i=r[n],s=s||oe(t,i);return e&&s}function Kf(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function Zf(t,e){arguments.length===1&&(arguments[0]?Vf(arguments[0])?(t=arguments[0],e=void 0):Jf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||Se(),r=Rn(s,this).startOf("day"),n=j.calendarFormat(this,r)||"sameElse",i=e&&(ut(e[n])?e[n].call(this,s):e[n]);return this.format(i||this.localeData().calendar(n,this,Se(s)))}function Qf(){return new js(this)}function Xf(t,e){var s=it(t)?t:Se(t);return this.isValid()&&s.isValid()?(e=et(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function e_(t,e){var s=it(t)?t:Se(t);return this.isValid()&&s.isValid()?(e=et(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function t_(t,e,s,r){var n=it(t)?t:Se(t),i=it(e)?e:Se(e);return this.isValid()&&n.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(n,s):!this.isBefore(n,s))&&(r[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function s_(t,e){var s=it(t)?t:Se(t),r;return this.isValid()&&s.isValid()?(e=et(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(r=s.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function r_(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function n_(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function i_(t,e,s){var r,n,i;if(!this.isValid())return NaN;if(r=Rn(t,this),!r.isValid())return NaN;switch(n=(r.utcOffset()-this.utcOffset())*6e4,e=et(e),e){case"year":i=Gs(this,r)/12;break;case"month":i=Gs(this,r);break;case"quarter":i=Gs(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-n)/864e5;break;case"week":i=(this-r-n)/6048e5;break;default:i=this-r}return s?i:Ke(i)}function Gs(t,e){if(t.date()<e.date())return-Gs(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(s,"months"),n,i;return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)||0}j.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";j.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function a_(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function o_(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?Vs(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ut(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Vs(s,"Z")):Vs(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function l_(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,r,n,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=e+'[")]',this.format(s+r+n+i)}function c_(t){t||(t=this.isUtc()?j.defaultFormatUtc:j.defaultFormat);var e=Vs(this,t);return this.localeData().postformat(e)}function u_(t,e){return this.isValid()&&(it(t)&&t.isValid()||Se(t).isValid())?at({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function h_(t){return this.from(Se(),t)}function d_(t,e){return this.isValid()&&(it(t)&&t.isValid()||Se(t).isValid())?at({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function f_(t){return this.to(Se(),t)}function so(t){var e;return t===void 0?this._locale._abbr:(e=wt(t),e!=null&&(this._locale=e),this)}var ro=Xe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function no(){return this._locale}var rr=1e3,ns=60*rr,nr=60*ns,io=(365*400+97)*24*nr;function is(t,e){return(t%e+e)%e}function ao(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-io:new Date(t,e,s).valueOf()}function oo(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-io:Date.UTC(t,e,s)}function __(t){var e,s;if(t=et(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?oo:ao,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=is(e+(this._isUTC?0:this.utcOffset()*ns),nr);break;case"minute":e=this._d.valueOf(),e-=is(e,ns);break;case"second":e=this._d.valueOf(),e-=is(e,rr);break}return this._d.setTime(e),j.updateOffset(this,!0),this}function m_(t){var e,s;if(t=et(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?oo:ao,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=nr-is(e+(this._isUTC?0:this.utcOffset()*ns),nr)-1;break;case"minute":e=this._d.valueOf(),e+=ns-is(e,ns)-1;break;case"second":e=this._d.valueOf(),e+=rr-is(e,rr)-1;break}return this._d.setTime(e),j.updateOffset(this,!0),this}function p_(){return this._d.valueOf()-(this._offset||0)*6e4}function g_(){return Math.floor(this.valueOf()/1e3)}function b_(){return new Date(this.valueOf())}function v_(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function y_(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function w_(){return this.isValid()?this.toISOString():null}function k_(){return mn(this)}function $_(){return Tt({},Q(this))}function S_(){return Q(this).overflow}function O_(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}W("N",0,0,"eraAbbr");W("NN",0,0,"eraAbbr");W("NNN",0,0,"eraAbbr");W("NNNN",0,0,"eraName");W("NNNNN",0,0,"eraNarrow");W("y",["y",1],"yo","eraYear");W("y",["yy",2],0,"eraYear");W("y",["yyy",3],0,"eraYear");W("y",["yyyy",4],0,"eraYear");x("N",jn);x("NN",jn);x("NNN",jn);x("NNNN",L_);x("NNNNN",Y_);pe(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,r){var n=s._locale.erasParse(t,r,s._strict);n?Q(s).era=n:Q(s).invalidEra=t});x("y",hs);x("yy",hs);x("yyy",hs);x("yyyy",hs);x("yo",N_);pe(["y","yy","yyy","yyyy"],Fe);pe(["yo"],function(t,e,s,r){var n;s._locale._eraYearOrdinalRegex&&(n=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[Fe]=s._locale.eraYearOrdinalParse(t,n):e[Fe]=parseInt(t,10)});function T_(t,e){var s,r,n,i=this._eras||wt("en")._eras;for(s=0,r=i.length;s<r;++s){switch(typeof i[s].since){case"string":n=j(i[s].since).startOf("day"),i[s].since=n.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":n=j(i[s].until).startOf("day").valueOf(),i[s].until=n.valueOf();break}}return i}function D_(t,e,s){var r,n,i=this.eras(),a,l,o;for(t=t.toUpperCase(),r=0,n=i.length;r<n;++r)if(a=i[r].name.toUpperCase(),l=i[r].abbr.toUpperCase(),o=i[r].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return i[r];break;case"NNNN":if(a===t)return i[r];break;case"NNNNN":if(o===t)return i[r];break}else if([a,l,o].indexOf(t)>=0)return i[r]}function M_(t,e){var s=t.since<=t.until?1:-1;return e===void 0?j(t.since).year():j(t.since).year()+(e-t.offset)*s}function E_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].name;return""}function C_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].narrow;return""}function P_(){var t,e,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return r[t].abbr;return""}function R_(){var t,e,s,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-j(n[t].since).year())*s+n[t].offset;return this.year()}function j_(t){return oe(this,"_erasNameRegex")||An.call(this),t?this._erasNameRegex:this._erasRegex}function A_(t){return oe(this,"_erasAbbrRegex")||An.call(this),t?this._erasAbbrRegex:this._erasRegex}function I_(t){return oe(this,"_erasNarrowRegex")||An.call(this),t?this._erasNarrowRegex:this._erasRegex}function jn(t,e){return e.erasAbbrRegex(t)}function L_(t,e){return e.erasNameRegex(t)}function Y_(t,e){return e.erasNarrowRegex(t)}function N_(t,e){return e._eraYearOrdinalRegex||hs}function An(){var t=[],e=[],s=[],r=[],n,i,a,l,o,c=this.eras();for(n=0,i=c.length;n<i;++n)a=gt(c[n].name),l=gt(c[n].abbr),o=gt(c[n].narrow),e.push(a),t.push(l),s.push(o),r.push(a),r.push(l),r.push(o);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}W(0,["gg",2],0,function(){return this.weekYear()%100});W(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Or(t,e){W(0,[t,t.length],0,e)}Or("gggg","weekYear");Or("ggggg","weekYear");Or("GGGG","isoWeekYear");Or("GGGGG","isoWeekYear");x("G",yr);x("g",yr);x("GG",Oe,Ge);x("gg",Oe,Ge);x("GGGG",wn,yn);x("gggg",wn,yn);x("GGGGG",vr,gr);x("ggggg",vr,gr);Is(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,r){e[r.substr(0,2)]=se(t)});Is(["gg","GG"],function(t,e,s,r){e[r]=j.parseTwoDigitYear(t)});function U_(t){return lo.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function x_(t){return lo.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function F_(){return bt(this.year(),1,4)}function W_(){return bt(this.isoWeekYear(),1,4)}function H_(){var t=this.localeData()._week;return bt(this.year(),t.dow,t.doy)}function B_(){var t=this.localeData()._week;return bt(this.weekYear(),t.dow,t.doy)}function lo(t,e,s,r,n){var i;return t==null?Ms(this,r,n).year:(i=bt(t,r,n),e>i&&(e=i),q_.call(this,t,e,s,r,n))}function q_(t,e,s,r,n){var i=Fa(t,e,s,r,n),a=Ds(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}W("Q",0,"Qo","quarter");x("Q",Ca);pe("Q",function(t,e){e[mt]=(se(t)-1)*3});function V_(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}W("D",["DD",2],"Do","date");x("D",Oe,ds);x("DD",Oe,Ge);x("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});pe(["D","DD"],ot);pe("Do",function(t,e){e[ot]=se(t.match(Oe)[0])});var co=fs("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear");x("DDD",br);x("DDDD",Pa);pe(["DDD","DDDD"],function(t,e,s){s._dayOfYear=se(t)});function z_(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}W("m",["mm",2],0,"minute");x("m",Oe,kn);x("mm",Oe,Ge);pe(["m","mm"],rt);var G_=fs("Minutes",!1);W("s",["ss",2],0,"second");x("s",Oe,kn);x("ss",Oe,Ge);pe(["s","ss"],pt);var J_=fs("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)});W(0,["SS",2],0,function(){return~~(this.millisecond()/10)});W(0,["SSS",3],0,"millisecond");W(0,["SSSS",4],0,function(){return this.millisecond()*10});W(0,["SSSSS",5],0,function(){return this.millisecond()*100});W(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});W(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});W(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});W(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});x("S",br,Ca);x("SS",br,Ge);x("SSS",br,Pa);var Dt,uo;for(Dt="SSSS";Dt.length<=9;Dt+="S")x(Dt,hs);function K_(t,e){e[Yt]=se(("0."+t)*1e3)}for(Dt="S";Dt.length<=9;Dt+="S")pe(Dt,K_);uo=fs("Milliseconds",!1);W("z",0,0,"zoneAbbr");W("zz",0,0,"zoneName");function Z_(){return this._isUTC?"UTC":""}function Q_(){return this._isUTC?"Coordinated Universal Time":""}var R=js.prototype;R.add=Bf;R.calendar=Zf;R.clone=Qf;R.diff=i_;R.endOf=m_;R.format=c_;R.from=u_;R.fromNow=h_;R.to=d_;R.toNow=f_;R.get=od;R.invalidAt=S_;R.isAfter=Xf;R.isBefore=e_;R.isBetween=t_;R.isSame=s_;R.isSameOrAfter=r_;R.isSameOrBefore=n_;R.isValid=k_;R.lang=ro;R.locale=so;R.localeData=no;R.max=kf;R.min=wf;R.parsingFlags=$_;R.set=ld;R.startOf=__;R.subtract=qf;R.toArray=v_;R.toObject=y_;R.toDate=b_;R.toISOString=o_;R.inspect=l_;typeof Symbol<"u"&&Symbol.for!=null&&(R[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});R.toJSON=w_;R.toString=a_;R.unix=g_;R.valueOf=p_;R.creationData=O_;R.eraName=E_;R.eraNarrow=C_;R.eraAbbr=P_;R.eraYear=R_;R.year=Aa;R.isLeapYear=ad;R.weekYear=U_;R.isoWeekYear=x_;R.quarter=R.quarters=V_;R.month=Ua;R.daysInMonth=gd;R.week=R.weeks=Od;R.isoWeek=R.isoWeeks=Td;R.weeksInYear=H_;R.weeksInWeekYear=B_;R.isoWeeksInYear=F_;R.isoWeeksInISOWeekYear=W_;R.date=co;R.day=R.days=Ud;R.weekday=xd;R.isoWeekday=Fd;R.dayOfYear=z_;R.hour=R.hours=Gd;R.minute=R.minutes=G_;R.second=R.seconds=J_;R.millisecond=R.milliseconds=uo;R.utcOffset=Pf;R.utc=jf;R.local=Af;R.parseZone=If;R.hasAlignedHourOffset=Lf;R.isDST=Yf;R.isLocal=Uf;R.isUtcOffset=xf;R.isUtc=Qa;R.isUTC=Qa;R.zoneAbbr=Z_;R.zoneName=Q_;R.dates=Xe("dates accessor is deprecated. Use date instead.",co);R.months=Xe("months accessor is deprecated. Use month instead",Ua);R.years=Xe("years accessor is deprecated. Use year instead",Aa);R.zone=Xe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Rf);R.isDSTShifted=Xe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Nf);function X_(t){return Se(t*1e3)}function em(){return Se.apply(null,arguments).parseZone()}function ho(t){return t}var le=gn.prototype;le.calendar=Nh;le.longDateFormat=Wh;le.invalidDate=Bh;le.ordinal=zh;le.preparse=ho;le.postformat=ho;le.relativeTime=Jh;le.pastFuture=Kh;le.set=Lh;le.eras=T_;le.erasParse=D_;le.erasConvertYear=M_;le.erasAbbrRegex=A_;le.erasNameRegex=j_;le.erasNarrowRegex=I_;le.months=fd;le.monthsShort=_d;le.monthsParse=pd;le.monthsRegex=vd;le.monthsShortRegex=bd;le.week=wd;le.firstDayOfYear=Sd;le.firstDayOfWeek=$d;le.weekdays=Ad;le.weekdaysMin=Ld;le.weekdaysShort=Id;le.weekdaysParse=Nd;le.weekdaysRegex=Wd;le.weekdaysShortRegex=Hd;le.weekdaysMinRegex=Bd;le.isPM=Vd;le.meridiem=Jd;function ir(t,e,s,r){var n=wt(),i=ct().set(r,e);return n[s](i,t)}function fo(t,e,s){if(vt(t)&&(e=t,t=void 0),t=t||"",e!=null)return ir(t,e,s,"month");var r,n=[];for(r=0;r<12;r++)n[r]=ir(t,r,s,"month");return n}function In(t,e,s,r){typeof t=="boolean"?(vt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,vt(e)&&(s=e,e=void 0),e=e||"");var n=wt(),i=t?n._week.dow:0,a,l=[];if(s!=null)return ir(e,(s+i)%7,r,"day");for(a=0;a<7;a++)l[a]=ir(e,(a+i)%7,r,"day");return l}function tm(t,e){return fo(t,e,"months")}function sm(t,e){return fo(t,e,"monthsShort")}function rm(t,e,s){return In(t,e,s,"weekdays")}function nm(t,e,s){return In(t,e,s,"weekdaysShort")}function im(t,e,s){return In(t,e,s,"weekdaysMin")}Et("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=se(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});j.lang=Xe("moment.lang is deprecated. Use moment.locale instead.",Et);j.langData=Xe("moment.langData is deprecated. Use moment.localeData instead.",wt);var dt=Math.abs;function am(){var t=this._data;return this._milliseconds=dt(this._milliseconds),this._days=dt(this._days),this._months=dt(this._months),t.milliseconds=dt(t.milliseconds),t.seconds=dt(t.seconds),t.minutes=dt(t.minutes),t.hours=dt(t.hours),t.months=dt(t.months),t.years=dt(t.years),this}function _o(t,e,s,r){var n=at(e,s);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function om(t,e){return _o(this,t,e,1)}function lm(t,e){return _o(this,t,e,-1)}function qi(t){return t<0?Math.floor(t):Math.ceil(t)}function cm(){var t=this._milliseconds,e=this._days,s=this._months,r=this._data,n,i,a,l,o;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=qi(en(s)+e)*864e5,e=0,s=0),r.milliseconds=t%1e3,n=Ke(t/1e3),r.seconds=n%60,i=Ke(n/60),r.minutes=i%60,a=Ke(i/60),r.hours=a%24,e+=Ke(a/24),o=Ke(mo(e)),s+=o,e-=qi(en(o)),l=Ke(s/12),s%=12,r.days=e,r.months=s,r.years=l,this}function mo(t){return t*4800/146097}function en(t){return t*146097/4800}function um(t){if(!this.isValid())return NaN;var e,s,r=this._milliseconds;if(t=et(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,s=this._months+mo(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(en(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function kt(t){return function(){return this.as(t)}}var po=kt("ms"),hm=kt("s"),dm=kt("m"),fm=kt("h"),_m=kt("d"),mm=kt("w"),pm=kt("M"),gm=kt("Q"),bm=kt("y"),vm=po;function ym(){return at(this)}function wm(t){return t=et(t),this.isValid()?this[t+"s"]():NaN}function Ft(t){return function(){return this.isValid()?this._data[t]:NaN}}var km=Ft("milliseconds"),$m=Ft("seconds"),Sm=Ft("minutes"),Om=Ft("hours"),Tm=Ft("days"),Dm=Ft("months"),Mm=Ft("years");function Em(){return Ke(this.days()/7)}var ft=Math.round,Qt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Cm(t,e,s,r,n){return n.relativeTime(e||1,!!s,t,r)}function Pm(t,e,s,r){var n=at(t).abs(),i=ft(n.as("s")),a=ft(n.as("m")),l=ft(n.as("h")),o=ft(n.as("d")),c=ft(n.as("M")),u=ft(n.as("w")),f=ft(n.as("y")),_=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||a<=1&&["m"]||a<s.m&&["mm",a]||l<=1&&["h"]||l<s.h&&["hh",l]||o<=1&&["d"]||o<s.d&&["dd",o];return s.w!=null&&(_=_||u<=1&&["w"]||u<s.w&&["ww",u]),_=_||c<=1&&["M"]||c<s.M&&["MM",c]||f<=1&&["y"]||["yy",f],_[2]=e,_[3]=+t>0,_[4]=r,Cm.apply(null,_)}function Rm(t){return t===void 0?ft:typeof t=="function"?(ft=t,!0):!1}function jm(t,e){return Qt[t]===void 0?!1:e===void 0?Qt[t]:(Qt[t]=e,t==="s"&&(Qt.ss=e-1),!0)}function Am(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,r=Qt,n,i;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(r=Object.assign({},Qt,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),n=this.localeData(),i=Pm(this,!s,r,n),s&&(i=n.pastFuture(+this,i)),n.postformat(i)}var Ur=Math.abs;function zt(t){return(t>0)-(t<0)||+t}function Tr(){if(!this.isValid())return this.localeData().invalidDate();var t=Ur(this._milliseconds)/1e3,e=Ur(this._days),s=Ur(this._months),r,n,i,a,l=this.asSeconds(),o,c,u,f;return l?(r=Ke(t/60),n=Ke(r/60),t%=60,r%=60,i=Ke(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",o=l<0?"-":"",c=zt(this._months)!==zt(l)?"-":"",u=zt(this._days)!==zt(l)?"-":"",f=zt(this._milliseconds)!==zt(l)?"-":"",o+"P"+(i?c+i+"Y":"")+(s?c+s+"M":"")+(e?u+e+"D":"")+(n||r||t?"T":"")+(n?f+n+"H":"")+(r?f+r+"M":"")+(t?f+a+"S":"")):"P0D"}var ne=Sr.prototype;ne.isValid=Df;ne.abs=am;ne.add=om;ne.subtract=lm;ne.as=um;ne.asMilliseconds=po;ne.asSeconds=hm;ne.asMinutes=dm;ne.asHours=fm;ne.asDays=_m;ne.asWeeks=mm;ne.asMonths=pm;ne.asQuarters=gm;ne.asYears=bm;ne.valueOf=vm;ne._bubble=cm;ne.clone=ym;ne.get=wm;ne.milliseconds=km;ne.seconds=$m;ne.minutes=Sm;ne.hours=Om;ne.days=Tm;ne.weeks=Em;ne.months=Dm;ne.years=Mm;ne.humanize=Am;ne.toISOString=Tr;ne.toString=Tr;ne.toJSON=Tr;ne.locale=so;ne.localeData=no;ne.toIsoString=Xe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tr);ne.lang=ro;W("X",0,0,"unix");W("x",0,0,"valueOf");x("x",yr);x("X",ed);pe("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});pe("x",function(t,e,s){s._d=new Date(se(t))});//! moment.js
j.version="2.30.1";Ah(Se);j.fn=R;j.min=$f;j.max=Sf;j.now=Of;j.utc=ct;j.unix=X_;j.months=tm;j.isDate=Rs;j.locale=Et;j.invalid=pr;j.duration=at;j.isMoment=it;j.weekdays=rm;j.parseZone=em;j.localeData=wt;j.isDuration=zs;j.monthsShort=sm;j.weekdaysMin=im;j.defineLocale=Dn;j.updateLocale=Xd;j.locales=ef;j.weekdaysShort=nm;j.normalizeUnits=et;j.relativeTimeRounding=Rm;j.relativeTimeThreshold=jm;j.calendarFormat=Kf;j.prototype=R;j.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Im(t){let e,s,r,n,i,a,l,o,c,u,f,_;const g=t[4].default,p=or(g,t,t[3],null);return{c(){e=m("div"),s=m("label"),r=K(t[0]),n=k(),i=m("div"),p&&p.c(),a=k(),l=m("div"),o=m("button"),c=K(t[2]),h(s,"class","col-sm-4 col-md-3 col-form-label"),h(s,"for",t[1]),h(i,"class","col-sm-5 col-md-6 col-9"),h(o,"class","w-100 btn btn-outline-primary"),h(l,"class","col-sm-3 col-md-3 col-auto"),h(e,"class","mb-4 row justify-content-center")},m(y,b){E(y,e,b),d(e,s),d(s,r),d(e,n),d(e,i),p&&p.m(i,null),d(e,a),d(e,l),d(l,o),d(o,c),u=!0,f||(_=H(o,"click",t[5]),f=!0)},p(y,[b]){(!u||b&1)&&ae(r,y[0]),(!u||b&2)&&h(s,"for",y[1]),p&&p.p&&(!u||b&8)&&cr(p,g,y,y[3],u?lr(g,y[3],b,null):ur(y[3]),null),(!u||b&4)&&ae(c,y[2])},i(y){u||(S(p,y),u=!0)},o(y){T(p,y),u=!1},d(y){y&&M(e),p&&p.d(y),f=!1,_()}}}function Lm(t,e,s){let{$$slots:r={},$$scope:n}=e,{label:i}=e,{id:a}=e,{button:l}=e;function o(c){xr.call(this,t,c)}return t.$$set=c=>{"label"in c&&s(0,i=c.label),"id"in c&&s(1,a=c.id),"button"in c&&s(2,l=c.button),"$$scope"in c&&s(3,n=c.$$scope)},[i,a,l,n,r,o]}class Ym extends de{constructor(e){super(),he(this,e,Lm,Im,ue,{label:0,id:1,button:2})}}function Nm(t){let e,s,r,n,i,a,l,o;return{c(){e=m("div"),s=m("div"),r=m("b"),n=K(t[0]),i=K(":"),a=k(),l=m("div"),o=K(t[1]),h(s,"class","col-sm-4 col-md-4"),h(l,"class","col-sm-8 col-md-8"),h(e,"class","mb-2 row")},m(c,u){E(c,e,u),d(e,s),d(s,r),d(r,n),d(r,i),d(e,a),d(e,l),d(l,o)},p(c,[u]){u&1&&ae(n,c[0]),u&2&&ae(o,c[1])},i:P,o:P,d(c){c&&M(e)}}}function Um(t,e,s){let{key:r}=e,{value:n}=e;return t.$$set=i=>{"key"in i&&s(0,r=i.key),"value"in i&&s(1,n=i.value)},[r,n]}class Gt extends de{constructor(e){super(),he(this,e,Um,Nm,ue,{key:0,value:1})}}function xm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Reservation",h(e,"class",s="form-control "+t[8]),h(e,"type","number"),h(e,"id","reserve"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[3]),E(l,r,o),E(l,n,o),i||(a=[H(e,"input",t[15]),H(e,"keyup",t[16])],i=!0)},p(l,o){o&256&&s!==(s="form-control "+l[8])&&h(e,"class",s),o&8&&hr(e.value)!==l[3]&&V(e,l[3])},d(l){l&&(M(e),M(r),M(n)),i=!1,Me(a)}}}function Fm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Student",h(e,"class",s="form-control "+t[9]),h(e,"type","text"),h(e,"id","stud-id"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[4]),E(l,r,o),E(l,n,o),i||(a=[H(e,"input",t[17]),H(e,"keyup",t[18])],i=!0)},p(l,o){o&512&&s!==(s="form-control "+l[9])&&h(e,"class",s),o&16&&e.value!==l[4]&&V(e,l[4])},d(l){l&&(M(e),M(r),M(n)),i=!1,Me(a)}}}function Wm(t){let e,s,r,n,i,a;return{c(){e=m("input"),r=k(),n=m("div"),n.textContent="Cannot Find Book",h(e,"class",s="form-control "+t[10]),h(e,"type","text"),h(e,"id","book-barcode"),h(n,"class","invalid-feedback")},m(l,o){E(l,e,o),V(e,t[5]),E(l,r,o),E(l,n,o),i||(a=[H(e,"input",t[19]),H(e,"keyup",t[20])],i=!0)},p(l,o){o&1024&&s!==(s="form-control "+l[10])&&h(e,"class",s),o&32&&e.value!==l[5]&&V(e,l[5])},d(l){l&&(M(e),M(r),M(n)),i=!1,Me(a)}}}function Vi(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w;return n=new Gt({props:{key:"Borrow ID",value:"-- Preview --"}}),a=new Gt({props:{key:"Name",value:t[6]}}),o=new Gt({props:{key:"Book Title",value:t[7]+" ("+t[5]+")"}}),u=new Gt({props:{key:"Staff Name",value:"Francis James E. Salles (153827)"}}),_=new Gt({props:{key:"Borrow Date",value:j(t[0]).format("MMMM DD, YYYY - hh:mm a")}}),p=new Gt({props:{key:"Return Due",value:j(t[1]).format("MMMM DD, YYYY")+" ("+t[11]+" days)"}}),{c(){e=m("div"),s=m("h3"),s.textContent="Borrow Preview",r=k(),L(n.$$.fragment),i=k(),L(a.$$.fragment),l=k(),L(o.$$.fragment),c=k(),L(u.$$.fragment),f=k(),L(_.$$.fragment),g=k(),L(p.$$.fragment),y=k(),b=m("div"),b.innerHTML='<button class="btn btn-secondary"><i class="bi bi-arrow-up-circle"></i> Borrow</button>',h(s,"class","py-4 text-center"),h(b,"class","float-end my-2"),h(e,"class","col-sm-12 col-lg-5 border border-1 px-5")},m(v,$){E(v,e,$),d(e,s),d(e,r),A(n,e,null),d(e,i),A(a,e,null),d(e,l),A(o,e,null),d(e,c),A(u,e,null),d(e,f),A(_,e,null),d(e,g),A(p,e,null),d(e,y),d(e,b),w=!0},p(v,$){const D={};$&64&&(D.value=v[6]),a.$set(D);const O={};$&160&&(O.value=v[7]+" ("+v[5]+")"),o.$set(O);const C={};$&1&&(C.value=j(v[0]).format("MMMM DD, YYYY - hh:mm a")),_.$set(C);const N={};$&2050&&(N.value=j(v[1]).format("MMMM DD, YYYY")+" ("+v[11]+" days)"),p.$set(N)},i(v){w||(S(n.$$.fragment,v),S(a.$$.fragment,v),S(o.$$.fragment,v),S(u.$$.fragment,v),S(_.$$.fragment,v),S(p.$$.fragment,v),w=!0)},o(v){T(n.$$.fragment,v),T(a.$$.fragment,v),T(o.$$.fragment,v),T(u.$$.fragment,v),T(_.$$.fragment,v),T(p.$$.fragment,v),w=!1},d(v){v&&M(e),I(n),I(a),I(o),I(u),I(_),I(p)}}}function Hm(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q,F,z,ee,Z,fe,G,Y,B,ce,ge,Ee,_e,be,Ye,Ae,He,ht;s=new yt({props:{text:"Borrow Book"}}),a=new Ym({props:{label:"Reservation ID:",id:"reserve",button:"Fetch",$$slots:{default:[xm]},$$scope:{ctx:t}}}),a.$on("click",t[14]),u=new je({props:{label:"Student ID:",id:"stud-id",$$slots:{default:[Fm]},$$scope:{ctx:t}}}),_=new je({props:{label:"Book Barcode:",id:"book-barcode",$$slots:{default:[Wm]},$$scope:{ctx:t}}});let ve=t[2]&&Vi(t);return{c(){e=m("main"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),L(a.$$.fragment),l=k(),o=m("hr"),c=k(),L(u.$$.fragment),f=k(),L(_.$$.fragment),g=k(),p=m("div"),y=m("label"),y.textContent="Borrow Date:",b=k(),w=m("div"),v=m("input"),D=k(),O=m("div"),C=m("button"),C.textContent="Today",N=k(),U=m("div"),q=m("label"),q.textContent="Return Due:",F=k(),z=m("div"),ee=m("input"),fe=k(),G=m("div"),Y=m("button"),Y.textContent=`~${tn} Days`,B=k(),ce=m("div"),ge=m("button"),ge.innerHTML='<i class="bi bi-receipt"></i> Preview',Ee=k(),_e=m("a"),_e.innerHTML='<i class="bi bi-x-circle"></i> Cancel',be=k(),ve&&ve.c(),h(o,"class","mb-4"),h(y,"class","col-sm-4 col-md-3 col-form-label"),h(y,"for","borrow-date"),h(v,"class","form-control"),h(v,"type","datetime-local"),h(v,"id","borrow-date"),h(v,"max",$=j(t[1]).format("YYYY-MM-DD HH:mm")),h(w,"class","col-sm-5 col-md-6 col-7"),h(C,"class","w-100 btn btn-outline-primary"),h(O,"class","col-sm-3 col-md-3 col-auto"),h(p,"class","mb-4 row justify-content-center"),h(q,"class","col-sm-4 col-md-3 col-form-label"),h(q,"for","return-date"),h(ee,"class","form-control"),h(ee,"type","date"),h(ee,"id","return-date"),h(ee,"min",Z=j(t[0]).format("YYYY-MM-DD")),h(z,"class","col-sm-5 col-md-6 col-7"),h(Y,"class","w-100 btn btn-outline-primary"),h(G,"class","col-sm-3 col-md-3 col-auto"),h(U,"class","mb-4 row justify-content-center"),h(ge,"class","btn btn-success"),h(_e,"href","./#/"),h(_e,"class","btn btn-danger"),h(ce,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-around"),h(e,"class","container")},m(X,me){E(X,e,me),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),d(i,o),d(i,c),A(u,i,null),d(i,f),A(_,i,null),d(i,g),d(i,p),d(p,y),d(p,b),d(p,w),d(w,v),V(v,t[0]),d(p,D),d(p,O),d(O,C),d(i,N),d(i,U),d(U,q),d(U,F),d(U,z),d(z,ee),V(ee,t[1]),d(U,fe),d(U,G),d(G,Y),d(i,B),d(i,ce),d(ce,ge),d(ce,Ee),d(ce,_e),d(n,be),ve&&ve.m(n,null),Ae=!0,He||(ht=[H(v,"input",t[21]),H(C,"click",t[22]),H(ee,"input",t[23]),H(Y,"click",t[24]),H(ge,"click",t[25])],He=!0)},p(X,[me]){const Le={};me&268435720&&(Le.$$scope={dirty:me,ctx:X}),a.$set(Le);const ie={};me&268435984&&(ie.$$scope={dirty:me,ctx:X}),u.$set(ie);const J={};me&268436512&&(J.$$scope={dirty:me,ctx:X}),_.$set(J),(!Ae||me&2&&$!==($=j(X[1]).format("YYYY-MM-DD HH:mm")))&&h(v,"max",$),me&1&&V(v,X[0]),(!Ae||me&1&&Z!==(Z=j(X[0]).format("YYYY-MM-DD")))&&h(ee,"min",Z),me&2&&V(ee,X[1]),X[2]?ve?(ve.p(X,me),me&4&&S(ve,1)):(ve=Vi(X),ve.c(),S(ve,1),ve.m(n,null)):ve&&(ke(),T(ve,1,1,()=>{ve=null}),$e())},i(X){Ae||(S(s.$$.fragment,X),S(a.$$.fragment,X),S(u.$$.fragment,X),S(_.$$.fragment,X),S(ve),X&&(Ye||Ne(()=>{Ye=Ve(e,ze,{duration:500}),Ye.start()})),Ae=!0)},o(X){T(s.$$.fragment,X),T(a.$$.fragment,X),T(u.$$.fragment,X),T(_.$$.fragment,X),T(ve),Ae=!1},d(X){X&&M(e),I(s),I(a),I(u),I(_),ve&&ve.d(),He=!1,Me(ht)}}}const tn=14;function Bm(t,e,s){let r,n;Ki(t,Go,G=>s(26,n=G));const i=j().format("YYYY-MM-DD HH:mm");let a=i,l=j(i).add(tn,"days").format("YYYY-MM-DD"),o=!1,c,u,f;const _=new URLSearchParams(n);c=_.get("reserve_id")||"",f=_.get("barcode")||"";let g,p,y,b,w;async function v(){const{data:G,error:Y}=await we.from("account_details").select("fname, lname").eq("user_id",u).single();Y?s(9,b="is-invalid"):s(6,g=`${G.fname} ${G.lname}`);const{data:B,error:ce}=await we.from("library_holdings").select("books(title)").eq("barcode",f).single();ce||!B?s(10,w="is-invalid"):s(7,p=B.books.title),s(2,o=!o)}async function $(){const{data:G,error:Y}=await we.from("book_reservation").select("stud_id, library_holdings(barcode)").eq("reservation_id",c).single();Y||!G?(s(8,y="is-invalid"),console.error(Y)):(s(4,u=G.stud_id),s(5,f=G.library_holdings.barcode),v())}function D(){c=hr(this.value),s(3,c)}const O=()=>s(8,y="");function C(){u=this.value,s(4,u)}const N=()=>s(9,b="");function U(){f=this.value,s(5,f)}const q=()=>s(10,w="");function F(){a=this.value,s(0,a)}const z=()=>s(0,a=i);function ee(){l=this.value,s(1,l)}const Z=()=>s(1,l=j(a).add(tn,"days").format("YYYY-MM-DD")),fe=()=>{v()};return t.$$.update=()=>{t.$$.dirty&3&&s(11,r=j(l).subtract(a,"days").subtract(1,"days").format("DD"))},[a,l,o,c,u,f,g,p,y,b,w,r,i,v,$,D,O,C,N,U,q,F,z,ee,Z,fe]}class qm extends de{constructor(e){super(),he(this,e,Bm,Hm,ue,{})}}function Vm(t){let e;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","text"),h(e,"id","book-id")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function zm(t){let e,s,r,n,i;return{c(){e=m("select"),s=m("option"),s.textContent="New",r=m("option"),r.textContent="Good",n=m("option"),n.textContent="Fair",i=m("option"),i.textContent="Poor",s.__value="New",V(s,s.__value),r.__value="Good",V(r,r.__value),n.__value="Fair",V(n,n.__value),i.__value="Poor",V(i,i.__value),h(e,"class","form-select"),h(e,"id","book-condition")},m(a,l){E(a,e,l),d(e,s),d(e,r),d(e,n),d(e,i)},p:P,d(a){a&&M(e)}}}function Gm(t){let e;return{c(){e=m("textarea"),h(e,"class","form-control"),h(e,"rows","3"),h(e,"id","book-note")},m(s,r){E(s,e,r)},p:P,d(s){s&&M(e)}}}function Jm(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q;return s=new yt({props:{text:"Return Book"}}),a=new je({props:{label:"Borrow ID:",id:"book-id",$$slots:{default:[Vm]},$$scope:{ctx:t}}}),o=new je({props:{label:"Condition:",id:"book-condition",$$slots:{default:[zm]},$$scope:{ctx:t}}}),u=new je({props:{label:"Note:",id:"book-note",$$slots:{default:[Gm]},$$scope:{ctx:t}}}),{c(){e=m("main"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),L(a.$$.fragment),l=k(),L(o.$$.fragment),c=k(),L(u.$$.fragment),f=k(),_=m("div"),g=m("label"),g.textContent="Return Time:",p=k(),y=m("div"),b=m("input"),w=k(),v=m("div"),$=m("button"),$.textContent="Today",D=k(),O=m("div"),O.innerHTML='<button class="btn btn-success"><i class="bi bi-arrow-down-circle"></i> Return</button> <a href="./#/" class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</a>',h(g,"class","col-sm-4 col-md-3 col-form-label"),h(g,"for","return-time"),h(b,"class","form-control"),h(b,"type","datetime-local"),h(b,"id","return-time"),h(y,"class","col-sm-5 col-md-6 col-7"),h($,"class","w-100 btn btn-outline-primary"),h(v,"class","col-sm-3 col-md-3 col-auto"),h(_,"class","mb-4 row justify-content-center"),h(O,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","row justify-content-center"),h(e,"class","container")},m(F,z){E(F,e,z),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),d(i,_),d(_,g),d(_,p),d(_,y),d(y,b),V(b,t[0]),d(_,w),d(_,v),d(v,$),d(i,D),d(i,O),N=!0,U||(q=[H(b,"input",t[2]),H($,"click",Do(t[3]))],U=!0)},p(F,[z]){const ee={};z&32&&(ee.$$scope={dirty:z,ctx:F}),a.$set(ee);const Z={};z&32&&(Z.$$scope={dirty:z,ctx:F}),o.$set(Z);const fe={};z&32&&(fe.$$scope={dirty:z,ctx:F}),u.$set(fe),z&1&&V(b,F[0])},i(F){N||(S(s.$$.fragment,F),S(a.$$.fragment,F),S(o.$$.fragment,F),S(u.$$.fragment,F),F&&(C||Ne(()=>{C=Ve(e,ze,{duration:500}),C.start()})),N=!0)},o(F){T(s.$$.fragment,F),T(a.$$.fragment,F),T(o.$$.fragment,F),T(u.$$.fragment,F),N=!1},d(F){F&&M(e),I(s),I(a),I(o),I(u),U=!1,Me(q)}}}function Km(t,e,s){let r=j().format("YYYY-MM-DD HH:mm"),n=r;j(r).add(5,"days").format("YYYY-MM-DD");function i(){n=this.value,s(0,n)}return[n,r,i,()=>s(0,n=r)]}class Zm extends de{constructor(e){super(),he(this,e,Km,Jm,ue,{})}}function Qm(t){let e,s;return{c(){e=m("div"),e.innerHTML='<h1>Missing Link <i class="bi bi-link-45deg"></i></h1> <div class="text-center mb-4"><p class="my-0">We couldn&#39;t find the page you requested. Please check the URL and try again.</p> <small class="text-secondary fw-bold">404 : Not Found</small></div> <a href="./#/" class="fw-bold">Back to Home</a>',h(e,"class","d-flex align-items-center justify-content-center flex-column gap-2"),Ut(e,"height","70vh")},m(r,n){E(r,e,n)},p:P,i(r){r&&(s||Ne(()=>{s=Ve(e,ze,{duration:500}),s.start()}))},o:P,d(r){r&&M(e)}}}class go extends de{constructor(e){super(),he(this,e,null,Qm,ue,{})}}function Xm(t){let e,s,r,n;return{c(){e=m("input"),h(e,"class",s="form-control "+t[7]),h(e,"type","text"),h(e,"id","author-name")},m(i,a){E(i,e,a),V(e,t[4]),r||(n=[H(e,"input",t[11]),H(e,"keyup",t[12])],r=!0)},p(i,a){a&128&&s!==(s="form-control "+i[7])&&h(e,"class",s),a&16&&e.value!==i[4]&&V(e,i[4])},d(i){i&&M(e),r=!1,Me(n)}}}function ep(t){let e,s,r,n;return{c(){e=m("textarea"),h(e,"class",s="form-control "+t[8]),h(e,"id","author-bio"),h(e,"rows","4")},m(i,a){E(i,e,a),V(e,t[5]),r||(n=[H(e,"input",t[13]),H(e,"keyup",t[14])],r=!0)},p(i,a){a&256&&s!==(s="form-control "+i[8])&&h(e,"class",s),a&32&&V(e,i[5])},d(i){i&&M(e),r=!1,Me(n)}}}function tp(t){let e,s,r,n;return{c(){e=m("input"),h(e,"type","text"),h(e,"id","author-link"),h(e,"class",s="form-control "+t[9])},m(i,a){E(i,e,a),V(e,t[6]),r||(n=[H(e,"input",t[15]),H(e,"keyup",t[16])],r=!0)},p(i,a){a&512&&s!==(s="form-control "+i[9])&&h(e,"class",s),a&64&&e.value!==i[6]&&V(e,i[6])},d(i){i&&M(e),r=!1,Me(n)}}}function sp(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","author-pic"),h(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),s||(r=H(e,"change",t[17]),s=!0)},p:P,d(n){n&&M(e),t[18](null),s=!1,r()}}}function rp(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q,F,z,ee,Z,fe,G;return s=new yt({props:{text:"Add Author"}}),a=new je({props:{label:"Author Name:",id:"author-name",$$slots:{default:[Xm]},$$scope:{ctx:t}}}),o=new je({props:{label:"Author Bio:",id:"author-bio",$$slots:{default:[ep]},$$scope:{ctx:t}}}),u=new je({props:{label:"Author Link:",id:"author-link",$$slots:{default:[tp]},$$scope:{ctx:t}}}),_=new je({props:{label:"Picture:",id:"author-pic",$$slots:{default:[sp]},$$scope:{ctx:t}}}),{c(){e=m("section"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),L(a.$$.fragment),l=k(),L(o.$$.fragment),c=k(),L(u.$$.fragment),f=k(),L(_.$$.fragment),g=k(),p=m("div"),y=m("label"),y.textContent="Preview:",b=k(),w=m("div"),v=m("img"),D=k(),O=m("button"),O.textContent="Remove",N=k(),U=m("div"),q=m("button"),q.innerHTML='<i class="bi bi-plus-circle"></i> Add Author',F=k(),z=m("a"),z.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',h(y,"for","cover-preview"),h(y,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We(v.src,$=t[3])||h(v,"src",$),h(v,"alt","Preview"),h(v,"id","cover-preview"),h(v,"height","150"),h(O,"class","btn btn-sm btn-danger"),h(w,"class","col-sm-8 col-md-9"),h(w,"id","preview-div"),h(p,"class",C="my-3 row "+t[2]),h(q,"class","btn btn-success"),h(z,"href","./#/"),h(U,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","justify-content-around row"),h(e,"class","container")},m(Y,B){E(Y,e,B),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),A(_,i,null),d(i,g),d(i,p),d(p,y),d(p,b),d(p,w),d(w,v),d(w,D),d(w,O),d(i,N),d(i,U),d(U,q),d(U,F),d(U,z),Z=!0,fe||(G=[H(O,"click",t[19]),H(q,"click",t[10])],fe=!0)},p(Y,[B]){const ce={};B&1048720&&(ce.$$scope={dirty:B,ctx:Y}),a.$set(ce);const ge={};B&1048864&&(ge.$$scope={dirty:B,ctx:Y}),o.$set(ge);const Ee={};B&1049152&&(Ee.$$scope={dirty:B,ctx:Y}),u.$set(Ee);const _e={};B&1048579&&(_e.$$scope={dirty:B,ctx:Y}),_.$set(_e),(!Z||B&8&&!We(v.src,$=Y[3]))&&h(v,"src",$),(!Z||B&4&&C!==(C="my-3 row "+Y[2]))&&h(p,"class",C)},i(Y){Z||(S(s.$$.fragment,Y),S(a.$$.fragment,Y),S(o.$$.fragment,Y),S(u.$$.fragment,Y),S(_.$$.fragment,Y),Y&&(ee||Ne(()=>{ee=Ve(e,ze,{duration:500}),ee.start()})),Z=!0)},o(Y){T(s.$$.fragment,Y),T(a.$$.fragment,Y),T(o.$$.fragment,Y),T(u.$$.fragment,Y),T(_.$$.fragment,Y),Z=!1},d(Y){Y&&M(e),I(s),I(a),I(o),I(u),I(_),fe=!1,Me(G)}}}function np(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=o?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,s(4,l)}const y=()=>s(7,u="");function b(){o=this.value,s(5,o)}const w=()=>s(8,f="");function v(){c=this.value,s(6,c)}const $=()=>s(9,_="");function D(){r=this.files,s(0,r)}function O(N){as[N?"unshift":"push"](()=>{n=N,s(1,n)})}const C=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const N=URL.createObjectURL(r[0]);s(3,a=N)}else s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C]}class ip extends de{constructor(e){super(),he(this,e,np,rp,ue,{})}}function ap(t){let e,s,r,n;return{c(){e=m("input"),h(e,"class",s="form-control "+t[7]),h(e,"type","text"),h(e,"id","publisher-name")},m(i,a){E(i,e,a),V(e,t[4]),r||(n=[H(e,"input",t[11]),H(e,"keyup",t[12])],r=!0)},p(i,a){a&128&&s!==(s="form-control "+i[7])&&h(e,"class",s),a&16&&e.value!==i[4]&&V(e,i[4])},d(i){i&&M(e),r=!1,Me(n)}}}function op(t){let e,s,r,n;return{c(){e=m("textarea"),h(e,"class",s="form-control "+t[8]),h(e,"id","publisher-description"),h(e,"rows","4")},m(i,a){E(i,e,a),V(e,t[5]),r||(n=[H(e,"input",t[13]),H(e,"keyup",t[14])],r=!0)},p(i,a){a&256&&s!==(s="form-control "+i[8])&&h(e,"class",s),a&32&&V(e,i[5])},d(i){i&&M(e),r=!1,Me(n)}}}function lp(t){let e,s,r,n;return{c(){e=m("input"),h(e,"type","text"),h(e,"id","publisher-link"),h(e,"class",s="form-control "+t[9])},m(i,a){E(i,e,a),V(e,t[6]),r||(n=[H(e,"input",t[15]),H(e,"keyup",t[16])],r=!0)},p(i,a){a&512&&s!==(s="form-control "+i[9])&&h(e,"class",s),a&64&&e.value!==i[6]&&V(e,i[6])},d(i){i&&M(e),r=!1,Me(n)}}}function cp(t){let e,s,r;return{c(){e=m("input"),h(e,"class","form-control"),h(e,"type","file"),h(e,"id","publisher-pic"),h(e,"accept","image/*")},m(n,i){E(n,e,i),t[18](e),s||(r=H(e,"change",t[17]),s=!0)},p:P,d(n){n&&M(e),t[18](null),s=!1,r()}}}function up(t){let e,s,r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C,N,U,q,F,z,ee,Z,fe,G;return s=new yt({props:{text:"Add Publisher"}}),a=new je({props:{label:"Publisher Name:",id:"publisher-name",$$slots:{default:[ap]},$$scope:{ctx:t}}}),o=new je({props:{label:"Publisher Description:",id:"publisher-description",$$slots:{default:[op]},$$scope:{ctx:t}}}),u=new je({props:{label:"Publisher Link:",id:"publisher-link",$$slots:{default:[lp]},$$scope:{ctx:t}}}),_=new je({props:{label:"Picture:",id:"publisher-pic",$$slots:{default:[cp]},$$scope:{ctx:t}}}),{c(){e=m("section"),L(s.$$.fragment),r=k(),n=m("div"),i=m("div"),L(a.$$.fragment),l=k(),L(o.$$.fragment),c=k(),L(u.$$.fragment),f=k(),L(_.$$.fragment),g=k(),p=m("div"),y=m("label"),y.textContent="Preview:",b=k(),w=m("div"),v=m("img"),D=k(),O=m("button"),O.textContent="Remove",N=k(),U=m("div"),q=m("button"),q.innerHTML='<i class="bi bi-plus-circle"></i> Add Publisher',F=k(),z=m("a"),z.innerHTML='<button class="btn btn-danger"><i class="bi bi-x-circle"></i> Cancel</button>',h(y,"for","cover-preview"),h(y,"class","col-sm-4 col-md-3 col-form-label align-self-center"),We(v.src,$=t[3])||h(v,"src",$),h(v,"alt","Preview"),h(v,"id","cover-preview"),h(v,"height","150"),h(O,"class","btn btn-sm btn-danger"),h(w,"class","col-sm-8 col-md-9"),h(w,"id","preview-div"),h(p,"class",C="my-3 row "+t[2]),h(q,"class","btn btn-success"),h(z,"href","./#/"),h(U,"class","float-end"),h(i,"class","col-sm-12 col-lg-6"),h(n,"class","justify-content-around row"),h(e,"class","container")},m(Y,B){E(Y,e,B),A(s,e,null),d(e,r),d(e,n),d(n,i),A(a,i,null),d(i,l),A(o,i,null),d(i,c),A(u,i,null),d(i,f),A(_,i,null),d(i,g),d(i,p),d(p,y),d(p,b),d(p,w),d(w,v),d(w,D),d(w,O),d(i,N),d(i,U),d(U,q),d(U,F),d(U,z),Z=!0,fe||(G=[H(O,"click",t[19]),H(q,"click",t[10])],fe=!0)},p(Y,[B]){const ce={};B&1048720&&(ce.$$scope={dirty:B,ctx:Y}),a.$set(ce);const ge={};B&1048864&&(ge.$$scope={dirty:B,ctx:Y}),o.$set(ge);const Ee={};B&1049152&&(Ee.$$scope={dirty:B,ctx:Y}),u.$set(Ee);const _e={};B&1048579&&(_e.$$scope={dirty:B,ctx:Y}),_.$set(_e),(!Z||B&8&&!We(v.src,$=Y[3]))&&h(v,"src",$),(!Z||B&4&&C!==(C="my-3 row "+Y[2]))&&h(p,"class",C)},i(Y){Z||(S(s.$$.fragment,Y),S(a.$$.fragment,Y),S(o.$$.fragment,Y),S(u.$$.fragment,Y),S(_.$$.fragment,Y),Y&&(ee||Ne(()=>{ee=Ve(e,ze,{duration:500}),ee.start()})),Z=!0)},o(Y){T(s.$$.fragment,Y),T(a.$$.fragment,Y),T(o.$$.fragment,Y),T(u.$$.fragment,Y),T(_.$$.fragment,Y),Z=!1},d(Y){Y&&M(e),I(s),I(a),I(o),I(u),I(_),fe=!1,Me(G)}}}function hp(t,e,s){let r,n,i="d-none",a,l,o,c,u,f,_;async function g(){s(7,u=l?"":"is-invalid"),s(8,f=o?"":"is-invalid"),s(9,_=c?"":"is-invalid"),console.log(u,f,_)}function p(){l=this.value,s(4,l)}const y=()=>s(7,u="");function b(){o=this.value,s(5,o)}const w=()=>s(8,f="");function v(){c=this.value,s(6,c)}const $=()=>s(9,_="");function D(){r=this.files,s(0,r)}function O(N){as[N?"unshift":"push"](()=>{n=N,s(1,n)})}const C=()=>{s(1,n.value="",n),s(0,r="")};return t.$$.update=()=>{if(t.$$.dirty&1)if(r&&r[0]){console.log(r),s(2,i="");const N=URL.createObjectURL(r[0]);s(3,a=N)}else s(2,i="d-none")},[r,n,i,a,l,o,c,u,f,_,g,p,y,b,w,v,$,D,O,C]}class dp extends de{constructor(e){super(),he(this,e,hp,up,ue,{})}}function fp(t){let e,s;return e=new an({props:{routes:{"*":jh}}}),{c(){L(e.$$.fragment)},m(r,n){A(e,r,n),s=!0},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),s=!1},d(r){I(e,r)}}}function _p(t){let e,s,r,n;return e=new oa({}),r=new an({props:{routes:{"/":$h,"/book/:bookID":ka,"/author/:authorID":$a,"/publisher/:publisherID":Sa,"/search":ss,"/search/author":ss,"/search/publisher":ss,"/add-book":sh,"/add-author":ip,"/add-publisher":dp,"/borrow":qm,"/return":Zm,"*":go}}}),{c(){L(e.$$.fragment),s=k(),L(r.$$.fragment)},m(i,a){A(e,i,a),E(i,s,a),A(r,i,a),n=!0},i(i){n||(S(e.$$.fragment,i),S(r.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),n=!1},d(i){i&&M(s),I(e,i),I(r,i)}}}function mp(t){let e,s,r,n;return e=new oa({}),r=new an({props:{routes:{"/":_u,"/book/:bookID":ka,"/author/:authorID":$a,"/publisher/:publisherID":Sa,"/search":ss,"/search/author":ss,"/search/publisher":ss,"*":go}}}),{c(){L(e.$$.fragment),s=k(),L(r.$$.fragment)},m(i,a){A(e,i,a),E(i,s,a),A(r,i,a),n=!0},i(i){n||(S(e.$$.fragment,i),S(r.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),n=!1},d(i){i&&M(s),I(e,i),I(r,i)}}}function pp(t){let e,s,r,n;const i=[mp,_p,fp],a=[];function l(o,c){return o[0]=="client"?0:o[0]=="staff"?1:2}return e=l(t),s=a[e]=i[e](t),{c(){s.c(),r=Qe()},m(o,c){a[e].m(o,c),E(o,r,c),n=!0},p(o,[c]){let u=e;e=l(o),e!==u&&(ke(),T(a[u],1,1,()=>{a[u]=null}),$e(),s=a[e],s||(s=a[e]=i[e](o),s.c()),S(s,1),s.m(r.parentNode,r))},i(o){n||(S(s),n=!0)},o(o){T(s),n=!1},d(o){o&&M(r),a[e].d(o)}}}function gp(t,e,s){let r;return os.subscribe(n=>{s(0,r=n);const i=r=="staff"?"153827":r=="client"?"263690":"";Wo.set(i),localStorage.setItem("user_id",i)}),[r]}class bp extends de{constructor(e){super(),he(this,e,gp,pp,ue,{})}}new bp({target:document.getElementById("app")})});export default vp();
